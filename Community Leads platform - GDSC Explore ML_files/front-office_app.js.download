/*! For license information please see front-office_app.js.LICENSE.txt */
!function(e){function t(t){for(var r,i,a=t[0],l=t[1],u=t[2],d=t[3]||[],f=0,g=[];f<a.length;f++)i=a[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&g.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(p&&p(t),c.push.apply(c,d);g.length;)g.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,l=1;l<n.length;l++){var u=n[l];0!==o[u]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return 0===s.length&&(c.forEach((function(e){if(void 0===o[e]){o[e]=null;var t=document.createElement("link");t.crossOrigin="anonymous",i.nc&&t.setAttribute("nonce",i.nc),t.rel="prefetch",t.as="script",t.href=r(e),document.head.appendChild(t)}})),c.length=0),e}function r(e){return i.p+""+({"back-office_templates":"back-office_templates","back-office":"back-office",froala:"froala",jsonpath:"jsonpath"}[e]||e)+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var a={},o={"front-office_app":0,"front-office_libs":0},s=[],c=[];i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(e),0!==c.src.indexOf(window.location.origin+"/")&&(c.crossOrigin="anonymous");var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}o[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://prod.cdn.lumapps.com/a5a6f177b6/",i.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u,f=(s.push([468,"common"]),n());t([[],{},0,["common","back-office","froala","back-office_templates","jsonpath"]])}([,function(e,t,n){"use strict";n.r(t);var r=n(108);n.d(t,"Alignment",(function(){return r.b})),n.d(t,"AspectRatio",(function(){return r.c})),n.d(t,"ColorPalette",(function(){return r.n})),n.d(t,"ColorVariant",(function(){return r.o})),n.d(t,"Emphasis",(function(){return r.z})),n.d(t,"Kind",(function(){return r.L})),n.d(t,"Orientation",(function(){return r.W})),n.d(t,"Size",(function(){return r.ob})),n.d(t,"Theme",(function(){return r.Lb})),n.d(t,"Typography",(function(){return r.Rb})),n.d(t,"AlertDialog",(function(){return r.a})),n.d(t,"Placement",(function(){return r.X})),n.d(t,"Popover",(function(){return r.Y})),n.d(t,"Autocomplete",(function(){return r.d})),n.d(t,"AutocompleteMultiple",(function(){return r.e})),n.d(t,"Avatar",(function(){return r.f})),n.d(t,"Badge",(function(){return r.g})),n.d(t,"Button",(function(){return r.h})),n.d(t,"ButtonEmphasis",(function(){return r.i})),n.d(t,"IconButton",(function(){return r.G})),n.d(t,"ButtonGroup",(function(){return r.j})),n.d(t,"Checkbox",(function(){return r.k})),n.d(t,"Chip",(function(){return r.l})),n.d(t,"ChipGroup",(function(){return r.m})),n.d(t,"CommentBlock",(function(){return r.p})),n.d(t,"CommentBlockVariant",(function(){return r.q})),n.d(t,"DatePicker",(function(){return r.s})),n.d(t,"DatePickerControlled",(function(){return r.t})),n.d(t,"DatePickerField",(function(){return r.u})),n.d(t,"Dialog",(function(){return r.v})),n.d(t,"DEFAULT_PROPS",(function(){return r.r})),n.d(t,"Divider",(function(){return r.w})),n.d(t,"DragHandle",(function(){return r.x})),n.d(t,"List",(function(){return r.P})),n.d(t,"ListItem",(function(){return r.R})),n.d(t,"isClickable",(function(){return r.Wb})),n.d(t,"Dropdown",(function(){return r.y})),n.d(t,"ExpansionPanel",(function(){return r.A})),n.d(t,"Flag",(function(){return r.B})),n.d(t,"FlexBox",(function(){return r.C})),n.d(t,"Grid",(function(){return r.D})),n.d(t,"GridItem",(function(){return r.E})),n.d(t,"Icon",(function(){return r.F})),n.d(t,"ImageBlock",(function(){return r.H})),n.d(t,"ImageBlockCaptionPosition",(function(){return r.I})),n.d(t,"InputHelper",(function(){return r.J})),n.d(t,"InputLabel",(function(){return r.K})),n.d(t,"Lightbox",(function(){return r.M})),n.d(t,"Link",(function(){return r.N})),n.d(t,"LinkPreview",(function(){return r.O})),n.d(t,"ListDivider",(function(){return r.Q})),n.d(t,"ListSubheader",(function(){return r.S})),n.d(t,"Message",(function(){return r.T})),n.d(t,"Mosaic",(function(){return r.U})),n.d(t,"Notification",(function(){return r.V})),n.d(t,"PostBlock",(function(){return r.Z})),n.d(t,"Progress",(function(){return r.ab})),n.d(t,"ProgressVariant",(function(){return r.fb})),n.d(t,"ProgressTracker",(function(){return r.bb})),n.d(t,"ProgressTrackerProvider",(function(){return r.cb})),n.d(t,"ProgressTrackerStep",(function(){return r.db})),n.d(t,"ProgressTrackerStepPanel",(function(){return r.eb})),n.d(t,"RadioButton",(function(){return r.gb})),n.d(t,"RadioGroup",(function(){return r.hb})),n.d(t,"Select",(function(){return r.ib})),n.d(t,"SelectMultiple",(function(){return r.jb})),n.d(t,"SelectMultipleField",(function(){return r.kb})),n.d(t,"SelectVariant",(function(){return r.lb})),n.d(t,"SideNavigation",(function(){return r.mb})),n.d(t,"SideNavigationItem",(function(){return r.nb})),n.d(t,"SkeletonCircle",(function(){return r.pb})),n.d(t,"SkeletonRectangle",(function(){return r.qb})),n.d(t,"SkeletonRectangleVariant",(function(){return r.rb})),n.d(t,"SkeletonTypography",(function(){return r.sb})),n.d(t,"Slider",(function(){return r.tb})),n.d(t,"clamp",(function(){return r.Vb})),n.d(t,"Slideshow",(function(){return r.ub})),n.d(t,"SlideshowControls",(function(){return r.vb})),n.d(t,"SlideshowItem",(function(){return r.wb})),n.d(t,"Switch",(function(){return r.xb})),n.d(t,"Table",(function(){return r.Db})),n.d(t,"TableBody",(function(){return r.Eb})),n.d(t,"TableCell",(function(){return r.Fb})),n.d(t,"TableCellVariant",(function(){return r.Gb})),n.d(t,"TableHeader",(function(){return r.Hb})),n.d(t,"TableRow",(function(){return r.Ib})),n.d(t,"ThOrder",(function(){return r.Kb})),n.d(t,"Tab",(function(){return r.yb})),n.d(t,"TabList",(function(){return r.zb})),n.d(t,"TabListLayout",(function(){return r.Ab})),n.d(t,"TabPanel",(function(){return r.Bb})),n.d(t,"TabProvider",(function(){return r.Cb})),n.d(t,"TextField",(function(){return r.Jb})),n.d(t,"Thumbnail",(function(){return r.Mb})),n.d(t,"ThumbnailAspectRatio",(function(){return r.Nb})),n.d(t,"ThumbnailVariant",(function(){return r.Ob})),n.d(t,"Toolbar",(function(){return r.Pb})),n.d(t,"Tooltip",(function(){return r.Qb})),n.d(t,"Uploader",(function(){return r.Sb})),n.d(t,"UploaderVariant",(function(){return r.Tb})),n.d(t,"UserBlock",(function(){return r.Ub}))},,,,function(e,t,n){"use strict";function r(e){p=e.getInputLanguage,f=e.getLang,m=e.hasTranslation,g=e.hasTranslations,v=e.pluralize,h=e.translate,y=e.replace}n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return r}));var i=n(155),a=n.n(i),o=n(33),s=n.n(o),c=n(28),l=n.n(c),u=n(147),d=n.n(u),p=s.a,f=s.a,g=s.a,m=s.a,v=s.a,h=s.a,y=s.a;d()((function(e){var t=e.collection,n=e.keys,r=void 0===n?["label"]:n;return l()(t,(function(e){return a()(r,(function(t){e[t]=h(e[t])})),e}))}))},,,,,,,function(e,t,n){"use strict";var r=n(240);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e})),n.d(t,"f",(function(){return r.f})),n.d(t,"g",(function(){return r.g})),n.d(t,"h",(function(){return r.h})),n.d(t,"i",(function(){return r.i})),n.d(t,"j",(function(){return r.j})),n.d(t,"k",(function(){return r.k})),n.d(t,"l",(function(){return r.l})),n.d(t,"m",(function(){return r.m})),n.d(t,"n",(function(){return r.n})),n.d(t,"o",(function(){return r.o})),n.d(t,"p",(function(){return r.p})),n.d(t,"q",(function(){return r.q})),n.d(t,"r",(function(){return r.r})),n.d(t,"s",(function(){return r.s})),n.d(t,"t",(function(){return r.t})),n.d(t,"u",(function(){return r.u})),n.d(t,"v",(function(){return r.v})),n.d(t,"w",(function(){return r.w})),n.d(t,"x",(function(){return r.x})),n.d(t,"y",(function(){return r.y})),n.d(t,"z",(function(){return r.z})),n.d(t,"A",(function(){return r.A})),n.d(t,"B",(function(){return r.B})),n.d(t,"C",(function(){return r.C})),n.d(t,"D",(function(){return r.D})),n.d(t,"E",(function(){return r.E})),n.d(t,"F",(function(){return r.F})),n.d(t,"G",(function(){return r.G})),n.d(t,"H",(function(){return r.H})),n.d(t,"I",(function(){return r.I})),n.d(t,"J",(function(){return r.J})),n.d(t,"K",(function(){return r.K})),n.d(t,"L",(function(){return r.L})),n.d(t,"M",(function(){return r.M})),n.d(t,"N",(function(){return r.N})),n.d(t,"O",(function(){return r.O})),n.d(t,"P",(function(){return r.P})),n.d(t,"Q",(function(){return r.Q})),n.d(t,"R",(function(){return r.R})),n.d(t,"S",(function(){return r.S})),n.d(t,"T",(function(){return r.T})),n.d(t,"U",(function(){return r.U})),n.d(t,"V",(function(){return r.V})),n.d(t,"W",(function(){return r.W})),n.d(t,"X",(function(){return r.X})),n.d(t,"Y",(function(){return r.Y})),n.d(t,"Z",(function(){return r.Z})),n.d(t,"ab",(function(){return r.ab})),n.d(t,"bb",(function(){return r.bb})),n.d(t,"cb",(function(){return r.cb})),n.d(t,"db",(function(){return r.db})),n.d(t,"eb",(function(){return r.eb})),n.d(t,"fb",(function(){return r.fb})),n.d(t,"gb",(function(){return r.gb})),n.d(t,"hb",(function(){return r.hb})),n.d(t,"ib",(function(){return r.ib})),n.d(t,"jb",(function(){return r.jb})),n.d(t,"kb",(function(){return r.kb})),n.d(t,"lb",(function(){return r.lb})),n.d(t,"mb",(function(){return r.mb})),n.d(t,"nb",(function(){return r.nb})),n.d(t,"ob",(function(){return r.ob})),n.d(t,"pb",(function(){return r.pb})),n.d(t,"qb",(function(){return r.qb})),n.d(t,"rb",(function(){return r.rb})),n.d(t,"sb",(function(){return r.sb})),n.d(t,"tb",(function(){return r.tb})),n.d(t,"ub",(function(){return r.ub})),n.d(t,"vb",(function(){return r.vb})),n.d(t,"wb",(function(){return r.wb})),n.d(t,"xb",(function(){return r.xb})),n.d(t,"yb",(function(){return r.yb})),n.d(t,"zb",(function(){return r.zb})),n.d(t,"Ab",(function(){return r.Ab})),n.d(t,"Bb",(function(){return r.Bb})),n.d(t,"Cb",(function(){return r.Cb})),n.d(t,"Db",(function(){return r.Db})),n.d(t,"Eb",(function(){return r.Eb})),n.d(t,"Fb",(function(){return r.Fb})),n.d(t,"Gb",(function(){return r.Gb})),n.d(t,"Hb",(function(){return r.Hb})),n.d(t,"Ib",(function(){return r.Ib})),n.d(t,"Jb",(function(){return r.Jb})),n.d(t,"Kb",(function(){return r.Kb})),n.d(t,"Lb",(function(){return r.Lb})),n.d(t,"Mb",(function(){return r.Mb})),n.d(t,"Nb",(function(){return r.Nb})),n.d(t,"Ob",(function(){return r.Ob})),n.d(t,"Pb",(function(){return r.Pb})),n.d(t,"Qb",(function(){return r.Qb})),n.d(t,"Rb",(function(){return r.Rb})),n.d(t,"Sb",(function(){return r.Sb})),n.d(t,"Tb",(function(){return r.Tb})),n.d(t,"Ub",(function(){return r.Ub})),n.d(t,"Vb",(function(){return r.Vb})),n.d(t,"Wb",(function(){return r.Wb})),n.d(t,"Xb",(function(){return r.Xb})),n.d(t,"Yb",(function(){return r.Yb})),n.d(t,"Zb",(function(){return r.Zb})),n.d(t,"ac",(function(){return r.ac})),n.d(t,"bc",(function(){return r.bc})),n.d(t,"cc",(function(){return r.cc})),n.d(t,"dc",(function(){return r.dc})),n.d(t,"ec",(function(){return r.ec})),n.d(t,"fc",(function(){return r.fc})),n.d(t,"gc",(function(){return r.gc})),n.d(t,"hc",(function(){return r.hc})),n.d(t,"ic",(function(){return r.ic})),n.d(t,"jc",(function(){return r.jc})),n.d(t,"kc",(function(){return r.kc})),n.d(t,"lc",(function(){return r.lc})),n.d(t,"mc",(function(){return r.mc})),n.d(t,"nc",(function(){return r.nc})),n.d(t,"oc",(function(){return r.oc})),n.d(t,"pc",(function(){return r.pc})),n.d(t,"qc",(function(){return r.qc})),n.d(t,"rc",(function(){return r.rc})),n.d(t,"sc",(function(){return r.sc})),n.d(t,"tc",(function(){return r.tc})),n.d(t,"uc",(function(){return r.uc})),n.d(t,"vc",(function(){return r.vc})),n.d(t,"wc",(function(){return r.wc})),n.d(t,"xc",(function(){return r.xc})),n.d(t,"yc",(function(){return r.yc})),n.d(t,"zc",(function(){return r.zc})),n.d(t,"Ac",(function(){return r.Ac})),n.d(t,"Bc",(function(){return r.Bc})),n.d(t,"Cc",(function(){return r.Cc})),n.d(t,"Dc",(function(){return r.Dc})),n.d(t,"Ec",(function(){return r.Ec})),n.d(t,"Fc",(function(){return r.Fc})),n.d(t,"Gc",(function(){return r.Gc})),n.d(t,"Hc",(function(){return r.Hc})),n.d(t,"Ic",(function(){return r.Ic})),n.d(t,"Jc",(function(){return r.Jc})),n.d(t,"Kc",(function(){return r.Kc})),n.d(t,"Lc",(function(){return r.Lc})),n.d(t,"Mc",(function(){return r.Mc})),n.d(t,"Nc",(function(){return r.Nc})),n.d(t,"Oc",(function(){return r.Oc})),n.d(t,"Pc",(function(){return r.Pc})),n.d(t,"Qc",(function(){return r.Qc})),n.d(t,"Rc",(function(){return r.Rc})),n.d(t,"Sc",(function(){return r.Sc})),n.d(t,"Tc",(function(){return r.Tc})),n.d(t,"Uc",(function(){return r.Uc})),n.d(t,"Vc",(function(){return r.Vc})),n.d(t,"Wc",(function(){return r.Wc})),n.d(t,"Xc",(function(){return r.Xc})),n.d(t,"Yc",(function(){return r.Yc}))},,,function(e,t,n){"use strict";n(371),n(3),n(0);var r,i=n(586);!function(e){e.ONE="one",e.TWO="two",e.MORE="other",e.OTHER="other"}(r||(r={}));var a=function(e){switch(e){case 1:return r.ONE;case 2:return r.TWO;default:return r.OTHER}};n(165);n.d(t,"c",(function(){return i.a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=n(496),y=n(3),E=n.n(y),b=n(0),O=n.n(b),C=n(2),T=n(1),S=n(141),I=function(e){var t=e.imgSrc,n=e.size,i=e.style,a=e.onClick,o=e.tooltip,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);return s.background='url("'.concat(t||S.InitialSettings.DEFAULT_AVATAR,'") no-repeat center center / cover'),O.a.createElement(T.Tooltip,{label:o},O.a.createElement("div",{className:"avatar avatar--".concat(n," ").concat(a?"avatar--clickable":""),role:"link",style:s,tabIndex:0,onClick:a,onKeyPress:a}))};I.propTypes={imgSrc:C.string,onClick:C.func,size:Object(C.oneOf)(["xs","s","m","l","xl"]).isRequired,style:Object(C.shape)({}),tooltip:C.string},I.defaultProps={imgSrc:void 0,onClick:void 0,style:{},tooltip:void 0};var _=n(14),A=n.n(_),w=n(31),D=function(e){var t=e.avatarStyle,n=e.isFirstOverlapping,r=e.isMoreInfoChip,i=e.items,o=e.onClick,s=e.onClickMore,c=e.overlapOffset,l=e.moreInfo,u=e.size,d=e.tooltip;if(void 0===i||0===i.length)return null;var p=i.length;return O.a.createElement("div",{className:A()("avatar-stack",E()({},"avatar-stack--".concat(u),u))},i.map((function(e,r){return O.a.createElement(I,{key:Object(w.f)(),imgSrc:e.imgSrc,size:u,style:a({border:"2px solid white",marginLeft:0!==r||n?c:0,position:"relative",zIndex:p-r},t),tooltip:"function"==typeof d?d(e):d,onClick:function(){return o(e)}})})),Boolean(l)&&O.a.createElement("div",{className:A()("avatar-stack__more avatar-stack-more",{"avatar-stack-more--chip":r,"avatar--clickable":s}),style:{marginLeft:c},onClick:s},O.a.createElement("span",{className:"avatar-stack-more__value"},"+".concat(l))))};D.defaultProps={avatarStyle:{},isFirstOverlapping:!0,isMoreInfoChip:!0,items:[],moreInfo:null,onClick:void 0,overlapOffset:-10,size:"m",tooltip:void 0},D.propTypes={avatarStyle:Object(C.shape)(),isFirstOverlapping:C.bool,isMoreInfoChip:C.bool,items:Object(C.arrayOf)(Object(C.shape)({imgSrc:C.string})),moreInfo:Object(C.oneOfType)([C.number,C.string]),onClick:C.func,overlapOffset:C.number,size:C.string,tooltip:Object(C.oneOfType)([C.func,C.string])};var L=n(375),P=n(22),N=n.n(P),R=n(20),j=n.n(R),k=n(24),F=n.n(k),U=n(25),M=n.n(U),x=n(26),$=n.n(x),B=n(73),W=n(273),G=n(129),Y=function(e){function t(){return N()(this,t),F()(this,M()(t).apply(this,arguments))}return $()(t,e),j()(t,[{key:"render",value:function(){return b.createElement(L.a,this.props,b.createElement(G.a,{value:this.props.value}))}}]),t}(b.PureComponent);E()(Y,"propTypes",{color:B.a,colors:B.b,size:W.a,type:W.b,value:C.string});var H=n(373),K=n(428),V=n(112),z=n.n(V),q=function(e){var t=e.AfterComponent,n=e.BeforeComponent,r=e.LabelComponent,i=e.isActive,a=e.isDisabled,o=e.onAfterClick,s=e.onBeforeClick,c=e.onClick,l=e.size,u=e.theme,d=z()(o),p=z()(s),f=z()(c);return O.a.createElement("div",{className:A()("lx-chip","lx-chip--size-".concat(l),"lx-chip--theme-".concat(u),{"lx-chip--has-after":d,"lx-chip--has-before":p,"lx-chip--is-active":i,"lx-chip--is-clickable":f,"lx-chip--is-disabled":a,"lx-chip--is-idle":!i}),role:"button",tabIndex:a||!f?-1:0,onClick:c,onKeyPress:c},n&&O.a.createElement("button",{className:A()("lx-chip__before",{"lx-chip__before--is-clickable":p}),type:"button",onClick:function(e){e&&(s(e),e.stopPropagation())}},n),O.a.createElement("div",{className:"lx-chip__label"},r),t&&O.a.createElement("button",{className:A()("lx-chip__after",{"lx-chip__after--is-clickable":d}),type:"button",onClick:function(e){e&&(o(e),e.stopPropagation())}},t))};q.propTypes={AfterComponent:C.node,BeforeComponent:C.node,LabelComponent:Object(C.oneOfType)([C.func,C.node,C.string]).isRequired,isActive:C.bool,isDisabled:C.bool,onAfterClick:C.func,onBeforeClick:C.func,onClick:C.func,size:Object(C.oneOf)(["s","m"]),theme:Object(C.oneOf)(["light","dark"])},q.defaultProps={AfterComponent:null,BeforeComponent:null,isActive:!1,isDisabled:!1,onAfterClick:null,onBeforeClick:null,onClick:null,size:"m",theme:"light"};var X=n(8),Q=n.n(X),Z=n(27),J=n.n(Z),ee=n(410),te=n.n(ee),ne=n(12),re=n(382),ie=function(e){var t=e.choices,n=e.isOpen,r=e.name,i=e.onChange,a=e.value,o=e.placeholder,s=e.zIndex,c=Object(b.useState)(n),l=Q()(c,2),u=l[0],d=l[1],p=Object(b.useRef)(null),f=!J()(a)&&!te()(a),g=Object(re.a)({choices:t,placeholder:o,value:a});return O.a.createElement(O.a.Fragment,null,O.a.createElement(T.Chip,{after:O.a.createElement(T.Icon,{icon:f?ne.M:ne.ec,size:T.Size.xs}),ref:p,isSelected:f,onAfterClick:function(){f?i(null,r):d(!u)},onClick:function(){return d(!u)}},g.text),O.a.createElement(T.Dropdown,{closeOnClickAway:!0,closeOnEscape:!0,anchorRef:p,placement:T.Placement.BOTTOM_START,isOpen:u,zIndex:s,onClose:function(){return d(n)}},O.a.createElement(T.List,{isClickable:!0},t.map((function(e){return O.a.createElement(T.ListItem,{key:e.value,isSelected:e.value===a,size:T.Size.tiny,onItemSelected:function(){return t=e.value,d(n),void(t!==a&&i(t,r));var t}},e.label)})))))};ie.propTypes={choices:Object(C.arrayOf)(Object(C.shape)({label:C.string,value:Object(C.oneOfType)([C.number,C.string])})),isOpen:C.bool,name:C.string.isRequired,onChange:C.func.isRequired,placeholder:C.string,value:Object(C.oneOfType)([C.number,C.string]),zIndex:C.number},ie.defaultProps={choices:[],isOpen:!1,placeholder:"",value:null,zIndex:900};var ae=n(16),oe=n.n(ae),se=n(335),ce=function(e){function t(){return N()(this,t),F()(this,M()(t).apply(this,arguments))}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this.props.value;return b.createElement("div",{className:"custom-select__selection-color",style:{backgroundColor:e}})}}]),t}(b.PureComponent);E()(ce,"propTypes",{value:se.a.propTypes.value});var le=function(e){function t(){return N()(this,t),F()(this,M()(t).apply(this,arguments))}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this.props.value;return b.createElement("div",{className:"custom-select__choice-color",style:{backgroundColor:e}})}}]),t}(b.PureComponent);E()(le,"propTypes",{value:se.a.propTypes.value});var ue=function(e){function t(){return N()(this,t),F()(this,M()(t).apply(this,arguments))}return $()(t,e),j()(t,[{key:"render",value:function(){return b.createElement(se.a,oe()({ValueComponent:ce,ChoiceComponent:le,className:"custom-select--color-selector"},this.props))}}]),t}(b.PureComponent);E()(ue,"propTypes",se.a.propTypes);var de=n(28),pe=n.n(de),fe=n(17),ge=n.n(fe),me=n(50),ve=function(e){function t(){return N()(this,t),F()(this,M()(t).apply(this,arguments))}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.selected,r=e.primary,i=e.accent,a=e.onClick;return b.createElement("div",{id:t,className:A()("color-palette__color",n&&"color-palette__color--is-selected"),onClick:a},b.createElement("div",{className:"color-palette__color-wrapper"},r&&b.createElement("div",{className:"color-palette__color-indicator"},b.createElement(G.a,{value:"numeric-1-box",size:"xs",color:"white",type:"flat"})),i&&b.createElement("div",{className:"color-palette__color-indicator"},b.createElement(G.a,{value:"numeric-2-box",size:"xs",color:"white",type:"flat"})),b.createElement("div",{className:"color-palette__color-background",style:{backgroundColor:t}}),b.createElement("span",{className:"color-palette__color-label"},t)))}}]),t}(b.PureComponent);E()(ve,"propTypes",{accent:C.bool,onClick:C.func,primary:C.bool,selected:C.bool,value:B.a});var he=function(e){function t(e){var n;return N()(this,t),n=F()(this,M()(t).call(this,e)),n.state=n.constructor.getDerivedStateFromProps(e),n.toggleColor=function(e){var t=e.currentTarget.id;n.props.onChange(t===n.props.value?void 0:t,n.props.name,e)},n}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.choices,r=e.onChange,i=e.accent,a=e.primary,o=e.hasClearChoice,s=void 0===o||o,c=this.state.hasTransparent,l=r?this.toggleColor:null;return b.createElement("div",{className:"color-palette p"},s&&!c&&b.createElement(ve,{key:"transparent",value:"transparent",selected:"transparent"===t,primary:"transparent"===a,accent:"transparent"===i,onClick:l}),pe()(n,(function(e){return b.createElement(ve,{key:e,value:e,selected:e===t,primary:e===a,accent:e===i,onClick:l})})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t&&t.choices===e.choices?null:{choices:e.choices,hasTransparent:ge()(e.choices,"transparent")}}}]),t}(b.PureComponent);E()(he,"propTypes",{accent:B.a,choices:B.b,hasClearChoice:C.bool,name:me.b,onChange:C.func,primary:B.a,value:B.a});var ye=n(291),Ee=n(328),be=n(494),Oe=n(130),Ce=n.n(Oe),Te=n(86),Se=n(65),Ie=n(104),_e=n(91),Ae=function(e){var t=e.parentWidgetProperties,n=t.viewModeVariant,r=n===_e.c.UNGROUP,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(Te.d)(t,!1)),a=Object(Te.d)(t,!0);return{gridStyle:r?a:i,itemStyle:r?Ce()(i,Se.s):null}},we=function(e){var t=e.columnCount,n=e.list,r=e.parentWidgetProperties,i=void 0===r?{}:r,a=Ae({parentWidgetProperties:i}),o=a.gridStyle,s=a.itemStyle,c=i.viewModeVariant;return O.a.createElement("div",{className:A()("grid-view","grid-view--column-count-".concat(t),"grid-view--view-mode-variant-".concat(c)),style:o},n.map((function(e){return O.a.createElement("div",{key:e.key,className:"grid-view_item",style:s},e)})))};we.protoTypes={columnCount:C.number,list:Object(C.arrayOf)(C.node),parentWidgetProperties:Ie.a.component.properties};var De=n(115),Le=function(e){function t(e){return N()(this,t),F()(this,M()(t).call(this,e))}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this.props,t=e.noBorder,n=e.noPadding,r=e.value;return b.createElement("div",{className:A()(t?"":"has-divider has-divider--dark",n?"mv+":"pv+ pl pr++"),"flex-container":"row"},b.createElement(De.b,{className:"mr",size:"s",type:"flat",value:"information-outline"}),b.createElement("span",{className:"text-field-help","flex-item":"flex-item"},r))}}]),t}(b.PureComponent);E()(Le,"propTypes",{noBorder:C.bool,noPadding:C.bool,value:C.string});var Pe=function(e){var t=e.callback,n=e.options,r=Object(b.useRef)(null),i=new IntersectionObserver((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.some((function(e){return e.isIntersecting}));n&&t()}),n);return Object(b.useEffect)((function(){i.observe(r.current)}),[r.current]),O.a.createElement("div",{ref:r})};Pe.propTypes={callback:C.func.isRequired,options:Object(C.shape)({root:C.node,rootMargin:C.string,threshold:Object(C.arrayOf)(C.float)})},Pe.defaultProps={options:void 0};var Ne=n(419),Re=n(241),je=n(29),ke=n.n(je),Fe=n(814),Ue=n(85),Me=n.n(Ue),xe=Object(C.shape)({createdAt:C.string.isRequired,id:C.string.isRequired,instanceId:C.string,isFolder:C.bool,isShared:C.bool,isTrashed:C.bool,kind:Object(C.oneOf)(["Drive","Folder","Media"]),name:Object(C.oneOfType)([C.string,Object(C.objectOf)(C.string)]),owner:Object(C.objectOf)(Object(C.oneOfType)([C.string,C.number,Object(C.objectOf)(C.string)])).isRequired,updatedAt:C.string,uuid:C.string.isRequired}),$e=Object(C.shape)({lang:C.string,mimeType:C.string,servingUrl:C.string}),Be=(Object(C.shape)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},xe,{content:Object(C.arrayOf)($e).isRequired,croppedContent:Object(C.arrayOf)($e)})),1.5),We=function(e){function t(e){var n;return N()(this,t),n=F()(this,M()(t).call(this,e)),n.cropper=void 0,n.imgElement=void 0,n.initCropper=n.initCropper.bind(ke()(n)),n}return $()(t,e),j()(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.media,n=e.media;return!Me()(t,n)&&n}},{key:"componentWillUnmount",value:function(){this.imgElement&&(this.cropper.destroy(),this.imgElement=void 0,this.cropper=void 0)}},{key:"initCropper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.node,n=e.params,r=void 0===n?{}:n,i=r.aspectRatio,a=void 0===i?Be:i;this.imgElement=t||this.imgElement,this.cropper&&this.cropper.destroy(),this.imgElement&&(this.cropper=new Fe.a(this.imgElement,l({},r,{aspectRatio:a})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.media,r=t.params;return O.a.createElement("img",{ref:function(t){return e.initCropper({node:t,params:r})},alt:n.name||"",crossOrigin:"anonymous",src:Object(w.w)(n.servingUrl,S.InitialSettings.MAX_IMAGE_SIZE)})}}]),t}(b.Component);E()(We,"propTypes",{media:$e.isRequired,params:Object(C.objectOf)(Object(C.oneOfType)([C.string,C.func,C.bool]))}),E()(We,"defaultProps",{params:{}});var Ge,Ye=n(18),He=n.n(Ye),Ke=n(815),Ve=n.n(Ke);!function(e){e.crop="crop",e.move="move",e.none="none"}(Ge||(Ge={}));var ze={src:"",dragMode:Ge.crop,data:null,scaleX:1,scaleY:1,enable:!0,zoomTo:1,rotateTo:0},qe=["dragMode","aspectRatio","data","crop","viewMode","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minContainerWidth","minContainerHeight","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","ready","cropstart","cropmove","cropend","zoom"],Xe=function(e){var t=e.style,n=e.className,r=e.crossOrigin,i=e.src,a=void 0===i?ze.src:i,o=e.dragMode,s=void 0===o?ze.dragMode:o,c=e.alt,l=He()(e,["style","className","crossOrigin","src","dragMode","alt"]),u=A()("react-cropper",n),p=Object(b.useRef)(null),f=Object(b.useRef)(!1),g=Object(b.useRef)(),m=function(){l.enable?g.current.enable():g.current.disable()};return Object(b.useEffect)((function(){var e=Object.keys(l).filter((function(e){return-1!==qe.indexOf(e)})).reduce((function(e,t){return d({},e,{},(n=l,r=t,r in n?E()({},t,l[t]):{}));var n,r}),{}),t=p.current;return t&&(g.current=new Ve.a(t,d({},e,{ready:function(){f.current=!0,l.data&&g.current.setData(l.data),m(),l.ready(g.current)}}))),function(){t&&g.current.destroy()}}),[]),Object(b.useEffect)((function(){g.current&&g.current.reset().clear().replace(a)}),[a]),Object(b.useEffect)((function(){g.current&&void 0!==l.aspectRatio&&(g.current.enable(),Number.isNaN(l.aspectRatio)?(g.current.setAspectRatio(l.aspectRatio),g.current.reset()):(g.current.setAspectRatio(l.aspectRatio),l.data&&g.current.setData(l.data)),l.enable||g.current.disable(),f.current&&l.cropend&&l.cropend({detail:{action:"ALL"}}))}),[l.aspectRatio]),Object(b.useEffect)((function(){m()}),[l.enable]),Object(b.useEffect)((function(){l.data&&g.current.setData(l.data)}),[l.data]),Object(b.useEffect)((function(){g.current.setDragMode(s)}),[s]),Object(b.useEffect)((function(){l.cropBoxData&&g.current.setCropBoxData(l.cropBoxData)}),[l.cropBoxData]),Object(b.useEffect)((function(){l.canvasData&&g.current.setCanvasData(l.canvasData)}),[l.canvasData]),Object(b.useEffect)((function(){l.moveTo&&(l.moveTo.length>1?g.current.moveTo(l.moveTo[0],l.moveTo[1]):g.current.moveTo(l.moveTo[0]))}),[l.moveTo]),Object(b.useEffect)((function(){l.zoomTo&&g.current.zoomTo(l.zoomTo)}),[l.zoomTo]),Object(b.useEffect)((function(){l.rotateTo&&g.current.rotateTo(l.rotateTo)}),[l.rotateTo]),Object(b.useEffect)((function(){l.scaleX&&g.current.scaleX(l.scaleX)}),[l.scaleX]),Object(b.useEffect)((function(){l.scaleY&&g.current.scaleY(l.scaleY)}),[l.scaleY]),O.a.createElement("div",{style:t,className:u},O.a.createElement("img",{crossOrigin:r,ref:p,src:a,alt:c||"picture",style:{opacity:0}}))},Qe="focal-point-picker",Ze={autoCropArea:1,focus:{x:0,y:0},viewMode:2,crop:null,enabled:!1},Je=Object(b.forwardRef)((function(e,t){var n=e.src,r=e.focusData,i=void 0===r?Ze.focus:r,a=e.cropData,o=void 0===a?Ze.crop:a,s=e.enabled,c=void 0===s?Ze.enabled:s,l=e.viewMode,u=void 0===l?Ze.viewMode:l,d=e.autoCropArea,p=void 0===d?Ze.autoCropArea:d,g=e.className,m=void 0===g?"":g,v=e.style,h=e.aspectRatio,y=e.previewClass,E=e.guides,C=e.onCropChange,T=e.onFocusChange,S=A()(Qe,m),I=Object(b.useRef)(null),_=Object(b.useRef)({internalFocus:null,relativeFocus:i}),w=Object(b.useRef)(null),D=Object(b.useRef)({x:0,y:0}),L=Object(b.useRef)(),P=function(){var e=L.current.getData(),t=L.current.getImageData(),n=t.width/t.naturalWidth,r=t.height/t.naturalHeight;return f({},e,{x:e.x*n,y:e.y*r,width:e.width*n,height:e.height*r})},N=function(e){var t,n,r,i,a=P();return t=e,n=a,r=t.x>=n.x&&t.x<=n.x+n.width,i=t.y>=n.y&&t.y<=n.y+n.height,r&&i},R=function(e){var t=P();return e?{x:t.width/2*(e.x+1)+t.x,y:-t.height/2*(e.y-1)+t.y}:_.current.internalFocus},j=function(e){_.current=f({},_.current,{internalFocus:R(e),relativeFocus:e})},k=function(e){var t,n,r,i,a,o;_.current=f({},_.current,{internalFocus:e,relativeFocus:(t=e,n=t.x,r=t.y,i=P(),a=(n-i.x)/i.width,o=(r-i.y)/i.height,{x:(a-.5)/.5,y:-(o-.5)/.5})})},F=function(){j({x:0,y:0}),T({crop:o,focus:_.current.relativeFocus})},U=function(){L&&L.current&&(L.current.enable(),L.current.setAspectRatio(NaN),C(),F(),L.current.disable())},M=function(){return L&&L.current?L.current.getData():null},x=function(){return L&&L.current?L.current.getCroppedCanvas():null};Object(b.useImperativeHandle)(t,(function(){return{resetFocus:F,reset:U,getData:M,getCroppedCanvas:x}}));var $,B=function(e){var t=e.clientX,n=e.clientY,r=w.current,i=r.x,a=r.y,s={x:_.current.internalFocus.x+(t-i),y:_.current.internalFocus.y+(n-a)};N(s)&&(k(s),w.current={x:t,y:n}),T({crop:o,focus:_.current.relativeFocus})},W=function e(){w.current=null,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",e)};return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(b.useRef)(null);Object(b.useEffect)((function(){r.current=t}),[t]),Object(b.useEffect)((function(){var t=n&&n.addEventListener;if(t&&r&&r.current){var i=function(e){var t;null===(t=r.current)||void 0===t||t.call(r,e)};return n.addEventListener(e,i),function(){n.removeEventListener(e,i)}}}),[e,n])}("mousedown",(function(e){w.current={x:e.clientX,y:e.clientY},document.addEventListener("mousemove",B),document.addEventListener("mouseup",W)}),I.current),O.a.createElement("div",{className:S},O.a.createElement("div",{className:"".concat(Qe,"__container")},O.a.createElement("div",{ref:I,className:"".concat(Qe,"__focal-point"),style:($=function(){if(!_.current.internalFocus)return null;var e=_.current.internalFocus,t=e.x,n=e.y;return{x:D.current.x+t,y:D.current.y+n}}(),$?{left:"".concat($.x,"px"),top:"".concat($.y,"px"),display:"block"}:{display:"none"})}),O.a.createElement(Xe,{src:n,data:o||void 0,autoCropArea:p,style:v,crossOrigin:"anonymous",enable:c,viewMode:u,className:"fp-cropper",initialAspectRatio:NaN,aspectRatio:h,preview:y,guides:E,zoomOnWheel:!1,cropend:function(){var e,t,n,r,i;N(_.current.internalFocus)?k(_.current.internalFocus):(e=P(),t=e.x,n=e.y,r=e.width,i=e.height,k(f({},_.current.internalFocus,{x:t+r/2,y:n+i/2}))),C(),T({crop:o,focus:_.current.relativeFocus})},ready:function(e){L.current=e;var t=L.current.getCanvasData();D.current.x=t.left,D.current.y=t.top,j(i),C(),T({crop:o,focus:_.current.relativeFocus})}})))})),et=n(5),tt=function(e){var t=e.actions;return pe()(t,(function(e,t){var n=e.tooltipKey,r=e.isActive,i=e.onClick,a=e.icon,o=e.text,s=e.disabled;return a?O.a.createElement(T.IconButton,{className:A()("cropper__action",{"cropper__action--is-active":r&&r()}),disabled:s,emphasis:T.Emphasis.low,isSelected:r&&r(),size:T.Size.m,icon:a,onClick:i,label:Object(et.h)(n)}):O.a.createElement(T.Tooltip,{key:t,placement:"top",label:Object(et.h)(n)},O.a.createElement(T.Button,{disabled:s,emphasis:T.Emphasis.low,onClick:i},Object(et.h)(o)))}))},nt=function(e){var t=e.mediaToCrop,n=e.onClose,r=e.isOpen,i=e.onConfirm,a=He()(e,["mediaToCrop","onClose","isOpen","onConfirm"]),o=!!t.cropInfo&&t.cropInfo!=={},s=!!t.focalPoint||o,c=Object(b.useState)(t.cropInfo),l=Q()(c,2),u=l[0],d=l[1],p=Object(b.useState)(t.focalPoint),f=Q()(p,2),g=f[0],m=f[1],v=Object(b.useState)(o),h=Q()(v,2),y=h[0],E=h[1],C=Object(b.useState)(o?Be:NaN),S=Q()(C,2),I=S[0],_=S[1],A=Object(b.useState)(!1),w=Q()(A,2),D=w[0],L=w[1],P=Object(b.useState)(s),N=Q()(P,2),R=N[0],j=N[1],k=Object(b.useRef)(null),F=[{icon:ne.Q,isActive:function(){return y},onClick:function(){var e=!y;_(e?Be:NaN),E(e)},tooltipKey:"RATIO_3:2"}],U=[{text:"RESET",disabled:!R,onClick:function(){j(!1),E(!1),_(NaN),k.current.reset()},tooltipKey:"RESET"}];return Object(b.useEffect)((function(){Number.isNaN(I)&&E(!1)}),[I]),O.a.createElement(T.Dialog,oe()({disableBackdropClick:!0,className:"cropper-dialog",zIndex:3e3,maxWidth:!1,size:T.Size.tiny,isOpen:r},a),O.a.createElement("header",null,O.a.createElement(T.Toolbar,{label:O.a.createElement("span",{className:"lumx-typography-title"},Object(et.h)("FRONT.CROPPER_DIALOG.TITLE"))})),O.a.createElement("div",{className:"cropper__body"},O.a.createElement("p",{className:"lumx-typography-subtitle1"},Object(et.h)("FRONT.CROPPER_DIALOG.SUBTITLE")),O.a.createElement("p",{className:"lumx-typography-body1"},Object(et.h)("FRONT.CROPPER_DIALOG.BODY")),O.a.createElement("div",{className:"cropper__content"},t&&t.servingUrl&&O.a.createElement(Je,{ref:k,src:t.servingUrl,focusData:g,cropData:u,aspectRatio:I,className:"picker",guides:!1,enabled:y,onFocusChange:function(e){m(e.focus),j(!0)},onCropChange:function(){d(k.current.getData()),j(!0)}}),O.a.createElement("div",{className:"cropper__actions"},O.a.createElement("div",{className:"cropper__actions--col-left"},tt({actions:U})),O.a.createElement("div",{className:"cropper__actions--col-right"},tt({actions:F}))))),O.a.createElement("footer",null,O.a.createElement(T.Toolbar,{after:O.a.createElement(T.ButtonGroup,null,O.a.createElement(T.Button,{emphasis:T.Emphasis.medium,onClick:n,className:"lumx-spacing-margin-right"},Object(et.h)("CANCEL")),O.a.createElement(T.Button,{disabled:D,onClick:function(){var e,t;L(!0),y&&(e={x:Math.round(u.x),y:Math.round(u.y),width:Math.round(u.width),height:Math.round(u.height)},t=k.current.getCroppedCanvas()),i(g,e,t)}},Object(et.h)("OK")))})))},rt=n(33),it=n.n(rt),at=n(432),ot=n(352),st=function(e){function t(e){var n;N()(this,t),n=F()(this,M()(t).call(this,e));var r=function(e){return n.props.onChange(e,n.props.name)};return n.openMediaPicker=function(){return Object(ot.a)(n.props.value,r)},n.deleteImage=function(e){e.stopPropagation(),r(void 0)},n}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.style,i=void 0===r?{}:r;return b.createElement("div",{className:"ls-media-manager image-chooser",onClick:function(){return n?it()():e.openMediaPicker()}},b.createElement("div",{className:"uploader"},n?b.createElement("div",{className:"editable-media editable-media--edit-hover"},b.createElement("div",{className:"editable-media__img editable-media__img--is-thumbnail",style:m({backgroundImage:Object(w.j)(Object(at.b)(n)),backgroundRepeat:"no-repeat",backgroundSize:"contain"},i)}),b.createElement("div",{className:"editable-media__bar"},b.createElement("div",{className:"editable-media__label"},b.createElement("span",null,Object(et.h)("STYLE.IMAGE"))),b.createElement("div",{className:"editable-media__actions"},b.createElement(G.a,{value:"pencil",onClick:this.openMediaPicker}),b.createElement(G.a,{value:"delete",onClick:this.deleteImage})))):b.createElement("div",{className:"uploader__placeholder"},b.createElement(G.a,{value:"image"}),b.createElement("span",null,Object(et.h)("SELECT_IMAGE")))))}}]),t}(b.PureComponent);E()(st,"propTypes",{name:me.b.isRequired,onChange:C.func.isRequired,style:C.object,value:C.object});var ct=n(78),lt=function(e){var t=e.thumbnails,n=e.theme,r=e.activeIndex,i=e.onClose,a=He()(e,["thumbnails","theme","activeIndex","onClose"]),o=Object(b.useRef)(null);return O.a.createElement(O.a.Fragment,null,O.a.createElement(T.Mosaic,oe()({},a,{theme:n,thumbnails:t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{image:e.url})}))})),O.a.createElement(T.Lightbox,{isOpen:null!=r,parentElement:o,onClose:i,closeButtonProps:{label:Object(et.h)("GLOBAL.CLOSE")}},O.a.createElement(T.Slideshow,{activeIndex:r,slideshowControlsProps:{nextButtonProps:{label:Object(et.h)("GLOBAL.NEXT")},previousButtonProps:{label:Object(et.h)("GLOBAL.PREVIOUS")}},fillHeight:!0,theme:n},t.map((function(e,t){return O.a.createElement(T.SlideshowItem,{key:"".concat(e.url,"-").concat(t)},O.a.createElement(T.ImageBlock,{image:Object(ct.k)(e.url)?(r=e.url,r.split("=s")[0]):e.url,align:T.Alignment.center,fillHeight:!0,theme:n,alt:""}));var r})))))},ut=n(194),dt=function(e){function t(e){var n;return N()(this,t),n=F()(this,M()(t).call(this,e)),E()(ke()(n),"checkPosition",(function(){var e=n.stickyElementRef.current,t=e.getBoundingClientRect(),r=t.top,i=n.state.isSticky,a=n.props.offsetTop;!i&&r-a<=0?n.setState({isSticky:!0}):i&&r-a>0&&n.setState({isSticky:!1})})),n.state={isSticky:!1},n.stickyElementRef=Object(b.createRef)(),n}return $()(t,e),j()(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.checkPosition,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.checkPosition)}},{key:"render",value:function(){var e=this.state.isSticky?{top:this.props.offsetTop||0}:{},t=this.props.className,n=this.state.isSticky;return O.a.createElement("div",{className:A()(t,"sticky-element",{"sticky-element--sticky":n}),style:e,ref:this.stickyElementRef},this.props.children)}}]),t}(b.PureComponent);E()(dt,"propTypes",{children:C.node.isRequired,className:C.string,offsetTop:C.number});var pt=n(244),ft=function(e){function t(e){var n;return N()(this,t),n=F()(this,M()(t).call(this,e)),n.selectItem=function(e){return n.props.onChange(e.currentTarget.id)},n}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.items,i=t.className,a=t.classNameItem,o=t.classNameItemActive;return b.createElement("div",{className:i},pe()(r,(function(t){var r=t.id,i=t.label,s=t.icon;return b.createElement("a",{key:r,className:A()(a,r===n&&o),id:r,onClick:e.selectItem},i&&b.createElement("span",null,i),s&&b.createElement(G.a,{value:s}))})))}}]),t}(b.PureComponent);E()(ft,"propTypes",{className:C.string,classNameItem:C.string,classNameItemActive:C.string,items:pt.a.isRequired,onChange:C.func.isRequired,value:C.string});var gt=function(e){function t(){return N()(this,t),F()(this,M()(t).apply(this,arguments))}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this.props.children;return b.createElement("div",{className:"custom-tabs__pane"},e)}}]),t}(b.PureComponent);E()(gt,"propTypes",{children:C.any,icon:C.string,id:C.string.isRequired,label:C.string});var mt=n(174),vt=n.n(mt),ht=n(75),yt=n.n(ht),Et=n(4),bt=n.n(Et),Ot=n(21),Ct=n.n(Ot),Tt=function(e){function t(e){var n;return N()(this,t),n=F()(this,M()(t).call(this,e)),n.state={value:e.value||bt()(vt()(e.children),"0.props.id")},n.onChange=function(e){return n.setState({value:e})},n}return $()(t,e),j()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.states,r=e.state,i=this.state.value,a=Ct()(vt()(t),(function(e){return e.props.id===i}));return b.createElement("div",{className:"custom-tabs"},b.createElement("div",{className:"custom-tabs__links"},b.createElement(ft,{value:i,onChange:this.onChange,items:pe()(yt()(t),"props"),className:"custom-tabs__tabs",classNameItem:"custom-tabs__tab",classNameItemActive:"custom-tabs__tab--is-active"}),!J()(n)&&b.createElement(ft,{value:r,onChange:this.props.onChangeState,items:n,className:"custom-tabs__states",classNameItem:"custom-tabs__state",classNameItemActive:"custom-tabs__state--is-active"})),b.createElement("div",{className:"custom-tabs__panes"},a&&b.cloneElement(a,{key:a.props.id})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Ct()(vt()(e.children),(function(e){return e.props.id===t.value}))?null:{value:bt()(vt()(e.children),"0.props.id")}}}]),t}(b.PureComponent);E()(Tt,"propTypes",{children:C.arrayOf(C.node),onChangeState:C.func,state:C.string,states:pt.a,value:C.string}),n.d(t,"a",(function(){return h.a})),n.d(t,"b",(function(){return I})),n.d(t,"M",(function(){return D})),n.d(t,"f",(function(){return L.a})),n.d(t,"g",(function(){return Y})),n.d(t,"h",(function(){return H.a})),n.d(t,"c",(function(){return K.a})),n.d(t,"m",(function(){return K.b})),n.d(t,"L",(function(){return K.c})),n.d(t,"d",(function(){return q})),n.d(t,"K",(function(){return ie})),n.d(t,"k",(function(){return ue})),n.d(t,"i",(function(){return he})),n.d(t,"j",(function(){return ve})),n.d(t,"l",(function(){return ye.a})),n.d(t,"A",(function(){return Ee.a})),n.d(t,"I",(function(){return be.a})),n.d(t,"t",(function(){return we})),n.d(t,"x",(function(){return Le})),n.d(t,"s",(function(){return De.a})),n.d(t,"u",(function(){return De.b})),n.d(t,"w",(function(){return Pe})),n.d(t,"y",(function(){return Ne.a})),n.d(t,"z",(function(){return Ne.b})),n.d(t,"C",(function(){return Ne.c})),n.d(t,"G",(function(){return Ne.d})),n.d(t,"Q",(function(){return Ne.e})),n.d(t,"q",(function(){return Re.a})),n.d(t,"B",(function(){return Re.b})),n.d(t,"H",(function(){return Re.c})),n.d(t,"p",(function(){return Be})),n.d(t,"n",(function(){return We})),n.d(t,"o",(function(){return nt})),n.d(t,"v",(function(){return st})),n.d(t,"E",(function(){return lt})),n.d(t,"e",(function(){return ut.a})),n.d(t,"r",(function(){return ut.b})),n.d(t,"D",(function(){return ut.c})),n.d(t,"J",(function(){return ut.d})),n.d(t,"N",(function(){return dt})),n.d(t,"F",(function(){return ft})),n.d(t,"O",(function(){return gt})),n.d(t,"P",(function(){return Tt}))},function(e,t,n){"use strict";n(205),n(3);var r=n(8),i=n.n(r),a=n(19),o=n.n(a),s=function(e,t,n){var r=o()(e);if(0===r.length)return r;var a=r.splice(t,1),s=i()(a,1),c=s[0];return r.splice(n,0,c),r},c=(n(245),n(149)),l=n(539),u=n(368),d=n(35);n(334),n(480);n.d(t,"r",(function(){return s})),n.d(t,"b",(function(){return c.c})),n.d(t,"c",(function(){return c.d})),n.d(t,"g",(function(){return c.e})),n.d(t,"h",(function(){return c.f})),n.d(t,"j",(function(){return c.g})),n.d(t,"l",(function(){return c.h})),n.d(t,"o",(function(){return c.j})),n.d(t,"p",(function(){return c.k})),n.d(t,"n",(function(){return c.i})),n.d(t,"s",(function(){return c.n})),n.d(t,"t",(function(){return c.o})),n.d(t,"u",(function(){return c.p})),n.d(t,"v",(function(){return c.q})),n.d(t,"w",(function(){return c.r})),n.d(t,"x",(function(){return c.s})),n.d(t,"y",(function(){return c.t})),n.d(t,"z",(function(){return c.v})),n.d(t,"A",(function(){return c.w})),n.d(t,"B",(function(){return c.x})),n.d(t,"C",(function(){return c.y})),n.d(t,"D",(function(){return c.z})),n.d(t,"E",(function(){return c.A})),n.d(t,"d",(function(){return l.b})),n.d(t,"e",(function(){return l.c})),n.d(t,"k",(function(){return u.a})),n.d(t,"q",(function(){return u.b})),n.d(t,"i",(function(){return d.c})),n.d(t,"f",(function(){return d.b})),n.d(t,"m",(function(){return d.d})),n.d(t,"a",(function(){return d.a})),n.d(t,"k",(function(){return u.a})),n.d(t,"q",(function(){return u.b}))},,,function(e,t,n){"use strict";var r=n(370);n.d(t,"g",(function(){return r.d})),n.d(t,"f",(function(){return r.c})),n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return"YYYY-MM-DD[T]HH:mm:ss.SSSSSS"})),n.d(t,"d",(function(){return 30})),n.d(t,"e",(function(){return 24}))},function(e,t,n){"use strict";function r(e,t){t=t||"";var n=[];if(l()(e)||""===e)return n;var r=e.split(",");return l()(r)||""===r||d()(r,(function(e){l()(e)||""===e||n.push(t+e.trim())})),n}function i(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cloudsearch-highlight";if(!t||0===t.length)return e;var r="",i='<mark class="'.concat(n,'">'),a="</mark>",o=0;return t.forEach((function(n,s){n.start=n.start||0,n.end=n.end||e.length,o=s>0?t[s-1].end:0;var c=e.substring(o,n.start),l=s===t.length-1?e.substring(n.end,e.length):"";r+=c+i+e.substring(n.start,n.end)+a+l})),r}function o(e){return e.trim().replace(/( {2,})/g," ")}function s(e){return e.replace(/href="(javascript:(.*)?)"/g,(function(){return'href=""'}))}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s}));var c=n(66),l=n.n(c),u=n(28),d=n.n(u)},function(e,t,n){"use strict";function r(e){o=e.confirm,i=e.error,a=e.success,o=e.confirm}var i,a,o;n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r}))},,,function(e,t,n){"use strict";var r=n(716);n.d(t,"Blockquote",(function(){return r.a})),n.d(t,"Body",(function(){return r.b})),n.d(t,"HR",(function(){return r.c})),n.d(t,"Headline",(function(){return r.d})),n.d(t,"Image",(function(){return r.e})),n.d(t,"Link",(function(){return r.f})),n.d(t,"ListItem",(function(){return r.g})),n.d(t,"OrderedList",(function(){return r.h})),n.d(t,"Preformatted",(function(){return r.i})),n.d(t,"Subtitle",(function(){return r.j})),n.d(t,"TD",(function(){return r.k})),n.d(t,"TH",(function(){return r.l})),n.d(t,"TR",(function(){return r.m})),n.d(t,"Table",(function(){return r.n})),n.d(t,"TableBody",(function(){return r.o})),n.d(t,"TableHead",(function(){return r.p})),n.d(t,"Title",(function(){return r.q})),n.d(t,"UnorderedList",(function(){return r.r})),n.d(t,"UserMention",(function(){return r.s}));var i=n(238);n.d(t,"Bold",(function(){return i.a})),n.d(t,"Code",(function(){return i.b})),n.d(t,"Italic",(function(){return i.c})),n.d(t,"Strikethrough",(function(){return i.d})),n.d(t,"Underline",(function(){return i.e}));n(570)},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return C})),n.d(t,"h",(function(){return N})),n.d(t,"j",(function(){return T})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return I})),n.d(t,"n",(function(){return _})),n.d(t,"k",(function(){return A})),n.d(t,"o",(function(){return L})),n.d(t,"p",(function(){return P})),n.d(t,"i",(function(){return w})),n.d(t,"c",(function(){return D}));var r,i,a,o,s=n(3),c=n.n(s),l=n(237),u=n.n(l),d=n(28),p=n.n(d),f={BAD:"#FF1744",GOOD:"#00C853",MEDIUM:"#FFB300",NEUTRAL:"#2196F3"},g={BAR_CHART:"bar-chart",DATA_POINT:"data-point",MULTI_BAR_CHART:"multi-bar-chart",STACKED_BAR_CHART:"stacked-bar-chart"},m="Monthly",v="Weekly",h="Yearly",y={MONTH:"Month",WEEK:"Week",YEAR:"Year"},E=(r={},c()(r,y.MONTH,8),c()(r,y.WEEK,2),c()(r,y.YEAR,104),r),b={COMMUNITIES:"communities",SITES:"sites"},O={DESCRIPTION_ONLY:"description_only",OPEN:"open",READ_ONLY:"read_only",RESTRICTED:"restricted"},C={COMMUNITY_PRIVACY:{canBeCleared:!0,choices:[{label:"COMMUNITY.PRIVACY_".concat(O.DESCRIPTION_ONLY.toUpperCase()),value:O.DESCRIPTION_ONLY},{label:"COMMUNITY.PRIVACY_".concat(O.OPEN.toUpperCase()),value:O.OPEN},{label:"COMMUNITY.PRIVACY_".concat(O.READ_ONLY.toUpperCase()),value:O.READ_ONLY},{label:"COMMUNITY.PRIVACY_".concat(O.RESTRICTED.toUpperCase()),value:O.RESTRICTED}],defaultValue:void 0,icon:"eye",key:"privacy"},COMPARISON:{choices:[{label:"ANALYTICS.FILTER.COMPARISON.WEEKLY",value:v},{label:"ANALYTICS.FILTER.COMPARISON.MONTHLY",value:m},{label:"ANALYTICS.FILTER.COMPARISON.YEARLY",value:h}],defaultValue:v,icon:"swap-horizontal",key:"comparison"},TIMEFRAME:{choices:[{availableComparison:[v,m,h],label:"ANALYTICS.FILTER.TIMEFRAME.WEEK",value:y.WEEK},{availableComparison:[m,h],label:"ANALYTICS.FILTER.TIMEFRAME.MONTH",value:y.MONTH},{availableComparison:[h],label:"ANALYTICS.FILTER.TIMEFRAME.YEAR",value:y.YEAR}],defaultValue:y.WEEK,icon:"clock-outline",key:"timeframe"}},T={BACKEND:"backend",FRONTEND:"frontend"},S={BAD:"bad",GOOD:"good",MEDIUM:"medium",NEUTRAL:"neutral"},I={ACTIVE_COMMUNITIES:"ActiveCommunities",ACTIVE_MEMBERS:"ActiveMembers",ACTIVE_SITES:"ActiveSites",ACTIVE_USERS:"ActiveUsers",CONNECTION_FREQUENCY:"ConnectionFrequency",CONNECTION_TIME:"ConnectionTime",DEVICES:"Devices",FOLLOWERS:"Followers",NEW_CONTENT:"NewContent",NEW_POSTS:"NewPosts",NEW_REACTIONS:"NewReactions",ONBOARDED_MEMBERS:"OnboardedMembers",ONBOARDED_USERS:"OnboardedUsers",PARTICIPATING_MEMBERS:"ParticipatingMembers",PARTICIPATING_USERS:"ParticipatingUsers",PARTICIPATIONS:"Participations",PROFILE_COMPLETION:"ProfileCompletion"},_={NUMBER:"number",PERCENTAGE:"percentage",TIME:"time"},A=(i={},c()(i,I.ACTIVE_COMMUNITIES,{chartType:g.BAR_CHART,displayComparison:!0,displayTotal:!0,indicator:"ActiveCommunities",isNeutral:!0,unit:_.PERCENTAGE}),c()(i,I.ACTIVE_MEMBERS,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"ActiveUsers",unit:_.PERCENTAGE}),c()(i,I.ACTIVE_SITES,{chartType:g.BAR_CHART,displayComparison:!0,displayTotal:!0,indicator:"ActiveSites",isNeutral:!0,unit:_.PERCENTAGE}),c()(i,I.ACTIVE_USERS,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"ActiveUsers",unit:_.PERCENTAGE}),c()(i,I.DEVICES,{chartType:g.STACKED_BAR_CHART,indicator:"Devices",order:["desktop","tablet","mobile","apps","unknown"],unit:_.PERCENTAGE}),c()(i,I.CONNECTION_FREQUENCY,{chartType:g.DATA_POINT,displayComparison:!0,hasLegend:!0,indicator:"ConnectionFrequency",unit:_.NUMBER}),c()(i,I.CONNECTION_TIME,{chartType:g.DATA_POINT,displayComparison:!0,indicator:"ConnectionTime",unit:_.TIME}),c()(i,I.FOLLOWERS,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"Followers",isNeutral:!0,specialIcon:"bell-ring",unit:_.PERCENTAGE}),c()(i,I.NEW_CONTENT,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"NewContents",specialIcon:"heart",unit:_.NUMBER}),c()(i,I.NEW_POSTS,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"NewPosts",specialIcon:"heart",unit:_.NUMBER}),c()(i,I.NEW_REACTIONS,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"NewReactions",specialIcon:"new-box",unit:_.NUMBER}),c()(i,I.ONBOARDED_MEMBERS,{chartType:g.BAR_CHART,displayComparison:!0,displayTotal:!0,indicator:"OnboardedUsers",isNeutral:!0,unit:_.PERCENTAGE}),c()(i,I.ONBOARDED_USERS,{chartType:g.BAR_CHART,displayComparison:!0,displayTotal:!0,indicator:"OnboardedUsers",isNeutral:!0,unit:_.PERCENTAGE}),c()(i,I.PARTICIPATING_MEMBERS,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"ParticipatingUsers",specialIcon:"star",unit:_.PERCENTAGE}),c()(i,I.PARTICIPATING_USERS,{chartType:g.BAR_CHART,displayComparison:!0,indicator:"ParticipatingUsers",specialIcon:"star",unit:_.PERCENTAGE}),c()(i,I.PROFILE_COMPLETION,{chartType:g.MULTI_BAR_CHART,indicator:"ProfileCompletion",order:["Total","MostComplete","LeastComplete"],unit:_.PERCENTAGE}),i),w={COMMUNITY:"community",INSTANCE:"instance",PLATFORM:"platform"},D=(a={},c()(a,w.COMMUNITY,[A[I.ACTIVE_MEMBERS].indicator,A[I.PARTICIPATING_MEMBERS].indicator,A[I.ONBOARDED_MEMBERS].indicator,A[I.FOLLOWERS].indicator,A[I.NEW_POSTS].indicator,A[I.NEW_REACTIONS].indicator,A[I.CONNECTION_TIME].indicator,A[I.CONNECTION_FREQUENCY].indicator,A[I.DEVICES].indicator]),c()(a,w.INSTANCE,[A[I.ACTIVE_USERS].indicator,A[I.PARTICIPATING_USERS].indicator,A[I.NEW_CONTENT].indicator,A[I.NEW_POSTS].indicator,A[I.NEW_REACTIONS].indicator,A[I.CONNECTION_TIME].indicator,A[I.CONNECTION_FREQUENCY].indicator,A[I.DEVICES].indicator,A[I.ACTIVE_COMMUNITIES].indicator,A[I.ONBOARDED_USERS].indicator]),c()(a,w.PLATFORM,[A[I.ACTIVE_USERS].indicator,A[I.PARTICIPATING_USERS].indicator,A[I.NEW_CONTENT].indicator,A[I.NEW_POSTS].indicator,A[I.NEW_REACTIONS].indicator,A[I.CONNECTION_TIME].indicator,A[I.CONNECTION_FREQUENCY].indicator,A[I.DEVICES].indicator,A[I.ACTIVE_SITES].indicator,A[I.ACTIVE_COMMUNITIES].indicator,A[I.ONBOARDED_USERS].indicator]),a),L=(o={},c()(o,b.COMMUNITIES,[I.ACTIVE_MEMBERS,I.PARTICIPATING_MEMBERS,I.ONBOARDED_MEMBERS,I.FOLLOWERS,I.NEW_POSTS,I.NEW_REACTIONS,I.CONNECTION_TIME]),c()(o,b.SITES,[I.ACTIVE_USERS,I.PARTICIPATING_USERS,I.NEW_CONTENT,I.NEW_REACTIONS,I.CONNECTION_TIME,I.ACTIVE_COMMUNITIES]),o),P=u()(p()(b,(function(e){return[e,"platform-".concat(e)]}))),N="customFilters"},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o,s=n(3),c=n.n(s),l=n(18),u=n.n(l),d=n(7),p=n.n(d),f=n(43);!function(e){e.shown="shown",e.hidden="hidden"}(o||(o={}));var g={status:o.hidden,props:{},timer:null},m=Object(f.a)({domain:"notifications",initialState:g,reducers:{show:function(e,t){var n=t.payload,i=n.timer,a=u()(n,["timer"]);p()(e,"status",o.shown),p()(e,"timer",i),p()(e,"props",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:!0},a))},hide:function(e){p()(e,"status",o.hidden),p()(e,"props",{isOpen:!1})},killPreviousTimer:function(e){e.timer&&(clearTimeout(e.timer),p()(e,"timer",g.timer))}}}),v=m.actions,h=m.reducer,y=n(6),E=n.n(y),b=n(10),O=n.n(b),C=n(1),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3;return function(){var n=O()(E.a.mark((function n(r){var i;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(v.killPreviousTimer()),i=window.setTimeout((function(){r(v.hide())}),t),r(v.show(a({},e,{timer:i})));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=function(e){return function(){var t=O()(E.a.mark((function t(n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.timeout,i=u()(e,["timeout"]),T(a({},i,{type:C.Kind.success}),r)(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=O()(E.a.mark((function t(n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.timeout,i=u()(e,["timeout"]),T(a({},i,{type:C.Kind.error}),r)(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=O()(E.a.mark((function t(n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.timeout,i=u()(e,["timeout"]),T(a({},i,{type:C.Kind.warning}),r)(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=n(11),w=n(16),D=n.n(w),L=n(0),P=n.n(L),N=n(15),R=n(59),j=n(9),k=Object(j.createSelector)((function(e){return e.notifications}),(function(e){return e.props})),F=Object(A.connect)((function(e){var t=k(e);return t}),{})((function(e){var t=e.dataAttributes,n=u()(e,["dataAttributes"]),r=n.isOpen,i=n.content,a=n.translate,o=n.actionLabel,s=Object(N.c)(),c=s.translate,l=Object(R.b)("toast-notification"),d=l.get,p=t?d(t):{};return r?P.a.createElement(C.Notification,D()({},n,{content:i||a&&c(a),actionLabel:o&&c(o)||void 0},p)):null}));n(706);n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return S})),n.d(t,"b",(function(){return I})),n.d(t,"e",(function(){return _})),n.d(t,"a",(function(){return F}))},function(e,t,n){"use strict";var r=n(37),i=n(107),a=n.n(i),o=function(e){return a()(e,"__angular__")};t.a=function(e){var t=e.initialState,n=e.domain,i=e.reducers,a={},s={},c=Object.keys(i);c.forEach((function(e){var t=function(e,t){return o(t)?t:"".concat(e,"/").concat(t.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_".concat(t)})).replace(/^_/,"").toUpperCase())}(n,e),r=i[e];a[e]=function(e){return o(t)?{newState:e,type:t}:{payload:e,type:t}},a[e].type=t,s[t]=r}));var l=Object(r.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0,r=s[null==n?void 0:n.type];return r?r(e,n):e}));return{actions:a,domain:n,reducer:l}}},function(e,t,n){"use strict";var r,i,a=n(3),o=n.n(a),s=["_score","relevance"];!function(e){e.DECREASING="decreasing",e.INCREASING="increasing"}(i||(i={}));var c,l,u,d=function(e,t){return"".concat(e).concat(".").concat(t)},p=function(e){var t=e.split(".");return t&&t.length>=2?{sort:t.slice(0,t.length-1).join("."),order:t[t.length-1]}:{}},f=(r={},o()(r,i.INCREASING,i.DECREASING),o()(r,i.DECREASING,i.INCREASING),function(e){return Boolean(e&&s.indexOf(e)>=0)});!function(e){e.ARTICLE="article",e.TICKET="ticket"}(u||(u={}));var g,m=(c={},o()(c,u.ARTICLE,"FRONT.ZENDESK.TYPE.ARTICLE"),o()(c,u.TICKET,"FRONT.ZENDESK.TYPE.TICKET"),c);!function(e){e.CLOSED="closed",e.HOLD="hold",e.OPEN="open",e.NEW="new",e.PENDING="pending",e.SOLVED="solved"}(g||(g={}));var v,h;l={},o()(l,g.CLOSED,"FRONT.ZENDESK.TICKET_STATUS.CLOSED"),o()(l,g.HOLD,"FRONT.ZENDESK.TICKET_STATUS.HOLD"),o()(l,g.OPEN,"FRONT.ZENDESK.TICKET_STATUS.OPEN"),o()(l,g.PENDING,"FRONT.ZENDESK.TICKET_STATUS.PENDING"),o()(l,g.SOLVED,"FRONT.ZENDESK.TICKET_STATUS.SOLVED"),o()(l,g.NEW,"FRONT.ZENDESK.TICKET_STATUS.NEW");!function(e){e.LUMAPPS="lumapps",e.DRIVE="drive",e.LUMWORK="lumwork",e.ZENDESK="zendesk",e.SHAREPOINT="sharepoint"}(h||(h={}));var y=(v={},o()(v,h.DRIVE,"GLOBAL.DRIVE"),o()(v,h.LUMWORK,"SEARCH_PLUS_LUMWORK_TAB"),o()(v,h.ZENDESK,"SEARCH_PLUS_ZENDESK_TAB"),o()(v,h.SHAREPOINT,"GLOBAL.ONE_DRIVE"),o()(v,h.LUMAPPS,"GLOBAL.LUMAPPS"),v);n.d(t,"i",(function(){return b})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"a",(function(){return S})),n.d(t,"d",(function(){return I})),n.d(t,"j",(function(){return _})),n.d(t,"t",(function(){return A})),n.d(t,"s",(function(){return w})),n.d(t,"n",(function(){return E})),n.d(t,"e",(function(){return P})),n.d(t,"p",(function(){return L})),n.d(t,"l",(function(){return N})),n.d(t,"m",(function(){return R})),n.d(t,"k",(function(){return j})),n.d(t,"o",(function(){return i})),n.d(t,"u",(function(){return d})),n.d(t,"w",(function(){return p})),n.d(t,"v",(function(){return f})),n.d(t,"q",(function(){return u})),n.d(t,"r",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return y}));var E,b=10,O=4,C=5,T=5,S="all",I="facet.",_=6e3,A=function(e){return"".concat(I).concat(e)},w=function(e,t){return 0===e.indexOf(I)&&Boolean(t)};!function(e){e.IMAGE="IMAGE",e.OTHER="OTHER"}(E||(E={}));var D,L,P="--";!function(e){e.EXTERNAL="external",e.IFRAME="iframe"}(D||(D={})),function(e){e.LOADING="loading",e.BROWSING="browsing",e.ERROR="error"}(L||(L={}));var N="search-history",R="search-interactions",j="useGroupsRestrictions"},function(e,t,n){"use strict";var r=n(100),i=n(542),a=n(336),o=n.n(a),s=function(e){return o()(e,(function(e){return null!=e}))},c=n(143),l=n.n(c),u=l.a.isCancel;n.d(t,"c",(function(){return r.c})),n.d(t,"a",(function(){return r.a})),n.d(t,"d",(function(){return i.a})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return u}))},function(e,t,n){"use strict";function r(){return r=l()(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.spaceId,e.abrupt("return",Object(p.j)({provider:n,spaceId:r}).then((function(e){return{payload:e.data}})));case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function i(e){return a.apply(this,arguments)}function a(){return a=l()(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.spaceId,e.abrupt("return",Object(p.b)({provider:n,spaceId:r}).then((function(e){return{payload:e.data}})));case 2:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}var o=n(6),s=n.n(o),c=n(10),l=n.n(c),u=n(36),d=n(5),p=n(95),f=function(e){var t=e.provider,n=e.spaceId,r=e.channelName;return Object(p.d)({provider:t,spaceId:n,channelName:r}).then((function(e){return{payload:e.data}}))},g=function(e){var t=e.provider,n=e.spaceId;return Object(p.i)({provider:t,spaceId:n}).then((function(e){return{payload:e.data}}))};n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return I})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return A})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return L})),n.d(t,"m",(function(){return P})),n.d(t,"n",(function(){return N})),n.d(t,"o",(function(){return R})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return F})),n.d(t,"s",(function(){return U})),n.d(t,"t",(function(){return M})),n.d(t,"u",(function(){return x})),n.d(t,"p",(function(){return $})),n.d(t,"q",(function(){return B})),n.d(t,"r",(function(){return W})),n.d(t,"v",(function(){return v})),n.d(t,"w",(function(){return h})),n.d(t,"x",(function(){return y})),n.d(t,"E",(function(){return E})),n.d(t,"F",(function(){return b})),n.d(t,"G",(function(){return O})),n.d(t,"y",(function(){return K})),n.d(t,"z",(function(){return V})),n.d(t,"A",(function(){return z})),n.d(t,"B",(function(){return q})),n.d(t,"C",(function(){return X})),n.d(t,"D",(function(){return Q})),n.d(t,"H",(function(){return G})),n.d(t,"I",(function(){return Y})),n.d(t,"J",(function(){return H})),n.d(t,"O",(function(){return Z})),n.d(t,"S",(function(){return J})),n.d(t,"M",(function(){return ce})),n.d(t,"W",(function(){return ee})),n.d(t,"R",(function(){return te})),n.d(t,"U",(function(){return ne})),n.d(t,"P",(function(){return re})),n.d(t,"V",(function(){return ie})),n.d(t,"N",(function(){return ae})),n.d(t,"L",(function(){return oe})),n.d(t,"Q",(function(){return se})),n.d(t,"K",(function(){return le})),n.d(t,"T",(function(){return ue})),n.d(t,"Y",(function(){return de})),n.d(t,"eb",(function(){return pe})),n.d(t,"ib",(function(){return fe})),n.d(t,"db",(function(){return ge})),n.d(t,"ab",(function(){return me})),n.d(t,"Z",(function(){return he})),n.d(t,"bb",(function(){return Oe})),n.d(t,"fb",(function(){return ye})),n.d(t,"gb",(function(){return Ee})),n.d(t,"hb",(function(){return ve})),n.d(t,"jb",(function(){return be})),n.d(t,"X",(function(){return Ce})),n.d(t,"cb",(function(){return Te})),n.d(t,"ob",(function(){return Se})),n.d(t,"sb",(function(){return Ie})),n.d(t,"vb",(function(){return _e})),n.d(t,"rb",(function(){return Ae})),n.d(t,"tb",(function(){return we})),n.d(t,"pb",(function(){return De})),n.d(t,"ub",(function(){return Le})),n.d(t,"nb",(function(){return Pe})),n.d(t,"lb",(function(){return Ne})),n.d(t,"qb",(function(){return Re})),n.d(t,"mb",(function(){return je})),n.d(t,"kb",(function(){return ke}));var m="chat/DISCONNECTT_USER_TOKEN_SUCCESS",v="chat/GET_AUTHORIZE_LINK_ERROR",h="chat/GET_AUTHORIZE_LINK_LOADING",y="chat/GET_AUTHORIZE_LINK_SUCCESS",E="chat/GET_USER_TOKEN_STATUS_ERROR",b="chat/GET_USER_TOKEN_STATUS_LOADING",O="chat/GET_USER_TOKEN_STATUS_SUCCESS",C="chat/FETCH_GROUPS_ERROR",T="chat/FETCH_GROUPS_LOADING",S="chat/FETCH_GROUPS_SUCCESS",I="chat/FETCH_JOINED_GROUPS_ERROR",_="chat/FETCH_JOINED_GROUPS_LOADING",A="chat/FETCH_JOINED_GROUPS_SUCCESS",w="chat/FETCH_CHANNELS_FOR_GROUP_ERROR",D="chat/FETCH_CHANNELS_FOR_GROUP_LOADING",L="chat/FETCH_CHANNELS_FOR_GROUP_SUCCESS",P="chat/FETCH_MESSAGES_FOR_CHANNEL_ERROR",N="chat/FETCH_MESSAGES_FOR_CHANNEL_LOADING",R="chat/FETCH_MESSAGES_FOR_CHANNEL_SUCCESS",j="chat/CREATE_MESSAGE_FOR_CHANNEL_ERROR",k="chat/CREATE_MESSAGE_FOR_CHANNEL_LOADING",F="chat/CREATE_MESSAGE_FOR_CHANNEL_SUCCESS",U="chat/FETCH_USER_PHOTO_ERROR",M="chat/FETCH_USER_PHOTO_LOADING",x="chat/FETCH_USER_PHOTO_SUCCESS",$="chat/FETCH_PROVIDERS_ERROR",B="chat/FETCH_PROVIDERS_LOADING",W="chat/FETCH_PROVIDERS_SUCCESS",G="chat/HAS_USER_JOINED_CHANNEL_ERROR",Y="chat/HAS_USER_JOINED_CHANNEL_LOADING",H="chat/HAS_USER_JOINED_CHANNEL_SUCCESS",K="chat/GET_CHANNEL_BY_ID_ERROR",V="chat/GET_CHANNEL_BY_ID_LOADING",z="chat/GET_CHANNEL_BY_ID_SUCCESS",q="chat/GET_GROUPS_BY_ID_ERROR",X="chat/GET_GROUPS_BY_ID_LOADING",Q="chat/GET_GROUPS_BY_ID_SUCCESS",Z="chat/SET_LOADING",J="chat/SET_PAGINATION_LOADING",ee="chat/SET_SIZE",te="chat/SET_OPEN",ne="chat/SET_SELECTED_THREAD",re="chat/SET_MODEL",ie="chat/SET_SHOW",ae="chat/SET_LAST_CLOSED",oe="chat/SET_CREATE_MESSAGE_LOADING",se="chat/SET_NOTIFICATION_COUNT",ce="chat/SET_EMOJI_OPEN",le="chat/SET_CHANNEL_URL",ue="chat/SET_PHOTO_REQUESTED",de=function(e,t){return function(){var n=l()(s.a.mark((function n(r){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({meta:{provider:e,spaceId:t},type:"chat/DISCONNECT_USER_TOKEN_LOADING"}),n.abrupt("return",i({provider:e,spaceId:t}).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.payload;r({meta:{provider:e,spaceId:t},type:m})})).catch((function(n){r({meta:{provider:e,spaceId:t},type:"chat/DISCONNECT_USER_TOKEN_ERROR"}),Object(u.b)(Object(d.h)("FRONT.CHAT_DISCONNECT_USER_TOKEN_ERROR"))})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},pe=function(e,t){return function(){var n=l()(s.a.mark((function n(r){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",g({provider:e,spaceId:t}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;return t.link})).catch((function(e){Object(u.b)(Object(d.h)("FRONT.CHAT_GET_AUTHORIZE_LINK_ERROR"))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fe=function(e){var t=e.provider,n=e.spaceId;return function(e){return e({meta:{provider:t,spaceId:n},type:b}),function(e){return r.apply(this,arguments)}({provider:t,spaceId:n}).then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.payload;e({meta:{provider:t,spaceId:n},payload:i,type:O})})).catch((function(r){e({meta:{provider:t,spaceId:n},payload:r,type:E}),Object(u.b)(Object(d.h)("FRONT.CHAT_GET_USER_TOKEN_STATUS_ERROR"))}))}},ge=function(e){var t=e.cursor,n=e.maxResults,r=e.page,i=e.provider;return function(e){return e({meta:{provider:i},type:T}),function(e){var t=e.cursor,n=e.maxResults,r=e.page,i=e.provider;return Object(p.q)({cursor:t,maxResults:n,page:r,provider:i}).then((function(e){return{payload:e.data}}))}({cursor:t,maxResults:n,page:r,provider:i}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({meta:{provider:i},payload:n,type:S})})).catch((function(t){e({meta:{provider:i},payload:t,type:C}),Object(u.b)(Object(d.h)("FRONT.FETCH_GROUPS_ERROR"))}))}},me=function(e){var t=e.cursor,n=e.maxResults,r=e.page,i=e.provider;return function(e){return e({meta:{provider:i},type:_}),function(e){var t=e.cursor,n=e.maxResults,r=e.page,i=e.provider;return Object(p.m)({cursor:t,maxResults:n,page:r,provider:i}).then((function(e){return{payload:e.data}}))}({cursor:t,maxResults:n,page:r,provider:i}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({meta:{provider:i},payload:n,type:A})})).catch((function(t){e({meta:{provider:i},payload:t,type:I}),Object(u.b)(Object(d.h)("FRONT.FETCH_JOINED_GROUPS_ERROR"))}))}},ve=function(e){var t=e.provider,n=e.spaceId;return function(e){return e({meta:{provider:t,spaceId:n},payload:{isLoading:!0},type:X}),function(e){var t=e.provider,n=e.spaceId;return Object(p.g)({provider:t,spaceId:n}).then((function(e){return{payload:e.data}}))}({provider:t,spaceId:n}).then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.payload;e({meta:{provider:t,spaceId:n},payload:i,type:Q})})).catch((function(r){e({meta:{provider:t,spaceId:n},payload:r,type:q}),Object(u.b)(Object(d.h)("FRONT.GET_GROUP_BY_ID_ERROR"))})).finally((function(){e({meta:{provider:t,spaceId:n},payload:{isLoading:!1},type:X})}))}},he=function(e){var t=e.callId,n=e.cursor,r=e.maxResults,i=e.page,a=e.provider,o=e.spaceId;return function(e){return e({meta:{provider:a,spaceId:o},type:D}),function(e){var t=e.callId,n=e.cursor,r=e.maxResults,i=e.page,a=e.provider,o=e.spaceId;return Object(p.l)({callId:t,cursor:n,maxResults:r,page:i,provider:a,spaceId:o}).then((function(e){return{payload:e.data}}))}({callId:t,cursor:n,maxResults:r,page:i,provider:a,spaceId:o}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({meta:{provider:a,spaceId:o},payload:n,type:L})})).catch((function(t){e({meta:{provider:a,spaceId:o},payload:t,type:w}),Object(u.b)(Object(d.h)("FRONT.FETCH_CHANNELS_FOR_GROUP_ERROR"))}))}},ye=function(e){var t=e.provider,n=e.spaceId,r=e.channelId;return function(e){return e({meta:{channelId:r,provider:t,spaceId:n},type:V}),function(e){var t=e.provider,n=e.spaceId,r=e.channelId;return Object(p.c)({provider:t,spaceId:n,channelId:r}).then((function(e){return{payload:e.data}}))}({provider:t,spaceId:n,channelId:r}).then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.payload;e({meta:{channelId:r,provider:t,spaceId:n},payload:a,type:z})})).catch((function(i){e({meta:{channelId:r,provider:t,spaceId:n},payload:i,type:K})}))}},Ee=function(e){var t=e.provider,n=e.spaceId,r=e.channelName;return l()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f({provider:t,spaceId:n,channelName:r}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;return t})));case 1:case"end":return e.stop()}}),e)})))},be=function(e){var t=e.provider,n=e.spaceId,r=e.channelId;return function(e){return e({meta:{channelId:r,provider:t,spaceId:n},type:Y}),function(e){var t=e.provider,n=e.spaceId,r=e.channelId;return Object(p.k)({provider:t,spaceId:n,channelId:r}).then((function(e){return{payload:e.data}}))}({provider:t,spaceId:n,channelId:r}).then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.payload;e({meta:{channelId:r,provider:t,spaceId:n},payload:a,type:H})})).catch((function(i){e({meta:{channelId:r,provider:t,spaceId:n},payload:i,type:G}),Object(u.b)(Object(d.h)("FRONT.HAS_USER_JOINED_CHANNEL_ERROR"))}))}},Oe=function(e){var t=e.callId,n=e.channelId,r=e.chatMessageId,i=e.cursor,a=e.fields,o=e.maxResults,s=e.page,c=e.provider,l=e.spaceId;return function(e){return e({meta:{channelId:n,chatMessageId:r,page:s,provider:c,spaceId:l},type:N}),function(e){var t=e.callId,n=e.channelId,r=e.chatMessageId,i=e.cursor,a=e.fields,o=e.maxResults,s=e.page,c=e.provider,l=e.spaceId;return Object(p.n)({callId:t,channelId:n,chatMessageId:r,cursor:i,fields:a,maxResults:o,page:s,provider:c,spaceId:l}).then((function(e){return{payload:e.data}}))}({callId:t,channelId:n,chatMessageId:r,cursor:i,fields:a,maxResults:o,page:s,provider:c,spaceId:l}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.payload;i.items=i.items||[],e({meta:{channelId:n,chatMessageId:r,page:s,provider:c,spaceId:l},payload:i,type:R})})).catch((function(t){e({meta:{channelId:n,chatMessageId:r,page:s,provider:c,spaceId:l},payload:t,type:P})}))}},Ce=function(e){var t=e.body,n=e.bodyContentType,r=e.callId,i=e.channelId,a=e.chatMessageId,o=e.provider,s=e.spaceId;return function(e){return e({meta:{channelId:i,chatMessageId:a,provider:o,spaceId:s},type:k}),function(e){var t=e.body,n=e.bodyContentType,r=e.callId,i=e.channelId,a=e.chatMessageId,o=e.provider,s=e.spaceId;return Object(p.r)({body:t,bodyContentType:n,callId:r,channelId:i,chatMessageId:a,provider:o,spaceId:s}).then((function(e){return{payload:e.data}}))}({body:t,bodyContentType:n,callId:r,channelId:i,chatMessageId:a,provider:o,spaceId:s}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({meta:{channelId:i,chatMessageId:a,provider:o,spaceId:s},payload:n,type:F})})).catch((function(t){e({meta:{channelId:i,chatMessageId:a,provider:o,spaceId:s},payload:t,type:j}),Object(u.b)(Object(d.h)("FRONT.CHAT.POST_MESSAGE_FOR_CHANNEL_ERROR"))}))}},Te=function(){return function(e){return e({type:B}),Object(p.p)().then((function(e){return{payload:e.data}})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({payload:n,type:W})})).catch((function(t){e({payload:t,type:$})}))}},Se=function(e){var t=e.uuid,n=e.isLoading;return function(e){e({payload:{isLoading:n,uuid:t},type:Z})}},Ie=function(e){var t=e.uuid,n=e.isPaginationLoading;return function(e){e({payload:{isPaginationLoading:n,uuid:t},type:J})}},_e=function(e){var t=e.size,n=e.uuid;return function(e){e({payload:{size:t,uuid:n},type:ee})}},Ae=function(e){var t=e.isOpen,n=e.uuid;return function(e){e({payload:{isOpen:t,uuid:n},type:te})}},we=function(e){var t=e.uuid,n=e.selectedThread;return function(e){e({payload:{selectedThread:n,uuid:t},type:ne})}},De=function(e){var t=e.model,n=e.uuid;return function(e){e({payload:{model:t,uuid:n},type:re})}},Le=function(e){var t=e.isShown,n=e.uuid;return function(e){e({payload:{isShown:t,uuid:n},type:ie})}},Pe=function(e){var t=e.lastClosed,n=e.uuid;return function(e){e({payload:{lastClosed:t,uuid:n},type:ae})}},Ne=function(e){var t=e.isCreateMessageLoading,n=e.uuid;return function(e){e({payload:{isCreateMessageLoading:t,uuid:n},type:oe})}},Re=function(e){var t=e.notificationCount,n=e.uuid;return function(e){e({payload:{notificationCount:t,uuid:n},type:se})}},je=function(e){var t=e.isEmojiEditorOpened,n=e.uuid;return function(e){e({payload:{isEmojiEditorOpened:t,uuid:n},type:ce})}},ke=function(e){var t=e.channelUrl,n=e.uuid;return function(e){e({payload:{channelUrl:t,uuid:n},type:le})}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"d",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"i",(function(){return E})),n.d(t,"f",(function(){return O})),n.d(t,"o",(function(){return S})),n.d(t,"j",(function(){return _})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return R})),n.d(t,"h",(function(){return j})),n.d(t,"k",(function(){return k})),n.d(t,"m",(function(){return F})),n.d(t,"g",(function(){return U})),n.d(t,"l",(function(){return M})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return $}));var a=n(3),o=n.n(a),s=n(2),c=n(28),l=n.n(c),u=n(359),d=n.n(u),p=n(73),f=n(65),g=Object(s.oneOf)(l()(f.a,(function(e){return d()(e," ")}))),m={shadowElevation:s.number,shadowOpacity:s.number},v=Object(s.shape)(m),h={backgroundColor:p.a,backgroundImage:Object(s.shape)({}),backgroundPosition:Object(s.oneOf)(l()(f.a,(function(e){return d()(e," ")}))),backgroundSize:Object(s.oneOf)(l()(f.b,"value"))},y=Object(s.shape)(i({},h,{},m,{theme:p.e})),E=Object(s.shape)({color:p.a,fontSize:s.number,fontWeight:Object(s.oneOfType)([Object(s.oneOf)(l()(f.p,"value")),s.number])}),b={borderBottomColor:p.a,borderBottomLeftRadius:s.number,borderBottomRightRadius:s.number,borderBottomWidth:s.number,borderColor:p.a,borderLeftColor:p.a,borderLeftWidth:s.number,borderRadius:s.number,borderRightColor:p.a,borderRightWidth:s.number,borderTopColor:p.a,borderTopLeftRadius:s.number,borderTopRightRadius:s.number,borderTopWidth:s.number,borderWidth:s.number},O=Object(s.shape)(b),C={margin:s.number,marginBottom:s.number,marginLeft:s.number,marginRight:s.number,marginTop:s.number},T=(Object(s.shape)(C),{padding:s.number,paddingBottom:Object(s.oneOfType)([s.number,s.string]),paddingLeft:Object(s.oneOfType)([s.number,s.string]),paddingRight:Object(s.oneOfType)([s.number,s.string]),paddingTop:Object(s.oneOfType)([s.number,s.string])}),S=(Object(s.shape)(T),Object(s.shape)(i({},C,{},T))),I={fullHeight:s.bool,height:s.number},_=Object(s.shape)(I),A={fullWidth:s.bool},w=(Object(s.shape)(A),Object(s.oneOf)(["header","footer"])),D=Object(s.oneOf)(["block","flex"]),L=Object(s.oneOf)(["row","row-reverse","column","column-reverse"]),P=Object(s.oneOf)(["flex-start","center","flex-end"]),N=Object(s.oneOf)(["flex-start","center","flex-end"]),R=Object(s.shape)({icon:Object(s.shape)({color:p.a,fontSize:s.number}),label:Object(s.shape)({color:p.a,fontFamily:s.string,fontSize:s.number,fontWeight:s.number}),main:Object(s.shape)(i({},h,{display:D,justifyContent:P},m)),wrapper:Object(s.shape)(i({alignItems:N},b,{flexDirection:L},I,{justifyContent:P},C,{},T,{},m))}),j=Object(s.shape)(i({},h,{},b,{},I,{},C,{},T,{},m,{theme:p.e})),k=j,F=Object(s.shape)(i({},h,{},C,{},b,{},T)),U=Object(s.shape)({components:Object(s.shape)(i({},C,{},b,{},T)),main:Object(s.shape)(i({},h,{},m))}),M=Object(s.arrayOf)(Object(s.shape)({default:s.any,label:s.string,name:s.string})),x=Object(s.oneOf)(["default","hover"]),$=Object(s.shape)({content:j,footer:R,header:R,main:k})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l}));var r={FBWORKPLACE:{id:"fbworkplace",name:"Workplace"},SLACK:{id:"slack",name:"Slack"},TEAMS:{id:"teams",name:"Teams"},YAMMER:{id:"yammer",name:"Yammer"}},i={fbworkplace:r.FBWORKPLACE,slack:r.SLACK,teams:r.TEAMS,yammer:r.YAMMER},a={FULLSCREEN:"fullscreen",LARGE:"large",SMALL:"small"},o={DEFAULT:"default",STICKY:"sticky"},s={HTML:"html",MARKDOWN:"markdown"},c={BASE64:"data/base64",URL:"url"},l={LIKE:"like"},u={fbworkplace:6e4,slack:3e3,teams:2e3,yammer:6e4}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return m}));var r=n(33),i=n.n(r),a=i.a,o=i.a,s=i.a,c=(i.a,i.a),l=i.a,u=i.a,d=i.a,p=(i.a,i.a,i.a),f=i.a,g=i.a,m=(i.a,function(e){a=e.getAccountType,o=e.getAvatarUrl,s=e.getConnected,e.getProfilePicture,c=e.getToken,l=e.getUserFullName,u=e.isConnected,d=e.isExternal,e.isGoogle,e.isGuest,p=e.isMicrosoft,f=e.redirectToProfile,g=e.redirectToUserDirectoryProfile,e.setConnectedUser})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(2),i=(r.string,Object(r.arrayOf)(r.string)),a=Object(r.oneOfType)([r.string,r.number]),o=a,s=Object(r.oneOfType)([o,Object(r.arrayOf)(o)])},,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(18),l=n.n(c),u=n(4),d=n.n(u),p=n(5),f=n(36),g=n(602),m=n(433),v=n(427),h=n(94),y=n(19),E=n.n(y),b=n(3),O=n.n(b),C=n(64),T=new C.a({path:"community"}),S=function(e){return T.post("save",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{},{},e))},I=n(134),_=n(172),A=n(235),w=function(e){var t=e.communitySettings,n=e.customerId,r=e.instanceId,i=e.community,a=function(e){var t=e.communitySettings,n=e.customerId,r=e.instanceId,i=e.community,a=t.extraFields,o=t.group,s=t.settings,c=s.description,l=s.externalServices,u=s.members,d=s.options,p=s.visibility,f={};f.customer=n,f.instance=r;var g=a.communityId,m=a.lastRevision,v=a.templateId,h=a.workspaceId;f.uid=g,f.workspace=h,m&&(f.version=m.version);var y=o.id,b=o.name,O=o.type;O===I.b.PICK?f.groupId=y:f.groupName=b,f.privacy=p.visibility;var C=c.fields;f.title={},Object.keys(C.name).forEach((function(e){f.title[e]=C.name[e].value})),C.description&&(f.description={},Object.keys(C.description).forEach((function(e){f.description[e]=C.description[e].value}))),f.slug={},Object.keys(C.url).forEach((function(e){f.slug[e]=C.url[e].value}));var T=u.members.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t.uid),e}),{});f.adminKeys=T[_.b.OWNER]||[],f.userKeys=T[_.b.MEMBER]||[];var S,w,D=d.fields,L=D.categoriesLabels,P=D.ideaStatusLabels,N=D.isEventEnabled,R=D.isHomepageEnabled,j=D.isQuestionEnabled,k=D.isIdeaEnabled,F=D.isPostEnabled;v&&(f.fromTemplate=v),f.properties={hasDashboard:R},f.postStatuses=[],f.tagsDetails=[],f.postTypes=[],F&&f.postTypes.push("DEFAULT"),k&&f.postTypes.push("IDEA"),Array.isArray(P)&&k&&(S=f.postStatuses).push.apply(S,E()(P.map((function(e){return{title:e.labels}})))),Array.isArray(L)&&(w=f.tagsDetails).push.apply(w,E()(L.map((function(e){return{instance:r,kind:"community",name:e.labels,uid:e.uid}})))),j&&f.postTypes.push("QUESTION"),N&&f.postTypes.push("EVENT");var U=l.fields,M=l.chatSelectChannelMode;return f.createCalendar=U.isCalendarEnabled,f.createDrive=U.isDriveEnabled,f.securedRepository=U.isMediaSecuredEnabled,f.useChat=U.isChatEnabled,f.hasChat=U.isChatEnabled,f.chatProvider=U.chatProvider,f.useChat&&(f.chat={chatName:U.chatChannelName,chanId:M===A.a.SELECT.id?U.chatChannelId:void 0,chatId:U.chatUserSpace,chatProvider:U.chatProvider}),i&&(f.communityType=i.communityType,f.thumbnail=i.thumbnail),f}({communitySettings:t,customerId:n,instanceId:r,community:i});return S(a).then((function(e){return{payload:e.data}}))};n.d(t,"c",(function(){return D})),n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return F})),n.d(t,"d",(function(){return B})),n.d(t,"e",(function(){return W})),n.d(t,"f",(function(){return G})),n.d(t,"g",(function(){return Y})),n.d(t,"h",(function(){return H})),n.d(t,"i",(function(){return K})),n.d(t,"j",(function(){return P})),n.d(t,"k",(function(){return U})),n.d(t,"l",(function(){return N})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return j})),n.d(t,"p",(function(){return M})),n.d(t,"o",(function(){return x})),n.d(t,"q",(function(){return $})),n.d(t,"r",(function(){return k})),n.d(t,"s",(function(){return z})),n.d(t,"t",(function(){return q})),n.d(t,"v",(function(){return X})),n.d(t,"w",(function(){return Q})),n.d(t,"u",(function(){return se})),n.d(t,"x",(function(){return Z})),n.d(t,"y",(function(){return J})),n.d(t,"z",(function(){return ee})),n.d(t,"A",(function(){return te})),n.d(t,"C",(function(){return re})),n.d(t,"B",(function(){return ae})),n.d(t,"D",(function(){return oe})),n.d(t,"E",(function(){return ne}));var D="".concat("admin/communities","/").concat("community-setup"),L="".concat(D,"/CLOSE_COMMUNITY_SETTINGS"),P="".concat(D,"/OPEN_COMMUNITY_SETTINGS"),N="".concat(D,"/SET_CURRENT_LANG"),R="".concat(D,"/SET_CURRENT_STEP"),j="".concat(D,"/SET_CURRENT_STEP_PROGRESS"),k="".concat(D,"/SET_STEP_LANG_ERROR"),F="admin/communities/community-setup/CLOSE_GROUP_EDITION_CONFIRM_DIALOG",U="admin/communities/community-setup/OPEN_GROUP_EDITION_CONFIRM_DIALOG",M="".concat(D,"/SET_GROUP_TYPE"),x="".concat(D,"/SET_EXISTING_GROUP"),$="".concat(D,"/SET_NEW_GROUP_NAME"),B="".concat(D,"/CREATE_COMMUNITY_ERROR"),W="".concat(D,"/CREATE_COMMUNITY_LOADING"),G="".concat(D,"/CREATE_COMMUNITY_SUCCESS"),Y="".concat(D,"/EDIT_COMMUNITY_ERROR"),H="".concat(D,"/EDIT_COMMUNITY_LOADING"),K="".concat(D,"/EDIT_COMMUNITY_SUCCESS"),V=function(e){return e.admin.communities.communitySetup},z=function(){return function(e){e({type:L})}},q=function(){return function(e){e({type:F})}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.a.EDIT;return function(t){t({type:P,mode:e})}},Q=function(){return function(e){e({type:U})}},Z=function(){return function(e,t){var n=t(),r=n.customer,i=n.instance,a=l()(n,["customer","instance"]),o=V(a),s=a.admin.communities.creationWizard.community,c=r.id,u=i.id,d=o.setup.mode===h.a.CREATE;return e({type:d?W:H}),w({communitySettings:o,customerId:c,instanceId:u,community:s}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({payload:n,type:d?G:K}),Object(f.d)(Object(p.h)("ADMIN.COMMUNITIES.SAVED")),Object(g.b)(n,"community"),e({type:L})})).catch((function(t){e({payload:t,type:d?B:Y}),Object(f.b)(Object(p.h)("ADMIN.COMMUNITY.SETUP.SAVE.ERROR"))}))}},J=function(e){var t=e.lang;return function(e){e({payload:{language:t},type:N})}},ee=function(e){var t=e.step;return function(e){e({payload:{step:t},type:R})}},te=function(e){var t=e.status;return function(e){e({payload:{status:t},type:j})}},ne=function(e){var t=e.languages;return function(e){e({payload:{languages:t},type:k})}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return function(e){e({payload:{type:t},type:M})}},ie=function(e,t){var n=e().groups.list;return n.find((function(e){return e.id===t}))},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return function(){var e=s()(a.a.mark((function e(n,r){var i,o,s,c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ie(r,t),i){e.next=4;break}return e.next=4,n(Object(v.a)({id:t}));case 4:o=ie(r,t),s=o.name,c=o.visibility,l=V(r()),u=l.setup,n({payload:{communitySetupMode:u.mode,id:t,name:s,visibility:c},type:x});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return function(e){e({payload:{value:t},type:$})}},se=function(){return function(){var e=s()(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=V(n()).extraFields.workspaceId,r){e.next=3;break}return e.abrupt("return");case 3:if(d()(n(),"workspaces.list[workspaceId].group")){e.next=6;break}return e.next=6,t(Object(m.b)({workspaceId:r}));case 6:i=n().workspaces.list[r].group.apiId,t(ae({id:i}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},function(e,t,n){"use strict";var r=n(582);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e})),n.d(t,"f",(function(){return r.f})),n.d(t,"g",(function(){return r.g})),n.d(t,"h",(function(){return r.h}))},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(595),o=n(14),s=n.n(o),c=n(52),l=n(103),u=n(32),d="backoffice-section-header-label",p=function(e){var t=e.title,n=e.parentTitle,r=e.children;return i.a.createElement("div",{className:d},i.a.createElement("div",{className:s()("".concat(d,"__title-wrapper"),"lumx-spacing-margin-right-huge")},n&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:s()("".concat(d,"__parent"),"lumx-typography-headline")},n),i.a.createElement(l.a,{icon:c.jb,size:u.h.xs,className:s()("".concat(d,"__parent-icon"),"lumx-spacing-margin-horizontal-regular")})),i.a.createElement("span",{className:s()("".concat(d,"__title"),"lumx-typography-headline")},t)),r)},f=function(e){var t=e.title,n=e.parentTitle,r=e.actions,o=e.children,s=e.beforeActions;return i.a.createElement(i.a.Fragment,null,i.a.createElement(a.a,{className:"backoffice-section-header",label:t&&i.a.createElement(p,{title:t,parentTitle:n},o),before:s,after:r}))},g=(n(792),n(409),n(15)),m=n(16),v=n.n(m),h=n(3),y=n.n(h),E=n(59),b="backoffice-section",O=function(e){var t=e.className,n=e.header,r=e.children,a=e.hasTabs,o=e.id,c=void 0===o?"":o,l=Object(E.b)("back-office"),u=l.get,d=u({element:c,action:"page"}),p=s()(t,"".concat(b,"__wrapper"),y()({},"".concat(b,"__wrapper--has-tabs"),a));return i.a.createElement("section",v()({className:b},d),n&&i.a.createElement("header",{className:"".concat(b,"__header")},n),r&&i.a.createElement("div",{className:p},a?r:i.a.createElement("div",{className:"".concat(b,"__content")}," ",r)))},C=n(18),T=n.n(C),S=n(109),I=n.n(S),_=n(793),A=n(671),w=n(331),D="navigation-header",L=function(e){var t=e.fallbackHomeImageSrc,n=void 0===t?"":t,r=e.homeImageSrc,a=e.homeLinkUrl,o=e.avatarImageSrc,c=e.avatarLinkUrl,l=e.backgroundColor,d=e.isSticky,p=void 0!==d&&d,f=e.children,m=T()(e,["fallbackHomeImageSrc","homeImageSrc","homeLinkUrl","avatarImageSrc","avatarLinkUrl","backgroundColor","isSticky","children"]),h=Object(g.c)(),E=h.translateKey,b=h.translateObject,O=Object(w.a)(),C=i.a.useMemo((function(){var e=n;if(r){if(I()(r)){var t=b(r);return t?t.url:e}return r}return e}),[r,b,n]);return i.a.createElement("li",v()({className:s()(D,y()({},"".concat(D,"--is-sticky"),p)),style:{backgroundColor:O.backgroundColor||l}},m),i.a.createElement(_.a,{label:E("ADMIN.VIEW_HOMEPAGE")},i.a.createElement("a",{href:a,className:"".concat(D,"__logo")},C&&i.a.createElement("img",{src:C,alt:E("GLOBAL.INSTANCE_LOGO_DESCRIPTION")}))),o&&i.a.createElement(_.a,{label:E("GLOBAL.VIEW_USER_PROFILE")},i.a.createElement("a",{href:c,className:"".concat(D,"__user")},i.a.createElement(A.a,{image:o,size:u.h.m,alt:E("GLOBAL.VIEW_USER_PROFILE")}))),f)};L.displayName="SideNavigationItem";var P=n(578);n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return L})),n.d(t,"d",(function(){return P.a})),n.d(t,"f",(function(){return P.c})),n.d(t,"e",(function(){return P.b})),n.d(t,"g",(function(){return P.d}))},function(e,t,n){"use strict";var r=n(235),i=n(0),a=n.n(i),o=n(14),s=n.n(o),c=n(1),l=n(5),u=function(e){var t=e.errorMessage,n=e.isLoading,r=e.label,i=e.changeDone,o=e.channelName,u=e.nameIsValid,d=e.validateInput;return a.a.createElement("div",null,a.a.createElement(c.TextField,{clearButtonProps:{label:Object(l.h)("GLOBAL.CLEAR")},isValid:void 0===u?void 0:u,hasError:void 0===u?void 0:!u,isDisabled:n,label:Object(l.h)(r),value:o,onBlur:function(e){return i(e.target.value)},onChange:d}),t&&a.a.createElement("p",{className:s()("channel-name__error")},Object(l.h)(t)),n&&a.a.createElement(c.Progress,{variant:c.ProgressVariant.linear}))},d=n(28),p=n.n(d),f=function(e){var t=e.children,n=e.value,i=e.isDisabled,o=e.componentDisabled,u=e.onChange,d=p()(r.a,(function(e){return e}));return a.a.createElement("div",{className:s()("mt+")},a.a.createElement(c.RadioGroup,null,d.map((function(e){return a.a.createElement(c.RadioButton,{key:e.id,checked:n===e.id,disabled:i.includes(e.id)||o,label:Object(l.h)(e.label),name:"mode",value:e.id,onChange:u})}))),t&&a.a.createElement("div",null,t))},g=n(8),m=n.n(g),v=n(21),h=n.n(v),y=n(27),E=n.n(y),b=n(269),O=function(e){var t=e.field,n=e.language,r=e.className,i=e.onChange,o=e.values;return a.a.createElement("div",{key:"".concat(t.id,"-").concat(n),className:r,"flex-container":"row"},a.a.createElement(c.IconButton,{className:"mr",emphasis:c.Emphasis.medium,icon:t.icon,label:""}),a.a.createElement("div",{"flex-item":""},a.a.createElement(b.a,{className:"mt0 ml",values:o,onChange:i})))},C=n(3),T=n.n(C),S=Object(i.forwardRef)((function(e,t){var n=e.children,r=e.descriptionLabel,i=e.isDisabled,o=e.icon,u=e.id,d=e.label,p=e.onChange,f=e.value,g=void 0!==f&&f;return a.a.createElement(c.Grid,{ref:t,wrap:!0,className:s()("pv+",T()({},"toggle-field--is-disabled",i)),gutter:"16",id:u,orientation:c.Orientation.horizontal,vAlign:c.Alignment.center},a.a.createElement(c.GridItem,{width:"1"},o&&a.a.createElement(c.Icon,{className:"pl",icon:o,size:c.Size.s})),a.a.createElement(c.GridItem,{width:"10"},a.a.createElement("p",{className:"lumx-typography-subtitle1 lumx-color-font-dark-N"},Object(l.h)(d)),r&&a.a.createElement("p",{className:"lumx-typography-caption lumx-color-font-dark-L2 pt-"},Object(l.h)(r)),n&&g&&a.a.createElement("div",{className:"toggle-field-children"},n)),a.a.createElement(c.GridItem,{width:"1"},a.a.createElement(c.Switch,{disabled:i,checked:g,onChange:function(e){p({id:u,newValue:e})}})))}));S.displayName="ToggleField";var I=function(e){var t=e.field,n=e.values,r=e.handlers,o=e.children,s=n.isMediaSecuredEnabled,u=t.descriptionLabel,d=t.icon,p=t.id,f=t.items,g=t.label,m=Object(i.useMemo)((function(){return s?Object(l.h)("ADMIN.COMMUNITY.USE_DRIVE.TOOLTIP"):void 0}),[s]),v=n[p];return a.a.createElement(c.Tooltip,{key:p,label:m},a.a.createElement(S,{descriptionLabel:u,icon:d,id:p,items:f,label:g,value:v,isDisabled:s,onChange:function(e){var t=e.id,n=e.newValue;return r.setFieldValue({fieldId:t,value:n})}},o))},_=function(e){var t=e.field,n=e.onChange,r=e.language,i=e.hasError,o=e.isValid,s=e.value,u=e.className;return a.a.createElement("div",{key:"".concat(t.id,"-").concat(r),className:u,"flex-container":"row"},a.a.createElement(c.IconButton,{className:"mr",emphasis:c.Emphasis.medium,icon:t.icon,label:""}),a.a.createElement("div",{"flex-item":""},a.a.createElement(c.TextField,{className:"mt0 ml",hasError:i,isValid:o,label:Object(l.h)(t.label),value:s,onChange:n})))},A=n(19),w=n.n(A),D=n(11),L=n(252),P=Object(D.connect)((function(e){var t;return{features:w()((null===(t=e.customer)||void 0===t?void 0:t.features)||[])}}))((function(e){var t=e.children,n=e.features,r=e.field,o=e.handlers,s=e.isInEditionMode,u=e.values,d=e.visibility,p=Object(i.useState)(!1),f=m()(p,2),g=f[0],v=f[1],h=d===L.b.OPEN||d===L.b.RESTRICTED&&u.isDriveEnabled||s,y=r.descriptionLabel,E=r.icon,b=r.id,O=r.items,C=r.label,T=u[b],I=Object(i.useMemo)((function(){return n.includes("security-at-community-level")||s&&u.isMediaSecuredEnabled}),[n,s,u.isMediaSecuredEnabled]),_=Object(i.useMemo)((function(){return s?Object(l.h)("ADMIN.COMMUNITY.SECURE_STORAGE.TOOLTIP_EDITION_MODE"):d===L.b.OPEN?Object(l.h)("ADMIN.COMMUNITY.SECURE_STORAGE.TOOLTIP_OPEN_COMMUNITY"):d===L.b.RESTRICTED&&u.isDriveEnabled&&!s?Object(l.h)("ADMIN.COMMUNITY.SECURE_STORAGE.TOOLTIP"):void 0}),[s,u.isDriveEnabled,d]),A=Object(i.useCallback)((function(e){var t=e.id,n=e.newValue;T||v(!0),o.setFieldValue({fieldId:t,value:n})}),[o,v,T]),w=Object(i.useMemo)((function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.Button,{emphasis:c.Emphasis.medium,onClick:function(){o.setFieldValue({fieldId:b,value:!1}),v(!1)}},Object(l.h)("GLOBAL.CANCEL")),a.a.createElement(c.Button,{autoFocus:!0,className:"lumx-spacing-margin-left-regular",onClick:function(){o.setFieldValue({fieldId:b,value:!0}),v(!1)}},Object(l.h)("ADMIN.COMMUNITY.SECURE_STORAGE.MODAL.BTN_ENABLE")))}),[o,v,b]);return I&&a.a.createElement(i.Fragment,{key:b},a.a.createElement(c.Tooltip,{label:_},a.a.createElement(S,{descriptionLabel:y,icon:E,id:b,items:O,label:C,value:T,isDisabled:h,onChange:A},t)),a.a.createElement(c.Dialog,{footer:a.a.createElement(c.Toolbar,{after:w}),header:a.a.createElement(c.Toolbar,{label:a.a.createElement("span",{className:"lumx-typography-title"},Object(l.h)("ADMIN.COMMUNITY.SECURE_STORAGE.MODAL.TITLE"))}),isOpen:g,zIndex:1301},a.a.createElement("div",{className:"lumx-spacing-padding-horizontal-huge"},a.a.createElement("p",null,Object(l.h)("ADMIN.COMMUNITY.SECURE_STORAGE.MODAL.DESCRIPTION")))))})),N=function(e){var t=e.children,n=e.descriptionLabel,r=e.icon,i=e.label;return a.a.createElement(c.Grid,{wrap:!0,className:"pv+",gutter:"16",orientation:c.Orientation.horizontal,vAlign:c.Alignment.center},r&&a.a.createElement(c.GridItem,{width:"1"},a.a.createElement(c.Icon,{className:"pl",icon:r,size:c.Size.s})),a.a.createElement(c.GridItem,{width:r?"10":"11"},a.a.createElement("p",{className:"lumx-typography-subtitle1 lumx-color-font-dark-N"},Object(l.h)(i)),n&&a.a.createElement("p",{className:"lumx-typography-caption lumx-color-font-dark-L2 pt-"},Object(l.h)(n)),t&&a.a.createElement("div",{className:"pv"},t)),a.a.createElement(c.GridItem,{width:"1"}))},R=function(e){var t=e.children,n=e.componentDisabled,r=e.descriptionLabel,i=e.id,o=e.label,c=e.onChange,l=e.providers,u=e.selectedProvider,d=function(e){var t=e.id;c({id:t})};return a.a.createElement(N,{key:i,descriptionLabel:r,id:i,label:o},a.a.createElement("div",{className:s()("provider-list__list",n?"provider-list__simple-disabled":"provider-list__simple-enabled")},l.map((function(e){var t=e.icon,n=e.id,r=e.label;return function(e){var t=e.icon,n=e.id,r=e.isSelected,i=e.onClick,o=e.label,c=function(){i({id:n})};return a.a.createElement("span",{key:n,className:s()("provider-list__item",{"provider-list__item--is-selected":r}),role:"menuitem",tabIndex:0,onClick:c,onKeyDown:c},a.a.createElement("img",{alt:o,src:t}),a.a.createElement("p",{className:"lumx-typography-caption lumx-color-font-dark-N"},o))}({icon:t,id:n,isSelected:n===u,label:r,onClick:d})}))),t&&a.a.createElement("div",null,t))},j=n(738),k=n.n(j),F=n(739),U=n.n(F),M=n(740),x=n.n(M),$=n(741),B=n.n($),W=[{icon:U.a,id:"slack",label:"Slack"},{icon:k.a,id:"fbworkplace",label:"Workplace"},{icon:x.a,id:"teams",label:"Teams"},{icon:B.a,id:"yammer",label:"Yammer"}],G=n(12),Y=function(e){var t=e.descriptionLabel,n=e.id,r=e.label,i=e.onAddTag,o=e.onEditTag,s=e.onTextFieldChange,u=e.tags,d=e.textFieldValue,p=function(e){return function(){o({fieldId:n,valueId:e})}};return a.a.createElement("div",{className:"translatable-tag-input"},a.a.createElement("div",{className:"translatable-tag-input__tags"},Array.isArray(u)&&u.map((function(e){var t=e.labels,n=Object(l.h)(t);return a.a.createElement(c.Chip,{key:n,before:a.a.createElement(c.Icon,{icon:G.oc}),size:c.Size.s,onBeforeClick:p(e._id),onClick:p(e._id)},Object(l.h)(n))}))),a.a.createElement("div",null,a.a.createElement(c.TextField,{label:Object(l.h)(r),placeholder:Object(l.h)(t),value:d,onChange:s,onKeyPress:function(e){var t=e.key;"Enter"===t&&d&&i()}})))},H=n(664),K=n(32),V=n(705),z=function(e){var t=e.children,n=e.componentDisabled,r=e.descriptionLabel,i=e.handleInfiniteScroll,o=e.id,s=e.label,c=e.onChange,u=e.userSpaces,d=e.selectedUserSpaceId,p=a.a.useState(!1),f=m()(p,2),g=f[0],v=f[1],y=d||"",b=function(){v(!1)},O=function(e){c(e),b()},C=u.map((function(e){return a.a.createElement(H.b,{key:e.id,isSelected:e.id===y,value:e.id,onItemSelected:function(){return O(e.id)}},a.a.createElement("div",null,e.name))})),T=a.a.createElement(H.b,{key:0,disabled:!0,isSelected:""===y,size:K.h.tiny,value:"",onItemSelected:function(){return O(void 0)}},a.a.createElement("em",null,Object(l.h)("GLOBAL.NO_RESULTS")));return a.a.createElement("div",null,a.a.createElement(V.b,{id:o,isDisabled:n,isOpen:g,label:Object(l.h)(s),placeholder:Object(l.h)(r),selectedValueRender:function(){return a.a.createElement("div",null,function(e){if(!e)return"";var t=h()(u,{id:e});return t?t.name:""}(d))},style:{width:"100%"},value:y,onDropdownClose:b,onInputClick:function(){v(!g)},onInfiniteScroll:function(){i()}},a.a.createElement(H.a,{isClickable:g},E()(u)&&T,!E()(u)&&C)),t&&a.a.createElement("div",null,t))};n.d(t,"a",(function(){return r.a})),n.d(t,"f",(function(){return r.b})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return I})),n.d(t,"g",(function(){return _})),n.d(t,"h",(function(){return P})),n.d(t,"j",(function(){return R})),n.d(t,"i",(function(){return W})),n.d(t,"k",(function(){return N})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return Y})),n.d(t,"n",(function(){return z}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(19),a=n.n(i),o=n(3),s=n.n(o),c=n(21),l=n.n(c),u=n(43),d=n(93),p={more:void 0,cursor:void 0,loading:!1,extensions:[]},f=function(e){return e.marketplace},g=function(e){var t=e.versionId,n=e.state,r=l()(n.marketplace.extensions,{version:{id:t}});if(!r)throw new Error('No extension found with version id "'.concat(t,'".'));return r},m={addAvailableExtensions:function(e,t){var n,r=t.payload,i=r.extensions,o=r.more,s=r.cursor,c=f(e);(n=c.extensions).push.apply(n,a()(i)),c.more=o,c.cursor=s},setExtensionInstalledVersion:function(e,t){var n=t.payload,r=n.installed,i=n.versionId;if(i){var a=g({state:e,versionId:i});a.installed=r}},setExtensionIsLoading:function(e,t){var n=t.payload,r=n.loading,i=void 0===r||r,a=n.versionId;if(a){var o=g({state:e,versionId:a});o.loading=i}},setIsLoadingMoreAvailableExtensions:function(e,t){var n=t.payload,r=void 0===n||n;f(e).loading=r}};n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return w}));var v=function(e){return e.extensions},h=function(e){return e.providers},y=function(e){return e.platformExtensionsSettings},E=function(e,t){return h(e)[t]},b=function(e,t){var n=E(e,t);if(!n)throw new Error("No such provider: ".concat(t));return n},O=function(e,t){return v(e)[t]},C=function(e,t){var n=O(e,t);if(!n)throw new Error("No such extension: ".concat(t));return n},T=function(e,t,n){var r=function(e,t,n){var r=C(e,t);return l()(r.components,(function(e){return e.type===n}))}(e,t,n);if(!r)throw new Error("No such component: ".concat(n," for extension : ").concat(t));return r},S=function(e,t){var n=function(e,t){var n=b(e,t);return n.providerSettingsComponent}(e,t);if(!n)throw new Error("No component for provider : ".concat(t));return n},I={extensions:{},providers:{},platformExtensionsSettings:{extensionSetup:{open:!1,extensionId:void 0},providers:{more:void 0,cursor:void 0,loading:!1,items:[]},providerSetup:{open:!1,providerId:void 0}},marketplace:p},_=Object(u.a)({domain:"marketplace",initialState:I,reducers:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({resetMarketplaceState:function(e){Object.assign(e,I)},setIsLoadingMoreProviders:function(e,t){y(e).providers.loading=t.payload},addExtensions:function(e,t){var n=t.payload,r=v(e);Object.assign(r,n)},removeExtension:function(e,t){var n=t.payload.extensionId,r=v(e),i=h(e),a=O(e,n),o=y(e).providers.items,s=a,c=s.providerId,l=E(e,c),u=l.extensions,d=u.items.indexOf(n);if(1===u.items.length&&d>-1){delete i[c];var p=o.indexOf(c);o.splice(p,1)}else void 0!==d&&d>-1&&u.items.splice(d,1);delete r[n]},addProviders:function(e,t){var n=t.payload,r=h(e);Object.assign(r,n)},addPlatformExtensionsSettingsProviders:function(e,t){var n,r=y(e),i=r.providers,o=t.payload,s=o.cursor,c=o.items,l=o.more;Object.assign(i,{cursor:s,more:l}),(n=i.items).push.apply(n,a()(c))},openProviderSetup:function(e,t){var n=y(e),r=n.providerSetup,i=t.payload.providerId;r.open=!0,r.providerId=i},closeProviderSetup:function(e){var t=y(e),n=t.providerSetup;n.open=!1,n.providerId=void 0},setProviderSettingsLoading:function(e,t){var n=t.payload,r=n.providerId,i=n.loading,a=void 0===i||i,o=S(e,r);o.areSettingsLoading=a},setProviderSettings:function(e,t){var n=t.payload,r=n.providerId,i=n.settings,a=S(e,r);a.settings=i},setIsLoadingMoreExtensions:function(e,t){var n=t.payload,r=n.loading,i=void 0===r||r,a=n.providerId,o=b(e,a);o.extensions.loading=i},addProviderExtensions:function(e,t){var n,r=t.payload,i=r.providerId,o=r.extensions,s=b(e,i),c=o.cursor,l=o.items,u=o.more;Object.assign(s.extensions,{cursor:c,more:u}),(n=s.extensions.items).push.apply(n,a()(l))},openExtensionSetup:function(e,t){var n=y(e),r=n.extensionSetup,i=t.payload.extensionId;r.open=!0,r.extensionId=i},openUninstallConfirm:function(e,t){var n=y(e),r=n.extensionSetup,i=t.payload.extensionId;r.open=!0,r.extensionId=i},closeExtensionSetup:function(e){var t=y(e),n=t.extensionSetup;n.open=!1,n.extensionId=void 0},setExtensionAdminSettingsLoading:function(e,t){var n=t.payload,r=n.extensionId,i=n.loading,a=void 0===i||i;try{var o=T(e,r,d.b.global_settings);o.areSettingsLoading=a}catch(e){}var s=T(e,r,d.b.internal_settings);s.areSettingsLoading=a},setExtensionAdminSettings:function(e,t){var n=t.payload,r=n.extensionId,i=n.settings;if(i.global){var a=T(e,r,d.b.global_settings);a.settings=i.global}if(i.internal){var o=T(e,r,d.b.internal_settings);o.settings=i.internal}},setExtensionLoading:function(e,t){var n=t.payload,r=n.extensionId,i=n.loading,a=void 0===i||i,o=C(e,r);o.loading=a},toggleExtension:function(e,t){var n=t.payload.extensionId,r=C(e,n);r.enabled=!r.enabled},setComponentLoading:function(e,t){var n=t.payload,r=n.isLoading,i=n.extensionId,a=n.componentType,o=T(e,i,a);o.isComponentLoading=r},setComponentError:function(e,t){var n=t.payload,r=n.error,i=n.extensionId,a=n.componentType,o=T(e,i,a);o.error=r},setComponent:function(e,t){var n=t.payload,r=n.extensionComponent,i=n.extensionId,a=n.componentType,o=T(e,i,a);o.component=r},setProviderComponentLoading:function(e,t){var n=t.payload,r=n.isLoading,i=n.providerId,a=S(e,i);a.isComponentLoading=r},setProviderComponentError:function(e,t){var n=t.payload,r=n.error,i=n.providerId,a=S(e,i);a.error=r},setProviderComponent:function(e,t){var n=t.payload,r=n.extensionComponent,i=n.providerId,a=S(e,i);a.component=r},"__angular__/marketplace/update":function(e,t){if(t.newState&&t.newState.betaExtensions){var n=t.newState.betaExtensions,r=v(e);Object.assign(r,n)}}},m)}),A=_.actions,w=_.reducer},function(e,t,n){"use strict";var r,i=n(236),a=n.n(i),o={},s=function(e,t){o[e]=t},c=function(e){return o[e]||null},l=function(){o={}},u=n(392);n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),function(e){e.MEMORY="memory",e.STORAGE="storage"}(r||(r={}));var d={store:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.MEMORY;switch(n){case r.STORAGE:u.b.store(e,t);break;case r.MEMORY:default:s(e,t)}},retrieve:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.MEMORY;switch(t){case r.STORAGE:return u.b.retrieve(e);case r.MEMORY:default:return c(e)}},clearAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.MEMORY;switch(e){case r.STORAGE:return u.b.clearAll();case r.MEMORY:default:return l()}}},p=function(e,t){var n=e;if(t){var r=t;r.callId&&delete r.callId,n="".concat(n,"/").concat(t?a.a.stringify(r):"")}return n}},function(e,t,n){"use strict";var r=n(140),i=n.n(r),a=function(e){return function(t){var n,r,a={};return t.element&&(a["data-id"]="".concat(e,"-").concat(t.element),t.action&&(a["data-id"]="".concat(a["data-id"],"-").concat(t.action)),a["data-id"]=a["data-id"].toLowerCase()),t.isMobile?a["data-device"]="responsive":!1===t.isMobile&&(a["data-device"]="desktop"),t.type&&(a["data-type"]=t.type),t.permissions&&(a["data-permissions"]=(n=t.permissions,r=[],i()(n).forEach((function(e){n[e]&&r.push(e)})),r.join(","))),t.position&&(a["data-position"]="".concat(t.position)),t.count&&(a["data-count"]="".concat(t.count)),a}},o=(n(569),n(0)),s=function(e){return Object(o.useMemo)((function(){return{get:a(e)}}),[e])};n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"k",(function(){return D})),n.d(t,"l",(function(){return A})),n.d(t,"c",(function(){return b})),n.d(t,"m",(function(){return T})),n.d(t,"h",(function(){return L})),n.d(t,"g",(function(){return N})),n.d(t,"n",(function(){return _})),n.d(t,"o",(function(){return P})),n.d(t,"q",(function(){return R})),n.d(t,"d",(function(){return O})),n.d(t,"j",(function(){return I})),n.d(t,"a",(function(){return C})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return S})),n.d(t,"i",(function(){return w}));var i=n(3),a=n.n(i),o=n(9),s=n(82),c=n.n(s),l=n(21),u=n.n(l),d=n(34),p=n(83),f=n(70),g=n(198);n.d(t,"b",(function(){return g.b})),n.d(t,"p",(function(){return g.a}));n(422);var m,v,h=Object(d.g)(),y=h.defaultLogo,E=h.publicPath,b=(Object(o.createSelector)(g.b,g.a,(function(e,t){var n=[t];return e.parent&&n.push(e.parent),n})),Object(o.createSelector)(g.b,g.a,(function(e,t){var n=e.entities;return n&&n[t]?n[t]:e&&e.id?e:{}}))),O=Object(o.createSelector)(b,(function(e){return e.name})),C=Object(o.createSelector)(b,(function(e){return e.publicContentAuthorized})),T=Object(o.createSelector)(g.b,(function(e){var t=e.logo;return c()(t)?t.reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,a()({},t.lang,t))}),{}):t||{}})),S=Object(o.createSelector)(b,(function(e){return e.parent})),I=Object(o.createSelector)(b,(function(e){return e.homePage})),_=Object(o.createSelector)(T,I,(function(e,t){return{fallbackHomeImageSrc:"".concat(E).concat(y),homeImageSrc:e,homePageId:t}})),A=Object(o.createSelector)(b,(function(e){return e.langs})),w=Object(o.createSelector)(b,(function(e){return e.defaultLang})),D=function(e){var t;return null===(t=e.instance)||void 0===t?void 0:t.entities},L=Object(o.createSelector)(g.b,(function(e){return e.defaultInstanceId})),P=Object(o.createSelector)(b,(function(e){return e.properties||{}})),N=(m="author",v="contentFields",Object(o.createSelector)(P,p.e,(function(e,t){var n=e[v],r=t[v];if(n&&n.length>0){var i=u()(n,(function(e){return e&&e.name===m}));return Boolean(i)&&i.enable}if(r&&r.length>0){var a=u()(r,(function(e){return e&&e.name===m}));return Boolean(a)&&a.enable}return!0})),Object(o.createSelector)(D,L,(function(e,t){if(t)return e[t]}))),R=Object(f.a)("instance-list-widget"),j=Object(o.createSelector)(b,(function(e){var t=e.name,n=e.langs,r=e.title,i=e.subtitle,a=e.slug,o=e.publicContentAuthorized,s=e.id,c=e.isDefaultInstance;return{name:t,langs:n,title:r,subtitle:i,slug:a,publicContentAuthorized:o,id:s,isDefaultInstance:c}}))},function(e,t,n){"use strict";n.r(t),n.d(t,"SearchConstant",(function(){return c})),n.d(t,"ENGINE_TYPE",(function(){return r})),n.d(t,"ICON",(function(){return i})),n.d(t,"LUMAPPS_TYPE",(function(){return a})),n.d(t,"RESULT_TYPE",(function(){return o})),n.d(t,"TAB_ALL",(function(){return s}));var r={CLOUDSEARCH:"cloudsearch",ELASTICSEARCH:"elasticsearch"},i={AUDIO:"volume-high",FILE:"file",FOLDER:"folder",GOOGLE_CALENDAR:"calendar",GOOGLE_DOCS:"file-document-box",GOOGLE_DRAWING:"drawing-box",GOOGLE_DRIVE:"google-drive",GOOGLE_FORMS:"lumapps-google-forms",GOOGLE_GROUPS:"account-multiple",GOOGLE_KEEP:"google-keep",GOOGLE_MAIL:"email",GOOGLE_SHEETS:"lumapps-google-sheets",GOOGLE_SITES:"lumapps-google-sites",GOOGLE_SLIDES:"file-presentation-box",IMAGE:"image",LUMAPPS:"lumapps",MICROSOFT_EXCEL:"file-excel-box",MICROSOFT_POWERPOINT:"file-powerpoint-box",MICROSOFT_WORD:"file-word-box",PDF:"file-pdf-box",VIDEO:"movie"},a={ARTICLE:"article",COMMUNITY:"community",DIRECTORY_ENTRY:"directoryEntry",MEDIA:"media",POST:"post",USER:"user"},o={GOOGLE:"google",LUMAPPS:"lumapps",THIRD_PARTY:"third-party"},s={uid:"all"},c={ENGINE_TYPE:r,ICON:i,LUMAPPS_TYPE:a,RESULT_TYPE:o,TAB_ALL:s};angular.module("Constants").constant("SearchConstant",c)},function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return E})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return C})),n.d(t,"q",(function(){return O}));var r=n(9),i=n(155),a=n.n(i),o=function(e){return e.customer},s=Object(r.createSelector)([o],(function(e){return e.id})),c=function(e){return e.marketplace},l=Object(r.createSelector)([c],(function(e){return e.extensions})),u=function(e,t){var n=t.extensionId;return l(e)[n]},d=Object(r.createSelector)([l],(function(e){var t=[];return a()(e,(function(e){e.enabled&&t.push(e)})),t})),p=Object(r.createSelector)([c],(function(e){return e.providers})),f=function(e,t){var n=t.providerId;return p(e)[n]},g=Object(r.createSelector)([function(e,t){var n=t.providerId,r=f(e,{providerId:n});if(r)return r.extensions}],(function(e){return null==e?void 0:e.cursor})),m=Object(r.createSelector)([c],(function(e){return e.platformExtensionsSettings})),v=Object(r.createSelector)([m],(function(e){return e.extensionSetup})),h=Object(r.createSelector)([m],(function(e){return e.providerSetup})),y=Object(r.createSelector)([m],(function(e){return e.providers.more})),E=Object(r.createSelector)([m],(function(e){return e.providers.loading})),b=Object(r.createSelector)([m],(function(e){return e.providers.cursor})),O=Object(r.createSelector)([m],(function(e){return e.providerSetup.open})),C=Object(r.createSelector)([v],(function(e){return e.open})),T=Object(r.createSelector)([m],(function(e){return e.providers.items})),S=function(e,t){var n=t.componentType,r=t.extensionId,i=u(e,{extensionId:r});if(i)return i.components.find((function(e){return e.type===n}))},I=function(e,t){var n=t.providerId,r=f(e,{providerId:n});if(r)return r.providerSettingsComponent}},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return o.apply(this,arguments)}function o(){return o=b()(p.a.mark((function e(t){var n,r,o,s,c,l,u,d,f=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=f.length>2&&void 0!==f[2]?f[2]:j,e.next=4,C()(t(i({},n,{maxResults:r,more:!0})));case 4:if(o=e.sent,s=o.data,c=s.items,l=s.more,u=s.cursor,!c||L()(c)){e.next=8;break}return e.delegateYield(_()(S()(c),C.a),"t0",8);case 8:if(!l||!u){e.next=11;break}return d=a(t,i({},n,{cursor:u}),r),e.delegateYield(_()(S()(d),C.a),"t1",11);case 11:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return c=u()(p.a.mark((function e(t){var n,r,i,o,s,c,l,u,d,f,g=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.length>1&&void 0!==g[1]?g[1]:{},r=g.length>2&&void 0!==g[2]?g[2]:j,i=[],o=!0,s=!1,e.prev=5,l=S()(a(t,n,r));case 7:return e.next=9,l.next();case 9:return u=e.sent,o=u.done,e.next=13,u.value;case 13:if(d=e.sent,o){e.next=20;break}f=d,i.push(f);case 17:o=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),s=!0,c=e.t0;case 26:if(e.prev=26,e.prev=27,o||null==l.return){e.next=31;break}return e.next=31,l.return();case 31:if(e.prev=31,!s){e.next=34;break}throw c;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.abrupt("return",i);case 37:case"end":return e.stop()}}),e,null,[[5,22,26,36],[27,,31,35]])}))),c.apply(this,arguments)}n.d(t,"b",(function(){return s}));var l=n(10),u=n.n(l),d=n(6),p=n.n(d),f=n(3),g=n.n(f),m=n(22),v=n.n(m),h=n(20),y=n.n(h),E=n(547),b=n.n(E),O=n(319),C=n.n(O),T=n(320),S=n.n(T),I=n(412),_=n.n(I),A=n(143),w=n.n(A),D=n(27),L=n.n(D),P=n(178),N=function(){return{headers:{Authorization:"Bearer ".concat(window.CONNECTED_USER.token),"Lumapps-Organization-Id":window.CUSTOMER_ID}}},R=function(){function e(t){var n=this,r=t.path,i=t.apiVersion,a=void 0===i?"v1":i,o=t.baseURL,s=void 0===o?"".concat(P.ConfigConstant.APPLICATION_HOST,"/_ah/api/lumsites/").concat(a,"/").concat(r):o;v()(this,e),this.api=w.a.create({baseURL:s}),this.api.interceptors.response.use((function(e){return e}),(function(t){var r=t.response,i=t.config;return 401!==r.status||i._retry?Promise.reject(t):e.refreshToken().then((function(){var e=N(),t=e.headers;return i._retry=!0,i.headers=t,n.api(i)})).catch((function(){return Promise.reject(t)}))}))}return y()(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.api.get(e,i({},N(),{},t))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.api.delete(e,i({},N(),{},t))}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.api.patch(e,t,i({},N(),{},n))}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.api.options(e,i({},N(),{},t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.api.post(e,t,i({},N(),{},n))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.api.put(e,t,i({},N(),{},n))}}],[{key:"refreshToken",value:function(){return w.a.post("".concat(P.ConfigConstant.APPLICATION_HOST,"/service/user/token"),{customerId:window.CUSTOMER_ID}).then((function(e){return 200===e.status&&e.data.status&&(window.CONNECTED_USER.token=e.data.token),e}))}}]),e}(),j=30;t.a=R},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return _})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return I})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return r})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return l})),n.d(t,"q",(function(){return u})),n.d(t,"r",(function(){return d})),n.d(t,"s",(function(){return A})),n.d(t,"t",(function(){return o})),n.d(t,"u",(function(){return c})),n.d(t,"v",(function(){return s})),n.d(t,"w",(function(){return w}));var r="DEFAULT",i=[{label:"STYLE.BACKGROUND.FILL",value:"cover"},{label:"STYLE.BACKGROUND.FIT",value:"contain"},{label:"STYLE.BACKGROUND.AUTO",value:"auto"}],a=[["top","left"],["top","center"],["top","right"],["center","left"],["center","center"],["center","right"],["bottom","left"],["bottom","center"],["bottom","right"]],o=[{label:"N (".concat(0,"px)"),value:0},{label:"XXS (".concat(8,"px)"),value:8},{label:"XS (".concat(12,"px)"),value:12},{label:"S (".concat(16,"px)"),value:16},{label:"M (".concat(24,"px)"),value:24},{label:"L (".concat(32,"px)"),value:32},{label:"XL (".concat(48,"px)"),value:48},{label:"XXL (".concat(96,"px)"),value:96}],s=[].concat(o,[{label:"-XXS (-".concat(8,"px)"),value:-8},{label:"-XS (-".concat(12,"px)"),value:-12},{label:"-S (-".concat(16,"px)"),value:-16},{label:"-M (-".concat(24,"px)"),value:-24},{label:"-L (-".concat(32,"px)"),value:-32},{label:"-XL (-".concat(48,"px)"),value:-48},{label:"-XXL (-".concat(96,"px)"),value:-96}]),c=[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],l=[{label:"STYLE.FONT.LIGHT",value:300},{label:"STYLE.FONT.REGULAR",value:400},{label:"STYLE.FONT.MEDIUM",value:500},{label:"STYLE.FONT.BOLD",value:700}],u=[{label:"STYLE.TOP",name:"marginTop"},{label:"STYLE.LEFT",name:"marginLeft"},{label:"STYLE.BOTTOM",name:"marginBottom"},{label:"STYLE.RIGHT",name:"marginRight"}],d=[{label:"STYLE.TOP",name:"paddingTop"},{label:"STYLE.LEFT",name:"paddingLeft"},{label:"STYLE.BOTTOM",name:"paddingBottom"},{label:"STYLE.RIGHT",name:"paddingRight"}],p=[{label:"STYLE.TOP",name:"borderTopWidth"},{label:"STYLE.LEFT",name:"borderLeftWidth"},{label:"STYLE.BOTTOM",name:"borderBottomWidth"},{label:"STYLE.RIGHT",name:"borderRightWidth"}],f=[{label:"STYLE.TOP_LEFT",name:"borderTopLeftRadius"},{label:"STYLE.BOTTOM_LEFT",name:"borderBottomLeftRadius"},{label:"STYLE.TOP_RIGHT",name:"borderTopRightRadius"},{label:"STYLE.BOTTOM_RIGHT",name:"borderBottomRightRadius"}],g=[{label:"STYLE.TOP",name:"borderTopColor"},{label:"STYLE.LEFT",name:"borderLeftColor"},{label:"STYLE.BOTTOM",name:"borderBottomColor"},{label:"STYLE.RIGHT",name:"borderRightColor"}],m="#E0E0E0",v="#000000",h="#212121",y={content:{backgroundColor:"transparent",backgroundPosition:"center center",backgroundSize:"auto",borderBottomColor:m,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottomWidth:0,borderLeftColor:m,borderLeftWidth:0,borderRightColor:m,borderRightWidth:0,borderTopColor:m,borderTopLeftRadius:0,borderTopRightRadius:0,borderTopWidth:0,marginBottom:0,marginLeft:0,marginRight:0,marginTop:0,paddingBottom:r,paddingLeft:r,paddingRight:r,paddingTop:r,shadowElevation:0,shadowOpacity:14},footer:{icon:{color:h,fontSize:18},label:{color:h,fontFamily:"Roboto, sans-serif",fontSize:14,fontWeight:500},main:{backgroundColor:"transparent",backgroundPosition:"center center",backgroundSize:"auto",display:"block",justifyContent:"flex-end",shadowElevation:0,shadowOpacity:14},wrapper:{alignItems:"center",backgroundColor:"transparent",backgroundPosition:"center center",backgroundSize:"auto",borderBottomColor:m,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottomWidth:0,borderLeftColor:m,borderLeftWidth:0,borderRightColor:m,borderRightWidth:0,borderTopColor:m,borderTopLeftRadius:0,borderTopRightRadius:0,borderTopWidth:1,flexDirection:"row",justifyContent:"flex-end",marginBottom:0,marginLeft:24,marginRight:24,marginTop:0,paddingBottom:12,paddingLeft:0,paddingRight:0,paddingTop:12,shadowElevation:0,shadowOpacity:14}},header:{icon:{color:h,fontSize:18},label:{color:h,fontFamily:"Roboto, sans-serif",fontSize:16,fontWeight:500},main:{backgroundColor:"transparent",backgroundPosition:"center center",backgroundSize:"auto",display:"block",justifyContent:"flex-start",shadowElevation:0,shadowOpacity:14},wrapper:{alignItems:"center",backgroundColor:"transparent",backgroundPosition:"center center",backgroundSize:"auto",borderBottomColor:m,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottomWidth:1,borderLeftColor:m,borderLeftWidth:0,borderRightColor:m,borderRightWidth:0,borderTopColor:m,borderTopLeftRadius:0,borderTopRightRadius:0,borderTopWidth:0,flexDirection:"row",justifyContent:"flex-start",marginBottom:0,marginLeft:24,marginRight:24,marginTop:0,paddingBottom:12,paddingLeft:0,paddingRight:0,paddingTop:12,shadowElevation:0,shadowOpacity:14}},main:{backgroundColor:"#FFFFFF",backgroundPlainColor:"transparent",backgroundPosition:"center center",backgroundSize:"cover",borderBottomColor:m,borderBottomLeftRadius:2,borderBottomRightRadius:2,borderBottomWidth:0,borderLeftColor:m,borderLeftWidth:0,borderRightColor:m,borderRightWidth:0,borderTopColor:m,borderTopLeftRadius:2,borderTopRightRadius:2,borderTopWidth:0,marginBottom:12,marginLeft:0,marginRight:0,marginTop:12,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,shadowElevation:1,shadowOpacity:14}},E={backgroundColor:"transparent",backgroundPosition:"center center",backgroundSize:"cover",borderBottomColor:v,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottomWidth:0,borderLeftColor:v,borderLeftWidth:0,borderRightColor:v,borderRightWidth:0,borderTopColor:v,borderTopLeftRadius:0,borderTopRightRadius:0,borderTopWidth:0,marginBottom:0,marginLeft:0,marginRight:0,marginTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0},b={components:{backgroundColor:"transparent",backgroundPlainColor:"#FFFFFF",backgroundPosition:"center center",backgroundSize:"cover",borderBottomColor:v,borderBottomLeftRadius:2,borderBottomRightRadius:2,borderBottomWidth:0,borderLeftColor:v,borderLeftWidth:0,borderRightColor:v,borderRightWidth:0,borderTopColor:v,borderTopLeftRadius:2,borderTopRightRadius:2,borderTopWidth:0,marginBottom:0,marginLeft:0,marginRight:0,marginTop:0,paddingBottom:0,paddingLeft:12,paddingRight:12,paddingTop:0,shadowElevation:0,shadowOpacity:14}},O={paddingLeft:12,paddingRight:12},C={paddingLeft:0,paddingRight:0},T={components:{backgroundColor:"#FFFFFF",marginBottom:12,marginLeft:12,marginRight:12,marginTop:12,paddingBottom:24,paddingLeft:48,paddingRight:48,paddingTop:24,shadowElevation:1}},S={components:{backgroundColor:"transparent",marginBottom:0,marginLeft:0,marginRight:0,marginTop:0,paddingBottom:0,paddingLeft:12,paddingRight:12,paddingTop:0,shadowElevation:0}},I={footer:{wrapper:{borderBottomWidth:1,marginLeft:0,marginRight:0}},header:{wrapper:{borderTopWidth:1,marginLeft:0,marginRight:0}},main:{shadowElevation:0}},_={footer:{wrapper:{borderBottomWidth:0,marginLeft:24,marginRight:24}},header:{wrapper:{borderTopWidth:0,marginLeft:24,marginRight:24}},main:{shadowElevation:1}},A=["padding","paddingBottom","paddingLeft","paddingRight","paddingTop"],w={CUSTOMER:"globalCustomer",INSTANCE:"global",PARENT:"parent",WIDGET:"widget"}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"p",(function(){return O})),n.d(t,"n",(function(){return C})),n.d(t,"m",(function(){return S})),n.d(t,"a",(function(){return I})),n.d(t,"f",(function(){return A})),n.d(t,"e",(function(){return N})),n.d(t,"d",(function(){return R})),n.d(t,"g",(function(){return j})),n.d(t,"s",(function(){return k})),n.d(t,"o",(function(){return F})),n.d(t,"i",(function(){return M})),n.d(t,"k",(function(){return x})),n.d(t,"h",(function(){return $})),n.d(t,"q",(function(){return B})),n.d(t,"r",(function(){return W})),n.d(t,"l",(function(){return G})),n.d(t,"j",(function(){return Y})),n.d(t,"c",(function(){return H}));var r=n(3),i=n.n(r),a=n(9),o=n(21),s=n.n(o),c=n(453),l=n(12),u=n(70),d=n(34),p=n(74),f=n(54),g=n(69),m=n(206),v=n(208),h=n(154),y=Object(d.g)(),E=function(e){return e.user||{}},b=Object(a.createSelector)(E,(function(e){return(null==e?void 0:e.connectedUser)||{}})),O=Object(a.createSelector)(b,(function(e){return null==e?void 0:e.id})),C=Object(a.createSelector)(b,(function(e){return Boolean(null==e?void 0:e.isGod)})),T=Object(a.createSelector)(b,(function(e){return Boolean(null==e?void 0:e.isGuest)})),S=Object(a.createSelector)(O,T,(function(e,t){return Boolean(e)&&!t})),I=(Object(a.createSelector)(b,(function(e){return null==e?void 0:e.email})),Object(a.createSelector)(b,(function(e){return null==e?void 0:e.accountType}))),_=Object(a.createSelector)(b,(function(e){return null==e?void 0:e.apiProfile})),A=Object(a.createSelector)(b,(function(e){return e?e.subscriptions:[]})),w=Object(a.createSelector)(_,(function(e){return null==e?void 0:e.thumbnailPhotoUrl})),D=Object(a.createSelector)(_,(function(e){return null==e?void 0:e.thumbnail})),L=Object(a.createSelector)([b,_],(function(e,t){return(null==e?void 0:e.profilePicture)?e.profilePictureUrl:null==t?void 0:t.profilePictureUrl})),P=Object(a.createSelector)([b,_],(function(e,t){return(null==e?void 0:e.profilePicture)?e.profilePicture:null==t?void 0:t.profilePicture})),N=(Object(a.createSelector)(C,(function(e){return i()({},v.c.ROOT,e)})),Object(a.createSelector)([w,D,L,P],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(r)return r.indexOf("https://")>-1?r:"/serve/".concat(r);if(e.indexOf("/public/")>=0)return e;if(t&&t.mimeType&&t.photoData){var i=t.photoData.replace(/_/g,"/").replace(/-/g,"+");return"data:".concat(t.mimeType,";base64,").concat(i)}return n||v.a}))),R=Object(a.createSelector)(b,(function(e){return Object(h.a)(e,y.userLang)})),j=Object(a.createSelector)(b,(function(e){return null==e?void 0:e.token})),k=Object(a.createSelector)(E,(function(e){return e.mention.ids.map((function(t){return e.entities[t]}))})),F=Object(a.createSelector)(E,(function(e){return e.mention})),U=(Object(a.createSelector)(_,(function(e){return e?s()(e.organizations,(function(e){return e.primary})):null})),Object(a.createSelector)(b,(function(e){return null==e?void 0:e.settings}))),M=Object(a.createSelector)(U,(function(e){return(null==e?void 0:e.hasAcceptedCookies)||!1})),x=Object(u.a)("social"),$=Object(a.createSelector)(x,(function(){return[{key:"settings",label:"SETTINGS",icon:l.Dc,url:Object(p.e)(Object(m.f)({query:{settings:!0}})),type:g.a.LINK,onClick:function(e){y.isLegacyContext&&(e.preventDefault(),e.stopPropagation(),Object(c.a)(v.b))}},{key:"logout",label:"USER_SETTINGS_LOGOUT",icon:l.uc,url:Object(p.d)(Object(m.e)()),target:"_self",type:g.a.LINK}]})),B=Object(a.createSelector)(E,(function(e){var t,n;return(null===(t=e.userList)||void 0===t||null===(n=t.ids)||void 0===n?void 0:n.map((function(t){return e.entities[t]})))||[]})),W=Object(a.createSelector)(E,(function(e){return e.userList||{}})),G=f.e,Y=Object(a.createSelector)(b,(function(e){var t;return null==e||null===(t=e.settings)||void 0===t?void 0:t.hasAcceptedTerms})),H=Object(a.createSelector)(b,f.e,(function(e,t){if(e){var n=e.lastName,r=e.firstName,i=e.langs,a=e.fullName,o=e.email,s=e.lang,c=e.id;return{firstName:r,lastName:n,langs:i,fullName:a,email:o,lang:s,id:c,isAdmin:t}}return{}}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return E})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return g}));var a=n(3),o=n.n(a),s=n(2),c="ROOT/LOADING_STATE",l="".concat(c,"/SET_LOADING_STATE"),u="".concat(c,"/SET_FAILURE_STATE"),d="".concat(c,"/CLEAR_LOADING_STATE"),p="".concat(c,"/CLEAR_ALL_LOADING_STATES"),f={},g=Object(s.shape)({blocking:s.bool,failure:s.bool,loading:s.bool}),m=function(e){return{blocking:e,failure:!1,loading:!0}},v=function(e){return{blocking:e,failure:!0,loading:!1}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return i({},e,o()({},t.component,m(t.isBlocking)));case u:return i({},e,o()({},t.component,v(t.isBlocking)));case d:return i({},e,o()({},t.component,null));case p:return f;default:return e}},y=function(e,t){return{component:e,isBlocking:t,type:l}},E=function(e){return{component:e,type:d}}},function(e,t,n){"use strict";var r,i;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),function(e){e.EXTERNAL="external",e.GOOGLE="google",e.MICROSOFT="microsoft",e.OKTA="okta"}(r||(r={})),function(e){e.LINK="LINK",e.HEADER="HEADER",e.DIVIDER="DIVIDER"}(i||(i={}))},function(e,t,n){"use strict";var r=n(17),i=n.n(r),a=n(83),o=n(9),s=function(e){return Object(o.createSelector)(a.c,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(t.enabledFeatures,e)}))};n.d(t,"a",(function(){return s}))},,function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return v}));var r=n(9),i=n(157),a=n.n(i),o=n(67),s=n(83),c=n(60),l=n(293),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[];return r=t?Object(s.d)(e):Object(c.l)(e)||[],n.length>0?a()(r,n):r},d=function(e){return(null==e?void 0:e.locale)||{}},p=Object(r.createSelector)(d,(function(e){return e.current||l.a})),f=Object(r.createSelector)(d,(function(e){return e.inputLanguage||l.a})),g=Object(r.createSelector)(d,(function(e){return e.fallback||l.a})),m=Object(r.createSelector)(c.o,o.m,(function(e,t){return!t||!!e&&e.displayLanguageSelector})),v=Object(r.createSelector)(p,g,(function(e,t){return"".concat(e,";q=0.9,").concat(t,";q=0.8,").concat(l.a,";q=0.7,*;q=0.6")}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(2),i=(Object(r.oneOf)(["grid"]),r.string),a=Object(r.arrayOf)(i),o=(r.node,Object(r.oneOf)(["xs","s","m","l","xl"])),s=Object(r.oneOf)(["light","dark"]),c=Object(r.oneOf)(["left","right"])},function(e,t,n){"use strict";var r=n(8),i=n.n(r),a=n(801),o=n(136),s=n(34),c=n(377),l=n(501);n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"k",(function(){return E})),n.d(t,"c",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"m",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"g",(function(){return T})),n.d(t,"b",(function(){return S})),n.d(t,"i",(function(){return I})),n.d(t,"h",(function(){return _})),n.d(t,"j",(function(){return o.b}));var u=Object(s.g)(),d=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.split("/"),r="",i=-1===e.indexOf("/a/");return i?t&&(r="/".concat(n[1]||"")):(r="/a",n[2]&&(r="".concat(r,"/").concat(n[2]),n[3]&&t&&(r="".concat(r,"/").concat(n[3])))),r},p=function(e,t){var n,r=t.split("?")[0],a=[],o=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==o){a=o.split("&");for(var s=a.length-1;s>=0;s-=1){var c=a[s].split("="),l=i()(c,1);n=l[0],n===e&&a.splice(s,1)}r="".concat(r,"?").concat(a.join("&"))}return r},f=function(e,t){var n=e,r=n.indexOf("?")<0;return Object.keys(t).forEach((function(e){var i=t[e];r?(n="".concat(n,"?").concat(e,"=").concat(encodeURIComponent(i)),r=!1):n="".concat(n,"&").concat(e,"=").concat(encodeURIComponent(i))})),n.replace("/?","?")},g=function(e){var t=e.params,n=e.path,r=e.ignoreParamEncoding,i=n;if(t){if(Object.keys(t).forEach((function(e){var n=t[e];i=i.replace(":".concat(e),r?n:encodeURIComponent(n))})),i.indexOf(":")>=0||i.indexOf("?")>=0){var a=/(:?)[a-zA-Z]+(\?|\*)/gm.exec(i);a&&(a.forEach((function(e){e.indexOf(":")>=0?i=i.replace(e,""):e.indexOf("?")>=0&&(i=i.replace("?",""))})),i=i.replace("?",""))}i.indexOf("//")>=0&&(i=i.replace(/\/\//g,"/"))}return i},m=function(e){var t=e.query,n=e.params,r=e.anchor,i=e.path,o=e.ignoreParamEncoding,s=i;if(o)s=g(e);else try{s=Object(a.a)(i,n)}catch(t){console.error(t),s=g(e)}return t&&(s=f(s,t)),r&&(s="".concat(s,"#").concat(r)),s},v=function(e,t,n){var r=n||e.instanceSlug,i=Boolean(r),a=e.isExternal?"":d(window.location.pathname,!i),o=!e.isExternal&&i?"/".concat(r):"";return"".concat(a).concat(o).concat(t||m(e))},h=function(e){var t=0===e.indexOf("/")?e.slice(1,e.length):e;return t},y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&""!==e){var n=window.location.pathname,r=d(n,t),i=0===e.indexOf("/")?"":"/";return"".concat("/"!==r?r:"").concat(i).concat(e)}return e},E=function(e){return e?Object(o.b)(e)?e||"":y(e):null},b=function(e){var t=d(e);return e.replace(t,"")},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&""!==e){var r=t||window.location.pathname,i=-1===r.indexOf("/a/"),a=e.indexOf("/a/")>-1,o=0===e.indexOf("http://")||0===e.indexOf("https://");if(!i&&!a&&!o){var s=d(r,n);return 0===e.indexOf("/")?"".concat(s).concat(e):"".concat(s,"/").concat(e)}}return e},C=function(e){if(Object(c.a)()||Object(l.a)())return e;try{var t=new URL(e);return"".concat(t.pathname).concat(t.search)}catch(t){return e}},T=function(e,t,n){var r,i=v(e,t,n);return e.isMigrated&&u.isLegacyContext?r="_self":e.isExternal&&(r="_blank"),{href:i,target:r}},S=function(e){return window.location.origin+e},I=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="".concat(window.location.pathname).concat(window.location.search);if(Object(o.b)(e)){var r=C(e);return r===n}var i=O(e,void 0,t);return n===i},_=function(e){return e.indexOf("/admin/")>=0}},,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s,c,l=n(3),u=n.n(l),d=n(8),p=n.n(d),f=n(1),g=n(21),m=n.n(g),v=n(27),h=n.n(v),y=n(12),E=n(430),b=n.n(E);!function(e){e.IMAGE="image",e.DOCUMENT="document"}(s||(s={})),function(e){e.GOOGLE_DRIVE="drive",e.LUMDRIVE="local",e.MICROSOFT="onedrive",e.COMMUNITY="community",e.HAUSSMANN_MEDIA="haussmann_media"}(c||(c={}));var O=/^(https?:)?\/\/(www\.)?/,C={dailymotion:["dailymotion.com/video/","dai.ly/","dailymotion.com/embed/video/"],vimeo:["vimeo.com/","player.vimeo.com/video/"],youtube:["youtube.com/watch?v=","youtu.be/","youtube.com/embed/","youtube.googleapis.com/v/"]},T=function(e,t){if(e&&t){var n=e.replace(O,""),r=n.split("&"),i=p()(r,1);n=i[0];var a=m()(C[t],(function(e){return 0===n.indexOf(e)}));return a&&n.substr(a.length||0)||void 0}},S=function(e){if(e)return Object.keys(C).find((function(t){return C[t].find((function(t){return e.indexOf(t)>-1}))}))},I=function(e){if(e){var t=e.replace(O,""),n=S(t),r=n?T(t,n):void 0;if(r)switch(n){case"dailymotion":return function(e){if(e)return"//www.dailymotion.com/embed/video/".concat(e)}(r);case"vimeo":return function(e){if(e)return"https://player.vimeo.com/video/".concat(e)}(r);case"youtube":return function(e){if(e)return"https://www.youtube.com/embed/".concat(e)}(r);default:return}}},_=function(e,t,n){if(!e||h()(e))return{};var r,a={},o=n;e.hasCroppedContent&&(a=null===(r=e.croppedContent)||void 0===r?void 0:r.find((function(e){return e.lang===o})));if(!a||h()(a)){var s=(e.content||[]).reduce((function(e,t){return i({},e,u()({},t.lang,t))}),{});a=t(s)}return e.override&&(e.override.description&&(a.description=t(e.override.description)),e.override.name&&(a.name=t(e.override.name))),i({},a,{source:e.source||e.from})},A=function(e){return e.servingUrl||e.url},w=b()(_,A),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return"";var r="https://thumbnails.stag.lumapps.com/unsafe/".concat(t,"x").concat(n,"/"),i=window.encodeURIComponent(e);return"".concat(r).concat(i)},L=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return"";var r=e;/\/$/g.test(r)&&(r=r.slice(0,-1));var i=/(=s[0-9]+)$/,a=i.test(r);return a&&n?r=r.replace(i,"=s".concat(t)):a||(r="".concat(r,"=s").concat(t)),r},P=function(e){return/(=s[0-9]+)$/.test(e)},N={doc:{icon:y.kb,color:f.ColorPalette.red},word:{icon:y.sb,color:f.ColorPalette.blue},powerpoint:{icon:y.qb,color:f.ColorPalette.blue},excel:{icon:y.mb,color:f.ColorPalette.green},pdf:{icon:y.mc,color:f.ColorPalette.red},video:{icon:y.pc,color:f.ColorPalette.dark,colorVariant:f.ColorVariant.L4},file:{icon:y.hb,color:f.ColorPalette.dark,colorVariant:f.ColorVariant.L4},photo:{icon:y.Kb,color:f.ColorPalette.blue,colorVariant:f.ColorVariant.L2},slide:{icon:y.rb,color:f.ColorPalette.yellow},audio:{icon:y.Vc,color:f.ColorPalette.red},sheet:{icon:y.Db,color:f.ColorPalette.green},drawing:{icon:y.X,color:f.ColorPalette.red},archive:{icon:y.Yc,color:f.ColorPalette.dark,colorVariant:f.ColorVariant.L3}},R=function(e){var t;switch(null==e||null===(t=e.mimeType)||void 0===t?void 0:t.toLowerCase()){case"application/pdf":return N.pdf;case"application/vnd.google-apps.audio":case"audio/mpeg":return N.audio;case"application/vnd.google-apps.document":return N.doc;case"application/vnd.google-apps.drawing":return N.drawing;case"application/vnd.google-apps.file":return N.file;case"application/vnd.google-apps.photo":case"image/jpg":case"image/jpeg":case"image/gif":case"image/png":return N.photo;case"application/vnd.google-apps.presentation":return N.slide;case"application/vnd.google-apps.spreadsheet":return N.sheet;case"application/vnd.google-apps.video":case"video/avi":case"video/mov":case"video/mp4":case"video/mpeg":case"video/quicktime":return N.video;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":case"application/vnd.ms-word.document.macroenabled.12":case"application/vnd.ms-word.template.macroenabled.12":return N.word;case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":case"application/vnd.ms-excel.sheet.macroenabled.12":case"application/vnd.ms-excel.template.macroenabled.12":case"application/vnd.ms-excel.addin.macroenabled.12":case"application/vnd.ms-excel.sheet.binary.macroenabled.12":return N.excel;case"application/vnd.ms-powerpoint":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.openxmlformats-officedocument.presentationml.template":case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":case"application/vnd.ms-powerpoint.addin.macroenabled.12":case"application/vnd.ms-powerpoint.presentation.macroenabled.12":case"application/vnd.ms-powerpoint.template.macroenabled.12":case"application/vnd.ms-powerpoint.slideshow.macroenabled.12":return N.powerpoint;case"application/x-rar":case"application/zip":return N.archive;default:return N.file}},j=n(18),k=n.n(j),F=n(6),U=n.n(F),M=n(10),x=n.n(M),$=n(45),B=n(143),W=n.n(B),G=function(){var e=x()(U.a.mark((function e(){var t,n=arguments;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1e3,e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=x()(U.a.mark((function e(t,n,r){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t().catch((function(e){if(1===n)throw e;return G(r).then((function(){return Y((function(){return t()}),n-1,r)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),H=new $.c({path:"document"}),K=function(e){return H.post("get",e)},V=function(e){var t=e.file,n=e.cancelSource,r=k()(e,["file","cancelSource"]);return H.post("uploadUrl/get",r,{cancelToken:null==n?void 0:n.token}).then((function(e){var r=new FormData;return r.append("file",t),W.a.post(e.data.uploadUrl,r,{headers:{"Content-Type":"multipart/form-data"},cancelToken:null==n?void 0:n.token})}))},z=function(e){var t,n=e.community,r=e.file,i=e.cancelSource,a=k()(e,["community","file","cancelSource"]);return H.post("uploadUrl/get",a,{cancelToken:null==i?void 0:i.token}).then((function(e){return t=e.data,function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsArrayBuffer(e)}))}(r)})).then((function(e){return W()({headers:o({"Content-Type":r.type},t.headers),method:t.httpMethod||"POST",url:t.uploadUrl,data:e})})).then((function(){return Y((function(){return K({docPath:"provider=haussmann_media/drive=".concat(n.uid,"/resource=").concat(t.mediaId)})}),10,1e3)}))};n.d(t,"c",(function(){return I})),n.d(t,"f",(function(){return _})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return w})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return P})),n.d(t,"m",(function(){return L})),n.d(t,"l",(function(){return D})),n.d(t,"h",(function(){return R})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return K})),n.d(t,"n",(function(){return V})),n.d(t,"o",(function(){return z}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),i={query:"",results:[],filter:r.a,filters:[],selectedFilter:null,facets:[],selectedFacet:null,prevFacet:null,sorts:[],selectedSort:null,sort:null,order:r.o.DECREASING,status:r.p.BROWSING,metadata:{},suggestions:[],suggestionsStatus:r.p.BROWSING,hasMoreResults:!1,cursor:null,suggestedQuery:null}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=n(3017),o=(n(700),n(3)),s=n.n(o),c=n(0),l=n.n(c),u=n(11),d=n(315),p=n(9),f=function(e){return e.router||{}},g=Object(p.createSelector)(f,(function(e){return e.status})),m=(Object(p.createSelector)(g,(function(e){return e===d.a.loading})),Object(p.createSelector)(f,(function(e){return e.blockedRedirection}))),v=Object(p.createSelector)(m,(function(e){return null==e?void 0:e.blockingRoute})),h=Object(p.createSelector)(v,(function(e){return e===window.location.href})),y=n(416),E=Object(c.createContext)({currentView:"",params:{},isBackOffice:!1}),b=n(74),O=function(e,t){var n=Object(b.d)(e);if(window.ALERT_RATHER_THAN_REDIRECT)alert("redirect to ".concat(n));else if(e.isMigrated&&!e.instanceSlug)t.push(n);else{var r=Object(b.e)(e,n,e.instanceSlug);window.location.href=r}},C=function(){var e=Object(a.b)(),t=Object(c.useContext)(E),n=Object(u.useSelector)(h),r=Object(u.useDispatch)(),o=Object(c.useMemo)((function(){return window.USE_REACT_ROUTER?function(t){n?r(d.b.setBlockedRedirection({route:t,history:e})):O(t,e)}:y.a.redirect}),[r,e,n]),s=window.location.pathname;return{getUrl:b.e,redirect:o,usesReactRouter:window.USE_REACT_ROUTER,context:i({},t,{isBackOffice:Object(b.h)(s)})}},T=n(8),S=n.n(T),I=function(e){var t=e||{},n=t.filter,r="",i=Object(a.c)(),o=i.search;r=o&&""!==o?o:window.location.search;var s=Object(c.useMemo)((function(){var e={};if(r){var t=r.replace("?","").split("&");t.forEach((function(t){var r=t.split("=");if(2===r.length){var i=S()(r,2),a=i[0],o=i[1];(!n||n&&n(a,o))&&(e[a]=decodeURIComponent(o))}else if(1===r.length){var s=r[0];(!n||n&&n(s,"true"))&&(e[s]="true")}}))}return e}),[r,n]);return s},_=n(85),A=n.n(_),w=n(125),D=n.n(w),L=function(e){var t=Object(a.e)(e?e.path:""),n=Object(c.useContext)(E);if(null==e?void 0:e.isExternal)return!1;if(n&&n.currentView){var r=n.currentView,i=n.params,o=r===(null==e?void 0:e.legacyId);if(o&&(null==e?void 0:e.params)){var s=D()(i,Object.keys(e.params)),l=A()(s,D()(e.params,Object.keys(s)));return l}return o}var u=Boolean(null==t?void 0:t.isExact);if(null==e?void 0:e.params){var d=D()(null==t?void 0:t.params,Object.keys(e.params)),p=Object.keys(d);if(p.length>0){var f=A()(d,D()(e.params,p));return f&&u}return!1}return u},P=n(243),N=n(140),R=n.n(N),j=function(){var e=Object(a.d)(),t={};return R()(e).forEach((function(n){var r=e[n];t[n]=Object(P.a)(r)})),t},k=n(34),F=Object(k.g)(),U=n(19),M=n.n(U),x=function(e,t){var n=function(){var e=Object(a.c)();if(!F.isLegacyContext)return e;var t=window.location.pathname;return{pathname:Object(b.m)(t)}}(),r=n.pathname,i=Object(c.useRef)(r);l.a.useEffect((function(){i.current!==r&&(i.current=r,e())}),[e,r].concat(M()(t||[])))},$={path:"/page-not-found",isMigrated:!0},B={path:"/unknown-error-occurred",isMigrated:!0};n.d(t,"l",(function(){return C})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return a.a})),n.d(t,"d",(function(){return b.f})),n.d(t,"f",(function(){return j})),n.d(t,"j",(function(){return a.e})),n.d(t,"k",(function(){return L})),n.d(t,"g",(function(){return x})),n.d(t,"i",(function(){return I})),n.d(t,"h",(function(){return a.d})),n.d(t,"e",(function(){return $})),n.d(t,"c",(function(){return B}))},function(e,t,n){"use strict";var r,i=n(0),a=n.n(i),o=n(1),s=n(14),c=n.n(s);!function(e){e.CIRCLE="circle",e.RECTANGLE="rectangle",e.TRIANGLE="triangle",e.CHIP="chip",e.SQUARE="square"}(r||(r={}));var l="skeleton",u=function(e){var t=e.size,n=void 0===t?o.Size.m:t,r=e.type,i=e.style,s=e.className,u=c()(l,"".concat(l,"-").concat(n),"".concat(l,"__").concat(r)),d=c()(l,s,u);return a.a.createElement("div",{className:s?d:u,style:i||{}})};n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u}))},,function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l}));var r=n(9),i=function(e){return(null==e?void 0:e.customer)||{}},a=Object(r.createSelector)(i,(function(e){return e.id})),o=Object(r.createSelector)(i,(function(e){return e.enabledFeatures})),s=Object(r.createSelector)(i,(function(e){return e&&e.availableLanguages?e.availableLanguages:[]})),c=Object(r.createSelector)(i,(function(e){return e&&e.properties||{searchTabs:[]}})),l=(Object(r.createSelector)(i,(function(e){return e?e.slug:""})),Object(r.createSelector)(i,(function(e){return!!e&&e.hasTermsAndConditions})))},function(e,t,n){"use strict";var r=n(581);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e})),n.d(t,"f",(function(){return r.f})),n.d(t,"g",(function(){return r.g})),n.d(t,"h",(function(){return r.h})),n.d(t,"i",(function(){return r.i})),n.d(t,"j",(function(){return r.j})),n.d(t,"k",(function(){return r.k})),n.d(t,"l",(function(){return r.l})),n.d(t,"m",(function(){return r.m})),n.d(t,"n",(function(){return r.n})),n.d(t,"o",(function(){return r.o})),n.d(t,"p",(function(){return r.p})),n.d(t,"q",(function(){return r.q})),n.d(t,"r",(function(){return r.r})),n.d(t,"s",(function(){return r.s})),n.d(t,"t",(function(){return r.t})),n.d(t,"u",(function(){return r.u})),n.d(t,"v",(function(){return r.v}))},,function(e,t,n){"use strict";function r(e){i=e,a=e.adjustFooterStyle,o=e.adjustStyle,s=e.getWidgetContentStyle}var i,a,o,s;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return r}))},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return f}));var r=n(4),i=n.n(r),a=n(316),o={instanceAdmin:"instanceAdmin",superAdmin:"superAdmin"},s=["content","admin","search","404",a.a],c=[":","/","?","#","[","]","@","!","$","&","'","(",")","*","+",",",";","=",".","s"],l=function(e,t,n,r,a,o,s){var c=n.getCurrent();if(!angular.isUndefinedOrEmpty(c)){c.properties={class:i()(c,"properties.class"),duplicateContent:{author:c.author,authorDetails:c.authorDetails,id:c.id,writer:c.writer,writerDetails:c.writerDetails},id:i()(c,"properties.id")},c.id=void 0,c.uid=void 0,c.author=void 0,c.authorDetails=void 0,c.authorId=void 0,c.writer=void 0,c.likes=0,c.comments=0,c.status=t.CONTENT_STATUS.DRAFT.value,c.header=void 0,c.headerDetails=angular.isUndefinedOrEmpty(c.headerDetails)?r.getCurrent():c.headerDetails,angular.isDefinedAndFilled(c.headerDetails)&&(c.headerDetails.id=void 0),c.isHomepage=!1,angular.isDefinedAndFilled(c.thumbnailBlobkey)&&(c.thumbnail=c.thumbnailBlobkey);var l=o.translate("COPY_NAME"),u=new RegExp("^[\\u0000-\\u007F]*$","g"),d=u.test(l)?l:o.translate_("COPY_NAME",o.getLang("fallback"));angular.forEach(c.title,(function(e,t){c.title[t]+="-".concat(l)}));var p=a.getInstance();angular.forEach(c.slug,(function(e,t){angular.isDefined(p)&&angular.isDefinedAndFilled(p.langs)&&-1!==p.langs.indexOf(t)?c.slug[t]+="-".concat(d.toLowerCase()):c.slug[t]=void 0})),angular.isDefinedAndFilled(e.instanceId)&&(c.instance=e.instanceId),angular.isDefinedAndFilled(e.customContentType)&&(c.customContentType=e.customContentType),angular.isDefinedAndFilled(e.contentType)&&(c.contentType=e.contentType),s&&angular.isDefined(c.type)&&"news"===c.type&&(c.customContentType=void 0,c.metadata=[])}},u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"front-office";if(!angular.isUndefinedOrEmpty(t)){var i="/client/".concat(r,"/modules/").concat(t);return n&&(i="/client/front-office/specifics/themes/".concat(e.getInstance().theme,"/modules/").concat(t)),i}},d=function(e,t,n){var r=t.get(n);return angular.isDefinedAndFilled(r)?r:e.get(n,{cache:t}).then((function(e){return i()(e,"data","")}))},p=function(e){return!!angular.isDefined(e&&angular.isDefined(e.$promise))&&e.$promise},f=function(e,t,n){var r=s.join("|"),i=c.join("\\");e.html5Mode({enabled:!0,requireBase:!1});var a=new RegExp("(?:/a/[^/]+)*");t.type("customerPath",{decode:function(e){return e?e.toString():e},encode:function(e){return e?e.toString():e},is:function(e){return this.pattern.test(e)},pattern:a,urlEncode:!1});var o=new RegExp("(?:(?!^(?:".concat(r,")$)[^").concat(i,"]+)(?:/(?!^(?:").concat(r,")$)[^").concat(i,"]+)*"));t.type("path",{decode:function(e){return e?e.toString():e},encode:function(e){return e?e.toString():e},is:function(e){return this.pattern.test(e)},pattern:o}),n.rule((function(e,t){var n=t.path()||"",r="/"===n[n.length-1],i=n.split("/"),a=angular.isDefined(i[2])&&""===i[2]||"/login"!==n&&angular.isUndefined(i[2])&&"a"!==i[1],o=angular.isDefined(i[3])&&"a"===i[1]&&(angular.isUndefined(i[4])&&"login"!==i[3]||angular.isDefined(i[4])&&""===i[4]);return!r||a||o?r||!a&&!o?void 0:"".concat(n,"/"):n.substr(0,n.length-1)}))}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(3),a=n.n(i),o=n(9),s=n(4),c=n.n(s),l=n(148),u=n.n(l),d=n(459),p=n.n(d),f=n(227),g=n.n(f),m=n(21),v=n.n(m),h=n(27),y=n.n(h),E=n(147),b=n.n(E),O=n(140),C=n.n(O),T=Object(o.createSelector)((function(e){return e.socialAdvocacy.saAnalytics}),(function(e){return e.topTopics})),S=Object(o.createSelector)(T,(function(e){return c()(e,"byShareable.entries",[])})),I=n(5),_=n(96),A=n(301),w=n(102),D=n(264);n.d(t,"h",(function(){return P})),n.d(t,"i",(function(){return N})),n.d(t,"j",(function(){return R})),n.d(t,"q",(function(){return j})),n.d(t,"o",(function(){return k})),n.d(t,"k",(function(){return F})),n.d(t,"l",(function(){return U})),n.d(t,"p",(function(){return M})),n.d(t,"n",(function(){return x})),n.d(t,"m",(function(){return $})),n.d(t,"r",(function(){return W})),n.d(t,"t",(function(){return G})),n.d(t,"d",(function(){return Y})),n.d(t,"b",(function(){return H})),n.d(t,"g",(function(){return K})),n.d(t,"f",(function(){return V})),n.d(t,"s",(function(){return z})),n.d(t,"e",(function(){return q})),n.d(t,"c",(function(){return X})),n.d(t,"a",(function(){return Q}));var L=u()((function(e,t){return t.trim().toLocaleLowerCase().includes(e)})),P=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.contentId")},N=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.contentPreview")},R=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.currentPreviewTab")},j=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.form")},k=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.socialNetworksStatus")},F=Object(o.createSelector)((function(e){return c()(e,"socialAdvocacy.shareableWorkflow")}),(function(e){return c()(e,"incompatibleSocialNetworks")})),U=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.isPreviewOpen")},M=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.isWorkflowOpen")},x=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.shareableContent")},$=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.programId")},B=function(e){return function(e,t){return c()(e,"socialAdvocacy.shareableWorkflow.form.fields.".concat(t,".value"))}(e,"topics")},W=Object(o.createSelector)(j,(function(e){return c()(e,"fields",{})})),G=Object(o.createSelector)(W,(function(e){return b()((function(t){return c()(e,[t],{})}))})),Y=Object(o.createSelector)([A.c,function(e){return c()(e,"socialAdvocacy.shareableWorkflow.form.fields.topics.searchText","").trim().toLocaleLowerCase()}],(function(e,t){return function(e,t){return e.filter((function(e){return L(t,Object(I.h)(e.name))}))}(Object.values(e),t)})),H=function(e){return c()(e,"socialAdvocacy.shareableWorkflow.socialNetworks",[])},K=Object(o.createSelector)([A.c,B],(function(e,t){var n=p()(e,"createAt","desc");return g()(n,(function(e){return v()(t,{id:e.id})}))})),V=Object(o.createSelector)([S,B],(function(e,t){return e.filter((function(e){return e.status===D.b.live&&!v()(t,(function(t){return e.id===t.id}))}))})),z=function(e){var t=e.loadingState,n={isFetchingMostUsedTopics:e.socialAdvocacy.saAnalytics.topTopics.byShareable.fetching,isFetchingTopics:Object(A.a)(e),isSubmitting:t.CREATE_SHAREABLE_CONTENT,isValidating:t.VALIDATE_SHAREABLE_CONTENT};return Object.values(n).some((function(e){return!0===Boolean(e)}))},q=Object(o.createSelector)([W,N,G],(function(e,t,n){var r=n("type"),i=r.value,a=n("images"),o=a.value;switch(i){case w.d.link:var s=c()(e,"contentUrl.hasError","");return Boolean(t.url&&!s);case w.d.images:var l=Boolean(o&&o.length>0);return l&&"image/gif"!==c()(o,"[0].type");default:return!0}})),X=Object(o.createSelector)([F,G],(function(e,t){var n=t("shareableOn"),i=n.value,o=C()(i);return o.reduce((function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,a()({},n,i[n]&&y()(c()(e,n,[]))))}),{})})),Q=Object(o.createSelector)([q,X,H],(function(e,t,n){return 0!==n.length&&(_.e.selectSNForShareableContent?e&&Object.values(t).some((function(e){return e})):e)}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r={BULLETS:"bullets",THUMBNAILS:"thumbnails"},i={GRID:"grid",SLIDESHOW:"slideshow"},a={GROUP:"group",UNGROUP:"ungroup"}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=n(64),o=n(178),s=new a.a({baseURL:"".concat(o.ConfigConstant.APPLICATION_HOST,"/sa/v2")}),c={authorization_required:"authorization_required",invalid_request:"invalid_request","domain.post.create.unauthorized_access":"FRONT.SOCIAL_ADVOCACY.SHARE.LINKEDIN_LOGIN_EXPIRED","domain.shareable_content.create.content_cannot_be_made_shareable":"FRONT.SOCIAL_ADVOCACY.MAKE_SHAREABLE.EMPTY_META_DATA","domain.shareable_content.create.duplicate_on_content_core_id":"FRONT.SOCIAL_ADVOCACY.MAKE_SHAREABLE.DUPLICATED_CONTENT","domain.shareable_content.create.duplicate_on_content_url":"FRONT.SOCIAL_ADVOCACY.MAKE_SHAREABLE.DUPLICATED_CONTENT","domain.shareable_content.create.total_media_count_too_high":"FRONT.SOCIAL_ADVOCACY.SHAREABLE_CONTENT.SHARING_NOT_SUPPORTED.GALLERY"},l=function(e){return s.post("analytics/export",{filters:e})},u=function(e){var t={};return e&&(t={filters:e}),t.metrics=["sharer_count","user_count","sharer_rate"],s.post("analytics",t)},d=function(e){var t={};return e&&(t={filters:e}),t.metrics=["shareable_content_created_count"],s.post("analytics",t)},p=function(e){var t={};return e&&(t={filters:e}),t.metrics=["share_created_count","share_created_count_by_creator"],s.post("analytics",t)},f=function(e){var t={};return e&&(t={filters:e}),t.metrics=["share_interaction_count","share_interaction_rate"],s.post("analytics",t)},g=function(e){var t={};return e&&(t={filters:e}),t.metrics=["share_like_count","share_like_creator_count","share_like_shareable_content_count","share_like_count_by_creator","share_like_count_by_shareable_content"],s.post("analytics",t)},m=function(e){var t={};return e&&(t={filters:e}),t.metrics=["share_comment_count","share_comment_creator_count","share_comment_shareable_content_count","share_comment_count_by_creator","share_comment_count_by_shareable_content"],s.post("analytics",t)},v=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;return s.post("analytics",Object.assign(e?{filters:e}:{},{dimensions:[n],limit:r,metrics:[t],sorts:[{dir:-1,metric:t}]}))},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return v(e,t,"topic",n)},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return v(e,t,"shareable_content",n)},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return v(e,t,"sharer",n)},b=n(3),O=n.n(b),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"createdAt",o={filters:i({},e),sortDir:n,sortField:a};return t&&(o.limit=t),r&&(o.cursor=r),s.post("dashboard",o)},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=t?"&active=".concat(t):"";return s.get("shareable-contents?contentInternalId=".concat(e).concat(n)).then((function(e){return e.data.items&&e.data.items.length>0?e.data.items[0]:void 0}))},S=function(e){return s.post("shareable-contents",e)},I=function(e){return s.post("shareable-contents/validate-creation",e)},_=function(e,t){return s.put("shareable-contents/".concat(e),t)},A=function(e){return s.put("shareable-contents/".concat(e,"/deactivate"))},w=function(){return s.get("social-network/capabilities")},D=function(){return s.get("social-network/settings")},L=function(e){return s.get("social-network/configurations/".concat(e))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return s.put("social-network/configurations/".concat(e),{active:t,clientId:r,clientSecret:i,useCustomApplication:n})},N=function(e){var t=e.url,n=e.contentInternalId,r=void 0===n?null:n,i=e.programId,a=void 0===i?null:i;return s.post("utils/content-shareable-status",{contentInternalId:r,url:t,programId:a})};n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"q",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"p",(function(){return g})),n.d(t,"o",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"m",(function(){return y})),n.d(t,"l",(function(){return E})),n.d(t,"j",(function(){return C})),n.d(t,"i",(function(){return T})),n.d(t,"s",(function(){return S})),n.d(t,"v",(function(){return I})),n.d(t,"t",(function(){return _})),n.d(t,"b",(function(){return A})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return D})),n.d(t,"k",(function(){return L})),n.d(t,"u",(function(){return P})),n.d(t,"r",(function(){return N}))},function(e,t,n){"use strict";var r,i,a,o;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),function(e){e.Widget="widget",e.ThirdParty="third_party"}(r||(r={})),function(e){e.Remote="remote",e.Media="media",e.Chat="chat",e.Login="login"}(i||(i={})),function(e){e.content="content",e.global_settings="global_settings",e.internal_settings="internal_settings",e.provider_settings="provider_settings",e.settings="settings"}(a||(a={})),function(e){e.NETWORK="NETWORK_ERROR",e.UNKNOWN_EXTENSION="UNKNOWN_EXTENSION"}(o||(o={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={CREATE:"CREATE",EDIT:"EDIT"},i={COMPLETE:"COMPLETE",ERROR:"ERROR",INCOMPLETE:"INCOMPLETE"}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return o.apply(this,arguments)}function o(){return o=v()(g.a.mark((function e(t){var n,r,i,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.spaceId,i={provider:n,spaceId:r},a=Object.keys(i).filter((function(e){return i[e]})),o=a.map((function(e){return"".concat(e,"=").concat(i[e])})).join("&"),e.abrupt("return",b.get("userToken/status?".concat(o)));case 5:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return c=v()(g.a.mark((function e(t){var n,r,i,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.spaceId,i={provider:n,spaceId:r},a=Object.keys(i).filter((function(e){return i[e]})),o=a.map((function(e){return"".concat(e,"=").concat(i[e])})).join("&"),e.abrupt("return",b.get("userToken/disconnect?".concat(o)));case 5:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return u=v()(g.a.mark((function e(t){var n,r,i,a,o,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.spaceId,i=t.userEmail,a=t.userId,o={provider:n,spaceId:r,userEmail:i,userId:a},s=Object.keys(o).filter((function(e){return o[e]})),c=s.map((function(e){return"".concat(e,"=").concat(o[e])})).join("&"),e.abrupt("return",b.get("channels/user/link?".concat(c)));case 5:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return p=v()(g.a.mark((function e(t){var n,r,i,a,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.spaceId,i=t.channelId,a={provider:n,spaceId:r,channelId:i},o=Object.keys(a).filter((function(e){return a[e]})),s=o.map((function(e){return"".concat(e,"=").concat(a[e])})).join("&"),e.abrupt("return",b.get("channels/user/joined?".concat(s)));case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}n.d(t,"b",(function(){return s})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return a})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return T})),n.d(t,"k",(function(){return d})),n.d(t,"q",(function(){return O})),n.d(t,"m",(function(){return C})),n.d(t,"l",(function(){return S})),n.d(t,"o",(function(){return I})),n.d(t,"n",(function(){return w})),n.d(t,"r",(function(){return D})),n.d(t,"f",(function(){return L})),n.d(t,"p",(function(){return P})),n.d(t,"a",(function(){return N})),n.d(t,"h",(function(){return R})),n.d(t,"s",(function(){return j}));var f=n(6),g=n.n(f),m=n(10),v=n.n(m),h=n(3),y=n.n(h),E=n(45),b=new E.c({path:"chat"}),O=function(e){var t=e.provider,n=e.maxResults,r=e.cursor,i=e.page;return b.post("userSpaces/list",{cursor:r,maxResults:n,page:i,provider:t})},C=function(e){var t=e.provider,n=e.maxResults,r=e.cursor,i=e.page;return b.post("userSpaces/list/joined",{cursor:r,maxResults:n,page:i,provider:t})},T=function(e){var t=e.provider,n=e.spaceId,r={provider:t,spaceId:n},i=Object.keys(r).filter((function(e){return r[e]})),a=i.map((function(e){return"".concat(e,"=").concat(r[e])})).join("&");return b.get("userSpaces/get?".concat(a))},S=function(e){var t=e.callId,n=e.provider,r=e.spaceId,i=e.maxResults,a=e.cursor,o=e.page;return b.post("channels/list",{callId:t,cursor:a,maxResults:i,page:o,provider:n,spaceId:r})},I=function(e){var t=e.callId,n=e.provider,r=e.spaceId,i=e.maxResults,a=e.cursor,o=e.page;return b.post("channels/list/joined",{callId:t,cursor:a,maxResults:i,page:o,provider:n,spaceId:r})},_=function(e){var t=e.channelId,n=e.provider,r=e.spaceId,i={channelId:t,provider:n,spaceId:r},a=Object.keys(i).filter((function(e){return i[e]})),o=a.map((function(e){return"".concat(e,"=").concat(i[e])})).join("&");return b.get("channels/get?".concat(o))},A=function(e){var t=e.channelName,n=e.provider,r=e.spaceId,i={channelName:t,provider:n,spaceId:r},a=Object.keys(i).filter((function(e){return i[e]})),o=a.map((function(e){return"".concat(e,"=").concat(i[e])})).join("&");return b.get("channels/getByName?".concat(o))},w=function(e){var t=e.callId,n=e.provider,r=e.spaceId,i=e.channelId,a=e.chatMessageId,o=e.fields,s=e.maxResults,c=e.cursor,l=e.page,u={callId:t,channelId:i,chatMessageId:a,cursor:c,fields:o,maxResults:s,page:l,provider:n,spaceId:r},d=Object.keys(u).filter((function(e){return u[e]})),p=d.map((function(e){return"".concat(e,"=").concat(u[e])})).join("&");return b.get("messages/list?".concat(p))},D=function(e){var t=e.callId,n=e.provider,r=e.spaceId,i=e.channelId,a=e.chatMessageId,o=e.body,s=e.bodyContentType;return b.post("messages/create",{body:o,bodyContentType:s,callId:t,channelId:i,chatMessageId:a,provider:n,spaceId:r})},L=function(e){var t=e.provider,n=e.userId,r={provider:t,userId:n},i=Object.keys(r).filter((function(e){return r[e]})),a=i.map((function(e){return"".concat(e,"=").concat(r[e])})).join("&");return b.get("userPhoto?".concat(a))},P=function(e){var t="";return e&&e.userId&&(t="userId=".concat(e.userId)),b.get("providers/list?".concat(t))},N=function(e){return b.delete("userSpaces/unregister",i({},e))},R=function(e){return b.get("userSpaces/get?spaceId=".concat(e.spaceId,"&provider=").concat(e.provider))},j=function(e){return b.post("userSpaces/register",i({},e))},k=function(e){var t=e.provider,n=e.spaceId,r={provider:t,spaceId:n},i=Object.keys(r).filter((function(e){return r[e]})),a=i.map((function(e){return"".concat(e,"=").concat(r[e])})).join("&");return b.get("userToken/authorize?".concat(a))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(12),i="social-advocacy",a={ADMIN:"ADMIN",AMBASSADOR:"AMBASSADOR",PROGRAM_MANAGER:"PROGRAM_MANAGER"},o={CAN_ACCESS_ALL_SHARES_DATA:"CAN_ACCESS_ALL_SHARES_DATA",CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES:"CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES",CAN_MANAGE_SHAREABLE_CONTENTS:"CAN_MANAGE_SHAREABLE_CONTENTS",CAN_MANAGE_SOCIAL_ADVOCACY_AMBASSADORS:"CAN_MANAGE_SOCIAL_ADVOCACY_AMBASSADORS",CAN_MANAGE_SOCIAL_ADVOCACY_PROGRAM_MANAGERS:"CAN_MANAGE_SOCIAL_ADVOCACY_PROGRAM_MANAGERS",CAN_MANAGE_SOCIAL_ADVOCACY_TOPICS:"CAN_MANAGE_SOCIAL_ADVOCACY_TOPICS",CAN_MANAGE_SOCIAL_NETWORK_CONFIGURATIONS:"CAN_MANAGE_SOCIAL_NETWORK_CONFIGURATIONS",CAN_SHARE_SHAREABLE_CONTENTS:"CAN_SHARE_SHAREABLE_CONTENTS"},s="ls/share",c=["html","intro","featured-image","title"],l=250,u={facebook:{helperMessage:"FRONT.SOCIAL.ADVOCACY.MAKE.SHAREABLE.HELPER.FACEBOOK",icon:r.eb,iconBox:r.fb,label:"Facebook",textLimit:void 0},linkedin:{icon:r.Yb,iconBox:r.Zb,label:"LinkedIn",textLimit:1300},twitter:{icon:r.Rc,iconBox:r.Sc,label:"Twitter",textLimit:l}},d={selectSNForShareableContent:!0}},function(e,t,n){"use strict";function r(e,t,n){if(!t)return null;try{var i=p.a.parent(e,t),a=d()(i,2),o=a[0],s=a[1];return!n||n(o)?i:r(e,s,n)}catch(e){return null}}function i(e){if(!e.selection)return!1;var t=e.selection.focus,n=t.offset,r=t.path;return 0===n&&0===g()(r)}function a(e,t,n){var r,i,a,o,c,l,u,f,g,m;return s.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:r=p.a.nodes(e,{at:t,match:n}),i=p.g.start(t),a=[],o=!1,c=!0,l=!1,u=void 0,v.prev=7,f=s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d()(m.value,2),n=t[0],r=t[1],!(!o&&p.e.isParent(r,i.path)||o&&!a.some((function(e){return p.e.isDescendant(r,e)})))){e.next=6;break}return o=!0,a.push(r),e.next=6,[n,r];case 6:case"end":return e.stop()}}),e)})),g=r[Symbol.iterator]();case 10:if(c=(m=g.next()).done){v.next=15;break}return v.delegateYield(f(),"t0",12);case 12:c=!0,v.next=10;break;case 15:v.next=21;break;case 17:v.prev=17,v.t1=v.catch(7),l=!0,u=v.t1;case 21:v.prev=21,v.prev=22,c||null==g.return||g.return();case 24:if(v.prev=24,!l){v.next=27;break}throw u;case 27:return v.finish(24);case 28:return v.finish(21);case 29:case"end":return v.stop()}}),y,null,[[7,17,21,29],[22,,24,28]])}n.d(t,"h",(function(){return E})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return C})),n.d(t,"i",(function(){return a})),n.d(t,"f",(function(){return T})),n.d(t,"b",(function(){return I}));var o=n(6),s=n.n(o),c=n(19),l=n.n(c),u=n(8),d=n.n(u),p=n(23),f=(n(430),n(142)),g=n.n(f),m=n(429),v=n.n(m),h=(n(287),n(808),n(121)),y=s.a.mark(a),E=function(e){return function(t){return p.b.isElement(t)&&t.type===e}},b=function(e,t){var n=g()(e);return void 0===n?null:[].concat(l()(v()(e)),[n+("after"===t?1:-1)])},O=function(e,t,n){var r=b(t,n);if(!r)return null;try{return p.a.node(e,r)}catch(e){return null}},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.selection)return!1;var r=Array.from(p.a.nodes(e,{at:e.selection,match:E(t),universal:n}));return Boolean(r.length)},T=function(e){var t=p.a.nodes(e,{match:function(t){return p.a.isBlock(e,t)}}),n=0,r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value;if(n+=1,n>1)return!0}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return!1},S=function(e){var t=function(e){var t=p.a.last(e,[e.children.length-1]),n=d()(t,2),r=n[0],i=n[1];return{path:i,offset:r.text.length}}(e);p.i.select(e,{anchor:t,focus:t})},I=function(e){h.b.focus(e),setTimeout((function(){S(e)}),1)}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=n(8),c=n.n(s),l=n(3),u=n.n(l),d=n(0),p=n.n(d),f=n(82),g=n.n(f),m=n(27),v=n.n(m),h=n(1),y=n(101),E=n(16),b=n.n(E),O=n(163),C=function(e){var t=e.leftIcon,n=e.rightIcon,r=Object(O.b)({icon:t||""}),i=r.iconPath,a=Object(O.b)({icon:n||""}),o=a.iconPath;return p.a.createElement(h.Button,b()({},e,{leftIcon:i!==O.a?i:void 0,rightIcon:o!==O.a?o:void 0}))};C.displayName="Button";var T=function(e){var t=e.icon,n=Object(O.b)({icon:t}),r=n.iconPath;return p.a.createElement(h.IconButton,b()({},e,{icon:r}))};T.displayName="IconButton";var S=function(e){var t=e.icon,n=Object(O.b)({icon:t}),r=n.iconPath;return p.a.createElement(h.Icon,b()({},e,{icon:r}))};S.displayName="Icon";var I=n(18),_=n.n(I),A=function(e){var t=e.children,n=e.buttonProps,r=void 0===n?{}:n,i=e.label,a=_()(e,["children","buttonProps","label"]),o=p.a.useRef(null),s=p.a.useState(!1),l=c()(s,2),u=l[0],d=l[1];return p.a.createElement(p.a.Fragment,null,p.a.createElement(h.Button,b()({},r,{ref:o,onClick:function(){return d(!u)}}),i),p.a.createElement(h.Dropdown,b()({},a,{isOpen:u,onClose:function(){return d(!1)},anchorRef:o}),p.a.createElement(h.List,null,t)))};A.displayName="Dropdown";var w=function(e){var t=e.html;return p.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}})};w.displayName="RawHTML";var D=n(12),L=n(15),P=n(14),N=n.n(P),R=function(e){return!!e&&Boolean(e.label)},j=function(e){var t=e.cancel,n=e.accept,r=e.onClose,i=R(t),a=R(n);return p.a.createElement(p.a.Fragment,null,i&&t?p.a.createElement(h.Button,b()({},t,{onClick:function(){t.onClick&&t.onClick(),r&&r()}}),t.label):null,a&&n?p.a.createElement(h.Button,b()({},n,{className:N()("lumx-spacing-margin-left-regular",n.className),onClick:function(){n.onClick&&n.onClick(),r&&r()}}),n.label):null)},k=function(e){var t=e.header,n=e.body,r=e.isOpen,i=e.cancel,a=e.accept,o=e.onClose,s=_()(e,["header","body","isOpen","cancel","accept","onClose"]),l=p.a.useState(r),u=c()(l,2),f=u[0],g=u[1],m=Object(d.useCallback)((function(){o&&o(),g(!1)}),[o]),v=Object(d.useRef)(null),y=Object(L.c)(),E=y.translateKey,O=R(i),C=R(a),T=C||O,S=p.a.createElement(h.Toolbar,{after:p.a.createElement(j,{cancel:i,accept:a,onClose:m})}),I=p.a.createElement(h.Toolbar,{label:t,after:p.a.createElement(h.IconButton,{label:E("CLOSE"),icon:D.L,onClick:m,emphasis:h.Emphasis.low})});return p.a.createElement("div",{ref:v},p.a.createElement(h.Dialog,b()({},s,{isOpen:f,parentElement:v,onClose:m,footer:T?S:null,header:I}),p.a.createElement("div",{className:"lumx-spacing-padding-horizontal-huge customization-dialog__body"},n)))};k.displayName="Dialog";var F,U,M={Message:h.Message,Kind:h.Kind,Size:h.Size,ColorPalette:h.ColorPalette,Emphasis:h.Emphasis,Orientation:h.Orientation,Alignment:h.Alignment,AspectRatio:h.AspectRatio,Theme:h.Theme,ThumbnailVariant:h.ThumbnailVariant,Button:C,IconButton:T,Chip:h.Chip,Link:h.Link,Thumbnail:h.Thumbnail,ListItem:h.ListItem,FlexBox:h.FlexBox,List:h.List,ListSubheader:h.ListSubheader,Avatar:h.Avatar,Badge:h.Badge,ListDivider:h.ListDivider,Icon:S,DropdownSection:y.b,DropdownItem:y.a,Dropdown:A,RawHTML:w,Toolbar:h.Toolbar,Dialog:k},x=Object.keys(M),$={},B={};x.forEach((function(e){var t,n=M[e];n&&(n.displayName?Object.assign($,u()({},e,(t=e,function(e){return{component:t,props:e}}))):Object.assign(B,u()({},e,n)))})),function(e){e.RIGHT="right",e.LEFT="left",e.ABOVE="above",e.UNDER="under"}(F||(F={})),function(e){e.SEARCH="search",e.SEARCH_BOX="search-box",e.CONTEXTUAL_ACTIONS="contextual-actions",e.SETTINGS="settings",e.CONTRIBUTION_MENU="contribution-menu",e.CONTRIBUTION_BUTTON="contribution-button",e.NAVIGATION="navigation",e.APP="app",e.HEADER="header",e.CONTENT="content",e.COMMUNITY="community",e.PROFILE="profile",e.PAGE="page",e.WIDGET="widget"}(U||(U={}));var W=n(173),G=function(e){var t=e.placement,n=e.children;return p.a.createElement("div",{className:"customization-app customization-app__".concat(t)},n)},Y=function e(t){var n=t.component,i=t.props,a=void 0===i?{}:i,o={};return["children","before","after","label","header","body","footer"].forEach((function(t){if(a[t]){var n=function(e,t){var n=[];return n=g()(e)?e.map(t):e.component?t(e):e,n}(a[t],e);o[t]=n}})),p.a.createElement(M[n],function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{},o))},H=function(e){var t=e.target,n=e.placement,r=W.a.getCustomComponent({target:t,placement:n})||{toRender:{}},i=Object(d.useState)(r.toRender),a=c()(i,2),o=a[1],s=r&&!v()(r.toRender);p.a.useEffect((function(){var e;s&&(e={name:"Customizations | ".concat(t),props:{placement:n}},"undefined"!=typeof pendo&&pendo&&pendo.track&&pendo.track(e.name,e.props)),W.a.subscribeToCustomization({target:t,placement:n,callback:o})}),[t,n,s]);var l=s&&r.toRender.component?r.toRender:null,u=l?Y(l):null;return t===U.APP&&s?p.a.createElement(G,{placement:n},u):u},K=function(e,t){switch(e){case U.APP:return U.APP;case U.CONTEXTUAL_ACTIONS:return U.CONTEXTUAL_ACTIONS;case U.CONTRIBUTION_MENU:return U.CONTRIBUTION_MENU;case U.CONTRIBUTION_BUTTON:return U.CONTRIBUTION_BUTTON;case U.HEADER:return U.HEADER;case U.NAVIGATION:return U.NAVIGATION;case U.SEARCH_BOX:return U.SEARCH_BOX;case U.SETTINGS:return U.SETTINGS;case U.PAGE:return U.PAGE;case U.CONTENT:case U.SEARCH:case U.PROFILE:case U.COMMUNITY:return W.a.doesCustomizationExist({target:e})?e:t||e;default:return W.a.doesCustomizationExist({target:e})?e:e.indexOf("".concat(U.CONTENT,"-"))>=0&&W.a.doesCustomizationExist({target:U.CONTENT})?U.CONTENT:e.indexOf("".concat(U.WIDGET,"-"))>=0?e:t||U.APP}},V=n(162),z=n(11),q=n(292),X=function(){var e=Object(z.useSelector)(q.c),t=Object(V.a)(),n=Object(d.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{device:t})}),[e,t]);return n},Q=n(34),Z=n(100),J=Object(Q.g)(),ee=new Z.c({path:"",baseURL:J.applicationHost}),te={api:ee,render:function(e){W.a.setCustomComponent(e)},onNavigation:function(e){W.a.subscribeToNavigation({callback:e})},components:$,targets:U,constants:B,placement:F},ne=function(e,t){try{e.callback(o({},te,{session:t})),e.configuration&&e.configuration.shouldRenderOnNavigation&&W.a.subscribeToNavigation({callback:function(n){e.callback(o({},te,{session:t},n))}})}catch(e){console.error("Error while executing customization:",e)}},re=function(e){!W.a.wasStoreInitialized()&&e.isConnected&&(Boolean(window&&window.lumapps&&window.lumapps.customize&&window.lumapps.subscribers&&window.lumapps.subscribers.length>0)&&window.lumapps.subscribers.forEach((function(t){ne(t,e)})),Object.assign(window.lumapps,{customize:function(t,n){ne({callback:t,configuration:n},e)}}),W.a.setStoreAsInitialized())},ie=function(){var e=X();p.a.useEffect((function(){re(e)}),[e])};n.d(t,"e",(function(){return ie})),n.d(t,"a",(function(){return H})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return K}))},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var a,o,s=n(6),c=n.n(s),l=n(10),u=n.n(l),d=n(22),p=n.n(d),f=n(20),g=n.n(f),m=n(3),v=n.n(m),h=n(143),y=n.n(h),E=n(236),b=n.n(E),O=n(63),C=n.n(O),T=n(58),S=n(34),I=n(377),_=n(196),A=n(378),w=n(283),D=n(83),L=n(126),P=Object(S.g)();!function(e){e.HIGH="high",e.LOW="low"}(a||(a={})),function(e){e.ALWAYS="always",e.ONCE="once"}(o||(o={}));var N=function(){function e(t){var n=t.path,r=void 0===n?"":n,i=t.apiVersion,a=void 0===i?"v1":i,o=t.baseURL,s=void 0===o?"".concat(P.applicationHost,"/_ah/api/lumsites/").concat(a,"/").concat(r):o;p()(this,e),v()(this,"api",void 0),v()(this,"baseURL",void 0),v()(this,"path",void 0),v()(this,"validatedValues",void 0),v()(this,"axiosSourcesByRequestKey",void 0),this.api=y.a.create({baseURL:s}),this.baseURL=s,this.path=r,this.validatedValues={},this.api.interceptors.response.use((function(e){return e}),this.onError),this.axiosSourcesByRequestKey={}}var t;return g()(e,[{key:"onError",value:(t=u()(c.a.mark((function t(n){var r,i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.response,i=n.config,!r||401!==r.status||i._retry){t.next=14;break}return t.prev=2,t.next=5,e.refreshToken();case 5:return a=e.getBaseConfig(),o=a.headers,i._retry=!0,i.headers=o,t.abrupt("return",y()(i));case 11:throw t.prev=11,t.t0=t.catch(2),n;case 14:throw n;case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),function(e){return t.apply(this,arguments)})},{key:"getCompleteUrl",value:function(e){return"".concat(this.baseURL,"/").concat(e)}},{key:"generateCancelToken",value:function(e,t,n){var r=n||Object(T.c)(this.getCompleteUrl(e),t);return this.axiosSourcesByRequestKey[r]||(this.axiosSourcesByRequestKey[r]=y.a.CancelToken.source()),this.axiosSourcesByRequestKey[r]}},{key:"cancel",value:function(e,t,n){var r=n||Object(T.c)(this.getCompleteUrl(e),t);this.axiosSourcesByRequestKey[r]&&(this.axiosSourcesByRequestKey[r].cancel(),delete this.axiosSourcesByRequestKey[r])}},{key:"get",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,s=r?Object(L.a)(C()(e.getBaseConfig()),n):n,c=a?this.generateCancelToken(t,n.params,o):void 0;return this.api.get(t,i({cancelToken:null==c?void 0:c.token},s))}},{key:"getWithPriority",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.HIGH,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5?arguments[5]:void 0,u=s?Object(L.a)(C()(e.getBaseConfig()),o):o,d=c?this.generateCancelToken(t,o.params,l):void 0;if(r===a.LOW){var p=new Promise((function(e,r){Object(_.a)((function(){n.api.get(t,i({cancelToken:null==d?void 0:d.token},u)).then(e).catch(r)}))}));return p}return this.api.get(t,i({cancelToken:null==d?void 0:d.token},u))}},{key:"getCacheFirst",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.a.MEMORY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.HIGH,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=Object(T.c)(this.getCompleteUrl(e),r.params),c=T.b.retrieve(s,t);return c?Promise.resolve({data:c,status:200,statusText:"CACHED_OK",headers:{},config:{}}):this.getWithPriority(e,n,r,i,o,s).then((function(e){var n=e.data;return T.b.store(s,n,t),e}))}},{key:"getStaleWhileRevalidate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.a.MEMORY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.HIGH,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.ALWAYS,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=Object(T.c)(this.getCompleteUrl(e),n.params),u=this.validatedValues[l],d=T.b.retrieve(l,t);return d?((i===o.ALWAYS||!u&&i===o.ONCE)&&this.getWithPriority(e,a.LOW,n,s,c,l).then((function(e){var n=e.data;return T.b.store(l,n,t),e})),this.validatedValues[l]=!0,Promise.resolve({data:d,status:200,statusText:"CACHED_OK",headers:{},config:{}})):this.getWithPriority(e,r,n,s,c,l).then((function(e){var n=e.data;return T.b.store(l,n,t),e}))}},{key:"delete",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,o=Object(L.a)(C()(e.getBaseConfig()),n),s=r?this.generateCancelToken(t,n.params,a):void 0;return this.api.delete(t,i({cancelToken:null==s?void 0:s.token},o))}},{key:"patch",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,s=Object(L.a)(C()(e.getBaseConfig()),r),c=a?this.generateCancelToken(t,i({},n,{},r.params),o):void 0;return this.api.patch(t,n,i({cancelToken:null==c?void 0:c.token},s))}},{key:"post",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,s=Object(L.a)(C()(e.getBaseConfig()),r),c=a?this.generateCancelToken(t,i({},n,{},r.params),o):void 0;return this.api.post(t,n,i({cancelToken:null==c?void 0:c.token},s))}},{key:"postWithPriority",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.HIGH,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6?arguments[6]:void 0,d=c?Object(L.a)(C()(e.getBaseConfig()),s):s,p=l?this.generateCancelToken(t,i({},n,{},s.params),u):void 0;if(o===a.LOW){var f=new Promise((function(e,a){Object(_.a)((function(){r.api.post(t,n,i({cancelToken:null==p?void 0:p.token},d)).then(e).catch(a)}))}));return f}return this.api.post(t,n,i({cancelToken:null==p?void 0:p.token},d))}},{key:"postCacheFirst",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.a.MEMORY,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.HIGH,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=Object(T.c)(this.getCompleteUrl(e),i({},t,{},o.params)),u=T.b.retrieve(l,n);return u?Promise.resolve({data:u,status:200,statusText:"CACHED_OK",headers:{},config:{}}):this.postWithPriority(e,t,r,o,s,c,l).then((function(e){var t=e.data;return T.b.store(l,t,n),e}))}},{key:"put",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,s=Object(L.a)(C()(e.getBaseConfig()),r),c=a?this.generateCancelToken(t,i({},n,{},r.params),o):void 0;return this.api.put(t,n,i({cancelToken:null==c?void 0:c.token},s))}}],[{key:"getBaseConfig",value:function(){var t,n={Authorization:"Bearer ".concat(A.a.getUserToken(null===(t=e.store)||void 0===t?void 0:t.getState())),"Lumapps-Organization-Id":P.customerId};return P.useDynamicOverrides&&Object.assign(n,{"Lumapps-Dynamic-Overrides":window.location.search}),Object(I.a)()&&Object.assign(n,{Pragma:"no-cache"}),{headers:n,paramsSerializer:function(e){return b.a.stringify(e,{arrayFormat:"repeat"})}}}},{key:"refreshToken",value:function(){if(e.store){var t,n=null===(t=e.store)||void 0===t?void 0:t.getState(),r=Object(D.b)(n);return y.a.post("".concat(P.applicationHost,"/service/user/token"),{customerId:r}).then((function(t){var n;200===t.status&&(null===(n=e.store)||void 0===n||n.dispatch(w.a.setToken(t.data.token)));return t}))}return A.a.refreshToken()}}]),e}();v()(N,"store",void 0),t.c=N},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=n(16),o=n.n(a),s=n(3),c=n.n(s),l=n(8),u=n.n(l),d=n(18),p=n.n(d),f=n(0),g=n.n(f),m=n(14),v=n.n(m),h=n(33),y=n.n(h),E=n(664),b=n(32),O=n(103),C=n(670),T=n(272),S=n(52),I=n(15),_=n(80),A=n(59),w=n(163),D=n(709),L="dropdown-item",P=function(e){var t=e.children,n=e.className,r=e.icon,a=e.iconStatic,s=e.isAsync,l=void 0!==s&&s,d=e.onClick,f=void 0===d?y.a:d,m=e.onHover,h=void 0===m?y.a:m,P=e.onFinishedLoading,N=void 0===P?y.a:P,R=e.openInNewTab,j=void 0!==R&&R,k=e.route,F=e.title,U=void 0===F?"":F,M=e.scope,x=e.attributes,$=void 0===x?{}:x,B=e.href,W=p()(e,["children","className","icon","iconStatic","isAsync","onClick","onHover","onFinishedLoading","openInNewTab","route","title","scope","attributes","href"]),G=Object(A.b)(M),Y=G.get,H=Y($),K=g.a.useState(!1),V=u()(K,2),z=V[0],q=V[1],X=g.a.useState(!1),Q=u()(X,2),Z=Q[0],J=Q[1],ee=g.a.useRef(null),te=Object(I.c)(),ne=te.translate,re=Object(w.b)({icon:r||""}),ie=re.iconPath,ae=Object(_.l)(),oe=ae.getUrl,se=ae.usesReactRouter,ce=z||Z,le=g.a.useMemo((function(){return B||(k?oe(k):"")}),[oe,k,B]),ue=t||""===le?{}:{href:le,rel:j?"noopener noreferrer":"",target:j?"_blank":(null==k?void 0:k.isMigrated)&&!se?"_self":""};return g.a.createElement(E.b,o()({},W,{className:v()(L,n,c()({},"".concat(L,"--is-hovered"),z)),size:b.h.tiny,before:(a||ie&&r)&&g.a.createElement(O.a,{size:b.h.xs,icon:a||ie,className:"".concat(L,"__icon")}),after:t&&g.a.createElement(O.a,{size:b.h.xs,icon:S.id,className:"".concat(L,"__icon")}),linkProps:i({},ue,{"aria-expanded":t?ce:void 0,"aria-haspopup":Boolean(t),role:"menuitem"}),ref:ee,onItemSelected:y.a,onClick:f,onMouseEnter:function(){t&&(q(!0),h())},onMouseLeave:function(){return t&&q(!1)},role:"none"},H),g.a.createElement("span",{className:"".concat(L,"__item-text"),title:ne(U)||""},ne(U)),t&&g.a.createElement(C.a,{className:"".concat(L,"__children"),isOpen:z||Z,closeOnClick:!0,closeOnEscape:!0,onClose:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){return q(e)}}(!1),anchorRef:ee,onMouseEnter:function(){return J(!0)},onMouseLeave:function(){return J(!1)},offset:D.a,placement:T.a.RIGHT_START},g.a.createElement(E.a,{isClickable:!0},g.a.Children.map(t,(function(e){return g.a.isValidElement(e)?g.a.createElement(e.type,o()({},e.props,l?{onFinishedLoading:N}:{})):null})))))};P.displayName="DropdownItem";var N=n(19),R=n.n(N),j=n(81),k=["184px","128px","152px"],F=function(e){var t=e.count,n=void 0===t?1:t,r=e.showCircle,i=void 0===r||r,a=e.variableLength,o=void 0!==a&&a;return g.a.createElement(g.a.Fragment,null,R()(new Array(n)).map((function(e,t){var n=o?{flex:"0 0 ".concat(k[t%k.length])}:void 0;return g.a.createElement(E.b,{size:b.h.tiny,key:t,className:"dropdown-skeleton-item"},i&&g.a.createElement(j.b,{type:j.a.CIRCLE}),g.a.createElement(j.b,{type:j.a.RECTANGLE,style:n}))})))},U="dropdown-section",M=function(e){var t=e.className,n=e.header,r=e.children,i=e.scope,a=e.attributes,s=void 0===a?{}:a,c=Object(A.b)(i),l=c.get,u=l(s),d=Boolean(r),p="".concat(u["data-id"],"-header"),f=v()(t,"".concat(U,"__wrapper"));return g.a.createElement("li",o()({className:v()(U,t),role:"presentation"},u),d&&n&&"string"==typeof n&&g.a.createElement("span",{id:p,className:"".concat(U,"__subheader"),"aria-hidden":"true"},n),d&&n&&"string"!=typeof n&&g.a.createElement("header",{className:"".concat(U,"__header")},n),r&&g.a.createElement("ul",{className:f,role:"group","aria-labelledby":p},r))};M.displayName="DropdownSection",n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return F})),n.d(t,"b",(function(){return M}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o}));var r="SHAREABLE_CONTENT_LIST",i="SHAREABLE_CONTENT_LIST_REFRESH",a="SHAREABLE_CONTENT_LIST_LOAD_MORE",o={images:"IMAGES",link:"LINK"}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(47),a={component:Object(r.shape)({properties:Object(r.shape)({style:i.q}).isRequired,widgetType:r.string.isRequired})}},function(e,t){var n="https://prod.cdn.lumapps.com/a5a6f177b6/client/",r="".concat(n,"back-office/"),i="".concat(n,"front-office/"),a="".concat(n,"common/"),o="".concat(r,"modules/"),s="".concat(i,"modules/"),c="".concat(a,"modules/"),l=[{googleSync:!1,icon:"map-marker",type:WIDGET_TYPES.BREADCRUMB},{googleSync:!1,icon:"calendar",type:WIDGET_TYPES.CALENDAR},{googleSync:!1,icon:"comment-multiple-outline",type:WIDGET_TYPES.COMMENTS},{googleSync:!1,icon:"filter",type:WIDGET_TYPES.CONTENT_FILTER},{googleSync:!1,icon:"library-books",type:WIDGET_TYPES.CONTENT_LIST},{googleSync:!1,icon:"email",type:WIDGET_TYPES.CONTACT},{googleSync:!1,icon:"book-multiple",type:WIDGET_TYPES.DIRECTORY_ENTRY},{googleSync:!1,icon:"chart-pie",type:WIDGET_TYPES.DATA},{googleSync:!0,icon:"google-drive",type:WIDGET_TYPES.DRIVE},{googleSync:!1,icon:"email",type:WIDGET_TYPES.EMAIL},{googleSync:!1,icon:"image",type:WIDGET_TYPES.FEATURED_IMAGE},{googleSync:!0,icon:"file",type:WIDGET_TYPES.FILE_MANAGEMENT},{googleSync:!1,icon:"xml",type:WIDGET_TYPES.HTML},{googleSync:!1,icon:"crop-free",type:WIDGET_TYPES.IFRAME},{googleSync:!1,icon:"image-multiple",type:WIDGET_TYPES.IMAGE_GALLERY},{googleSync:!1,icon:"view-headline",type:WIDGET_TYPES.INTRO},{googleSync:!1,icon:"link",type:WIDGET_TYPES.LINKS},{googleSync:!1,icon:"file-check",type:WIDGET_TYPES.MANDATORY_READ},{googleSync:!1,icon:"image-multiple",type:WIDGET_TYPES.MEDIA},{googleSync:!1,icon:"timetable",type:WIDGET_TYPES.META},{googleSync:!1,icon:"dns",onlyForTemplate:!0,type:WIDGET_TYPES.METADATA},{googleSync:!1,icon:"chart-bar",isMicrosoft:!0,type:WIDGET_TYPES.CHART},{googleSync:!1,icon:"rss",type:WIDGET_TYPES.RSS},{googleSync:!1,icon:"share-variant",type:WIDGET_TYPES.SHARE},{googleSync:!1,icon:"sitemap",isMicrosoft:!0,type:WIDGET_TYPES.SHAREPOINT_SITE_LIST},{googleSync:!1,icon:"menu",type:WIDGET_TYPES.SUB_NAV},{googleSync:!1,icon:"format-list-checks",type:WIDGET_TYPES.TASKS},{googleSync:!1,icon:"help-circle",type:WIDGET_TYPES.TIP},{googleSync:!1,icon:"format-title",type:WIDGET_TYPES.TITLE},{googleSync:!1,icon:"checkbox-marked-outline",type:WIDGET_TYPES.TODO},{googleSync:!1,icon:"account-multiple",type:WIDGET_TYPES.USER},{googleSync:!1,icon:"video",type:WIDGET_TYPES.VIDEO},{googleSync:!1,icon:"comment-question-outline",type:WIDGET_TYPES.STANDALONE_QUESTION},{context:[CONTENT_TYPES.COMMUNITY],googleSync:!1,icon:"menu",type:WIDGET_TYPES.COMMUNITY_NAVIGATION},{context:[CONTENT_TYPES.COMMUNITY],googleSync:!1,icon:"account",type:WIDGET_TYPES.COMMUNITY_MEMBERS},{context:[CONTENT_TYPES.COMMUNITY],googleSync:!1,icon:"view-headline",type:WIDGET_TYPES.COMMUNITY_INTRO}];e.exports={ALLOW_METRIC_IN_LOCAL:!1,API_NAME:"lumsites",API_VERSION:"v1",APPLICATION_NAME:"LumSites",BACK_MODULES_PATH:o,COMMON_MODULES_PATH:c,DEFAULT_CONTRIBUTION_LANGS:["ar","az","bg","cs","cy","da","de","el","en","es","fr","hi","hr","hu","it","in","iw","ja","ko","ku","nl","no","pl","pt","pt_br","ro","ru","sk","sl","sr","sv","th","tl","tr","uk","vi","zh","zh_tw"],DEFAULT_WIDGETS:l,ENABLE_ANGULAR_DEBUG_INFO:!1,ENABLE_LIST_XHR_QUEUE:!0,FRONT_MODULES_PATH:s,FRONT_OFFICE:i,MAX_XHR_QUEUE_DELAY:10,MAX_XHR_QUEUE_SIZE:4,REVERTED_FULLNAME_LANGS:["hu","ja"],ROOT_PATH:n,SCOPE_INFO:{},SUPPORTED_LANGS:["de","en","en_us","es","fi","fr","hu","it","ja","nl","pl","pt","pt_br","pt_pt","ro","ru","th","uk","vi","zh","zh_cn","zh_tw"],TEMPLATE_CACHE_MODULE:"AppTemplates"}},,,,,,function(e,t,n){"use strict";var r=n(153);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.c})),n.d(t,"c",(function(){return r.d})),n.d(t,"d",(function(){return r.e})),n.d(t,"e",(function(){return r.f})),n.d(t,"f",(function(){return r.g})),n.d(t,"g",(function(){return r.h})),n.d(t,"h",(function(){return r.i})),n.d(t,"i",(function(){return r.j})),n.d(t,"l",(function(){return r.k})),n.d(t,"m",(function(){return r.l})),n.d(t,"o",(function(){return r.m})),n.d(t,"p",(function(){return r.n})),n.d(t,"q",(function(){return r.o})),n.d(t,"r",(function(){return r.p})),n.d(t,"s",(function(){return r.q})),n.d(t,"t",(function(){return r.r}));n(228);var i=n(351);n.d(t,"j",(function(){return i.a})),n.d(t,"k",(function(){return i.b})),n.d(t,"n",(function(){return i.c})),n.d(t,"u",(function(){return i.d}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return f}));var r=n(133),i="".concat("admin/communities/","/").concat("creation-wizard"),a="".concat(i,"/CLOSE_WARNING_DIALOG"),o="".concat(i,"/SET_CURRENT_STEP"),s="".concat(i,"/SET_DIALOG_OPEN_STATE"),c="".concat(i,"/SET_EDITION_DIALOG_OPEN_STATE"),l="".concat(i,"/OPEN_COMMUNITY_CREATION_LAUNCHER"),u="".concat(r.ANGULAR_ACTION_PREFIX,"/community-dialog/update"),d=function(){return function(e){e({payload:{},type:a})}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isDialogOpen;return function(e){e({payload:{isDialogOpen:t},type:s})}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isEditionOpen;return function(e){e({payload:{isEditionOpen:t},type:c})}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step;return function(e){e({payload:{step:t},type:o})}},m=function(){return function(e){e({payload:{},type:l})}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){var t,n;try{n=Object(y.a)(e())}catch(e){}return null===(t=n)||void 0===t?void 0:t[0]}var c=n(3),l=n.n(c),u=n(6),d=n.n(u),p=n(10),f=n.n(p),g=n(4),m=n.n(g),v=n(42),h=n(510),y=n(603),E=n(45),b=n(370),O=Object(b.d)(),C=O.applicationHost,T=new E.c({baseURL:"".concat(C,"/upload?success=%2Fupload")}),S=new E.c({baseURL:"".concat(C,"/service/sp.xml")}),I=new E.c({path:"customer/identityprovider"}),_=n(151),A=function(e){return function(e){var t=e.params;return I.get("list",{params:i({},t)})}({params:e}).then((function(e){var t=e.data;return t.items.filter((function(e){var t=e.type;return t in _.f&&"email"!==t}))}))},w=function(e,t){return function(e,t){return I.post("save/order",{orderedUuids:e,customerKey:t})}(e,t).then((function(e){var t=e.data;return t}))},D=function(e){return function(e){var t=e.params;return I.post("save",i({},t))}({params:e}).then((function(e){var t=e.data;return t}))},L=function(e){return function(e){var t=e.params;return I.delete("delete",{params:i({},t)})}({params:e}).then((function(e){var t=e.data;return t}))},P=function(e){return function(e){var t=e.params,n=e.uploadUrl,r=E.c.getBaseConfig();return r.headers["Content-Type"]="multipart/form-data",T.post(n,t.Postdata,r)}(e).then((function(e){var t=e.data;return t}))},N=function(){return T.get("").then((function(e){var t=e.data;return t}))},R=function(e,t,n){return function(e,t){return S.get("",{responseType:"arraybuffer",params:{customerId:t,ctx:e,isArray:!1}})}(n,t).then((function(t){var n=t.headers["content-type"],r=new Blob([t.data],{type:n}),i=document.createElement("a");i.href=window.URL.createObjectURL(r),i.download=e,i.click()})).catch((function(){Object(v.b)({translate:"ADMIN.PROVIDER.DOWNLOAD_SP.ERROR"})}))},j=n(523),k="admin/providers/idp/OPEN_PROVIDER_EDITION_DIALOG",F="admin/providers/idp/CLOSE_PROVIDER_EDITION_DIALOG",U="admin/providers/idp/SET_PROVIDER_FIELD",M="admin/providers/idp/CLEAR_PROVIDER_EDITION_DIALOG",x="admin/providers/idp/SET_PROVIDER_EXCEPTION_TYPE",$="admin/providers/idp/SET_PROVIDER_EXCEPTION_FIELD",B="admin/providers/idp/SET_PROVIDER_EXCEPTION_VALUE",W="admin/providers/idp/FETCH_PROVIDERS_LOADING",G="admin/providers/idp/FETCH_PROVIDERS_SUCCESS",Y="admin/providers/idp/FETCH_PROVIDERS_ERROR",H="admin/providers/idp/CLEAR_PROVIDERS_ERROR_MESSAGE",K="admin/providers/idp/CHANGE_PROVIDERS_ORDER_LOADING",V="admin/providers/idp/CHANGE_PROVIDERS_ORDER_ERROR",z="admin/providers/idp/CHANGE_PROVIDERS_ORDER_SUCCESS",q="admin/providers/idp/SAVE_PROVIDER_SUCCESS",X="admin/providers/idp/SAVE_PROVIDER_ERROR",Q="admin/providers/idp/DELETE_PROVIDERS_SUCCESS",Z="admin/providers/idp/DELETE_PROVIDERS_SUCCESS",J="admin/providers/idp/OPEN_PROVIDER_CONFIRM_DELETE_DIALOG",ee="admin/providers/idp/CLOSE_PROVIDER_CONFIRM_DELETE_DIALOG",te=function(e){return function(t){t({payload:e,type:k})}},ne=function(){return function(e){e({type:F})}},re=function(){return function(e){e({type:M})}},ie=function(e){return function(t){t({payload:e,type:U})}},ae=function(e){var t=e.tenantId;return function(){var e=f()(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:H}),n({type:W}),e.prev=2,e.next=5,A({customerKey:t});case 5:r=e.sent,n({payload:r,type:G}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n({payload:e.t0,type:Y});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},oe=function(e,t,n){return function(){var r=f()(d.a.mark((function r(i,a){var o,s;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i({type:H}),i({type:K}),o=Object(h.a)(Object(j.b)(a()).data,t,n),r.prev=3,s=o.map((function(e){return e.uuid})),r.next=7,w(s,e);case 7:i({payload:o,type:z}),Object(v.d)({translate:"ADMIN.PROVIDER.SAVE.SUCCESS"}),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(3),i({payload:r.t0,type:V}),Object(v.b)({translate:"ADMIN.PROVIDER.DELETE.ERROR"});case 15:case"end":return r.stop()}}),r,null,[[3,11]])})));return function(e,t){return r.apply(this,arguments)}}()},se=function(e){var t=e.uuid;return function(){var e=f()(d.a.mark((function e(n,r){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s(r),e.prev=1,e.next=4,L({customerKey:i,uuid:t});case 4:n({payload:{uuid:t},type:Q}),Object(v.d)({translate:"ADMIN.PROVIDER.DELETE.SUCCESS"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n({payload:e.t0,type:Z}),404===e.t0.response.status?n({payload:{uuid:t},type:Q}):Object(v.b)({translate:"ADMIN.PROVIDER.DELETE.ERROR"});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},ce=function(){return function(e){e({type:J})}},le=function(){return function(e){e({type:ee})}},ue=function(e){return function(t){t({payload:e,type:x})}},de=function(e){return function(t){t({payload:e,type:$})}},pe=function(e){return function(t){t({payload:e,type:B})}},fe=function(e){return function(){var t=f()(d.a.mark((function t(n,r){var i,a,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(j.a)(r()),t.prev=1,t.next=4,D(o({},i,{customerKey:e.tenantId}));case 4:a=t.sent,n({payload:a,type:q}),Object(v.d)({translate:"ADMIN.PROVIDER.SAVE.SUCCESS"}),ne(),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),s=t.t0.response,n({payload:s.data,type:X}),400===s.status?Object(v.b)({translate:"ADMIN.PROVIDER.SAVE.DOMAIN_ERROR"}):403===s.status&&"MAX_IDP_QUOTA_REACHED"===m()(s,"data.error.message")?Object(v.b)({translate:"ADMIN.PROVIDER.QUOTA.EXCEED"}):Object(v.b)({translate:"ADMIN.PROVIDER.SAVE.ERROR"});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()},ge=function(e){return f()(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:return n=t.sent,r=n.uploadUrl,t.abrupt("return",P({params:e,uploadUrl:r}));case 5:case"end":return t.stop()}}),t)})))},me=function(e){return f()(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:return n=t.sent,r=n.uploadUrl,t.abrupt("return",P({params:e,uploadUrl:r}));case 5:case"end":return t.stop()}}),t)})))},ve=function(e,t,n){return f()(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",R(e,t,n));case 1:case"end":return r.stop()}}),r)})))},he=n(37),ye=n(77),Ee={isProviderCreationMode:!0,isProviderDeleteDialogOpen:!1,isProviderEditionDialogOpen:!1,isProviderEnable:!0,providerCreateMode:!0},be={account:"",autoRedirect:!1,domain:"",loginDomain:"",id:"",nbUsers:0,name:"",ssoEnabled:!1,allowJitUserCreation:!1,hasProvisioning:!0,hasLogin:!0,hasRedirectionToProvider:!1,useLoginHint:!1,hasAuthenticationAtEachLogin:!1,synchronizationInProgress:!1,synchronized:!1,synchronizedAt:null,type:"",buttonColor:null,userSyncException:{field:"",name:"",value:"",valueType:"text"},scimType:null,uuid:"",hasIntegrationOnly:!1,federateUserOnEmployeeId:!1,hideBasedOnUserProfile:!1},Oe={data:[],errorMessage:"",loading:!1},Ce=Object(ye.c)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;return Object(he.a)(e,(function(e){var n=t.payload;switch(t.type){case U:Object.keys(n).forEach((function(t){e[t]=n[t]}));break;case M:Object.keys(e).forEach((function(t){delete e[t]})),Object.assign(e,be);break;case x:e.userSyncException.valueType=n;break;case $:e.userSyncException.field=n;break;case B:e.userSyncException.value=n}}))},providers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;return Object(he.a)(e,(function(e){var n=t.payload;switch(t.type){case G:e.data.length=0,n.forEach((function(t){e.data.find((function(e){return e.uuid===t.uuid}))||e.data.push(t)})),e.loading=!1;break;case Y:e.errorMessage=n,e.loading=!1;break;case W:e.loading=!0;break;case H:e.errorMessage="";break;case K:e.loading=!0;break;case V:e.errorMessage=n,e.loading=!1;break;case z:e.data=n,e.loading=!1;break;case Q:var r=n.uuid;e.data=e.data.filter((function(e){return e.uuid!==r}));break;case Z:e.errorMessage=n;break;case q:e.data.map((function(t,r){t.uuid===n.uuid&&(e.data[r]=n)}))}}))},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;return Object(he.a)(e,(function(e){var n=t.payload;switch(t.type){case k:e.isProviderEditionDialogOpen=!0,e.providerCreateMode=n.createMode;break;case F:e.isProviderEditionDialogOpen=!1;break;case J:e.isProviderDeleteDialogOpen=!0;break;case ee:e.isProviderDeleteDialogOpen=!1}}))}});n.d(t,"i",(function(){return te})),n.d(t,"c",(function(){return ne})),n.d(t,"l",(function(){return ie})),n.d(t,"a",(function(){return re})),n.d(t,"f",(function(){return ae})),n.d(t,"g",(function(){return oe})),n.d(t,"d",(function(){return se})),n.d(t,"h",(function(){return ce})),n.d(t,"b",(function(){return le})),n.d(t,"n",(function(){return ue})),n.d(t,"m",(function(){return de})),n.d(t,"o",(function(){return pe})),n.d(t,"k",(function(){return fe})),n.d(t,"q",(function(){return ge})),n.d(t,"p",(function(){return me})),n.d(t,"e",(function(){return ve})),n.d(t,"j",(function(){return Ce}))},function(e,t,n){"use strict";var r=n(491);n.d(t,"a",(function(){return r.a}));var i=n(129);n.d(t,"b",(function(){return i.a}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=n(3),c=n.n(s),l=n(11),u=n(92),d=n(149),p=n(19),f=n.n(p),g=function(e){var t=e.timeframe,n=e.topics,r=e.ambassadors,i=e.programId,a={};if(void 0!==t){var o=new Date;o.setDate(o.getDate()-t),o.setHours(0),o.setMinutes(0,0,0),a.dateFrom=o.toISOString()}return void 0!==n&&n.length>0&&(a.topicIds=f()(n)),void 0!==r&&r.length>0&&(a.sharerIds=f()(r)),null!=i&&(a.programIds=[i]),a},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;return new Promise((function(i,a){Object(u.n)(g(e),t,r).then((function(e){var r=e.data.items;if(200!==e.status)a(e);else if(r){var o=r.map((function(e){var r=e.attributes.topic;return{id:r.id,metric:e.metrics[t]*n,name:r.name,status:r.status}}));i(o)}else a("TOP TOPICS -- NO ITEMS FOR ".concat(t))})).catch((function(e){return a(e)}))}))},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new Promise((function(r,a){Object(u.m)(g(e),t).then((function(e){var o=e.data.items;if(200!==e.status)a(e);else if(o){var s=o.map((function(e){return i({},e.attributes.shareable_content,{metric:e.metrics[t]*n})}));r(s)}else a("TOP POSTS -- NO ITEMS FOR ".concat(t))})).catch((function(e){return a(e)}))}))},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new Promise((function(r,a){Object(u.l)(g(e),t).then((function(e){var o=e.data.items;if(200!==e.status)a(e);else if(o){var s=o.map((function(e){return i({},e.attributes.sharer,{metric:e.metrics[t]*n})}));r(s)}else a("TOP AMBASSADORS -- NO ITEMS FOR ".concat(t))})).catch((function(e){return a(e)}))}))};n.d(t,"H",(function(){return he})),n.d(t,"x",(function(){return ve})),n.d(t,"L",(function(){return z})),n.d(t,"I",(function(){return V})),n.d(t,"K",(function(){return q})),n.d(t,"J",(function(){return X})),n.d(t,"B",(function(){return J})),n.d(t,"C",(function(){return te})),n.d(t,"D",(function(){return re})),n.d(t,"E",(function(){return ae})),n.d(t,"F",(function(){return se})),n.d(t,"z",(function(){return le})),n.d(t,"G",(function(){return de})),n.d(t,"A",(function(){return fe})),n.d(t,"y",(function(){return me})),n.d(t,"o",(function(){return S})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return _})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return D})),n.d(t,"t",(function(){return w})),n.d(t,"w",(function(){return E})),n.d(t,"v",(function(){return b})),n.d(t,"a",(function(){return C})),n.d(t,"n",(function(){return R})),n.d(t,"k",(function(){return L})),n.d(t,"l",(function(){return P})),n.d(t,"m",(function(){return N})),n.d(t,"b",(function(){return T})),n.d(t,"g",(function(){return j})),n.d(t,"i",(function(){return k})),n.d(t,"h",(function(){return F})),n.d(t,"j",(function(){return U})),n.d(t,"f",(function(){return B})),n.d(t,"d",(function(){return $})),n.d(t,"e",(function(){return x})),n.d(t,"c",(function(){return M})),n.d(t,"u",(function(){return O}));var y="SA/SA_ANALYTICS",E="".concat(y,"/UPDATE_ANALYTICS_FILTER"),b="".concat(y,"/UPDATE_ALL_ANALYTICS_FILTER"),O="".concat(y,"/SINGLE_FETCH_STARTED"),C="".concat(y,"/FETCH_ALL_STARTED"),T="".concat(y,"/FETCH_ALL_TOPS_STARTED"),S="".concat(y,"/ON_GLOBAL_ACTIVE_AMB_RESULTS"),I="".concat(y,"/ON_GLOBAL_NEW_POSTS_RESULTS"),_="".concat(y,"/ON_GLOBAL_TOTAL_SHARES_RESULTS"),A="".concat(y,"/ON_INTERACTIONS_RATE_RESULT"),w="".concat(y,"/ON_INTERACTIONS_TOTAL_LIKES_RESULT"),D="".concat(y,"/ON_INTERACTIONS_TOTAL_COMMENTS_RESULT"),L="".concat(y,"/ON_FETCH_TOP_TOPICS_BY_INTERACTION_RATE_RESULT"),P="".concat(y,"/ON_FETCH_TOP_TOPICS_BY_LIKE_RESULT"),N="".concat(y,"/ON_FETCH_TOP_TOPICS_BY_SHAREABLE_CONTENT_RESULT"),R="".concat(y,"/ON_FETCH_TOP_TOPICS_BY_SHARE_RESULT"),j="".concat(y,"/ON_FETCH_TOP_POSTS_BY_COMMENTS_RESULT"),k="".concat(y,"/ON_FETCH_TOP_POSTS_BY_LIKES_RESULT"),F="".concat(y,"/ON_FETCH_TOP_POSTS_BY_INTERACTIONS_RESULT"),U="".concat(y,"/ON_FETCH_TOP_POSTS_BY_SHARES_RESULT"),M="".concat(y,"/ON_FETCH_TOP_AMBASSADORS_BY_COMMENTS_RESULT"),x="".concat(y,"/ON_FETCH_TOP_AMBASSADORS_BY_LIKES_RESULT"),$="".concat(y,"/ON_FETCH_TOP_AMBASSADORS_BY_INTERACTIONS_RESULT"),B="".concat(y,"/ON_FETCH_TOP_AMBASSADORS_BY_SHARES_RESULT"),W="share_created_count",G="share_interaction_rate",Y="share_like_count",H="share_comment_count",K="shareable_content_created_count",V=function(e){return{type:b,values:e}},z=function(e,t){return{key:e,type:E,value:t}},q=function(){return{type:C}},X=function(){return{type:T}},Q=function(e){return{target:e,type:O}},Z=function(e){return function(t,n){var r=n(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;switch(e){case W:h(i,W).then((function(e){t({entries:e,type:B})})).catch((function(){t({error:!0,type:B})}));break;case G:h(i,G).then((function(e){t({entries:e,type:$})})).catch((function(){t({error:!0,type:$})}));break;case Y:h(i,Y).then((function(e){t({entries:e,type:x})})).catch((function(){t({error:!0,type:x})}));break;case H:h(i,H).then((function(e){t({entries:e,type:M})})).catch((function(){t({error:!0,type:M})}))}}},J=function(e,t){return function(n){n(Q(t)),n(Z(e))}},ee=function(e){return function(t,n){var r=n(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;switch(e){case W:v(i,W).then((function(e){t({entries:e,type:U})})).catch((function(){t({error:!0,type:U})}));break;case G:v(i,G).then((function(e){t({entries:e,type:F})})).catch((function(){t({error:!0,type:F})}));break;case Y:v(i,Y).then((function(e){t({entries:e,type:k})})).catch((function(){t({error:!0,type:k})}));break;case H:v(i,H).then((function(e){t({entries:e,type:j})})).catch((function(){t({error:!0,type:j})}))}}},te=function(e,t){return function(n){n(Q(t)),n(ee(e))}},ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return function(r,i){var a=i(),o=a.socialAdvocacy.saAnalytics.currentSAFilters,s=t||o;switch(e){case W:m(s,W,1,n).then((function(e){r({entries:e,type:R})})).catch((function(){r({error:!0,type:R})}));break;case G:m(s,G,100,n).then((function(e){r({entries:e,type:L})})).catch((function(){r({error:!0,type:L})}));break;case Y:m(s,Y,1,n).then((function(e){r({entries:e,type:P})})).catch((function(){r({error:!0,type:P})}));break;case K:m(s,K,1,n).then((function(e){r({entries:e,type:N})})).catch((function(){r({error:!0,type:N})}))}}},re=function(e,t,n,r){return function(i){i(Q(t)),i(ne(e,n,r))}},ie=function(){return function(e,t){var n,r=t(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;(n=i,new Promise((function(e,t){Object(u.o)(g(n)).then((function(n){if(200===n.status){var r=n.data.metrics,i=r.share_comment_count,a=[[Object(d.m)(r.share_comment_count_by_shareable_content,2)],[Object(d.m)(r.share_comment_count_by_creator,2)]];e({infoDetails:a,value:i})}else t(n)})).catch((function(e){return t(e)}))}))).then((function(t){e(o({type:D},t))})).catch((function(){e({error:!0,type:D})}))}},ae=function(){return function(e){e(Q("totalComments")),e(ie())}},oe=function(){return function(e,t){var n,r=t(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;(n=i,new Promise((function(e,t){Object(u.p)(g(n)).then((function(n){if(200===n.status){var r=n.data.metrics,i=r.share_like_count,a=[[Object(d.m)(r.share_like_count_by_shareable_content,2)],[Object(d.m)(r.share_like_count_by_creator,2)]];e({infoDetails:a,value:i})}else t(n)})).catch((function(e){return t(e)}))}))).then((function(t){e(o({type:w},t))})).catch((function(){e({error:!0,type:w})}))}},se=function(){return function(e){e(Q("totalLikes")),e(oe())}},ce=function(){return function(e,t){var n,r=t(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;(n=i,new Promise((function(e,t){Object(u.g)(g(n)).then((function(n){if(200===n.status){var r=n.data.metrics,i=100*r.share_interaction_rate,a=[[r.share_interaction_count]];e({infoDetails:a,value:i})}else t(n)})).catch((function(e){return t(e)}))}))).then((function(t){e(o({type:A},t))})).catch((function(){e({error:!0,type:A})}))}},le=function(){return function(e){e(Q("interactionRate")),e(ce())}},ue=function(){return function(e,t){var n,r=t(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;(n=i,new Promise((function(e,t){Object(u.q)(g(n)).then((function(n){if(200===n.status){var r=n.data.metrics,i=r.share_created_count,a=[[r.share_created_count],[Object(d.m)(r.share_created_count_by_creator,2)]];e({infoDetails:a,value:i})}else t(n)})).catch((function(e){return t(e)}))}))).then((function(t){e(o({type:_},t))})).catch((function(){e({error:!0,type:_})}))}},de=function(){return function(e){e(Q("totalShares")),e(ue())}},pe=function(){return function(e,t){var n,r=t(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;(n=i,new Promise((function(e,t){Object(u.h)(g(n)).then((function(n){if(200===n.status){var r=n.data.metrics,i=r.shareable_content_created_count;e({infoDetails:[],value:i})}else t(n)})).catch((function(e){return t(e)}))}))).then((function(t){e(o({type:I},t))})).catch((function(){e({error:!0,type:I})}))}},fe=function(){return function(e){e(Q("newSocialPost")),e(pe())}},ge=function(){return function(e,t){var n,r=t(),i=r.socialAdvocacy.saAnalytics.currentSAFilters;(n=i,new Promise((function(e,t){Object(u.d)(g(n)).then((function(n){if(200===n.status){var r=n.data.metrics,i=100*r.sharer_rate,a=[[r.sharer_count,r.user_count]];e({infoDetails:a,value:i})}else t(n)})).catch((function(e){return t(e)}))}))).then((function(t){e(o({type:S},t))})).catch((function(){e({error:!0,type:S})}))}},me=function(){return function(e){e(Q("activeAmbassadors")),e(ge())}},ve=function(e){return function(t){Object(l.batch)((function(){t(ue()),t((function(e){var t=[W];t.forEach((function(t){e(ne(t))}))})),t((function(e){var t=[W];t.forEach((function(t){e(ee(t))}))})),t((function(e){var t=[W];t.forEach((function(t){e(Z(t))}))})),e&&(t(ge()),t(pe()))}))}},he=function(e,t){return function(n){n(V({programId:e})),Object(l.batch)((function(){n(q()),n(ve(t))}))}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return"".concat(g()(v()(e))).concat(".lum")}var o=n(6),s=n.n(o),c=n(10),l=n.n(c),u=n(231),d=n(17),p=n.n(d),f=n(544),g=n.n(f),m=n(405),v=n.n(m),h=n(42),y=n(70),E=n(192),b=n(186),O=n(57),C=n(3),T=n.n(C),S=n(93),I=new u.b.Entity("extensions",{},{processStrategy:function(e){var t=[],n=e.components;n.forEach((function(e){var n={areSettingsLoading:!1,component:void 0,error:null,isComponentLoading:!1,settings:void 0,type:e};t.push(n)}));var r={areSettingsLoading:!1,component:void 0,error:null,isComponentLoading:!1,settings:void 0,type:S.b.internal_settings};return t.push(r),i({},e,{components:t,installed:e.version,loading:!1})}}),_=new u.b.Object({items:[I]}),A=new u.b.Entity("providers",{extensions:_},{processStrategy:function(e){if(!e.bundle)return e;var t={areSettingsLoading:!1,component:void 0,error:null,isComponentLoading:!1,settings:void 0,type:S.b.provider_settings};return i({},e,{providerSettingsComponent:t})}}),w=new u.b.Object({items:[A]}),D=n(379),L=n(62);n.d(t,"l",(function(){return P})),n.d(t,"g",(function(){return N})),n.d(t,"k",(function(){return R})),n.d(t,"b",(function(){return j})),n.d(t,"i",(function(){return k})),n.d(t,"f",(function(){return F})),n.d(t,"j",(function(){return U})),n.d(t,"a",(function(){return M})),n.d(t,"o",(function(){return x})),n.d(t,"e",(function(){return G})),n.d(t,"h",(function(){return Y})),n.d(t,"d",(function(){return W})),n.d(t,"c",(function(){return B})),n.d(t,"m",(function(){return H})),n.d(t,"n",(function(){return K})),n.d(t,"p",(function(){return $}));var P=function(){return function(e){e(O.a.resetMarketplaceState())}},N=function(){return function(){var e=l()(s.a.mark((function e(t,n){var r,i,a,o,c,l,d,p,f,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.a.setIsLoadingMoreProviders(!0)),r=Object(L.k)(n()),i=Object(L.m)(n()),a=Object(E.b)(n()),e.prev=4,e.next=7,b.g(r,a,i);case 7:o=e.sent,c=o.data,l=Object(u.a)(c,w),d=l.entities,p=l.result,f=d.extensions,g=d.providers,t(O.a.addExtensions(f)),t(O.a.addProviders(g)),t(O.a.addPlatformExtensionsSettingsProviders(p)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),t(Object(h.b)({translate:"GLOBAL.ERROR"})),t(O.a.addPlatformExtensionsSettingsProviders({cursor:void 0,more:!1,items:[]}));case 20:return e.prev=20,t(O.a.setIsLoadingMoreProviders(!1)),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,16,20,23]])})));return function(t,n){return e.apply(this,arguments)}}()},R=function(e){return function(t){t(O.a.openProviderSetup({providerId:e}))}},j=function(){return function(e){e(O.a.closeProviderSetup())}},k=function(e){return function(){var t=l()(s.a.mark((function t(n,r){var i,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(L.k)(r()),t.prev=1,n(O.a.setProviderSettingsLoading({providerId:e,loading:!0})),t.next=5,b.f({providerId:e,organizationId:i});case 5:a=t.sent,o=a.data,n(O.a.setProviderSettings({settings:o,providerId:e})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n(Object(h.b)({translate:"GLOBAL.ERROR"}));case 13:return t.prev=13,n(O.a.setProviderSettingsLoading({providerId:e,loading:!1})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e,n){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=l()(s.a.mark((function t(n,r){var i,a,o,c,l,d,p,f,g;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O.a.setIsLoadingMoreExtensions({providerId:e,loading:!0})),i=Object(L.k)(r()),a=Object(E.b)(r()),o=Object(L.e)(r(),{providerId:e}),t.prev=4,t.next=7,b.e({organizationId:i,providerId:e},a,o);case 7:c=t.sent,l=c.data,d=Object(u.a)(l,_),p=d.entities,f=d.result,g=p.extensions,n(O.a.addExtensions(g)),n(O.a.addProviderExtensions({providerId:e,extensions:f})),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),n(Object(h.b)({translate:"GLOBAL.ERROR"})),n(O.a.addProviderExtensions({providerId:e,extensions:{cursor:void 0,more:!1,items:[]}}));case 19:return t.prev=19,n(O.a.setIsLoadingMoreExtensions({providerId:e,loading:!1})),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[4,15,19,22]])})));return function(e,n){return t.apply(this,arguments)}}()},U=function(e){return function(t){t(O.a.openExtensionSetup({extensionId:e}))}},M=function(){return function(e){e(O.a.closeExtensionSetup())}},x=function(e){return function(){var t=l()(s.a.mark((function t(n,r){var i,a,o,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r(),a=Object(L.f)(i,{extensionId:e}),o=a.enabled,c=Object(L.k)(i),n(O.a.setExtensionLoading({extensionId:e})),t.prev=4,t.next=7,b.a({enable:!o,extensionId:e,organizationId:c});case 7:n(O.a.toggleExtension({extensionId:e})),l=o?"ADMIN.MARKETPLACE.EXTENSION.DEACTIVATED":"ADMIN.MARKETPLACE.EXTENSION.ACTIVATED",n(Object(h.d)({translate:l})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),n(Object(h.b)({translate:"GLOBAL.ERROR"}));case 15:return t.prev=15,n(O.a.setExtensionLoading({extensionId:e,loading:!1})),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[4,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}()},$=function(e){return function(){var t=l()(s.a.mark((function t(n,r){var i,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r(),a=Object(L.k)(i),t.prev=2,n(O.a.setExtensionLoading({extensionId:e})),t.next=6,b.j({organizationId:a,extensionId:e});case 6:n(O.a.removeExtension({extensionId:e})),n(Object(h.d)({translate:"ADMIN.MARKETPLACE.EXTENSION.UNINSTALLED"})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),n(Object(h.b)({translate:"GLOBAL.ERROR"})),n(O.a.setExtensionLoading({extensionId:e,loading:!1}));case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()},B=function(e){return function(){var t=l()(s.a.mark((function t(n,r){var i,a,o,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(L.k)(r()),n(O.a.setExtensionAdminSettingsLoading({extensionId:e,loading:!0})),t.prev=2,t.next=5,b.b({extensionId:e,organizationId:i});case 5:a=t.sent,o=a.data,c=a.status,l=o,204===c&&(l={global:null,internal:{}}),l.internal||(l.internal={}),n(O.a.setExtensionAdminSettings({settings:l,extensionId:e})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),n(O.a.setExtensionAdminSettings({settings:{global:null,internal:{}},extensionId:e})),n(Object(h.b)({translate:"GLOBAL.ERROR"}));case 18:return t.prev=18,n(O.a.setExtensionAdminSettingsLoading({extensionId:e,loading:!1})),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,14,18,21]])})));return function(e,n){return t.apply(this,arguments)}}()},W=function(){return function(){var e=l()(s.a.mark((function e(t,n){var r,i,a,o,c,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(y.a)("platform-extensions")(n())){e.next=16;break}return r=Object(L.k)(n()),i=Object(E.b)(n()),e.prev=3,e.next=6,b.d(r,i);case 6:a=e.sent,o=a.data,c=Object(u.a)(o,_),l=c.entities,d=l.extensions,t(O.a.addExtensions(d)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}()},G=function(e,t){return function(n,r){n(O.a.setComponentLoading({isLoading:!0,extensionId:t,componentType:e}));var i=Object(L.f)(r(),{extensionId:t});if(i){var o=i.id,s=i.extensionOldId,c=i.version,l=c.bundle,u=Object(D.a)(),d=Object(L.b)(r(),{extensionId:o,componentType:e});u.endpointsMap[o]||u.addEndpoint({endpointName:o,endpointUrl:l});var f,g=a(e);s&&d?(g="".concat(s,"?uid=").concat(Date.now()),f=d.name):(p()(o,".mdr")||p()(o,".lum"))&&d&&(g="".concat(o,"?uid=").concat(Date.now()),f=d.name),u.load({endpointName:i.id,identifier:g,selector:f}).then((function(r){n(O.a.setComponent({extensionComponent:r,extensionId:t,componentType:e})),n(O.a.setComponentLoading({isLoading:!1,extensionId:t,componentType:e}))})).catch((function(r){n(O.a.setComponentError({error:r,extensionId:t,componentType:e})),n(O.a.setComponentLoading({isLoading:!1,extensionId:t,componentType:e}))}))}else n(O.a.setComponentLoading({isLoading:!1,extensionId:t,componentType:e})),n(O.a.setComponentError({error:S.a.UNKNOWN_EXTENSION,extensionId:t,componentType:e}))}},Y=function(e,t){return function(n,r){n(O.a.setProviderComponentLoading({isLoading:!0,providerId:t,componentType:e}));var i=Object(L.n)(r(),{providerId:t});if(i){var o=i.bundle,s=i.id,c=Object(D.a)();c.endpointsMap[s]||c.addEndpoint({endpointName:s,endpointUrl:o}),Object(D.a)().load({endpointName:i.id,identifier:a(e)}).then((function(r){n(O.a.setProviderComponent({extensionComponent:r,providerId:t,componentType:e})),n(O.a.setProviderComponentLoading({isLoading:!1,providerId:t,componentType:e}))})).catch((function(r){n(O.a.setProviderComponentLoading({isLoading:!1,providerId:t,componentType:e})),n(O.a.setProviderComponentError({error:r,providerId:t,componentType:e}))}))}else n(O.a.setProviderComponentLoading({isLoading:!1,providerId:t,componentType:e})),n(O.a.setProviderComponentError({error:S.a.UNKNOWN_EXTENSION,providerId:t,componentType:e}))}},H=function(e){return function(){var t=l()(s.a.mark((function t(n,r){var i,a,o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r(),a=Object(L.k)(i),o=Object(L.g)(i),c=o.extensionId,t.prev=3,!c){t.next=8;break}return t.next=7,b.k({settings:e,extensionId:c,organizationId:a});case 7:n(O.a.setExtensionAdminSettings({settings:e,extensionId:c}));case 8:n(O.a.closeExtensionSetup()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),n(Object(h.b)({translate:"GLOBAL.ERROR"}));case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n){return t.apply(this,arguments)}}()},K=function(e){return function(){var t=l()(s.a.mark((function t(n,r){var i,a,o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r(),a=Object(L.k)(i),o=Object(L.o)(i),c=o.providerId,t.prev=3,!c){t.next=7;break}return t.next=7,b.l({settings:e,providerId:c,organizationId:a});case 7:n(O.a.closeProviderSetup()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),n(Object(h.b)({translate:"GLOBAL.ERROR"}));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n){return t.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return S})),n.d(t,"e",(function(){return I})),n.d(t,"d",(function(){return C}));var a,o,s=n(19),c=n.n(s),l=n(3),u=n.n(l),d=n(43),p=n(7),f=n.n(p),g=n(144),m=n.n(g),v=n(220),h=n(268),y=n(146),E=n.n(y),b=n(672),O=n.n(b);!function(e){e.initial="initial",e.loading="loading",e.loadingMore="loadingMore",e.loaded="loaded",e.error="error"}(a||(a={})),function(e){e.initial="initial",e.added="added",e.updated="updated",e.deleted="deleted"}(o||(o={}));var C={added:[],updated:[],deleted:[],orderedVisibleMemberIds:[],membershipDictionary:{},fetchMembershipStatus:a.initial,more:!1,cursor:"",savedManagersCount:0},T=Object(d.a)({domain:"ProgramForm/ProgramMembershipForm",initialState:C,reducers:{setExistingMembership:function(e,t){f()(e,"membershipDictionary",t.payload)},setFetchMembershipStatus:function(e,t){f()(e,"fetchMembershipStatus",t.payload)},setSavedManagersCount:function(e,t){f()(e,"savedManagersCount",t.payload)},setPaginationInfo:function(e,t){f()(e,"more",t.payload.more),f()(e,"cursor",t.payload.cursor)},addUserMembership:function(e,t){var n=i({},t.payload,{id:t.payload.id.toString()}),r=e.membershipDictionary[n.id],a=v.a.ambassador;void 0===r?(f()(e,"membershipDictionary",i({},e.membershipDictionary,u()({},n.id,{id:n.id,fullName:n.fullName,role:n.role||a,profilePictureUrl:Object(h.b)(n),jobTitle:n.jobTitle,status:o.added}))),f()(e,"added",O()([].concat(c()(e.added),[{userId:n.id,role:n.role||a}]),"userId"))):(null==r?void 0:r.status)===o.deleted&&(m()(e.deleted,(function(e){var t=e.userId;return t===n.id})),r.role=a,r.initialRole===r.role?(r.status=o.initial,m()(e.updated,(function(e){return e.userId===n.id}))):(r.status=o.updated,f()(e,"updated",[].concat(c()(e.updated),[{userId:n.id,role:r.role}]))))},editUserMembership:function(e,t){var n=t.payload,r=n.userId,i=n.role,a=e.membershipDictionary[r];if(a.status===o.added){a.role=i;var s=e.added.find((function(e){return e.userId===r}));s&&(s.role=i)}else a.status===o.initial&&a.initialRole!==i?(a.status=o.updated,a.role=i,f()(e,"updated",[].concat(c()(e.updated),[{userId:r,role:i}]))):a.status===o.updated&&a.initialRole===i&&(a.status=o.initial,a.role=i,m()(e.updated,(function(e){return e.userId===r})))},deleteUserMembership:function(e,t){var n=t.payload,r=e.membershipDictionary[n];r.status===o.added?(delete e.membershipDictionary[n],m()(e.added,(function(e){return e.userId===n}))):r.status!==o.updated&&r.status!==o.initial||(r.status===o.updated&&m()(e.updated,(function(e){return e.userId===n})),r.status=o.deleted,f()(e,"deleted",[{userId:n}].concat(c()(e.deleted))))},setOrderedVisibleMemberIds:function(e,t){f()(e,"orderedVisibleMemberIds",t.payload)},addOrderedVisibleMemberIds:function(e,t){f()(e,"orderedVisibleMemberIds",E()([t.payload].concat(c()(e.orderedVisibleMemberIds))))},reset:function(){return C}}}),S=T.actions,I=T.reducer},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var r=n(7),i=n.n(r),a=n(77),o=n(43),s=n(126),c=n(41),l=n.n(c),u=n(34),d=n(132),p=Object(o.a)({domain:"post",initialState:{editedPost:{},entities:{},saving:!1,isPostDialogOpen:!1},reducers:{openDialog:function(e){i()(e,"isPostDialogOpen",!0)},closeDialog:function(e){i()(e,"isPostDialogOpen",!1),i()(e,"editedPost",{})},updatePost:function(e,t){var n=Object(s.a)(e.entities[t.payload.postId],t.payload.post);i()(e,["entities",t.payload.postId],n)},setEditedPost:function(e,t){var n=t.payload;if(n.postType===d.b.EVENT){var r=l()().minutes(l()().minutes()>=u.d?u.d:0).utc().local().format(u.c);n.eventStartDate=n.eventStartDate||r,n.eventEndDate=n.eventEndDate||l()(n.eventStartDate).add(1,"hour").format(u.c)}Object(s.a)(e.editedPost,n),n.content&&i()(e,["editedPost","content"],n.content),n.title&&i()(e,["editedPost","title"],n.title)},savePostRequest:function(e){i()(e,"saving",!0)},savePostSuccess:function(e){i()(e,"editedPost",{}),i()(e,"isPostDialogOpen",!1),i()(e,"saving",!1)},savePostError:function(e){i()(e,"saving",!1)}}}),f=p.actions,g=p.reducer,m=Object(a.c)({root:g})},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return r}));var r,i={ALREADY_EXISTS:"FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.ADD_CONTENT_URL.ALREADY_EXISTS",INVALID_URL:"FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.ADD_CONTENT_URL.INVALID_URL",MISSING_URL:"FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.ADD_CONTENT_URL.MISSING_URL",URL_NOT_FOUND:"FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.ADD_CONTENT_URL.URL_NOT_FOUND"},a={SUBMIT_ERROR:"FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.SUBMIT.ERROR",VALIDATION_ERROR:"FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.VALIDATION.ERROR",SUBMIT_SUCCESS:"FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.SUBMIT.SUCCESS"},o=["image/png","image/jpg","image/jpeg"],s=4,c=5e6;!function(e){e.initial="initial",e.loading="loading",e.success="success",e.failure="failure"}(r||(r={}))},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return b}));var i=n(19),a=n.n(i),o=n(3),s=n.n(o),c=n(18),l=n.n(c),u=n(43),d=n(126),p=n(39),f=n(7),g=n.n(f),m=n(155),v=n.n(m),h={content:"",files:[],images:[],links:[],text:[{type:p.Body.displayName,children:[{text:""}]}],parent:"",mentions:[],isEditorVisible:!0},y=Object(u.a)({domain:"comment",initialState:{commentEditors:{},currentEditor:{},commentListByContent:{}},reducers:{setCurrentEditor:function(e,t){g()(e,"currentEditor",t.payload)},setEditedComment:function(e,t){var n=t.payload,r=n.text,i=l()(n,["text"]),a=t.payload,o=a.content,s=a.parent;if(o){var c,u,p,f,m,v=null===(c=e.commentEditors[o])||void 0===c?void 0:c.editor;if(s)if(i.id)v=null===(u=e.commentEditors[o])||void 0===u||null===(p=u.repliesEditors[s])||void 0===p?void 0:p.editionEditors[i.id];else v=null===(f=e.commentEditors[o])||void 0===f||null===(m=f.repliesEditors[s])||void 0===m?void 0:m.editor;else i.id&&(v=e.commentEditors[o].commentsEditors[i.id]);if(Object(d.a)(v,i),r){var h=["commentEditors",o,"editor","text"];s?h=i.id?["commentEditors",o,"repliesEditors",s,"editionEditors",i.id,"text"]:["commentEditors",o,"repliesEditors",s,"editor","text"]:i.id&&(h=["commentEditors",o,"commentsEditors",i.id,"text"]),g()(e,h,r)}}},setEditedCommentSaving:function(e,t){var n=t.payload,r=n.content,i=n.isSaving,a=e.commentEditors[r];a&&(a.isSaving=i)},initEditor:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h,{},t.payload),i=t.payload,a=i.content,o=i.parent,c=i.id;a&&(o?c?g()(e,["commentEditors",a,"repliesEditors",o,"editionEditors"],s()({},c,n)):g()(e,["commentEditors",a,"repliesEditors",o],{editor:n}):c?g()(e,["commentEditors",a,"commentsEditors"],s()({},c,n)):g()(e,["commentEditors",a],{editor:n,repliesEditors:{}}))},setCommentList:function(e,t){var n=t.payload,r=n.contentCommentState,i=n.contentId,a=e.commentListByContent[i];Object(d.a)(a,r)},initComments:function(e,t){var n=t.payload,r=n.contentCommentState,i=n.contentId;g()(e,["commentListByContent",i],r)},updateComment:function(e,t){var n,r=t.payload,i=r.contentId,a=r.parentId,o=r.commentId,s=r.comment,c=a?null===(n=e.commentListByContent[i].commentsEntities[a].replies)||void 0===n?void 0:n.find((function(e){return e.uid===o})):e.commentListByContent[i].commentsEntities[o].comment;c&&Object(d.a)(c,s)},updateMultipleComments:function(e,t){var n=t.payload,r=n.contentId,i=n.parentId,a=n.commentsIds,o=n.comment;v()(a,(function(t){var n,a=i?null===(n=e.commentListByContent[r].commentsEntities[i].replies)||void 0===n?void 0:n.find((function(e){return e.uid===t})):e.commentListByContent[r].commentsEntities[t].comment;a&&Object(d.a)(a,o)}))},updateCommentStatus:function(e,t){var n=t.payload,r=n.contentId,i=n.commentId,a=n.status,o=e.commentListByContent[r].commentsEntities[i];o&&Object(d.a)(o,a)},updateCommentReplies:function(e,t){var n=t.payload,r=n.contentId,i=n.commentId,o=n.replies,s=n.add,c=e.commentListByContent[r].commentsEntities[i];g()(c,"replies",s?[].concat(a()(c.replies),a()(o)):o)}}}),E=y.actions,b=y.reducer},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return g})),n.d(t,"m",(function(){return m})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return h})),n.d(t,"u",(function(){return y})),n.d(t,"p",(function(){return E})),n.d(t,"q",(function(){return T})),n.d(t,"r",(function(){return S})),n.d(t,"s",(function(){return I})),n.d(t,"t",(function(){return _})),n.d(t,"v",(function(){return A})),n.d(t,"z",(function(){return w})),n.d(t,"w",(function(){return b})),n.d(t,"x",(function(){return O})),n.d(t,"y",(function(){return C})),n.d(t,"A",(function(){return D})),n.d(t,"B",(function(){return L}));var r="tasks/INIT_STATE",i="tasks/SET_IS_MYTASKS_CHECKEDITEMSDISPLAYED",a="tasks/SET_ISFILTEREDBYLATETASKS",o="tasks/SET_ISFILTEREDBYREMINDERTASKS",s="tasks/SET_ISFILTEREDBYTODAYTASKS",c="tasks/SET_ISLOADING",l="tasks/SET_ISORDEREDBYDUEDATEDESC",u="tasks/SET_SELECTEDTASKS",d="tasks/SET_FILTEREDTASKS",p="tasks/SET_MYTASKS_NEWTODO",f="tasks/SET_MYTASKS_TODOITEMS",g="tasks/SET_MYTASKS_USERCONTENTWIDGET",m="tasks/SET_TASKS",v="tasks/UPDATE_TASK",h=function(e){return function(t){t({payload:e,type:r})}},y=function(e){return function(t){t({payload:e,type:i})}},E=function(e){return function(t){t({payload:e,type:d})}},b=function(e){return function(t){t({payload:e,type:p})}},O=function(e){return function(t){t({payload:e,type:f})}},C=function(e){return function(t){t({payload:e,type:g})}},T=function(e){return function(t){t({payload:e,type:a})}},S=function(e){return function(t){t({payload:e,type:o})}},I=function(e){return function(t){t({payload:e,type:s})}},_=function(e){return function(t){t({payload:e,type:c})}},A=function(e){return function(t){t({payload:e,type:l})}},w=function(e){return function(t){t({payload:e,type:u})}},D=function(e){return function(t){t({payload:e,type:m})}},L=function(e){return function(t){t({payload:e,type:v})}}},function(e,t,n){"use strict";function r(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(82),i=n.n(r),a=n(109),o=n.n(a),s=n(402),c=n.n(s),l=function e(t,n){return!i()(t)&&o()(t)&&!i()(n)&&o()(n)?c()(t,n,e):n}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"p",(function(){return Te})),n.d(t,"o",(function(){return Se})),n.d(t,"m",(function(){return Ee})),n.d(t,"r",(function(){return fe})),n.d(t,"n",(function(){return ue})),n.d(t,"t",(function(){return ce})),n.d(t,"w",(function(){return ge})),n.d(t,"x",(function(){return me})),n.d(t,"s",(function(){return ye})),n.d(t,"y",(function(){return de})),n.d(t,"z",(function(){return pe})),n.d(t,"v",(function(){return be})),n.d(t,"u",(function(){return Oe})),n.d(t,"q",(function(){return Ce})),n.d(t,"b",(function(){return F})),n.d(t,"k",(function(){return U})),n.d(t,"h",(function(){return M})),n.d(t,"a",(function(){return x})),n.d(t,"g",(function(){return $})),n.d(t,"f",(function(){return B})),n.d(t,"l",(function(){return W})),n.d(t,"j",(function(){return G})),n.d(t,"i",(function(){return Y})),n.d(t,"c",(function(){return H})),n.d(t,"e",(function(){return K})),n.d(t,"d",(function(){return V}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(19),u=n.n(l),d=n(3),p=n.n(d),f=n(11),g=n(27),m=n.n(g),v=n(4),h=n.n(v),y=n(71),E=n.n(y),b=n(410),O=n.n(b),C=n(262),T=n(384),S=n(5),I=n(35),_=n(36),A=n(68),w=n(92),D=n(120),L=n(90),P=n(116),N=n(164),R=n(102),j=n(607),k=n(96),F="SA/SHAREABLE_WORKFLOW",U="".concat(F,"/TOGGLE_OPEN_WORKFLOW"),M=("".concat(F,"/UPDATE_WORKFLOW"),"".concat(F,"/SET_SELECT_OPEN"),"".concat(F,"/SET_SELECT_SEARCH"),"".concat(F,"/SET_CONTENT_PREVIEW")),x="".concat(F,"/CLEAR_CONTENT_PREVIEW"),$=("".concat(F,"/SET_FORM_FIELD_ERROR"),"".concat(F,"/RESET_WORKFLOW_FORM")),B="".concat(F,"/ON_FETCH_MOST_USED_TOPICS_RESULT"),W="".concat(F,"/TOGGLE_WORKFLOW_PREVIEW"),G="".concat(F,"/SET_PREVIEW_TAB"),Y=("".concat(F,"/SET_CONTENT_TYPE"),"".concat(F,"/SET_INCOMPATIBLE_SOCIAL_NETWORKS")),H="".concat(F,"/FETCH_SOCIAL_NETWORKS"),K="".concat(F,"/FETCH_SOCIAL_NETWORKS_SUCCESS"),V="".concat(F,"/FETCH_SOCIAL_NETWORKS_FAILURE"),z="".concat(F,"/FETCH_TOPICS"),q="".concat(F,"/FETCH_TOPICS_SUCCESS"),X="".concat(F,"/FETCH_TOPICS_FAILURE"),Q=Object(j.b)(F),Z=Q.setFormFieldError,J=Q.setFormFieldValue,ee=Q.setFormFieldMeta,te=Q.resetForm,ne=Q.setFormFieldValues,re=function(e){var t=h()(e,"resolvedSocialNetworks",[]),n=t.reduce((function(e,t){var n=t.socialNetworkId,r=t.suggestedComment;return i({},e,{customizedMessages:!(null==r?void 0:r.value)||O()(null==r?void 0:r.value)?e.customizedMessages:i({},e.customizedMessages,p()({},n,r.value))})}),{customizedMessages:{}});return{commonMessage:h()(e,"suggestedComment.value",""),contentTitle:h()(e,"title.value"),contentUrl:h()(e,"contentShareableUrl.value"),customizedMessages:n.customizedMessages,id:h()(e,"id"),images:h()(e,"mediaList",[]).map((function(e){var t=e.url,n=e.type;return{id:Object(I.b)(),type:n,url:t}})),sameMessage:!O()(e.suggestedComment),shareableOn:n.shareableOn,topics:h()(e,"topics",[]),type:h()(e,"type",R.d.link)}},ie=function(e){var t,n,r,i,a,o,s,c=h()(e,"sameMessage.value",!0),l=h()(e,"commonMessage.value",""),u=h()(e,"customizedMessages.value",{}),d=h()(e,"type.value",R.d.link),p=h()(e,"shareableOn.value",{}),f={suggestedComment:c&&l?{translations:{en:l}}:null,socialNetworks:Object.keys(p).map((function(e){var t=p[e];return{socialNetworkId:e,suggestedComment:m()(u[e])?null:{translations:{en:u[e]}},sharingEnabled:t}})),topicIds:(null==e||null===(t=e.topics)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.length)>0&&(null==e||null===(r=e.topics)||void 0===r?void 0:r.value.map((function(e){return e.id})))||[],type:d,customTitle:d===R.d.images&&(null==e||null===(i=e.contentTitle)||void 0===i?void 0:i.value)?{translations:{en:e.contentTitle.value}}:null,mediaUrls:d===R.d.images&&(null==e||null===(a=e.images)||void 0===a||null===(o=a.value)||void 0===o?void 0:o.length)>0?e.images.value.map((function(e){var t=e.url;return t})):[],linkUrl:d===R.d.link&&(null==e||null===(s=e.contentUrl)||void 0===s?void 0:s.value)?{translations:{en:e.contentUrl.value}}:null};return f},ae=function(e){return function(t){var n=e.reduce((function(e,t){var n=t.code,r=t.metadata,a=w.a[n],o=e[r.social_network_id]||[];return i({},e,p()({},r.social_network_id,a?[].concat(u()(o),[a]):o))}),{});Object.keys(n).forEach((function(e){0===n[e].length&&(n[e][0]="FRONT.SOCIAL_ADVOCACY.SHAREABLE_CONTENT.CONTENT_TYPE_NOT_SUPPORTED")})),t({payload:n,type:Y})}},oe=function(){return function(){var e=c()(o.a.mark((function e(t,n){var r,a,s,c,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(A.g)("VALIDATE_SHAREABLE_CONTENT")),e.prev=1,r=n(),a=Object(L.r)(r),s=Object(L.m)(r),c=ie(a),l=i({},c,{programId:s,socialNetworks:c.socialNetworks.map((function(e){return i({},e,{sharingEnabled:!0})}))}),e.next=9,Object(w.v)(l);case 9:t(ae([])),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),u=h()(e.t0,"response.data.errors",[]),d=u.filter((function(e){var t=e.metadata;return h()(t,"social_network_id")})),t(ae(d));case 17:return e.abrupt("return",t(Object(A.d)("VALIDATE_SHAREABLE_CONTENT")));case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()},se=E()((function(e){e(oe())}),500),ce=function(e,t){return function(n){var r=["type","images"];Object(f.batch)((function(){n(J(e,t)),r.includes(e)&&k.e.selectSNForShareableContent&&se(n)}))}},le=function(e){return function(t){var n=re(e);Object(f.batch)((function(){t(ne(n)),e&&h()(e,"link")&&t({payload:{description:h()(e,"link.description.value"),imageUrl:h()(e,"link.imageUrl.value"),title:h()(e,"link.contentTitle.value"),url:h()(e,"link.shareableUrl.value")},type:M})}))}},ue=function(e){return function(t){var n={dataTo:(new Date).toISOString(),programId:e};t(Object(P.D)("shareable_content_created_count","topic.shareable",n,50))}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=c()(o.a.mark((function n(r){var i,a,s,c,l,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.shareableContent,a=void 0!==i&&i,s=t.contentId,c=void 0!==s&&s,l=t.programId,u=void 0===l?null:l,r({contentId:c,programId:u,isWorkflowOpen:e,shareableContent:a,type:U}),e&&r(le(a));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},pe=function(e){return{payload:e,type:W}},fe=function(){return function(e){Object(f.batch)((function(){e(te()),e({type:$})}))}},ge=function(e,t){return function(n){return n(ee(e,"isOpen",t))}},me=function(e,t){return function(n){return n(ee(e,"searchText",t))}},ve=function(e,t){return function(n){var r=e.includes("localhost")?e:function(e){return e.match(/http(s?):\/\/[-a-zA-Z0-9:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9:%_+.~#?&/=]*)/g)||[]}(e)[0];r?(n(Z("contentUrl",!1)),n(function(e,t){return function(){var n=c()(o.a.mark((function n(r,i){var a,s,c,l,u,d,p,f,g;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Object(A.g)("GET_CONTENT_PREVIEW")),n.prev=1,a=i(),s=Object(L.m)(a),n.next=6,Object(w.r)({url:e,contentId:t,programId:s});case 6:c=n.sent,l=c.data,l.canBeMadeShareable?l.shareable&&!t?r(Z("contentUrl",!0,D.b.ALREADY_EXISTS)):(u=l.meta,d=u.url,p=u.description,f=u.title,g=u.imageUrl,r({payload:{description:p,imageUrl:g,title:f,url:d},type:M})):r(Z("contentUrl",!0,D.b.INVALID_URL)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),r(Z("contentUrl",!0,D.b.INVALID_URL));case 14:return n.prev=14,r(Object(A.d)("GET_CONTENT_PREVIEW")),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t))):m()(e)?n(Z("contentUrl",!1)):n(Z("contentUrl",!0,D.b.INVALID_URL))}},he=E()((function(e,t,n){n(ve(e,t))}),500),ye=function(e,t){return function(n,r){n(ce("contentUrl",e));var i=r(),a=Object(L.i)(i);a.url&&n({type:x}),he(e,t,n)}},Ee=function(e,t,n){return function(){var r=c()(o.a.mark((function r(a,s){var c,l,u,d,p,f,g,m,v;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a(Object(A.g)("CREATE_SHAREABLE_CONTENT")),r.prev=1,c=s(),l=Object(L.k)(c),u=h()(e,"id.value"),d=ie(e),p=i({},d,{programId:t||null,socialNetworks:d.socialNetworks.map((function(e){return i({},e,{sharingEnabled:e.sharingEnabled&&!l[e.socialNetworkId]})}))}),!u){r.next=13;break}return r.next=10,Object(w.t)(u,p);case 10:r.t0=r.sent,r.next=16;break;case 13:return r.next=15,Object(w.s)(p);case 15:r.t0=r.sent;case 16:f=r.t0,f&&(a(Object(N.i)(f.data)),a(fe()),_.d(Object(S.h)(D.f.SUBMIT_SUCCESS)),n&&n()),r.next=26;break;case 20:r.prev=20,r.t1=r.catch(1),g=h()(r.t1,"response.data.error.code"),m=h()(w.a,g),v=g?D.f.VALIDATION_ERROR:D.f.SUBMIT_ERROR,_.b(Object(S.h)(m||v));case 26:return r.prev=26,a(Object(A.d)("CREATE_SHAREABLE_CONTENT")),r.finish(26);case 29:case"end":return r.stop()}}),r,null,[[1,20,26,29]])})));return function(e,t){return r.apply(this,arguments)}}()},be=function(e){return function(t){t({payload:e,type:G})}},Oe=function(e){return function(t){var n=!1,r=e.filter((function(e){return e.url?D.a.includes(e.type)?!(e.size>=D.d)||(_.b(Object(S.g)("FRONT.SOCIAL_ADVOCACY.IMAGE_TOO_LARGE",["MAX_SIZE"],[D.d])),!1):(n||(_.b("".concat(Object(S.h)("GLOBAL.ERROR.IMAGE_FORMAT_NOT_SUPPORTED")," : ").concat(e.type)),n=!0),!1):(_.b(Object(S.h)("GLOBAL.ERROR.GENERIC")),!1)}));r.length>D.e&&(_.b(D.e>1?Object(S.g)("FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.MAX_PHOTOS.MORE",["NB"],[D.e]):Object(S.h)("FRONT.SOCIAL_ADVOCACY.SHAREABLE_WORKFLOW.MAX_PHOTOS.ONE")),r.splice(D.e)),t(ce("images",r))}},Ce=function(e){return function(t,n){var r=n(),i=Object(L.t)(r),a=i("images"),o=a.value;t(ce("images",o.filter((function(t){var n=t.id;return e!==n}))))}},Te=function(e){return function(){var t=c()(o.a.mark((function t(n,r){var a,s,c,l,u,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:H}),a=r(),s=Object(L.n)(a),c=h()(s,"resolvedSocialNetworks",[]),t.next=7,C.c(e);case 7:l=t.sent,u=l.data,d=u.resolvedSocialNetworks.filter((function(e){var t=e.active;return t})).map((function(e){var t=e.socialNetworkId;return t})),Object(f.batch)((function(){n({type:K,payload:d}),n(ce("shareableOn",d.reduce((function(e,t){var n=c.find((function(e){var n=e.socialNetworkId;return n===t}));return i({},e,p()({},t,h()(n,"sharingEnabled",!0)))}),{})))})),n(oe()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n({type:V});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()},Se=function(e){return function(){var t=c()(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:z}),t.next=4,Promise.all([n(Object(T.d)(e)),n(ue(e))]);case 4:n({type:q}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:X});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(14),o=n.n(a),s=n(2),c=Object(s.oneOf)(["circled","flat","icon","rounded-square"]),l=n(73);n.d(t,"a",(function(){return u}));var u=function(e){var t=e.value,n=e.className,r=e.size,a=e.color,s=e.type,c=e.onClick,l=e.style,u=e.children;return i.a.createElement("i",{className:o()(n,"icon","mdi",t?"mdi-".concat(t):void 0,r&&"icon--".concat(r),a&&"icon--".concat(a),s&&"icon--".concat(s)),style:l,onClick:c},u)};u.defaultProps={children:null,className:null,color:null,onClick:null,size:null,style:null,type:null,value:null},u.propTypes={children:Object(s.shape)(),className:s.string,color:l.a,onClick:s.func,size:l.d,style:Object(s.shape)(),type:c,value:s.string}},,,function(e,t,n){"use strict";var r,i;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),function(e){e.DEFAULT="DEFAULT",e.EVENT="EVENT",e.QUESTION="QUESTION",e.IDEA="IDEA"}(r||(r={})),function(e){e.UP="up",e.DOWN="down"}(i||(i={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"ANGULAR_ACTION_PREFIX",(function(){return r}));var r="__angular__"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={LAUNCHER:"LAUNCHER",SETUP:"SETUP"},i={NEW:"NEW",PICK:"PICK"}},function(e,t,n){"use strict";var r,i,a,o,s;n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),function(e){e.name="name",e.slug="slug"}(r||(r={})),function(e){e.name="name",e.createdAt="createdAt"}(i||(i={})),function(e){e[e.asc=1]="asc",e[e.desc=-1]="desc"}(a||(a={})),function(e){e.live="live",e.disabled="disabled",e.deleted="deleted"}(o||(o={})),function(e){e.informationForm="informationForm",e.topics="topics",e.members="members",e.socialNetworks="socialNetworks"}(s||(s={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=/^((([[A-Za-z][A-Za-z0-9.-]*:(?:\/\/)?)([-;:&=+$,\w]+@)?[A-Za-z0-9.-]*|([-;:&=+$,\w]+@)[A-Za-z0-9.-]*)\.?[+~%/.\w-_]+((\/[+~%/.\w-_]*)?\??([-+=&;%@.\w_]*)#?([\w]*))?)/,i=/^((([[A-Za-z][A-Za-z0-9.-]*:(?:\/\/)?){0}([-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|([-;:&=+$,\w]+@)[A-Za-z0-9.-]+)\.[+~%/.\w-_]+((\/[+~%/.\w-_]*)?\??([-+=&;%@.\w_]*)#?([\w]*))?)/,a=/^((([[A-Za-z][A-Za-z0-9.-]*)?:(?:\/\/)?)).+/,o=function(e){return Boolean(e&&(Boolean(e.match(r))||Boolean(e.match(i))))},s=function(e){return e&&Boolean(e.match(a))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}));var r="main-nav__child--",i={CHILD:"child",CURRENT:"current",PARENT:"parent"},a="root"},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){var t,n,r,i,a,o,s,c;return{uid:e.uid,fields:{label:{value:e.label},feeds:{value:null!==(t=e.feedIds)&&void 0!==t?t:[]},viewMode:{value:null!==(n=e.viewMode)&&void 0!==n?n:O.a.viewMode},limit:{value:null!==(r=e.limit)&&void 0!==r?r:O.a.limit},featuredOnly:{value:e.filterFields.featuredOnly},highlightedOnly:{value:e.filterFields.highlightedOnly},defaultInstanceRelatives:{value:e.filterFields.defaultInstanceRelatives},instances:{value:null!==(i=e.filterFields.instanceIds)&&void 0!==i?i:[]},favoriteSitesOnly:{value:e.filterFields.favoriteSitesOnly},contentTypes:{value:null!==(a=e.filterFields.contentTypeIds)&&void 0!==a?a:[]},categories:{value:null!==(o=e.filterFields.categories)&&void 0!==o?o:[]},metadata:{value:null!==(s=null===(c=e.filterFields.metadataList)||void 0===c?void 0:c[0])&&void 0!==s?s:[],loadedFamilies:[]}}}}n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return I}));var a=n(3),o=n.n(a),s=n(43),c=n(510),l=n(124),u=n(87),d=n.n(u),p=n(28),f=n.n(p),g=n(167),m=n.n(g),v=n(106),h=n.n(v),y=n(4),E=n.n(y),b=n(263),O=n(195),C={status:b.a.loading,entities:{},forms:{},streamList:[]},T=Object(s.a)({domain:"mobile/contentStreamAdmin",initialState:C,reducers:{reset:function(){return C},setStatus:function(e,t){var n=t.payload,r=n.status,i=n.streamUID;i?e.forms[i].status=r:e.status=r},updateStreamList:function(e,t){var n=t.payload.streams;e.entities=Object.assign(e.entities,d()(n,"uid")),e.streamList=m()(e.streamList,f()(n,"uid"));var r=f()(n,i);e.forms=Object.assign(e.forms,d()(r,"uid"))},updateStream:function(e,t){var n=t.payload,r=n.oldUID,a=n.newStream;delete e.entities[r],delete e.forms[r];var o=e.streamList.indexOf(r),s=a.uid.toString();o>-1?e.streamList[o]=s:e.streamList.unshift(s),e.entities[s]=a,e.forms[s]=i(a)},setStreamOpen:function(e,t){var n=t.payload,r=n.uid,i=n.isOpen,a=e.forms[r];a&&(a.isOpen=i)},updateStreamField:function(e,t){var n=t.payload,r=n.uid,i=n.field,a=n.props,o=e.forms[r];Object.assign(E()(o,["fields",i]),a),o.wasTouched=!0},moveStream:function(e,t){var n=t.payload,r=n.from,i=n.to;e.streamList=Object(c.a)(e.streamList,r,i)},newStream:function(e){var t=O.e+Object(l.a)();e.forms[t]=i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},O.a,{uid:t})),e.streamList.unshift(t),e.forms[t].isOpen=!0},confirmDeleteStream:function(e,t){var n=t.payload,r=n.uid,i=n.isConfirmDeleteOpen;e.forms[r].isConfirmDeleteOpen=i},deleteStream:function(e,t){var n=t.payload;delete e.forms[n],delete e.entities[n],e.streamList=h()(e.streamList,n)}}}),S=T.reducer,I=T.actions},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s}));var r="customizations.modes",i={HEADLESS:"headless",WITH_HEAD:"with-head",WITH_INSTANCE_STYLES:"with-instance-styles",WITH_CUSTOM_COLORS:"with-custom-colors",REWORKED_UI:"reworked-ui",CONTEXTUAL_ACTIONS:"contextual-actions"},a="!",o={HEADLESS:"Show LumApps without the header and the footer. This mode is disabled, by default, both in production and development",WITH_HEAD:"Shows LumApps with the customizations added by the customer on the instance head field in the Style admin. This mode is enabled by default for production but disabled by default in development",WITH_INSTANCE_STYLES:"Shows LumApps with the customizations added by the customer on the instance styles field in the Style admin. This mode is enabled by default for production but disabled by default in development",WITH_CUSTOM_COLORS:"Shows LumApps with the customizations added by the customer on the Style section in the Style admin, including the color palette and the colors for the top navigation. This mode is enabled by default for production but disabled by default in dev.",REWORKED_UI:"Enable the new reworked UI for LumApps, with the reworked Header and the search page with a new UI.",CONTEXTUAL_ACTIONS:"Display the context actions menu in a page which regroups a list of options related to a content."},s={production:[i.WITH_HEAD,i.WITH_INSTANCE_STYLES,i.WITH_CUSTOM_COLORS],development:[i.REWORKED_UI,i.CONTEXTUAL_ACTIONS],test:[]}},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.r(t),n.d(t,"InitialSettings",(function(){return d}));var i=n(3),a=n.n(i),o=n(237),s=n.n(o),c=n(28),l=n.n(c),u=n(105),d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({API_HOST:_API_HOST,API_PROTOCOL:"https",APP_ID:_APP_ID,ERROR_REPORT_API_KEY:_ERROR_REPORT_API_KEY,IS_BETA_ENV:_IS_BETA_ENV,PUBLIC_PATH_PREFIX:"https://prod.cdn.lumapps.com/a5a6f177b6/",ACCOUNT_CHOICE:void 0,AUTH_URI:void 0,BASE_URL:window.location.origin+window.location.pathname.split("/").slice(0,4).join("/"),URL_PARAMS:s()(l()(window.location.search.replace("?","").split("&"),(function(e){return e.split("=")}))),AUTHORIZATION_ACTION:[],DEFAULT_CONTENT_LISTS:[],DIRECTORIES:[],EVENTS:[],FEATURES:{},GLOBAL_WIDGETS:[],INSTANCES_SIBLINGS:[],NOTIFICATION_TYPES:{},PARENT_USER_DIRECTORIES:[],POST_TYPES:{},USER_DIRECTORIES:[],USER_ROLES:[],CONTENT_TYPES:CONTENT_TYPES,DEFAULT_AVATAR:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAA3NCSVQICAjb4U/gAAAMP0lEQVR4nO2dWXMbxxGAu2cPLBYHcRAERYqHxFsOFcklqaLIlVRSlbgqD8lvyw/Je15SfknlcCVlJy5ZlmWRJkUSIogbe2CPmc4DLIaiJZkiiZmVjO9RYHFXHxu9Mz0zvfjHPz2FMaOHqb6BHwtj0ZIYi5bEWLQkxqIlMRYtibFoSYxFS2IsWhJj0ZIYi5bEWLQkxqIlMRYtibFoSYxFS0JXfQNnBBEBAAgAiBTfy7lIoujvpL6ACAYDPwx8BgJRpDIlQzeGzuHdUZ840YjMcfqcx5qmEUEch1mTX6tOTE1eMXSdMfz3F9s9l4iQExChmUpnMlmC/7tGAEqe+mSIRsRhXCL22oeby2UrZQ6CCAEm8pVsxtYYEy/cfXR3IwhDIUgIAUDPas1vntVe+hIwIzdRJiKABOlWLxqRua4TDfr5NBtE/Geb85VyQQgBw6RMQERciOOf50SGrsMLs2tLV6/PTx9/yhAPG+1/fPEsNzFpWWkiAclArWjkgvea+5srUwtXNzSNEREAxpwDvCkcT+ZlItA07eSnM9OVP1SKWzu1h1vPipMzpzK+KlQO7zjn3Dv63S8/WFqYQUQhaBi/F/y1QghEtro09/GDtVbzEDERQ1hVN4FEFDn1X9/f0HX9ZGa4LISgKBZxPEw7qDyulYjGKAp63dbtG7OMaSMaIRCRnbburJfT1PK7tX63rda1ghwdx3GW9UolvTJZEiOI5WMYw2sLs9cXQde0/z7a/vbItTO2KtmyRSNiGPg3lisz05U45qO+3PAPKYRYWpj2B7sdp8GsEmMKvseyL8k5x7g/VS5KsHwMERiGcffWatrEkX6H3oBU0YjY7zY/urOMKmKq0ey0fc0wDPmXBsmiuaBKnuWyGflTZAQIggCZGssgVzTGcTRZyAihYGZMAPl8Lg4cVVUQeaIJqNWol0sTSio+w9He7bWpbvtIyThPkmhE1m3s/+rOQrGQU1VaE0LMX61WC5rM5/AxkkRHcXR9Jj89VVKSN44RQsxNF8PAB+lBLUc0RmGYyVhcqWUAIALLSnEeyc8dckQT07Qo4srLaAgQRRFjCubDklKHYZiO54N609h3fN935T8nJIlmiN1+qLyEJoS4tjjz4OaVfk92jUnaqAN7Xqw8oAGAIQvCSDcsyTEtbxwdxsB5EhaWSNd1ElxyHpMmmgwz5bie8uxBBHbaiuNQ8n3Ii2jDNF1vkITsEcecofbDP3epSBJNBLpuDIJQ/kzhFIjYd1w9lXpfc/RwKB3LutxrQYR2zzN0U/KuD2mi8dT2DFUgYM8Nkb2fU3BARKfTWLk+p2qB48SdgB9wJn0PgrzrxVwYuuxH0PeJYh5xkv+kkJejs/niXq3OpH9nT4KIrXZXNzPyLy1t1EHZXP7x05qmYrXwGMawVm+bKfu9rXUAACJ0Bnqn5yics8Qx328MDNOUf2l5D0O33yvY8GT7QFX2YAx39+ue7/tuX/4fW1JlNgyjai6+d3vT9QY8FkrqpUQwWZr4/a8rWzsH23UnncnKPCogI6IR0ffd2SvlKI51XVNVlSaibCatadra8rzvdt/DWgcRmGbKcXxQXfmnF7yva4aUstL1Zk/p0O47ENF1B5omeyeNvBWWWmugvEYKAIjQcxzDtCSP7yQWlQy72e4qd42Ana5rpCzJh+bkTVjyE8XdfcUzQxhW7/oDjb2n9WgA0DTtoOEx5RGN2OmH8rdIS5wZAvkher7KTI2IfccTaLzHRSUgouxEae+grlQ0dHqOYabl75iS+g0yzdTu866mLk0jYrvr6kZK/vFxqaIZghPq7a6CUsMQRGx1/VMHQOUgVTQR5fKlzx5+qzGUXKgURIgYRVHf50xTUKqVvd2PaSzUCn/525ca8l/e35SzpYYxPKi1vt6uAWAqU1LSdkL635bINC1mTzmh4bi+nByCiK2OE2lFLVM1DAXFaFB0cpYYAjOsZkveRLHd8ywrddzFRj5qFpaIKJVK79e7EiaKiDAYhH6o+Di4shU8Tde6LvcHwaj/+wjY7TscDLVTUmWiEYBYutEcefZAhvvP25at4HDjSZSJJqJ0JrO91xh19SOOeaMzUHVg9hiVi/8aY10fRjr2QMRuzx1wxXkD1IomItPKb+0eju6RyBg++baWzas5RfrSnai9vGVZu3U3DKNRxDQi+n5Q78S6ijn3KZT3GyI0Mjt79VHsOmQMH2/tp3NF5eEMykUTUTaTe7zTCqNLDmpE9PzBtzU3ZaYu8/eeF+URDURk2sVH3+xd7qqHprFPP38yUaompPWdetEAZFnprZrXbHUvy7WuaVs7NSeyNRWFuleSiPsgEqVy9e+f7wRBcPFhtcZYs93996Pn+UIhCdl5SCJEAwAAZYtXPvnn10EYXiQMNY21u71PPv2mMn2VVJ8uOElyRAMipCem//zXr3b3zrkrgTHcqzU++XRrsjqftF7HCRINAAhQrMx+/rh2vmSNiLv7jcLkTKL67A5JlmgAAALLPP/8Ip3Sk5OXT5I40YIoZ59TFhHksxaPo0u/q4uTONE8jsoT9vmCkoimJksDX+XpjdeRLNGI6HvOuTuJEdFEPmNimMDkkSzRABiH3uQFWrZxQWuLZc9zkxbUSRGNiIDoet5M+UI7l4UQ1xZmKegEYZSQFt1D1N8KIgqifr836B0ulMWHm8sX3OwhBP3q/nrRdHvtwyAIEZnyIx2gtsc/IsYxd51uPhXfXpqqVhY0Xbv4lhoiSpnm3Z+uOJ63tXO4e9jRrLydtglI4SwG//inpwquiiwMQ8/tTOW1lcVqqZgHgEvvPYiIjOFgEGw/O9w+6KORtTMZVW9pkd+omwVB4Lvtq5PWzzYWshlbEI2ovSMRcU6maW6szC8tRLv7R092a6RnM9mcfN3yRA8VO92jpdnc6s0VyzKFkNHBY6hb17TlxZlrc9W92tGjrVqEdn6igEDSdMsQjcgGwcDpHK3OT6zd/sAwdCFIcscwAuBCAOL81en52Wqt3vzi6/2BSBeLJZCie7SiEdkgCJzO4fpicf3OTcaY4EJtU7ZhZ5Yr1fLs9GS90f7syx03tkqlCuJodY/sYYgYBoHbO1qdK2ysLiBiMprevQRD1DTWbHc//3KnFxj5QkljbES6RyAaMQwC32kuz+bXl+eZxhKo+CSIqGus3en/56vdrs8y+aKuXf7bYS5TNCIGQeg7zaWZ7NryvH4Zg2JpvNDde/hkv+mCnS0Y+mVWXC8nRyOyMAx8tz1XsW7cWjdNg6vOxW8LEUUxz+WyH93d6HT7D5/sNztkZSZMw7gU3ReNaESMothzWjMl88bKVTud5oInsHj2ViCiprFuz3n89OB5J05nCqZpXnDbwvkjevh8c/qtSg7u3VnM5zKci+/ekPeOQ0RxzLMZ+97t1V7fffz04Hm7nbILqVTq3LrPI3r4Srx+r5M1gp9vXp0sTXBBSt5QMFKGujN2+u5Pl/uu92T7+V6jk84Uzxfdby0akbluX+Puh6vVK9UyEMTvVC5+W4go5mSn07d/cn3F8R49Pai1Otl8SdffbmTyFqIRMYwir9dYXyguLawzTVPellEaw3m8bafv3lzu9d2HT/bqTVEoVQDP+g7ns4pGZK3WUTUHH/181bJSnIsfj+VjiIgTZbP2/Q/Xmu3uv77YIbNg25mzZJIzFv6xdbR/d718/866aZrv1rjt0hl2sy0V8x//YnOmIJrNo7PsQjmDaGTd5sHHD1Znpyuci2TumpCPEMQF3bpxbXUmVa8f/qDrH/gYkbXqe799sGZZqSQ0JU4aUcw3byzdmLcbjaM3L1G+6TNE1qzv/eb+Siplqn31UpKJoviDtWvLVyz3jUvvrxWNyI7q+w9uzWUz9tjym4lifnPjWsHwBoPX9td5tWhEdN3+B4uFqUppnDHOAhf83u0V7jdep+vVoqMoTqOztjz3Ix9gnB0iYMgefLjSa7+6l9ErRePAad67tTIeX7wVgiifz6zO5T3P+35LztOiEdHp936yPGlbqfFI7m0RXCwvzmDc//7+7NOihSCLeXMzlXFqPgcEYOj6ynzJ89xTQf2SaER03d7G9Wqidq29WwgSs9NliN1T//6SUCIwYFCdKv8I6xiXBRFYKbOcN+KX3+7zkuggDGYq2eSczXtHEQTVci4Mg5PZ4/9OETEKB9OT+fH05IIQUda2hHjpzbb/A34K7qkAUaRgAAAAAElFTkSuQmCC",MAX_IMAGE_SIZE:1600,SERVER_BASE_URL:window.location.origin,WIDGET_TYPES:WIDGET_TYPES},u);angular.module("Constants").constant("InitialSettings",d)},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"MediaConstant",(function(){return o})),n.d(t,"documentTypes",(function(){return r})),n.d(t,"mediaTypes",(function(){return i})),n.d(t,"PROVIDERS",(function(){return a}));var r={all:["FOLDER","IMAGE","OTHER"],allExceptFolders:["IMAGE","OTHER"],documents:["OTHER"],documentsAndFolders:["FOLDER","OTHER"],folders:["FOLDER"],images:["IMAGE"],imagesAndFolders:["FOLDER","IMAGE"]},i={GOOGLE:{FILE:"GOOGLE_FILE"},LOCAL:{FILE:"LUMDRIVE_FILE"},ONEDRIVE:{FILE:"ONEDRIVE_FILE"}},a={community:"community",google:"drive",lumapps:"local",microsoft:"onedrive",haussmann:"haussmann_media"},o={CATEGORIES:{library:"LIBRARY",mine:"MINE"},DOCUMENT_TYPES:r,KIND:{DRIVE:"Drive",FOLDER:"Folder",MEDIA:"Media"},PROVIDERS:a,SORT_ORDER:"name"};angular.module("Constants").constant("MediaConstant",o)},,,,function(e,t,n){"use strict";(function(e){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){V=e.getApiProfileFieldFromMap,z=e.getBackgroundImage,q=e.getImageURL,X=e.isDesignerMode,Q=e.isEmailValid,e.isGAValid,Z=e.redirectTo,J=e.resizeImage,ee=e.shouldOpenInNewWindow,e.findUrlsInString}function o(t){var n=t.getBoundingClientRect(),r=e.document.body;return{height:n.height,left:n.left+r.scrollLeft,top:n.top+r.scrollTop,width:n.width}}function s(e){var t=e.clientWidth;return null==t?o(e).height:t}function c(e){var t=e.clientHeight;return null==t?o(e).height:t}function l(e,t){if(t===e)return!0;for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function u(e){var t=new RegExp("^[^".concat(K.a.join("\\"),"]+$"));if(!e)return!1;if(P()(e))return Boolean(e.match(t));var n=0,r=0;return angular.forEach(e,(function(e){r++,(e&&e.match(t)||e&&""===e)&&n++})),n===r}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(r>=t.length)return n;var a=t[r],o=d(e[a],t,n,r+1);return void 0===o?x()(e,a):i({},e,O()({},a,o))}function p(e,t){return e.onChangeProperty=function(n,r,a){var o,s=e.props,c=null===s.value||void 0===s.value?{}:s.value;return o=angular.isDefined(r)?D()(r)?d(c,r,n):k()(n)?x()(c,r):i({},c,O()({},r,n)):n,s.onChange(t?t(o,n,r,a):o,s.name,a)},e}function f(e,t){return e.onClear=function(n){var r=e.props,i=r.onChange(void 0,r.name,n);return t&&t(r.value,r.name,n),i},e}function g(e){return String(e).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function m(e){return H()(G()(e))}function v(e){var t=e.value,n=e.total,r=e.decimal;if(A()([t,n,r],(function(e){e=parseFloat(e)})),R()(t)&&R()(n))return R()(r)&&(r=0),parseFloat((t/n*100).toFixed(r))}function h(e){if(!P()(e))throw new Error("You are trying to remove hmtl tags from a non string entity");return T()(e).replace(/(<([^>]+)>)/gi,"")}function y(e){return angular.isUndefinedOrEmpty(e)||!angular.isString(e)?"":U()(I()(e))}function E(){return/[?&]autotest/.test(location.search)}n.d(t,"b",(function(){return ie})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return V})),n.d(t,"f",(function(){return z})),n.d(t,"g",(function(){return q})),n.d(t,"h",(function(){return c})),n.d(t,"j",(function(){return X})),n.d(t,"k",(function(){return Q})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return E})),n.d(t,"a",(function(){return ne})),n.d(t,"m",(function(){return re})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return o})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return Z})),n.d(t,"r",(function(){return J})),n.d(t,"s",(function(){return d})),n.d(t,"t",(function(){return a})),n.d(t,"v",(function(){return y})),n.d(t,"u",(function(){return ee})),n.d(t,"w",(function(){return te})),n.d(t,"x",(function(){return h})),n.d(t,"y",(function(){return m})),n.d(t,"z",(function(){return s})),n.d(t,"A",(function(){return p}));var b=n(3),O=n.n(b),C=n(358),T=n.n(C),S=n(802),I=n.n(S),_=n(155),A=n.n(_),w=n(82),D=n.n(w),L=n(193),P=n.n(L),N=(n(109),n(201)),R=n.n(N),j=n(66),k=n.n(j),F=n(207),U=n.n(F),M=(n(140),n(130)),x=n.n(M),$=n(33),B=n.n($),W=(n(223),n(355)),G=n.n(W),Y=n(209),H=n.n(Y),K=n(89),V=(n(35),B.a,B.a),z=B.a,q=B.a,X=B.a,Q=B.a,Z=(B.a,B.a),J=B.a,ee=B.a,te=function(e){return e.stopPropagation(),e},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Number(e);if(isNaN(n))return e;var r=1,i="";return n>999999?(r=1e6,i="M"):n>9999&&(r=1e3,i="K"),r>1?(n/r).toFixed(t)+i:n},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Number(e);return isNaN(n)?e:n%1==0?n:n.toFixed(t)},ie=function(){return!window.matchMedia("all and (min-width: 780px)").matches}}).call(this,n(213))},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return g})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return f}));var r=n(37),i=n(2),a="ROOT/CONFIRM_BOX",o="".concat(a,"/SHOW_CONFIRM_BOX"),s="".concat(a,"/FREEZE_CONFIRM_BOX"),c="".concat(a,"/CLOSE_CONFIRM_BOX"),l={description:null,freezed:!1,onConfirm:null,opened:!1,title:null},u=Object(i.shape)({description:i.string,freezed:i.bool,onConfirm:i.func,opened:i.bool,title:i.string}),d=Object(r.a)((function(e,t){switch(t.type){case o:e.opened=!0,e.title=t.title,e.description=t.description,e.onConfirm=t.onConfirm,e.freezed=!1;break;case s:e.freezed=!0;break;case c:e=l;break;default:return e}return e}),l),p=function(e){var t=e.onConfirm,n=e.title,r=e.description;return{description:r,onConfirm:t,title:n,type:o}},f=function(){return{type:c}},g=function(){return{type:s}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return g}));var i=n(3),a=n.n(i),o={google:"Google",microsoft:"Microsoft",okta:"Okta",saml:"SAML",scim:"SCIM"},s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{batch_provisioning:"Batch provisioning",email:"External"}),c=[{isSortable:!1,label:"ADMIN.PROVIDER.TABLE_HEADER_NAME",name:"name",scope:"col"},{isSortable:!1,label:"ADMIN.PROVIDER.TABLE_HEADER_DOMAIN",name:"domain",scope:"col"},{isSortable:!1,label:"ADMIN.PROVIDER.TABLE_HEADER_ACTION",name:"action",scope:"col"},{isSortable:!1,label:"ADMIN.PROVIDER.TABLE_HEADER_PROVIDER",name:"provider",scope:"col"},{isSortable:!1,label:"GLOBAL.ID",name:"id",scope:"col"},{isSortable:!1,label:"ADMIN.PROVIDER.TABLE_HEADER_USERS",name:"users",scope:"col"},{isSortable:!1,label:"ADMIN.PROVIDER.TABLE_HEADER_LAST_SYNC",name:"last_sync",scope:"col"}],l=["#FFFFFF","#4BB16B","#EFEFEF","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B","#000000","#212121","#757575","#BDBDBD","#E0E0E0"],u=3e5,d=20,p={text:"Text",bool:"Boolean",exist:"Exists",not_exist:"Not exists",regex:"Regex exclude empty value",regexKeepEmpty:"Regex keep empty value"},f={True:"True",False:"False"},g="provider-verification"},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return I})),n.d(t,"c",(function(){return C})),n.d(t,"f",(function(){return T})),n.d(t,"g",(function(){return S}));var r=n(0),i=n.n(r),a=n(729),o=n.n(a),s=n(500),c=n.n(s),l=n(730),u=n.n(l),d=n(731),p=n.n(d),f=n(732),g=n.n(f),m=n(733),v=n.n(m),h=n(734),y=n.n(h),E=n(91),b={BELOW:"below",OVER:"over"},O=[{label:"FRONT.SETTINGS.CAPTION.BELOW",render:function(){return i.a.createElement("img",{alt:"Below",src:v.a})},value:b.BELOW},{label:"FRONT.SETTINGS.CAPTION.COVER",render:function(){return i.a.createElement("img",{alt:"Cover",src:y.a})},value:b.OVER}],C=[{label:"FRONT.SETTINGS.NAVIGATION_CONTROLS.BULLETS",render:function(){return i.a.createElement("img",{alt:"Bullets",src:u.a})},value:E.a.BULLETS},{label:"GLOBAL.THUMBNAILS",render:function(){return i.a.createElement("img",{alt:"Thumbnails",src:c.a})},value:E.a.THUMBNAILS}],T=[{availableOptions:["captionPosition","viewModeVariant","columnCount","orientation","main"],label:"FRONT.SETTINGS.VIEW_MODE.GRID",render:function(){return i.a.createElement("img",{alt:"Grid",src:o.a})},value:E.b.GRID},{availableOptions:["captionPosition","hasAutoplay","interval","navigationControls","orientation"],label:"FRONT.SETTINGS.VIEW_MODE.SLIDESHOW",render:function(){return i.a.createElement("img",{alt:"Slideshow",src:c.a})},value:E.b.SLIDESHOW}],S=[{label:"FRONT.SETTINGS.VIEW_MODE_GROUP",render:function(){return i.a.createElement("img",{alt:"Group",src:p.a})},value:E.c.GROUP},{label:"FRONT.SETTINGS.VIEW_MODE_UNGROUP",render:function(){return i.a.createElement("img",{alt:"Ungroup",src:g.a})},value:E.c.UNGROUP}],I={HORIZONTAL:"horizontal",ORIGINAL:"original",VERTICAL:"vertical"},_=[{label:"FRONT.SETTINGS.ORIENTATION.LANDSCAPE",value:I.HORIZONTAL},{label:"FRONT.SETTINGS.ORIENTATION.PORTRAIT",value:I.VERTICAL},{label:"FRONT.SETTINGS.ORIENTATION.NATURAL",value:I.ORIGINAL}]},function(e,t,n){"use strict";n.d(t,"p",(function(){return g})),n.d(t,"r",(function(){return j})),n.d(t,"q",(function(){return y})),n.d(t,"m",(function(){return S})),n.d(t,"n",(function(){return I})),n.d(t,"o",(function(){return _})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return A})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return D})),n.d(t,"g",(function(){return L})),n.d(t,"h",(function(){return P})),n.d(t,"i",(function(){return N})),n.d(t,"e",(function(){return O})),n.d(t,"j",(function(){return R})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return F})),n.d(t,"b",(function(){return E}));var r=n(9),i=n(4),a=n.n(i),o=n(147),s=n.n(o),c=n(17),l=n.n(c),u=n(70),d=n(54),p=n(185),f=n(228),g=Object(u.a)(p.c),m=function(e){return e.saConnectedUser||{}},v=Object(r.createSelector)(m,(function(e){return e.saUserLoadingStatus})),h=Object(r.createSelector)(m,v,(function(e,t){return t===f.a.loaded&&e.hasSocialNetworkAccessesLoaded})),y=Object(r.createSelector)(m,(function(e){return e.user})),E=Object(r.createSelector)([y],(function(e){return(null==e?void 0:e.canAccessSA)||!1})),b=Object(r.createSelector)([g,d.g],(function(e,t){return e&&t})),O=b,C=Object(r.createSelector)(y,(function(e){return a()(e,"roles",[])})),T=Object(r.createSelector)(y,(function(e){return a()(e,"permissions",[])})),S=Object(r.createSelector)(C,(function(e){return l()(e,p.b.ADMIN)})),I=Object(r.createSelector)(C,(function(e){return l()(e,p.b.AMBASSADOR)})),_=Object(r.createSelector)(C,(function(e){return l()(e,p.b.PROGRAM_MANAGER)})),A=Object(r.createSelector)([g,d.g,T],(function(e,t,n){return e&&(t||l()(n,p.a.CAN_ACCESS_ALL_SHARES_DATA))})),w=Object(r.createSelector)([g,d.g,T],(function(e,t,n){return e&&(t||l()(n,p.a.CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES))})),D=Object(r.createSelector)([g,d.g,T],(function(e,t,n){return e&&(t||l()(n,p.a.CAN_MANAGE_SHAREABLE_CONTENTS))})),L=Object(r.createSelector)([g,d.g,T],(function(e,t,n){return e&&(t||l()(n,p.a.CAN_MANAGE_SOCIAL_ADVOCACY_AMBASSADORS))})),P=Object(r.createSelector)([g,d.g,T],(function(e,t,n){return e&&(t||l()(n,p.a.CAN_MANAGE_SOCIAL_ADVOCACY_PROGRAM_MANAGERS))})),N=Object(r.createSelector)([g,d.g,T],(function(e,t,n){return e&&(t||l()(n,p.a.CAN_MANAGE_SOCIAL_ADVOCACY_TOPICS))})),R=Object(r.createSelector)([g,d.g,T],(function(e,t,n){return e&&(t||l()(n,p.a.CAN_SHARE_SHAREABLE_CONTENTS))})),j=Object(r.createSelector)([v,h],(function(e,t){return e===f.a.initial&&!t})),k=Object(r.createSelector)(m,(function(e){return e.socialNetworkAccesses||[]})),F=Object(r.createSelector)(k,(function(e){return s()((function(t){return e.find((function(e){var n=e.socialNetworkId;return n===t}))||{}}))}))},function(e,t,n){"use strict";function r(e,t){var n,r,i,s;if(!e)return"";var c=a()(o,t),l=[];return e.fullName&&!c?e.fullName:(l.push(e.firstName||(null===(n=e.apiProfile)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.givenName)),l.push(e.lastName||(null===(i=e.apiProfile)||void 0===i||null===(s=i.name)||void 0===s?void 0:s.familyName)),c?l.reverse().join(" ").trim():l.join(" ").trim())}n.d(t,"a",(function(){return r}));var i=n(17),a=n.n(i),o=["hu","ja"]},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return h}));var i=n(3),a=n.n(i),o=(n(74),n(274)),s=n(58),c=n(44),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return!1;var t=Object(o.a)(e);return Boolean(t)&&t.length>0},u=function(e){return{value:e.type?"".concat(e.uid).concat(c.e).concat(e.type):e.uid,label:e.localizedName,count:e.resultsCount,type:e.type,url:e.url,height:e.height,sendUserIdentity:e.sendUserIdentity}},d=function(e){return{value:e.type?"".concat(e.id).concat(c.e).concat(e.type):e.id,label:e.name,type:e.type,url:e.url}},p=function(e,t){return{value:e,label:t||c.c[e]}},f=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({kind:e,localizedName:c.c[e],uid:e,resultsCount:0,template:e,isMetadataVisible:!0,isSnippetVisible:!0},t)},g=function(e){return s.b.retrieve("".concat(c.l,"-").concat(e),s.a.STORAGE)||[]},m=function(e,t){s.b.store("".concat(c.l,"-").concat(t),e,s.a.STORAGE)},v=function(e){return s.b.retrieve("".concat(c.m,"-").concat(e),s.a.STORAGE)||[]},h=function(e,t){s.b.store("".concat(c.m,"-").concat(t),e,s.a.STORAGE)}},,function(e,t,n){"use strict";var r=n(53),i=n(37),a=n(77),o=n(133),s=n(390),c=s.b,l=n(516),u=l.a,d=n(232),p=d.d,f=n(190),g=f.h,m=n(441),v=m.a,h=n(134),y=n(94),E=n(346),b=n(113),O="".concat(o.ANGULAR_ACTION_PREFIX,"/locale/update"),C="".concat(o.ANGULAR_ACTION_PREFIX,"/community-dialog/update"),T={current:"VISIBILITY",status:E.a.reduce((function(e,t){return e[t.id]=y.b.INCOMPLETE,e}),{})},S={id:void 0,name:"",type:h.b.PICK},I={communityId:void 0,lastRevision:void 0,templateId:void 0,workspaceId:void 0},_={language:void 0,mode:y.a.EDIT,saving:!1,isDialogOpen:!0,isGroupDialogConfirmOpen:!1},A=Object(a.c)({visibility:v,description:c,members:g,options:p,externalServices:u}),w=Object(a.c)({extraFields:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;return Object(i.a)(e,(function(e){switch(t.type){case C:var n=t.newState,i=n.editedCommunity,a=n.template,o=void 0===a?{}:a;if(e.templateId=o.id,!i)break;var s=i.lastRevision,c=i.uid,l=i.workspace;e.communityId=c,e.lastRevision=s,e.workspaceId=l;break;case r.a:case r.f:case r.i:case b.c:Object.assign(e,I)}}))},group:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;return Object(i.a)(e,(function(e){var n=t.payload;switch(t.type){case r.a:case r.f:case r.i:Object.assign(e,S);break;case r.p:Object.assign(e,{id:void 0,name:"",type:n.type});break;case r.o:var i=n.id,a=n.name;Object.assign(e,{id:i,name:a});break;case r.q:Object.assign(e,{name:n.value})}}))},setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;return Object(i.a)(e,(function(e){var n=t.payload;switch(t.type){case O:e.language=t.newState.current;break;case C:e.isDialogOpen=t.newState.isEditionOpen,t.newState.editedCommunity&&(e.mode=y.a.EDIT);break;case r.a:e.isDialogOpen=!1;break;case r.f:case r.i:case b.c:var i=e.language;Object.assign(e,_,{language:i});break;case r.j:e.mode=t.mode,e.isDialogOpen=!0;break;case r.d:case r.g:e.saving=!1;break;case r.e:case r.h:e.saving=!0;break;case r.l:e.language=n.language;break;case r.r:e.errorLanguages=n.languages;break;case r.k:e.isGroupDialogConfirmOpen=!0;break;case r.b:e.isGroupDialogConfirmOpen=!1}}))},settings:A,steps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return Object(i.a)(e,(function(n){var i=t.payload;switch(t.type){case r.a:case r.f:case r.i:case b.c:Object.assign(n,T);break;case r.m:n.current=i.step;break;case r.n:n.status[e.current]=i.status}}))}});n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.f})),n.d(t,"c",(function(){return r.i})),n.d(t,"d",(function(){return r.s})),n.d(t,"e",(function(){return r.t})),n.d(t,"g",(function(){return r.w})),n.d(t,"f",(function(){return r.u})),n.d(t,"i",(function(){return r.x})),n.d(t,"j",(function(){return r.y})),n.d(t,"k",(function(){return r.z})),n.d(t,"l",(function(){return r.A})),n.d(t,"n",(function(){return r.C})),n.d(t,"m",(function(){return r.B})),n.d(t,"o",(function(){return r.D})),n.d(t,"h",(function(){return w}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(e).then((function(e){var t=e.data;if(!t)return null;var n=t.tabs;return{dataSources:Object(_.a)(n)}}))}function s(e){var t=e.dataSources,n=void 0===t?[]:t,r=e.engineType,o=e.params,s=void 0===o?{}:o,c=void 0===s.cursor&&void 0===s.wCursor;return function(e){return w.post("search",i({},e))}(s).then((function(e){var t=e.data;if(!t)return null;var i=n,o={},l=t.wCursor,u=t.cursor,d=void 0===u?l:u,p=t.facets,f=t.items,m=t.more,v=t.queryInterpretation,h=t.sortOrders,y=t.tabs;return c&&(i=Object(_.g)({currentUid:T()(s,"sources.source"),sources:y,type:r}),Object.assign(o,{customFieldsOptions:Object(I.c)(i),dataSources:Object(_.a)(i),filters:Object(_.h)(p),sortOrders:Object(_.l)(h)})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({currentSearchType:r,cursor:d,hasMore:m,interpretedQuery:T()(v,"interpretedQuery"),results:g()({},r,Object(_.d)(f,i))},o)}))}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u,d=n(18),p=n.n(d),f=n(3),g=n.n(f),m=n(27),v=n.n(m),h=n(71),y=n.n(h),E=n(83),b=n(61),O=n(271),C=n(4),T=n.n(C),S=n(591),I=n(333),_=n(84),A=n(64),w=(n(178),new A.a({path:"omnisearch"})),D=function(e){return w.post("tabs",i({},e))},L=n(35);n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return N})),n.d(t,"d",(function(){return R})),n.d(t,"c",(function(){return B})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return F})),n.d(t,"h",(function(){return U})),n.d(t,"i",(function(){return W})),n.d(t,"j",(function(){return G})),n.d(t,"k",(function(){return M})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return $})),n.d(t,"n",(function(){return Y})),n.d(t,"o",(function(){return Q})),n.d(t,"p",(function(){return te})),n.d(t,"r",(function(){return Z})),n.d(t,"q",(function(){return ee})),n.d(t,"s",(function(){return K})),n.d(t,"t",(function(){return V})),n.d(t,"v",(function(){return z})),n.d(t,"u",(function(){return q})),n.d(t,"w",(function(){return ne})),n.d(t,"x",(function(){return X})),n.d(t,"y",(function(){return re}));var P="search/CHANGE_DATA_SOURCE",N="search/CHANGE_FILTERS",R="search/CHANGE_SORT_ORDER",j="search/FETCH_DATA_SOURCES_ERROR",k="search/FETCH_DATA_SOURCES_SUCCESS",F="search/FETCH_RESULTS_ERROR",U="search/FETCH_RESULTS_SUCCESS",M="search/RESET_CURRENT_FILTERS",x="search/RESET_RESULTS",$="search/RESET_SEARCH_SUGGESTIONS",B="search/CHANGE_SEARCH_QUERY",W="search/FETCH_SUGGESTIONS",G="search/FETCH_SUGGESTIONS_ERROR",Y="search/SET_IS_LOADING",H=(u={},g()(u,b.ENGINE_TYPE.CLOUDSEARCH,"wCursor"),g()(u,b.ENGINE_TYPE.ELASTICSEARCH,"wCursor"),u),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=e.resetOptions;return function(e,r){var i=r().search,a=i.isLoading,o=i.query;if(!a){e(X(n));var s=Object(O.c)(r())?b.ENGINE_TYPE.ELASTICSEARCH:b.ENGINE_TYPE.CLOUDSEARCH;e(z({engineType:s,params:l({query:o},t)}))}}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{}:t;return function(e,t){return Object(O.c)(t())?o(n).then((function(t){e({payload:l({},t),type:k})})).catch((function(t){e({payload:l({},t&&t.response&&t.response.data?t.response.data:{}),type:j})})):null}},z=function(e){var t=e.engineType,n=void 0===t?b.ENGINE_TYPE.CLOUDSEARCH:t,r=e.params,i=void 0===r?{}:r;return function(e,t){var r,a=t().search,o=a.currentDataSourceUid,c=a.currentFilters,u=a.currentSearchType,d=a.currentSortOrder,f=a.dataSources,m=a.filters,h=t().instance.id,y=t().locale.current,E=i.cursor,O=p()(i,["cursor"]),C=l({},O,(r={callId:Object(L.b)()},g()(r,H[u],E&&"".concat(E)),g()(r,"instanceId",h),g()(r,"lang",y),g()(r,"maxResults",10),r));return d&&d.value&&(C.sort="".concat(d.isAscending?"":"-").concat(d.value)),o!==b.TAB_ALL.uid&&(C.sources={source:o},v()(c)||(C.sources=l({},C.sources,{filterOptions:Object(_.c)(c,m)}))),n===b.ENGINE_TYPE.ELASTICSEARCH&&Object.assign(C,{wrapper:{end:"</mark>",start:'<mark class="cloudsearch-highlight">'}}),e({payload:{isLoading:!0},type:Y}),s({dataSources:f,engineType:n,params:C}).then((function(t){e({payload:l({},t,{append:Boolean(i.cursor),disableQueryInterpretation:i.disableQueryInterpretation,isLoading:!1,query:i.query}),type:U})})).catch((function(t){e({payload:l({},t&&t.response&&t.response.data?t.response.data:{},{isLoading:!1}),type:F})}))}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n().search,i=r.currentSearchType,a=r.cursor,o=r.disableQueryInterpretation,s=r.hasMore,c=r.isLoading,u=r.query;if(a&&s&&!c){var d=l({cursor:a,disableQueryInterpretation:o,query:u},e);t(z({engineType:i,params:d}))}}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataSources,n=void 0!==t&&t,r=e.currentFilters,i=void 0!==r&&r,a=e.filters,o=void 0!==a&&a,s=e.sortOrders,c=void 0!==s&&s;return function(e){var t={};n&&(t.dataSources=[]),o&&(t.filters=[]),i&&(t.currentFilters={}),c&&(t.currentSortOrder=void 0,t.sortOrders=[]),e({payload:l({currentError:null,results:{}},t),type:x})}},Q=function(e){return function(t){Object(_.q)(e)||t({payload:{uid:e},type:P})}},Z=function(e,t){return function(n){var r={};e&&(r.value=e),void 0!==t&&(r.isAscending=t),n({payload:{currentSortOrder:r},type:R})}},J=y()((function(e,t,n){(function(e,t){return Object(S.a)({query:e,organizationId:t})})(e,t).then((function(e){var t=e.items;n({payload:{isLoadingSearchSuggestions:!1,suggestions:t},type:W})})).catch((function(){n({payload:{isLoadingSearchSuggestions:!0,suggestions:[]},type:G})}))}),200),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=void 0===t?null:t,r=e.autocompleteEnabled,i=void 0===r||r;return function(e,t){if(e({payload:{isLoadingSearchSuggestions:!0,query:n},type:B}),i&&Object(_.t)(n)){var r=Object(E.b)(t());J(n,r,e)}}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?null:t,r=e.value,i=void 0===r?null:r;return function(e){e({payload:{name:n,value:i},type:N})}},ne=function(){return function(e){e({payload:{},type:M})}},re=function(){return function(e){e({payload:{},type:$})}}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(7),i=n.n(r),a=n(43),o=n(587),s={currentDialogPostId:void 0,userSpacesStatus:null,userSpaces:[],filterUserSpaceValue:"",showUserSpaceSuggestions:!1,selectedUserSpace:void 0,channelsStatus:null,userSpaceAuthenticationStatus:null,channels:[],filterChannelValue:"",showChannelSuggestions:!1,navigationChannelSuggestionValue:"",selectedChannelValues:[],message:"",postingToChannel:!1,sharingStep:o.a.selectUserSpace},c=Object(a.a)({domain:"shareToSlack",initialState:s,reducers:{toggleDialog:function(e,t){i()(e,"currentDialogPostId",t.payload)},setSharingStep:function(e,t){i()(e,"sharingStep",t.payload)},fetchSlackWorkspacesLoading:function(e){i()(e,"userSpacesStatus","loading")},fetchSlackWorkspacesSuccess:function(e,t){i()(e,"userSpaces",t.payload),i()(e,"userSpacesStatus","loaded")},fetchSlackWorkspacesError:function(e){i()(e,"userSpaces",s.userSpaces),i()(e,"userSpacesStatus",null)},fetchUserSpaceAuthorizationLoading:function(e){i()(e,"userSpaceAuthenticationStatus","loading")},fetchUserSpaceAuthorizationSuccess:function(e){i()(e,"userSpaceAuthenticationStatus","authenticated")},fetchUserSpaceAuthorizationError:function(e){i()(e,"userSpaceAuthenticationStatus","unauthenticated")},fetchSlackChannelsLoading:function(e){i()(e,"channels",s.channels),i()(e,"filterChannelValue",s.filterChannelValue),i()(e,"showChannelSuggestions",s.showChannelSuggestions),i()(e,"navigationChannelSuggestionValue",s.navigationChannelSuggestionValue),i()(e,"selectedChannelValues",s.selectedChannelValues),i()(e,"channelsStatus","loading")},fetchSlackChannelsSuccess:function(e,t){var n=t.payload.items;i()(e,"channels",n),i()(e,"channelsStatus","loaded")},fetchSlackChannelsError:function(e){i()(e,"channels",s.channels),i()(e,"channelsStatus",null)},setFilterWorkspaceValue:function(e,t){i()(e,"filterUserSpaceValue",t.payload),i()(e,"selectedUserSpace",s.selectedUserSpace),i()(e,"selectedChannelValues",s.selectedChannelValues),i()(e,"channels",s.channels),i()(e,"channelsStatus",null)},setShowWorkspaceSuggestions:function(e,t){i()(e,"showUserSpaceSuggestions",t.payload)},setSelectedWorkspace:function(e,t){i()(e,"selectedUserSpace",t.payload)},setFilterSlackChannelValue:function(e,t){i()(e,"filterChannelValue",t.payload)},setShowSlackChannelSuggestions:function(e,t){i()(e,"showChannelSuggestions",t.payload)},setNavigationSlackChannelSuggestionValue:function(e,t){i()(e,"navigationChannelSuggestionValue",t.payload)},setSelectedSlackChannelValues:function(e,t){i()(e,"selectedChannelValues",t.payload)},setSlackMessage:function(e,t){i()(e,"message",t.payload)},postingToSlackChannel:function(e){i()(e,"postingToChannel",!0)},postingToSlackChannelError:function(e){i()(e,"postingToChannel",!1)},resetForm:function(e){i()(e,"currentDialogPostId",s.currentDialogPostId),i()(e,"userSpacesStatus",s.userSpacesStatus),i()(e,"userSpaces",s.userSpaces),i()(e,"filterUserSpaceValue",s.filterUserSpaceValue),i()(e,"showUserSpaceSuggestions",s.showUserSpaceSuggestions),i()(e,"selectedUserSpace",s.selectedUserSpace),i()(e,"channelsStatus",s.channelsStatus),i()(e,"channels",s.channels),i()(e,"filterChannelValue",s.filterChannelValue),i()(e,"showChannelSuggestions",s.showChannelSuggestions),i()(e,"navigationChannelSuggestionValue",s.navigationChannelSuggestionValue),i()(e,"userSpaceAuthenticationStatus",s.userSpaceAuthenticationStatus),i()(e,"selectedChannelValues",s.selectedChannelValues),i()(e,"message",s.message),i()(e,"postingToChannel",s.postingToChannel),i()(e,"sharingStep",s.sharingStep)}}}),l=c.actions,u=c.reducer},function(e,t,n){"use strict";var r=n(469),i=function(){var e=Object(r.useMediaQuery)({query:"(max-width: 1023px)"}),t=Object(r.useMediaQuery)({query:"(min-width: 1280px)"}),n=Object(r.useMediaQuery)({query:"(max-width: 1024px)"}),i=Object(r.useMediaQuery)({query:"(max-width: 480px)"});return{isMobile:e,isWide:t,isDesktop:n,isSmall:i}};n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r=n(8),i=n.n(r),a=n(0),o=n(45),s=n(34),c=n(58),l=n(100),u=Object(s.g)(),d=window.PUBLIC_PATH?window.PUBLIC_PATH.substring(0,window.PUBLIC_PATH.slice(0,-1).lastIndexOf("/")+1):"",p=window.PUBLIC_PATH&&window.PUBLIC_PATH.indexOf("localhost")>=0?window.PUBLIC_PATH:d,f=new o.c({baseURL:p});n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return g}));var g="M20 20",m=function(e){var t=e.icon,n=Object(a.useState)(g),r=i()(n,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){o===g&&t&&function(e){return f.getCacheFirst("/frontend-mdi-icons/v".concat(u.iconsVersion,"/").concat(e.icon,".json"),c.a.MEMORY,l.a.HIGH,{withCredentials:!1},!1).then((function(e){var t=e.data.path,n=void 0===t?null:t;return n}))}({icon:t}).then((function(e){s(e)}))}),[t,o]),{iconPath:o}}},function(e,t,n){"use strict";n.d(t,"n",(function(){return I})),n.d(t,"p",(function(){return D})),n.d(t,"l",(function(){return A})),n.d(t,"m",(function(){return w})),n.d(t,"j",(function(){return P})),n.d(t,"i",(function(){return L})),n.d(t,"q",(function(){return _})),n.d(t,"k",(function(){return R})),n.d(t,"o",(function(){return N})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"g",(function(){return E})),n.d(t,"e",(function(){return O})),n.d(t,"a",(function(){return b})),n.d(t,"h",(function(){return C})),n.d(t,"f",(function(){return T})),n.d(t,"b",(function(){return S}));var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(4),c=n.n(s),l=n(36),u=n(5),d=n(68),p=n(150),f=n(92),g=n(102),m="SA/SHAREABLE_CONTENT",v="".concat(m,"/FETCH_ALL_SUCCESS"),h="".concat(m,"/FETCH_ALL_ERROR"),y="".concat(m,"/FETCH_BY_ID_SUCCESS"),E="".concat(m,"/RESET_CURSOR"),b="".concat(m,"/ARCHIVED_CONTENT_SUCCESS"),O="".concat(m,"/GET_SHAREABLE_CONTENT_WITH_STATS_SUCCESS"),C="".concat(m,"/TOGGLE_SHAREABLE_CONTENT_SORT_DIRECTION"),T="".concat(m,"/OPEN_SHAREABLE_CONTENT_GALLERY_DIALOG"),S="".concat(m,"/CLOSE_SHAREABLE_CONTENT_GALLERY_DIALOG"),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){e&&n(Object(d.g)(e,!1));var i=r(),a=i.socialAdvocacy,o=a.shareableContents,s=o.cursor,c=o.shareableContentSortDir,l=a.saAnalytics.currentSAFilters,u=t.filters||{sharerIds:l.sharers,topicIds:l.topics};t.programId&&(u.programIds=[t.programId]);var p=e===g.b;Object(f.j)(Object.assign(u||{},{active:!0}),20,t.sortDir||c,p?s:void 0).then((function(t){var r=t.data;return r?(e&&n(Object(d.d)(e)),n({cursor:r.cursor,hasMore:r.more,isNextPage:p,shareableContents:r.items,type:v})):n({type:h})}))}},_=function(e,t){return function(n){n({requestedSortDir:e,type:C}),n(I(g.c,{programId:t}))}},A=function(e){return function(){var t=o()(i.a.mark((function t(n,r){var a,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),o=a.loadingState,c()(o,"GET_SHAREABLE_CONTENT_BY_CONTENT_ID.loading")){t.next=12;break}return n(Object(d.g)("GET_SHAREABLE_CONTENT_BY_CONTENT_ID")),t.prev=4,t.next=7,Object(f.i)(e);case 7:s=t.sent,s&&n({shareableContent:s,type:y});case 9:return t.prev=9,n(Object(d.d)("GET_SHAREABLE_CONTENT_BY_CONTENT_ID")),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[4,,9,12]])})));return function(e,n){return t.apply(this,arguments)}}()},w=function(e){return function(t){Object(f.j)({active:!0,shareableContentIds:[e]}).then((function(e){var n=e.data;n&&t({shareableContent:n.items[0],type:O})}))}},D=function(){return function(e){return e({type:E})}},L=function(e){return function(t){t({shareableContent:e,type:y})}},P=function(e){return function(t){t(Object(p.c)()),Object(f.b)(e).then((function(n){n&&t({contentId:e,type:b})})).then((function(){t(Object(p.a)()),l.d(Object(u.h)("SOCIAL_ADVOCACY_ARCHIVE_SUCCESS"))})).catch((function(){t(Object(p.a)()),l.b(Object(u.h)("SOCIAL_ADVOCACY_ARCHIVE_ERROR"))}))}},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n({images:e,initialIndex:t,type:T})}},R=function(){return function(e){return e({type:S})}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(34),i=Object(r.g)(),a=function(e){return void 0!==e&&"string"==typeof e},o=function(e){if(!e)return!1;var t=e,n=Object.keys(t);return void 0!==t&&n.length>0&&void 0===t.key&&void 0===t.replacements},s=function(e){return void 0!==e&&void 0!==e.key&&void 0!==e.replacements},c=function(e){return null!=e?e:i.userLang},l=function(){var e=window.USER_ALTERNATIVES_LANGS?window.USER_ALTERNATIVES_LANGS.split(","):[i.userLang];return e[0]}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u}));var r=n(135),i=[{slug:r.b.informationForm,label:"FRONT.SOCIAL_ADVOCACY.PROGRAM_CREATION.STEP.INFORMATION.LABEL"},{slug:r.b.members,label:"FRONT.SOCIAL_ADVOCACY.PROGRAM_CREATION.STEP.MEMBERS.LABEL"},{slug:r.b.topics,label:"FRONT.SOCIAL_ADVOCACY.PROGRAM_CREATION.STEP.TOPICS.LABEL"},{slug:r.b.socialNetworks,label:"FRONT.SOCIAL_ADVOCACY.PROGRAM_CREATION.STEP.SOCIAL_NETWORKS.LABEL"}],a="FRONT.SOCIAL_ADVOCACY.PROGRAM_CREATION.ERROR.DUPLICATE",o={"domain.program.create.duplicate_on_slug":{goToStep:r.b.informationForm,errorField:"slug",errorMessage:"".concat(a,".SLUG")},"domain.program.create.duplicate_on_name":{goToStep:r.b.informationForm,errorField:"name",errorMessage:"".concat(a,".NAME")},"domain.program.update.duplicate_on_slug":{goToStep:r.b.informationForm,errorField:"slug",errorMessage:"".concat(a,".SLUG")},"domain.program.update.duplicate_on_name":{goToStep:r.b.informationForm,errorField:"name",errorMessage:"".concat(a,".NAME")}},s=5e4,c=30,l="en",u=20},,function(e,t,n){"use strict";function r(e){return a()(s.d,e)?s.d[e].name:e}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d}));var i=n(4),a=n.n(i),o=n(5),s=n(48),c=function(e){var t=0,n=a()(e,"reactions",[]);return n.map((function(e){var n=a()(e,"number",-1);return-1===n&&(n=1),t+=n,e})),t},l=function(e){return"".concat(c(e)," ").concat(Object(o.h)("REACTIONS"))},u=function(e,t){switch(e){case s.e.SLACK.id:return function(e){if(e.length>80)return!1;var t=new RegExp("^[一-龯a-zà-ÿ\\d\\-_]*$");return t.test(e)}(t);case s.e.TEAMS.id:return function(e){if(e.length>50)return!1;var t=new RegExp("[~#%&*{}+/\\\\:<>\\?\\|'\",\\.]");if(t.test(e))return!1;var n=/\b(forms|CON|CONIN\$|CONOUT\$|PRN|AUX|NUL|COM1 to COM9|LPT1 to LPT9|desktop\.ini|_vti_)\b/.exec(e);if(n&&e.length!==n.index+n[0].length)return!1;var r=new RegExp("[\\u0000-\\u001F\\u0080-\\u009F]");return!r.test(e)}(t);case s.e.FBWORKPLACE.id:return function(e){var t=new RegExp("^[\\w\\-\\u0020]*$");return t.test(e)}(t);case s.e.YAMMER.id:return!0;default:return!1}},d=function(e,t){switch(e){case s.e.SLACK.id:return function(e){return e.length>80?e.substring(0,80):e.replace(/[^a-zà-ÿ\d\-_]/g,"")}(t);case s.e.TEAMS.id:return function(e){return e.length>50?e.substring(0,50):e.replace(/[~#%&*{}+/\\:<>?|'",.]/g,"")}(t);case s.e.FBWORKPLACE.id:return function(e){return e.replace(/[^\w\-\u0020]/g,"")}(t);case s.e.YAMMER.id:default:return t}}},,,function(e,t,n){"use strict";var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(0),g=n.n(f),m=function(e){function t(e){var n;return i()(this,t),n=c()(this,u()(t).call(this,e)),n.state={hasError:!1},n}return p()(t,e),o()(t,[{key:"componentDidCatch",value:function(e,t){var n=!0,r=this.props.onError;if(r){var i=r(e,t);n=!i}this.setState({hasError:n})}},{key:"render",value:function(){var e=this.state.hasError,t=this.props,n=t.children,r=t.fallback,i=void 0===r?null:r;return e?i:n}}]),t}(g.a.Component);n.d(t,"a",(function(){return m}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var r={MEMBER:"MEMBER",OWNER:"OWNER"},i=Object.keys(r).map((function(e){return{label:"FRONT.COMMUNITY.USER.TYPE.".concat(e),value:e}}))},function(e,t,n){"use strict";var r=n(3),i=n.n(r);window.lumapps.store={customComponents:{},observers:{},onNavigationSubscribers:[],initialized:!1};var a=function(){return window.lumapps.store};t.a={wasStoreInitialized:function(){return a().initialized},notifyNavigationSubscribers:function(e){var t=a();t.onNavigationSubscribers.forEach((function(t){var n=t.callback;n(e)}))},subscribeToNavigation:function(e){var t=e.callback,n=a();n.onNavigationSubscribers.push({callback:t})},subscribeToCustomization:function(e){var t=e.target,n=e.placement,r=e.callback,i=a();i.observers[t]||(i.observers[t]={}),i.observers[t][n]=r},setCustomComponent:function(e){var t=a(),n=e.target,r=e.placement;t.customComponents[n]?t.customComponents[n][r]=e:t.customComponents[n]=i()({},r,e),t.observers[n]||(t.observers[n]=i()({},r,null)),t.observers[n][r]&&t.observers[n][r](e)},doesCustomizationExist:function(e){var t=e.target,n=e.placement,r=a();return n?!!r.customComponents[t]&&Boolean(r.customComponents[t][n]):Boolean(r.customComponents[t])},getCustomComponent:function(e){var t=e.target,n=e.placement,r=a();return r.customComponents[t]?r.customComponents[t][n]:null},setStoreAsInitialized:function(){a().initialized=!0},reset:function(){Object.assign(window.lumapps.store,{customComponents:{},observers:{},subscribers:[],onNavigationSubscribers:[]})}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"c",(function(){return T})),n.d(t,"b",(function(){return b}));var r=n(124),i=n(87),a=n.n(i),o=n(43),s=n(7),c=n.n(s),l=n(313),u=n.n(l),d=n(144),p=n.n(d),f=n(4),g=n.n(f),m=n(314),v=n.n(m),h=n(110),y=n.n(h),E=n(264),b={fetchInitialTopicsStatus:E.a.initial,newTopicText:"",newTopicError:"",editTopicText:"",editTopicError:"",editingTopicId:"",topics:{},changes:{added:[],updated:[],deleted:[]},confirmTopicDeletion:!1,topicToDelete:null,searchValue:""},O=Object(o.a)({domain:"saTopics/topicManagement",initialState:b,reducers:{fetchTopics:function(e){c()(e,"fetchInitialTopicsStatus",E.a.loading)},fetchTopicsSuccess:function(e,t){c()(e,"fetchInitialTopicsStatus",E.a.success),c()(e,"topics",a()(t.payload,"id"))},fetchTopicsFailure:function(e,t){c()(e,"fetchInitialTopicsStatus",E.a.failure),c()(e,"topics",a()(t.payload,"id"))},setNewTopicText:function(e,t){c()(e,"newTopicError",""),c()(e,"newTopicText",t.payload),v()(e.topics,(function(e){return e.name.trim().toLowerCase()===t.payload.trim().toLowerCase()}))&&c()(e,"newTopicError","FRONT.SOCIAL_ADVOCACY.CREATE_TOPIC.DUPLICATE_ERROR")},setEditText:function(e,t){var n=e.editingTopicId;if(n){var r=t.payload;c()(e,"editTopicError",""),c()(e,"editTopicText",r),r||c()(e,"editTopicError","FRONT.SOCIAL_ADVOCACY.EDIT_TOPIC.ERROR.EMPTY"),v()(e.topics,(function(e){return e.name.toLowerCase()===r.toLowerCase()&&e.id!==n}))&&c()(e,"editTopicError","FRONT.SOCIAL_ADVOCACY.CREATE_TOPIC.DUPLICATE_ERROR")}},editTopic:function(e,t){var n=t.payload;c()(e,"editingTopicId",n||""),c()(e,"editTopicText",g()(e.topics,"".concat(n,".name"),"")),c()(e,"editTopicError","")},createNewTopic:function(e,t){var n=Object(r.a)(),i=t.payload;if(i){var a={name:i,id:n,isNew:!0};c()(e,"topics.".concat(n),a),e.changes.added.push(a),c()(e,"newTopicText","")}},updateTopic:function(e,t){var n=t.payload,r=n.id,i=n.name,a=e.topics[r];if(a.isNew){var o=y()(e.changes.added,{name:a.name});c()(e,"changes.added.".concat(o,".name"),i)}else{var s=y()(e.changes.updated,{id:r});s>-1?c()(e,"changes.updated.".concat(s,".name"),i):e.changes.updated.push({id:r,name:i})}c()(e,"topics.".concat(r),{id:r,name:i}),c()(e,"editingTopicId","")},removeTopic:function(e,t){var n=t.payload,r=g()(e,"topics.".concat(n));r.isNew?p()(e.changes.added,{name:r.name}):(p()(e.changes.updated,{id:r.id}),e.changes.deleted.push({id:n})),u()(e,"topics.".concat(n))},openDeleteConfirmationModal:function(e,t){c()(e,"confirmTopicDeletion",!0),c()(e,"topicToDelete",t.payload)},closeDeleteConfirmationModal:function(e){c()(e,"confirmTopicDeletion",!1)},onSearch:function(e,t){c()(e,"searchValue",t.payload)},reset:function(){return b}}}),C=O.actions,T=O.reducer},,,function(e,t,n){"use strict";n.r(t);var r=n(33),i=n.n(r);n.d(t,"applicationHost",(function(){return a})),n.d(t,"ConfigConstant",(function(){return o}));var a="".concat(window.location.protocol,"//").concat(window.location.host),o={ACCOUNT_TYPES:[{help:"ADMIN.ACCOUNT_TYPE.EXTERNAL_HELP",name:"ADMIN.ACCOUNT_TYPE.EXTERNAL",value:"external"},{name:void 0,value:"google"}],APPLICATION_HOST:a,APPLICATION_HOST_PROCESS:window._APPLICATION_HOST_PROCESS,ATTACHMENT_TYPE:{FILE:"file",IMAGE:"image",LINK:"link"},AVAILABLE_API_PROFILE_FIELD:[{name:"API_PROFILE_FIELD_TITLE",text:"organizations[primary=true]/title"},{name:"API_PROFILE_FIELD_PRIMARY_ORGANIZATIONS_NAME",text:"organizations[primary=true]/name"},{name:"API_PROFILE_FIELD_PRIMARY_ORGANIZATIONS_LOCATION",text:"organizations[primary=true]/location"},{name:"API_PROFILE_FIELD_PHONES_WORK",text:"phones[type=work]/value"},{name:"API_PROFILE_FIELD_PHONES_PERSONAL",text:"phones[type=mobile]/value"},{name:"API_PROFILE_FIELD_EMAILS_PRIMARY",text:"primaryEmail"},{name:"API_PROFILE_FIELD_RELATIONS_MANAGER",text:"relations[type=manager]/value"}],AVAILABLE_CONTENT_TYPES:void 0,CHAT_FIELDS:["provider","group","channel"],TAGZ_MICROSERVICE_ADDRESS:window._TAGZ_MICROSERVICE_ADDRESS,CHART_FIELDS:["fileId, graphType"],COMMUNITY_FIELDS:["members","title","content","follow","thumbnail"],COMMUNITY_FILTERS:["query","instance"],CONTENT_DEFAULT_STATUS:"DRAFT",CONTENT_FIELDS:["author","publication-date","tags","title","excerpt","metadata","social"],CONTENT_FILTERS:["query","instance","custom-content-type","tags","metadata","author","dates","feature-feeds"],CONTENT_STATUS:{ARCHIVE:{condition:{isWorkflowEnabled:!0},level:4,name:"CONTENT_STATUS_ARCHIVE",value:"ARCHIVE"},DRAFT:{condition:{isWorkflowEnabled:!0},level:1,name:"CONTENT_STATUS_DRAFT",value:"DRAFT"},LIVE:{condition:{isWorkflowEnabled:!0,userIsWorkflowManager:!0},level:3,name:"CONTENT_STATUS_LIVE",value:"LIVE"},TO_VALIDATE:{condition:{isWorkflowEnabled:!0},level:2,name:"CONTENT_STATUS_TO_VALIDATE",value:"TO_VALIDATE"},UNARCHIVE:{condition:{isWorkflowEnabled:!0},level:4,name:"CONTENT_STATUS_UNARCHIVE",value:"UNARCHIVE"}},CUSTOMER_LICENSE_TYPES:[{label:"CUSTOMER_LICENSE_TYPES_FULL",value:"full"},{label:"CUSTOMER_LICENSE_TYPES_RESELLER",value:"reseller"},{label:"CUSTOMER_LICENSE_TYPES_PILOT",value:"pilot"},{label:"CUSTOMER_LICENSE_TYPES_TRIAL",value:"trial"}],CUSTOMER_STATUS:[{label:"CUSTOMER_STATUS_ENABLED",value:"enabled"},{label:"CUSTOMER_STATUS_PENDING",value:"pending"},{label:"DISABLED",value:"disabled"}],DEFAULT_FROALA_HTML_TOOLBAR:["bold","italic","underline","strikeThrough","quote","subscript","superscript","fontFamily","fontSize","|","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","insertHR","-","insertLink","insertImage","insertVideo","insertTable","insertPopin","editPopin","editContent","undo","redo","clearFormatting","selectAll","html"],DEFAULT_LOGO:"/assets/img/common/logo.svg",DELVE_FIELDS:["contentType","displayConnectedUser","provider","user"],DEVELOPER_KEY:"AIzaSyDoaJ3V2HvYATFHs-wBjJAmt4XyFoaaHUk",DIRECTORY_FILTERS:["query","directory-tags","metadata"],DRIVE:{clientId:"707106531947-5b60tirb7tb1pabet4r3onmhaaij0jdo.apps.googleusercontent.com",scope:["https://www.googleapis.com/auth/drive.file"]},FEED_PARAMS:["LUMAPPS_ALL","LUMAPPS_PUBLIC"],FEEDTYPE_ICONS:["account","home","briefcase","chart-bar","folder","desktop-mac","heart","star","settings","printer","view-module"],FILE_FIELDS:["thumbnail","name","tags","description"],FILE_TYPES:{DOCUMENT:["document","doc","file","application/pdf"],DRIVE:["drive"],IMAGE:["image"],OTHER:["other"],VIDEO:["video"],XML:["text/xml"]},G_RECAPTCHA_KEY:"6LfSkhsTAAAAAK9gMWpqAHGkLfCwyRTVTBpMe87C",HOOK_STATUS:["DRAFT","PENDING","REFUSED","LIVE","ARCHIVE","DELETED"],IMAGE_GALLERY_FIELDS:["name","description"],INSTANCE_FIELDS:["title","name","subtitle","metadata"],INSTANCE_FILTERS:["query","metadata"],INSTANCE_PROPERTIES:{AVAILABLE_LANGS:{key:"AVAILABLE_LANGS"},BROWSER_TRANSLATION:{key:"BROWSER_TRANSLATION"},CHART_FIELDS:{key:"CHART_FIELDS"},CHAT_FIELDS:{key:"CHAT_FIELDS"},COMMUNITY_FILTERS:{key:"COMMUNITY_FILTERS"},CONTENT_FIELDS:{key:"CONTENT_FIELDS"},CONTENT_FILTERS:{key:"CONTENT_FILTERS"},CONTENT_LIST_EXCERPT:{key:"CONTENT_LIST_EXCERPT"},CONTENT_LIST_LINK_OPEN_NEW_TAB:{key:"CONTENT_LIST_LINK_OPEN_NEW_TAB"},CUSTOM_SEARCH_TABS:{key:"CUSTOM_SEARCH_TABS"},BLOCK_XSS_HTML_TAGS:{key:"BLOCK_XSS_HTML_TAGS"},DELVE_FIELDS:{key:"DELVE_FIELDS"},DIRECTORY_FILTERS:{key:"DIRECTORY_FILTERS"},DISPLAY_LANGUAGE_SELECTOR:{key:"DISPLAY_LANGUAGE_SELECTOR"},IS_LAYOUT_V2_ENABLED:{key:"IS_LAYOUT_V2_ENABLED"},FALLBACK_LANGS:{key:"FALLBACK_LANGS"},FILE_FIELDS:{key:"FILE_FIELDS"},IMAGE_GALLERY_FIELDS:{key:"IMAGE_GALLERY_FIELDS"},INSTANCE_FIELDS:{key:"INSTANCE_FIELDS"},INSTANCE_FILTERS:{key:"INSTANCE_FILTERS"},META_FIELDS:{key:"META_FIELDS"},META_SOCIAL_FIELDS:{key:"META_SOCIAL_FIELDS"},POST_FIELDS:{key:"POST_FIELDS"},POST_FILTERS:{key:"POST_FILTERS"},SEARCH_TABS:{key:"SEARCH_TABS"},SHAREPOINT_SITE_FIELDS:{key:"SHAREPOINT_SITE_FIELDS"},SOCIAL_SETTINGS:{key:"SOCIAL_SETTINGS"},TASKS_FIELDS:{key:"TASKS_FIELDS"},USER_BLOCK_DEFAULT_FIELD:{key:"USER_BLOCK_DEFAULT_FIELD"},USER_BLOCK_USER_DIRECTORY_FIELD:{key:"USER_BLOCK_USER_DIRECTORY_FIELD"},WALL_FIELDS:{key:"WALL_FIELDS"},WYSIWYG_PASTEPLAIN:{key:"WYSIWYG_PASTEPLAIN"},WYSIWYG_TOOLBAR:{key:"WYSIWYG_TOOLBAR"}},META_FIELDS:["author","publication-date","tags","metadata","social"],META_SOCIAL_FIELDS:["like","comment","follow"],POST_FIELDS:["sharedInCommunities","metadata","title","dates","content","attachments","comments"],POST_FILTERS:["query","instance","post-type","community-tags","post-status","relevant-comment","author","report-status"],QUEST_STATUS:["DRAFT","PENDING","LIVE","ARCHIVE","DELETED"],REPORT_OPEN_ANSWER_LIMIT:20,SHAREPOINT_SITE_FIELDS:["thumbnail","name","description"],SOCIAL_SETTINGS:["multiposting_allowed"],TAG_TYPE:{COMMUNITY:"community",MEDIA:"media"},TASKS_FIELDS:["provider","isTeamScoped","alreadyDoneDay","community","plan","bucket"],USER_CREATE_DEFAULT_ACCOUNT_TYPE:"external",USER_DIRECTORY_HIDDEN_FIELD:[],USER_DIRECTORY_IGNORED_FIELD:["primaryEmail","emails[primary=true]/address"],USER_DIRECTORY_INIT_FEED:"LUMAPPS_ALL",USER_DIRECTORY_INIT_FIELD:[{icon:"bank",listDisplay:!1,name:"API_PROFILE_FIELD_TITLE"},{icon:"clipboard-account",listDisplay:!0,name:"API_PROFILE_FIELD_PRIMARY_ORGANIZATIONS_NAME"},{icon:"city",listDisplay:!1,name:"API_PROFILE_FIELD_PRIMARY_ORGANIZATIONS_LOCATION"},{icon:"phone",listDisplay:!0,name:"API_PROFILE_FIELD_PHONES_WORK"},{icon:"phone",listDisplay:!1,name:"API_PROFILE_FIELD_PHONES_PERSONAL"},{icon:"email",listDisplay:!0,name:"API_PROFILE_FIELD_EMAILS_PRIMARY"}],USER_DIRECTORY_REGEX_DEFAULT:[{name:"DEFAULT_PATTERN_EMAIL",pattern:"/^[-a-z0-9~!$%^&*_=+}{'?]+(.[-a-z0-9~!$%^&*_=+}{'?]+)*@([a-z0-9_][-a-z0-9_]*(.[-a-z0-9_]+)*.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,5})?$/i"}],USER_STATUS:[{label:"USER_STATUS_ENABLED",value:"enabled"},{label:"DISABLED",value:"disabled"}],WALL_FIELDS:["contentType","displayConnectedUser","provider","user"],WIDGET_DRIVE_DEFAULT:{copyName:"WIDGET_TYPE_FILE_MANAGEMENT_COPY_OF",newFolderName:"WIDGET_TYPE_FILE_MANAGEMENT_NEW_FOLDER_NAME",spaceName:"WIDGET_TYPE_FILE_MANAGEMENT_DEFAULT_SPACE_NAME"},WIDGET_DRIVE_FILE_CREATION:[{icon:"document",mimeType:"application/vnd.google-apps.document",title:"WIDGET_TYPE_FILE_MANAGEMENT_GOOGLE_DOCUMENT"},{icon:"spreadsheet",mimeType:"application/vnd.google-apps.spreadsheet",title:"WIDGET_TYPE_FILE_MANAGEMENT_GOOGLE_SPREADSHEET"},{icon:"presentation",mimeType:"application/vnd.google-apps.presentation",title:"WIDGET_TYPE_FILE_MANAGEMENT_GOOGLE_PRESENTATION"}],WIDGET_DRIVE_PERMISSION:{read:["commenter","organizer","owner","reader","writer"],write:["organizer","owner","writer"]}};try{angular&&angular.module("Constants").constant("Config",o)}catch(e){i()(e)}},,,,function(e,t,n){"use strict";var r=n(4),i=n.n(r),a=n(302),o=n(465),s=n(64),c=new s.a({path:"groups/applications"}),l=new s.a({path:"workspace"}),u=new s.a({path:"conversation/group/"});n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return v}));var d=function(e){var t=e.page,n=e.maxResults,r=e.uid;return Object(o.a)({page:t,maxResults:n,uid:r}).then((function(e){return{payload:e.data}}),(function(e){return{payload:{errorCode:i()(e.response,"data.error.code"),errorMessage:i()(e.response,"data.error.message")}}}))},p=function(e){var t,n=e.groupId;return(t=n,c.get("get",{params:{groupIdentifier:t}})).then((function(e){return{payload:e.data}}),(function(e){return{payload:{errorCode:i()(e.response,"data.error.code"),errorMessage:i()(e.response,"data.error.message")}}}))},f=function(e){var t=e.notify,n=e.uid;return Object(o.b)({notify:t,uid:n}).then((function(e){return{payload:e.data}}),(function(e){return{payload:{errorCode:i()(e.response,"data.error.code"),errorMessage:i()(e.response,"data.error.message")}}}))},g=function(e){var t=e.groupId;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return u.get("list",{params:{groupId:e,maxResults:t}})}(t).then((function(e){return{payload:e.data}}),(function(e){return{payload:{errorCode:i()(e.response,"data.error.code"),errorMessage:i()(e.response,"data.error.message")}}}))},m=function(e){var t=e.docPath,n={docPath:t,maxResult:8};return Object(a.c)(n).then((function(e){return{payload:e.data}}),(function(e){return{payload:{errorCode:i()(e.response,"data.error.code"),errorMessage:i()(e.response,"data.error.message")}}}))},v=function(e){var t=e.workspaceId;return function(e){return l.get("get",{params:{workspaceId:e}})}(t).then((function(e){return{payload:e.data}}),(function(e){return{payload:{errorCode:i()(e.response,"data.error.code"),errorMessage:i()(e.response,"data.error.message")}}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return d}));var r,i=n(19),a=n.n(i),o=n(43),s=n(7),c=n.n(s),l=n(110),u=n.n(l);!function(e){e.initial="initial",e.loading="loading",e.success="success",e.edited="edited",e.failure="failure"}(r||(r={}));var d={programSocialNetworkStatus:r.initial,socialNetworks:[]},p={fetchSocialNetworks:function(e){c()(e,"programSocialNetworkStatus",r.loading)},fetchSocialNetworksSuccess:function(e,t){c()(e,"programSocialNetworkStatus",r.success),c()(e,"socialNetworks",t.payload)},fetchSocialNetworksFailure:function(e){c()(e,"programSocialNetworkStatus",r.failure),c()(e,"socialNetworks",[])},setSocialNetworkStatus:function(e,t){var n=t.payload.socialNetworkId,i=u()(e.socialNetworks,(function(e){var t=e.socialNetworkId;return t===n}));i>-1?c()(e,"socialNetworks[".concat(i,"]"),t.payload):c()(e,"socialNetworks",[].concat(a()(e.socialNetworks),[t.payload])),c()(e,"programSocialNetworkStatus",r.edited)},setSocialNetworks:function(e,t){c()(e,"socialNetworks",t.payload)},reset:function(){return d}},f=Object(o.a)({domain:"ProgramForm/socialNetworks",initialState:d,reducers:p}),g=f.actions,m=f.reducer},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u}));var r,i=n(43),a=n(7),o=n.n(a);!function(e){e.initial="initial",e.loading="loading",e.loaded="loaded",e.error="error"}(r||(r={}));var s={programIdsByName:{},value:"",searchValue:"",modalStatus:r.initial},c=Object(i.a)({domain:"ProgramForm/ProgramSelectionModal",initialState:s,reducers:{setValue:function(e,t){o()(e,"value",t.payload)},setSearchValue:function(e,t){o()(e,"searchValue",t.payload)},setProgramIdsByName:function(e,t){o()(e,"programIdsByName",t.payload)},setModalStatus:function(e,t){o()(e,"modalStatus",t.payload)}}}),l=c.actions,u=c.reducer},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r="social-advocacy",i={ADMIN:"ADMIN",AMBASSADOR:"AMBASSADOR",PROGRAM_MANAGER:"PROGRAM_MANAGER"},a={CAN_ACCESS_ALL_SHARES_DATA:"CAN_ACCESS_ALL_SHARES_DATA",CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES:"CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES",CAN_MANAGE_SHAREABLE_CONTENTS:"CAN_MANAGE_SHAREABLE_CONTENTS",CAN_MANAGE_SOCIAL_ADVOCACY_AMBASSADORS:"CAN_MANAGE_SOCIAL_ADVOCACY_AMBASSADORS",CAN_MANAGE_SOCIAL_ADVOCACY_PROGRAM_MANAGERS:"CAN_MANAGE_SOCIAL_ADVOCACY_PROGRAM_MANAGERS",CAN_MANAGE_SOCIAL_ADVOCACY_TOPICS:"CAN_MANAGE_SOCIAL_ADVOCACY_TOPICS",CAN_MANAGE_SOCIAL_NETWORK_CONFIGURATIONS:"CAN_MANAGE_SOCIAL_NETWORK_CONFIGURATIONS",CAN_SHARE_SHAREABLE_CONTENTS:"CAN_SHARE_SHAREABLE_CONTENTS"}},function(e,t,n){"use strict";var r=n(107),i=n.n(r),a=n(45),o=n(34),s=Object(o.g)(),c=function(e){var t=e.organizationId;return i()(window.location.host,"localhost:8888")?"".concat("http://localhost:5001","/v").concat("2","/organizations/").concat(t):"".concat(s.applicationHost,"/_ah/api/lumsites/v").concat("2","/organizations/").concat(t)},l=function(e){var t=e.organizationId;return new a.c({baseURL:c({organizationId:t})})},u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o={cursor:n,maxResults:r,maxChildren:i};return l({organizationId:e}).get("providers",{params:Object(a.b)(o),headers:{"Accept-Language":t}})},d=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i="available-extensions?maxResults=".concat(r);return n&&(i+="&cursor=".concat(n)),l({organizationId:e}).get(i,{headers:{"Accept-Language":t}},!0,!1)},p=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i={cursor:n,maxResults:r};return l({organizationId:e}).get("enabled-extensions",{params:Object(a.b)(i),headers:{"Accept-Language":t}})},f=function(e){var t=e.extensionId,n=e.organizationId;return new a.c({baseURL:"".concat(c({organizationId:n}),"/extensions/").concat(t)})},g=function(e){var t=e.extensionId,n=e.organizationId,r=e.versionId;return f({extensionId:t,organizationId:n}).post("",{versionId:r})},m=function(e){var t=e.extensionId,n=e.organizationId;return f({extensionId:t,organizationId:n}).put("")},v=function(e){var t=e.enable,n=e.extensionId,r=e.organizationId;return f({extensionId:n,organizationId:r}).patch("",{enabled:t})},h=function(e){var t=e.extensionId,n=e.organizationId;return f({extensionId:t,organizationId:n}).get("admin-settings")},y=function(e){var t=e.settings,n=e.extensionId,r=e.organizationId;return f({extensionId:n,organizationId:r}).put("admin-settings",t||{})},E=function(e){var t=e.extensionId,n=e.organizationId;return f({extensionId:t,organizationId:n}).delete("")},b=function(e){var t=e.providerId,n=e.organizationId;return"".concat(c({organizationId:n}),"/providers/").concat(t,"/")},O=function(e){var t=e.providerId,n=e.organizationId;return new a.c({baseURL:b({providerId:t,organizationId:n})})},C=function(e){var t=e.providerId,n=e.organizationId;return O({providerId:t,organizationId:n}).get("settings")},T=function(e){var t=e.settings,n=e.providerId,r=e.organizationId;return O({providerId:n,organizationId:r}).put("settings",t)},S=function(e,t,n){var r=e.organizationId,i=e.providerId,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,s={cursor:n,maxResults:o};return O({organizationId:r,providerId:i}).get("installed-extensions",{params:Object(a.b)(s),headers:{"Accept-Language":t}})};n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"k",(function(){return y})),n.d(t,"j",(function(){return E})),n.d(t,"f",(function(){return C})),n.d(t,"l",(function(){return T})),n.d(t,"e",(function(){return S}))},function(e,t,n){"use strict";var r=n(406);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e})),n.d(t,"f",(function(){return r.f}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.facebook="facebook",e.linkedin="linkedin",e.twitter="twitter"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u}));var r,i=n(43),a=n(7),o=n.n(a);!function(e){e.initial="initial",e.loading="loading"}(r||(r={}));var s={socialNetwork:void 0,comment:"",status:r.initial},c=Object(i.a)({domain:"share/shareToSocialNetworkDialog",initialState:s,reducers:{setStatus:function(e,t){o()(e,"status",t.payload)},setComment:function(e,t){o()(e,"comment",t.payload)},setSocialNetwork:function(e,t){o()(e,"socialNetwork",t.payload)}}}),l=c.actions,u=c.reducer},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){return e.findIndex((function(e){return e.uid===t}))}var s=n(6),c=n.n(s),l=n(10),u=n.n(l),d=n(314),p=n.n(d),f=n(525),g=n(53),m=n(172),v=n(3),h=n.n(v),y=n(64),E=new y.a({path:"groups/users"}),b=function(e){return E.get("get",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{},{},e))},O=function(e){var t=e.groupUserType,n=e.userId,r="owners"===t?m.b.OWNER:m.b.MEMBER;return{type:r,uid:n}},C=function(e){var t=e.adminKeys,n=void 0===t?[]:t,r=e.userKeys,i=void 0===r?[]:r,a=[];return n.forEach((function(e){a.push({type:m.b.OWNER,uid:e})})),i.forEach((function(e){a.push({type:m.b.MEMBER,uid:e})})),a},T="".concat(g.c,"/").concat("members"),S="".concat(T,"/ADD_MEMBER"),I="".concat(T,"/REMOVE_MEMBER"),_="".concat(T,"/SET_MEMBER_TYPE"),A="".concat(T,"/FETCH_GROUP_MEMBERS_ERROR"),w="".concat(T,"/FETCH_GROUP_MEMBERS_LOADING"),D="".concat(T,"/FETCH_GROUP_MEMBERS_SUCCESS"),L="".concat(T,"/CLOSE_USER_PICKER"),P="".concat(T,"/OPEN_USER_PICKER"),N="".concat(T,"/SET_USER_PICKER_QUERY"),R="".concat(T,"/FETCH_USERS_LOADING"),j="".concat(T,"/FETCH_USERS_SUCCESS"),k=function(e){var t=e.uid;return function(e){e({payload:{uid:t},type:S})}},F=function(){return function(e,t){var n=t(),r=n.users.list,i=n.admin.communities.communitySetup.settings.members.members,a=i.filter((function(e){var t=e.uid;return!r[t]})).map((function(e){return e.uid}));0!==a.length&&e(Object(f.a)({showHidden:!0,users:a.splice(0,20)}))}},U=function(){return function(e,t){e({type:w});var n=t(),r=n.admin.communities.communitySetup.group.id,i={emailOnly:!1,groupIdentifier:r};return function(e){return b({params:e}).then((function(e){var t=e.data,n=t.items.map(O);return{payload:{members:n}}}))}(i).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({payload:n,type:D}),e(F())})).catch((function(t){e({payload:t,type:A})}))}},M=function(e){var t=e.uid;return function(e){e({payload:{uid:t},type:I})}},x=function(e){var t=e.type,n=e.uid;return function(e){e({payload:{type:t,uid:n},type:_})}},$=function(){return function(e){e({type:L})}},B=function(){return function(e){e({type:P})}},W=function(e){return e().admin.communities.communitySetup.settings.members.userPicker},G=function(){return function(e,t){var n,r=W(t),i=r.query,a=r.results,o=a["q-".concat(i)];if(o){var s=o.hasMore,c=o.loading;if(n=o.cursor,!s||c)return Promise.resolve()}return e({payload:{query:i},type:R}),e(Object(f.a)({cursor:n,query:i,showHidden:!0})).then((function(t){var n=t.cursor,r=t.users,a=void 0===r?[]:r,o=a.map((function(e){return e.id}));e({payload:{newCursor:n,query:i,users:o},type:j})}))}},Y=function(){return function(e,t){var n=t(),r=n.user,i=r.connectedUser.uid;e({payload:{uid:i},type:S}),e({payload:{type:m.b.OWNER,uid:i},type:_})}},H=function(e){var t=e.query;return function(){var e=u()(c.a.mark((function e(n,r){var i,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=W(r),a=i.cursors,o=p()(a,{query:t}),e.next=4,n({payload:{cursor:o,query:t},type:N});case 4:return e.next=6,n(G());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},K=n(19),V=n.n(K),z=n(37),q=n(133),X=n(113),Q=n(299),Z="".concat(q.ANGULAR_ACTION_PREFIX,"/community-dialog/update"),J={members:[],loading:!1,userPicker:{results:{},open:!1,query:void 0}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return Object(z.a)(e,(function(e){var n=t.payload,r=t.newState,i=void 0===r?{}:r,s=i.editedCommunity;switch(t.type){case Z:if(s){var c=s.adminKeys,l=s.userKeys;e.members=C({adminKeys:c,userKeys:l})}break;case g.a:case g.f:case g.i:case X.c:Object.assign(e,J);break;case S:e.members.push(a({type:m.b.MEMBER},n));break;case I:var u=o(e.members,n.uid);e.members.splice(u,1);break;case _:var d=o(e.members,n.uid);e.members[d].type=n.type;break;case A:e.loading=!1;break;case w:e.loading=!0;break;case D:n.members.forEach((function(t){e.members.find((function(e){return e.uid===t.uid}))||e.members.push(t)})),e.loading=!1;break;case L:e.userPicker.open=!1;break;case P:e.userPicker.open=!0;break;case N:var p=n.query;e.userPicker.query=p;break;case R:var f=n.query,v=Object(Q.b)(f),h=e.userPicker.results;h[v]?h[v].loading=!0:h[v]={cursor:void 0,users:[],hasMore:!0,loading:!0};break;case j:var y,E=n.users,b=n.newCursor,O=n.query,T=e.userPicker.results,k=Object(Q.b)(O),F=Boolean(b),U=T[k];Object.assign(U,{cursor:b,hasMore:F,loading:!1}),(y=U.users).push.apply(y,V()(E))}}))};n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return F})),n.d(t,"k",(function(){return H})),n.d(t,"e",(function(){return G})),n.d(t,"f",(function(){return Y})),n.d(t,"b",(function(){return $})),n.d(t,"g",(function(){return B})),n.d(t,"i",(function(){return M})),n.d(t,"j",(function(){return x})),n.d(t,"h",(function(){return ee}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(7),i=n.n(r),a=n(43),o={currentDialogPostId:void 0,userSpacesStatus:null,userSpaces:[],filterUserSpaceValue:"",showUserSpaceSuggestions:!1,selectedUserSpace:void 0,channelsStatus:null,channels:[],filterChannelValue:"",showChannelSuggestions:!1,navigationChannelSuggestionValue:"",selectedChannelValues:[],message:"",postingToChannel:!1},s=Object(a.a)({domain:"shareToTeams",initialState:o,reducers:{toggleDialog:function(e,t){i()(e,"currentDialogPostId",t.payload)},fetchJoinedUserSpacesLoading:function(e){i()(e,"userSpacesStatus","loading")},fetchJoinedUserSpacesSuccess:function(e,t){var n=t.payload.items;i()(e,"userSpaces",n),i()(e,"userSpacesStatus","loaded")},fetchJoinedUserSpacesError:function(e){i()(e,"userSpaces",o.userSpaces),i()(e,"userSpacesStatus",null)},fetchChannelsLoading:function(e){i()(e,"channelsStatus","loading")},fetchChannelsSuccess:function(e,t){var n=t.payload.items;i()(e,"channels",n),i()(e,"channelsStatus","loaded")},fetchChannelsError:function(e){i()(e,"channels",o.channels),i()(e,"channelsStatus",null)},setFilterUserSpaceValue:function(e,t){i()(e,"filterUserSpaceValue",t.payload),i()(e,"selectedUserSpace",o.selectedUserSpace),i()(e,"selectedChannelValues",o.selectedChannelValues),i()(e,"channels",o.channels),i()(e,"channelsStatus",null)},setShowUserSpaceSuggestions:function(e,t){i()(e,"showUserSpaceSuggestions",t.payload)},setSelectedUserSpace:function(e,t){i()(e,"selectedUserSpace",t.payload)},setFilterChannelValue:function(e,t){i()(e,"filterChannelValue",t.payload)},setShowChannelSuggestions:function(e,t){i()(e,"showChannelSuggestions",t.payload)},setNavigationChannelSuggestionValue:function(e,t){i()(e,"navigationChannelSuggestionValue",t.payload)},setSelectedChannelValues:function(e,t){i()(e,"selectedChannelValues",t.payload)},setMessage:function(e,t){i()(e,"message",t.payload)},postingToChannel:function(e){i()(e,"postingToChannel",!0)},resetForm:function(e){i()(e,"currentDialogPostId",o.currentDialogPostId),i()(e,"userSpacesStatus",o.userSpacesStatus),i()(e,"userSpaces",o.userSpaces),i()(e,"filterUserSpaceValue",o.filterUserSpaceValue),i()(e,"showUserSpaceSuggestions",o.showUserSpaceSuggestions),i()(e,"selectedUserSpace",o.selectedUserSpace),i()(e,"channelsStatus",o.channelsStatus),i()(e,"channels",o.channels),i()(e,"filterChannelValue",o.filterChannelValue),i()(e,"showChannelSuggestions",o.showChannelSuggestions),i()(e,"navigationChannelSuggestionValue",o.navigationChannelSuggestionValue),i()(e,"selectedChannelValues",o.selectedChannelValues),i()(e,"message",o.message),i()(e,"postingToChannel",o.postingToChannel)}}}),c=s.actions,l=s.reducer},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var a=n(16),o=n.n(a),s=n(8),c=n.n(s),l=n(0),u=n.n(l),d=n(1),p=n(15),f=n(357),g=n(11),m=n(72),v=function(e,t){var n=t.useCustomerLanguages;return{languages:Object(m.c)(e,n),defaultLanguage:Object(m.a)(e)}},h={},y=function(e){return Object(g.connect)(v,h)(e)},E=(y((function(e){var t=e.selected,n=void 0===t?"":t,r=e.languages,i=e.open,a=void 0!==i&&i,s=e.onChange,l=e.selectProps,g=void 0===l?{}:l,m=u.a.useState(a),v=c()(m,2),h=v[0],y=v[1],E=Object(p.c)(),b=E.translateKey,O=u.a.useCallback((function(){y(!h)}),[h]),C=Object(f.b)(n,b),T=u.a.useMemo((function(){var e=r.map((function(e){return{key:e,label:Object(f.b)(e,b)}}));return e.sort((function(e,t){return e.label.localeCompare(t.label)}))}),[r,b]);return u.a.createElement(d.Select,o()({value:C,isOpen:h,onInputClick:O,onDropdownClose:function(){return y(!1)}},g),u.a.createElement(d.List,{isClickable:h},T.length>0&&T.map((function(e){return u.a.createElement(d.ListItem,{isSelected:n===e.key,key:e.key,size:d.Size.tiny,onItemSelected:(t=e.key,function(){y(!1),s(t)})},e.label);var t}))))})),n(3)),b=n.n(E),O=n(12),C="translations-dropdown",T=function(e){var t=e.values,n=void 0===t?{}:t,i=e.labels,a=void 0===i?{}:i,o=e.languages,s=e.onChange,c=e.onClose,l=e.onAccept,g=e.isOpen,m=void 0!==g&&g,v=e.anchorRef,h=Object(p.c)(),y=h.translateKey,E=u.a.useMemo((function(){var e={};return o&&o.forEach((function(t){e[t]=a&&a[t]?a[t]:Object(f.b)(t,y)})),e}),[o,y,a]);if(!o||o&&0===o.length)return null;var O=function(e){return function(t){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,b()({},e,t));s(i)}};return u.a.createElement(d.Dropdown,{className:C,isOpen:m,closeOnEscape:!0,onClose:c,anchorRef:v},o.map((function(e){return u.a.createElement(d.TextField,{key:e,label:E[e],className:"".concat(C,"__lang-text-field"),value:n[e],onChange:O(e)})})),u.a.createElement(d.Button,{className:"".concat(C,"__accept"),emphasis:d.Emphasis.low,onClick:function(e){e.preventDefault(),l()}},y("GLOBAL.OK")))},S="translatable-text-field";y((function(e){var t=e.defaultLanguage,n=e.values,r=void 0===n?{}:n,a=e.languages,s=e.onChange,l=e.onAccept,p=e.textField,f=void 0===p?{}:p,g=e.labels,m=u.a.useRef(null),v=u.a.useState(!1),h=c()(v,2),y=h[0],E=h[1],C=u.a.useMemo((function(){return a?a.filter((function(e){return e!==t})):[]}),[a,t]);if(!a||a&&-1===a.indexOf(t))return null;var I=function(){E(!1)};return u.a.createElement("div",{className:S},u.a.createElement(d.TextField,o()({textFieldRef:m,className:"".concat(S,"__text-field"),value:r[t]||"",onChange:function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,b()({},t,e));s(n)}},f)),u.a.createElement(d.IconButton,{className:"".concat(S,"__icon"),emphasis:d.Emphasis.medium,icon:O.Oc,size:d.Size.s,onClick:function(e){e.preventDefault(),E(!y)},label:""}),u.a.createElement(T,{languages:C,onAccept:function(){l(),I()},onChange:function(e){s(e)},values:r,labels:g,onClose:I,isOpen:y,anchorRef:m}))})),y(T),n(293);n.d(t,"a",(function(){return m.a})),n.d(t,"b",(function(){return m.b}))},,function(e,t,n){"use strict";var r=n(424),i=n(493),a=n(0),o=n.n(a),s=n(2),c=n(14),l=n.n(c),u=n(31),d=function(e){var t=e.anchorEl,n=e.children,r=e.isOpen,i=Object(a.useRef)(null);return r&&o.a.createElement("div",{ref:i,className:l()("menu"),style:{marginTop:Object(u.l)(t)}},o.a.createElement("div",{className:"menu__content"},n))};d.propTypes={anchorEl:s.node.isRequired,children:s.node.isRequired,isOpen:s.bool.isRequired};var p=n(335);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return i.a})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p.a}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return l}));var r=1,i=10,a={INSTANCE_REQUIRED:"ADMIN.CUSTOMER.STREAMS.INSTANCE_REQUIRED",MIN_MAX_CONTENT_DISPLAY_ERROR:"ADMIN.CUSTOMER.STREAMS.MIN_MAX_CONTENT_DISPLAY_ERROR",NAME_REQUIRED:"ADMIN.CUSTOMER.STREAMS.NAME_REQUIRED"},o="tmp-",s={SPOTLIGHT:{name:"ADMIN.CUSTOMER.STREAMS.VIEW_MODE_SPOTLIGHT",uid:"SPOTLIGHT"},LIST:{name:"ADMIN.CUSTOMER.STREAMS.VIEW_MODE_LIST",uid:"LIST"}},c=["LIST","SPOTLIGHT"],l={feedIds:[],filterFields:{categories:[],contentTypeIds:[],defaultInstanceRelatives:!1,favoriteSitesOnly:!1,featuredOnly:!1,highlightedOnly:!1,instanceIds:[],metadataIds:[],metadataList:[{}]},isViewLocked:!1,label:{},limit:3,priority:0,uid:"",viewMode:"LIST"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){window.requestIdleCallback?window.requestIdleCallback((function(){return e()}),{timeout:1e3}):e()}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e){return e.instance||{}},i=function(e){var t=r(e);return t.uid||t.id}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o}));var r=30,i=5,a="notifications",o={fields:"items(actions(senderDetails(apiProfile(profilePicture,thumbnail,thumbnailPhotoUrl),firstName, lastName,fullName,uid)),digest,notification(actionCount,contentDetails(endDate,postStatusDetails(title),slug,title,type),customerId,description,externalKey,group,groupName,instanceDetails(slug),instanceId,link,parentContentDetails(slug,title),parentId,priority,properties,thumbnail,title,type,uid,unreadNotificationCount,updatedAt,url,isRead)),more,callId,cursor",maxResults:r,sortOrder:"-priority"}},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return u}));var r,i,a=n(19),o=n.n(a),s=n(7),c=n.n(s),l=n(43);!function(e){e.initial="initial",e.loading="loading",e.noPrograms="noPrograms",e.withPrograms="withPrograms",e.failure="failure"}(r||(r={})),function(e){e.initial="initial",e.loading="loading",e.success="success",e.notFound="notFound",e.failure="failure"}(i||(i={}));var u={userProgramsStatus:r.initial,fetchSingleProgramStatus:i.initial,entities:[]},d={fetchPrograms:function(e){c()(e,"userProgramsStatus",r.loading)},fetchProgramsSuccess:function(e,t){var n;c()(e,"userProgramsStatus",(null===(n=t.payload)||void 0===n?void 0:n.length)>0?r.withPrograms:r.noPrograms),c()(e,"entities",t.payload||[])},fetchProgramsFailure:function(e){c()(e,"userProgramsStatus",r.failure)},fetchSingleProgram:function(e){c()(e,"fetchSingleProgramStatus",r.loading)},fetchSingleProgramSuccess:function(e,t){c()(e,"fetchSingleProgramStatus",i.success);var n=e.entities.findIndex((function(e){return e.id===t.payload.id}));-1!==n?c()(e,"entities.".concat(n),t.payload):c()(e,"entities",[].concat(o()(e.entities),[t.payload]))},fetchSingleProgramNotFound:function(e){c()(e,"fetchSingleProgramStatus",i.notFound)},fetchSingleProgramFailure:function(e){c()(e,"fetchSingleProgramStatus",i.failure)},resetFetchSingleProgram:function(e){c()(e,"fetchSingleProgramStatus",i.initial)},setProgram:function(e,t){c()(e,"fetchSingleProgramStatus",i.success),c()(e,"entities",[t.payload])}},p=Object(l.a)({domain:"userPrograms",initialState:u,reducers:d}),f=p.actions,g=p.reducer},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return m}));var r=n(19),i=n.n(r),a=n(7),o=n.n(a),s=n(21),c=n.n(s),l=n(43),u=n(110),d=n.n(u),p=n(199),f=Object(l.a)({domain:"notificationCenter",initialState:{notificationGroups:[],unreadNotificationsCount:0,isLoading:!1,hasError:!1,more:!1,lastNotification:{}},reducers:{setIsLoadingNotifications:function(e,t){o()(e,"isLoading",t.payload)},addNotifications:function(e,t){var n=t.payload,r=n.notifications,a=n.more,s=n.cursor,c=n.unreadNotificationsCount,l=e.notificationGroups;r&&r.length>0&&o()(e,"notificationGroups",[].concat(i()(l),i()(r))),o()(e,"unreadNotificationsCount",c),o()(e,"more",a),o()(e,"cursor",s),o()(e,"hasError",!1)},setNotifications:function(e,t){var n=t.payload,r=n.notifications,i=n.more,a=n.cursor,s=n.unreadNotificationsCount;o()(e,"notificationGroups",r),o()(e,"unreadNotificationsCount",s),o()(e,"more",i),o()(e,"cursor",a),o()(e,"hasError",!1)},setNotificationsError:function(e,t){o()(e,"hasError",t.payload)},setNotificationRead:function(e,t){e.unreadNotificationsCount<=p.c&&o()(e,"unreadNotificationsCount",e.unreadNotificationsCount-1);var n=c()(e.notificationGroups,(function(e){var n;return(null===(n=e.notification)||void 0===n?void 0:n.uid)===t.payload}));n&&n.notification&&o()(n.notification,"isRead",!0)},setNotificationUnread:function(e,t){e.unreadNotificationsCount<=p.c&&o()(e,"unreadNotificationsCount",e.unreadNotificationsCount+1);var n=c()(e.notificationGroups,(function(e){var n;return(null===(n=e.notification)||void 0===n?void 0:n.uid)===t.payload}));n&&n.notification&&o()(n.notification,"isRead",!1)},setAllNotificationRead:function(e){o()(e,"unreadNotificationsCount",0),e.notificationGroups.forEach((function(e){e.notification&&o()(e.notification,"isRead",!0)}))},deleteNotification:function(e,t){!t.payload.isRead&&e.unreadNotificationsCount<=p.c&&o()(e,"unreadNotificationsCount",e.unreadNotificationsCount-1);var n=d()(e.notificationGroups,(function(e){var n;return(null===(n=e.notification)||void 0===n?void 0:n.uid)===t.payload.uid}));if(n>=0){var r=i()(e.notificationGroups);r.splice(n,1),o()(e,"notificationGroups",r)}},clearNotifications:function(e){o()(e,"unreadNotificationsCount",0),o()(e,"notificationGroups",[])},setLastNotification:function(e,t){o()(e,"lastNotification",t.payload)}}}),g=f.actions,m=f.reducer},function(e,t,n){"use strict";var r=n(19),i=n.n(r),a=n(58),o=n(80),s=n(74),c=n(34),l=n(0),u=n.n(l),d=n(11),p=n(139),f=n(292);n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return E})),n.d(t,"a",(function(){return p.d}));var g=Object(c.g)(),m=g.environment,v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";Object.keys(e).forEach((function(t){var r=e[t],i=r?t:"".concat(p.b).concat(t);n=n.length>0?"".concat(n,",").concat(i):i})),a.b.store(p.a,n,a.a.STORAGE),t&&window.location.reload()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=p.c[n||m||c.b.DEVELOPMENT],o=Object.keys(p.d),s={},l=a.b.retrieve(p.a,a.a.STORAGE),u=l?l.split(","):[],d=[];return u.length>0&&d.push.apply(d,i()(u)),e.length>0&&d.push.apply(d,i()(e)),o.forEach((function(e){var n=p.d[e],i=d.filter((function(e){return e.replace(p.b,"")===n}));if(i&&i.length>0)s[n]=i[i.length-1].indexOf(p.b)<0;else{var a=r.indexOf(n);s[n]=a>=0}t&&t[n]&&(s[n]=t[n])})),v(s),s},y=function(){var e,t,n,r,i,a=Object(o.i)(),s=a.modes,g=Object(d.useSelector)(f.b),v=Object(l.useMemo)((function(){return h(s?s.split(","):[],g)}),[s,g]),y=function(e){return v[e]};return e={isEnabled:y(p.d.WITH_CUSTOM_COLORS),env:m},t=e.isEnabled,n=void 0===t||t,r=e.env,i=void 0===r?c.b.DEVELOPMENT:r,u.a.useLayoutEffect((function(){if(n){if(i===c.b.DEVELOPMENT){var e=window.CUSTOM_COLORS;if(e){var t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.appendChild(document.createTextNode(e)),t.appendChild(r)}}}else{var a=document.getElementById("custom-css-for-instance");a&&(a.disabled=!0)}})),function(e){var t=e.isEnabled,n=void 0===t||t,r=e.env,i=void 0===r?"development":r;u.a.useLayoutEffect((function(){if(n){if(i===c.b.DEVELOPMENT){var e=window.INSTANCE_HEAD,t=document.head||document.getElementsByTagName("head")[0];t.insertAdjacentHTML("beforeend",e||"")}}else i===c.b.PRODUCTION&&(document.querySelectorAll("#instance-head-style").forEach((function(e){e&&(e.disabled=!0)})),document.querySelectorAll("#instance-head-script").forEach((function(e){e&&(e.disabled=!0)})))}))}({isEnabled:y(p.d.WITH_HEAD),env:m}),function(e){var t=e.isEnabled,n=void 0===t||t,r=e.env,i=void 0===r?"development":r;u.a.useLayoutEffect((function(){if(n){if(i===c.b.DEVELOPMENT){var e=window.STYLESHEETS,t=document.head||document.getElementsByTagName("head")[0];if(e){var r=e.split("#$&");r.forEach((function(e){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,t.appendChild(n)}))}}}else i===c.b.PRODUCTION&&document.querySelectorAll("#instance-stylesheet").forEach((function(e){e&&(e.disabled=!0)}))}))}({isEnabled:y(p.d.WITH_INSTANCE_STYLES),env:m}),function(e){var t=e.isEnabled,n=void 0===t||t;u.a.useLayoutEffect((function(){if(n){var e=document,t=e.body;t.classList.contains("headless")||t.classList.add("headless")}}))}({isEnabled:y(p.d.HEADLESS)}),{modes:v,isModeEnabled:y,featureFlags:g}},E=function(){a.b.store(p.a,"",a.a.STORAGE),window.location.href=Object(s.n)("modes",window.location.href)}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return y}));var a=n(3),o=n.n(a),s="/ls/profile/",c={path:"".concat(s,":id/:view?"),legacyId:"app.front.profile"},l={path:"/admin/users-management",legacyId:"app.admin.users-management"},u={path:"/admin/instance-admin",legacyId:"app.admin.instance-admin"},d={path:"/logout",legacyId:"logout"},p={path:"/login",legacyId:"login"},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userId,n=e.view,r=void 0===n?void 0:n,a=e.query,o={id:t||"me",view:r};return i({},c,{params:o,query:a})},g=function(){return u},m=function(){return l},v=function(){return d},h=function(){return p},y=function(e){return e.indexOf(s)>=0}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o}));var r,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAA3NCSVQICAjb4U/gAAAMP0lEQVR4nO2dWXMbxxGAu2cPLBYHcRAERYqHxFsOFcklqaLIlVRSlbgqD8lvyw/Je15SfknlcCVlJy5ZlmWRJkUSIogbe2CPmc4DLIaiJZkiiZmVjO9RYHFXHxu9Mz0zvfjHPz2FMaOHqb6BHwtj0ZIYi5bEWLQkxqIlMRYtibFoSYxFS2IsWhJj0ZIYi5bEWLQkxqIlMRYtibFoSYxFS0JXfQNnBBEBAAgAiBTfy7lIoujvpL6ACAYDPwx8BgJRpDIlQzeGzuHdUZ840YjMcfqcx5qmEUEch1mTX6tOTE1eMXSdMfz3F9s9l4iQExChmUpnMlmC/7tGAEqe+mSIRsRhXCL22oeby2UrZQ6CCAEm8pVsxtYYEy/cfXR3IwhDIUgIAUDPas1vntVe+hIwIzdRJiKABOlWLxqRua4TDfr5NBtE/Geb85VyQQgBw6RMQERciOOf50SGrsMLs2tLV6/PTx9/yhAPG+1/fPEsNzFpWWkiAclArWjkgvea+5srUwtXNzSNEREAxpwDvCkcT+ZlItA07eSnM9OVP1SKWzu1h1vPipMzpzK+KlQO7zjn3Dv63S8/WFqYQUQhaBi/F/y1QghEtro09/GDtVbzEDERQ1hVN4FEFDn1X9/f0HX9ZGa4LISgKBZxPEw7qDyulYjGKAp63dbtG7OMaSMaIRCRnbburJfT1PK7tX63rda1ghwdx3GW9UolvTJZEiOI5WMYw2sLs9cXQde0/z7a/vbItTO2KtmyRSNiGPg3lisz05U45qO+3PAPKYRYWpj2B7sdp8GsEmMKvseyL8k5x7g/VS5KsHwMERiGcffWatrEkX6H3oBU0YjY7zY/urOMKmKq0ey0fc0wDPmXBsmiuaBKnuWyGflTZAQIggCZGssgVzTGcTRZyAihYGZMAPl8Lg4cVVUQeaIJqNWol0sTSio+w9He7bWpbvtIyThPkmhE1m3s/+rOQrGQU1VaE0LMX61WC5rM5/AxkkRHcXR9Jj89VVKSN44RQsxNF8PAB+lBLUc0RmGYyVhcqWUAIALLSnEeyc8dckQT07Qo4srLaAgQRRFjCubDklKHYZiO54N609h3fN935T8nJIlmiN1+qLyEJoS4tjjz4OaVfk92jUnaqAN7Xqw8oAGAIQvCSDcsyTEtbxwdxsB5EhaWSNd1ElxyHpMmmgwz5bie8uxBBHbaiuNQ8n3Ii2jDNF1vkITsEcecofbDP3epSBJNBLpuDIJQ/kzhFIjYd1w9lXpfc/RwKB3LutxrQYR2zzN0U/KuD2mi8dT2DFUgYM8Nkb2fU3BARKfTWLk+p2qB48SdgB9wJn0PgrzrxVwYuuxH0PeJYh5xkv+kkJejs/niXq3OpH9nT4KIrXZXNzPyLy1t1EHZXP7x05qmYrXwGMawVm+bKfu9rXUAACJ0Bnqn5yics8Qx328MDNOUf2l5D0O33yvY8GT7QFX2YAx39+ue7/tuX/4fW1JlNgyjai6+d3vT9QY8FkrqpUQwWZr4/a8rWzsH23UnncnKPCogI6IR0ffd2SvlKI51XVNVlSaibCatadra8rzvdt/DWgcRmGbKcXxQXfmnF7yva4aUstL1Zk/p0O47ENF1B5omeyeNvBWWWmugvEYKAIjQcxzDtCSP7yQWlQy72e4qd42Ana5rpCzJh+bkTVjyE8XdfcUzQxhW7/oDjb2n9WgA0DTtoOEx5RGN2OmH8rdIS5wZAvkher7KTI2IfccTaLzHRSUgouxEae+grlQ0dHqOYabl75iS+g0yzdTu866mLk0jYrvr6kZK/vFxqaIZghPq7a6CUsMQRGx1/VMHQOUgVTQR5fKlzx5+qzGUXKgURIgYRVHf50xTUKqVvd2PaSzUCn/525ca8l/e35SzpYYxPKi1vt6uAWAqU1LSdkL635bINC1mTzmh4bi+nByCiK2OE2lFLVM1DAXFaFB0cpYYAjOsZkveRLHd8ywrddzFRj5qFpaIKJVK79e7EiaKiDAYhH6o+Di4shU8Tde6LvcHwaj/+wjY7TscDLVTUmWiEYBYutEcefZAhvvP25at4HDjSZSJJqJ0JrO91xh19SOOeaMzUHVg9hiVi/8aY10fRjr2QMRuzx1wxXkD1IomItPKb+0eju6RyBg++baWzas5RfrSnai9vGVZu3U3DKNRxDQi+n5Q78S6ijn3KZT3GyI0Mjt79VHsOmQMH2/tp3NF5eEMykUTUTaTe7zTCqNLDmpE9PzBtzU3ZaYu8/eeF+URDURk2sVH3+xd7qqHprFPP38yUaompPWdetEAZFnprZrXbHUvy7WuaVs7NSeyNRWFuleSiPsgEqVy9e+f7wRBcPFhtcZYs93996Pn+UIhCdl5SCJEAwAAZYtXPvnn10EYXiQMNY21u71PPv2mMn2VVJ8uOElyRAMipCem//zXr3b3zrkrgTHcqzU++XRrsjqftF7HCRINAAhQrMx+/rh2vmSNiLv7jcLkTKL67A5JlmgAAALLPP/8Ip3Sk5OXT5I40YIoZ59TFhHksxaPo0u/q4uTONE8jsoT9vmCkoimJksDX+XpjdeRLNGI6HvOuTuJEdFEPmNimMDkkSzRABiH3uQFWrZxQWuLZc9zkxbUSRGNiIDoet5M+UI7l4UQ1xZmKegEYZSQFt1D1N8KIgqifr836B0ulMWHm8sX3OwhBP3q/nrRdHvtwyAIEZnyIx2gtsc/IsYxd51uPhXfXpqqVhY0Xbv4lhoiSpnm3Z+uOJ63tXO4e9jRrLydtglI4SwG//inpwquiiwMQ8/tTOW1lcVqqZgHgEvvPYiIjOFgEGw/O9w+6KORtTMZVW9pkd+omwVB4Lvtq5PWzzYWshlbEI2ovSMRcU6maW6szC8tRLv7R092a6RnM9mcfN3yRA8VO92jpdnc6s0VyzKFkNHBY6hb17TlxZlrc9W92tGjrVqEdn6igEDSdMsQjcgGwcDpHK3OT6zd/sAwdCFIcscwAuBCAOL81en52Wqt3vzi6/2BSBeLJZCie7SiEdkgCJzO4fpicf3OTcaY4EJtU7ZhZ5Yr1fLs9GS90f7syx03tkqlCuJodY/sYYgYBoHbO1qdK2ysLiBiMprevQRD1DTWbHc//3KnFxj5QkljbES6RyAaMQwC32kuz+bXl+eZxhKo+CSIqGus3en/56vdrs8y+aKuXf7bYS5TNCIGQeg7zaWZ7NryvH4Zg2JpvNDde/hkv+mCnS0Y+mVWXC8nRyOyMAx8tz1XsW7cWjdNg6vOxW8LEUUxz+WyH93d6HT7D5/sNztkZSZMw7gU3ReNaESMothzWjMl88bKVTud5oInsHj2ViCiprFuz3n89OB5J05nCqZpXnDbwvkjevh8c/qtSg7u3VnM5zKci+/ekPeOQ0RxzLMZ+97t1V7fffz04Hm7nbILqVTq3LrPI3r4Srx+r5M1gp9vXp0sTXBBSt5QMFKGujN2+u5Pl/uu92T7+V6jk84Uzxfdby0akbluX+Puh6vVK9UyEMTvVC5+W4go5mSn07d/cn3F8R49Pai1Otl8SdffbmTyFqIRMYwir9dYXyguLawzTVPellEaw3m8bafv3lzu9d2HT/bqTVEoVQDP+g7ns4pGZK3WUTUHH/181bJSnIsfj+VjiIgTZbP2/Q/Xmu3uv77YIbNg25mzZJIzFv6xdbR/d718/866aZrv1rjt0hl2sy0V8x//YnOmIJrNo7PsQjmDaGTd5sHHD1Znpyuci2TumpCPEMQF3bpxbXUmVa8f/qDrH/gYkbXqe799sGZZqSQ0JU4aUcw3byzdmLcbjaM3L1G+6TNE1qzv/eb+Siplqn31UpKJoviDtWvLVyz3jUvvrxWNyI7q+w9uzWUz9tjym4lifnPjWsHwBoPX9td5tWhEdN3+B4uFqUppnDHOAhf83u0V7jdep+vVoqMoTqOztjz3Ix9gnB0iYMgefLjSa7+6l9ErRePAad67tTIeX7wVgiifz6zO5T3P+35LztOiEdHp936yPGlbqfFI7m0RXCwvzmDc//7+7NOihSCLeXMzlXFqPgcEYOj6ynzJ89xTQf2SaER03d7G9Wqidq29WwgSs9NliN1T//6SUCIwYFCdKv8I6xiXBRFYKbOcN+KX3+7zkuggDGYq2eSczXtHEQTVci4Mg5PZ4/9OETEKB9OT+fH05IIQUda2hHjpzbb/A34K7qkAUaRgAAAAAElFTkSuQmCC";!function(e){e.ROOT="ROOT"}(r||(r={}));var a="edit-user-settings",o=["settings","notifications","socialProfiles","nativeIntegrations"]},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var i=n(3),a=n.n(i),o=n(19),s=n.n(o),c=n(43),l=n(7),u=n.n(l),d=n(156),p=n(44),f=n(79),g=Object(c.a)({domain:"newSearch",initialState:f.a,reducers:{transitionToLoadingState:function(e){u()(e,"status",p.p.LOADING)},transitionToBrowsingState:function(e){u()(e,"status",p.p.BROWSING)},transitionToErrorState:function(e,t){var n=(null==t?void 0:t.payload)||{},r=n.filter;if(u()(e,"status",p.p.ERROR),u()(e,"facets",f.a.facets),r!==p.a&&e.filters&&0===e.filters.length){var i=Object(d.c)("FILTER_RESET","FILTER_RESET");u()(e,"filters",[i]),u()(e,"selectedFilter",i),u()(e,"filter","FILTER_RESET")}},setResults:function(e,t){var n=t.payload,r=n.items,i=n.filters,a=n.metadata,o=n.query,c=n.cursor,l=n.filter,d=n.facets,g=n.sort,m=n.more,v=n.sorts,h=n.appendResults,y=void 0!==h&&h,E=n.spellResults;u()(e,"results",y?[].concat(s()(e.results),[r]):[r]),u()(e,"filters",y&&e.filters?e.filters:i||f.a.filters),u()(e,"metadata",y&&e.metadata?e.metadata:a||f.a.metadata),u()(e,"sorts",y&&e.sorts?e.sorts:v||f.a.sorts),u()(e,"query",o),u()(e,"filter",l),u()(e,"cursor",c),u()(e,"hasMoreResults",m),u()(e,"status",p.p.BROWSING);var b=y&&e.facets?e.facets:d||f.a.facets;if(e.prevFacet){var O=b.findIndex((function(t){return t.id===e.prevFacet.id}));O>=0&&b[O]&&b[O].value&&(b[O].choices=e.prevFacet.choices)}if(u()(e,"facets",b),g){var C=Object(p.w)(g);u()(e,"sort",C.sort),u()(e,"order",C.order)}else u()(e,"sort",f.a.sort),u()(e,"order",f.a.order);var T=E&&E[0]?E[0].suggestedQuery:null;u()(e,"suggestedQuery",T)},setFilters:function(e,t){var n=t.payload,r=n.filters,i=n.metadata,a=n.filter;u()(e,"filters",r||f.a.filters),u()(e,"metadata",i||f.a.metadata),u()(e,"filter",a),u()(e,"status",p.p.BROWSING),u()(e,"selectedFilter",a)},setQuery:function(e,t){u()(e,"query",t.payload)},resetQuery:function(e){u()(e,"query",f.a.query)},setSelectedFilter:function(e,t){u()(e,"selectedFilter",t.payload),u()(e,"filter",t.payload?t.payload.value:p.a),u()(e,"results",f.a.results),u()(e,"selectedSort",f.a.selectedSort),u()(e,"selectedFacet",f.a.selectedFacet),u()(e,"order",f.a.order),u()(e,"sort",f.a.sort),t.payload||(u()(e,"filters",f.a.filters),u()(e,"facets",f.a.facets))},setSelectedSort:function(e,t){u()(e,"selectedSort",t.payload.sort),u()(e,"order",t.payload.order||f.a.order),u()(e,"results",f.a.results)},setSelectedFilterId:function(e,t){u()(e,"filter",t.payload)},setSelectedFacet:function(e,t){var n=t.payload,i=n.value,o=n.facet;u()(e,"selectedFacet",t.payload.value),u()(e,"prevFacet",t.payload.value?o:null),u()(e,"facets",e.facets.map((function(e){return e.id===o.id?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{value:i}):e}))),u()(e,"results",f.a.results)},resetResults:function(e,t){var n=(null==t?void 0:t.payload)||{},r=n.keepFilters;u()(e,"results",f.a.results),u()(e,"metadata",f.a.metadata),u()(e,"hasMoreResults",f.a.hasMoreResults),u()(e,"cursor",f.a.cursor),r||(u()(e,"filter",f.a.filter),u()(e,"facets",f.a.facets),u()(e,"filters",f.a.filters),u()(e,"sorts",f.a.sorts),u()(e,"selectedFacet",f.a.selectedFacet),u()(e,"selectedFilter",f.a.selectedFilter),u()(e,"selectedSort",f.a.selectedSort),u()(e,"sort",f.a.sort))},setSuggestionResults:function(e,t){u()(e,"suggestions",t.payload.items),u()(e,"suggestionsStatus",p.p.BROWSING)},transitionSuggestionsToLoadingState:function(e){u()(e,"suggestionsStatus",p.p.LOADING)},resetSuggestions:function(e){u()(e,"suggestions",f.a.suggestions),u()(e,"suggestionsStatus",f.a.suggestionsStatus)},setHistorySuggestions:function(e,t){u()(e,"historySuggestions",t.payload)}}}),m=g.actions,v=g.reducer},,function(e,t,n){"use strict";var r=n(437),i=n(5),a=n(31),o=n(345),s="community/settings/drive/ADD_OTHER_USER_GROUP_RIGHTS",c="community/settings/drive/REMOVE_OTHER_USER_GROUP_RIGHTS",l="community/settings/drive/UPDATE_GROUP_RIGHTS",u="community/settings/drive/UPDATE_OTHER_USER_GROUP_RIGHTS",d="community/settings/drive/FETCH_DRIVE_FOLDER_DESTINATION_TITLE_ERROR",p="community/settings/drive/FETCH_DRIVE_FOLDER_DESTINATION_TITLE_LOADING",f="community/settings/drive/FETCH_DRIVE_FOLDER_DESTINATION_TITLE_SUCCESS",g="community/settings/drive/SET_DRIVE_FOLDER_DESTINATION_PATH",m="community/settings/drive/SET_DRIVE_FOLDER_DESTINATION_TYPE",v=function(e){var t=e.providerId;return function(e){e({payload:{accordionOpen:!0,emails:[],groupName:Object(i.h)("ADMIN.COMMUNITY_DRIVE_SETTINGS.DEFAULT_GROUP_NAME"),open:"read",providerId:t,readOnly:"read",uid:Object(a.f)()},type:s})}},h=function(e){var t=e.providerId,n=e.uid;return function(e){e({payload:{providerId:t,uid:n},type:c})}},y=function(e){var t=e.changes,n=e.providerId,r=e.uid;return function(e){e({payload:{changes:t,providerId:n,uid:r},type:l})}},E=function(e){var t=e.changes,n=e.providerId,r=e.uid;return function(e){e({payload:{changes:t,providerId:n,uid:r},type:u})}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.providerId;return function(e){var r={driveFolderDestinationType:t,providerId:n};t===o.d&&(r.driveFolderDestinationPath=void 0,r.driveFolderDestinationTitle=void 0),e({payload:r,type:m})}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.providerId,n=e.docPath;return function(e){e({payload:{providerId:t},type:p}),Object(r.b)({docPath:n}).then((function(n){var r=n.title;e({payload:{providerId:t,title:r},type:f})})).catch((function(n){e({payload:{exception:n,providerId:t},type:d})}))}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.docPath,n=e.providerId;return function(e){e({payload:{docPath:t,providerId:n},type:g})}};n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"j",(function(){return h})),n.d(t,"n",(function(){return E})),n.d(t,"m",(function(){return y})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return b})),n.d(t,"i",(function(){return O}))},,,,,,,,function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),function(e){e.manager="MANAGER",e.ambassador="AMBASSADOR"}(r||(r={})),function(e){e.CAN_ACCESS_BASIC_DATA="CAN_ACCESS_BASIC_DATA",e.CAN_ACCESS_ALL_SHARES_DATA="CAN_ACCESS_ALL_SHARES_DATA",e.CAN_MANAGE_PROGRAM_DATA="CAN_MANAGE_PROGRAM_DATA",e.CAN_MANAGE_MANAGERS="CAN_MANAGE_MANAGERS",e.CAN_MANAGE_AMBASSADORS="CAN_MANAGE_AMBASSADORS",e.CAN_MANAGE_TOPICS="CAN_MANAGE_TOPICS",e.CAN_MANAGE_SHAREABLE_CONTENTS="CAN_MANAGE_SHAREABLE_CONTENTS",e.CAN_SHARE_SHAREABLE_CONTENTS="CAN_SHARE_SHAREABLE_CONTENT"}(i||(i={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"CloudSearchConstant",(function(){return i})),n.d(t,"TEMPLATE_TYPE",(function(){return r}));var r={GOOGLE_CALENDAR:"calendar",GOOGLE_DRIVE:"drive",GOOGLE_MAIL:"mail"},i={DRIVE_LOCATION_TYPE:{DRIVE:"DRIVE",TEAM_DRIVE:"TEAM_DRIVE"},DRIVE_SHARE_SCOPE_TYPE:{LIMITED:"LIMITED",PRIVATE:"PRIVATE",PUBLIC:"PUBLIC",PUBLIC_WITH_LINK:"PUBLIC_WITH_LINK"},LIST_KEY:{DATASOURCES:"cloudsearch-datasources"},PROJECTION:{},TEMPLATE_TYPE:r};angular.module("Constants").constant("CloudSearchConstant",i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var r,i=n(3),a=n.n(i),o=n(2),s=n(246),c=n(5),l={DESCRIPTION:"description",REDIRECT_URL:"redirectUrl"},u={DISABLED:"DISABLED",ENABLED:"ENABLED"},d=(r={},a()(r,l.DESCRIPTION,{}),a()(r,l.REDIRECT_URL,{}),a()(r,"status",u.DISABLED),r),p=(Object(o.shape)({customedId:o.string.isRequired,description:Object(o.shape)(),redirectUrl:o.string,status:o.bool.isRequired}),["fullscreen","bold","italic","underline","strikeThrough","|","fontSize","color","paragraphFormat","align","formatOL","formatUL","outdent","indent","insertHR","|","nativeInsertLink","insertTable","|","undo","redo","clearFormatting","selectAll"]),f={charCounterCount:!1,embedlyKey:s.FroalaSettings.key,heightMax:300,heightMin:250,htmlExecuteScripts:!1,linkEditButtons:s.FroalaSettings.linkEditButtons,linkInsertButtons:s.FroalaSettings.linkInsertButtons,multiLine:!0,pastePlain:!0,placeholderText:Object(c.h)("ADMIN.TERMS_AND_CONDITIONS.DESCRIPTION.PLACEHOLDER"),toolbarButtons:p,toolbarButtonsMD:p,toolbarButtonsSM:p,toolbarButtonsXS:p,toolbarSticky:!1}},,,function(e,t,n){"use strict";function r(e){o=e.getCurrentInstanceId,s=e.getCurrentInstanceLangs,e.getInstance,e.getInstanceById,e.getProperty}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r}));var i=n(33),a=n.n(i),o=a.a,s=a.a;a.a,a.a,a.a},function(e,t,n){"use strict";function r(e){i=e.createFolder,a=e.getMediaContentByLang,e.getObjectId,o=e.trash,s=e.update}var i,a,o,s;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return r}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p}));var r,i=n(43),a=n(7),o=n.n(a),s=n(144),c=n.n(s);!function(e){e.initial="initial",e.loading="loading",e.loaded="loaded"}(r||(r={}));var l={user:void 0,socialNetworkAccesses:[],saUserLoadingStatus:r.initial,hasSocialNetworkAccessesLoaded:!1},u=Object(i.a)({domain:"saConnectedUser",initialState:l,reducers:{startFetchUser:function(e){o()(e,"saUserLoadingStatus",r.loading)},fetchUserSuccess:function(e,t){o()(e,"user",t.payload),o()(e,"saUserLoadingStatus",r.loaded)},fetchSocialNetworkAccessesSuccess:function(e,t){o()(e,"socialNetworkAccesses",t.payload),o()(e,"hasSocialNetworkAccessesLoaded",!0)},disconnectSuccess:function(e,t){c()(e.socialNetworkAccesses,(function(e){return e.socialNetworkId===t.payload}))}}}),d=u.actions,p=u.reducer},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(505),o=n(205),s=n(693),c=function(e){Object(r.useEffect)((function(){Object.assign(window.lumapps,e)}))},l=n(74),u=n(11),d=n(292),p=function(){var e;window.lumapps=window.lumapps||{},c({getInternalUrl:function(e){var t=Object(l.f)(window.location.pathname);return"".concat(t).concat(e)}}),e=Object(u.useStore)(),c({getCurrentContent:function(){var t=null==e?void 0:e.getState();return Object(d.a)(t)}})},f=n(98);n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return s.a})),n.d(t,"b",(function(){return o.a})),n.d(t,"d",(function(){return c}));var g=function(e){var t=e.children,n=Object(o.e)(),r=n.modes,s=n.isModeEnabled,c=n.featureFlags;return p(),Object(f.e)(),i.a.createElement(a.a.Provider,{value:{modes:r,isModeEnabled:s,featureFlags:c}},t)}},,,function(e,t,n){"use strict";var r=n(3),i=n.n(r),a=n(401),o=n.n(a),s=n(53),c="".concat(s.c,"/").concat("options"),l="".concat(c,"/PUSH_COMMUNITY_OPTIONS_FIELD_VALUE"),u="".concat(c,"/SET_COMMUNITY_OPTIONS_FIELD_VALUE"),d="".concat(c,"/CLOSE_COMMUNITY_OPTIONS_TAG_EDIT_DIALOG"),p="".concat(c,"/OPEN_COMMUNITY_OPTIONS_TAG_EDIT_DIALOG"),f="".concat(c,"/REMOVE_COMMUNITY_OPTIONS_TAG"),g="".concat(c,"/SET_COMMUNITY_OPTIONS_TAG_VALUE"),m="".concat(c,"/SET_COMMUNITY_OPTIONS_TAG_EDIT_DIALOG_LANGUAGE"),v="".concat(c,"/SET_COMMUNITY_OPTIONS_TAG_EDIT_DIALOG_VALUE"),h=function(){return function(e){e({type:d})}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldId,n=e.valueId;return function(e,r){var i=r().admin.communities.communitySetup,a=i.setup.language,o=i.settings.options.fields,s=o[t],c=s.find((function(e){return e._id===n}));e({payload:{fieldId:t,language:a,value:c.labels,valueId:n},type:p})}},E=function(){return function(e){e({type:f}),e({type:d})}},b=function(){return function(e){e({type:g}),e({type:d})}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return function(e){e({payload:{value:t},type:v})}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language;return function(e){e({payload:{language:t},type:m})}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldId,n=e.value;return function(e,r){var a=r().admin.communities.communitySetup.setup.language;e({payload:{fieldId:t,value:{_id:o()("tag-"),labels:i()({},a,n)}},type:l})}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldId,n=e.value;return function(e){e({payload:{fieldId:t,value:n},type:u})}},I=n(37),_=n(4),A=n.n(_),w=n(17),D=n.n(w),L=n(133),P=n(113),N="".concat(L.ANGULAR_ACTION_PREFIX,"/community-dialog/update"),R={fields:{isPostEnabled:!0},tagEditDialog:void 0},j=function(e,t){var n=t.fieldId,r=t.value;Array.isArray(e.fields[n])||(e.fields[n]=[]),e.fields[n].push(r)},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return Object(I.a)(e,(function(n){var r=t.payload,a=t.newState,c=void 0===a?{}:a,h=c.editedCommunity,y=c.template,E=n.fields;switch(t.type){case N:if(h){var b=h.postStatuses,O=h.postTypes,C=h.tagsDetails;if(E.isHomepageEnabled=A()(h,"properties.hasDashboard"),E.isPostEnabled=D()(O,"DEFAULT"),E.isIdeaEnabled=D()(O,"IDEA"),E.isQuestionEnabled=D()(O,"QUESTION"),E.isEventEnabled=D()(O,"EVENT"),C&&C.forEach((function(e){var t=e.name,r=e.uid,i="categoriesLabels";n.fields[i]&&n.fields[i].find((function(e){return e.uid===r}))||j(n,{fieldId:i,value:{_id:r,labels:t,uid:r}})})),!b||0===b.length)break;E.ideaStatusLabels||(E.ideaStatusLabels=[]),b.forEach((function(e){var t=e.id,r=e.title;n.fields.ideaStatusLabels.push({_id:t,labels:r})}))}else if(y){var T=y.postTypes;E.isPostEnabled=D()(T,"DEFAULT"),E.isIdeaEnabled=D()(T,"IDEA"),E.isQuestionEnabled=D()(T,"QUESTION"),E.isEventEnabled=D()(T,"EVENT"),y.tagsDetails&&y.tagsDetails.forEach((function(e){var t=e.name,r=e.uid;j(n,{fieldId:"categoriesLabels",value:{_id:o()("tag-"),labels:t,uid:r}})})),y.postStatuses&&y.postStatuses.forEach((function(e){var t=e.uid,r=e.title;j(n,{fieldId:"ideaStatusLabels",value:{_id:t,labels:r}})}))}break;case s.a:case s.f:case s.i:case P.c:Object.assign(n,R);break;case m:n.tagEditDialog.language=r.language;break;case d:n.tagEditDialog=void 0;break;case p:var S=r.fieldId,I=r.language,_=r.value,w=r.valueId;n.tagEditDialog={fieldId:S,language:I,value:_,valueId:w};break;case l:j(n,r);break;case f:var L=e.tagEditDialog,k=L.fieldId,F=L.valueId,U=E[k],M=U.findIndex((function(e){return e._id===F}));U.splice(M,1);break;case g:var x=e.tagEditDialog,$=x.fieldId,B=x.value,W=x.valueId,G=E[$],Y=G.findIndex((function(e){return e._id===W}));G[Y].labels=B;break;case u:E[r.fieldId]=r.value;break;case v:var H=n.tagEditDialog.language;Object.assign(n.tagEditDialog.value,i()({},H,r.value))}}))};n.d(t,"a",(function(){return T})),n.d(t,"f",(function(){return S})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return E})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return O})),n.d(t,"d",(function(){return k}))},function(e,t,n){"use strict";var r=n(36),i=n(5),a=n(64),o=new a.a({path:"insight"}),s=function(e){return o.get("people/list",{params:{maxResults:e}})},c=function(e){return o.get("documents/shared/list").then((function(t){return{payload:t.data.items.slice(0,e)}}))},l=function(e){return(t=e,o.get("documents/trending/list",{params:{maxResults:t}})).then((function(e){return{payload:e.data.items}}));var t},u=function(e){return o.get("documents/used/list").then((function(t){return{payload:t.data.items.slice(0,e)}}))};n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return E})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return O})),n.d(t,"l",(function(){return C}));var d="delve/INIT_STATE",p="delve/SET_DOCUMENTS",f="delve/SET_ISLOADING",g="delve/SET_PEOPLE",m="delve/SET_CURRENTLY_OPENED_POPOVER",v=function(e,t,n){return function(a){return a({payload:{data:!0,uuid:n},type:f}),a({payload:{data:[],uuid:n},type:p}),function(e,t){return s(e).then((function(e){return{payload:e.data.items.filter((function(e){return"Group"===e.personType})).slice(0,t)}}))}(e,t).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;a({payload:{data:t,uuid:n},type:g})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_DELVE.ERROR.FETCH_COMMUNITIES_ERROR"))})).finally((function(){a({payload:{data:!1,uuid:n},type:f})}))}},h=function(e,t,n){return function(a){return a({payload:{data:!0,uuid:n},type:f}),a({payload:{data:[],uuid:n},type:p}),function(e,t){return s(e).then((function(e){return{payload:e.data.items.filter((function(e){return"Person"===e.personType})).slice(0,t)}}))}(e,t).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;a({payload:{data:t,uuid:n},type:g})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_DELVE.ERROR.FETCH_PEOPLE_ERROR"))})).finally((function(){a({payload:{data:!1,uuid:n},type:f})}))}},y=function(e,t){return function(n){return n({payload:{data:!0,uuid:t},type:f}),n({payload:{data:[],uuid:t},type:g}),c(e).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.payload;n({payload:{data:r,uuid:t},type:p})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_DELVE.ERROR.FETCH_DOCUMENTS_ERROR"))})).finally((function(){n({payload:{data:!1,uuid:t},type:f})}))}},E=function(e,t){return function(n){return n({payload:{data:!0,uuid:t},type:f}),n({payload:{data:[],uuid:t},type:g}),l(e).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.payload;n({payload:{data:r,uuid:t},type:p})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_DELVE.ERROR.FETCH_DOCUMENTS_ERROR"))})).finally((function(){n({payload:{data:!1,uuid:t},type:f})}))}},b=function(e,t){return function(n){return n({payload:{data:!0,uuid:t},type:f}),n({payload:{data:[],uuid:t},type:g}),u(e).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.payload;n({payload:{data:r,uuid:t},type:p})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_DELVE.ERROR.FETCH_DOCUMENTS_ERROR"))})).finally((function(){n({payload:{data:!1,uuid:t},type:f})}))}},O=function(e){return function(t){t({payload:e,type:d})}},C=function(e){return function(t){t({payload:e,type:m})}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={CREATE:{id:"chatSelectModeCreate",label:"ADMIN.COMMUNITY.SETUP.FIELD.CHAT.CREATE_CHANNEL"},SELECT:{id:"chatSelectModeSelect",label:"ADMIN.COMMUNITY.SETUP.FIELD.CHAT.SELECT_CHANNEL"}},i={CHAT_CHANNEL_SELECT:"CHAT_CHANNEL_SELECT",CHAT_CHANNEL_NAME:"CHAT_CHANNEL_NAME",CHAT_CHANNEL_NAME_VALID:"CHAT_CHANNEL_NAME_VALID",CHAT_CHANNEL_NAME_CHECKING:"CHAT_CHANNEL_NAME_CHECKING",CHAT_PROVIDER:"CHAT_PROVIDER",CHAT_SELECT_CHANNEL_MODE:"CHAT_SELECT_CHANNEL_MODE",CHAT_USERSPACE:"CHAT_USERSPACE",DRIVE:"DRIVE",ICON_TEXT_FIELD:"ICON_TEXT_FIELD",MEDIA_SECURED:"MEDIA_SECURED",SIMPLE:"SIMPLE",TAGZ:"TAGZ",TOGGLE:"TOGGLE",TRANSLATABLE_TAG_INPUT:"TRANSLATABLE_TAG_INPUT"}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return m}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(0),c=n.n(s),l=n(14),u=n.n(l);(function(e){var t=e.children,n=e.className,r=o()(e,["children","className"]);return c.a.createElement("span",i()({},r,{className:u()(n,"wrex-content-span")}),t)}).displayName="span";var d=function(e){var t=e.children,n=e.className,r=o()(e,["children","className"]);return c.a.createElement("strong",i()({},r,{className:u()(n,"wrex-content-bold")}),t)};d.displayName="bold";var p=function(e){var t=e.children,n=e.className,r=o()(e,["children","className"]);return c.a.createElement("em",i()({},r,{className:u()(n,"wrex-content-italic")}),t)};p.displayName="italic";var f=function(e){var t=e.children,n=e.className,r=o()(e,["children","className"]);return c.a.createElement("u",i()({},r,{className:u()(n,"wrex-content-underline")}),t)};f.displayName="underline";var g=function(e){var t=e.children,n=e.className,r=o()(e,["children","className"]);return c.a.createElement("span",i()({},r,{className:u()(n,"wrex-content-strikethrough")}),t)};g.displayName="strikethrough";var m=function(e){var t=e.children,n=e.className,r=o()(e,["children","className"]);return c.a.createElement("code",i()({},r,{className:u()(n,"wrex-content-code")}),t)};m.displayName="code"},,,function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(2),o=n(66),s=n.n(o),c=n(5),l=n(374),u=function(e){var t=e.color,n=e.desc,r=e.title;return i.a.createElement("div",{className:"dialog-loader"},i.a.createElement("div",{className:"dialog-loader__wrapper"},i.a.createElement("span",{className:"dialog-loader__title"},Object(c.h)(r)),!s()(n)&&i.a.createElement("span",{className:"dialog-loader__desc"},Object(c.h)(n)),i.a.createElement("div",{className:"dialog-loader__progress"},i.a.createElement(l.a,{color:t,diameter:"50",type:"linear"}))))};u.propTypes={color:a.string,desc:a.string,title:a.string},u.defaultProps={color:"primary",desc:void 0,title:"GLOBAL.PLEASE_WAIT"};var d=n(492);n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d.a})),n.d(t,"c",(function(){return l.a}))},function(e,t,n){"use strict";function r(e){var t="function"==typeof e?e:e.createPluginEditor;return Object.assign((function(e){return Object.assign(e,t(e))}),a()(e,"createPluginEditor"))}n.d(t,"a",(function(){return r}));var i=n(130),a=n.n(i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(e){try{return e?decodeURIComponent(e.replace(/%(?![0-9][0-9a-fA-F]+)/g,"%25")):e}catch(t){return e}},i=function(e){return encodeURIComponent(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=Object(r.shape)({icon:r.string,id:r.string.isRequired,label:r.string}),a=Object(r.arrayOf)(i)},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=i(e),r=Math.round((299*n.red+587*n.green+114*n.blue)/1e3);return r>t?"black":"white"}function i(e){var t;return e.length>7?(t=e.split(","),{blue:parseInt(t[2],10),green:parseInt(t[1],10),red:parseInt(t[0].slice(4),10)}):a(e)}function a(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{blue:parseInt(t[3],16),green:parseInt(t[2],16),red:parseInt(t[1],16)}:null}function o(e,t){if(!p()(e,"#"))return e;t=u()(t)?t:1;var n=e.replace("#","");return n=n.match(new RegExp("(.{".concat(n.length/3,"})"),"g"))||[],n.forEach((function(e,t){n[t]=parseInt(1===e.length?e+e:e,16)})),n.push(t),"rgba(".concat(n.join(","),")")}function s(e,t){return"#".concat(e.replace(/^#/,"").replace(/../g,(function(e){return"0".concat(Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2)})))}function c(e,t,n){var r=e;e=e<0?-1*e:e;var a,o=i(t);return t.length>7?(n=n||(r<0?"rgb(0,0,0)":"rgb(255,255,255)"),a=n.split(","),"rgb(".concat(Math.round((parseInt(a[0].slice(4),10)-o.red)*e)+o.red,",").concat(Math.round((parseInt(a[1],10)-o.green)*e)+o.green,",").concat(Math.round((parseInt(a[2],10)-o.blue)*e)+o.blue,")")):(n=n||(r<0?"#000000":"#FFFFFF"),a=parseInt(n.slice(1),16),"#".concat((16777216+65536*(Math.round(((a>>16)-o.red)*e)+o.red)+256*(Math.round(((a>>8&255)-o.green)*e)+o.green)+(Math.round(((255&a)-o.blue)*e)+o.blue)).toString(16).slice(1)))}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c}));var l=n(201),u=n.n(l),d=n(107),p=n.n(d)},function(e,t,n){"use strict";n.r(t),n.d(t,"FroalaSettings",(function(){return r}));var r={fontSize:["8","9","10","12","13","14","15","16","18","20","22","24","26","28","30","32","36","40","46","52","60","72","96"],fonts:{"'Roboto', sans-serif":"Roboto","'Times New Roman',Times,serif":"Times New Roman","Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Verdana,Geneva,sans-serif":"Verdana"},key:"gA2F2B1C2G2B5zA3B2A1B1F4E1B1A10C1D7mc1VYJZa1c2a1THYBUZY==",linkEditButtons:["linkStyle","linkEditWrapper","linkRemove"],linkInsertButtons:["linkBack"],svgAttributes:["accent-height","accumulate","additive","alignment-baseline","allowReorder","alphabetic","amplitude","arabic-form","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baseline-shift","baseProfile","bbox","begin","bias","by","calcMode","cap-height","class","clip","clipPathUnits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominant-baseline","dur","dx","dy","edgeMode","elevation","enable-background","end","exponent","externalResourcesRequired","fill","fill-opacity","fill-rule","filter","filterRes","filterUnits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","format","from","fr","fx","fy","g1","g2","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","glyphRef","gradientTransform","gradientUnits","hanging","hreflang","horiz-adv-x","horiz-origin-x","ideographic","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letter-spacing","lighting-color","limitingConeAngle","local","marker-end","marker-mid","marker-start","markerHeight","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","method","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overline-position","overline-thickness","panose-1","paint-order","path","pathLength","patternContentUnits","patternTransform","patternUnits","ping","pointer-events","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","referrerPolicy","refX","refY","rel","rendering-intent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shape-rendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","string","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","surfaceScale","systemLanguage","tableValues","target","targetX","targetY","text-anchor","text-decoration","text-rendering","textLength","to","transform","type","u1","u2","underline-position","underline-thickness","unicode","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","values","vector-effect","version","vert-adv-y","vert-origin-x","vert-origin-y","viewBox","viewTarget","visibility","widths","word-spacing","writing-mode","x","x-height","x1","x2","xChannelSelector","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","xmlns","xmlns:xlink","y","y1","y2","yChannelSelector","z","zoomAndPan"],svgTags:["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hatch","hatchpath","hkern","image","line","linearGradient","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","solidcolor","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],tools:{align:{icon:"format-align-left"},"align-center":{icon:"format-align-center"},"align-justify":{icon:"format-align-justify"},"align-left":{icon:"format-align-left"},"align-right":{icon:"format-align-right"},bold:{icon:"format-bold"},clearFormatting:{icon:"format-clear"},color:{icon:"format-color-fill"},editContent:{icon:"pencil-box"},editPopin:{icon:"message-draw"},emoticons:{icon:"emoticon-happy"},fontFamily:{icon:"format-text"},fontSize:{icon:"format-size"},formatOL:{icon:"format-list-numbered"},formatUL:{icon:"format-list-bulleted"},fullscreen:{icon:"fullscreen"},fullscreenCompress:{icon:"fullscreen-exit"},html:{icon:"code-tags"},"image-align":{icon:"format-align-left"},"image-align-center":{icon:"format-align-justify"},"image-align-left":{icon:"format-align-left"},"image-align-right":{icon:"format-align-right"},imageAlt:{icon:"tooltip-image"},imageRemove:{icon:"delete"},imageSize:{icon:"arrow-expand-all"},imageStyle:{icon:"auto-fix"},indent:{icon:"format-indent-increase"},inlineStyle:{icon:"brush"},insertFile:{icon:"file"},insertHR:{icon:"color-helper"},insertImage:{icon:"image-area"},insertLink:{icon:"link"},insertPopin:{icon:"message-plus"},insertTable:{icon:"table-large"},insertVideo:{icon:"video"},italic:{icon:"format-italic"},linkContent:{icon:"content-duplicate"},linkEdit:{icon:"pencil"},linkOpen:{icon:"open-in-new"},linkRemove:{icon:"link-off"},linkStyle:{icon:"auto-fix"},outdent:{icon:"format-indent-decrease"},paragraphFormat:{icon:"format-paragraph"},paragraphStyle:{icon:"auto-fix"},quote:{icon:"format-quote-close"},redo:{icon:"redo"},selectAll:{icon:"select-all"},strikeThrough:{icon:"format-strikethrough"},subscript:{icon:"format-subscript"},superscript:{icon:"format-superscript"},tableCellBackground:{icon:"format-color-fill"},tableCellHorizontalAlign:{icon:"format-horizontal-align-left"},tableCellStyle:{icon:"auto-fix"},tableCellVerticalAlign:{icon:"format-vertical-align-top"},tableCells:{icon:"crop-square"},tableColumns:{icon:"table-column-plus-after"},tableHeader:{icon:"format-title"},tableRemove:{icon:"delete"},tableRows:{icon:"table-row-plus-after"},tableStyle:{icon:"brush"},underline:{icon:"format-underline"},undo:{icon:"undo"},"video-align":{icon:"format-align-left"},"video-align-center":{icon:"format-align-center"},"video-align-left":{icon:"format-align-left"},"video-align-right":{icon:"format-align-right"},videoEmbed:{icon:"code-tags"},videoRemove:{icon:"delete"},videoReplace:{icon:"refresh"},videoSize:{icon:"arrow-expand-all"}}};angular.module("Constants").constant("FroalaSettings",r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c}));var r,i=n(316);!function(e){e.feed="feed",e.analytics="analytics"}(r||(r={}));var a={path:"/".concat(i.a,"/programs/:slug/:view"),legacyId:"app.front.programs-dashboard"},o={path:"/admin/social-advocacy/programs",legacyId:"app.admin.social-advocacy.programs",isMigrated:!0},s=function(){return o},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.feed;return{path:a.path,legacyId:a.legacyId,params:{slug:e,view:t}}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=n(3),s=n.n(o),c=n(6),l=n.n(c),u=n(10),d=n.n(u),p=n(42),f=n(95),g=function(){var e=d()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.filter((function(e){return e.isConfigurable})).map((function(e){return Object(f.q)({provider:e.name}).then((function(e){return e.data}))}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return Object(f.s)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{spaceId:e.id})).then((function(e){var t=e.data;return t}))},v="admin/providers/service/FETCH_PROVIDERS_SUCCESS",h="admin/providers/service/FETCH_USERSPACES_SUCCESS",y="admin/providers/service/SET_USERSPACE_FIELDS",E="admin/providers/service/CLEAR_USERSPACE_FIELDS",b="admin/providers/service/SAVE_USERSPACE_SUCCESS",O="admin/providers/service/DELETE_USERSPACE_SUCCESS",C="admin/providers/service/OPEN_USERSPACE_DIALOG",T="admin/providers/service/CLOSE_USERSPACE_DIALOG",S="admin/providers/service/OPEN_USERSPACE_CONFIRM_DELETE_DIALOG",I="admin/providers/service/CLOSE_USERSPACE_CONFIRM_DELETE_DIALOG",_=function(){return function(){var e=d()(l.a.mark((function e(t){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.p)().then((function(e){return e.data}));case 3:n=e.sent,r=n.providers,i=r||[],t({payload:i,type:v}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object(p.b)({translate:"ADMIN.PROVIDER.SERVICE.FETCH_PROVIDER_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},A=function(e){return function(){var t=d()(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(e);case 3:r=t.sent,n({payload:r,type:h}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Object(p.b)({translate:"ADMIN.PROVIDER.SERVICE.FETCH_USERSPACE_ERROR"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=d()(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.createMode){t.next=6;break}return t.next=4,i=e.userspace,Object(f.h)({spaceId:i.id,provider:i.type}).then((function(e){return e.data}));case 4:r=t.sent,n({payload:a({},r.space,{createMode:!1}),type:y});case 6:n({payload:e,type:C}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Object(p.b)({translate:"ADMIN.PROVIDER.SERVICE.FETCH_USERSPACE_DETAIL_ERROR"});case 12:case"end":return t.stop()}var i}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(t){t({payload:e,type:y})}},L=function(){return function(e){e({type:T}),e({type:E})}},P=function(){return function(){var e=d()(l.a.mark((function e(t,n){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().admin.platform.serviceProvider.form,e.prev=1,e.next=4,m(r);case 4:t({payload:r,type:b}),Object(p.d)({translate:"ADMIN.PROVIDER.SERVICE.SAVE_USERSPACE_SUCCESS"}),L(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),i=e.t0.response,t({payload:i.data,type:"admin/providers/service/SAVE_USERSPACE_ERROR"}),Object(p.b)({translate:"ADMIN.PROVIDER.SERVICE.SAVE_USERSPACE_ERROR"});case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},N=function(e){var t=e.id,n=e.type;return function(){var e=d()(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i={spaceId:t,provider:n},Object(f.a)({params:i}).then((function(e){var t=e.data;return t}));case 3:r({payload:{id:t},type:O}),Object(p.d)({translate:"ADMIN.PROVIDER.SERVICE.DELETE_USERSPACE_SUCCESS"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r({payload:e.t0,type:"admin/providers/service/DELETE_USERSPACE_ERROR"}),404===e.t0.response.status?r({payload:{id:t},type:O}):Object(p.b)({translate:"ADMIN.PROVIDER.SERVICE.DELETE_USERSPACE_ERROR"});case 11:case"end":return e.stop()}var i}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},R=n(37),j=n(77),k={spaceId:"",client_secret:"",customer_id:"",client_id:"",provider:"",auth_token:"",name:"",description:""},F={data:[],errorMessage:"",loading:!1},U={data:[],errorMessage:"",loading:!1},M={isUserspaceCreationMode:!0,isUserspaceDeleteDialogOpen:!1,isUserSpaceDialogOpen:!1,userspaceCreateMode:!0},x=Object(j.c)({providers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.payload;switch(t.type){case v:n.forEach((function(t){e.data.find((function(e){return e.name===t.name}))||e.data.push(t)}))}}))},userspaces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.payload;switch(t.type){case h:n.filter((function(e){return"items"in e})).forEach((function(t){t.items.forEach((function(t){e.data.find((function(e){return e.id===t.id}))||e.data.push(t)}))}));break;case b:e.data.map((function(t,r){t.id===n.id&&(e.data[r]={},Object.keys(n).map((function(t){return e.data[r][t]=n[t]})))}));break;case O:var r=n.id;e.data=e.data.filter((function(e){return e.id!==r}))}}))},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.payload;switch(t.type){case C:e.isUserSpaceDialogOpen=!0,e.userspaceCreateMode=n.createMode;break;case T:e.isUserSpaceDialogOpen=!1;break;case S:e.isUserspaceDeleteDialogOpen=!0;break;case I:e.isUserspaceDeleteDialogOpen=!1}}))},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.payload;switch(t.type){case y:Object.keys(n).map((function(t){return e[t]=n[t]}));break;case E:Object.keys(e).map((function(t){return delete e[t]})),Object.assign(e,k)}}))}});n.d(t,"d",(function(){return _})),n.d(t,"c",(function(){return A})),n.d(t,"e",(function(){return w})),n.d(t,"a",(function(){return L})),n.d(t,"h",(function(){return D})),n.d(t,"g",(function(){return P})),n.d(t,"b",(function(){return N})),n.d(t,"f",(function(){return x}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o}));var r="tagz",i=30,a=50,o="CREATION_DATE"},function(e,t,n){"use strict";function r(e){u=e.pluralize,p=e.translate,d=e.replace}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return f}));var i=n(33),a=n.n(i),o=n(34),s=n(165),c=Object(o.g)(),l=c.userLang,u=a.a,d=a.a,p=a.a,f={pluralize:function(e,t){var n;return null!==(n=u(e,t))&&void 0!==n?n:null},pluralizeObject:function(e,t){var n;return null!==(n=u(e,t))&&void 0!==n?n:null},translateKey:function(e,t){var n;return null!==(n=p(e,"",t))&&void 0!==n?n:e},translateObject:function(e,t){var n;return null!==(n=p(e,"",t))&&void 0!==n?n:null},translateAndReplace:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return null!==(n=d(e,Object.keys(t),Object.values(t),r))&&void 0!==n?n:e},translate:function(e,t){return Object(s.d)(e)?f.translateKey(e,t):Object(s.e)(e)?f.translateObject(e,t):Object(s.c)(e)?f.translateAndReplace(e.key,e.replacements,t):null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(12),i=n(149),a=n(56),o=[{icon:r.Ab,id:"name",label:"ADMIN.COMMUNITY.SETUP.FIELD.COMMUNITY_NAME",required:!0,type:a.f.ICON_TEXT_FIELD,updateFields:[{id:"url",method:i.v}]},{icon:r.lb,id:"description",label:"ADMIN.COMMUNITY.SETUP.FIELD.COMMUNITY_DESCRIPTION",type:a.f.ICON_TEXT_FIELD},{icon:r.Ub,id:"url",label:"ADMIN.COMMUNITY.SETUP.FIELD.COMMUNITY_URL",required:!0,type:a.f.ICON_TEXT_FIELD,validations:[i.l]}]},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var r={OPEN:"open",RESTRICTED:"restricted"},i=[{description:"ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.RESTRICTED.DESCRIPTION",id:r.RESTRICTED,value:"ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.RESTRICTED"},{description:"ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.OPEN.DESCRIPTION",id:r.OPEN,value:"ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.OPEN"}]},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return s}));var r,i=n(7),a=n.n(i),o=n(43);!function(e){e.openEdit="openEdit",e.openCreate="open.create",e.closed="closed"}(r||(r={}));var s={openStatus:r.closed,isLoading:!1,programId:void 0},c={openModal:function(e,t){a()(e,"openStatus",(null==t?void 0:t.payload)?r.openEdit:r.openCreate),a()(e,"programId",t.payload)},closeModal:function(e){a()(e,"openStatus",r.closed)},setLoading:function(e,t){a()(e,"isLoading",t.payload)}},l=Object(o.a)({domain:"programFormModal",initialState:s,reducers:c}),u=l.actions,d=l.reducer},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"k",(function(){return _})),n.d(t,"n",(function(){return A})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return D})),n.d(t,"j",(function(){return L})),n.d(t,"m",(function(){return P})),n.d(t,"l",(function(){return N})),n.d(t,"a",(function(){return E})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return O})),n.d(t,"b",(function(){return C})),n.d(t,"d",(function(){return T})),n.d(t,"f",(function(){return S})),n.d(t,"c",(function(){return I}));var a=n(3),o=n.n(a),s=n(8),c=n.n(s),l=n(822),u=n.n(l),d=n(4),p=n.n(d),f=n(36),g=n(5),m=n(150),v=n(92),h=n(68),y="SA/SOCIAL_NETWORKS",E="".concat(y,"/GET_ALL_SOCIAL_NETWORKS"),b="".concat(y,"/TOGGLE_OPEN_CUSTOM_SETTINGS"),O="".concat(y,"/UPDATE_SOCIAL_NETWORK"),C="".concat(y,"/SET_FACEBOOK_SDK_READY"),T="".concat(y,"/TOGGLE_ADVANCED_OPTIONS_DROPDOWN"),S="".concat(y,"/UPDATE_FORM"),I="".concat(y,"/SET_FORM_FIELD_ERROR"),_=function(){return function(e){e(Object(h.g)("GET_ALL_SOCIAL_NETWORKS")),Promise.all([Object(v.f)(),Object(v.e)()]).then((function(t){var n=c()(t,2),r=n[0].data,i=n[1].data,a=r.find((function(e){return"facebook"===e.socialNetworkId})),o=p()(a,"active");if(e({socialNetworks:u()(r||[],i||[],"socialNetworkId"),type:E}),o){var s=p()(a,"clientId");e(function(e){return function(t){var n=window.document.createElement("script");n.src="https://connect.facebook.net/en_US/sdk.js",window.document.head.appendChild(n),window.fbAsyncInit=function(){FB.init({appId:e,autoLogAppEvents:!0,version:"v5.0",xfbml:!0}),t({type:C})}}}(s))}e(Object(h.d)("GET_ALL_SOCIAL_NETWORKS"))}))}},A=function(e){return function(t){t(Object(m.a)()),t({current:e,type:b})}},w=function(e){return function(t){t(Object(h.g)("UPDATE_SOCIAL_NETWORK_DEFAULT_APP")),Object(v.u)(e,!0,!1).then((function(n){var r=n.data;t({socialNetwork:i({socialNetworkId:e},r),type:O}),t(Object(m.a)()),t(Object(h.d)("UPDATE_SOCIAL_NETWORK_DEFAULT_APP")),f.d(Object(g.g)("FRONT.SOCIAL_ADVOCACY.SOCIAL_PLATFORM.ACTIVATION_SUCCESS",["PLATFORM"],[e]))}))}},D=function(e,t,n){return function(r){r(Object(h.g)("UPDATE_SOCIAL_NETWORK_CUSTOM_APP")),Object(v.u)(e,!0,!0,t,n).then((function(t){var n=t.data;r({socialNetwork:i({socialNetworkId:e},n),type:O}),r(Object(m.a)()),r(Object(h.d)("UPDATE_SOCIAL_NETWORK_CUSTOM_APP")),f.d(Object(g.g)("FRONT.SOCIAL_ADVOCACY.SOCIAL_PLATFORM.ACTIVATION_SUCCESS",["PLATFORM"],[e]))}))}},L=function(e){return function(t){t(Object(h.g)("UPDATE_SOCIAL_NETWORK")),Object(v.u)(e,!1,!1).then((function(n){var r=n.data;t({socialNetwork:i({socialNetworkId:e},r),type:O}),t(Object(m.a)()),t(Object(h.d)("UPDATE_SOCIAL_NETWORK")),f.d(Object(g.g)("FRONT.SOCIAL_ADVOCACY.SOCIAL_PLATFORM.DEACTIVATION_SUCCESS",["PLATFORM"],[e]))}))}},P=function(e,t){return{id:e,isOpen:t,type:T}},N=function(e,t){return function(n){var r={fields:o()({},e,i({},t,{wasTouched:!0})),wasTouched:!0};return n({payload:{form:r},type:S})}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(3),a=n.n(i),o=n(77),s=n(553),c=n(166),l=Object(s.default)({domain:"ProgramForm/informationForm",initialValues:{name:{translations:{}},description:{translations:{}},slug:{translations:{}}},validationSchema:function(e){var t,n,r=null==e||null===(t=e.meta)||void 0===t||null===(n=t.lang)||void 0===n?void 0:n.current;return{name:{translations:a()({},r,(function(e){return e&&e.trim()?"":"FRONT.SOCIAL_ADVOCACY.PROGRAM_CREATION.ERROR.REQUIRED.NAME"}))},slug:{translations:a()({},c.f,(function(e){return e&&e.trim()?"":"FRONT.SOCIAL_ADVOCACY.PROGRAM_CREATION.ERROR.REQUIRED.SLUG"}))}}}}),u=l.actions,d=l.reducer,p=l.initialState,f=n(183),g=n(118),m=n(43),v=n(135),h=v.b.informationForm,y=Object(m.a)({domain:"ProgramForm/currentStep",initialState:h,reducers:{setCurrentStep:function(e,t){return t.payload}}}),E=y.actions,b=y.reducer;n.d(t,"a",(function(){return C})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return T}));var O=Object(o.c)({informationForm:d,socialNetworksForm:f.d,programMembershipForm:g.e,currentStep:b}),C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{},f.b,{},E),T={informationForm:p,socialNetworksForm:f.c,programMembershipForm:g.d,currentStep:h}},,,,,function(e,t,n){var r=n(533);e.exports=function(e){var t=null==e?0:e.length;return t?r(e,Infinity):[]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(9),i=n(70),a=n(54),o=function(e){return e.folksonomy},s=Object(r.createSelector)(o,(function(e){return e.isLoadingSearchTagSuggestions})),c=Object(r.createSelector)(o,(function(e){return e.searchTagSuggestions})),l=Object(i.a)("tagz"),u=Object(a.h)(),d=Object(r.createSelector)(o,(function(e){return e.searchTagName}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return E})),n.d(t,"e",(function(){return O}));var a=n(3),o=n.n(a),s=n(18),c=n.n(s),l=n(236),u=n.n(l),d=n(45),p=n(34),f=n(124),g=n(135),m=Object(p.g)(),v=new d.c({path:"",baseURL:"".concat(m.applicationHost,"/sa/v2")}),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sortField,n=void 0===t?g.a.name:t,r=c()(e,["sortField"]);return v.get("/programs",{params:i({sortField:n},r),paramsSerializer:function(e){return u.a.stringify(e,{arrayFormat:"comma",encode:!1})}})},y=function(e){return v.get("/programs/".concat(e))},E=function(e,t){return v.put("/programs/".concat(t),e)},b=function(e){return v.post("/programs",e)},O=function(e){return v.post("/users/search",i({callId:Object(f.a)(),query:e.searchTerm,maxResults:e.maxResults,lang:e.lang,programId:e.programId,cursor:e.cursor,wrapper:{end:"</mark>",start:'<mark class="search-result-highlight">'}},e))}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.loading="loading",e.loaded="loaded"}(r||(r={}))},function(e,t,n){"use strict";var r,i;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),function(e){e.live="live",e.disabled="disabled",e.deleted="deleted"}(r||(r={})),function(e){e.initial="initial",e.loading="loading",e.failure="failure",e.success="success"}(i||(i={}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return y}));var i=n(19),a=n.n(i),o=n(3),s=n.n(o),c=n(43),l=n(7),u=n.n(l),d=n(4),p=n.n(d),f=n(146),g=n.n(f),m=n(87),v=n.n(m),h=n(288),y={entities:{},search:{query:"",isLoading:!1,isLoadingMore:!1,cursor:"",ids:[],hasMore:!0,followingOnly:!0,status:h.a.initial},isLoadingForPostDialog:!1,selectedCommunityId:"",selectedCommunity:{},currentCommunity:{}},E=Object(c.a)({domain:"community",initialState:y,reducers:{setCommunitySearchInitiated:function(e,t){t.payload.isLoadingMore||u()(e,["search","ids"],[]),u()(e,["search","status"],h.a.loading),u()(e,["search","isLoading"],t.payload.isLoading),u()(e,["search","isLoadingMore"],t.payload.isLoadingMore)},setFilterFollowingOnly:function(e,t){u()(e,["search","followingOnly"],t.payload)},fetchCommunitiesSearchSuccess:function(e,t){var n=t.payload.items||[],i=v()(n,"id");u()(e,"entities",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.entities,{},i)),u()(e,["search","ids"],t.payload.add?g()([].concat(a()(p()(e,["search","ids"])),a()(Object.keys(i)))):Object.keys(i)),u()(e,["search","isLoading"],!1),u()(e,["search","isLoadingMore"],!1),u()(e,["search","status"],n&&n.length>0?h.a.success:h.a.noCommunities),u()(e,["search","cursor"],t.payload.cursor),u()(e,["search","hasMore"],t.payload.more)},fetchCommunitiesSearchError:function(e,t){u()(e,["search","ids"],y.search.ids),u()(e,["search","isLoading"],!1),u()(e,["search","isLoadingMore"],!1),u()(e,["search","status"],h.a.failure),u()(e,["search","errorMessage"],t.payload)},getCommunitySuccess:function(e,t){u()(e,"selectedCommunity",t.payload)},setSelectedCommunityId:function(e,t){u()(e,"selectedCommunityId",t.payload)},setIsLoadingForPostDialog:function(e,t){u()(e,"isLoadingForPostDialog",t.payload)},setCommunities:function(e,t){Object.assign(e.entities,v()(t.payload,"id"))}}}),b=E.actions,O=E.reducer},,,function(e,t,n){"use strict";function r(e,t){return"/serve/profilepicture/".concat(t,"/").concat(e)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var i=function(e){return e.id&&e.customer?r(e.id,e.customer):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAA3NCSVQICAjb4U/gAAAMP0lEQVR4nO2dWXMbxxGAu2cPLBYHcRAERYqHxFsOFcklqaLIlVRSlbgqD8lvyw/Je15SfknlcCVlJy5ZlmWRJkUSIogbe2CPmc4DLIaiJZkiiZmVjO9RYHFXHxu9Mz0zvfjHPz2FMaOHqb6BHwtj0ZIYi5bEWLQkxqIlMRYtibFoSYxFS2IsWhJj0ZIYi5bEWLQkxqIlMRYtibFoSYxFS0JXfQNnBBEBAAgAiBTfy7lIoujvpL6ACAYDPwx8BgJRpDIlQzeGzuHdUZ840YjMcfqcx5qmEUEch1mTX6tOTE1eMXSdMfz3F9s9l4iQExChmUpnMlmC/7tGAEqe+mSIRsRhXCL22oeby2UrZQ6CCAEm8pVsxtYYEy/cfXR3IwhDIUgIAUDPas1vntVe+hIwIzdRJiKABOlWLxqRua4TDfr5NBtE/Geb85VyQQgBw6RMQERciOOf50SGrsMLs2tLV6/PTx9/yhAPG+1/fPEsNzFpWWkiAclArWjkgvea+5srUwtXNzSNEREAxpwDvCkcT+ZlItA07eSnM9OVP1SKWzu1h1vPipMzpzK+KlQO7zjn3Dv63S8/WFqYQUQhaBi/F/y1QghEtro09/GDtVbzEDERQ1hVN4FEFDn1X9/f0HX9ZGa4LISgKBZxPEw7qDyulYjGKAp63dbtG7OMaSMaIRCRnbburJfT1PK7tX63rda1ghwdx3GW9UolvTJZEiOI5WMYw2sLs9cXQde0/z7a/vbItTO2KtmyRSNiGPg3lisz05U45qO+3PAPKYRYWpj2B7sdp8GsEmMKvseyL8k5x7g/VS5KsHwMERiGcffWatrEkX6H3oBU0YjY7zY/urOMKmKq0ey0fc0wDPmXBsmiuaBKnuWyGflTZAQIggCZGssgVzTGcTRZyAihYGZMAPl8Lg4cVVUQeaIJqNWol0sTSio+w9He7bWpbvtIyThPkmhE1m3s/+rOQrGQU1VaE0LMX61WC5rM5/AxkkRHcXR9Jj89VVKSN44RQsxNF8PAB+lBLUc0RmGYyVhcqWUAIALLSnEeyc8dckQT07Qo4srLaAgQRRFjCubDklKHYZiO54N609h3fN935T8nJIlmiN1+qLyEJoS4tjjz4OaVfk92jUnaqAN7Xqw8oAGAIQvCSDcsyTEtbxwdxsB5EhaWSNd1ElxyHpMmmgwz5bie8uxBBHbaiuNQ8n3Ii2jDNF1vkITsEcecofbDP3epSBJNBLpuDIJQ/kzhFIjYd1w9lXpfc/RwKB3LutxrQYR2zzN0U/KuD2mi8dT2DFUgYM8Nkb2fU3BARKfTWLk+p2qB48SdgB9wJn0PgrzrxVwYuuxH0PeJYh5xkv+kkJejs/niXq3OpH9nT4KIrXZXNzPyLy1t1EHZXP7x05qmYrXwGMawVm+bKfu9rXUAACJ0Bnqn5yics8Qx328MDNOUf2l5D0O33yvY8GT7QFX2YAx39+ue7/tuX/4fW1JlNgyjai6+d3vT9QY8FkrqpUQwWZr4/a8rWzsH23UnncnKPCogI6IR0ffd2SvlKI51XVNVlSaibCatadra8rzvdt/DWgcRmGbKcXxQXfmnF7yva4aUstL1Zk/p0O47ENF1B5omeyeNvBWWWmugvEYKAIjQcxzDtCSP7yQWlQy72e4qd42Ana5rpCzJh+bkTVjyE8XdfcUzQxhW7/oDjb2n9WgA0DTtoOEx5RGN2OmH8rdIS5wZAvkher7KTI2IfccTaLzHRSUgouxEae+grlQ0dHqOYabl75iS+g0yzdTu866mLk0jYrvr6kZK/vFxqaIZghPq7a6CUsMQRGx1/VMHQOUgVTQR5fKlzx5+qzGUXKgURIgYRVHf50xTUKqVvd2PaSzUCn/525ca8l/e35SzpYYxPKi1vt6uAWAqU1LSdkL635bINC1mTzmh4bi+nByCiK2OE2lFLVM1DAXFaFB0cpYYAjOsZkveRLHd8ywrddzFRj5qFpaIKJVK79e7EiaKiDAYhH6o+Di4shU8Tde6LvcHwaj/+wjY7TscDLVTUmWiEYBYutEcefZAhvvP25at4HDjSZSJJqJ0JrO91xh19SOOeaMzUHVg9hiVi/8aY10fRjr2QMRuzx1wxXkD1IomItPKb+0eju6RyBg++baWzas5RfrSnai9vGVZu3U3DKNRxDQi+n5Q78S6ijn3KZT3GyI0Mjt79VHsOmQMH2/tp3NF5eEMykUTUTaTe7zTCqNLDmpE9PzBtzU3ZaYu8/eeF+URDURk2sVH3+xd7qqHprFPP38yUaompPWdetEAZFnprZrXbHUvy7WuaVs7NSeyNRWFuleSiPsgEqVy9e+f7wRBcPFhtcZYs93996Pn+UIhCdl5SCJEAwAAZYtXPvnn10EYXiQMNY21u71PPv2mMn2VVJ8uOElyRAMipCem//zXr3b3zrkrgTHcqzU++XRrsjqftF7HCRINAAhQrMx+/rh2vmSNiLv7jcLkTKL67A5JlmgAAALLPP/8Ip3Sk5OXT5I40YIoZ59TFhHksxaPo0u/q4uTONE8jsoT9vmCkoimJksDX+XpjdeRLNGI6HvOuTuJEdFEPmNimMDkkSzRABiH3uQFWrZxQWuLZc9zkxbUSRGNiIDoet5M+UI7l4UQ1xZmKegEYZSQFt1D1N8KIgqifr836B0ulMWHm8sX3OwhBP3q/nrRdHvtwyAIEZnyIx2gtsc/IsYxd51uPhXfXpqqVhY0Xbv4lhoiSpnm3Z+uOJ63tXO4e9jRrLydtglI4SwG//inpwquiiwMQ8/tTOW1lcVqqZgHgEvvPYiIjOFgEGw/O9w+6KORtTMZVW9pkd+omwVB4Lvtq5PWzzYWshlbEI2ovSMRcU6maW6szC8tRLv7R092a6RnM9mcfN3yRA8VO92jpdnc6s0VyzKFkNHBY6hb17TlxZlrc9W92tGjrVqEdn6igEDSdMsQjcgGwcDpHK3OT6zd/sAwdCFIcscwAuBCAOL81en52Wqt3vzi6/2BSBeLJZCie7SiEdkgCJzO4fpicf3OTcaY4EJtU7ZhZ5Yr1fLs9GS90f7syx03tkqlCuJodY/sYYgYBoHbO1qdK2ysLiBiMprevQRD1DTWbHc//3KnFxj5QkljbES6RyAaMQwC32kuz+bXl+eZxhKo+CSIqGus3en/56vdrs8y+aKuXf7bYS5TNCIGQeg7zaWZ7NryvH4Zg2JpvNDde/hkv+mCnS0Y+mVWXC8nRyOyMAx8tz1XsW7cWjdNg6vOxW8LEUUxz+WyH93d6HT7D5/sNztkZSZMw7gU3ReNaESMothzWjMl88bKVTud5oInsHj2ViCiprFuz3n89OB5J05nCqZpXnDbwvkjevh8c/qtSg7u3VnM5zKci+/ekPeOQ0RxzLMZ+97t1V7fffz04Hm7nbILqVTq3LrPI3r4Srx+r5M1gp9vXp0sTXBBSt5QMFKGujN2+u5Pl/uu92T7+V6jk84Uzxfdby0akbluX+Puh6vVK9UyEMTvVC5+W4go5mSn07d/cn3F8R49Pai1Otl8SdffbmTyFqIRMYwir9dYXyguLawzTVPellEaw3m8bafv3lzu9d2HT/bqTVEoVQDP+g7ns4pGZK3WUTUHH/181bJSnIsfj+VjiIgTZbP2/Q/Xmu3uv77YIbNg25mzZJIzFv6xdbR/d718/866aZrv1rjt0hl2sy0V8x//YnOmIJrNo7PsQjmDaGTd5sHHD1Znpyuci2TumpCPEMQF3bpxbXUmVa8f/qDrH/gYkbXqe799sGZZqSQ0JU4aUcw3byzdmLcbjaM3L1G+6TNE1qzv/eb+Siplqn31UpKJoviDtWvLVyz3jUvvrxWNyI7q+w9uzWUz9tjym4lifnPjWsHwBoPX9td5tWhEdN3+B4uFqUppnDHOAhf83u0V7jdep+vVoqMoTqOztjz3Ix9gnB0iYMgefLjSa7+6l9ErRePAad67tTIeX7wVgiifz6zO5T3P+35LztOiEdHp936yPGlbqfFI7m0RXCwvzmDc//7+7NOihSCLeXMzlXFqPgcEYOj6ynzJ89xTQf2SaER03d7G9Wqidq29WwgSs9NliN1T//6SUCIwYFCdKv8I6xiXBRFYKbOcN+KX3+7zkuggDGYq2eSczXtHEQTVci4Mg5PZ4/9OETEKB9OT+fH05IIQUda2hHjpzbb/A34K7qkAUaRgAAAAAElFTkSuQmCC"}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s,c,l,u=n(11),d=n(261),p=n(0),f=n.n(p),g=n(14),m=n.n(g),v=n(16),h=n.n(v),y=n(3),E=n.n(y),b=n(19),O=n.n(b),C=n(8),T=n.n(C),S=n(82),I=n.n(S),_=n(274),A=n(1),w=n(12),D=n(15),L=n(59),P=n(249),N=function(e){var t=e.tag,n=e.isEditable,r=void 0!==n&&n,i=e.onClear,a=e.onClick,o=e.isHighlighted,s=void 0!==o&&o,c=e.position,l=m()("tag","lumx-spacing-margin-tiny"),u=Object(L.b)(P.a),d=u.get,p={after:f.a.createElement(A.Icon,{icon:w.L,size:A.Size.xxs}),onAfterClick:function(e){return i&&i(e,t)}},g=a?function(e){return a(e,t)}:void 0;return f.a.createElement(A.Chip,h()({key:t.id,className:l,isHighlighted:s,size:A.Size.s,onClick:g},d({element:t.id,position:c}),r?p:{}),t.label)},R=n(217),j=n.n(R),k=n(75),F=n.n(k),U=function(e,t){var n=Object(_.a)(e.id),r=Object(_.a)(t.id);return n===r},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return!1;var t=Object(_.a)(e);return Boolean(t&&t.length>0)},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(_.a)(e).toLowerCase()},$=void 0,B="tagz__autocomplete",W=n(6),G=n.n(W),Y=n(10),H=n.n(Y),K=n(71),V=n.n(K),z=n(34),q=n(83),X=n(45),Q=n(52);n(1008),n(281),n(32),n(409),n(670),n(272),n(664),n(162);!function(e){e.DECREASING="decreasing",e.INCREASING="increasing"}(l||(l={}));s={},E()(s,l.DECREASING,Q.r),E()(s,l.INCREASING,Q.x),c={},E()(c,l.INCREASING,l.DECREASING),E()(c,l.DECREASING,l.INCREASING),n(243);var Z=new X.c({path:"organizations",apiVersion:"v2"}),J=function(e){var t=e.organizationId,n=e.query,r=void 0===n?"":n;return Z.get("".concat(t,"/tagz/suggest/").concat(r)).then((function(e){var t=e.data;return t||[]}))},ee=n(298),te=function(){var e=H()(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(t);case 3:r=e.sent,n(ee.a.fetchTagSuggestions(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(ee.a.fetchTagSuggestionsError());case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=V()(te,z.a),re={onTagNameChange:function(e){return function(t,n){t(ee.a.changeSearchTagName(e));var r=Object(q.c)(n()),i=r.id;ne({query:e,organizationId:i},t)}}},ie=Object(u.connect)((function(e){var t=Object(d.a)(e),n=Object(d.d)(e),r=Object(d.e)(e);return{isLoading:t,tagName:n,tagSuggestions:r}}),re)((function(e){var t=e.isTagSuggestionVisible,n=void 0!==t&&t,r=e.isInline,a=void 0!==r&&r,o=e.highlightedTagIndex,s=e.tags,c=void 0===s?[]:s,l=e.tagName,u=e.tagSuggestions,d=e.onTagNameChange,p=e.isLoading,g=void 0!==p&&p,v=e.navSuggestion,y=void 0===v?$:v,b=e.onTagsChange,C=f.a.useRef(null),S=f.a.useState(n),R=T()(S,2),k=R[0],W=R[1],G=f.a.useState(y),Y=T()(G,2),H=Y[0],K=Y[1],V=Boolean(!g&&k&&u.length>0),z=Object(D.c)(),q=z.translateKey,X=Object(L.b)(P.a),Q=X.get,Z=A.ChipGroup.useChipGroupNavigation(c,(function(){b(O()(c.slice(0,c.length-1)))}),o),J=Z.activeChip,ee=Z.onBackspacePressed,te=Z.resetChipNavigation,ne=function(e){(function(e,t){return j()(e,(function(e){return U(e,t)}))})(c,e)||(K($),b([].concat(O()(c),[e])),setTimeout((function(){d("")}),0))},re=function(e){e?(d(e),W(M(e))):d("")},ie=function(e,t){var n;null==C||null===(n=C.current)||void 0===n||n.focus(),b(t?function(e,t){return F()(e,(function(e){return!U(e,t)}))}(c,t):[])},ae=function(e){var t;ne(e),null==C||null===(t=C.current)||void 0===t||t.focus()},oe=A.List.useKeyboardListNavigation(u,C,ae,(function(e){K(e.id)}),(function(e){M(e)&&ae({id:x(e),label:Object(_.a)(e)})}),(function(){0===l.length&&!H&&c.length>0?ee():H&&(re(H),K($),te())}),!0),se=oe.activeItemIndex,ce=m()(B,E()({},"".concat(B,"--inline"),a));return f.a.createElement(A.AutocompleteMultiple,h()({anchorToInput:!0,className:ce,inputRef:C,isOpen:V,label:a?void 0:q("GLOBAL.TAGZ"),placeholder:q("FRONT.TAGZ.ADD"),selectedChipRender:function(e,t){return f.a.createElement(N,{key:e.id||t,isEditable:!0,isHighlighted:t===J,tag:i({},e,{index:t}),position:t+1,onClear:ie,onClick:ie})},value:H||l,values:I()(c)?c:[],onChange:re,onClose:function(){W(!1)},onFocus:function(){W(!0),d(l)},name:"tagz-autocomplete",placement:A.Placement.TOP,closeOnClickAway:!0},Q({element:"autocomplete"})),V&&f.a.createElement(A.List,h()({isClickable:!0},Q({element:"dropdown",action:"suggest"})),u.map((function(e,t){return f.a.createElement(A.ListItem,h()({key:e.id||t,before:f.a.createElement(A.Icon,{color:"dark",colorVariant:A.ColorVariant.L2,icon:w.tc,size:A.Size.s}),isHighlighted:se===t,size:A.Size.tiny},Q({element:"suggest-item",action:e.id,position:t+1}),{onItemSelected:(n=i({},e,{index:t}),function(){return ae(n)})}),e.label);var n}))))})),ae=n(80),oe=n(276),se=n(229),ce=function(e){var t=e.tags,n=e.isEditable,r=e.isClickable,i=void 0===r||r,a=e.onClearTag,s=e.onClickTag,c=Object(ae.l)(),l=c.redirect,u=Object(se.c)(),d=u.modes;if(!t||t&&0===t.length)return null;var p=function(e,t){s?s(e,t):d[se.b.REWORKED_UI]?l(Object(oe.c)('tag:"'.concat(t.id,'"'))):l(Object(oe.e)('tag:"'.concat(t.id,'"')))};return f.a.createElement(f.a.Fragment,null,t.map((function(e,t){return e&&e.id?f.a.createElement(N,{key:e.id||t,isEditable:n,tag:o({},e,{index:t}),position:t+1,onClear:a,onClick:i?p:void 0}):null})))};n.d(t,"a",(function(){return le}));var le=Object(u.connect)((function(e){var t=Object(d.c)(e);return{isEnabled:t}}),{})((function(e){var t=e.className,n=e.isInline,r=e.onChange,i=e.values,a=e.isEnabled,o=void 0!==a&&a;return o?f.a.createElement("div",{className:m()("tagz",t)},r?f.a.createElement(ie,{isInline:n,tags:i,onTagsChange:r}):f.a.createElement(ce,{tags:i})):null}))},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return E}));var i=n(3),a=n.n(i),o=n(18),s=n.n(o),c=n(4),l=n.n(c),u=n(224),d=n.n(u),p=n(546),f=n(61),g=n(5),m=n(84),v=function(e){return d()(e.search.filters,(function(e){var t=e.choices,n=s()(e,["choices"]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({choices:t.map((function(e){var t=e.count,n=e.label,r=e.value,i=t>0?" (".concat(t,")"):"";return{label:"".concat(n?Object(g.h)(n):r).concat(i),value:r}}))},n)}))},h=function(e){var t=e.search.dataSources.filter((function(e){return e.uid!==f.TAB_ALL.uid}));return t.map((function(e){return{label:Object(m.f)(e),value:e.uid}}))},y=function(e){return l()(e,"customer.features",[]).includes(p.a)},E=function(e){return l()(e,"customer.features",[]).includes(p.b)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(2),i=Object(r.oneOf)(["s","m","l"]),a=Object(r.oneOf)(["round","roundedSquare"])},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim().replace(/( {2,})/g," ")}},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var a=n(3),o=n.n(a),s=n(44),c=n(598),l={path:"/search/:query/:tab",legacyId:"app.front.search"},u={legacyId:l.legacyId,path:"/new/search/:query/:filter",isMigrated:!0,ignoreParamEncoding:!0},d=i({},l,{path:"/new/mobile/search",isMigrated:!0}),p=function(e){return 0===e.indexOf("/search/")||0===e.indexOf("/new/search/")||0===e.indexOf(d.path)},f=function(e,t,n){var r={};return e&&e.forEach((function(e){Object.assign(r,o()({},e.id.indexOf(s.d)>=0?e.id:Object(s.t)(e.id),e.value))})),t&&n&&(r.sort=Object(s.u)(t,n)),Object(c.a)()&&(r[s.k]="true"),r},g=function(e,t,n,r,a){var o={query:encodeURIComponent(e),tab:t||s.a},c=f(n,r,a);return i({},l,{params:o,query:c})},m=function(e,t,n,r,a){var o={query:encodeURIComponent(e),filter:t||s.a},c=f(n,r,a);return i({},u,{params:o,query:c})}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=n(3),s=n.n(o),c=n(6),l=n.n(c),u=n(10),d=n.n(u),p=n(21),f=n.n(p),g=n(145),m=n(549),v=n(605),h=n(437),y="widget/entities/ADD_ENTITY",E="widget/entities/REMOVE_ENTITY",b="widget/entities/FETCH_DOCUMENTS_SUCCESS",O="widget/entities/SET_IS_LOADING",C=function(e){return function(t,n){t(Object(v.a)()).then(d()(l.a.mark((function r(){var i,a,o,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=n().document.providers,a=e.displayType,o=void 0===a?m.WidgetSettingsConstant.SELECTION_TYPES.PICK:a,t({payload:{uuid:e.uuid,value:!0},type:O}),r.prev=3,o!==m.WidgetSettingsConstant.SELECTION_TYPES.PICK){r.next=10;break}return r.next=7,Object(h.c)(i,e);case 7:s=r.sent,r.next=13;break;case 10:return r.next=12,Object(h.a)(i,e);case 12:s=r.sent;case 13:t({payload:{append:Boolean(e.cursor),documentList:s.data,uuid:e.uuid},type:b}),t({payload:{uuid:e.uuid,value:!1},type:O}),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(3),t({payload:r.t0,type:"widget/entities/FETCH_DOCUMENTS_ERROR"}),t({payload:{uuid:e.uuid,value:!1},type:O});case 21:case"end":return r.stop()}}),r,null,[[3,17]])}))))}},T=function(e){return function(t){t(C(i({},e,{searchTypes:g.documentTypes.images})))}},S=function(e){return function(t,n){var r=f()(n().widgets.entities,{uuid:e.uuid})||{},a=r.documentList,o=r.isLoading;a&&a.cursor&&!o&&t(C(i({cursor:a.cursor},e,{searchTypes:g.documentTypes.images})))}},I=function(e){return function(t){t({payload:e,type:y})}},_=function(e){return function(t){t({payload:e,type:E})}},A=n(37),w=n(174),D=n.n(w),L=n(110),P=n.n(L),N=[],R=function(e){var t=e.currentState,n=e.uuid,r=e.updatedValues;return t.map((function(e){return e.uuid!==n?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},r)}))},j=function(e){var t=e.payload,n=e.state,r=t.documentList,i=void 0===r?{}:r,a=t.uuid,o=f()(n,{uuid:a}),s=o.documentList,c=void 0===s?{}:s;return c.items=c.items||[],i.items=D()(c.items.concat(i.items)),i},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(A.a)(e,(function(e){e.push(t.payload)}));case O:return Object(A.a)(e,(function(e){return R({currentState:e,updatedValues:{isLoading:t.payload.value},uuid:t.payload.uuid})}));case E:return Object(A.a)(e,(function(n){n.splice(P()(e,{uuid:t.payload.uuid}),1)}));case b:return Object(A.a)(e,(function(e){return R({currentState:e,updatedValues:{documentList:t.payload.append?j({payload:t.payload,state:e}):t.payload.documentList},uuid:t.payload.uuid})}));default:return e}};n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return T})),n.d(t,"g",(function(){return S})),n.d(t,"i",(function(){return _})),n.d(t,"h",(function(){return k}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=n(46),o=n(19),s=n.n(o),c=n(3),l=n.n(c),u=n(37),d={},p=function(e){var t=e.action,n=e.state,r=t.meta||{},i=t.payload||{},a=n.providers&&n.providers[r.provider]||{},o=a.userSpaces&&a.userSpaces[r.spaceId]||{},s=o.channels&&o.channels[r.channelId]||{},c=n.components&&n.components[i.uuid]||{},l=s.messages||{},u=l.items||[],d=l.replies||{},p=a.photos||{};return{channels:{},components:{},meta:r,userTokenStatus:{},userJoinedStatus:{},payload:i,photos:{},providers:{},replies:{},stateChannel:s,stateComponent:c,stateItems:u,stateMessages:l,statePhotos:p,stateProvider:a,stateReplies:d,stateUserSpace:o,userSpaces:{}}},f=function(e,t){var n=t.map((function(e){return e.id})),r=e.filter((function(e){return!n.includes(e.id)}));return r.length>0?r.concat(t):t},g=function(e,t){var n=t.map((function(e){return e.id})),r=e.filter((function(e){return!n.includes(e.id)}));return r.length>0?t.concat(r):t},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;return Object(u.a)(e,(function(n){switch(t.type){case a.h:Object.assign(n,e);break;case a.i:var r=p({action:t,state:e}),o=r.payload,c=r.meta,l=r.stateProvider,u=r.providers,m=[];return o.page>1&&(m=l.userSpaces&&l.userSpaces.items||[]),o.items||(o.items=[]),u[c.provider]=i({},l,{userSpaces:i({},l.userSpaces,{},o,{items:[].concat(s()(m),s()(o.items))})}),Object.assign(n,i({},e,{providers:i({},e.providers,{},u)}));case a.g:break;case a.k:Object.assign(n,e);break;case a.l:var v=p({action:t,state:e}),h=v.payload,y=v.meta,E=v.stateProvider,b=v.providers,O=[];return h.page>1&&(O=E.userSpaces&&E.userSpaces.items||[]),b[y.provider]=i({},E,{userSpaces:i({},E.userSpaces,{},h,{items:[].concat(s()(O),s()(h.items))})}),Object.assign(n,i({},e,{providers:i({},e.providers,{},b)}));case a.j:break;case a.n:Object.assign(n,e);break;case a.o:var C=p({action:t,state:e}),T=C.channels,S=C.userSpaces,I=C.payload,_=C.providers,A=C.replies,w=C.meta,D=C.stateChannel,L=C.stateUserSpace,P=C.stateItems,N=C.stateMessages,R=C.stateProvider,j=C.stateReplies;if(w.chatMessageId)if(I.page>1){var k=j[w.chatMessageId];I.items=f(I.items,k.items),A[w.chatMessageId]=I,T[w.channelId]=i({},D,{messages:i({},N,{replies:i({},j,{},A)})})}else if(j[w.chatMessageId]){var F=j[w.chatMessageId];j[w.chatMessageId].items=g(I.items,F.items),T[w.channelId]=i({},D,{messages:i({},N,{replies:i({},j)})})}else A[w.chatMessageId]=I,T[w.channelId]=i({},D,{messages:i({},N,{replies:i({},A)})});else I.page>1?T[w.channelId]=i({},D,{messages:i({},N,{},I,{items:[].concat(s()(I.items),s()(P))})}):(P&&I.items&&(I.items=g(I.items,P)),N.page&&N.page>1?T[w.channelId]=i({},D,{messages:i({},N,{items:s()(I.items)})}):T[w.channelId]=i({},D,{messages:i({},N,{},I)}));return S[w.spaceId]=i({},L,{channels:i({},L.channels,{},T)}),_[w.provider]=i({},R,{userSpaces:i({},R.userSpaces,{},S)}),Object.assign(n,i({},e,{providers:i({},e.providers,{},_)}));case a.m:break;case a.e:Object.assign(n,i({},e,{},d));break;case a.f:var U=p({action:t,state:e}),M=U.userSpaces,x=U.payload,$=U.providers,B=U.meta,W=U.stateUserSpace,G=U.stateProvider,Y=[];return x.page>1&&(Y=W.channels&&W.channels.items||[]),M[B.spaceId]=i({},W,{channels:i({},W.channels,{},x,{items:[].concat(s()(Y),s()(x.items))})}),$[B.provider]=i({},G,{userSpaces:i({},G.userSpaces,{},M)}),Object.assign(n,i({},e,{providers:i({},e.providers,{},$)}));case a.d:break;case a.b:case a.c:Object.assign(n,e);break;case a.a:break;case a.t:Object.assign(n,e);break;case a.u:var H=p({action:t,state:e}),K=H.payload,V=H.photos,z=H.providers,q=H.meta,X=H.statePhotos,Q=H.stateProvider;return V[K.content.id]=K,z[q.provider]=i({},Q,{photos:i({},X,{},V)}),Object.assign(n,i({},e,{providers:i({},e.providers,{},z)}));case a.s:break;case a.q:Object.assign(n,e);break;case a.r:var Z=t.payload;return Object.assign(n,i({},e,{items:Z}));case a.p:break;case a.C:var J=p({action:t,state:e}),ee=J.payload,te=J.providers,ne=J.meta,re=J.stateProvider;return te[ne.provider]=i({},re,{userSpaces:i({},re.userSpaces,{},ee)}),Object.assign(n,i({},e,{providers:i({},e.providers,{},te)}));case a.D:var ie=p({action:t,state:e}),ae=ie.payload,oe=ie.providers,se=ie.meta,ce=ie.stateProvider,le=ce.userSpaces&&ce.userSpaces.items||[];return le.push(ae.space),oe[se.provider]=i({},ce,{userSpaces:i({},ce.userSpaces,{},ae,{items:s()(le)})}),Object.assign(n,i({},e,{providers:i({},e.providers,{},oe)}));case a.B:break;case a.z:Object.assign(n,i({},e,{},d));break;case a.A:var ue=p({action:t,state:e}),de=ue.userSpaces,pe=ue.payload,fe=ue.providers,ge=ue.meta,me=ue.stateUserSpace,ve=ue.stateProvider,he=me.channels&&me.channels.items||[];return he.push(pe.channel),de[ge.spaceId]=i({},me,{channels:i({},me.channels,{},pe,{items:s()(he)})}),fe[ge.provider]=i({},ve,{userSpaces:i({},ve.userSpaces,{},de)}),Object.assign(n,i({},e,{providers:i({},e.providers,{},fe)}));case a.y:case a.H:break;case a.I:Object.assign(n,i({},e,{},d));break;case a.J:var ye=p({action:t,state:e}),Ee=ye.userJoinedStatus,be=ye.meta,Oe=ye.payload,Ce=Ee||{},Te=Ce&&Ce[be.provider]||{},Se=Te&&Te[be.spaceId]||{};return Te[be.spaceId]=Se,Se[be.channelId]=Oe.userHasJoined,Ce[be.provider]=i({},Te),Object.assign(n,i({},e,{userJoinedStatus:i({},e.userJoinedStatus,{},Ce)}));case a.L:case a.Q:case a.N:case a.V:case a.P:case a.U:case a.R:case a.W:case a.S:case a.O:case a.M:case a.K:case a.T:var Ie=p({action:t,state:e}),_e=Ie.components,Ae=Ie.payload,we=Ie.stateComponent;return _e[Ae.uuid]=i({},we,{},Ae),Object.assign(n,i({},e,{components:i({},e.components,{},_e)}));case a.w:case a.x:case a.v:case a.F:break;case a.G:var De=p({action:t,state:e}),Le=De.userTokenStatus,Pe=De.meta,Ne=De.payload,Re=Le||{},je=Re&&Re[Pe.provider]||{};return je[Pe.spaceId]=Ne.status,Re[Pe.provider]=i({},je),Object.assign(n,i({},e,{userTokenStatus:i({},e.userTokenStatus,{},Re)}));case a.E:break;default:return e}return n}))};n.d(t,"c",(function(){return a.db})),n.d(t,"a",(function(){return a.Z})),n.d(t,"d",(function(){return a.fb})),n.d(t,"e",(function(){return a.gb})),n.d(t,"f",(function(){return a.hb})),n.d(t,"b",(function(){return a.cb})),n.d(t,"g",(function(){return m}))},,,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return C}));var a=n(19),o=n.n(a),s=n(3),c=n.n(s),l=n(43),u=n(7),d=n.n(u),p=n(4),f=n.n(p),g=n(146),m=n.n(g),v=n(87),h=n.n(v),y=n(126),E={connectedUser:void 0,initialized:!1,entities:{},mention:{query:"",isLoading:!1,cursor:void 0,ids:[],hasMore:!0},userList:{ids:[],hasMore:!0,isLoading:!1,cursor:void 0}},b=Object(l.a)({domain:"user",initialState:E,reducers:{"__angular__/user/update":function(e,t){Object(y.a)(e,t.newState)},acceptCookies:function(e,t){var n=t.payload.hasAccepted,r=void 0!==n&&n;d()(e,"connectedUser.settings.hasAcceptedCookies",r)},acceptTermsAndConditions:function(e,t){d()(e,"connectedUser.settings.hasAcceptedTerms",t.payload.hasAccepted)},setToken:function(e,t){d()(e,"connectedUser.token",t.payload),d()(e,"token",t.payload)},setUserMentionSearchStatus:function(e,t){d()(e,["mention","isLoading"],t.payload)},fetchUserMentionSearchSuccess:function(e,t){var n,r,a,s,c=(null===(n=t.payload)||void 0===n?void 0:n.items)||[],l=h()(c,"id");d()(e,"entities",i({},e.entities,{},l)),d()(e,["mention","ids"],(null===(r=t.payload)||void 0===r?void 0:r.add)?m()([].concat(o()(f()(e,["mention","ids"])),o()(Object.keys(l)))):Object.keys(l)),d()(e,["mention","isLoading"],!1),d()(e,["mention","cursor"],null===(a=t.payload)||void 0===a?void 0:a.cursor),d()(e,["mention","hasMore"],null===(s=t.payload)||void 0===s?void 0:s.more)},fetchUserMentionSearchError:function(e,t){d()(e,["mention","ids"],E.mention.ids),d()(e,["mention","isLoading"],!1),d()(e,["mention","errorMessage"],t.payload)},setUserListStatus:function(e,t){d()(e,["userList","isLoading"],t.payload)},fetchUserListSuccess:function(e,t){var n=t.payload.items||[],r=h()(n,"id");d()(e,"entities",i({},e.entities,{},r)),d()(e,["userList","ids"],t.payload.add?m()([].concat(o()(f()(e,["userList","ids"],{})),o()(Object.keys(r)))):Object.keys(r)),d()(e,["userList","isLoading"],!1),d()(e,["userList","cursor"],t.payload.cursor),d()(e,["userList","hasMore"],t.payload.more)},fetchUserListError:function(e,t){d()(e,["userList","ids"],E.userList.ids),d()(e,["userList","isLoading"],!1),d()(e,["userList","errorMessage"],t.payload)}}}),O=b.actions,C=b.reducer},,function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(77),i=n(340),a=n(187);n.d(t,"a",(function(){return a.c})),n.d(t,"c",(function(){return a.e}));var o=Object(r.c)({memberBar:i.d,programMemberListDialog:a.d,sharerListDialog:a.f});i.c,a.b,a.b,i.b},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return E}));var a,o=n(3),s=n.n(o),c=n(43),l=n(7),u=n.n(l),d=n(99),p=n.n(d),f=n(188);!function(e){e.initial="initial",e.loading="loading",e.success="success",e.failure="failure"}(a||(a={}));var g={status:a.initial,canMakeShareableOn:[],canShareTo:p()(f.a).reduce((function(e,t){return i({},e,s()({},t,[]))}),{})},m={},v={fetchContentActions:function(e,t){u()(e,t.payload.contentId,i({},g,{status:a.loading}))},fetchContentActionsSuccess:function(e,t){var n=t.payload,r=n.contentActions,i=n.contentId;u()(e,"".concat(i,".status"),a.success),u()(e,"".concat(i,".canMakeShareableOn"),r.canMakeShareableOn),u()(e,"".concat(i,".canShareTo"),r.canShareTo)},fetchContentActionsFailure:function(e,t){var n=t.payload.contentId;u()(e,"".concat(n,".status"),a.failure)},resetContentActions:function(e,t){u()(e,t.payload.contentId,g)}},h=Object(c.a)({domain:"ContentActions",initialState:m,reducers:v}),y=h.actions,E=h.reducer},,function(e,t,n){"use strict";var r,i,a;n.d(t,"a",(function(){return r})),function(e){e.initial="initial",e.loading="loading",e.noCommunities="noCommunities",e.success="success",e.failure="failure"}(r||(r={})),function(e){e.google="google",e.microsoft="microsoft"}(i||(i={})),function(e){e.restricted="restricted",e.readOnly="read_only",e.open="open",e.secret="secret",e.private="private"}(a||(a={}))},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var a=n(3),o=n.n(a),s=n(11),c=n(70),l=n(117),u=n(93),d=n(62),p=n(18),f=n.n(p),g=n(0),m=n.n(g),v=n(14),h=n.n(v),y=n(171),E=n(15),b=n(504),O=n(1);n.d(t,"a",(function(){return C}));var C=Object(s.connect)((function(e,t){var n,r,a,s,l,p,f=t.componentType,g=t.extensionId,m=t.providerId,v=Object(c.a)("platform-extensions")(e);if(f===u.b.provider_settings){var h,y,E;n=Object(d.a)(e,{providerId:m}),a=null===(h=n)||void 0===h?void 0:h.component,s=null===(y=n)||void 0===y?void 0:y.isComponentLoading,l=null===(E=n)||void 0===E?void 0:E.error}else{var b,O,C,T,S,I=Object(d.f)(e,{extensionId:g});if(r=Object(d.b)(e,{extensionId:g,componentType:f}),a=null===(b=r)||void 0===b?void 0:b.component,s=null===(O=r)||void 0===O?void 0:O.isComponentLoading,l=null===(C=r)||void 0===C?void 0:C.error,(f===u.b.content||f===u.b.settings)&&I)p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},null===(T=I.settings)||void 0===T?void 0:T.global,{},null===(S=I.settings)||void 0===S?void 0:S.internal)}return{component:a,error:l,isComponentLoading:s,isExtensionFeatureEnabled:v,globalValue:p}}),(function(e,t){var n=t.extensionId,r=t.providerId;return{loadComponent:function(t){return t===u.b.provider_settings?e(Object(l.h)(t,r)):e(Object(l.e)(t,n))}}}))((function(e){var t=e.componentType,n=e.className,i=e.component,a=e.isComponentLoading,s=e.error,c=e.loadComponent,l=e.isExtensionFeatureEnabled,u=e.globalValue,d=f()(e,["componentType","className","component","isComponentLoading","error","loadComponent","isExtensionFeatureEnabled","globalValue"]),p=h()("extension-component",n),g=Object(E.c)(),v=g.translateKey;return m.a.useEffect((function(){l&&!1===a&&!i&&c&&!s&&c(t)}),[i,s,a,c,t,l]),m.a.createElement(m.a.Fragment,null,l&&m.a.createElement("div",{className:p},m.a.createElement(y.a,{fallback:m.a.createElement(b.a,{size:O.Size.m,label:v("FRONT.MARKETPLACE.EXTENSION_COULD_NOT_LOAD")})},!a&&i&&"function"!=typeof i&&m.a.createElement(i[Object.keys(i)[0]],function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d,{globalValue:u})),!a&&i&&"function"==typeof i&&m.a.createElement(i,d))))}))},function(e,t,n){"use strict";var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(0),c=n.n(s),l=n(2),u=n(82),d=n.n(u),p=n(193),f=n.n(p),g=n(1),m=n(5),v=function(e){return f()(e)?Object(m.h)(e):d()(e)?Object(m.g)(e[0],e[1],e[2]):void 0},h=function(e){var t=e.description,n=e.hasCancelButton,r=e.isLoading,a=e.isOpen,l=e.onClose,u=e.onValidate,d=e.title,p=e.zIndex,f=o()(e,["description","hasCancelButton","isLoading","isOpen","onClose","onValidate","title","zIndex"]),h=Object(s.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,n&&c.a.createElement(g.Button,{disabled:r,emphasis:g.Emphasis.medium,onClick:l},Object(m.h)("GLOBAL.CANCEL")),c.a.createElement(g.Button,{autoFocus:!0,className:"lumx-spacing-margin-left-regular",disabled:r,onClick:u},Object(m.h)("GLOBAL.OK")))}),[n,r,l,u]);return c.a.createElement(g.Dialog,i()({footer:c.a.createElement(g.Toolbar,{after:h}),header:c.a.createElement(g.Toolbar,{label:c.a.createElement("span",{className:"lumx-typography-title"},v(d))}),isOpen:a,zIndex:p},f),c.a.createElement("div",{className:"lumx-spacing-padding-horizontal-huge"},c.a.createElement("p",null,v(t))),r&&c.a.createElement(g.Progress,{variant:g.ProgressVariant.linear}))};h.propTypes={description:Object(l.oneOfType)([l.string,l.array]),hasCancelButton:l.bool,isLoading:l.bool,isOpen:l.bool,onClose:l.func,onValidate:l.func.isRequired,title:Object(l.oneOfType)([l.string,l.array]),zIndex:l.number},h.defaultProps={description:"",hasCancelButton:!0,isLoading:!1,isOpen:!0,onClose:void 0,title:"",zIndex:void 0},n.d(t,"a",(function(){return h}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return m}));var r=n(3),i=n.n(r),a=n(70),o=n(72),s=n(60),c=n(67),l=n(9),u=n(139),d=Object(a.a)("reworked-ui"),p=Object(a.a)("contextual-actions"),f=Object(l.createSelector)(d,p,(function(e,t){var n;return n={},i()(n,u.d.REWORKED_UI,e),i()(n,u.d.CONTEXTUAL_ACTIONS,t),n})),g=function(e){return e.content||{}},m=Object(l.createSelector)(o.a,s.f,c.c,c.m,(function(e,t,n,r){return{language:e,instance:t,user:n,isConnected:r}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(34),i=Object(r.g)(),a=i.defaultLanguage},,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),i=n.n(r),a=n(14),o=n.n(a),s=n(409),c=n(32),l=n(464),u=n(15),d="load-more",p=function(e){var t=e.className,n=e.onClick,r=e.isLoading,a=void 0!==r&&r,p=e.label,f=Object(u.c)(),g=f.translateKey;return a?i.a.createElement(l.b,{className:"".concat(d,"--loading"),variant:l.a.circular}):i.a.createElement(s.b,{onClick:n,emphasis:c.e.medium,hasBackground:!0,className:o()(d,t)},p||g("GLOBAL.MORE_RESULTS"))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(147),i=n.n(r),a=n(28),o=n.n(a),s=function(e){var t=e.value,n=e.min,r=e.max;return t=parseFloat(t),isNaN(parseFloat(n))||(t=t<n?n:t),isNaN(parseFloat(r))||(t=t>r?r:t),t},c=i()((function(e){return o()(e,(function(e){return{label:e,value:e}}))}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s}));var r="nanny",i=400,a=10,o=["ADMIN.NANNY.REGEXERROR","ADMIN.NANNY.FILEERROR"],s="`https://golang.org/s/re2syntax`"},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(7),i=n.n(r),a=n(43),o={isLoadingSearchTagSuggestions:!1,searchTagName:"",searchTagSuggestions:[]},s=Object(a.a)({domain:"folksonomy",initialState:o,reducers:{resetSearchTagName:function(e){i()(e,"searchTagName",""),i()(e,"isLoadingSearchTagSuggestions",!1)},changeSearchTagName:function(e,t){i()(e,"searchTagName",t.payload),i()(e,"isLoadingSearchTagSuggestions",!0)},fetchTagSuggestions:function(e,t){i()(e,"searchTagSuggestions",t.payload),i()(e,"isLoadingSearchTagSuggestions",!1)},fetchTagSuggestionsError:function(e){i()(e,"searchTagSuggestions",o.searchTagSuggestions),i()(e,"isLoadingSearchTagSuggestions",!1)}}}),c=s.actions,l=s.reducer},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(0),i=n.n(r),a=n(1),o=function(e,t){var n=t.uid;if(!e[n])return i.a.createElement(a.Progress,null);var r=e[n],o=r.email,s=r.fullName,c=r.profilePictureUrl;return i.a.createElement(a.UserBlock,{avatarProps:{image:c,alt:s},fields:[o],name:s,orientation:a.Orientation.horizontal,size:a.Size.m})},s=function(e){return"q-".concat(e)}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var a=n(8),o=n.n(a),s=n(3),c=n.n(s),l=n(45),u=n(34),d=n(404),p=n.n(d),f=Object(u.g)(),g=new l.c({path:"",baseURL:"".concat(f.applicationHost,"/sa/v2")}),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={sortField:"createdAt",sortDir:"-1"},n=p()(i({},t,{},e)).filter((function(e){var t=o()(e,2),n=(t[0],t[1]);return Boolean(n)})).map((function(e){var t=o()(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&"),r="/program-memberships",a=n.length>0?"".concat(r,"?").concat(n):r;return g.get(a)},v=function(e,t){var n=p()(e).map((function(e){var t=o()(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&"),r="/shareable-contents/".concat(t,"/sharers");return r=n.length>0?"".concat(r,"?").concat(n):r,g.get(r)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(9),i=function(e){return e.socialAdvocacy.topics},a=Object(r.createSelector)(i,(function(e){return e.list})),o=Object(r.createSelector)(i,(function(e){return e.isFetching}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f}));var a=n(3),o=n.n(a),s=n(64),c=n(5),l=new s.a({path:"document"}),u=function(){return{lang:Object(c.b)("current")}},d=function(e){var t=e.docPath;return l.post("get",i({},u(),{docPath:t}))},p=function(e){var t=e.docPaths;return l.post("getMulti",i({},u(),{docPaths:t}))},f=function(e){return l.post("list",i({},u(),{},e))}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return W})),n.d(t,"b",(function(){return Y})),n.d(t,"c",(function(){return V})),n.d(t,"f",(function(){return G})),n.d(t,"e",(function(){return H})),n.d(t,"d",(function(){return K})),n.d(t,"h",(function(){return z})),n.d(t,"g",(function(){return q}));var a=n(19),o=n.n(a),s=n(18),c=n.n(s),l=n(6),u=n.n(l),d=n(3),p=n.n(d),f=n(10),g=n.n(f),m=n(423),v=n(462),h=n(42),y=n(327),E=n(72),b=n(416),O=n(41),C=n.n(O),T=n(34),S=n(318),I=n(17),_=n.n(I),A=n(143),w=n.n(A),D=n(78),L=n(23),P=n(21),N=n.n(P),R=n(60),j=n(51),k=n.n(j),F=n(608),U=n(298),M=n(132),x=n(119),$=n(438),B=n(360),W=function(e){return function(){var t=g()(u.a.mark((function t(n,r){var a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r(),o=Object(E.a)(a);try{n(x.a.setEditedPost({links:[i({},e,{lang:o})]}))}catch(e){n(Object(h.b)({translate:Object(S.a)(e.response)}))}case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},G=function(e,t){e.availableCategories;var n=c()(e,["availableCategories"]);return function(){var e=g()(u.a.mark((function e(r,a){var o,s,c,l,d,f,g,O,I,A,w,D,L,P,N;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a(),s=Object(E.a)(o),c=Object(R.c)(o).id,e.prev=3,r(x.a.savePostRequest()),f=i({},n,{authorDetails:{uid:null===(l=n.authorDetails)||void 0===l?void 0:l.uid},title:p()({},s,n.title),content:p()({},s,Object(y.b)(n.content))}),n.postType===M.b.EVENT&&(g=n.publicationDate||C()().utc().format(T.c),O=n.eventStartDate?C()(n.eventStartDate).utc().format(T.c):g,I=n.eventEndDate?C()(n.eventEndDate).utc().format(T.c):C()(O).add(1,"hour").format(T.c),f=i({},f,{eventEndDate:I,eventStartDate:O})),e.next=9,$.a(f);case 9:A=e.sent,t&&t(),r(x.a.savePostSuccess()),r(U.a.resetSearchTagName()),"community"===(null===(d=n.parentContentDetails)||void 0===d?void 0:d.type)&&(L=Boolean(n.uid)&&_()(Object.values(n.canonicalUrl||[]),window.location.origin+window.location.pathname),P=(null===(w=n.parentContentDetails)||void 0===w?void 0:w.slug[s])?null===(D=n.parentContentDetails)||void 0===D?void 0:D.slug[s]:Object.values(n.parentContentDetails.slug)[0],N=A.data.canonicalUrl[s]?A.data.canonicalUrl[s]:Object.values(A.data.canonicalUrl)[0],b.a.redirect({legacyId:"app.front.community",legacyForceReload:!0,isExternal:c!==n.instance,path:N,params:{slug:P,view:L?"post":"posts",identifier:L?n.uid:""}})),e.next=26;break;case 16:if(e.prev=16,e.t0=e.catch(3),r(x.a.savePostError()),!Object(m.b)(o,e.t0.response)){e.next=22;break}return r(Object(m.a)(e.t0.response)),e.abrupt("return");case 22:if(!Object(v.b)(o,e.t0.response)){e.next=25;break}return r(Object(v.a)(e.t0.response)),e.abrupt("return");case 25:r(Object(h.b)({translate:Object(S.a)(e.t0.response)}));case 26:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,n){return e.apply(this,arguments)}}()},Y=function(e){return function(){var t=g()(u.a.mark((function t(n){var r,i,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.every((function(e){var t;return(null===(t=e.content)||void 0===t?void 0:t[0].type)===D.b.IMAGE&&(e.from===D.a.LUMDRIVE||e.source===D.a.LUMDRIVE||e.source===D.a.HAUSSMANN_MEDIA)}))?D.b.IMAGE:D.b.DOCUMENT,i=r===D.b.DOCUMENT?e:[],a=r===D.b.IMAGE?e:[],n(x.a.setEditedPost({files:i,images:a}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(e,t){return function(){var n=g()(u.a.mark((function n(r,i){var a,o,s,c,l,d,p,f,g;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=i(),s=Object(E.a)(o),c=Object(R.c)(o).id,l=w.a.CancelToken,d=l.source(),p=null==t||null===(a=t.selection)||void 0===a?void 0:a.focus,f=t.insertImage({isLoading:!0},p,(function(){d.cancel()})),g=L.a.pathRef(t,f),Object(D.n)({file:e[0],fileName:e[0].name,lang:s,parentPath:"provider=local/site=".concat(c),shared:!1,success:"/upload",cancelSource:d}).then((function(e){var n=e.data.items[0];if(t){var r=N()(n.croppedContent,{lang:s})||k()(n.croppedContent),i=r||N()(n.content,{lang:s})||k()(n.content),a=(null==i?void 0:i.servingUrl)||(null==i?void 0:i.url);t.updateImageNode({src:a,alt:null==i?void 0:i.name,isLoading:!1},g)}})).catch((function(){var e=g.unref();e&&L.i.removeNodes(t,{at:e})}));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},K=function(e,t){return function(){var n=g()(u.a.mark((function n(r,i){var a,s,c,l,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=i(),s=Object(E.a)(a),c=Object(R.c)(a).id,l=e.securedRepository,r(x.a.setEditedPost({isAttachmentsLoading:!0})),d=Array.from(t).map((function(t){return l?Object(D.o)({community:e,file:t,fileName:t.name,lang:s,parentPath:"provider=haussmann_media/resource=".concat(e.uid,"/drive=").concat(e.uid),shared:!1,success:"/upload"}):Object(D.n)({file:t,fileName:t.name,lang:s,parentPath:"provider=local/site=".concat(c),shared:!1,success:"/upload"})})),Promise.all(d).then((function(e){var t=e.map((function(e){return l?e.data:e.data.items[0]})),n=Object(B.a)(a),i=[].concat(o()(n.images||[]),o()(n.files||[]),o()(t));r(Y(i)),r(x.a.setEditedPost({isAttachmentsLoading:!1}))})).catch((function(e){console.error(e),r(Object(h.b)({translate:"GLOBAL.ERROR.GENERIC"}))}));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},V=function(){var e=g()(u.a.mark((function e(t,n){var r,i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.open("","_blank"),e.next=3,Object(D.g)({docPath:"provider=haussmann_media/drive=".concat(t,"/resource=").concat(n)});case 3:i=e.sent,a=i.data,r&&a&&a.content&&a.content[0]&&r.open(a.content[0].servingUrl,"_self");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e,t){return function(){var n=g()(u.a.mark((function n(r,a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(x.a.updatePost({postId:t,post:{isVoteLoading:!0}})),$.d(e,t).then((function(e){r(x.a.updatePost({postId:t,post:i({},e.data,{isVoteLoading:!1})}))})).catch((function(){r(x.a.updatePost({postId:t,post:{isVoteLoading:!1}}))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},q=function(e,t){return function(){var n=g()(u.a.mark((function n(r,i){var a,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=i(),o=Object(E.a)(a),F.a.gTranslate({content:t,targetLang:o,isContentHTML:!0}).then((function(t){r(x.a.updatePost({postId:e,post:{content:p()({},"google_".concat(o),t.data.contentText)}}))})).catch((function(){r(Object(h.b)({translate:"GLOBAL.ERROR.GENERIC"}))}));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return m}));var i,a=n(3),o=n.n(a),s=n(43),c=n(7),l=n.n(c),u=n(87),d=n.n(u);!function(e){e.initial="initial",e.loading="loading",e.success="success",e.failure="failure"}(i||(i={}));var p={fetchShareableContentsStatus:i.initial,shareableContents:{},selectedShareableContent:""},f=Object(s.a)({domain:"share/ShareContentDialog",initialState:p,reducers:{fetchShareableContents:function(e){l()(e,"fetchShareableContentsStatus",i.loading)},fetchShareableContentsSuccess:function(e,t){var n=t.payload,r=n[0];l()(e,"fetchShareableContentsStatus",i.success),l()(e,"shareableContents",d()(n,"id")),l()(e,"selectedShareableContent",r.id)},fetchShareableContentsFailure:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p,{fetchShareableContentsStatus:i.failure})},selectShareableContent:function(e,t){l()(e,"selectedShareableContent",t.payload)}}}),g=f.actions,m=f.reducer},function(e,t,n){"use strict";n(178);n.d(t,"a",(function(){return"YYYY-MM-DD[T]00:00:00.000000"})),n.d(t,"b",(function(){return"YYYY-MM-DD[T]HH:mm:ss.SSSSSS"}))},function(e,t,n){"use strict";var r=n(36),i=n(5),a=n(551);n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return g}));var o="chart/INIT_STATE",s="chart/RESET_STATE",c="chart/SET_CHARTIMAGEURL",l="chart/SET_WIDGETWIDTH",u="chart/SET_ISLOADING",d=function(e,t,n,o,s,l){return function(d){return d({payload:{data:!0,uuid:l},type:u}),function(e,t,n,r,i){return Object(a.a)(e,t,n,r,i).then((function(e){return{payload:e.data.content||""}}))}(e,t,n,o,s).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;d({payload:{data:t,uuid:l},type:c})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_CHART.ERROR.GET_CHARTIMAGE_ERROR"))})).finally((function(){d({payload:{data:!1,uuid:l},type:u})}))}},p=function(e){return function(t){t({payload:e,type:o})}},f=function(e){return function(t){t({payload:e,type:s})}},g=function(e){return function(t){t({payload:e,type:l})}}},,,,,,function(e,t,n){"use strict";var r,i,a,o;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),function(e){e.live="live",e.disabled="disabled",e.deleted="deleted"}(r||(r={})),function(e){e.link="link",e.image="image"}(i||(i={})),function(e){e.link="LINK",e.images="IMAGES"}(a||(a={})),function(e){e.jpeg="image/jpeg",e.png="image/png",e.gif="image/gif"}(o||(o={}))},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u}));var r,i=n(43),a=n(7),o=n.n(a);!function(e){e.idle="idle",e.loading="loading"}(r||(r={}));var s={status:r.idle},c={setStatus:function(e,t){o()(e,"status",t.payload)},showLoader:function(e){o()(e,"status",r.loading)},hideLoader:function(e){o()(e,"status",r.idle)},setBlockedRedirection:function(e,t){o()(e,["blockedRedirection","blockedRoute"],t.payload.route),o()(e,["blockedRedirection","history"],t.payload.history)},blockRedirection:function(e){o()(e,"blockedRedirection",{blockingRoute:window.location.href})},unblockRedirection:function(e){delete e.blockedRedirection}},l=Object(i.a)({domain:"router",initialState:s,reducers:c}),u=l.actions;l.reducer},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="ls"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c}));var r=n(12),i="posts",a={posts:i,default:i,dashboard:"dashboard"},o={open:r.Y,secret:r.db,restricted:r.ac,private:r.ac,"read only":r.cb,read_only:r.cb},s="edit-community-dialog",c="open-analytics-community-dialog"},function(e,t,n){"use strict";function r(e){return e&&e.data&&e.data.error?e.data.error.message&&e.data.error.message.match("^([A-Z_]+)$")?"SERVER_ERROR_".concat(e.data.error.message):403===e.data.error.code?"SERVER_ERROR_NOT_AUTHORIZED":"GLOBAL.ERROR.GENERIC":"GLOBAL.ERROR.GENERIC"}n.d(t,"a",(function(){return r}))},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return p}));var r=n(64),i=new r.a({path:"task"}),a=new r.a({path:"workspace"}),o=function(e){return i.post("/list/categories",{folderId:e,provider:"planner"})},s=function(e,t,n){return i.patch("/update",{etag:t,properties:n,provider:"planner",taskId:e})},c=function(e){return i.post("/list/groupFolders",{groupId:e,provider:"planner"})},l=function(e){return i.post("list",{folderId:e,provider:"planner"})},u=function(){return i.post("/list/userFolders",{provider:"planner"})},d=function(e){return i.post("list/userTasks",{provider:e})},p=function(e,t,n){return i.patch("/update",{etag:t,properties:n,provider:"outlook",taskId:e})},f=function(e){return a.get("/get",{params:{workspaceId:e}})}},function(e,t,n){"use strict";var r=n(36),i=n(5),a=n(68),o=n(520),s=function(e){if(!e.contentUrl)return e.previewUrl;var t=new URL(e.contentUrl),n=t.pathname.split(".").pop();return n&&["bmp","gif","jpg","jpeg","png"].includes(n)?e.contentUrl:e.previewUrl},c=function(e,t){e.attachments.hasImages=!0,e.thumbnail=t},l=function(e){if(!e.attachments)return e;e.attachments={hasFiles:!1,hasImages:!1,items:e.attachments};for(var t=0;t<e.attachments.items.length;++t){var n=e.attachments.items[t];if(n.previewUrl||n.thumbnailUrl){var r=e.thumbnail;e.thumbnail||(n.previewUrl?r=s(n):n.thumbnailUrl&&(r=n.thumbnailUrl)),c(e,r);break}}return e},u=function(e,t,n,r,i,a,s,c){return Object(o.b)(e,t,n,r,i,a,s,c).then((function(e){return e.data.items?e.data.items=e.data.items.map((function(e){return l(e)})):e.data.items=[],{payload:e.data}}))};n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return m}));var d="wall/APPEND_POSTS",p="wall/INIT_STATE",f="wall/SET_POSTS",g="wall/SET_NEXTPAGE",m=function(e){return function(t){t({payload:e,type:p})}},v=function(e,t,n,o,s,c,l,d){return function(p){return p(Object(a.g)(d,!1)),u(e,t,n,o,null,s,c,l).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;p({payload:{data:t,uuid:d},type:g}),p({payload:{data:t.items,uuid:d},type:f})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_WALL.ERROR.FETCH_POSTS_ERROR"))})).finally((function(){p(Object(a.d)(d))}))}},h=function(e,t,n,s,c){return function(u){return u(Object(a.g)(c,!1)),function(e,t,n,r){return Object(o.a)(e,t,n,r).then((function(e){return e.data.item?e.data.item=l(e.data.item):e.data.item={},{payload:e.data}}))}(e,t,n,s).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;u({payload:{data:{cursor:"",more:null},uuid:c},type:g}),u({payload:{data:[t.item],uuid:c},type:f})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_WALL.ERROR.FETCH_POSTS_ERROR"))})).finally((function(){u(Object(a.d)(c))}))}},y=function(e,t,n,o,s,c,l,p,f){return function(m){return m(Object(a.g)(f,!1)),u(e,t,n,o,s,c,l,p).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;m({payload:{data:t,uuid:f},type:g}),m({payload:{data:t.items,uuid:f},type:d})})).catch((function(){return Object(r.b)(Object(i.h)("FRONT.WIDGET_WALL.ERROR.FETCH_POSTS_ERROR"))})).finally((function(){m(Object(a.d)(f))}))}}},,,,,function(e,t,n){"use strict";var r=n(420);n.d(t,"a",(function(){return r.a}));var i=n(585);n.d(t,"b",(function(){return i.a}))},function(e,t,n){"use strict";var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(22),c=n.n(s),l=n(20),u=n.n(l),d=n(24),p=n.n(d),f=n(25),g=n.n(f),m=n(29),v=n.n(m),h=n(26),y=n.n(h),E=n(3),b=n.n(E),O=n(0),C=n.n(O),T=n(2),S=n(1),I=n(63),_=n.n(I),A=n(50),w=n(428),D=n(419),L=n(5),P=n(495),N=function(e){function t(e){var n;return c()(this,t),n=p()(this,g()(t).call(this,e)),n._INITIAL_STATE={inputLanguage:Object(L.a)(),loading:!1},n.state=_()(n._INITIAL_STATE),n.handleChange=n.handleChange.bind(v()(n)),n.handleClose=n.handleClose.bind(v()(n)),n.handleKeyPress=n.handleKeyPress.bind(v()(n)),n.handleValidate=n.handleValidate.bind(v()(n)),n}return y()(t,e),u()(t,[{key:"handleChange",value:function(e,t){this.setState(b()({},t,e))}},{key:"handleClose",value:function(){var e=this.props.onClose;this.setState(_()(this._INITIAL_STATE)),e()}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&this.handleValidate()}},{key:"handleValidate",value:function(){var e,t=this.props,n=t.name,r=t.onValidate,i=this.state,a=i[n],o=i.inputLanguage;r((e={},b()(e,n,a),b()(e,"language",o),e))}},{key:"render",value:function(){var e=this.props,t=e.canChangeLanguage,n=e.loading,r=e.title,a=e.label,s=e.min,c=e.mustDiffer,l=e.name,u=e.open,d=e.value,p=o()(e,["canChangeLanguage","loading","title","label","min","mustDiffer","name","open","value"]),f=this.state,g=f[l],m=void 0===g?d:g,v=f.inputLanguage,h=m&&m.length>=s,y=h&&(!c||m!==d);return C.a.createElement(S.Dialog,i()({isOpen:u,header:C.a.createElement(S.Toolbar,{label:Object(L.h)(r),after:t?C.a.createElement(P.a,{disabled:n,name:"lang",value:v,onChange:this.handleChange}):null}),footer:C.a.createElement(C.a.Fragment,null,C.a.createElement(w.a,{color:"black",disabled:n,size:"m",variant:"flat",onClick:this.handleClose},Object(L.h)("GLOBAL.CANCEL")),C.a.createElement(w.a,{color:"primary",disabled:!y||n,size:"m",variant:"flat",onClick:this.handleValidate},Object(L.h)("GLOBAL.OK"))),isLoading:n},p),C.a.createElement(D.b,{focusOnMount:!0,disabled:n,label:Object(L.h)(a),min:s,name:l,type:"string",value:m,onChange:this.handleChange,onKeyDown:this.handleKeyPress}))}}]),t}(O.PureComponent);b()(N,"propTypes",{canChangeLanguage:T.bool,label:T.string.isRequired,loading:T.bool,min:A.d,mustDiffer:T.bool,name:T.string.isRequired,onClose:T.func.isRequired,onValidate:T.func.isRequired,open:T.bool,title:T.string.isRequired,value:T.string}),b()(N,"defaultProps",{canChangeLanguage:!1,loading:!1,min:0,mustDiffer:!1,open:!0,value:""}),n.d(t,"a",(function(){return N}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(16),i=n.n(r),a=n(8),o=n.n(a),s=n(18),c=n.n(s),l=n(19),u=n.n(l),d=n(0),p=n.n(d),f=n(14),g=n.n(f),m=n(71),v=n.n(m),h=n(1),y=n(378),E=n(15),b=n(268),O=n(11),C=n(70),T=n(596),S=y.a.redirectToProfile,I=function(e){var t,n,r,a=Object(E.c)(),s=a.translateKey,l=e.children,f=e.className,m=e.element,y=e.elementRef,I=c()(e,["children","className","element","elementRef"]),_=(null==m?void 0:m.theme)||h.Theme.light,A=Object(d.useState)(!1),w=o()(A,2),D=w[0],L=w[1],P=Object(d.useRef)(null),N=Object(d.useState)(),R=o()(N,2),j=R[0],k=R[1],F=Object(O.useSelector)(Object(C.a)("new-comments"));t=[P,j],n=L,r=Object(d.useMemo)((function(){return v()(n,500)}),[n]),Object(d.useEffect)((function(){var e=function(){return r(!0)},n=function(){return r(!1)},i=t.map((function(e){return e instanceof HTMLElement?e:e&&e.current})).filter(Boolean),a=!0,o=!1,s=void 0;try{for(var c,l=i[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value;u.addEventListener("mouseenter",e),u.addEventListener("mouseleave",n)}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return function(){var t=!0,r=!1,a=void 0;try{for(var o,s=i[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var c=o.value;c.removeEventListener("mouseenter",e),c.removeEventListener("mouseleave",n)}}catch(e){r=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}}}),[].concat(u()(t),[r]));var U=Object(d.useMemo)((function(){var e,t,n,r,i,a,o=[];((null==m?void 0:m.user.email)&&o.push(m.user.email),null==m||null===(e=m.user.apiProfile)||void 0===e||null===(t=e.organizations)||void 0===t?void 0:t[0].title)&&o.push(null===(i=m.user.apiProfile)||void 0===i?void 0:i.organizations[0].title);(null==m||null===(n=m.user.apiProfile)||void 0===n||null===(r=n.organizations)||void 0===r?void 0:r[0].department)&&o.push(null===(a=m.user.apiProfile)||void 0===a?void 0:a.organizations[0].department);return o}),[m]),M=m&&Object(b.b)(m.user);return p.a.createElement(p.a.Fragment,null,p.a.createElement("button",i()({type:"button"},I,{className:g()("notranslate","wrex-content-user-mention__label",f,{"lumx-color-font-white-N":_===h.Theme.dark}),ref:Object(T.a)([P,y]),onClick:m&&function(){return S(m.user)}}),F?"@":"",l),p.a.createElement(h.Popover,{anchorRef:P,isOpen:D,offset:{away:8}},p.a.createElement("div",{style:{padding:16},ref:k},(null==m?void 0:m.user)&&p.a.createElement(h.UserBlock,{name:m.user.fullName,fields:U,simpleAction:p.a.createElement(h.Button,{onClick:function(){S(m.user),L(!1)},emphasis:h.Emphasis.low,color:"primary",size:h.Size.s},s("FRONT.USER.PROFILE.MORE_INFO.LINK")),size:h.Size.l,orientation:h.Orientation.vertical,avatarProps:M?{image:M,alt:m.user.fullName}:void 0}))))};I.displayName="user-mention"},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(3),a=n.n(i),o=n(34),s=n(1),c=n(32),l=n(708);n.d(t,"a",(function(){return d}));var u=Object(o.g)(),d=function(){var e,t=Object(l.b)({property:"top"})||{},n=t.isCustomColorModeEnabled,i=t.styles,o=n?i.theme||(null===(e=u.topStyles)||void 0===e?void 0:e.theme):s.Theme.light,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.i.light;return e!==c.i.light&&e?"light":"grey"}(o);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{themeColor:d,theme:o,backgroundColor:n?i.backgroundColor||u.instanceTopBackgroundColor:null})}},function(e,t,n){"use strict";var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(22),c=n.n(s),l=n(20),u=n.n(l),d=n(24),p=n.n(d),f=n(25),g=n.n(f),m=n(26),v=n.n(m),h=n(0),y=n.n(h),E=n(2),b=n(14),O=n.n(b),C=n(33),T=n.n(C),S=n(31),I=n(73),_=Object(E.oneOf)(["raised","flat","fab","icon"]),A=n(494);n.d(t,"a",(function(){return w}));var w=function(e){function t(e){var n;return c()(this,t),n=p()(this,g()(t).call(this,e)),n.state={radius:0,value:!1,x:0,y:0},n.onMouseDown=function(e){var t=n.props.onMouseDown;t&&t(e);var r=e.currentTarget,i=Object(S.t)(r),a=Math.max(i.width,i.height),o=n.state.value;n.setState({radius:a,value:!o,x:e.pageX-i.left-a/2,y:e.pageY-i.top-a/2})},n}return v()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.size,a=e.color,s=e.variant,c=e.ripple,l=e.onMouseDown,u=e.type,d=o()(e,["children","className","size","color","variant","ripple","onMouseDown","type"]);return y.a.createElement("button",i()({className:O()(n,"btn btn--".concat(r," btn--").concat(a," btn--").concat(s)),style:c?{overflow:"hidden",position:"relative"}:void 0,type:u},d,{onMouseDown:c?this.onMouseDown:l}),c&&y.a.createElement(A.a,this.state),t)}}]),t}(y.a.PureComponent);w.propTypes={children:E.node,className:E.string,color:E.string,onMouseDown:E.func,ripple:E.bool,size:I.d,type:E.string,variant:_},w.defaultProps={children:void 0,className:"",color:"primary",onMouseDown:T.a,ripple:!0,size:"m",type:"button",variant:"raised"}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e&&t&&n?p()(i,[e.uid,t,n],r):r}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e&&t&&0!==t.length&&n&&n[e.uid]))return[];var i=g()(t,(function(t){var i=u()(t,(function(e,t){return t.endsWith("Values")})),a=p()(t,[i,"values"],[]),o=a.join(", ");if("dateValues"===i){var s=a[0],c=[s.day,s.month,s.year].join("-");o=Object(E.d)({date:c,inputFormat:"D-M-YYYY"})}return{layout:r(e,t.name,"layout",void 0,n),name:r(e,t.name,"localizedName",void 0,n),order:r(e,t.name,"order",0,n),value:o}}));return v()(i,"order")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return{};var t={},n=e.filter((function(e){return void 0!==e.customFields}));return 0===n.length?{}:(n.forEach((function(e){var n=g()(e.customFields,(function(e){return{layout:e.layout,localizedName:e.localizedName,order:e.order}}));t[e.uid]=y()(g()(e.customFields,"name"),n)})),t)}function o(e){var t,n,r;if(!p()(e,"driveMetadata.location"))return null;switch(e.driveMetadata.location){case O.CloudSearchConstant.DRIVE_LOCATION_TYPE.TEAM_DRIVE:n="account-box",r=Object(b.h)("GLOBAL.GOOGLE_TEAM_DRIVE");break;case O.CloudSearchConstant.DRIVE_LOCATION_TYPE.DRIVE:switch(e.driveMetadata.shareScope){case O.CloudSearchConstant.DRIVE_SHARE_SCOPE_TYPE.LIMITED:n="account-multiple",r=Object(b.h)("GLOBAL.SHARED");break;case O.CloudSearchConstant.DRIVE_SHARE_SCOPE_TYPE.PRIVATE:t=Object(b.h)("FRONT.GOOGLE_DRIVE_PRIVACY.PRIVATE_DESCRIPTION"),n="lock",r=Object(b.h)("GLOBAL.PRIVATE");break;case O.CloudSearchConstant.DRIVE_SHARE_SCOPE_TYPE.PUBLIC:t=Object(b.h)("FRONT.GOOGLE_DRIVE_PRIVACY.PUBLIC_DESCRIPTION"),n="earth",r=Object(b.h)("GLOBAL.PUBLIC");break;case O.CloudSearchConstant.DRIVE_SHARE_SCOPE_TYPE.PUBLIC_WITH_LINK:t=Object(b.h)("FRONT.GOOGLE_DRIVE_PRIVACY.PUBLIC_WITH_LINK_DESCRIPTION"),n="link",r=Object(b.h)("GLOBAL.PUBLIC_LINK")}}return{description:t,icon:n,label:r}}function s(e){return p()(e,"source.template")===O.TEMPLATE_TYPE.GOOGLE_CALENDAR}function c(e){return p()(e,"source.template")===O.TEMPLATE_TYPE.GOOGLE_MAIL}var l=n(314),u=n.n(l),d=n(4),p=n.n(d),f=n(28),g=n.n(f),m=n(218),v=n.n(m),h=n(259),y=n.n(h),E=n(31),b=n(5),O=n(221);n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c}))},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&t)switch(t){case"dailymotion":return i(e);case"vimeo":return a(e);case"youtube":return o(e);default:return}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)return'<iframe src="//www.dailymotion.com/embed/video/'.concat(e,'" frameborder="0" allowfullscreen></iframe>')}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)return'<iframe src="https://player.vimeo.com/video/'.concat(e,'" frameborder="0" allowfullscreen></iframe>')}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)return'<iframe src="https://www.youtube.com/embed/'.concat(e,'" frameborder="0" allowfullscreen></iframe>')}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&t){var n=e.replace(d,"");n=n.split("&")[0];var r=u()(p[t],(function(e){return 0===n.indexOf(e)}));return n.substr(r.length||0)||void 0}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)for(var t in p)if(p.hasOwnProperty(t)){var n=u()(p[t],(function(t){return e.indexOf(t)>-1}));if(n)return t}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var l=n(21),u=n.n(l),d=/^(https?:)?\/\/(www\.)?/,p={dailymotion:["dailymotion.com/video/","dai.ly/","dailymotion.com/embed/video/"],vimeo:["vimeo.com/","player.vimeo.com/video/"],youtube:["youtube.com/watch?v=","youtu.be/","youtube.com/embed/","youtube.googleapis.com/v/"]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(29),p=n.n(d),f=n(26),g=n.n(f),m=n(0),v=n.n(m),h=n(2),y=n(14),E=n.n(y),b=n(17),O=n.n(b),C=n(28),T=n.n(C),S=n(382),I=n(5),_=n(381),A=n(73),w=n(50),D=n(424),L=n(493),P=n(115),N=n(65),R=function(e){var t=e.isSelected;return v.a.createElement(P.b,{value:t?"check":"checkbox-blank-outline"})},j=function(e){function t(e){var n;return i()(this,t),n=c()(this,u()(t).call(this,e)),n.onClear=n.onClear.bind(p()(n)),n.onClickChoice=n.onClickChoice.bind(p()(n)),n}return g()(t,e),o()(t,[{key:"onClear",value:function(e){var t=this.props,n=t.name,r=t.onChange;return r(void 0,n,e)}},{key:"onClickChoice",value:function(e){var t=this.props,n=t.name,r=t.choices,i=t.onChange;return i(r[e.currentTarget.id].value,n,e)}},{key:"isChoiceSelected",value:function(e,t){var n=this.props.isMulti;return n?O()(t,e):e===t}},{key:"render",value:function(){var e=this,t=this.props,n=t.ChoiceComponent,r=t.ToggleComponent,i=t.ValueComponent,a=t.align,o=t.choices,s=t.className,c=t.hasBackground,l=t.hasClearChoice,u=t.isMulti,d=t.label,p=t.placeholder,f=t.suffix,g=t.value,m=g===N.n?"GLOBAL.INPUT.CLEAR_LABEL":p,h=Object(S.a)({choices:o,isMulti:u,placeholder:m,suffix:f,value:g});return v.a.createElement("div",{className:E()("custom-select",s,{"custom-select--no-background":!c})},d&&v.a.createElement("span",{className:"custom-select__label"},d),v.a.createElement("div",{className:"custom-select__input"},v.a.createElement(L.a,{align:a,hasPreventAutoClose:!0===u,toggle:r||v.a.createElement("div",{className:"custom-select__selection custom-select-selection"},i&&v.a.createElement(i,{value:g}),v.a.createElement("span",{className:E()("custom-select-selection__label",{"custom-select__placeholder":null==g||u&&0===g.length})},Object(I.h)("".concat(h.text).concat(h.counter?" +".concat(h.counter):""))))},v.a.createElement("ul",{className:"custom-select__choice-list"},l&&v.a.createElement(D.a,{key:"undefined",ChoiceComponent:u&&!n?R:n,id:-1,isSelected:void 0===g,value:{label:"GLOBAL.INPUT.CLEAR_LABEL",value:void 0},onClick:this.onClear}),T()(o,(function(t,r){return v.a.createElement(D.a,{key:r,ChoiceComponent:u&&!n?R:n,hasSelectedStyle:!0!==u,id:r,isError:t.isError,isSelected:e.isChoiceSelected(t.value,g),value:t,onClick:e.onClickChoice})}))))))}}]),t}(m.PureComponent);j.propTypes={ChoiceComponent:h.func,ToggleComponent:h.node,ValueComponent:h.func,align:A.c,choices:_.b.isRequired,className:h.string,hasBackground:h.bool,hasClearChoice:h.bool,isMulti:h.bool,label:h.string,name:w.b.isRequired,onChange:h.func.isRequired,placeholder:h.node,suffix:h.string,value:Object(h.oneOfType)([h.array,h.number,h.string])},j.defaultProps={ChoiceComponent:null,ToggleComponent:null,ValueComponent:null,align:"left",className:null,hasBackground:!0,hasClearChoice:!1,isMulti:!1,label:null,placeholder:"GLOBAL.INPUT.SELECT_VALUE",suffix:null,value:null}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={CIRCULAR:"circular",LINEAR:"linear"}},function(e,t,n){"use strict";function r(e){i=e.getWidgetTranslation}var i;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return s}));var r,i=n(7),a=n.n(i),o=n(43);!function(e){e.intitial="intitial",e.loading="loading",e.success="success",e.error="error"}(r||(r={}));var s={state:r.loading,members:[],totalMembers:0},c={fetch:function(e){a()(e,"state",r.loading)},fetchSuccess:function(e,t){a()(e,"members",t.payload.members),a()(e,"totalMembers",t.payload.totalMembers),a()(e,"state",r.success)},fetchFailure:function(e){a()(e,"state",r.error)}},l=Object(o.a)({domain:"SAMembers/MemberBar",initialState:s,reducers:c}),u=l.actions,d=l.reducer},function(e,t,n){"use strict";n.r(t),n.d(t,"dispatchFetchAllMembers",(function(){return d})),n.d(t,"dispatchFetchMembers",(function(){return u})),n.d(t,"FETCH_ALLMEMBERS_ERROR",(function(){return l})),n.d(t,"FETCH_ALLMEMBERS_LOADING",(function(){return s})),n.d(t,"FETCH_ALLMEMBERS_SUCCESS",(function(){return c})),n.d(t,"FETCH_MEMBERS_ERROR",(function(){return o})),n.d(t,"FETCH_MEMBERS_LOADING",(function(){return i})),n.d(t,"FETCH_MEMBERS_SUCCESS",(function(){return a}));var r=n(182),i="community/FETCH_MEMBERS_LOADING",a="community/FETCH_MEMBERS_SUCCESS",o="community/FETCH_MEMBERS_ERROR",s="community/FETCH_ALLMEMBERS_LOADING",c="community/FETCH_ALLMEMBERS_SUCCESS",l="community/FETCH_ALLMEMBERS_ERROR",u=function(e){var t=e.page,n=e.maxResults,s=e.uid;return function(e){return e({type:i}),Object(r.e)({page:t,maxResults:n,uid:s}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({payload:n,type:a})})).catch((function(t){e({payload:t,type:o})}))}},d=function(e){var t=e.fields,n=void 0===t?"items(\n                            apiProfile,customProfile,customer,email,firstName,fullName,id,lastName,\n                            primaryEmail,profilePicture,profilePictureUrl,profileStatus,uid\n                        ),\n                        more,callId,page":t,i=e.lang,a=void 0===i?"en":i,o=e.more,u=void 0===o||o,d=e.uid;return function(e){return e({type:s}),Object(r.e)({fields:n,lang:a,more:u,uid:d}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({payload:n,type:c})})).catch((function(t){e({payload:t,type:l})}))}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=n(290),d=(n(580),n(579),n(3)),p=n.n(d),f=n(18),g=n.n(f),m=n(11),v=n(117),h=n(62),y=n(16),E=n.n(y),b=n(8),O=n.n(b),C=n(0),T=n.n(C),S=n(1),I=n(14),_=n.n(I),A=n(15),w=function(e){var t=e.isOpen,n=e.onCloseModal,r=e.onConfirm,i=Object(A.c)(),a=i.translateKey,o=Object(C.useMemo)((function(){return T.a.createElement(T.a.Fragment,null,T.a.createElement(S.Button,{emphasis:S.Emphasis.medium,onClick:n},a("CANCEL")),T.a.createElement(S.Button,{color:S.ColorPalette.red,className:"lumx-spacing-margin-left-regular",onClick:r},a("ADMIN.MARKETPLACE.EXTENSION.UNINSTALL")))}),[n,r,a]);return T.a.createElement(S.Dialog,{isOpen:t,header:T.a.createElement(S.Toolbar,{label:T.a.createElement("span",{className:"lumx-typography-title"},a("ADMIN.MARKETPLACE.EXTENSION.UNINSTALL.CONFIRM_TITLE"))}),footer:T.a.createElement(S.Toolbar,{after:o}),size:S.Size.tiny},T.a.createElement("p",{className:"lumx-spacing-padding-horizontal-huge lumx-typography-body2"},a("ADMIN.MARKETPLACE.EXTENSION.UNINSTALL.CONFIRM")))},D="platform-extension-card",L=Object(m.connect)((function(e,t){var n=Object(h.f)(e,t);return{extension:n}}),(function(e,t){var n=t.extensionId;return{onSetUp:function(){return e(Object(v.j)(n))},onToggle:function(){return e(Object(v.o)(n))},onUninstall:function(){return e(Object(v.p)(n))}}}),(function(e,t,n){n.extensionId;var i=g()(n,["extensionId"]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{},e,{},t)}))((function(e){var t=e.className,n=void 0===t?"":t,r=e.extension,i=e.onSetUp,a=e.onToggle,o=e.onUninstall,s=g()(e,["className","extension","onSetUp","onToggle","onUninstall"]),c=Object(A.c)(),l=c.translateKey,u=c.translateObject,d=Object(C.useState)(!1),p=O()(d,2),f=p[0],m=p[1],v=_()(D,n),h=r.description,y=r.enabled,b=r.icon,I=r.loading,L=r.name,P=r.id,N=u(L),R=u(h),j=u(b)||void 0;return T.a.createElement("div",E()({className:"".concat(v," lumx-spacing-padding-huge")},s),T.a.createElement("div",{className:"".concat(D,"__icon-wrapper lumx-spacing-padding-right-huge")},T.a.createElement("img",{alt:"logo",className:"".concat(D,"__icon"),src:j})),T.a.createElement("div",{className:"".concat(D,"__details")},T.a.createElement("div",{className:"".concat(D,"__name lumx-typography-subtitle1")},N),T.a.createElement("div",{className:"".concat(D,"__description lumx-typography-caption lumx-color-font-dark-L2")},R),T.a.createElement(S.FlexBox,{orientation:S.Orientation.horizontal,gap:S.Size.regular},i&&T.a.createElement(S.FlexBox,{className:"".concat(D,"__setup")},T.a.createElement(S.Button,{emphasis:S.Emphasis.medium,size:S.Size.s,onClick:i},l("GLOBAL.SET_UP"))),o&&T.a.createElement(S.FlexBox,null,T.a.createElement(w,{isOpen:f,extensionId:P,onCloseModal:function(){return m(!1)},onConfirm:function(){m(!1),o&&o(P)}}),T.a.createElement("div",{className:"".concat(D,"__uninstall")},T.a.createElement(S.Button,{emphasis:S.Emphasis.low,size:S.Size.s,onClick:function(){return m(!0)}},l("ADMIN.MARKETPLACE.EXTENSION.UNINSTALL")))))),a&&T.a.createElement("div",{className:"".concat(D,"__switch-wrapper lumx-spacing-padding-left-huge")},T.a.createElement(S.Switch,{className:"".concat(D,"__switch"),checked:y,position:S.Alignment.right,onChange:a})),I&&T.a.createElement("div",{className:"".concat(D,"__overlay ").concat(D,"-overlay")},T.a.createElement("div",{className:"".concat(D,"-overlay__text")},l("ADMIN.MARKETPLACE.EXTENSION.PROCESSING"),"...")))})),P=n(70),N=n(27),R=n.n(N),j=n(504),k=n(295),F=n(55),U=n(93),M=n(21),x=n.n(M),$=n(33),B=n.n($),W=n(9),G=Object(W.createSelector)([function(e){return e.customer}],(function(e){return e.id})),Y=Object(W.createSelector)([function(e){return e.providers}],(function(e){return e.applications})),H=Object(W.createSelector)([Y],(function(e){return e.more})),K=Object(W.createSelector)([Y],(function(e){return e.loading})),V=Object(W.createSelector)([Y],(function(e){return null==e?void 0:e.cursor})),z=Object(W.createSelector)([Y],(function(e){return e.items})),q=n(6),X=n.n(q),Q=n(10),Z=n.n(Q),J=n(42),ee=n(107),te=n.n(ee),ne=n(45),re=n(34),ie=Object(re.g)(),ae=function(e){var t=e.organizationId;return te()(window.location.host,"localhost:8888")?"".concat("https://master.go-cell-001.dev.api.lumapps.com","/v").concat("2","/organizations/").concat(t):"".concat(ie.applicationHost,"/_ah/api/lumsites/v").concat("2","/organizations/").concat(t)},oe=function(e){var t=e.organizationId;return new ne.c({baseURL:ae({organizationId:t})})},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r={cursor:t,maxResults:n};return oe({organizationId:e}).get("applications",{params:Object(ne.b)(r)})},ce=function(e,t){return oe({organizationId:e}).get("applications/".concat(t))},le=n(43),ue=function(e){return e.applications},de={applications:{items:void 0,loading:!1,more:void 0,cursor:void 0}},pe=Object(le.a)({domain:"providers",initialState:de,reducers:{setApplicationLoading:function(e,t){ue(e).loading=t.payload},addApplications:function(e,t){var n=ue(e),r=t.payload;n.items=a({},n.items,{},r.items),n.more=r.more,n.cursor=r.cursor},addApplication:function(e,t){var n=t.payload,r=ue(e);r.items=a({},r.items,{},n)}}}),fe=pe.actions,ge=(pe.reducer,{onLoadApplication:function(e){return function(){var t=Z()(X.a.mark((function t(n,r){var i,a,o,s;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(fe.setApplicationLoading(!0)),i=G(r()),t.prev=2,t.next=5,ce(i,e);case 5:a=t.sent,o=a.data,s=p()({},o.id,o),n(fe.addApplication(s)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),n(fe.addApplication(null)),n(Object(J.b)({translate:"GLOBAL.ERROR"}));case 15:return t.prev=15,n(fe.setApplicationLoading(!1)),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,11,15,18]])})));return function(e,n){return t.apply(this,arguments)}}()},onLoadMoreApplications:function(){return function(){var e=Z()(X.a.mark((function e(t,n){var r,i,a,o,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(fe.setApplicationLoading(!0)),r=G(n()),i=V(n()),e.prev=3,e.next=6,se(r,i);case 6:a=e.sent,o=a.data,c={},o.items.forEach((function(e){c[e.id]=e})),t(fe.addApplications(s({},o,{items:c}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),t(Object(J.b)({translate:"GLOBAL.ERROR"}));case 16:return e.prev=16,t(fe.setApplicationLoading(!1)),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}}),me=Object(m.connect)((function(e){var t,n=Object(h.g)(e),r=n.extensionId;if(!r)throw new Error("No extension id defined");var i=Object(h.b)(e,{extensionId:r,componentType:U.b.internal_settings}),a=z(e),o=H(e),s=K(e),c=function(e,t){var n=t.applicationId,r=z(e);if(r)return r[n]}(e,{applicationId:null==i||null===(t=i.settings)||void 0===t?void 0:t.oauthApplicationId});return{hasMoreApplications:o,applicationList:a,selectedApplication:c,isLoadingApplications:s,internalSettings:null==i?void 0:i.settings,areInternalSettingsLoading:null==i?void 0:i.areSettingsLoading}}),ge)((function(e){var t=e.onLoadApplication,n=e.onLoadMoreApplications,r=e.hasMoreApplications,i=e.applicationList,a=e.selectedApplication,o=e.isLoadingApplications,s=e.internalSettings,c=e.areInternalSettingsLoading,l=e.setInternalSettings,u=Object(C.useState)(!1),d=O()(u,2),p=d[0],f=d[1],g=T.a.useState(a),m=O()(g,2),v=m[0],h=m[1],y=void 0!==r;Object(C.useEffect)((function(){h(a)}),[a]);var E=Object(A.c)(),b=E.translateKey;Object(C.useEffect)((function(){c||!(null==s?void 0:s.oauthApplicationId)||a||o||i||t(s.oauthApplicationId)}));var I=function(){return f(!1)},_=function(e){return function(){v===e?(h(void 0),l({oauthApplicationId:void 0})):(h(e),l({oauthApplicationId:e.id})),I()}};return T.a.createElement(T.a.Fragment,null,c||!i&&o?T.a.createElement(S.FlexBox,{vAlign:"center"},T.a.createElement(S.Progress,null)):T.a.createElement(S.Select,{isOpen:p,value:(null==v?void 0:v.name)?null==v?void 0:v.name:"",onClear:function(e){e.stopPropagation(),h(void 0)},label:b("ADMIN.MARKETPLACE.APPLICATIONS.SELECT_OAUTH"),placeholder:b("ADMIN.MARKETPLACE.APPLICATIONS.OAUTH_APP"),onInputClick:function(){p||y||o||n(),f(!p)},onDropdownClose:I,closeOnClick:!1},T.a.createElement(S.List,null,!y&&T.a.createElement(S.FlexBox,{vAlign:"center"},T.a.createElement(S.Progress,null)),y&&i&&!R()(i)&&T.a.createElement(T.a.Fragment,null,Object.keys(i).map((function(e){return T.a.createElement(S.ListItem,{key:i[e].id,onItemSelected:_(i[e])},i[e].name)})),r&&T.a.createElement(k.a,{isLoading:o,label:b("ADMIN.MARKETPLACE.APPLICATIONS.SEE_MORE"),onClick:n})))))})),ve={onCloseModal:v.a,onConfirm:v.m,onLoadAdminSettings:v.c},he=Object(m.connect)((function(e){var t=Object(h.g)(e),n=t.extensionId;if(!n)throw new Error("No extension id defined");var r=Object(h.f)(e,{extensionId:n}),i=Object(h.b)(e,{extensionId:n,componentType:U.b.global_settings}),a=Object(h.b)(e,{extensionId:n,componentType:U.b.internal_settings});return{extension:r,globalSettings:null==i?void 0:i.settings,areGlobalSettingsLoading:null==i?void 0:i.areSettingsLoading,internalSettings:null==a?void 0:a.settings,areInternalSettingsLoading:null==a?void 0:a.areSettingsLoading}}),ve)((function(e){var t=e.className,n=void 0===t?"":t,r=e.extension,i=e.globalSettings,a=e.areGlobalSettingsLoading,o=e.internalSettings,s=e.areInternalSettingsLoading,l=e.onLoadAdminSettings,d=e.onCloseModal,f=e.onConfirm,m=g()(e,["className","extension","globalSettings","areGlobalSettingsLoading","internalSettings","areInternalSettingsLoading","onLoadAdminSettings","onCloseModal","onConfirm"]),v=Object(A.c)(),h=v.translateKey,y=v.translateObject,b=Object(C.useState)(o),I=O()(b,2),w=I[0],D=I[1],L=_()("platform-extension-setup-dialog",n),P=r.oauth,N=Object(C.useCallback)((function(){return x()(r.components,{type:U.b.global_settings})}),[r]);Object(C.useEffect)((function(){i||""===i||a||o||""===o||s||l(r.id)}));var R=Object(C.useMemo)((function(){return T.a.createElement(T.a.Fragment,null,T.a.createElement(S.Button,{emphasis:S.Emphasis.medium,onClick:d},h("CANCEL")),T.a.createElement(S.Button,{className:"lumx-spacing-margin-left-regular",onClick:function(){f({global:i,internal:w})}},h("GLOBAL.SAVE")))}),[i,d,f,w,h]),j=Object(C.useMemo)((function(){var e="".concat(L,"-form"),t=r.icon,n=r.name,o=r.description,s=r.id,l=y(n)||"",d=y(o)||"",f=y(t)||"";return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(e,"__info")},f&&T.a.createElement("div",{className:"".concat(e,"__icon lumx-spacing-margin-right-huge lumx-spacing-margin-top-huge")},T.a.createElement("img",{className:"".concat(e,"__img"),alt:"logo",src:f})),T.a.createElement("div",{className:"".concat(e,"__details")},T.a.createElement(S.TextField,{value:l,label:h("ADMIN.MARKETPLACE.EXTENSION.NAME"),isDisabled:!0,onChange:function(){B()()}}),T.a.createElement(S.TextField,{value:d,label:h("ADMIN.MARKETPLACE.EXTENSION.DESCRIPTION"),isDisabled:!0,type:"textarea",onChange:function(){B()()}}))),(N()||P)&&T.a.createElement("div",{className:"".concat(e,"__settings")},T.a.createElement("p",{className:"lumx-typography-subtitle1 lumx-spacing-margin-top-huge"},h("ADMIN.MARKETPLACE.EXTENSION.SETTINGS")),P&&T.a.createElement(me,{setInternalSettings:function(e){D(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},w,{},e))}}),N()&&T.a.createElement("div",null,a?T.a.createElement("div",{className:"".concat(e,"__loader")},T.a.createElement(S.Progress,{variant:S.ProgressVariant.linear})):T.a.createElement(u.a,{extensionId:s,componentType:U.b.global_settings,properties:i}))))}),[a,L,r,i,N,P,D,w,h,y]);return T.a.createElement(S.Dialog,E()({isOpen:!0,onClose:d,header:T.a.createElement(S.Toolbar,{label:T.a.createElement("span",{className:"lumx-typography-title"},h("ADMIN.MARKETPLACE.EXTENSION.SETTINGS_TITLE"))}),footer:T.a.createElement(S.Toolbar,{after:R}),className:L,size:S.Size.regular},m),T.a.createElement("div",{className:"lumx-spacing-padding-horizontal-huge"},T.a.createElement("p",{className:"lumx-typography-subtitle1 "},h("ADMIN.MARKETPLACE.EXTENSION.SETTINGS.INFORMATION")),T.a.createElement("div",E()({className:"".concat(L,"__form ").concat(L,"-form")},m),r&&j)))})),ye={onCloseModal:v.b,onConfirm:v.n,loadProviderSettings:v.i},Ee=Object(m.connect)((function(e){var t=Object(h.o)(e),n=t.providerId;if(!n)throw new Error("No provider id defined");var r=Object(h.n)(e,{providerId:n});return{providerId:n,component:r.providerSettingsComponent}}),ye)((function(e){var t,n=e.className,r=void 0===n?"":n,i=e.providerId,a=e.component,o=e.onCloseModal,s=e.onConfirm,c=e.onOpenModal,l=e.loadProviderSettings,d=g()(e,["className","providerId","component","onCloseModal","onConfirm","onOpenModal","loadProviderSettings"]),p=Object(A.c)(),f=p.translateKey,m=!1;a&&(t=a.settings,m=a.areSettingsLoading),Object(C.useEffect)((function(){a&&!t&&!m&&i&&l(i)}));var v=_()("platform-provider-setup-dialog",r),h=Object(C.useMemo)((function(){return T.a.createElement(T.a.Fragment,null,T.a.createElement(S.Button,{emphasis:S.Emphasis.medium,onClick:o},f("CANCEL")),T.a.createElement(S.Button,{className:"lumx-spacing-margin-left-regular",onClick:function(){return s(t)}},f("GLOBAL.SAVE")))}),[o,s,t,f]);return T.a.createElement(S.Dialog,E()({isOpen:!0,onClose:o,onOpen:c,header:T.a.createElement(S.Toolbar,{label:T.a.createElement("span",{className:"lumx-typography-title"},"Configuration")}),footer:T.a.createElement(S.Toolbar,{after:h}),className:v,size:S.Size.regular},d),a&&T.a.createElement("div",{className:"lumx-spacing-padding-horizontal-huge"},m?T.a.createElement("div",{className:"".concat(v,"__loader")},T.a.createElement(S.Progress,{variant:S.ProgressVariant.linear})):T.a.createElement(u.a,{providerId:i,componentType:U.b.provider_settings,properties:t})))})),be=n(12),Oe=Object(m.connect)((function(e,t){var n=Object(h.n)(e,t);return{provider:n}}),(function(e,t){var n=t.providerId;return{onConfigureProvider:function(){return e(Object(v.k)(n))},onMoreExtensions:function(){return e(Object(v.f)(n))}}}),(function(e,t,n){n.providerId;var r=g()(n,["providerId"]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{},e,{},t)}))((function(e){var t=e.className,n=void 0===t?"":t,r=e.provider,i=e.onConfigureProvider,a=e.onMoreExtensions,o=g()(e,["className","provider","onConfigureProvider","onMoreExtensions"]),s=Object(A.c)(),c=s.pluralize,l=s.translateKey,u=s.translateObject,d=_()("platform-extension-provider-block",n),p=r.extensions,f=r.id,m=r.name,v=r.providerSettingsComponent,h=p.items.length;return T.a.createElement("div",E()({className:d},o),T.a.createElement("div",{className:"".concat(d,"__header")},T.a.createElement("p",{className:"lumx-typography-subtitle2"},u(m)),T.a.createElement("div",{className:"".concat(d,"__header-infos ").concat(d,"-header-infos lumx-spacing-margin-vertical-tiny")},T.a.createElement("p",{className:"".concat(d,"-header-infos__desc lumx-typography-caption lumx-color-font-dark-L2")},"".concat(l("GLOBAL.ID"),": ").concat(f)," • ",c("ADMIN.PLATFORM.EXTENSIONS.COUNT",h).replace("%NB%","".concat(h))),i&&v&&T.a.createElement(S.Button,{className:"".concat(d,"-header-infos__setup"),emphasis:S.Emphasis.medium,leftIcon:be.Dc,size:S.Size.s,onClick:i},l("GLOBAL.CONFIGURATION")))),T.a.createElement("div",{className:"".concat(d,"__content ").concat(d,"-content")},p.items.map((function(e){return T.a.createElement("div",{key:e,className:"".concat(d,"-content__item lumx-spacing-margin-top-big lumx-spacing-margin-right-huge")},T.a.createElement(L,{extensionId:e}))})),p.more&&T.a.createElement(k.a,{className:"lumx-spacing-margin-top-big",isLoading:p.loading,label:l("ADMIN.EXTENSIONS.SEE_MORE"),onClick:a})))})),Ce={onMoreProviders:v.g,onResetMarketplace:v.l},Te=(Object(m.connect)((function(e){var t=Object(h.l)(e),n=Object(h.h)(e),r=Object(h.i)(e),i=Object(h.p)(e),a=Object(h.q)(e),o=Object(P.a)("platform-extensions")(e);return{hasMoreProviders:n,providerList:t,isLoadingProviders:r,showExtensionSetup:i,showProviderSetup:a,isExtensionsFeatureEnabled:o}}),Ce)((function(e){var t=e.className,n=void 0===t?"":t,r=e.hasMoreProviders,i=e.providerList,a=e.isLoadingProviders,o=e.showExtensionSetup,s=void 0!==o&&o,c=e.showProviderSetup,l=void 0!==c&&c,u=e.isExtensionsFeatureEnabled,d=e.onMoreProviders,p=e.onResetMarketplace,f=g()(e,["className","hasMoreProviders","providerList","isLoadingProviders","showExtensionSetup","showProviderSetup","isExtensionsFeatureEnabled","onMoreProviders","onResetMarketplace"]);Object(C.useEffect)((function(){return function(){p()}}),[p]);var m=Object(A.c)(),v=m.translateKey,h=_()("platform-extension-list",n),y=void 0!==r;return u?(y||a||d(),T.a.createElement(F.c,E()({id:"platform-extensions-admin",header:T.a.createElement(F.a,{title:v("ADMIN.NAV.PLATFORM_EXTENSIONS")})},f),T.a.createElement("div",{className:"".concat(h," lumx-spacing-padding-horizontal-huge")},!y&&T.a.createElement(S.Progress,null),y&&!R()(i)&&T.a.createElement(T.a.Fragment,null,i.map((function(e){return T.a.createElement("div",{key:e,className:"lumx-spacing-padding-top-huge lumx-spacing-padding-bottom-regular"},T.a.createElement(Oe,{providerId:e}))})),r&&T.a.createElement("div",{className:"".concat(h,"__footer ").concat(h,"-footer")},T.a.createElement(k.a,{className:"lumx-spacing-margin-top-big",isLoading:a,label:v("ADMIN.MARKETPLACE.PROVIDER.SEE_MORE"),onClick:d}))),y&&R()(i)&&T.a.createElement(j.a,null)),l&&T.a.createElement(Ee,null),s&&T.a.createElement(he,null))):null})),n(57));n(379);n.d(t,"a",(function(){return U.b})),n.d(t,"e",(function(){return Te.b})),n.d(t,"d",(function(){return v.d})),n.d(t,"c",(function(){return h.d})),n.d(t,"b",(function(){return u.a}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i,a=n(77),o=n(3),s=n.n(o),c=n(19),l=n.n(c),u=n(7),d=n.n(u),p=n(17),f=n.n(p),g=n(43);!function(e){e.initial="initial",e.loading="loading",e.noPrograms="noPrograms",e.withPrograms="withPrograms",e.failure="failure",e.unauthorized="unauthorized"}(i||(i={}));var m={status:i.initial,programs:[],programToDelete:{},selectedPrograms:[]},v={fetchPrograms:function(e){d()(e,"status",i.loading)},fetchProgramsSuccess:function(e,t){var n;d()(e,"status",(null===(n=t.payload)||void 0===n?void 0:n.length)>0?i.withPrograms:i.noPrograms),d()(e,"programs",t.payload||[])},fetchProgramsFailure:function(e,t){var n=(null==t?void 0:t.payload)||{},r=n.status;403===r?d()(e,"status",i.unauthorized):d()(e,"status",i.failure)},setStatus:function(e,t){d()(e,"status",t.payload)},toggleSelectedProgram:function(e,t){var n=e.selectedPrograms,r=t.payload,i=f()(n,t.payload)?n.filter((function(e){return e!==r})):[].concat(l()(n),[r]);d()(e,"selectedPrograms",i)},setSelectedPrograms:function(e,t){d()(e,"selectedPrograms",t.payload)},setProgramToDelete:function(e,t){d()(e,"programToDelete",t.payload)},setProgramToDeleteLoading:function(e){d()(e,"programToDelete",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.programToDelete,{isDeleteLoading:!0}))},closeConfirmDeleteModal:function(e){d()(e,"programToDelete",{})}},h=Object(g.a)({domain:"programAdmin",initialState:m,reducers:v}),y=(h.actions,h.reducer),E=n(253),b=n(255),O=n(203),C=n(184);n.d(t,"d",(function(){return T})),n.d(t,"e",(function(){return S})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return A}));var T=Object(a.c)({userPrograms:O.e,backOffice:y,programFormModal:E.d,programForm:b.c,programSelectionModal:C.d}),S=(O.d,E.c,b.b,C.c,O.c),I=b.a,_=E.b,A=C.b},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p}));var i,a=n(3),o=n.n(a),s=n(19),c=n.n(s),l=n(7),u=n.n(l);!function(e){e.initial="initial",e.loading="loading",e.reloading="reloading",e.loadingMore="loadingMore",e.fetchFailure="fetchFailure",e.hasMore="hasMore",e.done="done"}(i||(i={}));var d={state:i.initial,entities:[],cursor:"",count:0,maxResults:0,filters:{role:""}},p={fetch:function(e){u()(e,"state",i.loading)},fetchMore:function(e){u()(e,"state",i.loadingMore)},fetchSuccess:function(e,t){u()(e,"cursor",t.payload.cursor),u()(e,"count",t.payload.count),u()(e,"maxResults",t.payload.maxResults),u()(e,"entities",e.state===i.loadingMore?[].concat(c()(e.entities),c()(t.payload.items)):t.payload.items),u()(e,"state",t.payload.more?i.hasMore:i.done)},fetchFailure:function(e){u()(e,"state",e.state===i.loadingMore?i.hasMore:i.fetchFailure)},setFilters:function(e,t){if(e.state===i.done||e.state===i.hasMore){var n=t.payload.filters;u()(e,"cursor",""),u()(e,"filters",t.payload.merge?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.filters,{},n):n),u()(e,"state",i.reloading)}},reset:function(){return d}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(19),i=n.n(r),a="my_drive",o="personal_workspace",s={all:{description:"ADMIN.COMMUNITY_DRIVE_SETTINGS.GROUP_ALL_DESCRIPTION",icon:"domain",name:"ADMIN.COMMUNITY_DRIVE_SETTINGS.GROUP_ALL_NAME"},contributor:{description:"ADMIN.COMMUNITY_DRIVE_SETTINGS.GROUP_CONTRIBUTOR_DESCRIPTION",icon:"account-edit",name:"ADMIN.COMMUNITY_DRIVE_SETTINGS.GROUP_CONTRIBUTOR_NAME"},manager:{description:"ADMIN.COMMUNITY_DRIVE_SETTINGS.GROUP_MANAGER_DESCRIPTION",icon:"account-key",name:"ADMIN.COMMUNITY_DRIVE_SETTINGS.GROUP_MANAGER_NAME"}},c=[{label:"ADMIN.COMMUNITY_DRIVE_SETTINGS.VIEWER_LABEL",value:"viewer"},{label:"ADMIN.COMMUNITY_DRIVE_SETTINGS.CONTRIBUTOR_LABEL",value:"contributor"}],l=[].concat(c);[].concat(i()(l),[{label:"ADMIN.COMMUNITY_DRIVE_SETTINGS.MANAGER_LABEL",value:"manager"},{label:"ADMIN.COMMUNITY_DRIVE_SETTINGS.CONTENT_MANAGER_LABEL",value:"content_manager"},{label:"ADMIN.COMMUNITY_DRIVE_SETTINGS.COMMENTER_LABEL",value:"commenter"}])},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=n(11),s=n(390),c=n(53),l=n(3),u=n.n(l),d=n(0),p=n.n(d),f=n(4),g=n.n(f),m=n(17),v=n.n(m),h=n(5),y=n(94),E=n(251),b=n(16),O=n.n(b),C=n(48),T=n(56),S=function e(t,n,r,i,a){var o;switch(Array.isArray(t.children)?o=t.children.map((function(t){return e(t,n,r)})):t.children&&(o=t.children?e(t.children,n,r):void 0),t.type){case T.f.CHAT_CHANNEL_NAME:return function(e,t,n){var r=n.validateChannelName,i=n.leaveChannelName,a=e.id,o=e.label,s=t[a],c=g()(t,"chatProvider"),l=g()(t,"chatChannelNameValid"),u=g()(t,"chatChannelNameError"),d=g()(t,"chatChannelNameChecking");return g()(t,"chatUserSpace")||[C.e.TEAMS.id].includes(c)?p.a.createElement(T.b,{key:a,id:a,errorMessage:u,isLoading:d,label:o,channelName:s,nameIsValid:l,validateInput:r,changeDone:i}):""}(t,n,r);case T.f.CHAT_PROVIDER:return function(e,t,n,r){var i=n.setFieldValue,a=n.getChatProviderList,o=e.descriptionLabel,s=e.id,c=e.label,l=e.type,u=t[s],d=a(),f=d.map((function(e){return e.name})),m=T.i.filter((function(e){return f.includes(e.id)})),v=g()(t,"chatChannelNameChecking");return p.a.createElement(T.j,{key:s,componentDisabled:v,descriptionLabel:o,id:s,label:c,providers:m,selectedProvider:u,onChange:function(e){var t=e.id;i({fieldId:s,type:l,value:t})}},r)}(t,n,r,o);case T.f.CHAT_SELECT_CHANNEL_MODE:return function(e,t,n,r){var i=e.id,a=e.label,o=t.chatProvider,s=t[i]||T.a.CREATE.id,c=[],l=g()(t,"chatChannelNameChecking");return o&&(g()(t,"chatUserSpace")||[C.e.TEAMS.id].includes(o))?(!g()(t,"chatUserSpace")&&[C.e.TEAMS.id].includes(o)&&c.push(T.a.SELECT.id),p.a.createElement(T.c,{key:i,id:i,label:a,value:s,isDisabled:c,componentDisabled:l,onChange:function(e){n.changeChannelMode(e)}},r)):""}(t,n,r,o);case T.f.CHAT_USERSPACE:return function(e,t,n,r){var i=n.setFieldValue,a=n.getChatUserSpaceList,o=n.getNextChatUserSpaceList,s=e.descriptionLabel,c=e.id,l=e.label,u=e.type,d=t[c],f=a(),m=g()(t,"chatChannelNameChecking"),v=g()(t,"chatProvider");return!v||[C.e.TEAMS.id].includes(v)?p.a.createElement("div",{key:c},r):p.a.createElement(T.n,{key:c,componentDisabled:m,descriptionLabel:s,id:c,label:l,selectedUserSpaceId:d,userSpaces:f,onChange:function(e){i({fieldId:c,type:u,value:e})},handleInfiniteScroll:function(){o()}},r)}(t,n,r,o);case T.f.DRIVE:return p.a.createElement(T.e,{key:t.id,field:t,values:n,handlers:r,children:o});case T.f.ICON_TEXT_FIELD:return function(e,t,n){var r=n.onChange,i=e.className,a=e.info,o=e.id;return p.a.createElement(T.g,O()({key:o,className:i,field:e,value:t,onChange:r},a))}(t,n,r);case T.f.MEDIA_SECURED:return p.a.createElement(T.h,{key:t.id,field:t,values:n,handlers:r,children:o,visibility:i,isInEditionMode:a});case T.f.SIMPLE:return function(e,t){var n=e.descriptionLabel,r=e.icon,i=e.id,a=e.label;return p.a.createElement(T.k,{key:i,descriptionLabel:n,icon:r,id:i,label:a},t)}(t,o);case T.f.TAGZ:return function(e,t,n){var r=n.onChange,i=e.className,a=e.info;return p.a.createElement(T.d,O()({className:i,field:e,values:t,onChange:r},a))}(t,n,r);case T.f.TOGGLE:return function(e,t,n,r){var i=e.descriptionLabel,a=e.icon,o=e.id,s=e.items,c=e.label,l=e.type,u=t[o];return p.a.createElement(T.l,{key:o,descriptionLabel:i,icon:a,id:o,items:s,label:c,value:u,onChange:function(e){var t=e.id,r=e.newValue;return n.setFieldValue({fieldId:t,type:l,value:r})}},r)}(t,n,r,o);case T.f.TRANSLATABLE_TAG_INPUT:return function(e,t,n){var r=n.addNewTag,i=n.openTagEditDialog,a=n.removeTag,o=n.setFieldValue,s=e.descriptionLabel,c=e.id,l=e.label,u=e.type,d="".concat(c,"Input"),f=t[c],g=t[d];return p.a.createElement(T.m,{key:c,descriptionLabel:s,id:c,label:l,tags:f,textFieldValue:g,onAddTag:function(){r({fieldId:c,value:g}),o({fieldId:d,type:u,value:""})},onDeleteTag:a,onEditTag:i,onTextFieldChange:function(e){return o({fieldId:d,type:u,value:e})}})}(t,n,r);default:return p.a.createElement(p.a.Fragment,null)}},I=function(e,t,n,r,i){return e.map((function(e){return S(e,t,n,r,i)}))},_=Object(o.connect)((function(e){var t=e.admin.communities.communitySetup.settings.description,n=e.admin.communities.communitySetup.setup,r=n.errorLanguages,i=n.language;return{description:t,errorLanguages:r,language:i}}),{initCommunity:s.a,setField:s.c,setFieldValidity:s.d,setStepLangError:c.E})((function(e){var t=e.description,n=e.errorLanguages,i=e.initCommunity,a=e.setField,o=e.setStepLangError,s=e.setFieldValidity,c=e.setProgressStatus,l=e.language,f=t.fields,m=n||[],b=function(){return E.a.filter((function(e){return!0===e.required})).filter((function(e){var t=f[e.id];return!t||0===Object.keys(t).length}))},O=function(){return E.a.filter((function(e){return e.validations})).filter((function(e){var t=f[e.id],n=!1;return t&&(m.length=0,Object.keys(t).forEach((function(e){n=n||t[e].hasError,t[e].hasError&&!v()(m,e)&&m.push(e)}))),!t||n}))};Object(d.useEffect)((function(){f&&f[E.a[0].id]||i();var e=0!==O().length,t=0!==b().length;o({languages:m}),c({status:t||e?y.b.INCOMPLETE:y.b.COMPLETE})}),[f,b,O,i,m,c,o]);var C=function(e){var t=e.id,n=e.updateFields,r=e.validations,i=e.disablei18n,o=void 0!==i&&i;return function(e){a({fieldId:t,language:o?void 0:l,updateFields:n,value:e}),r&&s({fieldId:t,language:o?void 0:l,validations:r,value:e})}};return p.a.createElement(p.a.Fragment,null,p.a.createElement("p",{className:"lumx-typography-subtitle1 lumx-color-font-blue-N pv+++"},Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.GENERAL_INFORMATION")),p.a.createElement("div",{className:"pb++","flex-container":"row"},p.a.createElement("div",{"flex-item":"9"},E.a.map((function(e){var t=e.id,n=e.disablei18n,i=g()(f,n?t:[t,l],"");return S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{className:"community-setup-content__body-field",info:i}),i.value||"",{onChange:C(e)})})))))})),A=n(14),w=n.n(A),D=n(1),L=n(12),P=function(e){var t=e.children,n=e.locked,r=void 0!==n&&n,i=e.onClick,a=e.tooltip;return p.a.createElement("div",{className:"lockable-block ".concat(r?"lockable-block--locked":"lockable-block--unlocked")},p.a.createElement(D.IconButton,{className:"lockable-block-lock",icon:r?L.ac:L.bc,onClick:i,label:a}),p.a.createElement("div",{className:"lockable-block-content"},t))},N=n(252),R=n(134),j=n(441),k=Object(o.connect)((function(e){var t=e.admin.communities.communitySetup,n=t.group,r=t.settings,i=r.externalServices,a=r.visibility,o=i.fields;return{group:n,fields:o,visibility:a}}),{setIsLocked:j.b,setVisibility:j.c})((function(e){var t=e.fields,n=e.group,r=e.setIsLocked,i=e.setProgressStatus,a=e.setVisibility,o=e.visibility,s=o.isLocked,c=o.visibility,l=n.name,u=n.type,f=null==t?void 0:t.isMediaSecuredEnabled,g=function(e){a({visibility:e})},m=Object(d.useMemo)((function(){var e=f?L.ac:L.g,t=f?D.ColorPalette.dark:D.ColorPalette.yellow,n=f?Object(h.h)("ADMIN.COMMUNITY.SECURE_STORAGE.VISIBILITY_OPTIONS_LABEL_DURING_EDITION"):Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.GROUP_CHANGE_WARNING");return p.a.createElement("div",{className:"community-setup-visibility-lockable-box__header","flex-container":"row"},p.a.createElement(D.Icon,{color:t,icon:e,size:D.Size.s}),p.a.createElement("p",{className:"lumx-typography-body2 lumx-color-font-dark-L2 pl+"},n))}),[f]);Object(d.useEffect)((function(){f&&(a({visibility:N.b.RESTRICTED}),r({locked:!0}))}),[f]);var v=function(e,t){return N.a.map((function(n){return p.a.createElement(D.RadioButton,{key:n.id,checked:c===n.id,className:w()(t?"ph++ mv++":"mb++"),disabled:e,helper:p.a.createElement(p.a.Fragment,null,Object(h.h)(n.description),p.a.createElement("br",null),Object(h.g)("ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.MS_GROUP_CHANGE_NOTICE","GROUP_NAME",l)),label:Object(h.h)(n.value),name:"visibility",value:n.id,onChange:g})}))};return i({status:y.b.COMPLETE}),p.a.createElement("div",{className:"community-setup-visibility"},p.a.createElement("div",{className:"pv+++"},p.a.createElement("p",{className:"lumx-typography-subtitle1 lumx-color-font-blue-N"},Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY")),p.a.createElement("p",{className:"lumx-typography-caption lumx-color-font-dark-L2"},Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.DESCRIPTION"))),u===R.b.PICK?p.a.createElement(P,{className:"community-setup-visibility__lockable-box community-setup-visibility-lockable-box",locked:s,tooltip:Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.VISIBILITY.LOCK.TOOLTIP"),onClick:function(){f||r({locked:!s})}},p.a.createElement("div",null,m,p.a.createElement("div",null,v(s,!0)))):p.a.createElement("div",null,v(f,!1)))})),F=n(190),U=n(8),M=n.n(U),x=n(172),$=n(299),B=Object(o.connect)((function(e){var t=e.admin.communities.communitySetup.settings.members.userPicker,n=e.users;return{userPicker:t,users:n}}),{addMember:F.a,closeUserPicker:F.b,fetchUserListNextPage:F.e,openUserPicker:F.g,setUserPickerQueryValue:F.k})((function(e){var t=e.addMember,n=e.closeUserPicker,r=e.fetchUserListNextPage,i=e.openUserPicker,a=e.userPicker,o=e.users,s=e.setUserPickerQueryValue,c=Object(h.h)("ADMIN.COMMUNITY.SETUP.FIELD.USERS.PLACEHOLDER"),l=a.results,u=a.open,f=a.query,g=o.list,m=Object(d.useState)([]),v=M()(m,2),y=v[0],E=v[1],b=Object(d.useState)(!1),O=M()(b,2),C=O[0],T=O[1],S=y.length>0;Object(d.useEffect)((function(){var e=l[Object($.b)(f)];if(e){var t=e.loading,n=e.users;T(t);var r=n.map((function(e){return g[e]}));E(r)}}),[f,l,g]);return p.a.createElement(D.Select,{closeOnClick:!1,isOpen:u,placeholder:c,style:{width:"100%"},onDropdownClose:n,onInfiniteScroll:function(){r()},onInputClick:function(){u?n():(S||r(),i())}},p.a.createElement(D.List,{isClickable:u},p.a.createElement("li",{className:"user-selector__search-bar"},p.a.createElement(D.Icon,{icon:L.cc}),p.a.createElement("input",{type:"text",value:f,onChange:function(e){s({query:e.target.value})}})),p.a.createElement(D.ListDivider,null),S?y.map((function(e){return p.a.createElement(D.ListItem,{key:e.id,isClickable:!0,className:"mv",isSelected:!1,size:D.Size.tiny,onItemSelected:function(){return r=e,i=r.uid,t({uid:i}),void n();var r,i}},Object($.a)(g,e))})):p.a.createElement(D.ListItem,{key:0},Object(h.h)("GLOBAL.NO_RESULTS")),C&&p.a.createElement(D.Progress,{variant:D.ProgressVariant.linear})))})),W=Object(o.connect)((function(e){var t=e.admin.communities.communitySetup.settings.members,n=e.users.list;return{members:t,userList:n}}),{fetchMembersDetails:F.d,removeMember:F.i,setMemberType:F.j})((function(e){var t=e.fetchMembersDetails,n=e.members,r=e.removeMember,i=e.setMemberType,o=e.setProgressStatus,s=e.userList,c=n.members,l=function(e){return e.filter((function(e){return e.type===x.b.OWNER}))}(c).length>0,f=Object(d.useState)(c.reduce((function(e,t){return e[t.uid]=!1,e}),{})),g=M()(f,2),m=g[0],v=g[1],E=function(e){return function(){v(a({},m,u()({},e,!1)))}};Object(d.useEffect)((function(){t()}),[t,c,s]),Object(d.useEffect)((function(){var e=l?y.b.COMPLETE:y.b.INCOMPLETE;o({status:e})}),[l,o]);var b=function(e){var t=e.uid;return function(){r({uid:t})}},O=function(e,t){return function(){i({type:t,uid:e})}};return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"pv+++"},p.a.createElement("p",{className:"lumx-typography-subtitle1 lumx-color-font-blue-N"},Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.OWNERS_AND_MEMBERS")),p.a.createElement("p",{className:"lumx-typography-caption lumx-color-font-dark-L2"},Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.OWNERS_AND_MEMBERS.DESCRIPTION"))),p.a.createElement("div",{className:"pb++"},p.a.createElement(B,null),!l&&p.a.createElement("p",{className:"lumx-typography-overline lumx-color-font-red-L1"},Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.OWNERS_AND_MEMBERS.MISSING_WARNING")),p.a.createElement("div",{className:"pt+++"},c.map((function(e){return p.a.createElement("div",{key:e.uid,className:"pv"},p.a.createElement(D.Grid,{wrap:!0,gutter:"16",hAlign:D.Alignment.top,orientation:D.Orientation.horizontal,vAlign:D.Alignment.start},p.a.createElement(D.GridItem,{width:"8"},Object($.a)(s,e)),p.a.createElement(D.GridItem,{width:"3"},p.a.createElement(D.Select,{isOpen:m[e.uid],onInputClick:(t=e.uid,function(){v(a({},m,u()({},t,!m[t])))}),onDropdownClose:E(e.uid),style:{width:"100%"},value:Object(h.h)("FRONT.COMMUNITY.USER.TYPE.".concat(e.type))},p.a.createElement(D.List,null,x.a.map((function(t){return p.a.createElement(D.ListItem,{key:t.value,value:t.value,isSelected:t.value===e.type,onItemSelected:O(e.uid,t.value)},Object(h.h)(t.label))}))))),p.a.createElement(D.GridItem,{width:"1"},p.a.createElement(D.IconButton,{emphasis:D.Emphasis.low,icon:L.L,label:"",onClick:b(e)}))));var t})))))})),G="LABELS",Y="PAGE",H="POST-TYPE",K=[Y,H,G],V=[{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.HOMEPAGE",icon:L.a,id:"isHomepageEnabled",label:"FRONT.COMMUNITY.DASHBOARD",section:Y,type:T.f.TOGGLE},{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.POST",icon:L.ic,id:"isPostEnabled",label:"ADMIN.COMMUNITY.SETUP.FIELD.POST",section:H,type:T.f.TOGGLE},{children:[{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.IDEA.DESCRIPTION.STATUS_LABELS",id:"ideaStatusLabels",label:"ADMIN.COMMUNITY.SETUP.FIELD.IDEA.STATUS_LABELS",type:T.f.TRANSLATABLE_TAG_INPUT}],descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.IDEA",icon:L.Tb,id:"isIdeaEnabled",label:"ADMIN.COMMUNITY.SETUP.FIELD.IDEA",section:H,type:T.f.TOGGLE},{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.QUESTION",icon:L.Fb,id:"isQuestionEnabled",label:"ADMIN.COMMUNITY.SETUP.FIELD.QUESTION",section:H,type:T.f.TOGGLE},{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.EVENT",icon:L.x,id:"isEventEnabled",label:"ADMIN.COMMUNITY.SETUP.FIELD.EVENT",section:H,type:T.f.TOGGLE},{children:[{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.CATEGORIES.DESCRIPTION.STATUS_LABELS",id:"categoriesLabels",type:T.f.TRANSLATABLE_TAG_INPUT}],icon:L.Rb,id:"categories",label:"ADMIN.COMMUNITY.SETUP.FIELD.CATEGORIES",section:G,type:T.f.SIMPLE}],z=n(499),q=function(e){var t=e.isDialogOpen,n=e.language,r=e.onCancel,i=e.onChange,a=e.onChangeLanguage,o=e.onDelete,s=e.onSave,c=e.value,l=Object(h.h)(c,void 0,n);return p.a.createElement(D.Dialog,{isOpen:t,size:D.Size.big,footer:p.a.createElement(p.a.Fragment,null,p.a.createElement(D.Button,{color:D.ColorPalette.red,emphasis:D.Emphasis.low,onClick:o},Object(h.h)("GLOBAL.DELETE")),p.a.createElement(D.Button,{emphasis:D.Emphasis.low,onClick:r},Object(h.h)("GLOBAL.CANCEL")),p.a.createElement(D.Button,{color:D.ColorPalette.primary,emphasis:D.Emphasis.low,onClick:s},Object(h.h)("GLOBAL.SAVE")))},p.a.createElement(D.Grid,{wrap:!0,orientation:D.Orientation.horizontal},p.a.createElement(D.GridItem,{width:"10"},p.a.createElement("p",null,Object(h.h)("FRONT.COMMUNITY_AVAILABLE_CATEGORIES_PLACEHOLDER"))),p.a.createElement(D.GridItem,{width:"2"},p.a.createElement(z.a,{name:"language",value:n,onChange:function(e){a({language:e})}}))),p.a.createElement(D.TextField,{label:Object(h.h)("FRONT.COMMUNITY_AVAILABLE_CATEGORIES_PLACEHOLDER"),value:l,onChange:function(e){i({value:e})}}))},X=n(232),Q=Object(o.connect)((function(e){var t=e.admin.communities.communitySetup.settings.options;return{options:t}}),{addNewTag:X.a,closeTagEditDialog:X.b,openTagEditDialog:X.c,removeTag:X.e,setFieldValue:X.f,setTag:X.g,setTagEditDialogLanguage:X.h,setTagEditDialogValue:X.i})((function(e){var t=e.addNewTag,n=e.closeTagEditDialog,r=e.openTagEditDialog,i=e.options,a=e.removeTag,o=e.setFieldValue,s=e.setProgressStatus,c=e.setTag,l=e.setTagEditDialogLanguage,u=e.setTagEditDialogValue,f=i.fields,g=i.tagEditDialog;Object(d.useEffect)((function(){s({status:y.b.COMPLETE})}),[f,s]);var m={addNewTag:t,openTagEditDialog:r,removeTag:a,setFieldValue:o};return p.a.createElement("div",{className:"pv+++"},K.map((function(e){var t=V.filter((function(t){return t.section===e}));return p.a.createElement("div",{key:e},p.a.createElement("p",{className:"lumx-typography-subtitle1 lumx-color-font-blue-N pv+"},Object(h.h)("ADMIN.COMMUNITY.SETUP.SECTION.".concat(e))),I(t,f,m))})),g&&function(e,t){var n=e.language,r=e.value,i=t.closeTagEditDialog,a=t.removeTag,o=t.setTag,s=t.setTagEditDialogLanguage,c=t.setTagEditDialogValue;return p.a.createElement(q,{isDialogOpen:Boolean(e),language:n,value:r,onCancel:i,onChange:c,onChangeLanguage:s,onDelete:a,onSave:o})}(g,{closeTagEditDialog:n,removeTag:a,setTag:c,setTagEditDialogLanguage:l,setTagEditDialogValue:u}))})),Z=n(278),J=n(516),ee=n(6),te=n.n(ee),ne=n(10),re=n.n(ne),ie=n(21),ae=n.n(ie),oe=n(168),se=[{descriptionLabel:"ADMIN.COMMUNITY.SECURE_STORAGE.CAPTION",icon:L.ac,id:"isMediaSecuredEnabled",label:"ADMIN.COMMUNITY.SECURE_STORAGE.TITLE",type:T.f.MEDIA_SECURED},{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.DRIVE",icon:L.ob,id:"isDriveEnabled",label:"ADMIN.COMMUNITY.SETUP.FIELD.DRIVE",type:T.f.DRIVE},{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.CALENDAR",icon:L.x,id:"isCalendarEnabled",label:"ADMIN.COMMUNITY.SETUP.FIELD.CALENDAR",type:T.f.TOGGLE},{children:[{children:[{children:[{children:[{descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.CHAT.CHANNEL.NAME",id:"chatChannelName",label:"ADMIN.COMMUNITY.SETUP.FIELD.CHAT.CHANNEL.NAME",type:T.f.CHAT_CHANNEL_NAME},{id:"chatChannelNameChecking",type:T.f.CHAT_CHANNEL_NAME_CHECKING},{id:"chatChannelNameValid",type:T.f.CHAT_CHANNEL_NAME_VALID}],descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.CHAT.SELECT_CHANNEL_MODE",id:"chatSelectChannelMode",label:"ADMIN.COMMUNITY.SETUP.FIELD.CHAT.SELECT_CHANNEL_MODE",type:T.f.CHAT_SELECT_CHANNEL_MODE}],descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.CHAT.USER_SPACE.SELECT",id:"chatUserSpace",label:"ADMIN.COMMUNITY.SETUP.FIELD.CHAT.USER_SPACE.SELECT",type:T.f.CHAT_USERSPACE}],descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.CHAT.PROVIDER.SELECT",id:"chatProvider",label:"ADMIN.COMMUNITY.SETUP.FIELD.CHAT.PROVIDER.SELECT",type:T.f.CHAT_PROVIDER}],descriptionLabel:"ADMIN.COMMUNITY.SETUP.FIELD.DESCRIPTION.CHAT",icon:L.ic,id:"isChatEnabled",label:"ADMIN.COMMUNITY.SETUP.FIELD.CHAT",type:T.f.TOGGLE}],ce=Object(o.connect)((function(e){var t=e.admin.communities.communitySetup,n=t.settings,r=t.setup,i=n.externalServices,a=n.visibility,o=r.mode,s=e.chats,c=e.admin.communities.communitySetup.group;return{chats:s,externalServices:i,group:c,isInEditionMode:o===y.a.EDIT,visibility:a}}),{getChatChannelById:Z.d,getChatChannelByName:Z.e,getChatUserSpaceById:Z.f,fetchChatChannels:Z.a,fetchChatProviders:Z.b,fetchChatUserSpaces:Z.c,setField:J.b})((function(e){var t,n=e.chats,r=e.externalServices,i=e.group,a=e.isInEditionMode,o=e.fetchChatProviders,s=e.fetchChatUserSpaces,c=e.getChatChannelByName,l=e.getChatChannelById,u=e.getChatUserSpaceById,f=e.setField,m=e.setProgressStatus,v=e.visibility,h=r.fields,E=Object(d.useState)(!1),b=M()(E,2),O=b[0],S=b[1],_=Object(d.useState)(!0),A=M()(_,2),w=A[0],D=A[1],L=Object(d.useState)(!1),P=M()(L,2),N=P[0],j=P[1],k=Object(d.useState)(void 0),F=M()(k,2),U=F[0],x=F[1],$=Object(d.useState)(void 0),B=M()($,2),W=B[0],G=B[1],Y=Object(d.useState)(void 0),H=M()(Y,2),K=H[0],V=H[1],z=v.visibility,q=function(){var e=re()(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h.chatProvider!==C.e.TEAMS.id||!O){e.next=5;break}return x(!1),G("ADMIN.COMMUNITY.CHAT.CHANNEL.TEAMS.NOT.SELECT"),e.abrupt("return");case 5:return f({fieldId:"chatChannelNameChecking",value:!0}),e.next=8,c({channelName:t,provider:h.chatProvider,spaceId:h.chatUserSpace});case 8:if(n=e.sent,!(n&&n.channel&&n.channel.id)){e.next=14;break}return x(!0),G(void 0),f({fieldId:"chatChannelNameChecking",value:!1}),e.abrupt("return");case 14:x(!1),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),x(!1);case 20:G("ADMIN.COMMUNITY.CHAT.CHANNEL.NOTFOUND"),f({fieldId:"chatChannelNameChecking",value:!1});case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=re()(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h.chatProvider!==C.e.TEAMS.id||!O){e.next=4;break}return x(!0),e.abrupt("return");case 4:return f({fieldId:"chatChannelNameChecking",value:!0}),e.next=7,c({channelName:t,provider:h.chatProvider,spaceId:h.chatUserSpace});case 7:if(n=e.sent,!(n&&n.channel&&n.channel.id)){e.next=13;break}return x(!1),G("ADMIN.COMMUNITY.CHAT.CHANNEL.ALREADY.EXISTS"),f({fieldId:"chatChannelNameChecking",value:!1}),e.abrupt("return");case 13:x(!0),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),x(!0);case 19:G(void 0),f({fieldId:"chatChannelNameChecking",value:!1});case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t,n){if(K&&(clearTimeout(K),V(void 0)),!t)return x(!1),void G("ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY");var r=setTimeout((function(){n===T.a.SELECT.id?q(t):X(t)}),e);V(r)};h&&h.chatProvider&&g()(n,"items.providers")&&(t=n.providers),Object(d.useEffect)((function(){return function(){K&&clearTimeout(K)}}),[K]),Object(d.useEffect)((function(){switch(i.type){case R.b.NEW:S(!0);break;case R.b.PICK:S(!1)}}),[S,f,i]),Object(d.useEffect)((function(){w&&(D(!1),h.chatChannelId&&(j(!0),l({provider:h.chatProvider,spaceId:h.chatUserSpace,channelId:h.chatChannelId})))}),[l,D,w,h.chatProvider,h.chatUserSpace,h.chatChannelId]),Object(d.useEffect)((function(){var e=g()(t,h.chatProvider);if(e&&h.chatUserSpace&&h.chatChannelId&&N&&e&&h.chatUserSpace&&g()(e,"userSpaces")){var n=g()(e.userSpaces,h.chatUserSpace);if(n&&h.chatChannelId&&g()(n,"channels")){var r=g()(n.channels,"channel");r&&!h.chatChannelName&&(j(!1),f({fieldId:"chatChannelName",value:r.name}),x(!0),G(void 0))}}}),[N,n,t,f,h.chatChannelId,h.chatChannelName,h.chatProvider,h.chatUserSpace]),Object(d.useEffect)((function(){h.isChatEnabled?h.chatProvider&&h.chatUserSpace&&h.chatChannelName&&U||[C.e.TEAMS.id].includes(h.chatProvider)&&O&&U?m({status:y.b.COMPLETE}):m({status:y.b.INCOMPLETE}):m({status:y.b.COMPLETE})}),[m,U,O,h]),Object(d.useEffect)((function(){h&&h.isChatEnabled&&(g()(n,"items.providers")||o())}),[o,n,h,h.isChatEnabled]),Object(d.useEffect)((function(){if(h&&h.chatProvider){var e=g()(t,h.chatProvider),r=g()(e,"userSpaces.items"),a=ae()(r,{id:h.chatUserSpace}),o=g()(n,"providers.".concat(h.chatProvider)),c=g()(o,"userSpaces.isLoading");if(a||c||!h.chatProvider||!h.chatUserSpace)if([C.e.TEAMS.id].includes(h.chatProvider)){if(f({fieldId:"chatUserSpace",value:i.id}),!i.id&&!h.chatSelectChannelMode){var l=Object(oe.e)(h.chatProvider,i.name);f({fieldId:"chatChannelName",value:l}),f({fieldId:"chatSelectChannelMode",value:T.a.CREATE.id}),Q(0,l,T.a.CREATE.id)}}else g()(t,h.chatProvider)&&t[h.chatProvider].userSpaces||s({provider:h.chatProvider});else u({provider:h.chatProvider,spaceId:h.chatUserSpace})}}),[s,u,f,i,h,t]),Object(d.useEffect)((function(){if(h&&h.chatUserSpace&&!h.chatSelectChannelMode){var e=Object(oe.e)(h.chatProvider,i.name);f({fieldId:"chatChannelName",value:e}),f({fieldId:"chatSelectChannelMode",value:h.chatSelectChannelMode||T.a.CREATE.id}),Q(0,e,h.chatSelectChannelMode||T.a.CREATE.id)}}),[f,i,h]),Object(d.useEffect)((function(){f({fieldId:"chatChannelNameValid",value:U})}),[f,U]),Object(d.useEffect)((function(){f({fieldId:"chatChannelNameError",value:W})}),[f,W]);var Z=function e(t,n){var r;return t.map((function(t){return t.type===n?(r=t,r):Array.isArray(t.children)&&(r=e(t.children,n),r)?r:t})),r},J={leaveChannelName:function(e){x(void 0),G(void 0),Q(0,e,h.chatSelectChannelMode)},validateChannelName:function(e){x(void 0),G(void 0),Object(oe.a)(h.chatProvider,e)&&(f({fieldId:"chatChannelName",value:e}),Q(1500,e,h.chatSelectChannelMode))},changeChannelMode:function(e){f({fieldId:"chatSelectChannelMode",value:e}),x(void 0),G(void 0),Q(0,h.chatChannelName,e)},getChatProviderList:function(){return g()(n,"items.providers",[])},getChatUserSpaceList:function(){var e=g()(n,"providers",[]),t=g()(e,h.chatProvider);return t?g()(t,"userSpaces.items",[]):[]},getNextChatUserSpaceList:function(){var e=g()(n,"providers",[]),t=g()(e,h.chatProvider);if(t){var r=g()(t,"userSpaces",[]);r&&r.more&&o({provider:h.chatProvider,cursor:r.cursor,page:r.page+1})}},setFieldValue:function e(t){var n=t.fieldId,r=t.type,i=t.value;if([T.f.CHAT_PROVIDER,T.f.CHAT_USERSPACE].includes(r)){var a=Z(se,r);G(void 0),x(void 0),a&&a.children&&a.children.map((function(t){return e({fieldId:t.id,type:t.type,value:void 0})}))}f({fieldId:n,value:i})}};return p.a.createElement("div",{className:"pv+++"},I(se,h,J,z,a))}));n.d(t,"a",(function(){return le}));var le=[{component:k,displayGroupSyncBanner:!0,id:"VISIBILITY",label:"ADMIN.COMMUNITY.SETUP.STEP.VISIBILITY"},{component:_,hasInputLang:!0,id:"DESCRIPTION",label:"ADMIN.COMMUNITY.SETUP.STEP.DESCRIPTION"},{component:W,displayGroupSyncBanner:!0,id:"MEMBERS",label:"ADMIN.COMMUNITY.SETUP.STEP.MEMBERS",visibleFor:"microsoft"},{component:Q,id:"OPTIONS",label:"ADMIN.COMMUNITY.SETUP.STEP.OPTIONS"},{component:ce,id:"EXTERNAL_SERVICES",label:"ADMIN.COMMUNITY.SETUP.STEP.EXTENDED_SERVICES",visibleFor:"microsoft"}]},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(3),a=n.n(i),o=n(6),s=n.n(o),c=n(10),l=n.n(c),u=n(155),d=n.n(u),p=n(4),f=n.n(p),g=n(17),m=n.n(g),v=n(66),h=n.n(v),y=n(68),E=n(36),b=n(5),O=n(222),C=n(524),T=function(e){return C.a({customerId:e})},S=function(){var e=l()(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.c(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.d(t,"a",(function(){return I})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return A})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return L})),n.d(t,"f",(function(){return P})),n.d(t,"i",(function(){return N})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return R}));var I="TERMS_AND_CONDITIONS",_="".concat(I,"/FETCH_TERMS_AND_CONDITIONS_SUCCESS"),A="".concat(I,"/FETCH_TERMS_AND_CONDITIONS_ERROR"),w=("".concat(I,"/RESET_TERMS_AND_CONDITIONS_SUCCESS"),"".concat(I,"/SAVE_TERMS_AND_CONDITIONS_SUCCESS")),D="".concat(I,"/SAVE_TERMS_AND_CONDITIONS_ERROR"),L="".concat(I,"/UPDATE_TERMS_AND_CONDITIONS_SUCCESS"),P=function(){return function(){var e=l()(s.a.mark((function e(t,n){var r,i,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(y.g)(I)),r=f()(n(),"customer.id"),e.prev=2,e.next=5,T(r);case 5:i=e.sent,a=i.data,o=i.status,200===o?(c=a.termsAndConditions,t({payload:{termsAndConditions:c},type:_})):t({type:A}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),Object(E.b)(e.t0);case 14:return e.prev=14,t(Object(y.d)(I)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t,n){return e.apply(this,arguments)}}()},N=function(e){var t=e.fieldName,n=e.value;return function(e,i){var o=i().locale.inputCustomerLanguage,s=f()(i(),"termsAndConditions",O.a);m()(O.c,t)?s[t]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},s[t],a()({},o,n)):s[t]=n,e({payload:{termsAndConditions:s},type:L})}},R=function(){return function(){var e=l()(s.a.mark((function e(t,n){var r,i,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),i=r.termsAndConditions,t(Object(y.g)(I)),h()(f()(i,"customer"))&&(a=n().customer.id,i.customer=a),d()(i[O.c.REDIRECT_URL],(function(e,t){""===e&&delete i[O.c.REDIRECT_URL][t]})),e.prev=4,e.next=7,S(i);case 7:o=e.sent,Object(E.d)(Object(b.h)("ADMIN.TERMS_AND_CONDITIONS.SAVE.SUCCESS")),t({payload:{termsAndConditions:o},type:w}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),Object(E.b)(Object(b.h)("ADMIN.TERMS_AND_CONDITIONS.SAVE.ERROR")),t({type:D});case 16:return e.prev=16,t(Object(y.d)(I)),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,12,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()},j=function(){return l()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.b();case 3:Object(E.d)(Object(b.h)("ADMIN.TERMS_AND_CONDITIONS.RESET.SUCCESS")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(E.b)(Object(b.h)("ADMIN.TERMS_AND_CONDITIONS.RESET.ERROR"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h}));var r=n(19),i=n.n(r),a=n(43),o=n(503),s=n.n(o),c=n(144),l=n.n(c),u=function(e){return e.entities},d=function(e){return e.listByContentTypeId},p=function(e,t){return d(e)[t]},f=function(e){return e.admin},g=function(e){return e.deletionModal},m=Object(a.a)({domain:"content-templates",initialState:{admin:{selected:[]},deletionModal:{open:!1},entities:{},listByContentTypeId:{}},reducers:{initTemplateList:function(e,t){var n=t.payload.contentTypeId;d(e)[n]={callId:void 0,cursor:void 0,list:[],loading:!1,more:void 0}},closeTemplateDeletionModal:function(e){var t=g(e);t.open=!1},openTemplateDeletionModal:function(e){var t=g(e);t.open=!0},addTemplates:function(e,t){var n=t.payload,r=u(e);Object.assign(r,n)},addTemplateListItems:function(e,t){var n,r=t.payload,a=r.contentTypeId,o=r.result,s=o.callId,c=o.cursor,l=o.items,u=void 0===l?[]:l,d=o.more,f=p(e,a);Object.assign(f,{callId:s,cursor:c,more:d}),(n=f.list).push.apply(n,i()(u))},setTemplateListMore:function(e,t){var n=t.payload,r=n.contentTypeId,i=n.more,a=p(e,r);Object.assign(a,{more:i})},deleteSelectedTemplates:function(e,t){var n=t.payload.contentTypeId,r=f(e),i=r.selected,a=p(e,n),o=a.list,s=u(e);i.forEach((function(e){l()(o,(function(t){return t===e})),delete s[e]})),i.length=0},setIsLoadingMoreTemplates:function(e,t){var n=t.payload,r=n.contentTypeId,i=n.loading,a=void 0===i||i,o=p(e,r);o.loading=a},selectAllTemplates:function(e,t){var n=t.payload,r=n.contentTypeId,a=n.select,o=void 0===a||a,s=f(e),c=s.selected,l=p(e,r),u=l.list;c.length=0,o&&c.push.apply(c,i()(u))},selectTemplate:function(e,t){var n=t.payload,r=n.templateId,i=n.select,a=void 0===i||i,o=f(e),c=o.selected;a?c.push(r):s()(c,r)}}}),v=m.actions,h=m.reducer},,,function(e,t,n){"use strict";var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(4),c=n.n(s),l=n(45),u=n(34),d=n(100),p=Object(u.g)(),f=new l.c({path:"",baseURL:"".concat(p.applicationHost,"/sa/v2")}),g=function(e){return f.delete("users/me/social-network-accesses/".concat(e))},m=n(228),v=n(185),h=n(153);n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return C}));var y=function(){return function(){var e=o()(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("users/me/social-network-accesses");case 3:n=e.sent,r=n.data,t(m.b.fetchSocialNetworkAccessesSuccess(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},E=function(){return function(){var e=o()(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(m.b.startFetchUser()),e.next=4,f.getCacheFirst("users/me",void 0,d.a.LOW);case 4:return r=e.sent,a=r.data,t(m.b.fetchUserSuccess(a)),(null==a||null===(n=a.permissions)||void 0===n?void 0:n.includes(v.a.CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES))&&t(y()),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e){return function(){var t=o()(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(e);case 3:n(m.b.disconnectSuccess(e)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(t){var n=window.open("/sa/v2/social-network/oauth-authorize/".concat(e),void 0,"\n              toolbar=no,\n              location=no,\n              status=no,\n              menubar=no,\n              scrollbars=yes,\n              resizable=yes,\n              width=600,\n              height=600\n          ");return new Promise((function(e){var r=function(){var n=o()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(y());case 2:e();case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a=setInterval((function(){if(null==n?void 0:n.closed)clearInterval(a),r();else try{var e=null==n?void 0:n.location.href;(null==e?void 0:e.includes("oauth-authorize"))&&n&&(clearInterval(a),n.close(),r())}catch(e){return}}),1e3)}))}},C=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=o()(i.a.mark((function a(o,s){var l,u;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!r){i.next=4;break}return i.next=4,o(y());case 4:if(l=Object(h.l)(s()),u=!c()(l(t),"authorizationRefreshRequired",!0),!u){i.next=8;break}return i.abrupt("return",u);case 8:if(!n){i.next=12;break}return i.next=11,o(O(t));case 11:return i.abrupt("return",o(e(t)));case 12:throw new Error("GLOBAL.ERROR.GENERIC");case 15:throw i.prev=15,i.t0=i.catch(0),new Error(i.t0);case 18:case"end":return i.stop()}}),a,null,[[0,15]])})));return function(e,t){return a.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e){i=e.open}var i;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var r="directories",i=10,a="book-multiple"},,,function(e,t,n){var r=n(1984),i=n(980);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));n(8);var r=n(34),i=(n(17),Object(r.g)()),a=function(e,t){return e?t("LANG_".concat(e.toUpperCase())):""},o=function(){var e=i.userAlernativeLangs.length>0?i.userAlernativeLangs:[i.defaultLanguage],t=e[0];return t===i.userLang&&i.userAlernativeLangs.length>1&&(t=i.userAlernativeLangs[1]),t}},,,function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(9),i=function(e){return e.post.root},a=function(e){return Object(r.createSelector)(i,(function(t){return t.entities[e]}))},o=Object(r.createSelector)(i,(function(e){return e.editedPost})),s=Object(r.createSelector)(i,(function(e){return e.isPostDialogOpen})),c=Object(r.createSelector)(i,(function(e){return e.saving}))},function(e,t,n){"use strict";n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g}));var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(111);n.d(t,"d",(function(){return s.j})),n.d(t,"e",(function(){return s.k})),n.d(t,"g",(function(){return s.u}));var c=n(300),l=n(68),u="SA/USERS",d="GET_USERS_BY_ROLES",p="".concat(u,"/FETCH_USERS_SUCCESS"),f="".concat(u,"/ADD_ROLE"),g="".concat(u,"/DELETE_ROLE"),m=function(e){return function(){var t=o()(i.a.mark((function t(n){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(l.g)(d)),t.next=3,Object(c.a)({programId:e,maxResults:"1000"});case 3:return r=t.sent,a=r.data,t.next=7,n({type:p,users:a.items.map((function(e){var t=e.user;return t}))});case 7:n(Object(l.d)(d));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"LegacySearchConstant",(function(){return i})),n.d(t,"TAB_TYPES",(function(){return r}));var r={EXTERNAL:"external",IFRAME:"iframe"},i={DEFAULT_QUERY_FILTER:{},DEFAULT_TAB_NAMES:["all","content","users","media","directory","drive","sharepoint","community","post"],PROJECTIONS:{communityList:{items:{canContribute:!0,description:!0,id:!0,instance:!0,privacy:!0,properties:{followAndNotify:!0},slug:!0,subscription:{customerKey:!0,followerUserKey:!0,followingContentKey:!0,followingContentType:!0,id:!0,instanceKey:!0,notify:!0,type:!0,uid:!0},thumbnail:!0,title:!0,uid:!0}},content:{items:{author:!0,comments:!0,customContentType:!0,customContentTypeDetails:!0,customContentTypeTags:!0,excerpt:!0,feedKeys:!0,hasCommentWidget:!0,id:!0,instance:!0,liked:!0,likes:!0,link:!0,metadata:!0,properties:!0,publicationDate:!0,slug:!0,thumbnail:!0,thumbnailBlobkey:!0,title:!0,type:!0,uid:!0,writer:!0}}},SORT_ORDER_TYPES:[{label:"GLOBAL.RELEVANCE",value:null},{label:"UPDATED_AT",value:"updatedAt"}],TAB_TYPES:r,TABS:{all:{id:"all",name:"ALL",uid:"all"},community:{id:"community",method:"communityList",name:"SEARCH_PLUS_COMMUNITY_TAB",noFilter:!0,template:"legacy-search-results_tab.html",uid:"community"},content:{id:"content",method:"content",name:"SEARCH_PLUS_CONTENT_TAB",template:"legacy-search-results_tab.html",uid:"content"},directory:{id:"directory",method:"siteList",name:"SEARCH_PLUS_DIRECTORY_TAB",template:"legacy-search-results_tab.html",uid:"directory"},drive:{filter:!1,id:"drive",name:"SEARCH_PLUS_DRIVE_TAB",noFilter:!0,template:"legacy-search-results_drive.html",uid:"drive"},lumwork:{filter:!1,id:"lumwork",name:"SEARCH_PLUS_LUMWORK_TAB",noFilter:!0,template:"legacy-search-results_lumwork.html",uid:"lumwork"},media:{id:"media",method:"documentList",name:"SEARCH_PLUS_MEDIA_TAB",template:"legacy-search-results_tab.html",uid:"media"},post:{id:"post",method:"postList",name:"SEARCH_PLUS_POST_TAB",template:"legacy-search-results_tab.html",uid:"post"},sharepoint:{defaultDocPath:"provider=onedrive/drive=user_email",id:"sharepoint",method:"sharepointList",name:"SEARCH_PLUS_SHAREPOINT_TAB",noFilter:!0,template:"legacy-search-results_tab.html",uid:"sharepoint"},users:{extParams:{showHidden:!1,status:"enabled"},id:"users",method:"userList",name:"SEARCH_PLUS_USERS_TAB",template:"legacy-search-results_tab.html",uid:"users"},zendesk:{id:"zendesk",method:"zendeskList",name:"SEARCH_PLUS_ZENDESK_TAB",template:"legacy-search-results_tab.html",uid:"zendesk"}}};angular.module("Constants").constant("LegacySearchConstant",i)},function(e,t,n){"use strict";function r(e){o=e.getConnected,s=e.refreshToken,c=e.redirectToProfile}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return l}));var i=n(33),a=n.n(i),o=a.a,s=a.a,c=a.a,l={getConnected:function(){var e;return null!==(e=o())&&void 0!==e?e:null},refreshToken:function(){var e;return null!==(e=new Promise((function(e,t){return s((function(t){return e(t)}),(function(e){return t(e)}))})))&&void 0!==e?e:null},getUserToken:function(){var e=l.getConnected();return e?e.token:window.CONNECTED_USER.token},redirectToProfile:function(e){c(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r,i=n(7),a=n.n(i);!function(e){e.open="open",e.closed="closed"}(r||(r={}));var o={state:r.closed},s={open:function(e,t){a()(e,"state",r.open),(null==t?void 0:t.payload)&&a()(e,"shareableContentId",t.payload)},close:function(e){a()(e,"state",r.closed)},setTotalMembers:function(e,t){a()(e,"totalMembers",t.payload)}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return f}));var r=n(82),i=n.n(r),a=n(109),o=n.n(a),s=n(28),c=n.n(s),l=n(66),u=n.n(l),d=n(402),p=n.n(d),f=function e(t,n){return!i()(t)&&o()(t)&&!i()(n)&&o()(n)?p()(t,n,e):n},g=function(e){var t=!1;return c()(e,(function(e){u()(e)||(t=!0)})),t}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var r={PRODUCTION:"production",DEVELOPMENT:"development"},i=null,a=function(){if(null===i){var e,t,n,a,o=null!==(e=null===(t=window.APPLICATION)||void 0===t?void 0:t.HOST)&&void 0!==e?e:window.location.host,s=null!==(n=null===(a=window.APPLICATION)||void 0===a?void 0:a.PROTOCOL)&&void 0!==n?n:window.location.protocol,c="https://prod.cdn.lumapps.com/a5a6f177b6/",l="production",u="assets/img/common/logo.svg";i={host:o,protocol:s,applicationHost:"".concat(s,"//").concat(o),publicPath:c,defaultLogo:u,defautlLogoUrl:"".concat(c).concat(u),defaultLanguage:"en",isProd:l===r.PRODUCTION,environment:l,apiHost:window.API_HOST||window._API_HOST,initialRenderedPage:"None"!==window.PAGE?window.PAGE:void 0,initialSkeletonPage:"None"!==window.SKELETON?window.SKELETON:void 0,legacyApplicationName:window.APPLICATION_NAME,instanceNavBackgroundColor:"None"!==window.INSTANCE_NAV_BACKGROUND_COLOR?window.INSTANCE_NAV_BACKGROUND_COLOR:void 0,instanceTopBackgroundColor:"None"!==window.INSTANCE_TOP_BACKGROUND_COLOR?window.INSTANCE_TOP_BACKGROUND_COLOR:void 0,topStyles:window.TOP_STYLES||{},navStyles:window.NAV_STYLES||{},instanceLogo:window.INSTANCE_LOGO,instanceName:window.INSTANCE_NAME,isLegacyContext:!window.USE_REACT_ROUTER,useDynamicOverrides:window.USE_DYNAMIC_OVERRIDES,initialContentId:window.CONTENT_ID,contentTypes:window.CONTENT_TYPES||{},angular:window.angular,userLang:window.USER_LANG||"en",userAlernativeLangs:window.USER_ALTERNATIVES_LANGS?window.USER_ALTERNATIVES_LANGS.split(","):[],defaultUserAvatar:"".concat(c,"frontoffice/assets/img/common/default-avatar-128.jpg"),iconsVersion:"2",customerId:window.CUSTOMER_ID,services:{},defaultColors:["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B","#000000","#212121","#757575","#BDBDBD","#E0E0E0","#FFFFFF"],defaultContributionLanguages:["ar","az","bg","cs","de","el","en","es","fr","hi","hr","hu","it","in","ja","ko","ku","nl","no","pl","pt","pt_br","ro","ru","sk","sl","sr","sv","th","tl","tr","uk","vi","zh","zh_tw"]}}return i},o="9ba8cd34-9fca-468b-472f-83937559a913",s=300},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),i=Object(r.createContext)(void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("ul",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-unordered-list"),ref:r}),t)};d.displayName="unordered-list"},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(3),g=n.n(f),m=n(0),v=n(2),h=n(73),y=n(273),E=n(491),b=n(375),O=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.maxLength,n=e.value;return m.createElement(b.a,this.props,m.createElement(E.a,{maxLength:t,value:n}))}}]),t}(m.PureComponent);g()(O,"propTypes",{color:h.a,colors:h.b,maxLength:v.number,size:y.a,type:y.b,value:v.string}),g()(O,"defaultProps",{maxLength:1})},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(3),g=n.n(f),m=n(0),v=n.n(m),h=n(14),y=n.n(h),E=n(2),b=n(66),O=n.n(b),C=n(338),T=function(e){if(!O()(e))return{strokeDasharray:"".concat(1.26*parseInt(e,10),",200")}},S=function(e){if(!O()(e))return{transform:"scale(".concat(parseInt(e,10)/100,", 1)")}},I=function(e){return{transform:"scale(".concat(parseInt(e,10)/100,")")}},_=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.color,r=e.diameter,i=e.type,a=e.value;return v.a.createElement("div",{className:y()("progress-container progress-container--".concat(i),"progress-container--".concat(n),a?"progress-container--determinate":"progress-container--indeterminate",{classes:t})},i===C.a.CIRCULAR&&v.a.createElement("div",{className:"progress-circular",style:I(r)},v.a.createElement("svg",{className:"progress-circular__svg"},v.a.createElement("g",{transform:"translate(50 50)"},v.a.createElement("g",{className:"progress-circular__g"},v.a.createElement("circle",{className:"progress-circular__path",cx:"0",cy:"0",r:"20",fill:"none",strokeWidth:"4",strokeMiterlimit:"10",style:T(a)}))))),i===C.a.LINEAR&&v.a.createElement("div",{className:"progress-linear"},v.a.createElement("div",{className:"progress-linear__background"}),v.a.createElement("div",{className:"progress-linear__bar progress-linear__bar--first",style:S(a)}),v.a.createElement("div",{className:"progress-linear__bar progress-linear__bar--second"})))}}]),t}(m.PureComponent);g()(_,"propTypes",{classes:E.object,color:E.string,diameter:E.string,type:E.string,value:E.number}),g()(_,"defaultProps",{color:"primary",diameter:"100",type:C.a.CIRCULAR})},function(e,t,n){"use strict";var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(3),g=n.n(f),m=n(0),v=n(2),h=n(14),y=n.n(h),E=n(207),b=n.n(E),O=n(73),C=n(273),T=n(380);n.d(t,"a",(function(){return S}));var S=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.className,r=e.size,i=void 0===r?"m":r,a=e.type,o=void 0===a?"round":a,s=e.colors,c=void 0===s?T.c.COLORS_WIDGET:s,l=e.color,u=void 0===l?function(e,t){return t?t[e?Math.abs(e.hashCode()%t.length):0]:null}(t,c):l,d=e.children;return m.createElement("div",{className:y()("color-bubble","color-bubble--".concat(i),"color-bubble--".concat(b()(o)),n),style:{backgroundColor:u}},d)}}]),t}(m.PureComponent);g()(S,"propTypes",{children:v.element.isRequired,className:v.string,color:O.a,colors:O.b,size:C.a,type:C.b,value:v.string})},function(e,t,n){"use strict";var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(0),c=n.n(s),l=n(14),u=n.n(l),d=n(1),p="noopener noreferrer",f=function(e){var t=e.children,n=e.className,r=e.elementRef,a=e.element,l=e.onClick,f=o()(e,["children","className","elementRef","element","onClick"]),g=(null==a?void 0:a.theme)||d.Theme.light,m=null==a?void 0:a.href,v=Object(s.useCallback)((function(e){null==l||l(e),e.defaultPrevented||!e.ctrlKey&&!e.metaKey||(e.preventDefault(),e.stopPropagation(),window.open(m,"_blank",p))}),[l,m]);return c.a.createElement(d.Link,i()({},f,{className:u()(n,"wrex-content-link",{"lumx-link--color-light":g===d.Theme.dark}),href:m,onClick:v,ref:r,target:"_blank",rel:p,color:g===d.Theme.light?"secondary":d.ColorPalette.light}),t)};f.displayName="link",n.d(t,"a",(function(){return f}))},function(e,t,n){"use strict";function r(){var e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(365),i=n(67),a={getConnected:function(e){var t;return e?Object(i.b)(e):null!==(t=r.a.getConnected())&&void 0!==t?t:null},refreshToken:function(){return r.a.refreshToken()},getUserToken:function(e){return e?Object(i.g)(e):r.a.getUserToken()},redirectToProfile:function(e){return r.a.redirectToProfile(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,i=n(0),a=n.n(i),o=n(1),s=n(143),c=n.n(s),l=n(38),u=n(2),d=n(236),p=n.n(d),f=n(809),g=n(728),m={dependencies:{"@lumx/react":o,axios:c.a,lodash:l,"lumapps-sdk-js":f,"prop-types":u,qs:p.a,react:a.a},verbose:!0},v=function(){return r||(r=new g.a(m),r)}},function(e,t,n){"use strict";(function(e){function r(e,t){var n=a.module(e),r=n[t];n[t]=function(e,t){r.call(n,e,e in o&&a&&a.extend?a.extend(o[e],t):o[e]=t)}}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var i=e,a=i.angular,o={AdvancedSettingsConstant:{},CloudSearchConstant:{},CommunityConstant:{},CommunityWizardConfiguration:{},Config:{},ConfigInstance:{},ConfigTheme:{},FroalaSettings:{},GoalActions:{},GoalKinds:{},GoalPeriodicities:{},HookConstant:{},InitialSettings:{},InstanceConstant:{},LeaderboardKinds:{},LeaderboardRanges:{},NotificationSettings:{},PostConstant:{},RewardKinds:{},UserConstant:{},WidgetConstant:{},WidgetFileListConstant:{},WidgetSettingsConstant:{},ZendeskConstant:{}},s=(o.AdvancedSettingsConstant,o.CloudSearchConstant,o.CommunityConstant,o.CommunityWizardConfiguration,o.Config),c=o.ConfigInstance,l=o.ConfigTheme,u=(o.FroalaSettings,o.GoalActions,o.GoalKinds,o.GoalPeriodicities,o.HookConstant,o.InitialSettings);o.InstanceConstant,o.LeaderboardKinds,o.LeaderboardRanges,o.NotificationSettings,o.PostConstant,o.RewardKinds,o.UserConstant,o.WidgetConstant,o.WidgetFileListConstant,o.WidgetSettingsConstant,o.ZendeskConstant;r("Constants","constant"),r("Values","value")}).call(this,n(213))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(2),i=Object(r.shape)({label:r.string,value:Object(r.oneOfType)([r.string,r.number])}),a=Object(r.arrayOf)(i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),i=n.n(r),a=n(21),o=n.n(a),s=(n(28),n(812),function(e){var t=e.choices,n=void 0===t?[]:t,r=e.isMulti,a=e.placeholder,s=void 0===a?"":a,c=e.suffix,l=e.value,u=l;if(null==l&&(u=s),r)return function(e){var t=e.fallback,n=void 0===t?"":t,r=e.list,a=e.selectedValues,s=void 0===a?[]:a;if(!s||!r||!s[0])return{text:n};var c=o()(r,{value:s[0]}),l=i()(c,"label");return 1===s.length?{text:l}:{counter:s.length-1,text:l}}({fallback:s,list:n,selectedValues:l});var d=o()(n,{value:u}),p=l&&c;return{text:i()(d,"label","".concat(u).concat(p?c:""))}})},function(e,t,n){"use strict";function r(e){i=e.getListConversations,a=e.listJoined}var i,a;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}))},function(e,t,n){"use strict";var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(604),c=function(){var e=o()(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a({programId:t});case 2:return n=e.sent,e.abrupt("return",n.data.items);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return u}));var l="SA/TOPICS",u="".concat(l,"/FETCH_ALL"),d="".concat(l,"/FETCH_ALL_SUCCESS"),p="".concat(l,"/FETCH_ALL_ERROR"),f=function(e){return function(){var t=o()(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:u}),t.prev=1,t.next=4,c(e);case 4:r=t.sent,n(r?{topics:r,type:d}:{type:p}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:p});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n(8),i=n.n(r),a=n(39),o=function(e){var t=e.tag;return"h1"===t?{type:a.Headline.displayName,children:[]}:"h2"===t?{type:a.Title.displayName,children:[]}:{type:a.Subtitle.displayName,children:[]}},s=function(e){var t=e.content;return{type:a.Code.displayName,children:[{text:t}]}},c=function(e){var t,n,r,o,s,c,l=null!==(t=null===(n=e.attrs.find((function(e){var t=i()(e,1),n=t[0];return"src"===n})))||void 0===n?void 0:n[1])&&void 0!==t?t:"",u=(null===(r=e.attrs.find((function(e){var t=i()(e,1),n=t[0];return"alt"===n})))||void 0===r?void 0:r[1])||(null===(o=e.children)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.content),d=null===(c=e.attrs.find((function(e){var t=i()(e,1),n=t[0];return"title"===n})))||void 0===c?void 0:c[1];return{type:a.Image.displayName,children:[],src:l,alt:u,title:d}},l=function(e){var t=e.attrs.find((function(e){var t=i()(e,1),n=t[0];return"href"===n})),n=i()(t,2),r=n[1];return{type:a.Link.displayName,children:[],href:r}},u={marks:{s:a.Strikethrough.displayName,strong:a.Bold.displayName,em:a.Italic.displayName},selfClosingElements:["code_block","code_inline","image","fence","hr"],elements:{paragraph:a.Body.displayName,heading:o,code_block:s,code_inline:s,image:c,link:l,bullet_list:a.UnorderedList.displayName,ordered_list:a.OrderedList.displayName,list_item:a.ListItem.displayName,blockquote:a.Blockquote.displayName,fence:function(e){return{type:a.Preformatted.displayName,children:[s(e)]}},table:a.Table.displayName,thead:a.TableHead.displayName,tbody:a.TableBody.displayName,th:a.TH.displayName,tr:a.TR.displayName,td:a.TD.displayName,hr:a.HR.displayName}}},function(e,t,n){"use strict";n.r(t),n.d(t,"SOURCE_TYPES",(function(){return r}));var r={CATEGORY:"category",CUSTOM:"custom"}},function(e,t,n){"use strict";function r(e,t){var n=t.fieldId,r=t.language,i=t.value,a=C(e,n,r);a.value=i||void 0}function i(e,t){var n=t.fieldId,r=t.language,i=t.value,a=t.validations,o=C(e,n,r),s=function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,c=s(t);if(!c)return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(a,i);o.isValid=s,o.hasError=!s}function a(e,t){var n=t.description,r=t.slug,i=t.title;n&&S(e,"description",n),i&&S(e,"name",i),r&&S(e,"url",r)}var o=n(21),s=n.n(o),c=n(53),l=n(251),u="".concat(c.c,"/").concat("description"),d="".concat(u,"/SET_COMMUNITY_DESCRIPTION_FIELD"),p="".concat(u,"/SET_COMMUNITY_DESCRIPTION_FIELD_VALIDITY"),f="".concat(u,"/SET_MULTIPLE_COMMUNITY_DESCRIPTION_FIELD"),g=function(){return function(e,t){var n=t(),r=n.admin.communities.communitySetup.group.name,i=n.locale.current,a=s()(l.a,{id:"name"}),o=a.updateFields;e({payload:{fields:[{fieldId:"name",language:i,updateFields:o,value:r}]},type:f})}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldId,n=e.language,r=e.updateFields,i=e.value;return function(e,a){var o=a(),s=o.admin,c=s.communities.communitySetup.setup.mode;e({payload:{fieldId:t,language:n,mode:c,updateFields:r,value:i},type:d})}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldId,n=e.language,r=e.validations,i=e.value;return function(e){e({payload:{fieldId:t,language:n,validations:r,value:i},type:p})}},h=n(37),y=n(133),E=n(113),b="".concat(y.ANGULAR_ACTION_PREFIX,"/community-dialog/update"),O={fields:{}},C=function(e,t,n){var r=e.fields;return r[t]||(r[t]={}),n?(r[t][n]||(r[t][n]={}),r[t][n]):r[t]},T=function(e,t,n,a){r(e,{fieldId:t,language:n,value:a});var o=s()(l.a,{id:t}),c=o.validations;c&&i(e,{fieldId:t,language:n,value:a,validations:c})},S=function(e,t,n){var r=s()(l.a,{id:t}),i=r.disablei18n;i?T(e,t,null,n):Object.keys(n).forEach((function(r){var i=n[r];T(e,t,r,i)}))},I=function(e,t){r(e,t);var n=t.language,i=t.mode,a=t.value,o=t.updateFields;o&&"EDIT"!==i&&o.forEach((function(t){var r=t.id,i=t.method,o=i(a);T(e,r,n,o)}))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return Object(h.a)(e,(function(e){var n=t.payload,r=t.newState,o=void 0===r?{}:r,s=o.editedCommunity;switch(t.type){case b:s&&a(e,s);break;case c.a:case c.f:case c.i:case E.c:Object.assign(e,O);break;case d:I(e,n);break;case f:var l=n.fields;l.forEach((function(t){I(e,t)}));break;case p:i(e,n)}}))};n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return _}))},function(e,t,n){"use strict";var r=n(465);n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d}));var i="POST",a=("".concat(i,"/MULTI_COMMUNITY_SHARE"),"".concat(i,"/MULTI_COMMUNITY_SHARE_SUCCESS")),o="".concat(i,"/MULTI_COMMUNITY_SHARE_ERROR"),s="".concat(i,"/MULTI_COMMUNITY_UNSHARE_SUCCESS"),c="".concat(i,"/MULTI_COMMUNITY_UNSHARE_ERROR"),l="".concat(i,"/__angular__/MULTI_COMMUNITY_SHARE_CLEAR_PAYLOAD"),u=function(e,t){return function(n){(function(e,t){return new Promise((function(n,i){Object(r.c)(e,t).then((function(e){return n(e.data)}),(function(e){return i(e)})).catch((function(e){return i(e)}))}))})(e,t).then((function(t){n({type:a,multiSharePayload:{postId:e,post:t}})})).catch((function(e){console.log(e),n({type:o})}))}},d=function(e,t,n){return function(i){(function(e,t){return new Promise((function(n,i){Object(r.d)(e,t).then((function(e){return n(e.data)}),(function(e){return i(e)})).catch((function(e){return i(e)}))}))})(e,t).then((function(t){i({type:s,multiSharePayload:{postId:e,post:t,isUnshare:!0,listkey:n}})})).catch((function(e){console.log(e),i({type:c})}))}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=function(e,t){var n=function(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),t}("cacheChange");document.dispatchEvent(n),localStorage.setItem(e,t)},i=function(e){return localStorage.getItem(e)},a={store:function(e,t){try{r(e,JSON.stringify(t))}catch(e){console.warn("error while saving this value to local storage",t)}},retrieve:function(e){try{var t=i(e);if(t)return JSON.parse(t)}catch(t){console.warn("error while retrieving this key from local storage",e)}return null},clearAll:function(){}}},function(e,t,n){"use strict";n.r(t),n.d(t,"FOLDER_TYPES",(function(){return i})),n.d(t,"WidgetFileListConstant",(function(){return r}));var r={LIST_KEY_MEDIA_TAGS:"tag-admin"},i={CATEGORY:"category",CUSTOM:"custom"};angular.module("Constants").constant("WidgetFileListConstant",r)},,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return m}));var r=n(43),i=n(77),a=n(344),o=n(366),s={list:a.a,modal:o.a},c={list:a.b,modal:o.b},l=function(e){var t=Object(r.a)({domain:"".concat(e,"/list"),initialState:a.b,reducers:a.c}),n=Object(r.a)({domain:"".concat(e,"/modal"),initialState:o.b,reducers:o.c}),s={list:t.actions,modal:n.actions},c=Object(i.c)({list:t.reducer,modal:n.reducer});return{reducer:c,actions:s}},u=l("SAMembers/ProgramMemberListDialog"),d=u.reducer,p=u.actions,f=l("SAMembers/SharerListDialog"),g=f.reducer,m=f.actions},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=e.servingUrl||e.url||e.thumbnail;return n?N({url:n,size:t,source:e.source}):void 0}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=n(3),c=n.n(s),l=n(8),u=n.n(l),d=n(0),p=n.n(d),f=n(2),g=n(1),m=n(21),v=n.n(m),h=n(27),y=n.n(h),E=n(4),b=n.n(E),O=n(125),C=n.n(O),T=n(30),S=n(5),I=n(86),_=n(31),A=n(51),w=n.n(A),D=(n(541),n(145)),L=n(141),P=function(e){var t=e.media,n=e.useFallback,i=e.lang,a=e.originalOnly,o=e.forceTarget;if(y()(t))return{};i=i||Object(S.a)(),n=Boolean(n);var s=t[o]||(t.hasCroppedContent?t.croppedContent:t.content),l=(n?angular.fastCopy(w()(s)):{})||{},u=angular.fastCopy(v()(s,{lang:i}));if(y()(u)||(l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l,{},u)),!a){var d=Object(S.h)(t.name,i,n);y()(d)||(l.name=d);var p=Object(S.h)(t.description,i,n);y()(p)||(l.description=p);var f=Object(S.h)(t.thumbnail,i,n);y()(f)||(l.thumbnail=f)}return l.owner=l.owner||b()(w()(t.content||[]),"owner"),l},N=function(e){var t=e.url,n=e.size,r=e.source,i=L.InitialSettings.MAX_IMAGE_SIZE;switch(r){case D.PROVIDERS.lumapps:case D.PROVIDERS.google:return t.replace(/^(.*?)(=s[\d]*)?$/,"$1=s".concat(n||i));default:return t}},R=n(65),j=n(91),k=n(152),F=n(104),U=n(506),M=Object(f.oneOf)([k.a.OVER,k.a.BELOW]),x=Object(f.oneOf)([k.e.HORIZONTAL,k.e.VERTICAL,k.e.ORIGINAL]),$=Object(f.oneOf)([j.a.BULLETS,j.a.THUMBNAILS]),B=Object(f.oneOf)([j.b.GRID,j.b.SLIDESHOW]),W=Object(f.oneOf)([j.c.GROUP,j.c.UNGROUP]);n.d(t,"a",(function(){return Y}));var G=L.InitialSettings.MAX_IMAGE_SIZE,Y=function e(t){var n=t.documentList,r=t.isLoading,a=t.isMainWidget,s=t.properties,c=t.fetchImages,l=t.fetchNextPage,f=t.uuid,m=t.widgetType,h=Object(d.useState)(!1),E=u()(h,2),O=E[0],A=E[1],w=Object(d.useState)(0),D=u()(w,2),L=D[0],N=D[1];s=o({},e.defaultProps.properties,{},s);var F=s,M=F.captionPosition,x=F.columnCount,$=void 0===x?e.defaultProps.properties.columnCount:x,B=F.fields,W=F.orientation,Y=F.overrides,H=F.style,K=F.viewMode,V=F.viewModeVariant,z=void 0===V?j.c.GROUP:V,q=b()(H,["content","theme"],"light"),X={displayType:s.displayType,docPath:s.docPath,files:s.files,folder:s.folder,searchTags:s.folderTags,maxNumber:s.maxNumber,uuid:f},Q=JSON.stringify(X);Object(d.useEffect)((function(){n.items=[],c(X)}),[c,Q]);var Z=n.items,J=void 0===Z?[]:Z,ee=function(e){var t=e.id,n=e.propertyName;if(Y&&Y[t])return!y()(Object(S.h)(Y[t][n]))&&Object(S.h)(Y[t][n])},te=function(e){var t=v()(B,{name:e});return!!t&&t.enable},ne=Object(d.useCallback)((function(){A(!1)}),[]),re=function(e){var t=e.doc,n=e.index,r=e.propOverrides,a=void 0===r?{}:r,c=e.size,l=void 0===c?G:c,u=P({media:t,useFallback:!0}),d=ee({id:u.fileId,propertyName:"description"})||Object(S.h)(t.description),f=te("name")?ee({id:u.fileId,propertyName:"name"})||Object(S.h)(t.name||u.name):void 0,m=Object(_.q)({align:"center",alt:d,thumbnailProps:{aspectRatio:W,focusPoint:u.focalPoint,onClick:K===j.b.SLIDESHOW?null:function(e){return function(e,t){K===j.b.GRID&&(N(t),A(!0))}(0,n)}},captionPosition:M,captionStyle:"ungroup"===z?o({padding:16},C()(Object(I.d)(s),R.s)):null,className:"widget-image-gallery_item",description:te("description")&&!y()(d)&&Object(_.B)(d)?{__html:Object(_.B)(d)}:void 0,fillHeight:K===j.b.SLIDESHOW&&(W===k.e.ORIGINAL||b()(H,["content","height"],0)>0),image:i(u,l),key:t.id,theme:q,title:f},a);return p.a.createElement(g.ImageBlock,m)},ie=!r&&y()(J),ae=K===j.b.SLIDESHOW?G:Math.round(G/$);return p.a.createElement(U.a,{isWidgetEmpty:ie,properties:s,widgetType:m},!y()(J)&&function(t){var n=s,r=n.hasAutoplay,i=n.interval,a=void 0===i?e.defaultProps.properties.interval:i,o=n.navigationControls;switch(K){case j.b.SLIDESHOW:return p.a.createElement(g.Slideshow,{autoPlay:r&&!Object(_.n)(),fillHeight:K===j.b.SLIDESHOW&&W===k.e.ORIGINAL||b()(H,["content","height"],0)>0,slideshowControlsProps:o?{nextButtonProps:{label:Object(S.h)("GLOBAL.NEXT")},previousButtonProps:{label:Object(S.h)("GLOBAL.PREVIOUS")}}:void 0,interval:1e3*parseInt(a,10),theme:q},t.map((function(e,t){return p.a.createElement(g.SlideshowItem,{key:t},e)})));case j.b.GRID:default:return p.a.createElement(T.t,{columnCount:parseInt($,10),list:t,parentWidgetProperties:s})}}(J.map((function(e,t){return re({doc:e,index:t,size:ae})}))),a&&!y()(J)&&p.a.createElement(T.w,{callback:function(){return l(X)}}),r&&p.a.createElement(T.B,{isLoading:r}),s.viewMode===j.b.GRID&&p.a.createElement(g.Lightbox,{isOpen:O,onClose:ne,closeButtonProps:{label:Object(S.h)("GLOBAL.CLOSE")}},p.a.createElement(g.Slideshow,{fillHeight:!0,slideshowControlsProps:{nextButtonProps:{label:Object(S.h)("GLOBAL.NEXT")},previousButtonProps:{label:Object(S.h)("GLOBAL.PREVIOUS")}},activeIndex:L,theme:"dark"},J.map((function(e,t){return p.a.createElement(g.SlideshowItem,{key:"".concat(t).concat(e.id)},re({doc:e,propOverrides:{thumbnailProps:{aspectRatio:"original",onClick:void 0},captionPosition:k.a.BELOW,captionStyle:void 0,fillHeight:!0,theme:"dark"}}))})))))};Y.propTypes=o({},F.a,{properties:Object(f.shape)(o({},F.a.properties,{captionPosition:M,columnCount:Object(f.oneOfType)([f.number,f.string]),hasAutoplay:f.boolean,interval:f.number,maxNumber:f.number,navigationControls:f.boolean,navigationType:$,orientation:x,viewMode:B,viewModeVariant:W}))}),Y.defaultProps={properties:{captionPosition:k.a.BELOW,columnCount:3,hasAutoplay:!0,interval:5,maxNumber:30,navigationControls:!0,navigationType:j.a.BULLETS,orientation:k.e.HORIZONTAL,viewMode:j.b.GRID,viewModeVariant:j.c.GROUP}},Y.isEditable=function(){return!1}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return m}));var r=n(9),i=n(21),a=n.n(i),o=n(70),s=n(54),c=n(297),l=n(417),u=function(e){return e.nanny.frontOffice},d=function(e){return e.nanny.backOffice},p=Object(r.createSelector)(u,(function(e){return Object(l.b)(e.violations)})),f=Object(r.createSelector)(u,(function(e){return e})),g=(Object(r.createSelector)(d,(function(e){return e})),Object(r.createSelector)((function(e){return e.nanny}),(function(e){return e.form})),Object(r.createSelector)([d,function(e){return e.nanny.backOffice.currentRuleId}],(function(e,t){var n=e.rules;if(n)return a()(n,(function(e){return e.id===t}))})),Object(o.a)(c.b)),m=s.g},,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return g}));var r=n(5),i=n(68),a=n(515),o=n(36),s="".concat("admin/widget","/").concat("widget-translation"),c="".concat(s,"/OPEN_MODAL"),l="".concat(s,"/CLOSE_MODAL"),u="".concat(s,"/SET_SOURCE_LANG"),d=function(){return function(e){return e({type:c})}},p=function(){return function(e){return e({type:l})}},f=function(e){var t=e.sourceLang;return function(e){return e({payload:{sourceLang:t},type:u})}},g=function(e){var t=e.sourceLang,n=e.targetLang,s=e.content,c=e.isContentHTML,l=e.onSuccess,u=e.onError;return function(e){e({component:"widgetTranslation",type:i.c}),Object(a.c)(s,n,t,(function(t){e({component:"widgetTranslation",type:i.a}),l(t)}),(function(t){Object(o.b)(Object(r.h)(t&&t.data&&t.data.error&&t.data.error.message)),e({component:"widgetTranslation",type:-1===t.status?i.a:i.b}),u&&u(t)}),c)}}},,,function(e,t,n){"use strict";function r(e){s=e.go}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var i=n(33),a=n.n(i),o=n(74),s=a.a,c={getUrl:o.e,redirect:function(e){var t=e.isExternal,n=e.isMigrated,r=e.legacyId,i=e.params,a=void 0===i?{}:i,c=e.anchor,l=e.legacyForceReload;c&&(a["#"]=c),t||n?window.location.href=Object(o.e)(e):s(r,a,{reload:l})},usesReactRouter:!1}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e){if(!e||!e.length||0===e.length)return{};var t={};return e.forEach((function(e){var n=e.matches,r=e.explanation,i=e.id,a=Object.keys(n);a.forEach((function(e){t[e]||(t[e]=[]),t[e].push({explanation:r,match:n[e],rule:i})}))})),t},i=function(e){var t={};return e.forEach((function(e){t[e]=1+(t[e]||0)})),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=e.element,s=o()(e,["children","className","elementRef","element"]),l=1===(null==a?void 0:a.children.length)&&""===a.children[0].text;return u.a.createElement("p",i()({},s,{className:c()(n,"wrex-content-block","wrex-content-body",{"wrex-content-body--empty":l}),ref:r}),t)};d.displayName="body"},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(16),a=n.n(i),o=n(18),s=n.n(o),c=n(22),l=n.n(c),u=n(20),d=n.n(u),p=n(24),f=n.n(p),g=n(25),m=n.n(g),v=n(29),h=n.n(v),y=n(26),E=n.n(y),b=n(3),O=n.n(b),C=n(0),T=n.n(C),S=n(2),I=Object(S.oneOf)(["email","number","search","string"]),_=(Object(S.oneOf)(["top","right","bottom","left"]),n(50)),A=n(296),w=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),n.state={focused:!1},n.onBlur=n.onBlur.bind(h()(n)),n.onChange=n.onChange.bind(h()(n)),n.onFocus=n.onFocus.bind(h()(n)),n.onMount=n.onMount.bind(h()(n)),n}return E()(t,e),d()(t,[{key:"onBlur",value:function(e){var t=this.props.onBlur;this.setState({focused:!1},(function(){return t&&t(e)}))}},{key:"onChange",value:function(e){var t=this.props,n=t.name,r=t.onChange,i=this.state.focused,a=e.target.value;if(a){var o=this.props,s=o.min,c=o.max,l=o.type;a="number"===l?Object(A.a)({max:c,min:s,value:a}):a}r(a,n,e),i&&this.setState({focused:!1})}},{key:"onFocus",value:function(e){var t=this.props.onFocus;this.setState({focused:!0},(function(){return t&&t(e)}))}},{key:"onMount",value:function(e){var t=this.props,n=t.selectOnMount,r=t.focusOnMount;return e&&(n&&e.select&&e.select()||r&&e.focus&&e.focus())}},{key:"render",value:function(){var e=this.props,t=e.focusOnMount,n=e.selectOnMount,r=e.revivePlaceholder,i=e.defaultValue,o=e.placeholder,c=e.value,l=e.onFocus,u=e.onBlur,d=s()(e,["focusOnMount","selectOnMount","revivePlaceholder","defaultValue","placeholder","value","onFocus","onBlur"]),p=this.state.focused,f=null==c||""===c;return T.a.createElement("input",a()({ref:n||t?this.onMount:null},d,{placeholder:o,value:f?r&&p?o:i:c,onBlur:r?this.onBlur:u,onChange:this.onChange,onFocus:r?this.onFocus:l}))}}]),t}(C.PureComponent);O()(w,"propTypes",{defaultValue:_.d,focusOnMount:S.bool,max:_.d,min:_.d,name:_.b.isRequired,onBlur:S.func,onChange:S.func.isRequired,onFocus:S.func,placeholder:_.d,revivePlaceholder:S.bool,selectOnMount:S.bool,type:I,value:_.d}),O()(w,"defaultProps",{defaultValue:"",focusOnMount:!1,max:void 0,min:void 0,onBlur:void 0,onFocus:void 0,placeholder:void 0,revivePlaceholder:!1,selectOnMount:!1,type:"string",value:""});var D=n(14),L=n.n(D),P=n(31),N=n(73),R=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),n.state={active:!1,focused:!1},Object(P.u)(h()(n)),n.onFocus=function(){return n.setState({focused:!0})},n.onBlur=function(){return n.setState({focused:!1})},n}return E()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.onChange,i=e.allowClear,o=e.fixedLabel,c=void 0!==o&&o,l=e.icon,u=e.label,d=e.theme,p=void 0===d?"light":d,f=e.status,g=e.disabled,m=void 0!==g&&g,v=e.InputComponent,h=void 0===v?w:v,y=e.helpText,E=e.className,b=e.required,O=s()(e,["value","name","onChange","allowClear","fixedLabel","icon","label","theme","status","disabled","InputComponent","helpText","className","required"]),T=this.state.focused,S=b?" *":"";return C.createElement(C.Fragment,null,C.createElement("div",{className:L()("text-field",E,"error"===f&&"text-field--error","valid"===f&&"text-field--valid",c&&"text-field--fixed-label",l&&"text-field--has-icon",m&&"text-field--is-disabled","text-field--theme-".concat(p),null!=t&&"text-field--has-value",(null!=t||T)&&"text-field--is-active",T&&"text-field--is-focus")},l&&C.createElement("div",{className:"text-field__icon"},C.createElement("i",{className:"mdi mdi-".concat(l)})),C.createElement("label",{className:"text-field__label"},u,S),C.createElement(h,a()({},O,{value:t,name:n,onChange:r,disabled:m,onFocus:this.onFocus,onBlur:this.onBlur,className:"text-field__input"})),i&&C.createElement("span",{className:"text-field__clear",onClick:this.onClear},C.createElement("i",{className:"mdi mdi-close-circle"}))),y&&C.createElement("span",{className:"text-field-".concat("error"===f?"error":"help")},y))}}]),t}(C.PureComponent);O()(R,"propTypes",{InputComponent:S.func,allowClear:S.bool,className:S.string,disabled:S.bool,error:S.bool,fixedLabel:S.bool,helpText:S.string,icon:S.string,required:S.bool,label:S.string,name:_.b,onChange:S.func,status:S.oneOf(["default","error","valid"]),theme:N.e,value:S.any});var j=n(129),k=n(332),F=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),n.onClick=function(e){var t=n.props,r=t.value,i=t.name,a=t.onChange;return a(!r,i,e)},n}return E()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.left,r=e.right,i=e.onChange,a=e.disabled;return C.createElement("div",{className:"lock-group"},C.createElement("div",{className:"lock-group__left"},n),C.createElement("div",{className:"lock-group__lock-btn"},C.createElement(k.a,{color:"grey",disabled:a,size:"s",variant:"icon",onClick:i?this.onClick:void 0},C.createElement(j.a,{value:t?"lock":"lock-open"}))),C.createElement("div",{className:"lock-group__right"},r))}}]),t}(C.PureComponent);O()(F,"propTypes",{disabled:S.bool,left:S.any,name:_.b,onChange:S.func,right:S.any,value:S.bool.isRequired});var U=function(e){function t(e){return l()(this,t),f()(this,m()(t).call(this,e))}return E()(t,e),d()(t,[{key:"render",value:function(){return C.createElement(w,a()({},this.props,{type:"number",min:0}))}}]),t}(C.PureComponent);O()(U,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},w.propTypes,{value:S.number}));var M=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return E()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.label,r=e.suffix,i=e.background,a=void 0===i||i;return C.createElement("div",{className:L()("custom-text-field",!a&&"custom-text-field--no-background")},n&&C.createElement("span",{className:"custom-text-field__label"},n),C.createElement("div",{className:"custom-text-field__input"},C.createElement("div",{className:"custom-text-field__transclude"},t),r&&C.createElement("span",{className:"custom-text-field__suffix"},r)))}}]),t}(C.PureComponent);O()(M,"propTypes",{background:S.bool,children:S.node,label:S.string,suffix:S.string}),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return F})),n.d(t,"d",(function(){return U})),n.d(t,"e",(function(){return M}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=s()({linkify:!0}).parse(e,{}),r=l()(p.a,t),i=n.reduce(D(r),{content:[],currentPath:[],inListItem:!1}),a=i.content;return(null==t?void 0:t.nowrap)&&1===a.length&&(a=a[0].children),a}var o=n(805),s=n.n(o),c=n(219),l=n.n(c),u=n(806),d=n.n(u),p=n(388),f=n(8),g=n.n(f),m=n(3),v=n.n(m),h=n(23),y=n(4),E=n.n(y),b=n(7),O=n.n(b),C=n(429),T=n.n(C),S=n(329),I=function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;0!==t.length&&t.push("children"),t.push(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t},_=function(e,t,n){var r=e.currentPath;return r.length?r[r.length-1]+=1:r.push(0),O()(e.content,I(r),function(e,t){return"string"==typeof e?{type:e,children:[]}:e(t)}(n,t)),r.push(-1),e},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.currentPath,a=E()(e.content,I(r));return h.h.isText(a)&&!a.text?(Object.assign(a,n),a.text=t):(r[r.length-1]+=1,O()(e.content,I(r),i({text:t},n))),e},w=function(e){var t,n=E()(e.content,I(T()(e.currentPath)));return-1===e.currentPath[e.currentPath.length-1]&&0===(null==n||null===(t=n.children)||void 0===t?void 0:t.length)&&A(e),e.currentPath.pop(),e},D=function e(t){return function(n,r){var i;if("inline"===r.type)return r.children.reduce(e(t),n);if("text"===r.type){if(!r.content)return n;var a=Array.from(r.content.matchAll(/(.*?)@\[(.+?):(.+?)\]/g));return a.length?function(e,t,n){var r=e.currentPath,i=0;t.forEach((function(t){var n={text:t[1]||""};i+=t[0].length;var a={type:S.a.displayName,user:{id:t[3],fullName:t[2].replace(/-/g," ")},children:[{text:t[2].replace(/-/g," ")}]};r[r.length-1]+=1,O()(e.content,I(r),n),r[r.length-1]+=1,O()(e.content,I(r),a)}));var a={text:n.slice(i)};return r[r.length-1]+=1,O()(e.content,I(r),a),e}(n,a,r.content):A(n,r.content)}if("softbreak"===r.type||"hardbreak"===r.type)return A(n,"\n");var o=r.type.split("_open"),s=g()(o,1),c=s[0],l=E()(t.marks,c);if(l)return A(n,"",v()({},l,!0));if("s_close"===r.type||"strong_close"===r.type||"em_close"===r.type)return n;var u=r.type.split("_open"),d=g()(u,1),p=d[0],f=null!==(i=E()(t.elements,p))&&void 0!==i?i:E()(t.elements,r.type);return f?("paragraph_open"===r.type&&n.inListItem||("list_item_open"===r.type&&(n.inListItem=!0),"image"===r.type&&w(n),_(n,r,f),t.selfClosingElements.includes(r.type)&&w(n),"image"===r.type&&_(n,null,t.elements.paragraph)),n):r.type.endsWith("_close")?("list_item_close"===r.type&&(n.inListItem=!1),"paragraph_close"===r.type&&n.inListItem?n:w(n)):n}};d.a.shim();n(474);n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r=n(8),i=n.n(r),a=n(19),o=n.n(a),s=n(23),c=n(121),l=n(146),u=n.n(l),d=n(242),p=n(97),f=n(16),g=n.n(f),m=n(18),v=n.n(m),h=n(14),y=n.n(h),E=n(0),b=n.n(E),O=n(11),C=n(70),T=function(e){var t=e.children,n=e.className,r=e.elementRef,i=e.element,a=v()(e,["children","className","elementRef","element"]),o=Object(c.d)(),l=i&&c.b.findPath(o,i),u=Object(O.useSelector)(Object(C.a)("new-comments"));return Object(E.useEffect)((function(){i&&l&&i.user.fullName!==s.c.string(i)&&o.unwrapMention(l)}),[i,o,l]),b.a.createElement(b.a.Fragment,null,b.a.createElement("span",g()({},a,{style:u?{fontWeight:500}:{background:"rgba(0,0,0,0.12)",borderRadius:"2px"},className:y()(n),ref:r}),u?"@":"",t))};T.displayName="user-mention",n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return I})),n.d(t,"c",(function(){return _}));var S=Object(p.h)(T.displayName),I=function(e,t){for(var n=[],r=0;r<t;r++){var i=s.c.children(e,[r]),a=Array.from(i);n.push.apply(n,o()(a))}var c=n.filter((function(e){return S(e[0])})),l=c.map((function(e){return e[0].user}));return u()(l)},_=Object(d.a)({createPluginEditor:function(e){var t=e.isInline,n=e.insertBreak,r=e.normalizeNode;return{isInline:function(e){return S(e)||t(e)},insertBreak:function(){if(n(),e.selection&&s.g.isCollapsed(e.selection)&&0===e.selection.anchor.offset){var t=Object(p.c)(e,e.selection.anchor.path,"before");t&&S(t[0])&&s.i.move(e,{distance:1,unit:"offset"})}},unwrapMention:function(t){s.i.unwrapNodes(e,{at:t})},insertMention:function(t,n){s.i.delete(e,{at:n});var r={type:T.displayName,user:t,children:[{text:t.fullName}]};s.i.insertNodes(e,r),c.b.focus(e)},normalizeNode:function(t){var n,a=i()(t,2),o=a[0],c=a[1];S(o)&&(null===(n=o.user)||void 0===n?void 0:n.fullName)!==s.c.string(o)?e.unwrapMention(c):r(t)}}},elements:[T]})},function(e,t,n){"use strict";var r,i=n(54);!function(e){e.INSTANCE_EDIT="INSTANCE_EDIT"}(r||(r={})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var a=Object(i.h)(r.INSTANCE_EDIT),o=Object(i.h)()},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(4),i=n.n(r),a=(n(17),n(297)),o=n(502),s=n(408),c=function(e,t){var n=i()(t,"data.error",null);if(n){var r=Object(s.d)(e),o=n.code===a.a;if(r&&o)try{var c=JSON.parse(n.message);return Boolean(c.violations)}catch(e){return!1}}return!1},l=function(e){var t=JSON.parse(e.data.error.message),n=t.violations,r=t.more;return o.a.displayNannyAlert({violations:n,more:r})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),i=n.n(r),a=n(2),o=n(14),s=n.n(o),c=n(5),l=n(381),u=function(e){var t=e.ChoiceComponent,n=e.hasSelectedStyle,r=e.id,a=e.isError,o=e.isSelected,l=e.onClick,u=e.value;return i.a.createElement("li",{className:s()("dropdown-link custom-select__choice",{"custom-select__choice--is-active":o&&n}),id:r,onClick:l},t&&i.a.createElement(t,{isError:a,isSelected:o,label:u.label,value:u.value}),i.a.createElement("span",{className:"custom-select__choice-label"},Object(c.h)(u.label)))};u.propTypes={ChoiceComponent:a.func,hasSelectedStyle:a.bool,id:a.number.isRequired,isError:a.bool,isSelected:a.bool,onClick:a.func.isRequired,value:l.a.isRequired},u.defaultProps={ChoiceComponent:null,hasSelectedStyle:!1,isError:!1,isSelected:!1}},function(e,t,n){"use strict";n.r(t),n.d(t,"getWysiwygToolbar",(function(){return l})),n.d(t,"loadFroala",(function(){return u}));var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(178),c=n(246),l=function(){var e={};return angular.forEach(s.ConfigConstant.DEFAULT_FROALA_HTML_TOOLBAR,(function(t){var n={};switch(t){case"-":n[t]={icon:"subdirectory-arrow-left",name:"HORIZONTAL.SEPARATOR",unique:!1};break;case"|":n[t]={icon:"format-title",name:"VERTICAL.SEPARATOR",unique:!1};break;default:n[t]={icon:c.FroalaSettings.tools[t].icon,name:t.toUpperCase(),unique:!0}}e=angular.extend(e,n)})),e},u=function(){var e=o()(i.a.mark((function e(t,r,a,o){var s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e("common"),n.e("froala")]).then(n.bind(null,1179));case 2:return s=e.sent,e.prev=3,e.next=6,Promise.all([r.inject(s.FROALA.name),r.inject("Services"),r.inject("Constants")]);case 6:return t.get("FroalaService").init(),c=Promise.resolve(),a.froalaLangsLoaded||(l=[],angular.forEach(a.allLangs,(function(e){if(e!==a.DEFAULT_LANG){var t=a.froalaLangs[e]||e;l.push(o.injectScript("langs/froala-editor/js/languages/".concat(t,".js"),"lang-froala-".concat(e),"body","lang-script-front-office-en",!0))}})),c=Promise.all(l),c.then((function(){a.froalaLangsLoaded=!0}))),e.abrupt("return",c);case 12:throw e.prev=12,e.t0=e.catch(3),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("table",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-table"),ref:r}),t)};d.displayName="table";var p=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("thead",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-thead"),ref:r}),t)};p.displayName="table-head";var f=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("tbody",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-tbody"),ref:r}),t)};f.displayName="table-body";var g=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("tr",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-tr"),ref:r}),t)};g.displayName="tr";var m=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("td",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-td"),ref:r}),t)};m.displayName="td";var v=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("th",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-th"),ref:r}),t)};v.displayName="th",n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=n(3),o=n.n(a),s=n(64),c=new s.a({path:"community/groups"}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.get("list",i({},{},{params:e}))},u=function(e){var t=e.id;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.get("get",i({},{},{params:e}))}({groupId:t}).then((function(e){return{payload:{group:e.data}}}))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cursor,n=e.query,r={};return t?r.cursor=t:n&&(r.query=n),l(r).then((function(e){return{payload:e.data}}))},p="groups",f="".concat(p,"/FETCH_GROUP_ERROR"),g="".concat(p,"/FETCH_GROUP_LOADING"),m="".concat(p,"/FETCH_GROUP_SUCCESS"),v="".concat(p,"/FETCH_GROUP_LIST_ERROR"),h="".concat(p,"/FETCH_GROUP_LIST_LOADING"),y="".concat(p,"/FETCH_GROUP_LIST_SUCCESS"),E=function(e){var t=e.id;return function(e){return e({type:g}),u({id:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;return e({payload:n,type:m})})).catch((function(t){return e({payload:t,type:f})}))}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cursor,n=e.query;return function(e){return e({type:h}),d({cursor:t,query:n}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;return e({payload:n,type:y}),n})).catch((function(t){e({payload:t,type:v})}))}},O=n(37),C={list:[],loading:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;return Object(O.a)(e,(function(e){var n=t.payload;switch(t.type){case m:e.list.push(n.group);break;case v:e.loading=!1;break;case h:e.loading=!0;break;case y:e.loading=!1;var r=!0,i=!1,a=void 0;try{for(var o,s=function(){var t=o.value;e.list.find((function(e){return t.id===e.id}))||e.list.push(t)},c=n.groups[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}}}))};n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return T}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(332),a=n(584),o=n(16),s=n.n(o),c=n(3),l=n.n(c),u=n(18),d=n.n(u),p=n(0),f=n.n(p),g=n(14),m=n.n(g),v=n(2),h=n(51),y=n.n(h),E=n(115),b=n(194),O=n(382),C=function(e){var t=e.className,n=e.name,a=e.onChange,o=e.sortOrder,c=d()(e,["className","name","onChange","sortOrder"]),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c,{hasClearChoice:!1,name:n,onChange:a,value:o.value}),p=Object(O.a)({choices:u.choices,placeholder:u.placeholder||u.choices&&y()(u.choices).label,value:o.value});return f.a.createElement("div",{className:m()("sort-by",t)},f.a.createElement(b.d,s()({ToggleComponent:f.a.createElement(i.a,{color:"grey",variant:"flat"},p.text),className:"sort-by__select"},u)),f.a.createElement(i.a,{className:"sort-by__direction-button",color:"grey",disabled:null===o.value,variant:"icon",onClick:function(e){o.value&&a(o.value,n,e,!o.isAscending)}},f.a.createElement(E.b,{value:o.isAscending?"arrow-up":"arrow-down"})))};C.propTypes={className:v.string,name:v.string.isRequired,onChange:v.func.isRequired,sortOrder:Object(v.shape)({isAscending:v.bool,value:Object(v.oneOfType)([v.array,v.string])})},C.defaultProps={className:null,sortOrder:{isAscending:!1,value:null}},n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return C}))},,,function(e,t,n){"use strict";function r(e){o=e.getCustomerId,s=e.getProperty}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r}));var i=n(33),a=n.n(i),o=a.a,s=a.a},function(e,t,n){"use strict";function r(e){i=e.getMediaImage,e.getSource,a=e.getIcon}var i,a;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=n(36),c=n(5),l=n(3),u=n.n(l),d=n(64),p=new d.a({path:"workspace"}),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workspaceId;return p.get("get",i({},{},{params:{workspaceId:t}}))},g=function(e){var t=e.id;return function(e){var t=e.id;return p.get("chat",i({},{},{params:{id:t}}))}({id:t}).then((function(e){return{payload:e.data}}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workspaceId;return f({workspaceId:t}).then((function(e){var t=e.data;return{workspace:t}}))},v="workspace/FETCH_WORKSPACE_ERROR",h="workspace/FETCH_WORKSPACE_LOADING",y="workspace/FETCH_WORKSPACE_SUCCESS",E="workspace/FETCH_CHAT_ERROR",b="workspace/FETCH_CHAT_LOADING",O="workspace/FETCH_CHAT_SUCCESS",C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workspaceId;return function(e){return e({type:h}),m({workspaceId:t}).then((function(t){var n=t.workspace;return e({payload:{workspace:n},type:y})})).catch((function(t){return e({payload:{exception:t},type:v})}))}},T=function(e){var t=e.id;return function(e){return e({meta:{id:t},type:b}),g({id:t}).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.payload;e({meta:{id:t},payload:r,type:O})})).catch((function(n){e({meta:{id:t},payload:n,type:E}),Object(s.b)(Object(c.h)("FRONT.CHAT.FETCH_CHAT_ERROR"))}))}},S=n(37),I={list:{}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;return Object(S.a)(e,(function(e){var n=t.meta,r=t.payload;switch(t.type){case y:var i=r.workspace;e.list[i.id]=i;break;case b:var a=e.list[n.id]||{};a.chat=void 0,e.list[n.id]=a;break;case O:e.list[n.id]={chat:o({},r)}}}))};n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return _}))},,,function(e,t,n){var r=n(694),i=n(471),a=n(753),o=n(414),s=n(699),c=n(140),l=Object.prototype,u=l.hasOwnProperty,d=a((function(e,t){if(s(t)||o(t))i(t,c(t),e);else for(var n in t)u.call(t,n)&&r(e,n,t[n])}));e.exports=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l}));var r=n(27),i=n.n(r),a=n(21),o=n.n(a),s=n(226),c=n(302),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.files,r=void 0===n?[]:n;return i()(r)?Promise.resolve(r):Object(c.b)({docPaths:r})},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.folder,r=void 0===n?{}:n,i=t.searchTags,a=void 0===i?[]:i,s=t.searchTypes,l=void 0===s?[]:s,u=t.maxNumber,d=t.cursor,p=r.categoryId,f=r.providerId,g=r.docPath,m=o()(e,{id:f}),v=o()(m.categories,{id:p}),h=v?v.properties:void 0,y={cursor:d,docPath:g,searchTags:a,maxResults:u,searchParameters:h,searchTypes:l};return Object(c.c)(y)},d=function(e){var t=e.docPath;return Object(c.a)({docPath:t}).then((function(e){var t=e.data,n=Object(s.b)(t,!0),r=n.name;return{title:r}}))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n(45),i=new r.c({path:"misc"}),a=function(e){return i.get("/urlinfo",{params:{url:e}})},o=new r.c({path:"community/post"}),s=function(e){return o.post("/save",e)},c=function(e,t,n){return o.post("/share",{postId:e,addToCommunities:t,callId:n})},l=function(e,t){return o.put("/".concat(t,"/vote/").concat(e),{})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));n(0);var r=n(96),i=function(){var e=window.location.pathname;return e.includes(r.c)},a=function(e){return"facebook"!==e}},,function(e,t,n){"use strict";var r=n(53),i="".concat(r.c,"/").concat("visibility"),a="".concat(i,"/SET_IS_LOCKED"),o="".concat(i,"/SET_VISIBILITY"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locked;return function(e){e({payload:{locked:t},type:a})}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visibility;return function(e){e({payload:{visibility:t},type:o})}},l=n(37),u=n(133),d=n(94),p=n(252),f=n(113),g="".concat(u.ANGULAR_ACTION_PREFIX,"/community-dialog/update"),m={visibility:p.b.RESTRICTED,isLocked:!0},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return Object(l.a)(e,(function(e){var n=t.payload,i=t.newState,s=void 0===i?{}:i,c=s.editedCommunity,l=s.template;switch(t.type){case g:c?e.visibility=c.privacy:l&&(e.visibility=l.privacy);break;case r.a:case r.f:case r.i:case f.c:Object.assign(e,m);break;case a:e.isLocked=n.locked;break;case o:e.visibility=n.visibility;break;case r.o:var u=n.communitySetupMode;u===d.a.CREATE&&(e.visibility=n.visibility)}}))};n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return v}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p}));var a=n(3),o=n.n(a),s=n(313),c=n.n(s),l=n(43),u=n(87),d=n.n(u),p={},f=Object(l.a)({domain:"saTopics/entities",initialState:p,reducers:{addTopics:function(e,t){return i({},e,{},d()(t.payload,"id"))},addTopic:function(e,t){var n=t.payload;return i({},e,o()({},n.id,n))},removeTopic:function(e,t){c()(e,t.payload)}}}),g=f.actions,m=f.reducer},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(43),i=n(126),a=n(7),o=n.n(a),s=n(87),c=n.n(s),l={entities:void 0,isLoadingCustomContentTypes:!1,currentContentTypeId:""},u=Object(r.a)({domain:"content-types",initialState:l,reducers:{setCustomContentTypes:function(e,t){e.entities||(e.entities={}),Object.assign(e.entities,c()(t.payload,"uid"))},setIsLoadingCustomContentTypes:function(e,t){o()(e,"isLoadingCustomContentTypes",t.payload)},updateContentTypes:function(e,t){Object(i.a)(e.entities,c()(t.payload,"uid"))},setCurrentContentTypeId:function(e,t){e.currentContentTypeId=t.payload}}}),d=u.actions,p=u.reducer},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(34),i=Object(r.g)(),a=function(e,t){var n=i.angular,r=i.legacyApplicationName;n&&n.module(r).run(["$rootScope",function(n){n.$broadcast(e,t)}])}},function(e,t,n){"use strict";n(417);var r=n(423);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}))},,,,,,,function(e,t,n){"use strict";var r=n(113),i=n(37),a=n(4),o=n.n(a),s=n(158),c=n(134),l={step:c.a.LAUNCHER,isDialogOpen:!1,isEditionOpen:!1,shouldDisplayWarning:!1},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;return Object(i.a)(e,(function(e){switch(t.type){case r.b:e.shouldDisplayWarning=!1;break;case s.a:case s.b:case s.c:Object.assign(e,l),e.isEditionOpen=!1;break;case r.d:e.step=t.payload.step;break;case r.a:e.isDialogOpen=t.newState.isDialogOpen,e.template=t.newState.template,e.isEditionOpen=t.newState.isEditionOpen,e.community=t.newState.community,t.newState.isEditionOpen?(e.step=c.a.SETUP,e.communityType=o()(t.newState.editedCommunity,"communityType")):t.newState.shouldDisplayWarning?e.shouldDisplayWarning=t.newState.shouldDisplayWarning:e.step=l.step;break;case r.f:e.isEditionOpen=t.payload.isEditionOpen,e.step=c.a.SETUP;break;case r.e:e.isDialogOpen=t.payload.isDialogOpen;break;case r.c:e.step=c.a.LAUNCHER,e.isDialogOpen=!0}}))};n.d(t,"a",(function(){return r.g})),n.d(t,"c",(function(){return r.i})),n.d(t,"d",(function(){return r.j})),n.d(t,"e",(function(){return r.k})),n.d(t,"b",(function(){return u}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(4),i=n.n(r),a=n(42),o=n(261),s=function(e,t){var n=i()(t,"data.error",null),r=Object(o.c)(e);if(n&&r)try{var a=JSON.parse(n.message);return null!==a.tagzError}catch(e){return!1}return!1},c=function(e){var t=JSON.parse(e.data.error.message),n=t.tagzError;return Object(a.b)({content:n})}},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n(64),i=n(35),a=new r.a({path:"community"}),o=function(e){var t=e.notify,n=e.uid;return a.post("".concat(n,"/").concat(t?"follow":"unfollow"))},s=function(e){var t=e.page,n=e.maxResults,r=e.uid,o=Object(i.b)();return a.post("users/details",{callId:o,maxResults:n,page:t,uid:r})},c=function(e,t){var n=Object(i.b)();return a.post("post/share",{postId:e,addToCommunities:t,callId:n})},l=function(e,t){var n=Object(i.b)();return a.post("post/unshare",{postId:e,removeFromCommunities:[t],callId:n})}},,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return h}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(3),u=n.n(l),d=n(36),p=n(92),f=n(5),g=n(68),m="SA/EXPORT",v="".concat(m,"/TOGGLE_EXPORT_MODAL"),h="".concat(m,"/UPDATE_FORM"),y="".concat(m,"/SET_FORM_FIELD_ERROR"),E=function(e){return{isOpen:e,type:v}},b=function(e,t){return function(n){var r={fields:u()({},e,i({},t,{wasTouched:!0})),wasTouched:!0};return n({payload:{form:r},type:h})}},O=function(e){return function(){var t=c()(o.a.mark((function t(n){var r,i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(g.g)("EXPORT_SA_ANALYTICS")),t.prev=1,t.next=4,Object(p.c)(e);case 4:return r=t.sent,i="sa_export_".concat(e.dateFrom,"-").concat(e.dateTo),a=document.createElement("a"),a.setAttribute("id",i),a.download="".concat(i,".csv"),a.href=URL.createObjectURL(new File([r.data],"".concat(i,".csv"),{type:"text/csv"})),a.click(),t.abrupt("return",setTimeout((function(){a.remove()}),250));case 14:return t.prev=14,t.t0=t.catch(1),t.abrupt("return",d.b(Object(f.h)("GLOBAL.ERROR.GENERIC")));case 17:return t.prev=17,n(Object(g.d)("EXPORT_SA_ANALYTICS")),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,14,17,20]])})));return function(e){return t.apply(this,arguments)}}()}},function(e,t,n){"use strict";n.r(t),n.d(t,"FRONT_OFFICE",(function(){return a}));var r=n(105),i=n(745);Object.keys(r).forEach((function(e){"default"!==e&&(window[e]=r[e])})),window.DEPENDENCIES=i.DEPENDENCIES,angular.module("LumSite",[]),angular.module("Constants",[]),angular.module("Controllers",[]),angular.module("CustomServices",[]),angular.module("Directives",["RecursionHelper"]),angular.module("Factories",["ngResource"]),angular.module("Filters",[]),angular.module("Services",[]),angular.module("Values",[]),angular.module("Widgets",[]);var a=angular.module(r.APPLICATION_NAME,i.DEPENDENCIES);angular.element(document).ready((function(){n(178),n(1694);var e=n(1710);e.keys().forEach((function(t){e(t)}));var t=n(2305);t.keys().forEach((function(e){t(e)})),n(3014),n(2484)}))},,,,,,function(e,t){},,,,,,function(e,t,n){"use strict";function r(e){return e.replace("http://","").replace("https://","")}function i(e){if(!e||!s()(e))return{};var t=document.createElement("a");return t.href=e,t||{}}function a(e){return l()(e,"http")}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var o=n(193),s=n.n(o),c=n(107),l=n.n(c)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("blockquote",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-blockquote"),ref:r}),t)};d.displayName="blockquote"},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("h1",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-headline"),ref:r}),t)};d.displayName="headline"},function(e,t,n){"use strict";var r=n(583);n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("ol",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-ordered-list"),ref:r}),t)};d.displayName="ordered-list"},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("pre",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-preformatted"),ref:r}),t)};d.displayName="preformatted"},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("h3",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-subtitle"),ref:r}),t)};d.displayName="subtitle"},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,o()(e,["children","className","elementRef","element"]));return u.a.createElement("h2",i()({},a,{className:c()(n,"wrex-content-block","wrex-content-title"),ref:r}),t)};d.displayName="title"},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(18),i=n.n(r),a=n(14),o=n.n(a),s=n(0),c=n.n(s),l=function(e){var t=e.children,n=e.className,r=e.elementRef,a=(e.element,i()(e,["children","className","elementRef","element"]));return c.a.createElement("div",a,c.a.createElement("hr",{className:o()(n,"wrex-content-block","wrex-content-hr"),ref:r}),t)};l.displayName="hr"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(39),i=n(388),a={marks:{s:r.Strikethrough.displayName,strong:r.Bold.displayName,em:r.Italic.displayName},selfClosingElements:["code_block","code_inline","image","fence","hr"],elements:{paragraph:r.Body.displayName,heading:i.b,image:i.c,link:i.d,bullet_list:r.UnorderedList.displayName,ordered_list:r.OrderedList.displayName,list_item:r.ListItem.displayName,table:r.Table.displayName,thead:r.TableHead.displayName,tbody:r.TableBody.displayName,th:r.TH.displayName,tr:r.TR.displayName,td:r.TD.displayName,hr:r.HR.displayName,code_block:r.Body.displayName,code_inline:function(e){var t=e.content;return{text:t}},blockquote:r.Body.displayName,fence:r.Body.displayName}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(16),i=n.n(r),a=n(22),o=n.n(a),s=n(20),c=n.n(s),l=n(24),u=n.n(l),d=n(25),p=n.n(d),f=n(26),g=n.n(f),m=n(3),v=n.n(m),h=n(0),y=n.n(h),E=n(14),b=n.n(E),O=n(2),C=n(112),T=n.n(C),S=n(115),I=function(e){function t(e){var n;return o()(this,t),n=u()(this,p()(t).call(this,e)),n.state={value:e.value||!1},n.toggle=function(){var t=n.state.value;n.setState({value:!n.state.value}),T()(e.customToggleAction)&&!t&&e.customToggleAction()},n}return g()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.border,n=void 0===t||t,r=e.children,a=e.color,o=void 0===a?"primary":a,s=e.customHeader,c=e.dragHandleProps,l=e.label,u=e.variant,d=void 0===u?"default":u,p=this.state.value;return y.a.createElement("div",{className:b()("custom-accordion-box","simple"===d&&"custom-accordion-box--simple","custom-accordion-box--".concat(o),"custom-accordion-box--is-".concat(p?"open":"close"),!n&&"custom-accordion-box--no-border")},y.a.createElement("div",{className:"custom-accordion-box__header",onClick:this.toggle},s||y.a.createElement(h.Fragment,null,c&&y.a.createElement("div",i()({className:"custom-accordion-box__handle"},c),y.a.createElement(S.b,{value:"drag-vertical"})),y.a.createElement("span",{className:"custom-accordion-box__label"},l),y.a.createElement(S.b,{className:"custom-accordion-box__chevron",value:"chevron-down"}))),p&&y.a.createElement("div",{className:"custom-accordion-box__content"},y.a.createElement("div",{className:"ph+"},r)))}}]),t}(h.PureComponent);v()(I,"propTypes",{border:O.bool,children:O.node,color:O.oneOf(["primary","secondary"]),customHeader:O.node,customToggleAction:O.func,dragHandleProps:O.shape(),label:O.string,value:O.bool,variant:O.oneOf(["default","simple"])})},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(3),g=n.n(f),m=n(0),v=n(2),h=n(456),y=n.n(h),E=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.maxLength,n=void 0===t?1:t,r=e.value;return m.createElement("span",null,y()(r.toUpperCase(),n)||"")}}]),t}(m.PureComponent);g()(E,"propTypes",{maxLength:v.number,value:v.string.isRequired})},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(3),g=n.n(f),m=n(0),v=n.n(m),h=n(14),y=n.n(h),E=n(2),b=n(5),O=n(115),C=n(338),T=n(374),S=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.hasBackground,r=e.hasNoResults,i=e.isLoading,a=e.noResultsText,o=e.type;return v.a.createElement("div",{className:y()("loader","loader--".concat(o),{"loader--has-background":n,"loader--no-results":r})},i&&!r&&v.a.createElement(T.a,{color:t,diameter:"50",type:o}),r&&v.a.createElement("div",{className:y()("no-results",{hasBackground:"no-results--has-background"})},v.a.createElement(O.b,{type:"flat",value:"information-outline"}),v.a.createElement("span",null,a||Object(b.h)("NO_RESULTS"))))}}]),t}(m.PureComponent);g()(S,"propTypes",{color:E.string,hasBackground:E.bool,hasNoResults:E.bool,isLoading:E.bool,noResultsText:E.string,type:E.string}),g()(S,"defaultProps",{color:"primary",hasBackground:!1,hasNoResults:!1,isLoading:!0,type:C.a.CIRCULAR})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var r=n(3),i=n.n(r),a=n(22),o=n.n(a),s=n(20),c=n.n(s),l=n(24),u=n.n(l),d=n(25),p=n.n(d),f=n(29),g=n.n(f),m=n(26),v=n.n(m),h=n(0),y=n(2),E=n(14),b=n.n(E),O=n(31),C=n(73),T=function(t){function n(e){var t;return o()(this,n),t=u()(this,p()(n).call(this,e)),t.state={dropDownEl:null,dropDownWidth:null,dropDownHeight:null,isOpen:!1,isUpward:!1},t.onGlobalClick=t.onGlobalClick.bind(g()(t)),t.defineDirection=t.defineDirection.bind(g()(t)),t.toggle=t.toggle.bind(g()(t)),t.setDropDown=t.setDropDown.bind(g()(t)),t}return v()(n,t),c()(n,[{key:"componentDidUpdate",value:function(){var e=this.state,t=e.dropDownEl,n=e.dropDownWidth;if(t){var r=Object(O.D)(t);n!==r&&this.setState({dropDownWidth:r})}}},{key:"onGlobalClick",value:function(e){var t=this.state.dropDownEl;Object(O.b)(t,e.target)||this.toggle(!1)()}},{key:"defineDirection",value:function(){var e=this.state,t=e.dropDownEl,n=e.isUpward,r=t.querySelector(".dropdown-menu");if(r){var i=Object(O.l)(t),a=Object(O.t)(r),o=document.documentElement.clientHeight-a.top-a.height-i,s=a.top-i,c=o<0&&s>o;c!==n&&this.setState({isUpward:c});var l=Math.round(document.documentElement.clientHeight-a.top-i);this.setState({dropDownHeight:c?s:l})}}},{key:"handleKeyPress",value:function(e){13===e.keyCode&&this.toggle(!0)}},{key:"toggle",value:function(t){var n=this;return function(){var r=n.props.hasPreventAutoClose,i=n.state.isOpen;t&&i&&r||(e.document[i?"removeEventListener":"addEventListener"]("click",n.onGlobalClick,!0),n.setState({isOpen:!i},n.defineDirection))}}},{key:"setDropDown",value:function(e){return e&&this.setState({dropDownEl:e,dropDownWidth:Object(O.D)(e)})}},{key:"render",value:function(){var e,t=this.props,n=t.toggle,r=t.children,a=t.align,o=void 0===a?"left":a,s=this.state,c=s.isOpen,l=s.isUpward,u=s.dropDownWidth,d=s.dropDownHeight;return h.createElement("div",{ref:this.setDropDown,className:b()("dropdown",n&&"dropdown--has-toggle",c&&"dropdown--is-open"),role:"presentation",onClick:this.toggle(!0),onKeyPress:this.handleKeyPress},n&&h.createElement("div",{className:"dropdown-toggle"},n),c&&h.createElement("div",{className:"dropdown-menu",style:(e={},i()(e,o,0),i()(e,"bottom",l&&"bottom"!==o&&"100%"),i()(e,"opacity",1),i()(e,"position","absolute"),i()(e,"visibility","visible"),i()(e,"zIndex",1e3),e)},h.createElement("div",{className:"dropdown-menu__content",style:{maxHeight:d,minWidth:u,opacity:1,position:"relative"}},r)))}}]),n}(h.PureComponent);T.propTypes={align:C.c.isRequired,children:y.node.isRequired,hasPreventAutoClose:y.bool,toggle:y.node},T.defaultProps={hasPreventAutoClose:!1,toggle:null}}).call(this,n(213))},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(3),g=n.n(f),m=n(0),v=n(2),h=n(14),y=n.n(h),E=function(e){function t(e){var n;return i()(this,t),n=c()(this,u()(t).call(this,e)),n.state={active:!1,done:!0,value:e.value},n.end=function(){return n.setState({active:!1,done:!0})},n}return p()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){var e=this.state,t=e.active,n=e.done;t||n||this.setState({active:!0})}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.radius,r=e.x,i=e.y,a=e.value,o=this.state.active;return m.createElement("span",{key:a,style:{height:n,left:r,top:i,width:n},onAnimationEnd:this.end,className:y()("ripple",t&&"bgc-".concat(t),o&&"ripple--is-animated")})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.value;return n===t.value?null:{active:!1,done:!1,value:n}}}]),t}(m.PureComponent);g()(E,"propTypes",{radius:v.number.isRequired,type:v.string,value:v.bool.isRequired,x:v.number.isRequired,y:v.number.isRequired})},function(e,t,n){"use strict";function r(e){var t=e.isError;return t&&o.a.createElement(g.Icon,{className:"pr lumx-color-font-red-L1",icon:m.h,size:g.Size.xxs})}function i(e){var t=e.errorLanguages,n=e.isPlatform,i=e.onChange,a=e.value,s=n?Object(h.b)(v.ConfigConstant.INSTANCE_PROPERTIES.AVAILABLE_LANGS):Object(y.b)(),c=d()(s,(function(e){return{isError:l()(t,e),label:"LANG_".concat(e.toUpperCase()),value:e}}));return o.a.createElement(E.d,{ChoiceComponent:r,choices:c,className:"input-language btn--flat",hasBackground:!1,name:"inputLanguage",value:a,onChange:i})}n.d(t,"a",(function(){return i}));var a=n(0),o=n.n(a),s=n(2),c=n(17),l=n.n(c),u=n(28),d=n.n(u),p=n(33),f=n.n(p),g=n(1),m=n(12),v=n(178),h=n(431),y=n(225),E=n(194);r.propTypes={label:E.d.propTypes.label.isRequired},i.propTypes={errorLanguages:Object(s.arrayOf)(s.string),isPlatform:s.bool,onChange:s.func,value:s.string},i.defaultProps={errorLanguages:null,isPlatform:!1,onChange:f.a,value:""}},function(e,t,n){"use strict";var r=n(490);n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"b",(function(){return E}));var a=n(8),o=n.n(a),s=n(3),c=n.n(s),l=n(7),u=n.n(l),d=n(313),p=n.n(d),f=n(4),g=n.n(f),m=n(27),v=n.n(m),h=n(43),y=function(e,t){return"function"==typeof e?e(t):e},E=function e(t,n){for(var r={},i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o],c=g()(t,o);if(s)if("function"==typeof s){var l=g()(t,o),d=s(l);d&&u()(r,o,d)}else{var p=e(c,s);v()(p)||u()(r,o,p)}}return r},b=function(e,t){var n={errors:{},hasError:!1,isTouched:!1,isDirty:!1,touched:{},meta:{},dirty:{},values:e},r=t?E(e,y(t,n)):{};return i({},n,{errors:r,hasError:!v()(r)})},O=function e(t,n){p()(t,"".concat(n));var r=/.*(?=\.)/.exec(n)||[],i=o()(r,1),a=i[0];a&&v()(g()(t,a,{}))&&e(t,a)};t.a=function(e){var t=e.domain,n=e.initialValues,r=e.validationSchema,a=b(n,r),o=Object(h.a)({domain:t,initialState:a,reducers:{setFormFieldValue:function(e,t){var n=t.payload,i=n.fieldId,o=n.value,s=n.validateForm,c=void 0!==s&&s,l=n.isTouched,d=void 0===l||l,p=n.validateField,f=void 0===p||p,m=n.withTrim,h=void 0!==m&&m,b=h?o.trim():o;u()(e,"values.".concat(i),o),u()(e,"touched.".concat(i),d),u()(e,"isTouched",e.isTouched||d);var C=g()(a,"values.".concat(i)),T=b!==C;if(T?u()(e,"dirty.".concat(i),b!==C):O(e.dirty,i),u()(e,"isDirty",!v()(e.dirty)),r){var S=y(r,e),I=g()(S,i);if(c){var _=E(e.values,S);u()(e,"errors",_)}else if(f&&"function"==typeof I){var A=I(b);A?u()(e,"errors.".concat(i),A):O(e.errors,i)}}return u()(e,"hasError",!v()(e.errors)),e},setFormValues:function(e,t){var n=t.payload,i=n.values,o=n.setAsInitial,s=void 0!==o&&o,c=b(i,r);return s&&(a=c),c},setFieldMeta:function(e,t){var n=t.payload,i=n.fieldId,a=n.metaName,o=n.metaValue,s=n.validateForm,c=void 0!==s&&s;if(a&&(u()(e,"meta.".concat(i,".").concat(a),o),u()(e,"touched.".concat(i),!0),u()(e,"isTouched",!0),r&&c)){var l=y(r,e),d=E(e.values,l);u()(e,"errors",d),u()(e,"hasError",!v()(d))}return e},setFieldError:function(e,t){var n=t.payload,r=n.fieldId,i=n.errorMessage,a=n.setTouched;return i?u()(e,"errors.".concat(r),i):O(e.errors,r),a&&u()(e,"touched.".concat(r),!0),u()(e,"hasError",!v()(e.errors)),e},setFormErrors:function(e,t){var n=t.payload,r=n.errors,i=n.setTouched;return u()(e,"errors",r),i&&r&&Object.keys(r).forEach((function(t){u()(e,["touched",t],!0)})),u()(e,"hasError",!v()(e.errors)),e},setFieldTouched:function(e,t){var n=t.payload,r=n.fieldId,i=n.isTouched;return i?u()(e,"touched.".concat(r),i):O(e.touched,r),u()(e,"isTouched",!v()(e.touched)),e},setFormTouched:function(e,t){var n=t.payload.touched;return u()(e,"touched",n),u()(e,"isTouched",!v()(e.touched)),e},resetForm:function(){return a=b(n,r),a}}});return i({},o,{initialState:a})}},function(e,t,n){"use strict";function r(e,t){return W()(K()(e,(function(e){return[e.name,t]})))}function i(e,t){if(!t)return null;var n=Z()(e,(function(e,n){var r=t[n.name];return e.set(r,(e.get(r)||0)+1),e}),new Map);return $()(Y()(X()(Array.from(n.entries()),1)),0)}function a(e){if(!e)return"left";switch(e.flexDirection){case"row":return"left";case"row-reverse":return"right";case"column":switch(e.alignItems){case"flex-start":return"top-left";case"center":return"top-center";case"flex-end":return"top-right";default:return"left"}case"column-reverse":switch(e.alignItems){case"flex-start":return"bottom-left";case"center":return"bottom-center";case"flex-end":return"bottom-right";default:return"left"}default:return"left"}}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=n(22),u=n.n(l),d=n(20),p=n.n(d),f=n(24),g=n.n(f),m=n(25),v=n.n(m),h=n(29),y=n.n(h),E=n(26),b=n.n(E),O=n(3),C=n.n(O),T=n(0),S=n.n(T),I=n(2),_=n(14),A=n.n(_),w=Object(I.shape)({label:I.string,render:I.func,value:I.string.isRequired}),D=n(50),L=n(5),P=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),n.setMode=n.setMode.bind(y()(n)),n}return b()(t,e),p()(t,[{key:"setMode",value:function(e){var t=this.props,n=t.onChange,r=t.property;n(e.currentTarget.id,r,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.current,r=t.modes;return S.a.createElement("div",{"flex-container":"row"},r.map((function(t,r){var i=t.value,a=t.label,o=t.render;return S.a.createElement("div",{key:i,className:A()("widget-style-mode widget-style-mode--".concat(i),n===i&&"widget-style-mode--is-active"),"flex-item":"flex-item",id:i,role:"button",tabIndex:r,onClick:e.setMode,onKeyDown:e.setMode},o&&o(),S.a.createElement("span",{className:"widget-style-mode__type"},Object(L.h)(a)))})))}}]),t}(T.PureComponent);C()(P,"propTypes",{current:I.string.isRequired,modes:Object(I.arrayOf)(w).isRequired,onChange:I.func.isRequired,property:D.b.isRequired});var N=n(219),R=n.n(N),j=n(63),k=n.n(j),F=n(47),U=n(31),M=n(65),x=n(4),$=n.n(x),B=n(237),W=n.n(B),G=n(142),Y=n.n(G),H=n(28),K=n.n(H),V=n(147),z=n.n(V),q=n(459),X=n.n(q),Q=n(223),Z=n.n(Q),J=z()((function(e){return e?W()(K()(e,(function(e){var t=e.value,n=e.label;return[t,n]}))):null})),ee=n(86),te=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),n.onEnter=function(){var e=n.props.onEnter;e&&e(n.props.name)},n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.children;return T.createElement("div",{onMouseEnter:this.onEnter,className:A()("widget-style-area__icon-drop",!n&&"widget-style-area__icon-drop--free",t&&"widget-style-area__icon-drop--over")},n)}}]),t}(T.PureComponent);C()(te,"propTypes",{children:I.node,name:D.c.isRequired,onEnter:I.func,value:I.bool});var ne=n(30),re=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),n.onClick=function(e){var t=n.props,r=t.onChange,i=t.value,a=t.defaults,o=t.mode,s=t.position,c=t.name,l="block"===o?"wrapper":"main",u=$()(i,[l,"justifyContent"],a[l].justifyContent),d="main"===l?"row":$()(i,"wrapper.flexDirection",a[l].flexDirection);return r(Object(U.x)(i,[l,"justifyContent"],"left"===s?"row-reverse"===d?"flex-start"===u?"center":"flex-end":"flex-end"===u?"center":"flex-start":"row-reverse"===d?"flex-end"===u?"center":"flex-start":"flex-start"===u?"center":"flex-end"),c,Object(U.A)(e))},n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.defaults,n=t.main,r=t.wrapper,i=e.value;i=void 0===i?{}:i;var a=i.main,o=void 0===a?n:a,s=i.wrapper,c=void 0===s?r:s,l=e.position,u=e.mode;if(u!==(o.display?o.display:n.display))return null;var d=c.alignItems,p=void 0===d?r.alignItems:d,f=c.flexDirection,g=void 0===f?r.flexDirection:f,m=c.justifyContent,v=void 0===m?r.justifyContent:m;return"block"===u&&("column"===g||"column-reverse"===g||"left"===l&&("row"===g&&"flex-start"===v||"row-reverse"===g&&"flex-end"===v)||"right"===l&&("row"===g&&"flex-end"===v||"row-reverse"===g&&"flex-start"===v||("column"===g||"column-reverse"===g)&&"flex-end"===p))||"flex"===u&&("left"===l&&(!o.justifyContent||"flex-start"===o.justifyContent)||"right"===l&&"flex-end"===o.justifyContent)?null:T.createElement("div",{className:A()("widget-style-area__position","widget-style-area__position--".concat(l))},T.createElement("button",{onMouseUp:U.A,onClick:this.onClick},T.createElement(ne.u,{value:"arrow-".concat(l,"-thick")})))}}]),t}(T.PureComponent);C()(re,"propTypes",{defaults:F.b,mode:F.a,name:D.b.isRequired,onChange:I.func.isRequired,position:I.oneOf(["left","right"]),value:F.b});var ie=n(735),ae=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n.state={dragging:!1,hovering:null},n.onPick=function(){return n.setState({dragging:!0})},n.onDrop=function(){return n.setState({dragging:!1},(function(){var e=n.props,t=e.value;t=void 0===t?{}:t;var r=t.wrapper,i=void 0===r?{}:r,s=e.defaults;n.state.hovering!==a(i)&&n.onChangeProperty(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{},function(e,t,n,r,i){switch(r=r||$()(i,["main","justifyContent"],"flex-start"),e){case"left":return{alignItems:"center",flexDirection:"row",justifyContent:"column"===n||"column-reverse"===n?t:"center"===r||"row"===n?r:"flex-start"===r?"flex-end":"flex-start"};case"right":return{alignItems:"center",flexDirection:"row-reverse",justifyContent:"column"===n||"column-reverse"===n?"center"===t?"center":"flex-start"===t?"flex-end":"flex-start":"center"===r||"row-reverse"===n?r:"flex-start"===r?"flex-end":"flex-start"};case"top-left":return{alignItems:"flex-start",flexDirection:"column",justifyContent:"flex-start"};case"top-center":return{alignItems:"center",flexDirection:"column",justifyContent:"flex-start"};case"top-right":return{alignItems:"flex-end",flexDirection:"column",justifyContent:"flex-start"};case"bottom-left":return{alignItems:"flex-start",flexDirection:"column-reverse",justifyContent:"flex-start"};case"bottom-center":return{alignItems:"center",flexDirection:"column-reverse",justifyContent:"flex-start"};case"bottom-right":return{alignItems:"flex-end",flexDirection:"column-reverse",justifyContent:"flex-start"};default:return{}}}(n.state.hovering,i.alignItems,i.flexDirection,i.justifyContent,s)),"wrapper")}))},n.onEnter=function(e){return n.setState({hovering:e})},n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.name,i=e.onChange,o=e.defaults,s=e.display,c=e.onClick,l=this.state,u=l.dragging,d=l.hovering,p=a(n.wrapper),f=T.createElement(ie.a,{value:d,onPick:this.onPick,onDrop:this.onDrop}),g=u?this.onEnter:null;return T.createElement("div",{className:"widget-style-area__wrapper"},T.createElement("div",{className:"widget-style-area__outside",style:{display:s}},T.createElement(re,{value:n,name:r,onChange:i,position:"left",mode:"flex",defaults:o}),T.createElement("div",{className:"widget-style-area__inside",onMouseUp:c},T.createElement(re,{value:n,name:r,onChange:i,position:"left",mode:"block",defaults:o}),T.createElement("div",{className:A()("widget-style-area__dropzone-wrapper","widget-style-area__dropzone-wrapper--on-".concat(p),d&&"widget-style-area__dropzone-wrapper--over-".concat(d))},T.createElement("div",{className:"widget-style-area__dropzone-left"},T.createElement(te,{onEnter:g,value:"left"===d,name:"left"},"left"===p&&f)),T.createElement("div",{className:"widget-style-area__dropzone-middle"},T.createElement("div",{className:"widget-style-area__dropzone-top"},T.createElement(te,{onEnter:g,value:"top-left"===d,name:"top-left"},"top-left"===p&&f),T.createElement(te,{onEnter:g,value:"top-center"===d,name:"top-center"},"top-center"===p&&f),T.createElement(te,{onEnter:g,value:"top-right"===d,name:"top-right"},"top-right"===p&&f)),T.createElement("div",{className:"widget-style-area__label"}),T.createElement("div",{className:"widget-style-area__dropzone-bottom"},T.createElement(te,{onEnter:g,value:"bottom-left"===d,name:"bottom-left"},"bottom-left"===p&&f),T.createElement(te,{onEnter:g,value:"bottom-center"===d,name:"bottom-center"},"bottom-center"===p&&f),T.createElement(te,{onEnter:g,value:"bottom-right"===d,name:"bottom-right"},"bottom-right"===p&&f))),T.createElement("div",{className:"widget-style-area__dropzone-right"},T.createElement(te,{onEnter:g,value:"right"===d,name:"right"},"right"===p&&f))),T.createElement(re,{value:n,name:r,onChange:i,position:"right",mode:"block",defaults:o})),T.createElement(re,{value:n,name:r,onChange:i,position:"right",mode:"flex",defaults:o})))}}]),t}(T.PureComponent);C()(ae,"propTypes",{defaults:F.b.isRequired,display:I.string,name:D.b.isRequired,onChange:I.func.isRequired,onClick:I.func,value:F.b});var oe=n(130),se=n.n(oe),ce=n(33),le=n.n(ce),ue=n(1),de=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=void 0===n?{}:n,i=t.fullHeight,a=void 0!==i&&i;return T.createElement("div",{style:{marginTop:-16}},T.createElement(ne.z,{value:r.height,name:"height",onChange:this.onChangeProperty,label:Object(L.h)(r.fullHeight?"STYLE.MIN_HEIGHT":"STYLE.FIXED_HEIGHT"),helpText:Object(L.h)(r.fullHeight?"STYLE.MIN_HEIGHT_HELPER":"STYLE.FIXED_HEIGHT_HELPER"),type:"number",min:0}),a&&T.createElement("div",{className:"pt+ pb0"},T.createElement(ue.Switch,{checked:r.fullHeight,helper:Object(L.h)("STYLE.FULL_HEIGHT_HELPER"),name:"fullHeight",position:ue.Alignment.right,onChange:function(t){return e.onChangeProperty(t,"fullHeight")}},Object(L.h)("STYLE.FULL_HEIGHT"))))}}]),t}(T.PureComponent);C()(de,"propTypes",{fullHeight:I.bool,name:D.b,onChange:I.func,value:F.j});var pe=n(244),fe=n(296),ge=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.defaults;return T.createElement("div",{className:"p+"},T.createElement(ne.J,{label:Object(L.h)("STYLE.FONT_WEIGHT"),value:n.fontWeight,name:"fontWeight",onChange:this.onChangeProperty,choices:M.p,placeholder:r.fontWeight,hasClearChoice:!0}),T.createElement("div",{className:"mt+","flex-container":"row","flex-gutter":"16"},T.createElement("div",{"flex-item":"flex-item"},T.createElement(ne.Q,{label:Object(L.h)("STYLE.SIZE"),suffix:"px"},T.createElement(ne.y,{value:n.fontSize,name:"fontSize",onChange:this.onChangeProperty,type:"number",min:1,placeholder:r.fontSize}))),T.createElement("div",{"flex-item":"flex-item"},T.createElement(ne.k,{label:Object(L.h)("STYLE.COLOR"),value:n.color,name:"color",onChange:this.onChangeProperty,choices:Object(fe.b)(ee.a.getCurrent("global").properties.colors),align:"right",placeholder:r.color,hasClearChoice:!0}))))}}]),t}(T.PureComponent);C()(ge,"propTypes",{defaults:F.i.isRequired,name:D.b.isRequired,onChange:I.func.isRequired,value:F.i});var me=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.defaults;return T.createElement("div",{className:"p+"},T.createElement("div",{"flex-container":"row","flex-gutter":"16"},T.createElement("div",{"flex-item":"flex-item"},T.createElement(ne.Q,{label:Object(L.h)("STYLE.SIZE"),suffix:"px"},T.createElement(ne.y,{value:n.fontSize,name:"fontSize",onChange:this.onChangeProperty,type:"number",placeholder:r.fontSize}))),T.createElement("div",{"flex-item":"flex-item"},T.createElement(ne.k,{label:Object(L.h)("STYLE.COLOR"),value:n.color,name:"color",onChange:this.onChangeProperty,choices:Object(fe.b)(ee.a.getCurrent("global").properties.colors),align:"right",placeholder:r.color,hasClearChoice:!0}))))}}]),t}(T.PureComponent);C()(me,"propTypes",{defaults:F.i.isRequired,value:F.i});var ve=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.defaults,i=e.state,a=e.states,o=e.onChangeState;return T.createElement(ne.P,{state:i,states:a,onChangeState:o},T.createElement(ne.O,{id:"label",label:Object(L.h)("STYLE.LABEL")},T.createElement(ge,{value:n.label,name:"label",onChange:this.onChangeProperty,defaults:r.label})),T.createElement(ne.O,{id:"icon",label:Object(L.h)("STYLE.ICON")},T.createElement(me,{value:n.icon,name:"icon",onChange:this.onChangeProperty,defaults:r.icon})))}}]),t}(T.PureComponent);C()(ve,"propTypes",{defaults:F.b.isRequired,name:D.b,onChangeState:I.func,state:I.string,states:pe.a,value:F.b});var he=n(359),ye=n.n(he),Ee=n(816),be=n.n(Ee),Oe=function(e){function t(){return u()(this,t),g()(this,v()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.selected,r=e.onClick,i=e.value;return T.createElement("a",{id:t,className:A()("background-image-manager__area",n?"background-image-manager__area--is-selected":"background-image-manager__area--".concat(ye()(i,"-"))),onClick:r})}}]),t}(T.PureComponent);C()(Oe,"propTypes",{id:D.c.isRequired,onClick:I.func,selected:I.bool,value:I.arrayOf(I.string).isRequired});var Ce=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),n.onClick=function(e){var t=ye()(M.a[e.currentTarget.id]," ");n.props.onChange(t===n.props.value?void 0:t,n.props.name,e)},n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=be()(this.props.value," ");return T.createElement("div",{className:"background-image-manager__position"},K()(M.a,(function(n,r){return T.createElement(Oe,{key:r,id:r,selected:(i=n,a=t,i===a||i[0]===a[0]&&i[1]===a[1]||i[0]===a[1]&&i[1]===a[0]),onClick:e.onClick,value:n});var i,a})))}}]),t}(T.PureComponent);C()(Ce,"propTypes",{name:D.b.isRequired,onChange:I.func,value:F.d});var Te=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.defaults,r=null!==t.backgroundSize&&void 0!==t.backgroundSize?t.backgroundSize:n.backgroundSize,i=null!==t.backgroundPosition&&void 0!==t.backgroundPosition?t.backgroundPosition:n.backgroundPosition;return T.createElement("div",{className:"background-image-manager"},T.createElement("div",{className:"background-image-manager__image"},T.createElement(ne.v,{value:t.backgroundImage,name:"backgroundImage",onChange:this.onChangeProperty,style:{backgroundPosition:t.backgroundPosition,backgroundSize:t.backgroundSize}})),T.createElement("div",{className:"background-image-manager__wrapper"},T.createElement("div",{className:"background-image-manager__mode"},T.createElement(ne.J,{value:r,name:"backgroundSize",onChange:this.onChangeProperty,choices:M.b,hasBackground:!1,placeholder:Object(L.h)("GLOBAL.INPUT.CLEAR_LABEL"),align:"right",hasClearChoice:!0})),T.createElement(Ce,{value:i,name:"backgroundPosition",onChange:this.onChangeProperty})))}}]),t}(T.PureComponent);C()(Te,"propTypes",{defaults:F.e,name:D.b.isRequired,onChange:I.func,value:F.e.isRequired});var Se=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.defaults;return T.createElement("div",{"flex-container":"row","flex-gutter":"16",className:"p+"},T.createElement("div",{"flex-item":"flex-item"},T.createElement(ne.Q,{label:Object(L.h)("STYLE.ELEVATION")},T.createElement(ne.J,{value:n.shadowElevation,name:"shadowElevation",choices:M.u,placeholder:r.shadowElevation,onChange:this.onChangeProperty,hasClearChoice:!0}))),T.createElement("div",{"flex-item":"flex-item"},T.createElement(ne.Q,{label:Object(L.h)("STYLE.OPACITY"),suffix:"%"},T.createElement(ne.y,{value:n.shadowOpacity,name:"shadowOpacity",onChange:this.onChangeProperty,type:"number",min:"0",max:"100",placeholder:r.shadowOpacity,revivePlaceholder:!0}))))}}]),t}(T.PureComponent);C()(Se,"propTypes",{defaults:F.n.isRequired,name:D.b.isRequired,onChange:I.func.isRequired,value:F.n});var Ie=n(73),_e=function(e){function t(){return u()(this,t),g()(this,v()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.onChange,i=function(e){return r(e,n)};return T.createElement(ue.RadioGroup,{className:"p+"},T.createElement(ue.RadioButton,{checked:!t||"light"===t,helper:Object(L.h)("FRONT.STYLE.LIGHT_THEME.HELPER"),label:Object(L.h)("STYLE.LIGHT_THEME"),name:n,value:"light",onChange:i}),T.createElement(ue.RadioButton,{checked:"dark"===t,helper:Object(L.h)("FRONT.STYLE.DARK_THEME.HELPER"),label:Object(L.h)("STYLE.DARK_THEME"),name:n,value:"dark",onChange:i}))}}]),t}(T.PureComponent);C()(_e,"propTypes",{name:D.b.isRequired,onChange:I.func.isRequired,value:Ie.e});var Ae=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.name,i=e.onChange,a=e.shadow,o=void 0!==a&&a,s=e.theme,c=void 0!==s&&s,l=e.state,u=e.states,d=e.onChangeState,p=e.defaults,f=e.propName,g=void 0===f?"backgroundColor":f,m=ee.a.getCurrent("global").properties;return T.createElement(ne.P,{state:l,states:u,onChangeState:d},T.createElement(ne.O,{id:"color",label:Object(L.h)("STYLE.COLOR")},T.createElement(ne.i,{value:n.backgroundColor||p[g],name:"backgroundColor",onChange:this.onChangeProperty,hasClearChoice:!0,choices:m.colors,primary:m.primary,accent:m.accent})),T.createElement(ne.O,{id:"image",label:Object(L.h)("STYLE.IMAGE")},T.createElement(Te,{value:n,name:r,onChange:i,defaults:p})),o&&T.createElement(ne.O,{id:"shadow",label:Object(L.h)("STYLE.SHADOW")},T.createElement(Se,{value:n,name:r,onChange:i,defaults:p})),c&&T.createElement(ne.O,{id:"theme",label:Object(L.h)("STYLE.THEME")},T.createElement(_e,{value:n.theme,name:"theme",onChange:this.onChangeProperty})))}}]),t}(T.PureComponent);C()(Ae,"propTypes",{defaults:F.e.isRequired,name:D.b.isRequired,onChange:I.func.isRequired,onChangeState:I.func,propName:I.string,shadow:I.bool,state:I.string,states:pe.a,theme:I.bool,value:F.e});var we=n(17),De=n.n(we),Le=n(687),Pe=n.n(Le),Ne=n(381),Re=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),n.state={value:e.value?e.value[e.field]:void 0},Object(U.E)(y()(n),(function(e,t){var i=n.props,a=i.fields,o=i.field;return n.setState({value:t}),null===e[o]||void 0===e[o]?e:c({},e,C()({},o,t),r(a,t))})),n.onChangeLocked=function(e){var t=n.props,a=t.value,o=void 0===a?{}:a,s=t.name,l=t.onChange,u=t.field,d=t.fields,p=t.defaults,f=n.state.value,g=e?null!=f?f:function(e,t,n){var r=i(e,t);return null!=r?r:i(e,n)}(d,o,p):null;return l(null==g?se()(o,u):c({},o,C()({},u,g),r(d,g)),s)},n}return b()(t,e),p()(t,[{key:"renderFields",value:function(e,t){var n=this,r=this.props,i=r.choices,a=r.value,o=void 0===a?{}:a,s=r.Input,c=void 0===s?i?ne.J:ne.y:s,l=r.field,u=r.suffix,d=r.defaults,p=r.hasClearChoice,f=o[l],g=J(i);return K()(e,(function(e){var r=null==g||d[e.name]===M.n?d[e.name]:g[d[e.name]],a=null!=f?f:o[e.name],s=Object(L.h)(e.label);return i?T.createElement(c,{key:e.name,value:a,name:e.name,onChange:n.onChangeProperty,align:t,label:s,choices:i,placeholder:r,hasClearChoice:p,suffix:u}):T.createElement(ne.Q,{key:e.name,label:s,suffix:u},T.createElement(c,{value:a,name:e.name,onChange:n.onChangeProperty,placeholder:r,revivePlaceholder:!0}))}))}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.fields,r=e.value,i=void 0===r?{}:r,a=parseInt(n.length/2,10);return T.createElement("div",{className:"p+"},T.createElement(ne.C,{value:null!==i[t]&&void 0!==i[t],name:"locked",onChange:this.onChangeLocked,left:this.renderFields(Pe()(n,0,a),"left"),right:this.renderFields(Pe()(n,a),"right")}))}}]),t}(T.PureComponent);C()(Re,"propTypes",{Input:I.func,choices:Ne.b,hasClearChoice:I.bool,defaults:I.object.isRequired,field:D.c.isRequired,fields:F.l.isRequired,name:D.b.isRequired,onChange:I.func.isRequired,suffix:I.string,value:I.object});var je=function(e){function t(e){return u()(this,t),g()(this,v()(t).call(this,e))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.onChange,i=e.defaults,a=e.state,o=e.states,s=e.onChangeState,c=$()(ee.a.getCurrent("global"),"properties.colors");return De()(c,"transparent")||c.push("transparent"),T.createElement(ne.P,{state:a,states:o,onChangeState:s},T.createElement(ne.O,{id:"size",label:Object(L.h)("STYLE.SIZE")},T.createElement(Re,{key:"size",value:t,name:n,onChange:r,field:"borderWidth",fields:M.e,defaults:i,Input:ne.G,suffix:"px"})),T.createElement(ne.O,{id:"color",label:Object(L.h)("STYLE.COLOR")},T.createElement(Re,{key:"color",value:t,name:n,onChange:r,field:"borderColor",fields:M.c,defaults:i,Input:ne.k,choices:Object(fe.b)(c),hasClearChoice:!0})),T.createElement(ne.O,{id:"radius",label:Object(L.h)("STYLE.RADIUS")},T.createElement(Re,{key:"radius",value:t,name:n,onChange:r,field:"borderRadius",fields:M.d,defaults:i,Input:ne.G,suffix:"px"})))}}]),t}(T.PureComponent);C()(je,"propTypes",{defaults:F.f.isRequired,name:D.b.isRequired,onChange:I.func.isRequired,onChangeState:I.func,state:I.string,states:I.array,value:F.f});var ke=function(e){function t(e){return u()(this,t),g()(this,v()(t).call(this,e))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.onChange,i=e.defaults,a=e.state,o=e.states,s=e.onChangeState,c=e.hideMarginTab;return T.createElement(ne.P,{state:a,states:o,onChangeState:s},!c&&T.createElement(ne.O,{id:"margin",label:Object(L.h)("STYLE.MARGIN")},T.createElement(Re,{value:t,name:n,onChange:r,choices:M.v,field:"margin",fields:M.q,defaults:i,hasClearChoice:!0,suffix:"px"})),T.createElement(ne.O,{id:"padding",label:Object(L.h)("STYLE.PADDING")},T.createElement(Re,{value:t,name:n,onChange:r,choices:M.t,field:"padding",fields:M.r,defaults:i,hasClearChoice:!0,suffix:"px"})))}}]),t}(T.PureComponent);C()(ke,"propTypes",{defaults:F.o.isRequired,hideMarginTab:I.bool,name:D.b.isRequired,onChange:I.func.isRequired,onChangeState:I.func,state:I.string,states:pe.a,value:F.o});var Fe=function(e){function t(e){var n;u()(this,t),n=g()(this,v()(t).call(this,e));var r=n.constructor.mergeDefaults;return n.state={defaults:e.defaults,state:e.state||"default"},Object(U.E)(y()(n)),n.onChangeState=function(t){var i=e.defaults,a=e.value,o=e.onChangeState;n.setState({defaults:"default"===t?i:r(i,a),state:t},(function(){return o&&o(t)}))},n}return b()(t,e),p()(t,null,[{key:"mergeDefaults",value:function(e,t){return R()({},e,se()(t,["hover"]))}}]),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.defaults,i=e.name,a=this.state,o=a.state,s=a.defaults,c="default"===o?n:$()(n,o,{}),l=$()(n.main,"display","block"),u="block"===l?"main":"wrapper",d=this.constructor,p=d.AVAILABLE_MODES,f=d.PROPERTY_PATH,g=d.STATES,m=d.NAMES,v="footer"===i?g:null;return S.a.createElement("div",{className:"widget-style-area__settings-wrapper"},S.a.createElement(ne.x,{value:Object(L.h)("STYLE.WRAPPER_HELPER")}),S.a.createElement(ne.a,{label:Object(L.h)("STYLE.MODE"),variant:"simple"},S.a.createElement(P,{current:l,defaults:r.main.display,modes:p,property:f,onChange:this.onChangeProperty})),S.a.createElement(ne.a,{label:Object(L.h)("STYLE.HEIGHT"),variant:"simple"},S.a.createElement(de,{defaults:r.wrapper,name:"wrapper",value:n.wrapper,onChange:this.onChangeProperty})),S.a.createElement(ne.a,{label:Object(L.h)("STYLE.LABEL_AND_ICON"),variant:"simple"},S.a.createElement(ve,{defaults:s,name:m[o].global,state:o,states:v,value:c,onChange:this.onChangeProperty,onChangeState:this.onChangeState})),S.a.createElement(ne.a,{label:Object(L.h)("STYLE.SPACINGS"),variant:"simple"},S.a.createElement(ke,{defaults:s.wrapper,name:m[o].wrapper,state:o,states:v,value:c.wrapper,onChange:this.onChangeProperty,onChangeState:this.onChangeState})),S.a.createElement(ne.a,{label:Object(L.h)("STYLE.BORDERS"),variant:"simple"},S.a.createElement(je,{defaults:s.wrapper,name:m[o].wrapper,state:o,states:v,value:c.wrapper,onChange:this.onChangeProperty,onChangeState:this.onChangeState})),S.a.createElement(ne.a,{label:Object(L.h)("STYLE.BACKGROUND"),variant:"simple"},S.a.createElement(Ae,{shadow:!0,defaults:s[u],name:m[o][u],state:o,states:v,value:c[u],onChange:this.onChangeProperty,onChangeState:this.onChangeState})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.state!==t.state?{state:e.state||"default"}:null}}]),t}(T.PureComponent);C()(Fe,"propTypes",{defaults:F.b.isRequired,name:F.c.isRequired,onChange:I.func.isRequired,onChangeState:I.func,state:F.p,value:F.b}),C()(Fe,"defaultProps",{onChangeState:le.a,state:"default",value:"default"}),C()(Fe,"PROPERTY_PATH",["main","display"]),C()(Fe,"AVAILABLE_MODES",[{label:"Block",render:function(){return S.a.createElement("div",{className:"widget-style-mode__outside"},S.a.createElement("div",{className:"widget-style-mode__inside"},S.a.createElement("div",{className:"widget-style-mode__icon"}),S.a.createElement("div",{className:"widget-style-mode__label"})))},value:"block"},{label:"Inline",render:function(){return S.a.createElement("div",{className:"widget-style-mode__outside"},S.a.createElement("div",{className:"widget-style-mode__inside"},S.a.createElement("div",{className:"widget-style-mode__icon"}),S.a.createElement("div",{className:"widget-style-mode__label"})))},value:"flex"}]),C()(Fe,"NAMES",{default:{global:null,label:"label",main:"main",wrapper:"wrapper"},hover:{global:"hover",label:["hover","label"],main:["hover","main"],wrapper:["hover","wrapper"]}}),C()(Fe,"STATES",[{icon:"cursor-default",id:"default"},{icon:"cursor-pointer",id:"hover"}]);var Ue=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),n.toggleActive=function(e){return n.props.onToggle(n.props.name,e)},n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.active,i=e.onChange,a=e.defaults,o=e.state,s=e.onChangeState,c=$()(t,"main.display","block");return T.createElement("div",{className:A()("widget-style-area","widget-style-area--".concat(n),r&&"widget-style-area--is-active","widget-style-area--mode-".concat(c))},T.createElement(ae,{value:t,name:n,onChange:i,defaults:a,display:c,onClick:this.toggleActive}),T.createElement("div",{className:"widget-style-area__settings"},r&&T.createElement(Fe,{value:t,onChange:i,name:n,defaults:a,onChangeState:s,state:o})))}}]),t}(T.PureComponent);C()(Ue,"propTypes",{active:I.bool,defaults:F.b.isRequired,name:F.c.isRequired,onChange:I.func.isRequired,onChangeState:I.func,onToggle:I.func.isRequired,state:F.p,value:F.b});var Me=function(e){function t(e){return u()(this,t),g()(this,v()(t).call(this,e))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.onChange,i=e.defaults;return T.createElement("div",{className:"widget-style-content__settings-wrapper"},T.createElement(ne.a,{label:Object(L.h)("STYLE.HEIGHT"),variant:"simple"},T.createElement(de,{value:t,name:n,onChange:r,defaults:i,fullHeight:!0})),T.createElement(ne.a,{label:Object(L.h)("STYLE.SPACINGS"),variant:"simple"},T.createElement(ke,{value:t,name:n,onChange:r,defaults:i})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BORDERS"),variant:"simple"},T.createElement(je,{value:t,name:n,onChange:r,defaults:i})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BACKGROUND"),variant:"simple"},T.createElement(Ae,{value:t,name:n,onChange:r,defaults:i,theme:!0,shadow:!0})))}}]),t}(T.PureComponent);C()(Me,"propTypes",{defaults:F.h.isRequired,name:D.c.isRequired,onChange:I.func.isRequired,value:F.h});var xe=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),n.state={over:!1},n.toggleActive=function(e){return n.props.onToggle("content",e)},n.onMouseEnter=function(){return n.setState({over:!0})},n.onMouseLeave=function(){return n.setState({over:!1})},n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.active,i=e.onChange,a=e.defaults,o=this.state.over;return T.createElement("div",{className:A()("widget-style-content",r&&"widget-style-content--is-active")},T.createElement("div",{className:"widget-style-content__wrapper widget-style-content__wrapper--top"},T.createElement("div",{className:"widget-style-content__outside"},T.createElement("div",{className:A()("widget-style-content__inside",o&&"widget-style-content__inside--is-focus"),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.toggleActive}))),T.createElement("div",{className:"widget-style-content__settings"},r&&T.createElement(Me,{value:t,name:n,onChange:i,defaults:a})),T.createElement("div",{className:"widget-style-content__wrapper widget-style-content__wrapper--bottom"},T.createElement("div",{className:"widget-style-content__outside"},T.createElement("div",{className:A()("widget-style-content__inside",o&&"widget-style-content__inside--is-focus"),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.toggleActive}))))}}]),t}(T.PureComponent);C()(xe,"propTypes",{active:I.bool,defaults:F.h.isRequired,name:D.b,onChange:I.func.isRequired,onToggle:I.func.isRequired,value:F.h});var $e=function(e){function t(e){return u()(this,t),g()(this,v()(t).call(this,e))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.onChange,i=e.defaults,a=e.isInPlainCell;return T.createElement("div",{className:"widget-style-main__settings-wrapper"},T.createElement(ne.a,{label:Object(L.h)("STYLE.SPACINGS"),variant:"simple"},T.createElement(ne.x,{value:"".concat(Object(L.h)("WIDGET_SETTINGS_STYLE_NOT_SAVED_PLURAL")," ").concat(Object(L.h)("WIDGET_SETTINGS_RESPONSIVE_SPACING_HELPER")),noBorder:!0,noPadding:!0}),T.createElement(ke,{value:t,name:n,onChange:r,defaults:i})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BORDERS"),variant:"simple"},T.createElement(je,{value:t,name:n,onChange:r,defaults:i})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BACKGROUND"),variant:"simple"},T.createElement(Ae,{value:t,name:n,onChange:r,defaults:i,shadow:!0,propName:a?"backgroundPlainColor":"backgroundColor"})))}}]),t}(T.PureComponent);C()($e,"propTypes",{defaults:F.k.isRequired,isInPlainCell:I.bool,name:D.c.isRequired,onChange:I.func.isRequired,value:F.k});var Be=function(e){function t(e){return u()(this,t),g()(this,v()(t).call(this,e))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.name,r=e.onChange,i=e.defaults,a=e.active,o=e.isInPlainCell;return T.createElement("div",{className:A()("widget-style-main",a&&"widget-style-main--is-active")},T.createElement("div",{className:"widget-style-main__settings"},a&&T.createElement($e,{value:t,name:n,onChange:r,defaults:i,isInPlainCell:o})))}}]),t}(T.PureComponent);C()(Be,"propTypes",{active:I.bool.isRequired,defaults:F.k.isRequired,isInPlainCell:I.bool,name:D.c.isRequired,onChange:I.func.isRequired,value:F.k});var We=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n.state={area:null},n.toggleArea=function(e,t){Object(U.A)(t),n.setState({area:n.state.area===e?null:e})},n.toggleMainArea=function(e){switch(e.target.className){case"widget-style-content__outside":case"widget-style-area__outside":return n.toggleArea("main",e);default:return}},n.onMouseOver=function(e){switch(e.target.className){case"widget-style-content__outside":case"widget-style-area__outside":return n.setState({over:!0});default:return n.setState({over:!1})}},n.onMouseOut=function(){return n.setState({over:!1})},n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.isInPlainCell,n=e.onChangeState,r=e.value,i=void 0===r?{}:r,a=e.state,o=this.state,s=o.area,c=o.over,l=this.state.defaults,u=void 0===l?k()(M.o):l;return u=R()(u,t?k()(M.l):k()(M.g)),T.createElement("div",{className:A()("widget-style",s&&"widget-style--".concat(s,"-open"),c&&"widget-style--is-focus"),onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onClick:this.toggleMainArea},T.createElement(Ue,{value:i.header,name:"header",onChange:this.onChangeProperty,active:"header"===s,onToggle:this.toggleArea,defaults:u.header}),T.createElement(xe,{value:i.content,name:"content",onChange:this.onChangeProperty,active:"content"===s,onToggle:this.toggleArea,defaults:u.content}),T.createElement(Ue,{value:i.footer,name:"footer",onChange:this.onChangeProperty,active:"footer"===s,onToggle:this.toggleArea,defaults:u.footer,onChangeState:n,state:a}),T.createElement(Be,{value:i.main,name:"main",onChange:this.onChangeProperty,active:"main"===s,defaults:u.main,isInPlainCell:t}))}}]),t}(T.PureComponent);C()(We,"propTypes",{isInPlainCell:I.bool,name:D.b,onChange:I.func.isRequired,onChangeState:I.func,state:F.p,value:F.q});var Ge=function(e){function t(e){var n;return u()(this,t),n=g()(this,v()(t).call(this,e)),Object(U.E)(y()(n)),n}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.isPlain,n=e.value,r=void 0===n?{}:n,i=k()(M.f);return i=R()(i,t?k()(M.k):k()(M.j)),T.createElement("div",{className:"widget-style-main__settings-wrapper"},T.createElement(ne.a,{label:Object(L.h)("STYLE.SPACINGS"),variant:"simple"},T.createElement(ke,{value:r.components,name:"components",onChange:this.onChangeProperty,defaults:i.components})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BORDERS"),variant:"simple"},T.createElement(je,{value:r.components,name:"components",onChange:this.onChangeProperty,defaults:i.components})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BACKGROUND"),variant:"simple"},T.createElement(Ae,{value:r.components,name:"components",onChange:this.onChangeProperty,defaults:i.components,shadow:!0})))}}]),t}(T.PureComponent);C()(Ge,"propTypes",{isPlain:I.bool,name:D.b,onChange:I.func.isRequired,value:F.g});var Ye=function(e){function t(e){return u()(this,t),g()(this,v()(t).call(this,e))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?{}:t,r=e.name,i=void 0===r?"rowStyle":r,a=e.onChange,o=e.isFullWidth,s=k()(M.m);return s=R()(s,o?k()(M.h):k()(M.i)),T.createElement("div",{className:"widget-style-main__settings-wrapper"},T.createElement(ne.a,{label:Object(L.h)("STYLE.SPACINGS"),variant:"simple"},T.createElement(ke,{value:n,name:i,onChange:a,defaults:s})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BORDERS"),variant:"simple"},T.createElement(je,{value:n,name:i,onChange:a,defaults:s})),T.createElement(ne.a,{label:Object(L.h)("STYLE.BACKGROUND"),variant:"simple"},T.createElement(Ae,{value:n,name:i,onChange:a,defaults:s})))}}]),t}(T.PureComponent);C()(Ye,"propTypes",{name:D.b,isFullWidth:I.bool,onChange:I.func.isRequired,value:F.m}),n.d(t,"b",(function(){return P})),n.d(t,"d",(function(){return We})),n.d(t,"a",(function(){return Ge})),n.d(t,"c",(function(){return Ye}))},function(e,t,n){"use strict";var r=n(495);n.d(t,"a",(function(){return r.a}))},function(e,t,n){e.exports=n.p+"assets/img/widget-settings/slideshow-thumbnails.svg?d170e7afbdf7e06980a40e2e1a7eafaf"},function(e,t,n){"use strict";function r(){return/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(7),i=n.n(r),a=n(43),o={isAlertDisplayed:!1,violations:[],more:!1,error:void 0},s=Object(a.a)({domain:"nanny",initialState:o,reducers:{displayNannyAlert:function(e,t){i()(e,"violations",t.payload.violations),i()(e,"more",t.payload.more),i()(e,"isAlertDisplayed",!0)},hideNannyAlert:function(e){i()(e,"violations",o.violations),i()(e,"more",o.more),i()(e,"isAlertDisplayed",!1)},setError:function(e,t){i()(e,"error",t.payload)},resetError:function(e){i()(e,"error",o.error)}}}),c=s.actions,l=s.reducer},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),i=n.n(r),a=n(15),o=n(52),s=n(103),c=n(32),l="list-no-results",u=function(e){var t=e.icon,n=e.label,r=e.size,u=Object(a.c)(),d=u.translateKey;return i.a.createElement("div",{className:l},i.a.createElement(s.a,{className:"".concat(l,"__icon"),icon:t||o.Pc,size:r||c.h.s}),i.a.createElement("h2",{className:"".concat(l,"__title")},d(n||"NO_RESULTS")))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),i=Object(r.createContext)(void 0)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return O}));var a=n(16),o=n.n(a),s=n(3),c=n.n(s),l=n(18),u=n.n(l),d=n(0),p=n.n(d),f=n(2),g=n(4),m=n.n(g),v=n(91),h=n(31),y=n(5),E=n(86),b=n(65),O=function(e){var t=e.children,n=e.properties,r=e.isEditing,a=void 0!==r&&r,s=e.isWidgetEmpty,c=e.widgetType,l=u()(e,["children","properties","isEditing","isWidgetEmpty","widgetType"]),d=n.viewModeVariant,f=n.noResults,g=n.emptyMessage;return p.a.createElement("div",o()({className:"widget-content",style:d===v.c.UNGROUP?null:Object(E.d)(n)},l),p.a.createElement("div",{className:"widget-wrapper"},Object(h.o)()&&!a&&s?p.a.createElement("div",{className:"widget-content__placeholder",style:i({backgroundColor:"transparent"===m()(n.style,["main","backgroundColor"])&&void 0===m()(n.style,["main","backgroundImage"])?b.o.main.backgroundColor:m()(n.style,["main","backgroundColor"])},Object(E.d)(n,!1))},p.a.createElement("span",{className:"widget-content__placeholder-title"},Object(y.h)("WIDGET_TYPE_".concat(c.toUpperCase()))),Object(y.h)(n.helper)&&p.a.createElement("span",{className:"widget-content__placeholder-helper"},Object(y.h)(n.helper))):t,f&&s&&!Object(h.o)()&&p.a.createElement("div",{className:"no-results"},p.a.createElement("i",{className:"mdi mdi-information-outline"}),p.a.createElement("span",null,Object(y.h)(g)||Object(y.h)("NO_RESULTS")))))};O.propTypes={children:f.node.isRequired,isEditing:f.bool.isRequired,isWidgetEmpty:f.bool.isRequired,properties:Object(f.shape)().isRequired,widgetType:f.string.isRequired}},function(e,t,n){"use strict";function r(e){o=e.handleTaggingMap}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n(33),a=n.n(i),o=a.a},,function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_teams.svg?7327286f189f39620447ec505dfa06d2"},function(e,t,n){"use strict";function r(e,t,n){var r=s()(e),i=r.length-1;if(0===r.length||t>i||t<0)return r;var o=r.splice(t,1),c=a()(o,1),l=c[0];return r.splice(Math.min(n,i),0,l),r}n.d(t,"a",(function(){return r}));var i=n(8),a=n.n(i),o=n(19),s=n.n(o)},function(e,t,n){"use strict";n.r(t),n.d(t,"FETCH_CONVERSATIONS_ERROR",(function(){return o})),n.d(t,"FETCH_CONVERSATIONS_LOADING",(function(){return i})),n.d(t,"FETCH_CONVERSATIONS_SUCCESS",(function(){return a})),n.d(t,"dispatchFetchConversations",(function(){return s}));var r=n(182),i="community/FETCH_CONVERSATIONS_LOADING",a="community/FETCH_CONVERSATIONS_SUCCESS",o="community/FETCH_CONVERSATIONS_ERROR",s=function(e){return function(t){return t({type:i}),Object(r.b)({groupId:e}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.payload;t({payload:n,type:a})})).catch((function(e){t({payload:e,type:o})}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"MANAGE_FOLLOWING_ERROR",(function(){return o})),n.d(t,"MANAGE_FOLLOWING_LOADING",(function(){return i})),n.d(t,"MANAGE_FOLLOWING_SUCCESS",(function(){return a})),n.d(t,"dispatchManageFollowing",(function(){return s}));var r=n(182),i="community/MANAGE_FOLLOWING_LOADING",a="community/MANAGE_FOLLOWING_SUCCESS",o="community/MANAGE_FOLLOWING_ERROR",s=function(e,t){return function(n){return n({type:i}),Object(r.f)({notify:e,uid:t}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;n({payload:t,type:a})})).catch((function(e){n({payload:e,type:o})}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"FETCH_FILES_ERROR",(function(){return o})),n.d(t,"FETCH_FILES_LOADING",(function(){return i})),n.d(t,"FETCH_FILES_SUCCESS",(function(){return a})),n.d(t,"dispatchFetchFiles",(function(){return s}));var r=n(182),i="community/FETCH_FILES_LOADING",a="community/FETCH_FILES_SUCCESS",o="community/FETCH_FILES_ERROR",s=function(e){return function(t){return t({type:i}),Object(r.c)({docPath:e}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.payload;t({payload:n,type:a})})).catch((function(e){t({payload:e,type:o})}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"dispatchFetchGroup",(function(){return s})),n.d(t,"FETCH_GROUP_ERROR",(function(){return o})),n.d(t,"FETCH_GROUP_LOADING",(function(){return i})),n.d(t,"FETCH_GROUP_SUCCESS",(function(){return a}));var r=n(182),i="community/FETCH_GROUP_LOADING",a="community/FETCH_GROUP_SUCCESS",o="community/FETCH_GROUP_ERROR",s=function(e){return function(t){return t({type:i}),Object(r.d)({workspaceId:e}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.payload;t({payload:n,type:a})})).catch((function(e){t({payload:e,type:o})}))}}},function(e,t,n){"use strict";function r(e){e.isAvailable,o=e.translate,s=e.cancelCurrentQuery}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n(33),a=n.n(i),o=a.a,s=(a.a,a.a)},function(e,t,n){"use strict";var r=n(53),i="".concat(r.c,"/").concat("extended-services"),a="".concat(i,"/SET_COMMUNITY_EXTENDED_SERVICES_FIELD"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldId,n=e.value;return function(e){e({payload:{fieldId:t,value:n},type:a})}},s=n(37),c=n(133),l=n(113),u=n(56),d="".concat(c.ANGULAR_ACTION_PREFIX,"/community-dialog/update"),p={fields:{}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;return Object(s.a)(e,(function(e){var n=t.payload,i=t.newState,o=void 0===i?{}:i,s=o.editedCommunity;switch(t.type){case d:if(s&&(e.fields.isDriveEnabled=s.hasDriveFolder,e.fields.isMediaSecuredEnabled=s.securedRepository,e.fields.isCalendarEnabled=s.hasCalendarId,e.fields.isChatEnabled=s.hasChat,s.chat)){var c=s.chat,f=c.chatProvider,g=c.chatId,m=c.chanId;e.fields.chatProvider=f,e.fields.chatUserSpace=g,m?(e.fields.chatChannelId=m,e.fields.chatSelectChannelMode=u.a.SELECT.id):e.fields.chatSelectChannelMode=u.a.CREATE.id}break;case r.a:case r.f:case r.i:case l.c:Object.assign(e,p);break;case a:e.fields[n.fieldId]=n.value}}))};n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return f}))},,,function(e,t,n){"use strict";function r(e){i=e.getFeed}var i;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a}));var r=n(64),i=new r.a({path:"chat"}),a=function(){return i.get("wall/providers/list")},o=function(e,t,n,r,a,o,s,c){return i.get("/wall/messages",{params:{channelId:o,cursor:a,maxResults:n,messageType:r,orderAsc:c,orderBy:s,provider:e,spaceId:t}})},s=function(e,t,n,r){return i.get("/messages/wallpost",{params:{channelId:n,messageId:r,provider:e,spaceId:t}})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return"q-".concat(e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(9),i=function(e){return e.admin.platform.identityProvider},a=Object(r.createSelector)(i,(function(e){return e.providers})),o=Object(r.createSelector)(i,(function(e){return e.form}));Object(r.createSelector)(i,(function(e){return e.settings}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n(45),i=new r.c({path:"termsandconditions"}),a=function(e){return i.get("get",{params:e})},o=function(){return i.get("reset")},s=function(e){return i.post("save",e)}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=n(3),o=n.n(a),s=n(236),c=n.n(s),l=n(64),u=new l.a({path:"user"}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){return c.a.stringify(e,{arrayFormat:"repeat"})};return u.get("list",{params:i({},{},{},e),paramsSerializer:t})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cursor,n=e.instanceId,r=e.query,i=e.showHidden,a=e.users,o={ids:a,instance:n,showHidden:i};return t?o.cursor=t:r&&(o.query=r),d(o).then((function(e){var t=e.data,n=t.cursor,r=t.items,i=t.more;return{cursor:n,hasMore:i,list:r}}))},f="users/ADD_USERS",g="users/FETCH_USERS_ERROR",m="users/FETCH_USERS_LOADING",v="users/FETCH_USERS_SUCCESS",h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cursor,n=e.query,r=e.showHidden,i=e.users;return function(e,a){var o=a(),s=(o.users,o.instance),c=s.id;return e({type:m}),p({cursor:t,instanceId:c,query:n,showHidden:r,users:i}).then((function(t){var n=t.cursor,r=t.hasMore,i=t.list;return e({payload:{hasMore:r,list:i},type:v}),{cursor:n,users:i}})).catch((function(t){e({payload:{error:t},type:g})}))}},y=n(37),E={list:{},loading:!1},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return Object(y.a)(e,(function(e){var n=t.payload;switch(t.type){case g:e.loading=!1;break;case m:e.loading=!0;break;case f:case v:var r=n.list||[];e.loading=!1,r.forEach((function(t){e.list[t.id]=t}))}}))};n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return b}))},function(e,t,n){"use strict";function r(e){var t=e.items;return P()(t,(function(e,n){e.key=e.filter.uid,P()(e.values,(function(e,r){var i={label:e,value:e};t[n].values[r]=i}))})),t}function i(e){var t={};return P()(e.values,(function(e){t[e.name]=e.value})),t}function a(e){var t={};if(e.indicators.length>1)angular.forEach(e.indicators,(function(e){t[e.type]=i(e)}));else{var n=D()(e.indicators);t[n.type]=i(n)}return t}function o(e,t){return s.apply(this,arguments)}function s(){return s=y()(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===I.f.COMMUNITIES?3:e.t0===I.f.SITES?7:11;break;case 3:return e.next=5,F(n);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:return e.next=9,U(n);case 9:return r=e.sent,e.abrupt("return",r.data);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function c(){return l.apply(this,arguments)}function l(){return l=y()(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return t=e.sent,e.abrupt("return",r(t.data));case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=y()(v.a.mark((function e(t){var n,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r=A()(t,["target"]),e.next=3,g["".concat(n,"Indicators")](r);case 3:return i=e.sent,e.abrupt("return",a(i.data));case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){re()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={};n.r(g),n.d(g,"communityIndicators",(function(){return j})),n.d(g,"deleteFilter",(function(){return k})),n.d(g,"getCommunityList",(function(){return F})),n.d(g,"getFiltersValues",(function(){return M})),n.d(g,"getInstancesList",(function(){return U})),n.d(g,"instanceIndicators",(function(){return x})),n.d(g,"listFilters",(function(){return $})),n.d(g,"platformIndicators",(function(){return B})),n.d(g,"saveFilters",(function(){return W}));var m=n(6),v=n.n(m),h=n(10),y=n.n(h),E=n(155),b=n.n(E),O=n(27),C=n.n(O),T=n(36),S=n(5),I=n(40),_=n(18),A=n.n(_),w=n(51),D=n.n(w),L=n(28),P=n.n(L),N=n(64),R=new N.a({path:"analyticsv2"}),j=function(e,t){return R.post("get_indicators_community",e,t)},k=function(e){return R.delete("filter/delete",e)},F=function(e){return R.post("communities/get_communities",e)},U=function(e){return R.post("instances/get_instances",e)},M=function(e,t){return R.post("filter/value/list",e,t)},x=function(e,t){return R.post("get_indicators_instance",e,t)},$=function(e){return R.get("filter/list",e)},B=function(e,t){return R.post("get_indicators_platform",e,t)},W=function(e,t){return R.post("filter/save",e,t)},G="ANALYTICS_REPORT",Y="".concat(G,"/TABLE/FETCH_TABLE_SUCCESS"),H="".concat(G,"/TABLE/FETCH_TABLE_ERROR"),K="".concat(G,"/customFilters/FETCH_CUSTOM_FILTERS_VALUES_SUCCESS"),V="".concat(G,"/customFilters/FETCH_CUSTOM_FILTERS_VALUES_ERROR"),z="".concat(G,"/DASHBOARD/FETCH_INDICATORS_SUCCESS"),q="".concat(G,"/DASHBOARD/FETCH_INDICATORS_ERROR"),X="".concat(G,"/SET_IS_LOADING"),Q=function(e){var t=[];return C()(e)||b()(e,(function(e,n){var r={filterId:n,selectedValues:[e]};t.push(r)})),t},Z=function(e){var t=e.id,n=e.value;return{payload:{id:t,value:n},type:X}},J=function(e){var t=e.id;return function(){var e=y()(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Z({id:t,value:!0})),e.prev=1,e.next=4,c();case 4:r=e.sent,n({payload:{availableCustomFiltersValues:r,id:t,setIsCustomFilterValuesLoading:!1},type:K}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n({payload:{availableCustomFiltersValues:[],id:t,setIsCustomFilterValuesLoading:!1},type:V}),Object(T.b)(Object(S.h)("ADMIN.ANALYTICS.GET_CUSTOM_FILTERS_ERROR"));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},ee=function(e){var t=e.target,n=e.targetId,r=e.indicators,i=e.filters;return function(){var e=y()(v.a.mark((function e(a){var o,s,c,l,d,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.timeframe,s=i.comparison,c=i.customFilters,a(Z({id:n,value:!0})),l=Q(c),d={comparePeriod:s,filters:l,indicators:r,period:o,target:t},t===I.i.COMMUNITY&&(d.communityId=n),t===I.i.INSTANCE&&(d.instanceId=n),e.prev=6,e.next=9,u(d);case 9:p=e.sent,a({payload:{hasBackendError:!1,id:n,indicators:p,isLoading:!1,type:t},type:z}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),a({payload:{hasBackendError:!0,id:n,indicators:{},isLoading:!1,type:t},type:q}),Object(T.b)(Object(S.h)("ADMIN.ANALYTICS.GET_INDICATORS_ERROR"));case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}()},te=function(e){return function(){var t=y()(v.a.mark((function t(n){var r,i,a,s,c,l,u,d,p,f,g,m;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.cursor,i=e.id,a=e.filters,s=e.type,c=a.customFilters,l=a.privacy,u=a.searchTitle,d=a.sortOrder,p=a.timeframe,n(Z({id:i,value:!0})),f=Q(c),g={filters:f,period:p,searchTitle:u,sortOrder:d},s===I.f.COMMUNITIES&&(g.communityPrivacy=l),r>0&&(g.cursor=r),t.prev=7,t.next=10,o(s,g);case 10:m=t.sent,n({payload:{data:m,hasBackendError:!1,id:i,isLoading:!1,isNext:Boolean(g.cursor)},type:Y}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(7),n({payload:{hasBackendError:!0,id:i,isLoading:!1},type:H}),Object(T.b)(Object(S.h)("ADMIN.ANALYTICS.GET_TABLE_LIST_ERROR"));case 18:case"end":return t.stop()}}),t,null,[[7,14]])})));return function(e){return t.apply(this,arguments)}}()},ne=n(3),re=n.n(ne),ie=n(19),ae=n.n(ie),oe=n(37),se=n(63),ce=n.n(se),le=n(21),ue=n.n(le),de=n(144),pe=n.n(de),fe={current:{},entities:[]},ge={isLoading:!1},me=function(e){var t=e.payload,n=e.state,r=ue()(ce()(n.entities),{id:t.id}).data.items;return[].concat(ae()(r),ae()(t.data.items))},ve=function(e,t){var n=ae()(e.entities),r=D()(pe()(n,{id:t.id}))||ge;return f({},e,{entities:[].concat(ae()(n),[f({},r,{},t)])})},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(oe.a)(e,(function(e){return ve(e,t.payload)}));case q:case z:return Object(oe.a)(e,(function(e){return ve(e,t.payload)}));case H:case Y:return Object(oe.a)(e,(function(e){return t.payload.isNext&&(t.payload.data.items=me({payload:t.payload,state:e})),ve(e,t.payload)}));case X:return Object(oe.a)(e,(function(e){return ve(e,{id:t.payload.id,isLoading:t.payload.value})}));default:return e}};n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return ee})),n.d(t,"c",(function(){return te})),n.d(t,"d",(function(){return he}))},function(e,t,n){"use strict";var r=n(54),i=n(9),a=n(34),o="global",s="child",c="parent";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var l=Object(a.g)(),u=Object(r.h)(),d=function(e){return e.style||e.styles||{}},p=Object(i.createSelector)(d,(function(e){var t=e[o],n=e[c];return n&&l.isLegacyContext?n.properties:null==t?void 0:t.properties})),f=Object(i.createSelector)(d,(function(e){var t=e[s];return null==t?void 0:t.properties}));Object(i.createSelector)(d,(function(e){var t,n=e[o];return null==n||null===(t=n.properties)||void 0===t?void 0:t.top})),Object(i.createSelector)(d,(function(e){var t,n=e[o];return null==n||null===(t=n.properties)||void 0===t?void 0:t.footer})),Object(i.createSelector)(d,(function(e){return null==e?void 0:e.widget}))},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){var t=e.date,n=e.inputFormat,r=void 0===n?null:n,i=e.outputFormat,a=void 0===i?Object(s.h)("DATE_FORMAT"):i;return window.moment.utc(t,r).local().format(a)}function i(e){var t;switch(!0){case e>=86400:t="GLOBAL.DURATION_FORMAT_DHMS";break;case e>=3600:t="GLOBAL.DURATION_FORMAT_HMS";break;case e>=60:t="GLOBAL.DURATION_FORMAT_MS";break;default:t="GLOBAL.DURATION_FORMAT_S"}return Object(o.utc)(Object(o.duration)(e,"s").asMilliseconds()).format(Object(s.h)(t))}function a(e){return/.*[+-]\d{2}:\d{2}/.exec(e)?e:-1===e.indexOf("Z")?"".concat(e,"Z"):e}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n(41),s=n(5)},,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return o.apply(this,arguments)}function o(){return o=v()(p.a.mark((function e(t){var n,r,o,s,c,l,u,d,f=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=f.length>2&&void 0!==f[2]?f[2]:I,e.next=4,y()(t(i({},n,{maxResults:r,more:!0})));case 4:if(o=e.sent,s=o.data,c=s.items,l=s.more,u=s.cursor,!c||S()(c)){e.next=8;break}return e.delegateYield(C()(b()(c),y.a),"t0",8);case 8:if(!l||!u){e.next=11;break}return d=a(t,i({},n,{cursor:u}),r),e.delegateYield(C()(b()(d),y.a),"t1",11);case 11:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return c=u()(p.a.mark((function e(t){var n,r,i,o,s,c,l,u,d,f,g=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.length>1&&void 0!==g[1]?g[1]:{},r=g.length>2&&void 0!==g[2]?g[2]:I,i=[],o=!0,s=!1,e.prev=5,l=b()(a(t,n,r));case 7:return e.next=9,l.next();case 9:return u=e.sent,o=u.done,e.next=13,u.value;case 13:if(d=e.sent,o){e.next=20;break}f=d,i.push(f);case 17:o=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),s=!0,c=e.t0;case 26:if(e.prev=26,e.prev=27,o||null==l.return){e.next=31;break}return e.next=31,l.return();case 31:if(e.prev=31,!s){e.next=34;break}throw c;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.abrupt("return",i);case 37:case"end":return e.stop()}}),e,null,[[5,22,26,36],[27,,31,35]])}))),c.apply(this,arguments)}n.d(t,"a",(function(){return s}));var l=n(10),u=n.n(l),d=n(6),p=n.n(d),f=n(3),g=n.n(f),m=n(547),v=n.n(m),h=n(319),y=n.n(h),E=n(320),b=n.n(E),O=n(412),C=n.n(O),T=n(27),S=n.n(T),I=30},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r="elasticsearch-ps",i="tagz"},,,function(e,t,n){"use strict";n.r(t),n.d(t,"WidgetSettingsConstant",(function(){return r}));var r={DEBOUNCE_DELAY:500,MAX_NUMBER_TO_DISPLAY:10,ORDER_DIRECTION:{ASCENDING:"asc",DESCENDING:"desc"},SELECTION_TYPES:{COMMUNITY_FOLDER:"community-folder",LIST:"list",PICK:"pick"}};angular.module("Constants").constant("WidgetSettingsConstant",r)},function(e,t,n){"use strict";n.r(t),n.d(t,"AdvancedSettingsConstant",(function(){return l}));var r,i=n(28),a=n.n(i),o=n(105),s=n(178),c=n(246),l={CATEGORIES:{default:{title:"ADMIN.ADVANCED_SETTINGS.DEFAULT_CATEGORY"},extensions:{title:"ADMIN.NAV.PLATFORM_EXTENSIONS"},wysiwyg:{title:"ADVANCED.SETTINGS.WYSIWYG"},beta:{title:"ADVANCED.SETTINGS.BETA_FEATURES"}},OPTIONS:{BROWSER_TRANSLATION:{choices:["Yes","No"],default:"Yes",type:"select"},AVAILABLE_LANGS:{choices:o.DEFAULT_CONTRIBUTION_LANGS,default:o.DEFAULT_CONTRIBUTION_LANGS,multiple:!0,type:"language"},FALLBACK_LANGS:{choices:o.DEFAULT_CONTRIBUTION_LANGS,default:o.DEFAULT_CONTRIBUTION_LANGS,multiple:!0,type:"language"},COMMUNITY_FILTERS:{choices:[{enable:!0,name:"query"}],ordered:!0,prefix:"WIDGET_TYPE_COMMUNITY-FILTER_",translate:!0,type:"select"},CONTENT_LIST_EXCERPT:{default:100,sub_type:"number",type:"input"},CONTENT_LIST_LINK_OPEN_NEW_TAB:{choices:["new_tab","same_tab"],default:"new_tab",type:"select",translate:!0},CONTENT_FIELDS:{choices:[{enable:!0,name:"author"},{enable:!0,name:"publication-date"},{enable:!0,name:"tags"},{enable:!0,name:"title"},{enable:!0,name:"excerpt"},{enable:!0,name:"metadata"},{enable:!0,name:"social"}],ordered:!0,prefix:"WIDGET_TYPE_CONTENT-LIST_",translate:!0,type:"select"},CONTENT_FILTERS:{choices:[{enable:!0,name:"query"},{enable:!0,name:"tags"},{enable:!0,name:"metadata"},{enable:!0,name:"author"},{enable:!0,name:"dates"},{enable:!0,name:"feature-feeds"}],ordered:!0,prefix:"WIDGET_TYPE_CONTENT-FILTER_",translate:!0,type:"select"},DIRECTORY_FILTERS:{choices:[{enable:!0,name:"query"},{enable:!0,name:"directory-tags"},{enable:!0,name:"metadata"}],ordered:!0,prefix:"WIDGET_TYPE_CONTENT-FILTER_",translate:!0,type:"select"},FILE_FIELDS:{choices:[{enable:!0,name:"thumbnail"},{enable:!0,name:"name"},{enable:!0,name:"tags"},{enable:!0,name:"description"}],ordered:!0,prefix:"FRONT.SETTINGS.",translate:!0,type:"select"},META_FIELDS:{choices:[{enable:!0,name:"author"},{enable:!0,name:"publication-date"},{enable:!0,name:"tags"},{enable:!0,name:"metadata"},{enable:!0,name:"social"}],ordered:!0,prefix:"WIDGET_TYPE_CONTENT-LIST_",translate:!0,type:"select"},META_SOCIAL_FIELDS:{choices:[{enable:!0,name:"like"},{enable:!0,name:"comment"},{enable:!0,name:"follow"}],ordered:!0,prefix:"WIDGET_TYPE_META-SOCIAL_",translate:!0,type:"select"},POST_FIELDS:{choices:[{enable:!0,name:"sharedInCommunities"},{enable:!0,name:"metadata"},{enable:!0,name:"content"},{enable:!0,name:"title"},{enable:!0,name:"dates"},{enable:!1,name:"attachments"},{enable:!1,name:"comments"}],ordered:!0,prefix:"WIDGET_TYPE_POST-LIST_",translate:!0,type:"select"},SEARCH_TABS:{choices:[{enable:!0,name:"all"},{enable:!0,name:"content"},{enable:!0,name:"users"},{enable:!0,name:"media"},{enable:!0,name:"directory"},{enable:!0,name:"drive"},{enable:!1,name:"sharepoint",requiredFeatures:["microsoft"]},{enable:!0,name:"community"},{enable:!0,name:"post"},{enable:!1,name:"zendesk",requiredFeatures:["zendesk"]}],ordered:!0,prefix:"SEARCH_PLUS_",suffix:"_TAB",translate:!0,type:"select"},SOCIAL_SETTINGS:{choices:[{enable:!0,name:"multiposting_allowed"}],ordered:!0,prefix:"SOCIAL_SETTINGS_",translate:!0,type:"select"},USER_BLOCK_DEFAULT_FIELD:{default:"primaryEmail",sub_type:"text",type:"input"},USER_BLOCK_USER_DIRECTORY_FIELD:{default:"organizations[primary=true]/title",sub_type:"text",type:"input"},WYSIWYG_PASTEPLAIN:{category:"wysiwyg",choices:["Yes","No"],default:"Yes",ordered:!1,type:"select"},WYSIWYG_TOOLBAR:{category:"wysiwyg",choices:(r={},a()(s.ConfigConstant.DEFAULT_FROALA_HTML_TOOLBAR,(function(e){var t={};switch(e){case"-":t[e]={icon:"subdirectory-arrow-left",name:"HORIZONTAL.SEPARATOR",unique:!1};break;case"|":t[e]={icon:"format-title",name:"VERTICAL.SEPARATOR",unique:!1};break;default:t[e]={icon:c.FroalaSettings.tools[e].icon,name:e.toUpperCase(),unique:!0}}r=angular.extend(r,t)})),r),dragAndDropType:"froala-toolbar",translationPrefix:"FRONT.FROALA.",type:"drag-and-drop"},IS_LAYOUT_V2_ENABLED:{category:"beta",default:!0,featureFlag:"layout-v2",disableDefaultValue:!0,isPlatformOnly:!0,descriptionKey:"PLATFORM_SETTINGS_LAYOUT_V2_DESCRIPTION",type:"boolean"},BLOCK_XSS_HTML_TAGS:{category:"beta",choices:["html_whitelist_all","html_whitelist_platform","html_whitelist_site"],default:"html_whitelist_all",type:"select",translate:!0}}};angular.module("Constants").constant("AdvancedSettingsConstant",l)},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(64),i=new r.a({path:"sheets"}),a=function(e){return i.get("/list?provider=excel&fileId=".concat(e))},o=function(e,t){return i.get("/charts/list?provider=excel&fileId=".concat(e,"&sheetId=").concat(t))},s=function(e,t,n,r,a){return i.get("/charts/image?provider=excel&fileId=".concat(t,"&sheetId=").concat(n,"&chartId=").concat(e,"&width=").concat(r,"&height=").concat(a,"&fittingMode=fit"))}},,function(e,t,n){"use strict";var r=n(497);n.d(t,"validateValues",(function(){return r.b}));n(710);t.default=r.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(77),i=n(189),a=n(191),o=n(161),s=n(304),c=Object(r.c)({shareToSocialNetworkDialog:i.d,shareToTeams:a.c,shareToSlack:o.c,shareContentDialog:s.d}),l=(i.c,a.b,o.b,s.c,i.b),u=(a.a,o.a);s.b},,,function(e,t,n){"use strict";var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(427),c="".concat("admin/communities","/").concat("creation-launcher"),l="".concat(c,"/CLOSE_GROUP_PICKER"),u="".concat(c,"/OPEN_GROUP_PICKER"),d="".concat(c,"/FETCH_GROUPS_LOADING"),p="".concat(c,"/FETCH_GROUPS_SUCCESS"),f="".concat(c,"/SET_GROUP_PICKER_QUERY"),g=function(){return function(e){e({type:l})}},m=function(){return function(e){e({type:u})}},v=function(){return function(e,t){var n,r=function(e){return e().admin.communities.communityCreationLauncher.groupPicker}(t),i=r.query,a=r.results,o=a["q-".concat(i)];if(o){var c=o.hasMore,l=o.loading;if(n=o.cursor,!c||l)return}e({payload:{query:i},type:d}),e(Object(s.b)({cursor:n,query:i})).then((function(t){var n=t.cursor,r=t.groups,a=r.map((function(e){return e.id}));e({payload:{groups:a,newCursor:n,query:i},type:p})}))}},h=function(e){var t=e.query;return function(){var e=o()(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({payload:{query:t},type:f});case 2:n(v());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=n(19),E=n.n(y),b=n(37),O=n(158),C=n(522),T={groupPicker:{results:{},open:!1,query:void 0}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return Object(b.a)(e,(function(e){var n=t.payload,r=e.groupPicker;switch(t.type){case O.a:case O.b:case O.c:Object.assign(e,T);break;case l:r.open=!1;break;case u:r.open=!0;break;case f:var i=n.query;r.query=i;break;case d:var a=n.query,o=Object(C.a)(a),s=r.results;s[o]?s[o].loading=!0:s[o]={cursor:void 0,groups:[],hasMore:!0,loading:!0};break;case p:var c,g=n.groups,m=n.newCursor,v=n.query,h=r.results,y=Object(C.a)(v),b=Boolean(m),S=h[y];Object.assign(S,{cursor:m,hasMore:b,loading:!1}),(c=S.groups).push.apply(c,E()(g))}}))};n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return S}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r="instance/FETCH_INSTANCE_SUCCESS",i="instance/FETCH_INSTANCE_LIST_SUCCESS"},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(43),i=n(87),a=n.n(i),o=n(508),s=n.n(o),c=n(224),l=n.n(c),u=Object(r.a)({domain:"metadata",initialState:{entities:{},families:{}},reducers:{fetchMetadataListSuccess:function(e,t){var n=t.payload;Object.assign(e.entities,a()(n.metadata,"uid"))},fetchMetadataFamiliesSuccess:function(e,t){var n=t.payload,r=a()(n.metadata,"uid"),i=s()(n.metadata,"familyKey");Object.assign(e.entities,r),Object.assign(e.families,l()(i,"uid"))}}}),d=u.actions,p=u.reducer},,,,,,,,,function(e,t){},function(e,t){},,,,,,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(0),a=n.n(i),o=n(873),s=function(e){var t=e.children,n=e.className;return a.a.createElement("nav",{className:n},a.a.createElement(o.a,{className:"side-navigation"},t))},c=n(3),l=n.n(c),u=n(16),d=n.n(u),p=n(18),f=n.n(p),g=n(14),m=n.n(g),v=n(32),h=n(80),y=n(15),E=n(8),b=n.n(E),O=n(59),C=n(125),T=n.n(C),S=function(e){var t=e.route,n=e.alternativeId,r=e.isSection,a=void 0!==r&&r,o=Object(O.b)("side-nav"),s=o.get,c=Object(i.useMemo)((function(){var e,r=n,i="";if(t&&(r=null===(e=t.legacyId)||void 0===e?void 0:e.replace(/\./g,"").replace("app","").replace("admin",""),t.params)){var o=Object.values(T()(t.params,["id","uid"]));if(o.length>0){var c=b()(o,1);i=c[0]}}return s({element:r,action:"".concat(i?"".concat(i,"-"):"").concat(a?"section":"link")})}),[t,n,s,a]);return c},I=n(163),_=function(e){var t=e.baseClassName,n=e.children,r=e.isOpen,s=void 0!==r&&r,c=e.dynamicIcon,l=void 0===c?"":c,u=e.id,p=void 0===u?"":u,g=e.icon,E=f()(e,["baseClassName","children","isOpen","dynamicIcon","id","icon"]),O=Object(y.c)(),C=O.translateKey,T=Object(i.useMemo)((function(){return a.a.Children.map(n,(function(e){if(Object(i.isValidElement)(e)){var t=e.props,n=t.route;return n}return null}))||[]}),[n]),_=S({alternativeId:p}),A=Object(I.b)({icon:l}),w=A.iconPath,D=l?w:g||void 0,L=T.reduce((function(e,t){return!!t&&(Object(h.k)(t)||e)}),!1),P=a.a.useState(s||L),N=b()(P,2),R=N[0],j=N[1],k=m()(t,"".concat(t,"__subitem"));return a.a.createElement(o.b,d()({},E,{className:k,emphasis:v.e.medium,isOpen:R,onClick:function(e){e.preventDefault(),j(!R)},icon:D,toggleButtonProps:{label:C("GLOBAL.TOGGLE")}},_),n)};_.displayName="SideNavigationItem";var A="side-navigation-item",w=function(e){var t=e.className,n=e.children,s=e.isOpen,c=void 0!==s&&s,u=e.route,p=e.dynamicIcon,g=void 0===p?"":p,E=e.linkProps,b=void 0===E?{}:E,O=e.icon,C=f()(e,["className","children","isOpen","route","dynamicIcon","linkProps","icon"]),T=Object(y.c)(),w=T.translateKey,D=Object(h.l)(),L=D.getUrl,P=D.redirect,N=D.usesReactRouter,R=Object(h.k)(u),j=Object(I.b)({icon:g}),k=j.iconPath,F=S({route:u}),U=Object(i.useMemo)((function(){return u&&L(u)||void 0}),[L,u]),M=m()(A,t),x=g?k:O||void 0,$=u||{},B=$.isExternal,W=void 0!==B&&B,G=Boolean(n);if(!G&&!U)return null;if(G)return a.a.createElement(_,d()({className:t,baseClassName:A,isOpen:c,icon:x},C),n);var Y=U?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b,{href:U,target:b.target||((null==u?void 0:u.isMigrated)&&!N?"_self":void 0)}):{};return a.a.createElement(o.b,d()({},C,{className:M,emphasis:v.e.medium,isSelected:R,linkProps:Y,icon:x,toggleButtonProps:{label:w("GLOBAL.TOGGLE")}},F,W?{}:{onClick:function(e){e.preventDefault(),u&&P(u)}}))};w.displayName="SideNavigationItem";var D=n(872),L=function(e){var t=e.children;return a.a.createElement(D.b,{className:"side-navigation-header"},t)};L.displayName="SideNavigationItem";var P=function(e){var t=e.children,n=e.header,r=e.isAsyncSection,o=void 0!==r&&r,s=e.id,c=e.className,l=Object(i.useRef)(null),u=S({alternativeId:s,isSection:!0}),p=Boolean(t);o&&(p=!1);var f=a.a.useState(p),g=b()(f,2),v=g[0],h=g[1],y=a.a.useState(o),E=b()(y,2),O=E[0],C=E[1],T=function(){O&&C(!1)},I=a.a.useCallback((function(){var e=l.current,t=e.childNodes,n=t.length,r=n>1;return o&&(r=n>0),r}),[l,o]);return Object(i.useLayoutEffect)((function(){if(l&&!O){var e=I();h(e),e||setTimeout((function(){var e=I();e&&h(e)}),100)}}),[l,h,O,o,I]),a.a.createElement("div",d()({className:m()("side-navigation-section",c),ref:l},u),v&&a.a.createElement(L,null,n),a.a.Children.map(t,(function(e){return a.a.isValidElement(e)?a.a.createElement(e.type,d()({},e.props,o?{onFinishedLoading:T}:{})):null})))};P.displayName="SideNavigationItem",n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return L})),n.d(t,"d",(function(){return P}))},function(e,t,n){"use strict";var r,i=n(11),a=n(70),o=n(62),s=n(42),c=n(250),l=n(192),u=n(186),d=n(57),p=n(9),f=n(110),g=n.n(f),m=Object(p.createSelector)([o.j],(function(e){return e.marketplace})),v=Object(p.createSelector)([m],(function(e){return e.extensions})),h=Object(p.createSelector)([v],(function(e){var t=[];return e.forEach((function(e){var n=g()(t,(function(t){return t.category===e.category}));n>=0?t[n].extensions.push(e):t.push({category:e.category,extensions:[e]})})),t})),y=c.a.translateObject,E=n(0),b=n.n(E),O=n(1),C=n(15),T=n(295),S=n(55),I=n(8),_=n.n(I),A=n(209),w=n.n(A),D=n(458),L=n.n(D);!function(e){e.ALREADY_INSTALLED="ALREADY_INSTALLED",e.INSTALL="INSTALL",e.UPDATE="UPDATE"}(r||(r={}));var P="marketplace-extension-card",N=function(e){var t=e.extension,n=e.extensionStatus,i=e.onInstall,a=Object(C.c)(),o=a.translateKey,s=a.translateObject,c=t.icon,l=t.name,u=t.description,d=t.loading,p=t.version,f=s(u);return b.a.createElement("div",{className:"".concat(P," lumx-spacing-padding-huge")},b.a.createElement("div",{className:"".concat(P,"__icon-wrapper lumx-spacing-padding-right-huge")},b.a.createElement("img",{alt:"",className:"".concat(P,"__icon"),src:s(c)||void 0})),b.a.createElement("div",{className:"".concat(P,"__details")},b.a.createElement("p",{className:"".concat(P,"__name lumx-typography-subtitle1")},s(l)),b.a.createElement("p",{className:"lumx-typography-overline lumx-color-font-dark-L2 lumx-spacing-margin-vertical-tiny"},p.number),b.a.createElement("p",{className:"".concat(P,"__description lumx-typography-caption lumx-spacing-margin-bottom lumx-color-font-dark-L2")},f?L()(f,{length:60}):""),b.a.createElement(O.FlexBox,{orientation:O.Orientation.horizontal,gap:O.Size.regular},b.a.createElement(O.Button,{disabled:n===r.ALREADY_INSTALLED||d,emphasis:O.Emphasis.medium,size:O.Size.s,onClick:i},o(d?"ADMIN.MARKETPLACE.EXTENSION.LOADING_INSTALL":"ADMIN.MARKETPLACE.EXTENSION.".concat(n))))))},R="marketplace-extension-type",j={installExtension:function(e){return function(t,n){var r=e.id,i=e.name,a=e.version,o=n().customer.id,c=a.id;return t(d.a.setExtensionIsLoading({versionId:c})),Object(u.h)({extensionId:r,organizationId:o,versionId:c}).then((function(){Object(s.d)({translate:{key:"ADMIN.MARKETPLACE.INSTALLATION_SUCCESS",replacements:{EXTENSION_NAME:y(i)}}}),t(d.a.setExtensionIsLoading({loading:!1,versionId:c})),t(d.a.setExtensionInstalledVersion({installed:e.version,versionId:c}))})).catch((function(){Object(s.b)({translate:{key:"ADMIN.MARKETPLACE.INSTALLATION_ERROR",replacements:{EXTENSION_NAME:y(i)}}})}))}},migrateExtension:function(e){return function(t,n){var r=e.id,i=e.name,a=e.version,o=n().customer.id,c=a.id;return t(d.a.setExtensionIsLoading({versionId:c})),Object(u.i)({extensionId:r,organizationId:o}).then((function(){Object(s.d)({translate:{key:"ADMIN.MARKETPLACE.INSTALLATION_SUCCESS",replacements:{EXTENSION_NAME:y(i)}}}),t(d.a.setExtensionIsLoading({loading:!1,versionId:c})),t(d.a.setExtensionInstalledVersion({installed:e.version,versionId:c}))})).catch((function(){Object(s.b)({translate:{key:"ADMIN.MARKETPLACE.INSTALLATION_ERROR",replacements:{EXTENSION_NAME:y(i)}}})}))}}},k=Object(i.connect)((function(){return{}}),j)((function(e){var t=e.extensionCategory,n=e.installExtension,i=e.migrateExtension,a=Object(C.c)(),o=a.pluralize,s=a.translateKey,c=t.category,l=t.extensions,u=l.length,d=Object(E.useState)(),p=_()(d,2),f=p[0],g=p[1],m=Object(E.useState)(),v=_()(m,2),h=v[0],y=v[1];Object(E.useEffect)((function(){g(h?l:l.slice(0,4))}),[l,h]);var T=function(e){var t=e.installed,n=e.version;return t?(null==t?void 0:t.id)===n.id?r.ALREADY_INSTALLED:r.UPDATE:r.INSTALL},S=function(e){return function(){var t=T(e);t===r.INSTALL?n(e):t===r.UPDATE&&i(e)}},I=function(e){return function(){e?(g(l),y(e)):(g(l.slice(0,4)),y(void 0))}};return b.a.createElement("div",{className:"".concat(R," pv++")},b.a.createElement("div",{className:"".concat(R,"__header")},b.a.createElement("p",{className:"lumx-typography-subtitle2"},s("ADMIN.MARKETPLACE.EXTENSION_TYPE.".concat(w()(c),"_NAME"))),b.a.createElement(O.FlexBox,{hAlign:O.Alignment.center,fillSpace:!0},b.a.createElement("p",{className:"lumx-typography-caption lumx-color-font-dark-L2"},o("ADMIN.PLATFORM.EXTENSIONS.COUNT",u).replace("%NB%",u.toString())),b.a.createElement(O.FlexBox,{vAlign:O.Alignment.right,fillSpace:!0},u>4&&!h&&b.a.createElement(O.Button,{emphasis:O.Emphasis.medium,size:O.Size.s,onClick:I(c),className:"lumx-spacing-margin-right-regular"},s("GLOBAL.SEE_ALL")),h&&b.a.createElement(O.Button,{emphasis:O.Emphasis.medium,size:O.Size.s,onClick:I(),className:"lumx-spacing-margin-right-regular"},s("GLOBAL.BACK"))))),b.a.createElement("div",{className:"".concat(R,"__content")},b.a.createElement(O.FlexBox,{orientation:O.Orientation.horizontal,hAlign:O.Alignment.center,wrap:!0},f&&f.map((function(e){return b.a.createElement("div",{key:e.version.id,className:"".concat(R,"__content--item lumx-spacing-margin-top-big lumx-spacing-margin-right-huge"),style:{maxWidth:"368px",flexBasis:"100%"}},b.a.createElement(N,{extension:e,extensionStatus:T(e),onInstall:S(e)}))})))))}));n.d(t,"a",(function(){return U}));var F={loadMoreAvailableExtensions:function(){return function(e,t){e(d.a.setIsLoadingMoreAvailableExtensions());var n=Object(o.k)(t()),r=Object(l.b)(t()),i=m(t()),a=i.cursor;return Object(u.c)(n,r,a).then((function(t){var n=t.data,r=n.items,i=n.cursor,a=n.more;e(d.a.addAvailableExtensions({extensions:r,more:a,cursor:i})),e(d.a.setIsLoadingMoreAvailableExtensions(!1))})).catch((function(){console.log("Error while loading available extensions")}))}}},U=Object(i.connect)((function(e){var t=m(e),n=t.loading,r=t.more,i=h(e),s=Object(o.c)(e),c=s.id,l=Object(a.a)("platform-extensions")(e);return{extensionCategories:i,hasMoreExtensions:r,loading:n,organizationId:c,isExtensionsFeatureEnabled:l}}),F)((function(e){var t=e.extensionCategories,n=e.hasMoreExtensions,r=e.loading,i=e.isExtensionsFeatureEnabled,a=e.organizationId,o=e.loadMoreAvailableExtensions,s=Object(C.c)(),c=s.translateKey;return Object(E.useEffect)((function(){i&&void 0===n&&!r&&o()}),[n,i,r,o,a]),i?b.a.createElement(S.c,{id:"marketplace-admin",header:b.a.createElement(S.a,{title:c("ADMIN.NAV.MARKETPLACE")}),className:"marketplace lumx-spacing-padding-horizontal-huge"},t.map((function(e){return b.a.createElement(k,{key:e.category,extensionCategory:e})})),r&&!t.length&&b.a.createElement(O.Progress,{className:"centered-loader"}),n&&b.a.createElement(T.a,{className:"lumx-spacing-margin-top-big",isLoading:r,label:c("ADMIN.EXTENSIONS.SEE_MORE"),onClick:o})):null}))},function(e,t,n){"use strict";var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(0),c=n.n(s),l=n(15),u=n(93),d=n(290),p=function(e){var t=e.extensionId,n=e.updateProperties,r=o()(e,["extensionId","updateProperties"]),a=Object(l.c)(),s=a.translateKey;return c.a.createElement("div",{className:"remote-component"},c.a.createElement("span",{className:"ls-subheader"},s("ADMIN.EXTENSIONS.GLOBAL_SETTINGS")),t&&c.a.createElement(d.a,i()({extensionId:t,componentType:u.b.global_settings,exportProp:function(e){t&&n(e,t)}},r)))};n.d(t,"a",(function(){return p}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=e.id,n=e.localizedName,r=e.name,a=e.type,o=e.uid,s=N()(e,["id","localizedName","name","type","uid"]);return i({},s,{id:"".concat(t||o).concat(a?"-".concat(a):""),localizedName:n||r,type:a,uid:"".concat(o||t).concat(a?"-".concat(a):"")})}))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t.toLowerCase()){case"article":case"content":var r=M()(e,"article",{});return{authorDetails:r.authorDetails,cloudSearchUrl:e.url,comments:r.comments,customContentTypeDetails:M()(r,"customContentTypeDetails",{}),instanceDetails:r.instanceDetails,likes:r.likes,metadataDetails:r.metadataDetails||[],publicationDate:e.metadata.createTime,modificationDate:e.metadata.updateTime,slug:r.slug,snippet:M()(e,"snippet",{}),thumbnail:r.thumbnail,title:e.title,url:oe(r.url)};case"community":var i=M()(e,"community",{});return{cloudSearchUrl:e.url,instanceDetails:i.instanceDetails,memberCount:i.memberCount,members:i.members,snippet:M()(e,"snippet",{}),tagz:i.tagz,thumbnail:i.thumbnail,title:e.title,url:oe(i.url)};case"directoryentry":var a=M()(e,"directoryEntry",{});return{cloudSearchUrl:e.url,instanceDetails:a.instanceDetails,metadataDetails:a.metadataDetails||[],snippet:M()(e,"snippet",{}),thumbnail:a.thumbnail,title:e.title,url:oe(a.link)};case"google":var o=M()(e,"metadata",{}),s=o.fields,c=j()(s,{name:"startTime"}),l=j()(s,{name:"endTime"}),u=j()(s,{name:"shareMetadata"}),d=j()(s,{name:"location"}),p=M()(u,"objectValues.values[0].properties[0].enumValues.values[0]");return{createTime:o.createTime,driveMetadata:{location:F()(M()(d,"enumValues.values",[])),shareScope:p},endDate:F()(M()(l,"timestampValues.values",[])),mimeType:o.mimeType,snippet:M()(e,"snippet",{}),source:e.source,startDate:F()(M()(c,"timestampValues.values",[])),title:e.title,url:e.url};case"media":var f=M()(e,"media",{});return{cloudSearchUrl:e.url,instanceDetails:f.instanceDetails,snippet:M()(e,"snippet",{}),tagsDetails:f.tagsDetails,thumbnail:f.thumbnail,title:e.title,url:f.url};case"post":var g=M()(e,"post",{}),m=M()(g,"parentContentDetails",{});return{attachmentsCount:g.attachmentsCount,authorDetails:g.authorDetails,cloudSearchUrl:e.url,comments:g.comments||0,community:m.title,instanceDetails:g.instanceDetails,likes:g.likes||0,postType:g.postType,publicationDate:e.metadata.createTime,score:M()(g,"score.total"),snippet:M()(e,"snippet",{}),tagsDetails:g.tagsDetails,tagz:g.tagz,title:e.title,url:oe(g.url)};case"third-party":var v=M()(e,"metadata",{});return{createTime:v.createTime,fields:Object(ee.a)(e.source,v.fields,n),snippet:M()(e,"snippet",{}),source:e.source,thumbnail:v.thumbnailUrl,title:e.title,url:e.url};case"user":var h=M()(e,"user",{}),y=M()(h,"apiProfile",{});return{cloudSearchUrl:e.url,email:y.primaryEmail||h.email,firstName:h.firstName,id:h.id,jobTitle:M()(y,["organizations",0,"title"]),lastName:h.lastName,phone:M()(y,["phones",0,"value"]),url:oe(h.url)};default:return e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!t)return[];var n=z()(e,(function(e){return void 0!==e}));return[{filters:Y()(n,(function(e,t){return{count:e.count,kind:"string",name:t,values:e.value}}))}]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===e.length||0===t.length?e:Y()(e,(function(e){var n=j()(t,{uid:M()(e,"metadata.sourceUid").toLowerCase()});return i({},e,{source:n})}))}function l(e){return{__html:Object(ne.m)(e.snippet,e.matchRanges)}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUid,n=(void 0===t&&J.TAB_ALL.uid,e.sources),r=void 0===n?[]:n,i=(e.type,[J.TAB_ALL]);return r&&0!==r.length?[].concat(i,w()(r)):i}function d(e){if(e.uid===J.TAB_ALL.uid)return null;var t=e.resultsCount,n=e.kind!==J.RESULT_TYPE.GOOGLE&&t>0;return"".concat(Object(te.h)(e.localizedName)).concat(n?" (".concat(t,")"):"")}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length)return{};var t=Y()(e,(function(e){var t=e.buckets,n=e.localizedOperatorName,r=e.operatorName,i=Y()(t,(function(e){return K()(e,["count","label","value"])}));return{choices:i,localizedName:n,name:r}}));return X()(Y()(e,"operatorName"),t)}function f(e){var t=Object.values(J.LUMAPPS_TYPE);return j()(t,(function(t){return void 0!==e[t]}))}function g(e){var t=M()(e,"source",{});if(I(t))return"";if(S(t))return J.ICON.LUMAPPS;if(!E(e)){var n="GOOGLE_".concat(M()(t,"template","").toUpperCase());return J.ICON[n]||J.ICON.FILE}var r=e.mimeType||M()(e,"metadata.mimeType");if(!r)return J.ICON.FILE;switch(r.toLowerCase()){case"application/vnd.google-apps.audio":case"audio/mp3":case"audio/mpeg":return J.ICON.AUDIO;case"application/vnd.google-apps.file":case"application/x-rar":case"application/zip":return J.ICON.FILE;case"application/vnd.google-apps.folder":return J.ICON.FOLDER;case"application/vnd.google-apps.document":return J.ICON.GOOGLE_DOCS;case"application/vnd.google-apps.drawing":return J.ICON.GOOGLE_DRAWING;case"application/vnd.google-apps.form":return J.ICON.GOOGLE_FORMS;case"application/vnd.google-apps.spreadsheet":return J.ICON.GOOGLE_SHEETS;case"application/vnd.google-apps.presentation":return J.ICON.GOOGLE_SLIDES;case"application/vnd.google-apps.photo":case"image/jpg":case"image/jpeg":case"image/gif":case"image/png":case"image/x-photoshop":return J.ICON.IMAGE;case"application/vnd.ms-excel":case"application/vnd.ms-excel.addin.macroEnabled.12":case"application/vnd.ms-excel.sheet.macroEnabled.12":case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":case"application/vnd.ms-excel.template.macroEnabled.12":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return J.ICON.MICROSOFT_EXCEL;case"application/vnd.ms-powerpoint":case"application/vnd.ms-powerpoint.addin.macroEnabled.12":case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":case"application/vnd.ms-powerpoint.slide.macroEnabled.12":case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":case"application/vnd.ms-powerpoint.template.macroEnabled.12":case"application/vnd.openxmlformats-officedocument.presentationml.slide":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":case"application/vnd.openxmlformats-officedocument.presentationml.template":return J.ICON.MICROSOFT_POWERPOINT;case"application/msword":case"application/vnd.ms-word.document.macroEnabled.12":case"application/vnd.ms-word.template.macroEnabled.12":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return J.ICON.MICROSOFT_WORD;case"application/pdf":return J.ICON.PDF;case"application/vnd.google-apps.video":case"video/avi":case"video/mov":case"video/mp4":case"video/mpeg":return J.ICON.VIDEO;default:return J.ICON.GOOGLE_DRIVE}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&0!==e.length?Y()(e,(function(e){var t=e.operatorName,n=e.localizedOperatorName;return{label:n,value:"relevance"===t?null:t}})):[]}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.concat([J.TAB_ALL]);return t.map((function(e){var t=e.uid,n=N()(e,["uid"]);return i({},n,{id:t,uid:t})}))}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},n=[];return e.forEach((function(e){$()([Z.TAB_TYPES.EXTERNAL,Z.TAB_TYPES.IFRAME],e.type)&&(t[e.uid]=e),n.push(e)})),{customTabs:t,tabs:n}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uid;return $()(ae,t)}function E(e){return M()(e,"source.template")===Q.TEMPLATE_TYPE.GOOGLE_DRIVE}function b(e){return y({uid:e})||C(e)||O(e)}function O(e){return e.includes(Z.TAB_TYPES.IFRAME)}function C(e){return e.includes(Z.TAB_TYPES.EXTERNAL)}function T(e,t){if(!e)return!1;var n=e.find((function(e){return e.name===t}));return!!n&&n.enable}function S(e){return e.kind===J.RESULT_TYPE.LUMAPPS}function I(e){return e.kind===J.RESULT_TYPE.THIRD_PARTY}function _(e,t){if(!W()(e))return{};if(!W()(t))return i({},e);var n=t.map((function(e){return e.uid}));return e.map((function(e){var r=n.indexOf(e.uid),a=r>-1&&Boolean(t[r].resultsCount)&&!e.resultsCount;return i({},e,{},a&&{resultsCount:t[r].resultsCount})}))}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return C})),n.d(t,"r",(function(){return O})),n.d(t,"s",(function(){return S})),n.d(t,"v",(function(){return I})),n.d(t,"u",(function(){return T})),n.d(t,"t",(function(){return se})),n.d(t,"w",(function(){return _}));var A=n(19),w=n.n(A),D=n(3),L=n.n(D),P=n(18),N=n.n(P),R=n(21),j=n.n(R),k=n(51),F=n.n(k),U=n(4),M=n.n(U),x=n(17),$=n.n(x),B=n(109),W=n.n(B),G=n(28),Y=n.n(G),H=n(125),K=n.n(H),V=n(336),z=n.n(V),q=n(259),X=n.n(q),Q=n(221),Z=n(364),J=n(61),ee=n(333),te=n(5),ne=n(31),re=Z.LegacySearchConstant.TABS,ie=K()(re,["drive","lumwork","sharepoint","zendesk"]),ae=Y()(ie,"id"),oe=function(e){if(e&&""!==e){var t=window.location.pathname,n=-1===t.indexOf("/a/"),r=e.indexOf("/a/")>-1,i=0===e.indexOf("http://")||0===e.indexOf("https://");if(!n&&!r&&!i){var a=function(e){var t=e.split("/"),n="",r=-1===e.indexOf("/a/");return r?n="/".concat(t[1]||""):(n="/a",t[2]&&(n="".concat(n,"/").concat(t[2]))),n}(t);return"".concat(a).concat(e)}}return e},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return!1;var t=Object(ne.a)(e);return t&&t.length>0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"h",(function(){return _})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return S})),n.d(t,"d",(function(){return I})),n.d(t,"f",(function(){return A})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return C}));var r,i,a=n(3),o=n.n(a),s=n(198),c=n(83),l=n(17),u=n.n(l),d=n(82),p=n.n(d),f=n(354),g=n.n(f),m=n(217),v=n.n(m),h=n(9);!function(e){e.EVERY="every",e.SOME="some"}(i||(i={}));var y=(r={},o()(r,i.EVERY,g.a),o()(r,i.SOME,v.a),r),E=function(e){return e.permissions||{}},b=Object(h.createSelector)(E,(function(e){return Boolean(e.isSuperAdmin)})),O=Object(h.createSelector)(E,(function(e){return e.authorizations||{}})),C=Object(h.createSelector)(E,(function(e){return e.canEditOnlyOwnContentAuthorizations||{}})),T=Object(h.createSelector)(E,(function(e){return e.instancesSuperAdmin})),S=Object(h.createSelector)(b,s.a,T,(function(e,t,n){return e||u()(n,t)})),I=Object(h.createSelector)(O,(function(e){return Object.keys(e)})),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{matches:i.EVERY};return Object(h.createSelector)(S,O,(function(n,r){if(n)return!0;if(e){if(!p()(e))return Boolean(r[e]);var i=t.matches,a=y[i];return a(e,(function(e){return r[e]}))}return!1}))},A=Object(h.createSelector)(c.c,(function(e){return e.isReseller}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(16),i=n.n(r),a=n(18),o=n.n(a),s=n(14),c=n.n(s),l=n(0),u=n.n(l),d=n(1),p=function(e){var t=e.className,n=e.elementRef,r=e.element,a=e.children,s=o()(e,["className","elementRef","element","children"]),l=null!=r?r:{},p=l.src,f=void 0===p?"":p,g=l.alt,m=l.title,v=l.isLoading,h=l.onClick;return u.a.createElement("div",i()({},s,{ref:n,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){h&&(e.stopPropagation(),h(f))})),onKeyDown:function(e){!h||13!==e.keyCode&&32!==e.keyCode||(e.stopPropagation(),h(f))},role:"button",tabIndex:0,className:c()(t,"wrex-content-block","wrex-content-image")}),v?u.a.createElement("div",null,u.a.createElement(d.Progress,null)):u.a.createElement(d.Thumbnail,{image:f,alt:g||"",title:m,contentEditable:!1}),a)};p.displayName="image"},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(16),i=n.n(r),a=n(8),o=n.n(a),s=n(18),c=n.n(s),l=n(0),u=n.n(l),d=n(2),p=n(27),f=n.n(p),g=n(1),m=n(12),v=n(5),h=function(e){var t=e.menuOptions,n=c()(e,["menuOptions"]),r=Object(l.useState)(!1),a=o()(r,2),s=a[0],d=a[1],p=Object(l.useRef)(null),h=function(e){e.onSelect(),d(!1)},y=function(){d(!s)};return u.a.createElement(u.a.Fragment,null,u.a.createElement(g.IconButton,i()({ref:p,emphasis:g.Emphasis.low,icon:m.V,onClick:y,label:""},n)),u.a.createElement(g.Dropdown,{closeOnClickAway:!0,closeOnEscape:!0,anchorRef:p,isOpen:s,onClose:y},u.a.createElement(g.List,{isClickable:!0},!f()(t)&&t.map((function(e){return u.a.createElement(g.ListItem,{key:e.labelKey,before:e.icon,size:g.Size.tiny,onItemSelected:function(){return h(e)}},Object(v.h)(e.labelKey))})))))};h.propTypes={menuOptions:d.arrayOf(d.shape({icon:d.element,labelKey:d.string,onSelect:d.func})).isRequired}},function(e,t,n){"use strict";var r,i,a=n(219),o=n.n(a),s=n(18),c=n.n(s),l=n(8),u=n.n(l),d=n(23),p=[/\*/g,/=/g,/-/g,/\+/g,/\./g,/\[/g,/\|/g,/>/g,/#/g,/`/g,/_/g,/~/g,/!/g],f=function(e){return function(t){var n=t.text,r=c()(t,["text"]),i=function(e){return p.reduce((function(e,t){return e.replace(t,"\\$&")}),e)}(n);return i.trim().length?Object.entries(r).reduce(function(e){return function(t,n){var r=u()(n,2),i=r[0],a=r[1],o=e.marks[i];return a&&o?t.replace(/(^\s*)/,"$1".concat(o)).replace(/(\s*)$/,"".concat(o,"$1")):t}}(e),i):i}},g=function(e,t){return t.map(e).join("")},m=n(3),v=n.n(m),h=n(19),y=n.n(h),E=n(362),b=n.n(E),O=n(592),C=n.n(O),T=n(807),S=n.n(T),I=n(677),_=n.n(I),A=n(418),w=n(482),D=n(487),L=n(486),P=n(483),N=n(238),R=n(376),j=n(372),k=n(484),F=n(481),U=n(485),M=n(97),x=n(426),$=n(488),B=n(329),W=function(e){return function(t,n){return n.children.map((function(n,r){if(!d.b.isElement(n))return t(n);var i=e(r),a=_()(" ",i.length);return g(t,n.children).split("\n").map((function(e,t){return 0===t?i+e:a+e})).join("\n")})).join("\n")}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i=g(n,r.children);return t||i.trim().length?e+i:i}},Y={marks:(r={},v()(r,N.c.displayName,"_"),v()(r,N.a.displayName,"**"),v()(r,N.d.displayName,"~~"),r),elements:(i={},v()(i,A.a.displayName,G("\n")),v()(i,w.a.displayName,G("# ")),v()(i,D.a.displayName,G("## ")),v()(i,L.a.displayName,G("### ")),v()(i,$.a.displayName,G("\n---",!0)),v()(i,P.a.displayName,(function(e,t){var n=t,r=n.src,i=n.alt,a=n.title,o=void 0===a?"":a;return"\n![".concat(i,"](").concat(r).concat(o&&' "'.concat(o,'"'),")")})),v()(i,N.b.displayName,(function(e,t){return"`".concat(t.children.map(e).join(""),"`")})),v()(i,R.a.displayName,(function(e,t){var n=t,r=n.href;return"[".concat(t.children.map(e).join(""),"](").concat(r,")")})),v()(i,j.a.displayName,W((function(){return"- "}))),v()(i,k.a.displayName,W((function(e){return"".concat(e+1,". ")}))),v()(i,F.a.displayName,(function(e,t){var n=t.children.map(e).join(""),r=n.trim().split("\n").map((function(e,t){return t>0?"  ".concat(e):e})).join("\n");return"> ".concat(r)})),v()(i,U.a.displayName,(function(e,t){var n=b()(t.children,(function(e){return Object(M.h)(N.b.displayName)(e)?e.children:[e]})).map(e).join("").trim();return"```\n".concat(n,"\n```")})),v()(i,x.d.displayName,(function(e,t){var n=" | ",r=C()(t.children,Object(M.h)(x.f.displayName)),i=u()(r,2),a=u()(i[0],1),o=a[0],s=u()(i[1],1),c=s[0],l=b()(o.children,(function(e){return e.children})),d=l.map(e).join(n),p=S()(l.length,(function(){return"---"})).join(n),f=c?c.children.map((function(t){return t.children.map(e).join(n)})):[];return"\n".concat([d,p].concat(y()(f)).map((function(e){return"| ".concat(e," |")})).join("\n"))})),v()(i,B.a.displayName,(function(e,t){return"@[".concat(t.user.fullName.replace(/ /g,"-"),":").concat(t.user.id,"]")})),i),inlineElements:[N.b.displayName,R.a.displayName,B.a.displayName]},H=function(e,t){var n=o()(Y,t),r=function(e){var t=f(e);return function n(r){if(d.h.isText(r))return t(r);var i=e.elements[r.type];if(!i)return g(n,r.children);var a=i(n,r);return e.inlineElements.includes(r.type)?a:"\n".concat(a)}}(n);return g(r,e).trim()};n.d(t,"a",(function(){return H}))},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(250),o=n(8),s=n.n(o),c=n(558),l=n(804),u=n.n(l),d=n(165),p={pluralize:function(e){return function(t,n){var r=e.preferredLanguage,i=Object(d.b)(r),a=p.translateKey(e)(t)||"";try{var o=JSON.parse(a),s=c.a[i](n);return o[s]||o.other}catch(e){}return""}},pluralizeObject:function(e){return function(t,n){var r=e.preferredLanguage,i=Object(d.b)(r),a=c.a[i](n,!0);return t[a]||t.other||""}},translateKey:function(e){return function(t,n){var r,i,a=e.preferredLanguage,o=e.translations,s=Object(d.b)(n||a);return null!==(r=null==o||null===(i=o[s])||void 0===i?void 0:i[t])&&void 0!==r?r:t}},translateObject:function(e){return function(t,n){var r,i,a,o;if(!t)return null;var s=e.preferredLanguage,c=Object(d.b)(s),l=Object(d.a)(),u=null!==(r=null!==(i=null!==(a=null!==(o=t&&n&&t[n])&&void 0!==o?o:t&&t[c])&&void 0!==a?a:t&&t[l])&&void 0!==i?i:Object.values(t)[0])&&void 0!==r?r:null;return u}},translateAndReplace:function(e){return function(t,n,r){var i=p.translateKey(e)(t,r);return u()(n).reduce((function(e,t){var n=s()(t,2),r=n[0],i=n[1];return e.replace(new RegExp("%".concat(r.toUpperCase(),"%"),"g"),"".concat(i))}),i)}},translate:function(e){return function(t,n){return Object(d.d)(t)?p.translateKey(e)(t,n):Object(d.e)(t)?p.translateObject(e)(t,n):Object(d.c)(t)?p.translateAndReplace(e)(t.key,t.replacements,n):null}}},f=n(371);n.d(t,"a",(function(){return g}));var g=function(){var e=i.a.useContext(f.a);return i.a.useMemo((function(){return e&&e.loaded?{pluralize:p.pluralize(e),translateKey:p.translateKey(e),translateObject:p.translateObject(e),translateAndReplace:p.translateAndReplace(e),translate:p.translate(e),pluralizeObject:p.pluralizeObject(e)}:{pluralize:a.a.pluralize,translateKey:a.a.translateKey,translateObject:a.a.translateObject,translateAndReplace:a.a.translateAndReplace,translate:a.a.translate,pluralizeObject:a.a.pluralizeObject}}),[e])}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.selectUserSpace="selectUserSpace",e.prepareMessage="prepareMessage"}(r||(r={}))},function(e,t,n){"use strict";function r(){return{Accept:"application/json, text/plain, */*",Authorization:"Bearer ".concat(Object(U.d)()),"Content-Type":"application/json; charset=UTF-8"}}function i(e){return a.apply(this,arguments)}function a(){return a=l()(s.a.mark((function e(t){var n,i,a,o,c,l,u,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.payload,a=void 0===i?{}:i,o=t.config,c=void 0===o?{}:o,l=c.headers,u=F()(c,["headers"]),d=Object.assign(r(),l),p=Object.assign({body:a instanceof File?a:JSON.stringify(a),credentials:"same-origin",headers:d,method:"POST"},u),e.next=6,fetch(n,p);case 6:return e.next=8,e.sent.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}var o=n(6),s=n.n(o),c=n(10),l=n.n(c),u=n(22),d=n.n(u),p=n(20),f=n.n(p),g=n(24),m=n.n(g),v=n(25),h=n.n(v),y=n(29),E=n.n(y),b=n(26),O=n.n(b),C=n(0),T=n.n(C),S=n(2),I=n(401),_=n.n(I),A=n(19),w=n.n(A),D=n(63),L=n.n(D),P=n(28),N=n.n(P),R=n(5),j=n(36),k=n(18),F=n.n(k),U=n(49),M=function(){function e(t){var n=t.files,r=void 0===n?[]:n,i=t.getUploadSettings,a=void 0===i?{}:i;d()(this,e),this._files=[],this._getUploadSettings=a,this.addFiles(r)}var t,n;return f()(e,[{key:"_getUploadConfig",value:(n=l()(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=L()(this._getUploadSettings),Object.assign(r,{fileName:n,lang:Object(R.a)(),success:"/upload"}),a={payload:r,url:"/_ah/api/lumsites/v1/document/uploadUrl/get"},e.prev=4,e.next=7,i(a);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),Object(j.b)(Object(R.h)("FILE_UPLOAD_ERROR")),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(e){return n.apply(this,arguments)})},{key:"addFiles",value:function(e){var t;if(e instanceof FileList)(t=this._files).push.apply(t,w()(Array.from(e)));else if(Array.isArray(e)){var n;(n=this._files).push.apply(n,w()(e))}else this._files.push(e)}},{key:"setGetUploadSettings",value:function(e){this._getUploadSettings=e}},{key:"upload",value:function(){var t=this;return Promise.all(N()(this._files,function(){var n=l()(s.a.mark((function n(r){var i,a,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._getUploadConfig(r);case 2:return i=n.sent,a=i.httpMethod,o=i.uploadUrl,n.abrupt("return",e._startUpload({file:r,method:a,url:o}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()))}}],[{key:"_startUpload",value:(t=l()(s.a.mark((function e(t){var n,r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.url,a=t.method,o=void 0===a?"POST":a,c={config:{headers:{"Content-Range":"bytes 0-".concat(n.size-1,"/").concat(n.size),"Content-Type":n.type},method:o},payload:n,url:r},e.prev=2,e.next=5,i(c);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),Object(j.b)(Object(R.h)("FILE_UPLOAD_ERROR")),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(e){return t.apply(this,arguments)})}]),e}(),x=function(e){function t(e){var n;return d()(this,t),n=m()(this,h()(t).call(this,e)),n.state={id:_()("document_upload_form_")},n.selectFiles=n.selectFiles.bind(E()(n)),n.upload=n.upload.bind(E()(n)),n}var n;return O()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this.props.onRef;e(this)}},{key:"componentWillUnmount",value:function(){var e=this.props.onRef;e(void 0)}},{key:"upload",value:(n=l()(s.a.mark((function e(){var t,n,r,i,a,o,c,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInputElement(),n=t.files,r=this.props,i=r.onChange,a=r.onStatusChange,o=r.parentPath,c={parentPath:o},l=new M({files:n,getUploadSettings:c}),this.clearFilesInput(),a({status:"PENDING"}),e.next=8,l.upload();case 8:return u=e.sent,a({status:"DONE"}),i(),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"clearFilesInput",value:function(){var e=this.getInputElement();e.value=""}},{key:"getInputElement",value:function(){var e=this.state.id;return document.getElementById(e)}},{key:"selectFiles",value:function(){this.getInputElement().click()}},{key:"render",value:function(){var e=this.state.id,t=this.props.multiple;return T.a.createElement("form",{className:"document-uploader__form",encType:"multipart/form-data",method:"post"},T.a.createElement("input",{id:e,multiple:t,name:"files[]",type:"file",onChange:this.upload}))}}]),t}(C.PureComponent);x.propTypes={multiple:S.bool,onChange:S.func.isRequired,onRef:S.func.isRequired,onStatusChange:S.func.isRequired,parentPath:S.string.isRequired},x.defaultProps={multiple:!1},n.d(t,"a",(function(){return x}))},function(e,t,n){"use strict";var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(22),c=n.n(s),l=n(20),u=n.n(l),d=n(24),p=n.n(d),f=n(25),g=n.n(f),m=n(29),v=n.n(m),h=n(26),y=n.n(h),E=n(0),b=n.n(E),O=n(2),C=n(63),T=n.n(C),S=n(291),I=n(5),_=n(226),A=n(36),w=function(e){function t(e){var n;return c()(this,t),n=p()(this,g()(t).call(this,e)),n._INITIAL_STATE={loading:!1},n.state=T()(n._INITIAL_STATE),n.handleClose=n.handleClose.bind(v()(n)),n.handleValidate=n.handleValidate.bind(v()(n)),n}var n;return y()(t,e),u()(t,[{key:"handleClose",value:function(){var e=this.props.onClose;this.setState(T()(this._INITIAL_STATE)),e()}},{key:"handleValidate",value:(n=o()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.onValidate,e.next=3,this.delete();case 3:this.setState(T()(this._INITIAL_STATE)),t();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"delete",value:function(){var e=this.props,t=e.docPath,n=e.type;return this.setState({loading:!0}),Object(_.d)(t).then((function(){Object(A.d)(Object(I.h)("FRONT.DOCUMENT.DELETE.".concat(n,".SUCCESS")))}),(function(){Object(A.b)(Object(I.h)("FRONT.DOCUMENT.DELETE.".concat(n,".ERROR")))}))}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.open,r=this.state.loading;return b.a.createElement(S.a,{description:"WIDGET_TYPE_MEDIA_DELETE_DESCRIPTION",isLoading:r,isOpen:n,title:"WIDGET_TYPE_MEDIA_DELETE",onClose:t,onValidate:this.handleValidate})}}]),t}(E.PureComponent);w.propTypes={canChangeLanguage:O.bool,docPath:O.string.isRequired,onClose:O.func.isRequired,onValidate:O.func.isRequired,open:O.bool.isRequired,type:O.string.isRequired},w.defaultProps={canChangeLanguage:!1},n.d(t,"a",(function(){return w}))},function(e,t,n){"use strict";var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(22),c=n.n(s),l=n(20),u=n.n(l),d=n(24),p=n.n(d),f=n(25),g=n.n(f),m=n(29),v=n.n(m),h=n(26),y=n.n(h),E=n(0),b=n.n(E),O=n(2),C=n(63),T=n.n(C),S=n(51),I=n.n(S),_=n(328),A=n(5),w=n(226),D=n(36),L="name",P=function(e){function t(e){var n;c()(this,t),n=p()(this,g()(t).call(this,e));var r=Object(w.b)(e.media,!0),i=r.name;return n._INITIAL_STATE={documentName:i,inputLanguage:Object(A.a)(),loading:!1},n.state=T()(n._INITIAL_STATE),n.handleClose=n.handleClose.bind(v()(n)),n.handleValidate=n.handleValidate.bind(v()(n)),n}var n;return y()(t,e),u()(t,[{key:"handleClose",value:function(){var e=this.props.onClose;this.setState(T()(this._INITIAL_STATE)),e()}},{key:"handleValidate",value:(n=o()(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=this.props.onValidate,e.next=4,this.saveDocument({name:n});case 4:r();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"saveDocument",value:function(e){var t=this,n=e.name,r=this.props,i=r.media,a=r.type,o=I()(i.content);return o.name=n,i.content=[o],this.setState({loading:!0}),Object(w.e)(i).then((function(){Object(D.d)(Object(A.h)("FRONT.DOCUMENT.RENAME.".concat(a,".SUCCESS")))}),(function(){Object(D.b)(Object(A.h)("FRONT.DOCUMENT.RENAME.".concat(a,".ERROR")))})).finally((function(){t.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.documentName,n=e.loading,r=this.props.canChangeLanguage;return b.a.createElement(_.a,{fullWidth:!0,canChangeLanguage:r,label:"FRONT.MEDIA_PICKER.DETAIL.MEDIA_NAME",loading:n,min:1,mustDiffer:!0,name:L,title:"FRONT.WIDGET_FILE_LIST.SETTINGS.RENAME_FILE",value:t,onClose:this.handleClose,onValidate:this.handleValidate})}}]),t}(E.PureComponent);P.propTypes={canChangeLanguage:O.bool,media:O.object.isRequired,onClose:O.func.isRequired,onValidate:O.func.isRequired,type:O.string.isRequired},P.defaultProps={canChangeLanguage:!1},n.d(t,"a",(function(){return P}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return d}));var i=n(3),a=n.n(i),o=n(45),s=(n(196),n(100)),c=n(58),l=n(124),u=new o.c({path:"organizations",apiVersion:"v2"}),d=function(e){return u.postCacheFirst("".concat(e.organizationId,"/cloudsearch/suggest"),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{callId:Object(l.a)()}),c.a.MEMORY,s.a.HIGH).then((function(e){var t=e.data.items,n=void 0===t?[]:t;return{items:n}}))}},,,,,function(e,t,n){"use strict";function r(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):e&&(e.current=t)}))}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){o=e.getFroala}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n(33),a=n.n(i),o=a.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),i=function(){var e=window.location.search,t=new URLSearchParams(e);return Boolean("true"===t.get(r.k))}},function(e,t,n){"use strict";function r(e){i=e.sendEmail}var i;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return ae})),n.d(t,"b",(function(){return ce}));var i=n(3),a=n.n(i),o=n(69),s=n(612),c=n.n(s),l=n(613),u=n.n(l),d=n(614),p=n.n(d),f=n(615),g=n.n(f),m=n(616),v=n.n(m),h=n(617),y=n.n(h),E=n(618),b=n.n(E),O=n(619),C=n.n(O),T=n(620),S=n.n(T),I=n(621),_=n.n(I),A=n(622),w=n.n(A),D=n(623),L=n.n(D),P=n(624),N=n.n(P),R=n(625),j=n.n(R),k=n(626),F=n.n(k),U=n(627),M=n.n(U),x=n(628),$=n.n(x),B=n(629),W=n.n(B),G=n(630),Y=n.n(G),H=n(631),K=n.n(H),V=n(632),z=n.n(V),q=n(633),X=n.n(q),Q=n(509),Z=n.n(Q),J=n(634),ee=n.n(J),te=n(635),ne=n.n(te),re=n(636),ie=n.n(re),ae=[{icon:S.a,link:"https://www.google.com",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_SEARCH"},{icon:y.a,link:"https://mail.google.com/mail",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_EMAIL"},{icon:v.a,link:"https://drive.google.com",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_DRIVE"},{icon:g.a,link:"https://docs.google.com/document",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_DOCS"},{icon:_.a,link:"https://docs.google.com/spreadsheets",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_SHEETS"},{icon:L.a,link:"https://docs.google.com/presentation",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_SLIDES"},{icon:c.a,link:"https://www.google.com/calendar",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_AGENDA"},{icon:u.a,link:"https://chat.google.com",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_CHAT"},{icon:b.a,link:"https://meet.google.com",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_MEET"},{icon:C.a,link:"https://currents.google.com",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"FRONT.BOOKMARKS.CURRENTS"},{icon:w.a,link:"https://sites.google.com",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_SITES"},{icon:p.a,link:"https://contacts.google.com",restrictTo:[o.b.EXTERNAL,o.b.GOOGLE],title:"BOOKMARKED_APPS_CONTACTS"},{icon:W.a,link:"https://outlook.office365.com/owa/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_EMAIL"},{icon:N.a,link:"https://outlook.office.com/calendar/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_CALENDAR"},{icon:Y.a,link:"https://outlook.office.com/people/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_PEOPLE"},{icon:Z.a,link:"https://aka.ms/mstfw",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_TEAMS"},{icon:ie.a,link:"https://www.yammer.com",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_YAMMER"},{icon:j.a,link:"https://eur.delve.office.com/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_DELVE"},{icon:ne.a,link:"https://www.office.com/launch/word",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_DOCS"},{icon:F.a,link:"https://www.office.com/launch/excel",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_EXCEL"},{icon:z.a,link:"https://www.office.com/launch/powerpoint",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_POWERPOINT"},{icon:$.a,link:"https://www.office.com/launch/onenote",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_ONENOTE"},{icon:M.a,link:"https://forms.office.com/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_FORMS"},{icon:K.a,link:"https://tasks.office.com/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_PLANNER"},{icon:X.a,link:"https://web.microsoftstream.com/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_STREAM"},{icon:ee.a,link:"https://to-do.office.com/",restrictTo:[o.b.MICROSOFT],title:"BOOKMARKED_MS_APPS_TODO"}],oe={googleCalendar:c.a,googleChat:u.a,googleContacts:p.a,googleDocs:g.a,googleDrive:v.a,googleGmail:y.a,googleMeet:b.a,googleCurrents:C.a,googleSearch:S.a,googleSheet:_.a,googleSites:w.a,googleSlides:L.a},se={msCalendar:N.a,msDelve:j.a,msExcel:F.a,msForms:M.a,msOneNote:$.a,msOutlook:W.a,msPeople:Y.a,msPlanner:K.a,msPowerpoint:z.a,msStream:X.a,msTeams:Z.a,msTodo:ee.a,msWord:ne.a,msYammer:ie.a},ce=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},oe,{},se)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(7),i=n.n(r),a=n(43),o=Object(a.a)({domain:"customizations",initialState:{currentPage:null},reducers:{setCurrentPage:function(e,t){i()(e,"currentPage",t.payload)}}}),s=o.actions,c=o.reducer},function(e,t,n){"use strict";function r(e){o=e.updateList}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i=n(33),a=n.n(i),o=a.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var r=n(9),i=(n(17),function(e){return e.resellerConsole}),a=Object(r.createSelector)(i,(function(e){return e.tenantList})),o=Object(r.createSelector)(a,(function(e){return e.selected})),s=(Object(r.createSelector)(a,(function(e){return e.cursor})),Object(r.createSelector)(a,(function(e){return e.more})),Object(r.createSelector)(a,(function(e){return e.loading})),Object(r.createSelector)(a,(function(e){return e.items}))),c=(Object(r.createSelector)([o,s],(function(e,t){return e.length>0&&e.length===t.length})),Object(r.createSelector)(i,(function(e){return e.tenants}))),l=function(e,t){var n=t.tenantId;return c(e)[n]},u=Object(r.createSelector)(a,(function(e){return e.filters})),d=(Object(r.createSelector)(a,(function(e){return e.areFiltersOpen})),Object(r.createSelector)(u,(function(e){return e.licenseType.open})),Object(r.createSelector)(u,(function(e){return e.status.open})),Object(r.createSelector)(u,(function(e){return e.domain})),Object(r.createSelector)(u,(function(e){return e.name})),Object(r.createSelector)(u,(function(e){return e.status.value})),Object(r.createSelector)(u,(function(e){return e.licenseType.value})),Object(r.createSelector)(i,(function(e){return e.tenantCreateModal}))),p=(Object(r.createSelector)(d,(function(e){return e.open})),Object(r.createSelector)(d,(function(e){return e.type})),Object(r.createSelector)(d,(function(e){return e.url})),Object(r.createSelector)(i,(function(e){return e.tenantEditModal}))),f=(Object(r.createSelector)(p,(function(e){return e.open})),Object(r.createSelector)(p,(function(e){return e.saving})),Object(r.createSelector)(p,(function(e){return e.openedTab})),Object(r.createSelector)(o,(function(e){return e[0]}))),g=Object(r.createSelector)([f,c],(function(e,t){return t[e]}));Object(r.createSelector)(g,(function(e){return e.features})),Object(r.createSelector)(g,(function(e){return e.excludedFeatures})),Object(r.createSelector)(i,(function(e){return e.tenantTabLicenseType}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return d}));var a=n(3),o=n.n(a),s=n(45),c=n(34),l=Object(c.g)(),u=new s.c({path:"",baseURL:"".concat(l.applicationHost,"/sa/v2/")}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.get("topics",{params:i({maxResults:1e3},e)})}},function(e,t,n){"use strict";var r=n(27),i=n.n(r),a=n(64),o=new a.a({path:"document/provider"}),s=function(e){var t=e.instanceId;return function(e){var t=e.instanceId;return o.get("list",{params:{instanceId:t}})}({instanceId:t})},c=n(225),l="document/providers/FETCH_PROVIDERS_ERROR",u="document/providers/FETCH_PROVIDERS_SUCCESS",d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.instanceId,n=void 0===t?Object(c.a)():t;return function(e,t){var r=t().document.providers;return i()(r)?s({instanceId:n}).then((function(t){e({payload:t.data.providers,type:u})})).catch((function(t){e({payload:t,type:l})})):Promise.resolve(r)}},p=[],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:case u:return t.payload;default:return e}};n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}))},function(e,t,n){"use strict";var r=n(6),i=n.n(r),a=n(10),o=n.n(a),s=n(36),c=n(597),l=n(5),u="FROALA",d="".concat(u,"/LOAD_FROALA_SUCCESS"),p="".concat(u,"/LOAD_FROALA_ERROR"),f=("".concat(u,"/SET_IS_LOADING"),function(){return function(){var e=o()(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)();case 3:n=e.sent,t({payload:{isLoaded:n,isLoading:!1},type:d}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t({payload:{isLoaded:!0,isLoading:!1},type:p}),Object(s.b)(Object(l.h)("FROALA.LOADING_ERROR"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}),g=n(37),m=n(133),v=n(717),h="".concat(m.ANGULAR_ACTION_PREFIX,"/").concat(v.UPDATE_ACTION_TYPE),y={isLoaded:!1,isLoading:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:case d:return Object(g.a)(e,(function(e){var n=t.payload||t.newState,r=n.isLoaded,i=n.isLoading;return e.isLoaded=r,e.isLoading=i,e}));default:return e}};n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return E}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=n(3),o=n.n(a),s=n(8),c=n.n(s),l=n(37),u=n(7),d=n.n(u),p=n(4),f=n.n(p),g=n(313),m=n.n(g),v=n(5),h="FORM",y="".concat(h,"/SET_FORM_FIELD_VALUE"),E="".concat(h,"/SET_FORM_FIELD_VALUES"),b="".concat(h,"/SET_FIELD_ERROR"),O="".concat(h,"/SET_FORM_ERRORS"),C="".concat(h,"/SET_FIELD_META"),T="".concat(h,"/RESET_FORM"),S=function(e){return{resetForm:function(){return{type:"".concat(e,"/").concat(T)}},setFormErrors:function(t){return{payload:{errors:t},type:"".concat(e,"/").concat(O)}},setFormFieldError:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(v.h)("GLOBAL.INVALID_FIELD");return{payload:{errorMessage:r,fieldId:t,hasError:n},type:"".concat(e,"/").concat(b)}},setFormFieldMeta:function(t,n,r){return{payload:{fieldId:t,metaName:n,metaValue:r},type:"".concat(e,"/").concat(C)}},setFormFieldValue:function(t,n){return{payload:{fieldId:t,value:n},type:"".concat(e,"/").concat(y)}},setFormFieldValues:function(t){return{payload:{values:t},type:"".concat(e,"/").concat(E)}}}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=function(e){return{fields:Object.entries(e).reduce((function(e,t){var n=c()(t,2),r=n[0],a=n[1];return i({},e,o()({},r,{isTouched:!1,value:a}))}),{}),hasError:!1,isTouched:!1}},a=function(e){n&&Object.entries(n).forEach((function(t){var n=c()(t,2),r=n[0],i=n[1],a=f()(e,["fields",r,"value"]),o=i(a),s=o.hasError,l=o.errorMessage;d()(e,["fields",r,"hasError"],Boolean(s)),s?d()(e,["fields",r,"errorMessage"],l):m()(e,["fields",r,"errorMessage"])}))};return Object(l.a)((function(n,i){switch(i.type){case"".concat(e,"/").concat(y):var o=i.payload,s=o.fieldId,c=o.value;return d()(n,["fields",s,"value"],c),d()(n,["fields",s,"isTouched"],!0),d()(n,["isTouched"],!0),a(n),n;case"".concat(e,"/").concat(E):var l=i.payload.values,u=r(l);return a(u),u;case"".concat(e,"/").concat(C):var p=i.payload,f=p.fieldId,g=p.metaName,m=p.metaValue;return d()(n,["fields",f,g],m),d()(n,["fields",f,"isTouched"],!0),d()(n,["isTouched"],!0),n;case"".concat(e,"/").concat(b):var v=i.payload,h=v.fieldId,S=v.hasError,I=v.errorMessage;d()(n,["fields",h,"hasError"],S),I&&d()(n,["fields",h,"errorMessage"],I);var _=Object.values(n.fields).some((function(e){return e.hasError}));return d()(n,["hasError"],Boolean(_)),n;case"".concat(e,"/").concat(O):var A=i.payload.errors;Object.keys(n.fields).forEach((function(e){var t=A.fieldId||{},r=t.errorMessage,i=t.hasError;d()(n,["fields",e,"hasError"],i),r&&d()(n,["fields",e,"errorMessage"],r)}));var w=Object.values(n.fields).some((function(e){return e.hasError}));return d()(n,["hasError"],Boolean(w)),n;case"".concat(e,"/").concat(T):return r(t);default:return n}}),r(t))};n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return S}))},function(e,t,n){"use strict";var r=n(45),i=new r.c({path:"translate"}),a={gTranslate:function(e){var t=e.content,n=e.targetLang,r=e.sourceLang,a=e.isContentHTML;return i.post("get",{contentText:t,sourceFormat:a?"html":"text",targetLang:n,sourceLang:r})}};n.d(t,"a",(function(){return a}))},function(e,t,n){e.exports=n.p+"assets/img/files/image-missing.png?d42e37b95a2b4bed92dd35b198845c7d"},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(7),i=n.n(r),a=n(43),o={providers:[],chatProvidersStatus:null},s=Object(a.a)({domain:"chat",initialState:o,reducers:{fetchProvidersLoading:function(e){i()(e,"chatProvidersStatus","loading")},fetchProvidersSuccess:function(e,t){var n=t.payload.providers;i()(e,"providers",n),i()(e,"chatProvidersStatus","loaded")},fetchProvidersError:function(e,t){i()(e,"providers",o.providers),i()(e,"chatProvidersStatus",null),i()(e,"errorMessage",t.payload)}}}),c=s.actions,l=s.reducer},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var i=n(3),a=n.n(i),o=n(43),s=n(600),c={items:void 0,loading:!1},l=Object(o.a)({domain:"bookmarks",initialState:c,reducers:{setIsLoadingBookmarks:function(e,t){var n=t.payload,r=void 0===n||n;e.loading=r},setBookmarks:function(e,t){e.items=t.payload.map((function(e){var t=e.icon.match(/^https?:\/\//)?e.icon:s.b[e.icon];return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{icon:t})}))}}}),u=l.actions,d=l.reducer},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_calendar.svg?9d6851e2a150e6ca12dd3afe80d0b766"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_chat.svg?3691ad1e8b7404a4fe23817e02b69cc4"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_contacts.svg?210c4d0b9bf6907c4e4081b1f1a7f1d3"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_docs.svg?1d281304fd3aa868461cacb725514b92"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_drive.svg?d984feae29623c96e8fd8387ecf67caa"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_gmail.svg?7f79252a0a0dabb31a5c2584df58caf5"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_meet.svg?9338927d7be9442731bef5082124824d"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_currents.svg?d48b6827da99a557f25faf19304ba0d0"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_search.svg?e34de97844dc6f39c2567000f5e596cb"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_sheets.svg?da65e34031f6cd01d459dde1a53d89e4"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_sites.svg?e4a2c6e81c725d1c11955df0b1a7bc49"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/google-apps/google_icon_slides.svg?a0be5c93405aba1f05c2c53fb6ab5cb1"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_calendar.svg?b86a5f159503581f4ddfd90bebb70e62"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_delve.svg?d2b72b908a1c44587d923d2c2f810441"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_excel.svg?4e2e46310abaf9a8ebda5eb269859cee"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_forms.svg?40f71ce11d412fc4ce125a20d9653948"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_onenote.svg?cb19a3831a484b9a6bec0a05bbef4d37"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_outlook.svg?8b1257721ba1ae8d5a3545e460726042"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_people.svg?3b492ca181816943c6ecad01672a7afa"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_planner.svg?5c28f8b40ac947b5b4e28818e9fa399d"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_powerpoint.svg?3c61d90917f7cfc71e06b6b6f3a98eb0"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_stream.svg?bd08252d0560b972ec4af6976816e2cb"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_todo.svg?8c421d469678a40ef378188f12c01dd2"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_word.svg?51ec91cc4cca9e863a9e3f6fda349723"},function(e,t,n){e.exports=n.p+"_/_/packages/assets/microsoft-apps/ms_icon_yammer.svg?2f9f2e2e477e7745444898d9d2fc4ad4"},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return b}));var i=n(19),a=n.n(i),o=n(3),s=n.n(o),c=n(43),l=n(7),u=n.n(l),d=n(87),p=n.n(d),f=n(146),g=n.n(f),m=n(4),v=n.n(m),h={entities:{},userListSettings:{query:"",isLoading:!1,cursor:void 0,ids:[],hasMore:!0}},y=Object(c.a)({domain:"userDirectory",initialState:h,reducers:{setUserDirectoriesSearchStatus:function(e,t){u()(e,["userListSettings","isLoading"],t.payload)},fetchUserDirectoriesSearchSuccess:function(e,t){var n=t.payload.items||[],i=p()(n,"id");u()(e,"entities",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.entities,{},i)),u()(e,["userListSettings","ids"],t.payload.add?g()([].concat(a()(v()(e,["userListSettings","ids"])),a()(Object.keys(i)))):Object.keys(i)),u()(e,["userListSettings","isLoading"],!1),u()(e,["userListSettings","cursor"],t.payload.cursor),u()(e,["userListSettings","hasMore"],t.payload.more)},fetchUserDirectoriesSearchError:function(e,t){u()(e,["userListSettings","ids"],h.userListSettings.ids),u()(e,["userListSettings","isLoading"],!1),u()(e,["userListSettings","errorMessage"],t.payload)}}}),E=y.actions,b=y.reducer},function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r=n(182),i="community/FETCH_APPS_LOADING",a="community/FETCH_APPS_SUCCESS",o="community/FETCH_APPS_ERROR",s=function(e){return function(t){return t({type:i}),Object(r.a)({groupId:e}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.payload;t({payload:n,type:a})})).catch((function(e){t({payload:e,type:o})}))}}},,function(e,t,n){"use strict";function r(e){return i.apply(this,arguments)}function i(){return i=c()(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},t),e.next=3,f(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(36),u=n(5),d=n(64),p=new d.a({path:"content/menu"}),f=function(e){return p.get("get",{params:e})};n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return y}));var g="MAINNAV",m="".concat(g,"/FETCH_MAIN_NAV_SUCCESS"),v="".concat(g,"/FETCH_MAIN_NAV_ERROR"),h="".concat(g,"/SET_IS_LOADING"),y=function(e){return function(){var t=c()(o.a.mark((function t(n,i){var a,s,c,d,p,f,g,y;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.langs,s=e.instanceId,c=e.type,n((o={id:c,value:!0},E=void 0,b=void 0,E=o.id,b=o.value,{payload:{id:E,value:b},type:h})),d=i().customer.id,p=a.lang,f=a.alternativeLang,g={alternativeLang:f,customer:d,instance:s,lang:p},t.prev=6,t.next=9,r(g);case 9:y=t.sent,n({payload:{data:y,id:c,isLoading:!1},type:m}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),n({payload:{id:c,isLoading:!1},type:v}),Object(l.b)(Object(u.h)("ADMIN.MAIN_NAV.FETCH_MAIN_NAV_ERROR"));case 17:case"end":return t.stop()}var o,E,b}),t,null,[[6,13]])})));return function(e,n){return t.apply(this,arguments)}}()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(43),i=n(87),a=n.n(i),o=Object(r.a)({domain:"user/feed",initialState:{ALL:{},FEED_ALL_AND_PUBLIC:{},PUBLIC:{},entities:{}},reducers:{"__angular__/feed/update":function(e,t){var n=t.newState,r=n.ALL,i=n.FEED_ALL_AND_PUBLIC,a=n.PUBLIC;e.ALL=r,e.FEED_ALL_AND_PUBLIC=i,e.PUBLIC=a},updateFeeds:function(e,t){var n=t.payload.feeds;Object.assign(e.entities,a()(n,"uid"))}}}),s=o.actions,c=o.reducer},,,,,,,,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=n(5),a=n(431),o=n(225),s=n(36),c=n(3),l=n.n(c),u=n(64),d=new u.a({path:"communitysettings"}),p=function(e){var t=e.communitySettings;return d.post("save",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))},f=function(e){var t=e.customerId,n=e.instanceId;return function(e){var t=e.customerId;return d.get("get",{params:{customerId:t}})}({customerId:t,instanceId:n}).then((function(e){return{payload:e.data}}))},g=function(e){var t=e.communitySettings;return p({communitySettings:t}).then((function(e){return{payload:e.data}}))},m="community/settings/FETCH_COMMUNITY_SETTINGS_ERROR",v="community/settings/FETCH_COMMUNITY_SETTINGS_LOADING",h="community/settings/FETCH_COMMUNITY_SETTINGS_SUCCESS",y="community/settings/SAVE_COMMUNITY_SETTINGS_ERROR",E="community/settings/SAVE_COMMUNITY_SETTINGS_LOADING",b="community/settings/SAVE_COMMUNITY_SETTINGS_SUCCESS",O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.instanceId,n=void 0===t?Object(o.a)():t;return function(e){e({type:v});var t=Object(a.a)();return f({customerId:t,instanceId:n}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({payload:n,type:h})})).catch((function(t){e({payload:t,type:m})}))}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.communitySettings;return function(e){return e({type:E}),g({communitySettings:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.payload;e({payload:n,type:b}),s.d(Object(i.h)("ADMIN.PLATFORM.COMMUNITY.SETTINGS.SAVED"))})).catch((function(t){e({payload:t,type:y})}))}},T=n(18),S=n.n(T),I=n(37),_=n(21),A=n.n(_),w=n(144),D=n.n(w),L=n(212),P={},N=function(e,t){return e["".concat(t,"DriveSettings")]},R=function(e){var t=e.draft,n=e.providerId,r=e.updatedValues,i=N(t,n);i&&Object.assign(i,r)},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;return Object(I.a)(e,(function(e){switch(t.type){case v:Object.assign(e,P);break;case h:case b:Object.assign(e,t.payload);break;case L.a:var n=t.payload,r=n.providerId,i=S()(n,["providerId"]),a=N(e,r),o=a.otherUserGroupRights?a.otherUserGroupRights.length+1:1;i.groupName+=" ".concat(o),a.otherUserGroupRights?a.otherUserGroupRights.push(i):a.otherUserGroupRights=[i];break;case L.c:var s=t.payload,c=s.providerId,l=s.uid,u=N(e,c),d=u.otherUserGroupRights;D()(d,{uid:l});break;case L.f:var p=t.payload,f=p.providerId,g=p.uid,m=p.changes,y=N(e,f),E=y[g];Object.assign(E,m);break;case L.g:var O=t.payload,C=O.providerId,T=O.uid,I=O.changes,_=N(e,C),w=_.otherUserGroupRights,j=A()(w,{uid:T});Object.assign(j,I);break;case L.e:var k=t.payload,F=k.providerId,U=S()(k,["providerId"]);R({draft:e,providerId:F,updatedValues:U});break;case L.d:R({draft:e,providerId:t.payload.providerId,updatedValues:{driveFolderDestinationPath:t.payload.docPath,driveFolderDestinationTitle:void 0}});break;case L.b:R({draft:e,providerId:t.payload.providerId,updatedValues:{driveFolderDestinationTitle:t.payload.title}})}}))};n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return j}))},,,,,function(e,t,n){var r=n(234),i=n(2062),a=/&(?:amp|lt|gt|quot|#39);/g,o=RegExp(a.source);e.exports=function(e){return e=r(e),e&&o.test(e)?e.replace(a,i):e}},,,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return c}));var i=n(3),a=n.n(i),o=n(0),s=n(505),c=function(){var e=Object(o.useContext)(s.a)||{modes:{},featureFlags:{}};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}},,,,,,,function(e,t){},,,,,,function(e,t){},,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(11),i=n(229),a=n(527),o=function(e){var t=e.property,n=e.selector,o=void 0===n?a.b:n,s=Object(i.c)(),c=s.isModeEnabled,l=Object(r.useSelector)(o)||{},u=c&&c(i.b.WITH_CUSTOM_COLORS),d=u&&l[t]||{};return{styles:d,isCustomColorModeEnabled:u}},s=function(e){var t=e.property,n=e.selector,r=void 0===n?a.a:n;return o({property:t,selector:r})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=500,i={along:-16,away:-16}},function(e,t){},,,,,,function(e,t,n){"use strict";var r=n(481),i=n(418),a=n(482),o=n(483),s=n(376),c=n(16),l=n.n(c),u=n(18),d=n.n(u),p=n(14),f=n.n(p),g=n(0),m=n.n(g),v=function(e){var t=e.children,n=e.className,r=e.elementRef,i=(e.element,d()(e,["children","className","elementRef","element"]));return m.a.createElement("li",l()({},i,{className:f()(n,"wrex-content-block","wrex-content-list-item"),ref:r}),t)};v.displayName="list-item";var h=n(484),y=n(485),E=n(486),b=n(487),O=n(372),C=n(329),T=n(426),S=n(488);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return i.a})),n.d(t,"d",(function(){return a.a})),n.d(t,"e",(function(){return o.a})),n.d(t,"f",(function(){return s.a})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return h.a})),n.d(t,"i",(function(){return y.a})),n.d(t,"j",(function(){return E.a})),n.d(t,"q",(function(){return b.a})),n.d(t,"r",(function(){return O.a})),n.d(t,"s",(function(){return C.a})),n.d(t,"n",(function(){return T.d})),n.d(t,"p",(function(){return T.f})),n.d(t,"o",(function(){return T.e})),n.d(t,"m",(function(){return T.c})),n.d(t,"k",(function(){return T.a})),n.d(t,"l",(function(){return T.b})),n.d(t,"c",(function(){return S.a}))},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,o,c,u,p,y,E,b,O,C,T,S,I,_,A,w,D){function L(e,t,n){return N.editor=t,w.get({success:"/upload"}).$promise.then((function(e){A.httpRequest(e.uploadUrl,{},N.insertImageFromUpload,void 0,void 0,n)})),!1}function P(e,t,n){return N.editor=t,w.get({success:"/upload"}).$promise.then((function(e){t.image.showProgressBar(),t.edit.off();for(var r=angular.element(n),i=atob(r.attr("src").split(",")[1]),a=[],o=0;o<i.length;o++)a.push(i.charCodeAt(o));var s=new Blob([new Uint8Array(a)],{type:"image/jpeg"});r.remove(),A.httpRequest(e.uploadUrl,{},N.insertImageFromUpload,void 0,void 0,[s])})),!1}var N=this,R=["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","|","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","insertHR","|","insertLink","undo","redo","clearFormatting","selectAll","html"],j={events:{},linkEditButtons:E.linkEditButtons,linkInsertButtons:E.linkInsertButtons,pastePlain:"No"!==b.getProperty(u.INSTANCE_PROPERTIES.WYSIWYG_PASTEPLAIN),toolbarButtons:R,toolbarSticky:!0},k=[].concat($.FroalaEditor.DEFAULTS.htmlAllowedTags,E.svgTags,U),F=[].concat($.FroalaEditor.DEFAULTS.htmlAllowedAttrs,E.svgAttributes,["ng-click","onclick","ui-sref","ng-href"]),U=["twitterwidget"],M=[].concat($.FroalaEditor.DEFAULTS.htmlAllowedEmptyTags,["i","span","div"],E.svgTags,U),x=[];N.LIGHT_OPTIONS_TOOLBAR_BUTTONS=["bold","italic","underline","strikeThrough","superscript"],N.editingPopin=!1,N.linkItem={},N.mediaList=[],N.MediaConstant=T,$.FroalaEditor.DefineIconTemplate("material_design",'<i class="mdi mdi-[NAME]"></i>'),angular.forEach(E.tools,(function(e,t){$.FroalaEditor.DefineIcon(t,{NAME:e.icon})})),$.FroalaEditor.RegisterCommand("nativeInsertImage",$.FroalaEditor.COMMANDS.insertImage),$.FroalaEditor.RegisterCommand("nativeInsertLink",$.FroalaEditor.COMMANDS.insertLink),$.FroalaEditor.DefineIcon("nativeInsertLink",{NAME:"link"}),$.FroalaEditor.RegisterCommand("insertImage",{callback:function(){N.mediaPickerCallback=this,N.mediaPickerCallback.markers.insert();var e=n.$new();e.Config=u,e.FroalaService=N,N.mediaPickerId="froala-media-picker-".concat(Object(g.b)()),N.mediaPicker=t("".concat('<ls-picker ls-type="Media"ls-type-path="Folder"ls-allowed-providers="[FroalaService.MediaConstant.PROVIDERS.lumapps]"ls-allowed-types="FroalaService.MediaConstant.DOCUMENT_TYPES.imagesAndFolders"ls-has-sidebar="true" ls-picker-id="').concat(N.mediaPickerId,'" ')+'ng-model="FroalaService.mediaList" '+'ls-widget-uuid="'.concat(N.mediaPickerId,'" ')+'ls-multiple="true"></ls-picker>')(e),angular.element("body").append(N.mediaPicker),D.waitForAndExecute("#".concat(N.mediaPickerId),o)},focus:!0,refreshAfterCallback:!0,title:_.translate("INSERT_IMAGE"),undo:!0}),n.$on("abstract-picker__close-end",(function(e,t){if(N.mediaPickerId===t){var n=angular.isArray(N.mediaList)?N.mediaList:[N.mediaList],r="";angular.forEach(n,(function(e){var t=_.translate(C.getMediaContent(e));if(angular.isDefined(t)&&C.isImage(t.type)){var n=angular.isDefinedAndFilled(t.servingUrl)?t.servingUrl:t.value;r+='<img class="fr-dib fr-draggable" src="'.concat(D.resizeImage(n,1600),'" style="width: 300px;">')}})),angular.isDefinedAndFilled(r)&&(N.mediaPickerCallback.$el.find(".fr-marker").replaceWith(r),N.mediaPickerCallback.undo.saveStep(),N.mediaList=[])}})),n.$on("abstract-picker__close-end",(function(e,t){N.mediaPickerId===t&&(angular.isDefined(N.mediaPickerCallback)&&N.mediaPickerCallback.markers&&N.mediaPickerCallback.markers.remove(),N.mediaPicker&&N.mediaPicker.remove())}));var B={callback:function(e,t){this.commands.exec(t)},focus:!0,icon:"insertLink",refreshAfterCallback:!0,title:"Insert Link",type:"dropdown",undo:!1};$.FroalaEditor.RegisterCommand("insertLink",angular.extend(angular.fastCopy(B),{options:{linkContent:_.translate("INSERT_CONTENT_LINK"),nativeInsertLink:"Insert Link"}})),$.FroalaEditor.RegisterCommand("imageLinkDropdown",angular.extend(angular.fastCopy(B),{options:{imageLink:"Insert Link",linkContent:_.translate("INSERT_CONTENT_LINK")},refresh:function(e){var t=this.link.get();e.toggleClass("fr-hidden",Boolean(t))}})),$.FroalaEditor.RegisterCommand("linkContent",{callback:function(){N.contentPickerCallback=this,N.currentSelectionText=N.contentPickerCallback.selection.text(),N.currentSelection=N.contentPickerCallback.selection,N.currentSelectionImage=angular.isDefined(N.contentPickerCallback.image)?N.contentPickerCallback.image.get():void 0,N.currentSelection.save();var e=n.$new();e.FroalaService=N,N.contentPickerId="froala-content-picker-".concat(Object(g.b)()),N.contentPicker=t('<ls-content-picker \'ls-multi="false" ls-picker-id="'.concat(N.contentPickerId,'" ls-kind="object" ls-view-mode="library" ng-model="FroalaService.linkItem"></ls-content-picker>'))(e),angular.element("body").append(N.contentPicker),D.waitForAndExecute("#".concat(N.contentPickerId),y)},focus:!0,refreshAfterCallback:!0,title:_.translate("INSERT_CONTENT_LINK"),undo:!0}),$.FroalaEditor.RegisterCommand("linkEditWrapper",{callback:function(){N.contentPickerCallback=this,N.currentSelectionText=N.contentPickerCallback.selection.text(),N.currentSelection=N.contentPickerCallback.selection,N.currentSelectionImage=angular.isDefined(N.contentPickerCallback.image)?N.contentPickerCallback.image.get():void 0,N.currentSelection.save();var e=angular.isDefinedAndFilled(N.currentSelectionImage)?angular.element(N.currentSelectionImage.get()).parent("a"):angular.element(s()(N.currentSelection.get(),"focusNode",{})).parent("a");if(e){var r=e.attr("data-url");if(angular.isUndefinedOrEmpty(r))this.commands.exec("linkEdit");else{N.editLink=e;try{N.linkItem=angular.fromJson(r)}catch(e){}var i=n.$new();i.FroalaService=N,N.contentPickerId="froala-content-picker-".concat(Object(g.b)()),N.contentPicker=t('<ls-content-picker ls-multi="false" ls-picker-id="'.concat(N.contentPickerId,'" ls-kind="object" ls-view-mode="library" ng-model="FroalaService.linkItem"></ls-content-picker>'))(i),angular.element("body").append(N.contentPicker),D.waitForAndExecute("#".concat(N.contentPickerId),y),angular.element(".fr-popup.fr-active").removeClass("fr-active")}}else this.commands.exec("linkEdit")},focus:!0,icon:"linkEdit",refreshAfterCallback:!0,title:"Edit Link",undo:!0}),n.$on("content-picker__close-start",(function(e,t,n){var r=angular.isUndefinedOrEmpty([s()(N.linkItem,"id"),s()(N.linkItem,"slug")],"some");if(n||r)return N.editLink=void 0,void(N.linkItem={});var i=N.currentSelectionText||O.getNavItemTitle(N.linkItem),a=N.linkItem.instance===b.getCurrentInstanceId()?"":' target="_blank"';N.currentSelection.restore();var o={id:N.linkItem.id,instance:N.linkItem.instance,link:N.linkItem.link,slug:N.linkItem.slug,type:N.linkItem.type},c=angular.toJson(o,!1);if(N.editLink)N.editLink.attr("data-url",c);else if(c=c.replace(/[\\"']/g,"&quot;"),N.currentSelectionImage){N.currentSelectionImage.attr("alt",i);var l=N.currentSelectionImage[0].outerHTML;N.contentPickerCallback.image.remove(N.currentSelectionImage),N.contentPickerCallback.html.insert('<a data-url="'.concat(c,'"').concat(a,">").concat(l,"</a>"))}else N.contentPickerCallback.html.insert('<a data-url="'.concat(c,'"').concat(a,">").concat(i,"</a>"));N.contentPickerCallback.undo.saveStep(),N.linkItem={},N.editLink=void 0})),$.FroalaEditor.RegisterCommand("insertPopin",{callback:function(){if(N.popinCallback=this,N.currentSelectionText=N.popinCallback.selection.text(),N.currentSelection=N.popinCallback.selection,N.currentSelectionImage=angular.isDefined(N.popinCallback.image)?N.popinCallback.image.get():void 0,N.popinCallback.selection.save(),N.currentSelectionImage){var e=N.currentSelectionImage[0].outerHTML;N.popinCallback.image.remove(N.currentSelectionImage),N.popinCallback.html.insert('<a href="popin" ng-click="vm.Utils.openPopin($event, \''.concat(N.widgetUuid,"')\">").concat(e,"</a>"))}else N.popinCallback.html.insert('<a href="popin" ng-click="vm.Utils.openPopin($event, \''.concat(N.widgetUuid,"')\">").concat(N.currentSelectionText?N.currentSelectionText:"popin","</a>"));N.popinCallback.undo.saveStep(),N.editingPopin=!0,n.$apply()},disabled:!0,focus:!0,forcedRefresh:!0,refresh:function(e){var t=this.selection.text()||(this.image?this.image.get():null);e.toggleClass("fr-disabled",angular.isUndefinedOrEmpty(t))},refreshAfterCallback:!0,title:_.translate("INSERT_POPIN"),undo:!0}),$.FroalaEditor.RegisterCommand("editPopin",{callback:function(){N.editingPopin=!0,n.$apply()},focus:!0,forcedRefresh:!0,hidden:!0,refresh:function(e){e.toggleClass("fr-hidden",!l()(this.html.get(),"Utils.openPopin"))},title:_.translate("EDIT_POPIN"),undo:!1}),$.FroalaEditor.RegisterCommand("editContent",{callback:function(){N.editingPopin=!1,n.$apply()},focus:!0,forcedRefresh:!0,hidden:!0,refresh:function(e){e.toggleClass("fr-hidden",!this.opts.isPopin)},title:_.translate("EDIT_CONTENT"),undo:!1}),j.events["froalaEditor.image.beforeUpload"]=L,j.events["froalaEditor.image.beforePasteUpload"]=P,N.beforePasteUpload=P,N.beforeUpload=L,N.focus=function(e,t,n){n=n||"beginning",t.events.focus(),"end"===n&&r((function(){D.setEndOfContenteditable(t.$el.get(0));var e=i.innerWidth>=1024?p.HEADER_FRONT_OFFSET:100;angular.element(i).scrollTop(t.$el.offset().top+t.$el.height()+e-angular.element(i).height())}))},N.getHTMLToolbar=function(){return b.getProperty(u.INSTANCE_PROPERTIES.WYSIWYG_TOOLBAR)||u.DEFAULT_FROALA_HTML_TOOLBAR},N.getOptions=function(e,t,n,r,i){var a=angular.fastCopy(j);return e=e||!1,t=t||!1,n=n||!1,r=r||!1,i=i||angular.fastCopy(R),e&&(a.htmlAllowedAttrs=F,a.htmlAllowedEmptyTags=M,a.htmlAllowedTags=k),n&&(a.events["froalaEditor.initialized"]=N.focus),t&&(a.imageEditButtons=["imageAlign","imageRemove","|","imageLinkDropdown","linkEditWrapper","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"]),r&&!l()(i,"fullscreen")?i.unshift("fullscreen"):r||(i=f()(i,"fullscreen")),N.setStyleOptions(p),angular.isUndefinedOrEmpty(p.FROALA_INLINE_STYLES)&&l()(i,"inlineStyle")&&(i=f()(i,"inlineStyle")),angular.isUndefinedOrEmpty(p.FROALA_PARAGRAPH_CLASSES)&&l()(i,"paragraphStyle")&&(i=f()(i,"paragraphStyle")),a.toolbarButtons=i,a.toolbarButtonsMD=i,a.toolbarButtonsSM=i,a.toolbarButtonsXS=i,a},N.insertImageFromUpload=function(e){var t=angular.isArray(e)?e:[e];angular.forEach(t,(function(e){"image"===e.type&&N.editor.html.insert('<img class="fr-dib fr-draggable" src="'.concat(e.url,'" style="width: 300px;"><br>'))})),N.editor.edit.on(),N.editor.undo.saveStep(),N.editor.image.hideProgressBar(),N.editor.popups.hideAll()},N.setStyleOptions=function(e){var t=j.toolbarButtons;angular.isDefinedAndFilled(e.FROALA_FONT_FAMILY)&&($.FroalaEditor.DEFAULTS.fontFamily=e.FROALA_FONT_FAMILY),angular.isDefinedAndFilled(e.FROALA_IMAGE_CLASSES)&&($.FroalaEditor.DEFAULTS.imageStyles=e.FROALA_IMAGE_CLASSES),angular.isDefinedAndFilled(e.FROALA_INLINE_STYLES)?$.FroalaEditor.DEFAULTS.inlineStyles=e.FROALA_INLINE_STYLES:l()(t,"inlineStyle")&&(t=f()(t,"inlineStyle")),angular.isDefinedAndFilled(e.FROALA_LINK_CLASSES)&&($.FroalaEditor.DEFAULTS.linkStyles=e.FROALA_LINK_CLASSES),angular.isDefinedAndFilled(e.FROALA_PARAGRAPH_CLASSES)?$.FroalaEditor.DEFAULTS.paragraphStyles=e.FROALA_PARAGRAPH_CLASSES:l()(t,"paragraphStyle")&&(t=f()(t,"paragraphStyle")),angular.isDefinedAndFilled(e.FROALA_TABLE_CELL_CLASSES)&&($.FroalaEditor.DEFAULTS.tableCellStyles=e.FROALA_TABLE_CELL_CLASSES),angular.isDefinedAndFilled(e.FROALA_TABLE_CLASSES)&&($.FroalaEditor.DEFAULTS.tableStyles=e.FROALA_TABLE_CLASSES)},N.reduxReducerName="froala",N.reduxUpdateActionType=h,N.mapStateToRedux=function(){return{isLoaded:!0}},N.init=function(){N.setStyleOptions(p),m.AdvancedSettingsConstant.WYSIWYG_TOOLBAR={category:"wysiwyg",choices:Object(v.getWysiwygToolbar)(),dragAndDropType:"froala-toolbar",translationPrefix:"FRONT.FROALA.",type:"drag-and-drop"},c.WYSIWYG_TOOLBAR=m.AdvancedSettingsConstant.WYSIWYG_TOOLBAR,j.language=_.getLang("current","froala"),x=s()(S.getInstanceGlobalStyle(),"properties.colors",p.COLORS);var t=a()(x,(function(e){return e=e.toUpperCase(),"WHITE"===e||"#FFFFFF"===e||"#FFF"===e||d()(e,"RGB(255")&&3===(e.match(/255/g)||[]).length}));t>-1&&(x.splice(t,1),x.unshift("#FFFFFF"));var n=a()(x,(function(e){return e=e.toUpperCase(),"TRANSPARENT"===e||/, ?0(\.0+)?$/.test(e)}));n>-1&&(x.splice(n,1),x.push("transparent")),angular.extend($.FroalaEditor.DEFAULTS,{codeMirror:e,colorsBackground:x,colorsText:x,fontFamily:p.FROALA_FONT_FAMILY||E.fonts,fontSize:E.fontSize,htmlExecuteScripts:!1,htmlRemoveTags:[],iconsTemplate:"material_design",imageStyles:p.FROALA_IMAGE_CLASSES,inlineStyles:p.FROALA_INLINE_STYLES,isPopin:!1,key:E.key,linkStyles:p.FROALA_LINK_CLASSES,paragraphStyles:p.FROALA_PARAGRAPH_CLASSES,pasteDeniedAttrs:"No"!==b.getProperty(u.INSTANCE_PROPERTIES.WYSIWYG_PASTEPLAIN)?["class","id","style"]:[],shortcutsEnabled:["undo","redo"],tableCellStyles:p.FROALA_TABLE_CELL_CLASSES,tableColors:x,tableStyles:p.FROALA_TABLE_CLASSES,videoDefaultDisplay:"block",videoInsertButtons:["videoBack","|","videoByURL","videoEmbed"],videoResponsive:!0}),I.subscribe(N)},N.init()}n.d(t,"FroalaService",(function(){return r})),n.d(t,"UPDATE_ACTION_TYPE",(function(){return h}));var i=n(110),a=n.n(i),o=n(4),s=n.n(o),c=n(17),l=n.n(c),u=n(107),d=n.n(u),p=n(106),f=n.n(p),g=n(35),m=n(550),v=n(425);r.$inject=["$compile","$rootScope","$timeout","$window","AbstractPicker","AdvancedSettingsConstant","Config","ConfigTheme","ContentPicker","FroalaSettings","Instance","MainNav","Media","MediaConstant","Style","ReduxStore","Translation","Upload","UploadFactory","Utils"];var h="froala/update";angular.module("Services").service("FroalaService",r)}.call(this,n(929))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n){var r="".concat(e,"_").concat(t).toUpperCase();return n&&(r="".concat(r,"_").concat(n)),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(77),i=n(175),a=n(442),o=(a.b,i.b,Object(r.c)({entities:a.c,topicManagementForm:i.c})),s=(a.a,i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(77),i=n(286),a=Object(r.c)({contentActionsById:i.e});i.d,i.b},function(e,t,n){"use strict";var r=n(278);t.a=r.g},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){var t=e.value;return"CONVERT_TO_POST"===t?W.a.createElement(Je.Icon,{icon:et.ic}):null}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.r(t);var y={};n.r(y),n.d(y,"Widget",(function(){return Pe})),n.d(y,"WidgetChannelList",(function(){return ze})),n.d(y,"WidgetChat",(function(){return Nt})),n.d(y,"WidgetCommunityIntro",(function(){return $t})),n.d(y,"WidgetContact",(function(){return zt})),n.d(y,"DocumentManagementMenu",(function(){return tn})),n.d(y,"FileListWidgetActionsMenu",(function(){return mn})),n.d(y,"WidgetImageGalleryStyleSettings",(function(){return Tn})),n.d(y,"WidgetImageGallery",(function(){return Sn})),n.d(y,"WidgetLinks",(function(){return Pn})),n.d(y,"WidgetRemote",(function(){return Un})),n.d(y,"WidgetRss",(function(){return Bn})),n.d(y,"WidgetWeather",(function(){return Qn})),n.d(y,"WidgetTasks",(function(){return br})),n.d(y,"WidgetDelve",(function(){return Lr})),n.d(y,"WidgetChart",(function(){return jr})),n.d(y,"WidgetWall",(function(){return $r}));var E=n(18),b=n.n(E),O=n(6),C=n.n(O),T=n(10),S=n.n(T),I=n(3),_=n.n(I),A=n(19),w=n.n(A),D=n(22),L=n.n(D),P=n(20),N=n.n(P),R=n(24),j=n.n(R),k=n(25),F=n.n(k),U=n(29),M=n.n(U),x=n(26),$=n.n(x),B=n(0),W=n.n(B),G=n(11),Y=n(14),H=n.n(Y),K=n(4),V=n.n(K),z=n(112),q=n.n(z),X=n(678),Q=n.n(X),Z=n(33),J=n.n(Z),ee=n(679),te=n.n(ee),ne=n(466),re=n.n(ne),ie=n(85),ae=n.n(ie),oe=n(66),se=n.n(oe),ce=n(277),le=n(104),ue=n(506),de=n(31),pe=n(2),fe=n(5),ge=n(47),me=n(129),ve=n(86),he=function(e){function t(){return L()(this,t),j()(this,F()(t).apply(this,arguments))}return $()(t,e),N()(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.style,i=e.toggleWidgetContent,a=V()(r.wrapper,"flexDirection")||"row";return W.a.createElement("div",{className:"widget-header",style:Object(ve.c)(r.main||{},!0),onClick:i},W.a.createElement("div",{className:H()("widget-wrapper widget-header__wrapper",{"widget-header__wrapper--layout-bottom":"column-reverse"===a,"widget-header__wrapper--layout-left":"row"===a,"widget-header__wrapper--layout-right":"row-reverse"===a,"widget-header__wrapper--layout-top":"column"===a}),style:Object(ve.c)(r.wrapper||{})},void 0!==t&&W.a.createElement(me.a,{className:"widget-header__icon",style:Object(ve.c)(r.icon||{},!1),value:t}),W.a.createElement("h2",{className:"widget-header__title",style:Object(ve.c)(r.label||{},!1)},Object(de.o)()?Object(fe.h)(n,void 0,Object(fe.a)(),!0):Object(fe.h)(n))))}}]),t}(B.PureComponent);_()(he,"propTypes",{icon:pe.string,style:ge.b,title:Object(pe.shape)(),toggleWidgetContent:pe.func});var ye=n(136),Ee=n(507),be=function(e){function t(e){var n;return L()(this,t),n=j()(this,F()(t).call(this,e)),n.state={isHover:!1},n.onMouseEnter=n.onMouseEnter.bind(M()(n)),n.onMouseLeave=n.onMouseLeave.bind(M()(n)),n.handleFooterLink=n.handleFooterLink.bind(M()(n)),n}return $()(t,e),N()(t,[{key:"onMouseEnter",value:function(){this.setState({isHover:!0})}},{key:"onMouseLeave",value:function(){this.setState({isHover:!1})}},{key:"handleFooterLink",value:function(){var e=this.props,t=e.component,n=e.more,r=Object(fe.h)(n.link);if(r&&(Object(Ee.a)("widget-footer_click","button",{widget:t}),!Object(ye.a)(r))){for(var i=new RegExp("/[?&]([^=#]+)=([^&#]*)/g"),a={},o=i.exec(r);null!==o;)a[o[1]]=o[2],o=i.exec(r);a.slug=r.split("?")[0],Object(de.v)("app.front.content-get",a)}}},{key:"render",value:function(){var e=this.props,t=e.more,n=e.icon,r=e.style,i=e.state,a=this.state.isHover,o=V()(r.wrapper,"flexDirection")||"row";return W.a.createElement("div",{className:"widget-footer",style:Object(ve.b)(r,a||"hover"===i,"main",!0)},W.a.createElement("div",{className:H()("widget-wrapper widget-footer__wrapper",{"widget-footer__wrapper--layout-bottom":"column-reverse"===o,"widget-footer__wrapper--layout-left":"row"===o,"widget-footer__wrapper--layout-right":"row-reverse"===o,"widget-footer__wrapper--layout-top":"column"===o}),style:Object(ve.b)(r,a,"wrapper",!0),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},void 0!==n&&W.a.createElement(me.a,{className:"widget-footer__icon",style:Object(ve.b)(r,a,"icon",!1),value:n}),W.a.createElement("a",{className:"widget-footer__link widget-footer__label",href:Object(fe.h)(t.link),style:Object(ve.b)(r,a,"label",!1),target:Object(ye.a)(Object(fe.h)(t.link))?"_blank":t.target,onClick:this.handleFooterLink},W.a.createElement("span",null,Object(de.o)()?Object(fe.h)(t.label,void 0,Object(fe.a)(),!0):Object(fe.h)(t.label)))))}}]),t}(B.PureComponent);_()(be,"propTypes",{component:Object(pe.shape)().isRequired,icon:pe.string,more:Object(pe.shape)({label:pe.object,link:pe.object}).isRequired,state:pe.string.isRequired,style:ge.b.isRequired}),_()(be,"defaultProps",{icon:""});var Oe=n(810),Ce=n.n(Oe),Te=n(155),Se=n.n(Te),Ie=n(21),_e=n.n(Ie),Ae=n(811),we=n.n(Ae),De={S:400,M:700,L:-1},Le=function(e){function t(e){var n;L()(this,t),n=j()(this,F()(t).call(this,e));var r="Widget".concat(te()(re()(Q()(e.component.widgetType))," ",""));return n.WidgetComponent=y[r],n.state={isContentFolded:n.shouldBeFolded(),isEditable:n.WidgetComponent.isEditable(),isEditing:!1,isWidgetEmpty:!1,isWidgetHidden:!1,widgetSize:"m"},n.onBlur=n.onBlur.bind(M()(n)),n.onDoubleClick=n.onDoubleClick.bind(M()(n)),n.setWidgetSize=n.setWidgetSize.bind(M()(n)),n.shouldBeCollapsed=n.shouldBeCollapsed.bind(M()(n)),n.shouldBeFolded=n.shouldBeFolded.bind(M()(n)),n.shouldUseWidgetContent=n.shouldUseWidgetContent.bind(M()(n)),n.toggleWidgetContent=n.toggleWidgetContent.bind(M()(n)),n.widgetRef=Object(B.createRef)(),n}var n;return $()(t,e),N()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.addEntity,n=e.component;this.handleAsyncWidgetEmpty(),t(n)}},{key:"shouldComponentUpdate",value:function(e,t){return!ae()(e,this.props)||!ae()(t,this.state)}},{key:"componentDidUpdate",value:function(){this.setWidgetSize(),this.handleAsyncWidgetEmpty()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.removeEntity,n=e.component;t({uuid:n.uuid})}},{key:"onBlur",value:function(){this.setState({isEditing:!1})}},{key:"onDoubleClick",value:function(){Object(de.o)()&&this.setState({isEditing:!0})}},{key:"getWidgetClass",value:function(){var e,t,n=this.props.component,r=this.state,i=r.isContentFolded,a=r.isEditable,o=r.isEditing,s=r.isWidgetEmpty,c=r.widgetSize,l=n.properties,u=l.class,d=void 0===u?"":u,p=l.fullHeight,f=void 0!==p&&p,g=l.style,m=void 0===g?{}:g,v=l.viewMode,h=l.viewModeVariant,y=V()(m,"content.theme","light"),E=Boolean(V()(m,"content.height")),b=d.split(",").map((function(e){var t=e.trim();if(t.length>0)return"widget--".concat(t)}));return H.a.apply(void 0,["widget"].concat(w()(b),["widget-".concat(n.uuid),"widget-".concat(n.widgetType),"widget--".concat(c),"widget--theme-".concat(y),n.style&&"widget--shared-".concat((t=n.style,Object(de.z)(V()(_e()(ve.a.displayList("widget"),{id:t}),"name")))),(e={"widget--has-custom-height":E,"widget--has-footer":this.shouldDisplayFooter(),"widget--has-header":this.shouldDisplayHeader(),"widget--is-empty":s&&!o,"widget--is-collapsible":this.shouldBeCollapsed()&&this.shouldDisplayHeader(),"widget--is-folded":!Object(de.o)()&&i,"widget--is-full-height":f,"widget-editable":a,"widget-editable--is-editing":a&&o},_()(e,"widget--view-mode-".concat(v),v),_()(e,"widget--view-mode-variant-".concat(h),h),e)]))}},{key:"setWidgetSize",value:function(e){if(e||this.currentNodeRef){this.currentNodeRef=e||this.currentNodeRef;var t=function(e){var t=Ce()(De);if(we()(e)){var n=Object(de.D)(e);Se()(De,(function(e,r){if(n<=e)return t=r,!1}))}return t.toLowerCase()}(this.currentNodeRef),n=this.state.widgetSize;n!==t&&this.setState({widgetSize:t})}}},{key:"shouldBeCollapsed",value:function(){var e=this.props.component;return V()(e,"properties.isCollapsible",!0)}},{key:"shouldDisplayFooter",value:function(){var e=this.props.component,t=V()(e,"properties.more.label",{}),n=V()(e,"properties.noFallback",!1),r=n?t[Object(fe.b)("current")]:Object(fe.h)(t);return Object(de.o)()?Object(fe.c)(t,Object(fe.a)()):Boolean(r)}},{key:"shouldDisplayHeader",value:function(){var e=this.props.component,t=e&&e.title||{},n=V()(e,"properties.noFallback",!1),r=n?t[Object(fe.b)("current")]:Object(fe.h)(t);return Object(de.o)()?Object(fe.c)(t,Object(fe.a)()):Boolean(r)}},{key:"shouldBeFolded",value:function(){var e=this.props.component;return this.shouldDisplayHeader()&&this.shouldBeCollapsed()&&V()(e,"properties.isClosed")}},{key:"toggleWidgetContent",value:function(){var e=this.state.isContentFolded;this.shouldBeCollapsed()&&this.setState({isContentFolded:!e})}},{key:"shouldUseWidgetContent",value:function(){var e=this.WidgetComponent,t=e.isWidgetEmpty,n=e.isWidgetHidden;return q()(t)&&q()(n)}},{key:"handleAsyncWidgetEmpty",value:(n=S()(C.a.mark((function e(){var t,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.WidgetComponent,n=t.isWidgetEmpty,r=t.isWidgetHidden,n&&r){e.next=3;break}return e.abrupt("return");case 3:return e.t0=this,e.next=6,Promise.resolve(n(this.props));case 6:return e.t1=e.sent,e.next=9,Promise.resolve(r(this.props));case 9:e.t2=e.sent,e.t3={isWidgetEmpty:e.t1,isWidgetHidden:e.t2},e.t0.setState.call(e.t0,e.t3);case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.isEditable,n=e.isEditing,i=e.isWidgetEmpty,a=e.isWidgetHidden,o=e.widgetSize,s=this.props,c=s.component,l=(s.state,s.widgetStyle),u=b()(s,["component","state","widgetStyle"]);if(!this.WidgetComponent)return null;var d=Object(B.createElement)(this.WidgetComponent,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isEditing:n,isMainWidget:c.isMainWidget,onBlur:this.onBlur,properties:c.properties||{},theme:V()(c,"properties.style.content.theme","light"),uuid:c.uuid,widgetSize:o,widgetType:c.widgetType},u));return(!a||c.properties.noResults||Object(de.o)())&&W.a.createElement("div",{ref:this.setWidgetSize,className:this.getWidgetClass({isEditable:t,isWidgetEmpty:i}),style:l,onDoubleClick:t?this.onDoubleClick:J.a},this.shouldDisplayHeader()&&W.a.createElement(he,{icon:V()(c.properties,"headerIcon"),style:V()(c.properties,"style.header",{}),title:c.title,toggleWidgetContent:this.toggleWidgetContent}),this.shouldUseWidgetContent()?W.a.createElement(ue.a,{isDesignerMode:Object(de.o)(),isEditing:n,isWidgetEmpty:i,properties:c.properties,setWidgetSize:this.setWidgetSize,widgetType:c.widgetType},d):d,this.shouldDisplayFooter()&&W.a.createElement(be,{component:c,icon:V()(c.properties,"footerIcon"),more:c.properties.more,state:c.state,style:V()(c.properties,"style.footer",{})}))}}]),t}(B.Component);Le.propTypes=le.a,Le.defaultProps={components:{properties:{}}};var Pe=Object(G.connect)((function(e){return{widgetEntities:e.widgets.entities}}),{addEntity:ce.e,removeEntity:ce.i})(Le),Ne=n(383),Re=n(389),je=n(49),ke=a({},le.a,{component:Object(pe.shape)(a({},le.a.component,{properties:Object(pe.shape)(a({},le.a.component.properties,{limitConversation:pe.bool,numberConversations:pe.number}))}))}),Fe=Object(pe.shape)({id:pe.string.isRequired,name:pe.string.isRequired,provider:pe.string}),Ue=Object(pe.shape)({channelUrl:pe.string,id:pe.string.isRequired,name:pe.string.isRequired,provider:pe.string}),Me=n(434),xe=n.n(Me),$e=n(490),Be=n(373),We=function(e){var t=e.channel;return W.a.createElement("div",{className:"channel-block__header"},W.a.createElement("div",{className:"channel-block__thumbnail"},W.a.createElement(Be.a,{size:"s",value:t.name,type:"roundedSquare"})),W.a.createElement("div",{className:"channel-block__name"},t.name),W.a.createElement(me.a,{value:"chevron-down",className:"channel-block__action custom-accordion-box__chevron"}))};We.propTypes={channel:Fe};var Ge=n(115),Ye=function(e){function t(e){var n;return L()(this,t),n=j()(this,F()(t).call(this,e)),n.openConversation=n.openConversation.bind(M()(n)),n}return $()(t,e),N()(t,[{key:"openConversation",value:function(){var e=this.props.conversation;window.open(e.channelUrl,"_blank")}},{key:"render",value:function(){var e=this.props.conversation;return W.a.createElement("div",{key:e.id,className:"conversation-block",onClick:this.openConversation},W.a.createElement("div",{className:"conversation-block__icon"},W.a.createElement(Ge.b,{value:"message-text-outline"})),W.a.createElement("div",{className:"conversation-block__title"},W.a.createElement("span",null,e.name)),W.a.createElement("div",{className:"conversation-block__action"},W.a.createElement(Ge.b,{value:"arrow-right"})))}}]),t}(B.PureComponent);_()(Ye,"propTypes",{conversation:Ue.isRequired});var He=n(492),Ke=function(e){function t(e){var n;return L()(this,t),n=j()(this,F()(t).call(this,e)),n.state={hasMore:!1,isConversationsLoading:!1,listConversations:[],page:1,showMore:!1},n.onOpenChannel=n.onOpenChannel.bind(M()(n)),n.showMoreConversations=n.showMoreConversations.bind(M()(n)),n}var n,r;return $()(t,e),N()(t,[{key:"onOpenChannel",value:(r=S()(C.a.mark((function e(){var t,n,r,i,a,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.properties,r=void 0===n?{}:n,i=t.channel,a=this.state.listConversations,!(a.length>0)){e.next=4;break}return e.abrupt("return");case 4:return this.setState({isConversationsLoading:!0}),e.next=7,Object(Ne.a)(r.provider,i.id,r.numberConversations);case 7:o=e.sent,this.setState({hasMore:o.more,isConversationsLoading:!1,listConversations:o.items});case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"showMoreConversations",value:(n=S()(C.a.mark((function e(){var t,n,r,i,a,o,s,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.properties,r=void 0===n?{}:n,i=t.channel,a=this.state,o=a.page,s=a.listConversations,o+=1,this.setState({isConversationsLoading:!0}),e.next=6,Object(Ne.a)(r.provider,i.id,r.numberConversations,o);case 6:c=e.sent,s=xe()(s,c.items),this.setState({hasMore:c.more,isConversationsLoading:!1,listConversations:s,page:o});case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.channel,t=this.state,n=t.listConversations,r=t.isConversationsLoading,i=t.hasMore;return W.a.createElement("div",{key:e.id,className:"channel-block"},W.a.createElement($e.a,{border:!1,customHeader:W.a.createElement(We,{channel:e}),customParams:e,customToggleAction:this.onOpenChannel,label:e.name},r?W.a.createElement(He.a,{isLoading:r}):W.a.createElement(B.Fragment,null,n.map((function(e){return W.a.createElement(Ye,{key:e.id,conversation:e})})),i&&W.a.createElement("div",{className:"channel-block__show-more show-more-channel",onClick:this.showMoreConversations},W.a.createElement("div",{className:"show-more-channel__button"},Object(fe.h)("GLOBAL.MORE"))))))}}]),t}(B.PureComponent);_()(Ke,"propTypes",{channel:Fe.isRequired,properties:pe.object.isRequired});var Ve=n(241),ze=function(e){function t(e){var n;return L()(this,t),n=j()(this,F()(t).call(this,e)),n.state={channels:[],isLoading:!1},n}return $()(t,e),N()(t,null,[{key:"isEditable",value:function(){return!0}},{key:"isWidgetHidden",value:function(e){return!Object(je.f)()||Object(je.g)()||!Object(je.h)()||t.isWidgetEmpty(e)}},{key:"isWidgetEmpty",value:function(e){var t=e.component,n=t.properties,r=n.selectedChannels,i=n.sourceType;return i===Re.SOURCE_TYPES.CUSTOM&&0===r.length}}]),N()(t,[{key:"componentDidMount",value:function(){Object(je.f)()&&!Object(je.g)()&&Object(je.h)()&&this.initChannels()}},{key:"initChannels",value:function(){var e=this,t=this.props,n=t.value,r=t.properties,i=r.limitConversation,a=r.numberConversations,o=r.sourceType;if(o!==Re.SOURCE_TYPES.CUSTOM){var s=i?a:-1;this.setState({isLoading:!0}),Object(Ne.b)({maxResults:s,provider:"teams"}).then((function(t){var n=t.items;e.setState({channels:n,isLoading:!1})}))}else this.setState({channels:n})}},{key:"render",value:function(){var e=this.props.properties,t=this.state,n=t.channels,r=t.isLoading;return W.a.createElement("div",{className:"widget-channel-list__list"},n&&n.map((function(t){return W.a.createElement(Ke,{key:t.id,channel:t,properties:e})})),r&&W.a.createElement(Ve.b,{isLoading:r}))}}]),t}(B.PureComponent);_()(ze,"propTypes",ke);var qe=n(8),Xe=n.n(qe),Qe=n(41),Ze=n.n(Qe),Je=n(1),et=n(12),tt=n(27),nt=n.n(tt),rt=n(686),it=n(141),at=n(194),ot=n(168),st=n(400),ct=n(32),lt=n(48),ut=n(609),dt=n.n(ut),pt=function(e,t){return t&&[lt.e.SLACK.id,lt.e.FBWORKPLACE.id].includes(e)?t.map((function(e){return function(e){return e.thumbnailUrl?W.a.createElement("a",{href:e.contentUrl,target:"_blank",rel:"noopener noreferrer"},e.name,W.a.createElement("img",{alt:e.name,src:e.thumbnailUrl,onError:function(e){e.target.onerror=null,e.target.src!==dt.a&&(e.target.src=dt.a)}})):e.previewUrl?W.a.createElement("a",{href:e.contentUrl,target:"_blank",rel:"noopener noreferrer"},e.name,W.a.createElement(st.a,{alt:e.name,image:e.previewUrl,size:ct.h.l})):e.contentUrl?W.a.createElement("a",{href:e.contentUrl,target:"_blank",rel:"noopener noreferrer"},e.name):""}(e)})):""},ft=function(e,t,n){if(!e)return t?W.a.createElement("div",null,pt(n,t)):W.a.createElement(W.a.Fragment,null);var r,i,a=e.content;switch(e.contentType){case lt.b.HTML:return n===lt.e.YAMMER.id&&(r=a,i=document.createElement("textarea"),i.innerHTML=r,a=i.value),W.a.createElement("div",null,W.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}}),W.a.createElement("div",null,pt(n,t)));default:return W.a.createElement("div",null,a,W.a.createElement("div",null,pt(n,t)))}},gt=function(e){return e&&e.contentType?e.contentType:lt.b.HTML},mt=function(e,t){return e.lastModifiedDateTime?Ze()(new Date(e.lastModifiedDateTime)).utc()>=t:Ze()(new Date(e.createdDateTime)).utc()>=t},vt=function(e,t){return!(e!==lt.e.SLACK.id||!Object(je.f)()||!t.includes("slack"))||(!(e!==lt.e.TEAMS.id||!Object(je.f)()||Object(je.g)()||!Object(je.h)())||(!(e!==lt.e.YAMMER.id||!Object(je.f)()||Object(je.g)()||!Object(je.h)()||!t.includes("yammer"))||!(e!==lt.e.FBWORKPLACE.id||!Object(je.f)()||!t.includes("workplace"))))},ht=n(606),yt=n(680),Et=n.n(yt),bt=n(813),Ot=n.n(bt),Ct=n(246),Tt=function(e){var t=e.fetchFroala,n=e.froala,r=e.isEmojiEditorOpened,i=e.model,a=e.provider,o=e.setEmojiEditorOpened,s=e.sendMessage,c=e.setModel,l=e.uuid;Object(B.useEffect)((function(){n.isLoaded||n.isLoading||t()}),[t,n]);var u=["bold","italic","formatUL"],d={attribution:!1,autofocus:!0,charCounterCount:!1,editorClass:"widget-chat__froala-editor",embedlyKey:Ct.FroalaSettings.key,height:50,htmlExecuteScripts:!1,multiLine:!0,placeholderText:Object(fe.h)("FRONT.CHAT.MESSAGE_PLACEHOLDER"),toolbarButtons:u,toolbarButtonsMD:u,toolbarButtonsSM:u,toolbarButtonsXS:u,toolbarInline:!0},p=function(e){c({model:e,uuid:l})};return W.a.createElement("div",{className:"widget-chat__footer widget-chat-footer"},W.a.createElement("div",{id:"toolbar-container"}),a===lt.e.YAMMER.id&&W.a.createElement("div",{className:"widget-chat-footer__textarea-container"},W.a.createElement("textarea",{className:"widget-chat-footer__textarea",placeholder:Object(fe.h)("FRONT.CHAT.MESSAGE_PLACEHOLDER"),value:i,onChange:function(e){return p(e.currentTarget.value)}})),a!==lt.e.YAMMER.id&&n.isLoaded&&W.a.createElement(Et.a,{config:d,model:i,onModelChange:p}),W.a.createElement("div",{className:"widget-chat-footer__actions"},W.a.createElement("div",null,r&&W.a.createElement(Ot.a,{onEmojiClick:function(e){var t=document.createElement("div");t.innerHTML="&#x".concat(e,";");var n=t.innerText;p("".concat(i," ").concat(n)),o({isEmojiEditorOpened:!1,uuid:l})}}),W.a.createElement(Je.IconButton,{emphasis:Je.Emphasis.low,icon:et.bb,size:Je.Size.m,onClick:function(){o({isEmojiEditorOpened:!r,uuid:l})}})),W.a.createElement("div",null,W.a.createElement(Je.IconButton,{emphasis:Je.Emphasis.low,icon:et.Cc,size:Je.Size.m,onClick:function(){return s()},label:""}))))};Tt.propTypes={fetchFroala:pe.func.isRequired,froala:Object(pe.shape)().isRequired,isEmojiEditorOpened:pe.bool.isRequired,model:pe.string.isRequired,provider:pe.string.isRequired,sendMessage:pe.func.isRequired,setEmojiEditorOpened:pe.func.isRequired,setModel:pe.func.isRequired,uuid:pe.string.isRequired};var St={fetchFroala:ht.a},It=Object(G.connect)((function(e){var t=e.froala;return{froala:t}}),St)(Tt),_t=Object(G.connect)((function(e,t){var n=t.channelUrl;return{channelUrl:n}}))((function(e){var t=e.channelUrl;return W.a.createElement("div",{className:"widget-chat-advise-join-channel widget-chat__advise-join"},W.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},W.a.createElement("p",null,Object(fe.h)("FRONT.WIDGET_CHAT.LABEL_ADVISE_JOIN_CHANNEL"))))})),At=function(e){var t=e.channelUrl,n=e.currentSize,r=e.notificationCount,i=e.openState,a=e.position,o=e.uuid,s=e.selectedThread,c=e.setCurrentSize,l=e.setOpen,u=e.setSelectedThread,d=e.theme,p=e.titleName;return t=t&&t.replace("+",""),W.a.createElement("div",{className:"widget-chat__header widget-chat-header"},W.a.createElement("div",{className:"widget-chat-header__title"},(!s||!i)&&W.a.createElement("a",{className:"widget-chat-header__link",href:t,rel:"noopener noreferrer",target:"_blank"},W.a.createElement("div",{className:"widget-chat-header__icon"})),i&&!se()(V()(s,"id"))&&W.a.createElement("div",{className:"widget-chat-header__return-button"},W.a.createElement("a",{href:"#".concat(s.id)},W.a.createElement(Je.IconButton,{color:d,emphasis:Je.Emphasis.low,icon:et.o,size:Je.Size.m,onClick:function(){return u({selectedThread:null,uuid:o})},label:""}))),W.a.createElement("div",{className:"widget-chat-header__title"},W.a.createElement("span",null,Object(fe.h)(p)),!i&&r>0&&W.a.createElement("div",{className:"widget-chat-header__notifications"},r))),a===lt.c.STICKY&&W.a.createElement("div",{className:"widget-chat-header__actions"},i&&n===lt.f.SMALL&&W.a.createElement(W.a.Fragment,null,W.a.createElement(Je.IconButton,{color:d,emphasis:Je.Emphasis.low,icon:et.n,size:Je.Size.m,onClick:function(){return c({size:lt.f.LARGE,uuid:o})},label:""}),W.a.createElement(Je.IconButton,{color:d,emphasis:Je.Emphasis.low,icon:et.D,size:Je.Size.m,onClick:function(){return l({isOpen:!1,uuid:o})},label:""})),!i&&W.a.createElement(Je.IconButton,{color:d,emphasis:Je.Emphasis.low,icon:et.G,size:Je.Size.m,onClick:function(){return l({isOpen:!0,uuid:o})},label:""}),i&&n===lt.f.LARGE&&W.a.createElement(W.a.Fragment,null,W.a.createElement(Je.IconButton,{color:d,emphasis:Je.Emphasis.low,icon:et.j,size:Je.Size.m,onClick:function(){return c({size:lt.f.SMALL,uuid:o})},label:""}),W.a.createElement(Je.IconButton,{color:d,emphasis:Je.Emphasis.low,icon:et.D,size:Je.Size.m,onClick:function(){return l({isOpen:!1,uuid:o})},label:""}))))},wt=function(e){var t,n=e.addNewPost,r=e.uuid,i=e.bodyContentType,a=e.size,s=e.fetchMessagesForChannel,c=e.createMessageForChannel,l=e.getChannelById,u=e.getUserTokenStatus,d=e.hasUserJoinedChannel,p=e.fetchChat,f=e.provider,g=e.spaceId,m=e.theme,v=e.channelId,h=e.channelUrl,y=e.position,E=e.messages,b=e.model,O=e.lastClosed,T=e.setLastClosed,I=e.channels,_=e.isOpen,A=e.topResults,w=e.isLoading,D=e.isPaginationLoading,L=e.pollInterval,P=e.hasActions,N=e.setLoading,R=e.setPaginationLoading,j=e.setSize,k=e.setOpen,F=e.setSelectedThread,U=e.selectedThread,M=e.isShown,x=e.setShow,$=e.setModel,G=e.setChannelUrl,Y=e.workspaceId,K=e.isEmojiEditorOpened,z=e.setEmojiEditorOpened,X=e.isCreateMessageLoading,Q=e.setCreateMessageLoading,Z=e.notificationCount,J=e.setNotificationCount,ee=e.userJoinedStatus,te=e.userTokenStatus,ne=e.features,re=[],ie=new rt.a,ae=Object(B.useState)(!1),oe=Xe()(ae,2),se=oe[0],ce=oe[1],le=Object(B.useState)(!1),ue=Xe()(le,2),de=ue[0],pe=ue[1],ge=Object(B.useState)(void 0),me=Xe()(ge,2),ve=me[0],he=me[1],ye=Object(B.useState)(null),Ee=Xe()(ye,2),be=Ee[0],Oe=Ee[1],Ce=Object(B.useState)(null),Te=Xe()(Ce,2),Se=Te[0],Ie=Te[1],_e=Object(B.useState)(!0),Ae=Xe()(_e,2),we=Ae[0],De=Ae[1],Le=Object(B.useState)(!1),Pe=Xe()(Le,2),Ne=Pe[0],Re=Pe[1],je=Object(B.useCallback)((function(e){t&&e&&t.scrollTo(0,e.offsetTop)}),[t]);q()(n)&&re.push({handler:function(e){var t=e.body.content||"";e.body.contentType===lt.b.HTML&&(t=ie.turndown(t)),n(void 0,void 0,t)},label:Object(fe.h)("FRONT.CHAT.CONVERT_TO_POST"),value:"CONVERT_TO_POST"});var ke=W.a.useCallback((function(){Se&&(clearInterval(Se),Ie(null)),be&&(clearInterval(be),Oe(null))}),[Se,be]),Fe=W.a.useCallback((function(e,t){s({callId:U?U.id:void 0,channelId:v,chatMessageId:U?U.id:void 0,maxResults:A,page:1,provider:f,spaceId:g}).then((function(){N({isLoading:!1,uuid:r})}));var n=setInterval(S()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({callId:U?U.id:void 0,channelId:v,chatMessageId:U?U.id:void 0,maxResults:A,page:1,provider:f,spaceId:g});case 2:case"end":return e.stop()}}),e)}))),L);return t(n),function(){clearInterval(e),t(null)}}),[s,N,v,L,f,g,A,r,U]);Object(B.useEffect)((function(){return function(){ke()}}),[ke]),Object(B.useEffect)((function(){y!==lt.c.STICKY&&k({isOpen:!0,uuid:r})}),[k,r,y]),Object(B.useEffect)((function(){Y&&p({id:Y})}),[p,Y]),Object(B.useEffect)((function(){se||(f===lt.e.SLACK.id?u({provider:f,spaceId:g}):ce(!0))}),[u,ce,se,f,g]),Object(B.useEffect)((function(){g&&te&&g in te&&ce(V()(te[g],"is_connected",!1))}),[g,te]),Object(B.useEffect)((function(){se&&f&&g&&v&&d({provider:f,spaceId:g,channelId:v})}),[d,se,f,g,v]),Object(B.useEffect)((function(){f!==lt.e.FBWORKPLACE.id?void 0!==ee&&(De(!ee),Re(!ee)):De(!0)}),[De,f,ee]),Object(B.useEffect)((function(){se&&f&&g&&v&&l({channelId:v,provider:f,spaceId:g})}),[l,se,f,g,v]),Object(B.useEffect)((function(){if(I&&I.items&&!de){var e=I.items.find((function(e){return e&&e.id===v}));e&&(he(e.name),G({channelUrl:e.channelUrl,uuid:r}),x({isShown:!0,uuid:r}),pe(!0))}}),[pe,G,x,he,de,v,I,I.items,r]),Object(B.useEffect)((function(){!de||be||U||(Se&&(clearInterval(Se),Ie(null)),Fe(be,Oe))}),[Ie,Fe,de,Se,U,be]),Object(B.useEffect)((function(){U&&!Se&&(N({isLoading:!0,uuid:r}),be&&(clearInterval(be),Oe(null)),Fe(Se,Ie))}),[N,Ie,Fe,Se,U,be,r]),Object(B.useEffect)((function(){if(E&&E.items&&!_){var e=function(e,t){return e.filter((function(e){return mt(e,t)})).length}(E.items,O);J({notificationCount:e,uuid:r})}}),[_,O,E,J,r]),Object(B.useEffect)((function(){_||(J({notificationCount:0,uuid:r}),T({lastClosed:Ze()(new Date).utc(),uuid:r})),t&&_&&je(t.lastElementChild)}),[_,t,je,T,J,r]),Object(B.useEffect)((function(){t&&M&&je(t.lastElementChild)}),[w,M,t,je]);if(!vt(f,ne))return null;var Ue,Me,xe=function(e){return W.a.createElement("ul",null,re.map((function(t,n){return W.a.createElement(at.a,{id:n,key:t.value,value:t,ChoiceComponent:o,onClick:function(){return t.handler(e)}})})))},$e=function(e){if(e.avatar)switch(e.avatar.contentType){case lt.a.URL:default:return e.avatar.content}if([lt.e.SLACK.id,lt.e.FBWORKPLACE.id].includes(f))return it.InitialSettings.DEFAULT_AVATAR;var t=e.sender.user.id;return"/chat/avatar/".concat(f,"/").concat(t)},Be=function(e){return U?W.a.createElement("div",{className:"widget-chat-content__actions widget-chat-content-actions"},W.a.createElement("div",{className:"widget-chat-content-actions__reactions"},Object(ot.d)(e)),W.a.createElement("div",{className:" widget-chat-content-actions__menu"},re&&re.length>0&&W.a.createElement(at.b,{align:"right",toggle:W.a.createElement(Je.IconButton,{emphasis:Je.Emphasis.low,icon:et.V,size:Je.Size.s,label:""})},xe(e)))):W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"widget-chat-content__actions widget-chat-content-actions"},W.a.createElement("div",null,W.a.createElement(Je.Button,{emphasis:Je.Emphasis.low,leftIcon:et.Ac,size:Je.Size.s,onClick:function(){return F({selectedThread:e,uuid:r})}},Object(fe.h)("FRONT.CHAT.LOAD_REPLIES"))),W.a.createElement("div",{className:"widget-chat-content-actions__reactions"},Object(ot.d)(e)),W.a.createElement("div",{className:"widget-chat-content-actions__menu"},re&&re.length>0&&W.a.createElement(at.b,{align:"right",toggle:W.a.createElement(Je.IconButton,{emphasis:Je.Emphasis.low,icon:et.V,size:Je.Size.s,label:""})},xe(e)))))};return M?W.a.createElement("div",{className:H()("widget-chat","widget-chat--provider-".concat(f),"widget-chat--position-".concat(y),y===lt.c.STICKY?"widget-chat--size-".concat(a," widget-chat--state-").concat(_?"open":"closed"):"")},W.a.createElement(At,{channelUrl:h,currentSize:a,notificationCount:Z,openState:_,position:y,selectedThread:U,setCurrentSize:j,setOpen:k,setSelectedThread:F,theme:m,titleName:ve,uuid:r}),W.a.createElement("div",{className:"widget-chat--collapse ".concat(y===lt.c.STICKY&&!_&&"hidden")},W.a.createElement("div",{ref:function(e){return e&&(t=e)},className:H()("widget-chat__content","widget-chat-content","widget-chat-content--".concat(we?"read-only":"write-enabled"),"".concat(Ne?"widget-chat-content--advise-join-channel":"")),onScroll:function(e){var n=E;if(U&&(n=E.replies&&E.replies[U.id]?E.replies[U.id]:void 0),n&&!w&&!D&&n.more&&0===e.target.scrollTop){var i=encodeURIComponent(n.cursor),a=t.firstElementChild;R({isPaginationLoading:!0,uuid:r}),s({callId:U?U.id:void 0,channelId:v,chatMessageId:U?U.id:void 0,cursor:i,maxResults:A,page:n.page+1,provider:f,spaceId:g}).then((function(){R({isPaginationLoading:!1,uuid:r}),je(a)}))}}},(w||D)&&W.a.createElement(Je.Progress,{className:"centered-loader"}),!w&&E&&nt()(E.items)&&W.a.createElement("div",{className:"widget-chat--empty"},W.a.createElement("div",null,W.a.createElement("div",{className:"widget-chat--empty-icon"},W.a.createElement(Je.Icon,{icon:et.O,size:Je.Size.l})),W.a.createElement("div",{className:"widget-chat--empty-text"},Object(fe.h)("FRONT.WIDGET_CHAT.LABEL_EMPTY_CHAT")))),!w&&E&&E.items&&!nt()(E.items)&&!U&&E.items.map((function(e){return e.body&&e.body.content||e.attachments?W.a.createElement("div",{key:e.id,className:"widget-chat__message",id:e.id},W.a.createElement(Je.CommentBlock,{hasActions:!0,isOpen:!0,actions:Be(e),avatarProps:{image:$e(e),alt:e.sender.user.displayName},contentType:gt(e.body),date:Ze()(e.createdDateTime).format(Object(fe.h)("SIMPLE_DATE_FORMAT_COMPLETE")),isRelevant:mt(e,O),name:e.sender.user.displayName,text:ft(e.body,e.attachments,f),theme:m})):W.a.createElement("div",{className:"widget-chat__message"},W.a.createElement(Je.CommentBlock,{text:Object(fe.h)("FRONT.WIDGET_CHAT.LABEL_DELETED_MESSAGE"),theme:m}))})),!w&&E&&E.items&&!nt()(E.items)&&U&&W.a.createElement("div",{key:U.id,className:"widget-chat__message"},W.a.createElement(Je.CommentBlock,{isOpen:!0,actions:Be(U),avatarProps:{image:$e(U),alt:U.sender.user.displayName},contentType:gt(U.body),date:Ze()(U.createdDateTime).format(Object(fe.h)("SIMPLE_DATE_FORMAT_COMPLETE")),hasActions:P,isRelevant:mt(U,O),name:U.sender.user.displayName,text:ft(U.body,U.attachments,f),theme:m},(Ue=U,Me=E.replies,!Me||nt()(Me[Ue.id])||nt()(Me[Ue.id].items)?[]:Me[Ue.id].items.map((function(e){return e.body&&e.body.content&&W.a.createElement(Je.CommentBlock,{key:e.id,actions:Be(e),avatarProps:{image:$e(e),alt:e.sender.user.displayName},contentType:gt(e.body),date:Ze()(e.createdDateTime).format(Object(fe.h)("SIMPLE_DATE_FORMAT_COMPLETE")),hasActions:P,isRelevant:mt(e,O),name:e.sender.user.displayName,text:ft(e.body,e.attachments,f),theme:m})}))))),X&&W.a.createElement(Je.Progress,{className:"centered-loader"}))),!we&&W.a.createElement(It,{isEmojiEditorOpened:K,model:b,provider:f,sendMessage:function(){if(0!==b.length){Q({isCreateMessageLoading:!0,uuid:r}),je(t.lastElementChild),$({model:"",uuid:r});var e=b,n=i;if(f===lt.e.SLACK.id&&n===lt.b.HTML){var a=new rt.a({bulletListMarker:"-",emDelimiter:"_",strongDelimiter:"*"});a.addRule("strikethrough",{filter:["strike"],replacement:function(e){return"~".concat(e,"~")}}),e=a.turndown(b),n=lt.b.MARKDOWN}c({body:e,bodyContentType:n,channelId:v,chatMessageId:U&&U.id,provider:f,spaceId:g}).then((function(){s({callId:U&&U.id,channelId:v,chatMessageId:U&&U.id,maxResults:A,page:1,provider:f,spaceId:g}).then((function(){Q({isCreateMessageLoading:!1,uuid:r}),je(t.lastElementChild)}))}))}},setEmojiEditorOpened:z,setModel:$,uuid:r}),Ne&&W.a.createElement(_t,{channelUrl:h})):null};wt.propTypes={addNewPost:pe.func,bodyContentType:pe.string,channelId:pe.string,channelUrl:pe.string,channels:Object(pe.shape)({items:Object(pe.arrayOf)(Object(pe.shape)({channelUrl:pe.string,description:pe.string,id:pe.string,name:pe.string})),more:pe.bool,page:pe.number,provider:pe.string,spaceId:pe.string}),createMessageForChannel:pe.func.isRequired,fetchChat:pe.func,fetchMessagesForChannel:pe.func.isRequired,hasActions:pe.bool,isCreateMessageLoading:pe.bool,isEmojiEditorOpened:pe.bool,isLoading:pe.bool,isOpen:pe.bool,isPaginationLoading:pe.bool,isShown:pe.bool,lastClosed:Object(pe.instanceOf)(Ze.a),messages:Object(pe.shape)({channelId:pe.string,cursor:pe.string,items:Object(pe.arrayOf)(Object(pe.shape)({attachments:Object(pe.arrayOf)(Object(pe.shape)({content:pe.string,contentType:pe.string,id:pe.string})),body:Object(pe.shape)({content:pe.string,contentType:pe.string}),createdDateTime:pe.string,etag:pe.string,id:pe.string,importance:pe.string,locale:pe.string,sender:Object(pe.shape)({user:Object(pe.shape)({displayName:pe.string,id:pe.string,userIdentityType:pe.string})}),subject:pe.string})),more:pe.bool,page:pe.number,provider:pe.string,spaceId:pe.string}),model:pe.string,notificationCount:pe.number,pollInterval:pe.number,position:pe.string,provider:pe.string,selectedThread:Object(pe.shape)({}),setChannelUrl:pe.func,setCreateMessageLoading:pe.func,setEmojiEditorOpened:pe.func,setLastClosed:pe.func,setLoading:pe.func,setModel:pe.func,setNotificationCount:pe.func,setOpen:pe.func,setPaginationLoading:pe.func,setSelectedThread:pe.func,setShow:pe.func,setSize:pe.func,size:pe.string,spaceId:pe.string,theme:pe.string,topResults:pe.number,userJoinedStatus:pe.bool,userTokenStatus:Object(pe.shape)(),uuid:pe.string,workspaceId:pe.string,features:Object(pe.arrayOf)(pe.string)},wt.defaultProps={addNewPost:null,bodyContentType:lt.b.HTML,channelId:null,channelUrl:null,channels:null,fetchChat:null,hasActions:!1,isCreateMessageLoading:!1,isEmojiEditorOpened:!1,isLoading:!0,isOpen:!1,isPaginationLoading:!1,isShown:!1,lastClosed:Ze()(new Date).utc(),messages:null,model:"",notificationCount:0,pollInterval:2e3,position:lt.c.DEFAULT,provider:null,selectedThread:null,setChannelUrl:null,setCreateMessageLoading:null,setEmojiEditorOpened:null,setLastClosed:null,setLoading:null,setModel:null,setNotificationCount:null,setOpen:null,setPaginationLoading:null,setSelectedThread:null,setShow:null,setSize:null,size:lt.f.SMALL,spaceId:null,theme:Je.Theme.light,topResults:10,userJoinedStatus:void 0,userTokenStatus:null,uuid:null,workspaceId:null,features:[]},wt.isEditable=function(){return!1},wt.isWidgetEmpty=function(e){return void 0===e.provider||void 0===e.spaceId||void 0===e.channelId},wt.isWidgetHidden=function(e){return!vt(e.provider,e.features)||wt.isWidgetEmpty(e)};var Dt=n(46),Lt=n(433),Pt=function(e,t,n){return n?e[t]&&e[t][n]||{}:e[t]||{}},Nt=Object(G.connect)((function(e,t){var n=t.workspaceId,r=t.uuid,i=t.channelUrl,a=t.channelId,o=t.provider,c=t.spaceId,l=t.size,u=t.isOpen,d=t.topResults,p=t.selectedThread,f=t.isEmojiEditorOpened,g=t.isLoading,m=t.isPaginationLoading,v=t.model,h=t.notificationCount,y=t.lastClosed,E=t.isShown,b=t.isCreateMessageLoading,O=V()(e.workspaces.list,n,{}),C=O.chat,T=void 0===C?{}:C;o=o||T.provider,a=a||T.chanId,c=c||T.apiId;var S=lt.g[o],I=Pt(e.chats,"providers"),A=Pt(I,o,"userSpaces"),w=Pt(A,c,"channels"),D=Pt(e.chats,"components",r),L=Pt(w,a,"messages"),P=w,N=Pt(e.chats,"userTokenStatus"),R=Pt(N,o),j=Pt(e.chats,"userJoinedStatus"),k=Pt(j,o),F=Pt(k,c),U=V()(F,a,void 0),M=V()(e.customer,"features");l=void 0===D.size?l:D.size,u=void 0===D.isOpen?u:D.isOpen,p=void 0===D.selectedThread?p:D.selectedThread,g=void 0===D.isLoading?g:D.isLoading,m=void 0===D.isPaginationLoading?m:D.isPaginationLoading,v=void 0===D.model?v:D.model,E=void 0===D.isShown?E:D.isShown,y=void 0===D.lastClosed?y:D.lastClosed,b=void 0===D.isCreateMessageLoading?b:D.isCreateMessageLoading,h=void 0===D.notificationCount?h:D.notificationCount,f=void 0===D.isEmojiEditorOpened?f:D.isEmojiEditorOpened,i=void 0===D.channelUrl?i:D.channelUrl;var x={channelUrl:i,channels:P,isCreateMessageLoading:b,isEmojiEditorOpened:f,isLoading:g,isOpen:u,isPaginationLoading:m,isShown:E,lastClosed:y,messages:L,model:v,notificationCount:h,pollInterval:S,selectedThread:p,size:l,topResults:d,userJoinedStatus:U,userTokenStatus:R,features:M};return T.provider&&T.chanId&&T.apiId&&Object.assign(x,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},x,{channelId:T.chanId,provider:T.provider,spaceId:T.apiId})),x}),{createMessageForChannel:Dt.X,fetchChannelsForUserSpace:Dt.Z,fetchChat:Lt.a,fetchJoinedUserSpaces:Dt.ab,fetchMessagesForChannel:Dt.bb,getChannelById:Dt.fb,getUserTokenStatus:Dt.ib,hasUserJoinedChannel:Dt.jb,setChannelUrl:Dt.kb,setCreateMessageLoading:Dt.lb,setEmojiEditorOpened:Dt.mb,setLastClosed:Dt.nb,setLoading:Dt.ob,setModel:Dt.pb,setNotificationCount:Dt.qb,setOpen:Dt.rb,setPaginationLoading:Dt.sb,setSelectedThread:Dt.tb,setShow:Dt.ub,setSize:Dt.vb})(wt),Rt=n(271),jt=n(358),kt=n.n(jt),Ft=n(269),Ut=n(339),Mt=l({},le.a,{component:Object(pe.shape)(l({},le.a.component,{properties:Object(pe.shape)(l({},le.a.component.properties))})),isTagzEnabled:pe.bool.isRequired}),xt=function(e){function t(){return L()(this,t),j()(this,F()(t).apply(this,arguments))}return $()(t,e),N()(t,[{key:"render",value:function(){var e=this.props,t=e.properties,n=e.value,r=n.description,i=n.tagz,a=e.isTagzEnabled,o=Object(Ut.a)(r,t.noFallback),s=kt()(o,{allowedAttributes:{a:["href"],img:["src"]},allowedTags:["a","b","br","em","i","img","p","strong"]}),c={__html:s};return W.a.createElement(W.a.Fragment,null,o&&!nt()(o)&&W.a.createElement("div",{dangerouslySetInnerHTML:c,className:"widget-community-intro__content"}),a&&W.a.createElement(Ft.a,{values:i}))}}],[{key:"isEditable",value:function(){return!1}},{key:"isWidgetEmpty",value:function(e){var t=e.value;return void 0===t||!Object(Ut.a)(t)}},{key:"isWidgetHidden",value:function(e){return t.isWidgetEmpty(e)}}]),t}(B.PureComponent);_()(xt,"propTypes",Mt);var $t=Object(G.connect)((function(e){return{isTagzEnabled:Object(Rt.d)(e)}}),null)(xt),Bt=n(834),Wt=n(380),Gt=n(599),Yt=n(36),Ht=d({},le.a,{component:Object(pe.shape)(d({},le.a.component,{properties:Object(pe.shape)(d({},le.a.component.properties,{to:pe.string})),theme:pe.string}))}),Kt={isPristine:!0,value:""},Vt=function(e){return e.isPristine||void 0!==e.value&&""!==e.value.trim()},zt=function(e){var t=e.properties,n=e.theme,r=e.contentId,i=e.widgetId,a=t.to,o=Object(B.useState)(""),s=Xe()(o,2),c=s[0],l=s[1],u=Object(B.useState)(Kt),d=Xe()(u,2),p=d[0],f=d[1],g=Object(B.useState)(Kt),m=Xe()(g,2),v=m[0],h=m[1],y=Object(B.useState)(Kt),E=Xe()(y,2),b=E[0],O=E[1],T=Vt(v),I=Vt(b),_=Vt(p),A=function(){var e=S()(C.a.mark((function e(t){var n,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),void 0!==a&&""!==a){e.next=4;break}return Object(Yt.b)(Object(fe.h)("WIDGET_TYPE_CONTACT_SEND_ERROR_NO_EMAIL")),e.abrupt("return");case 4:if(n=Object(je.f)()?Object(je.c)().email:v.value,void 0!==n&&""!==n){e.next=8;break}return Object(Yt.b)(Object(fe.h)("WIDGET_TYPE_CONTACT_SEND_ERROR")),e.abrupt("return");case 8:return o="".concat(n," <br/> ").concat(p.value),e.prev=9,e.next=12,Object(Gt.a)(o,c,n,b.value,a,r,i);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),Object(Yt.b)(Object(fe.h)("WIDGET_TYPE_CONTACT_SEND_ERROR")),e.abrupt("return");case 18:l(void 0),f(Kt),h(Kt),O(Kt),Object(Yt.d)(Object(fe.h)("WIDGET_TYPE_CONTACT_SEND_SUCCESS"));case 23:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}();return W.a.createElement("form",{name:"widgetContact.form",onSubmit:A},!Object(je.f)()&&W.a.createElement("div",{className:"widget-contact__sender"},W.a.createElement(Je.TextField,{hasError:!T||!Object(de.p)(v.value)&&!v.isPristine,label:Object(fe.h)("WIDGET_TYPE_CONTACT_EMAIL"),theme:n,value:v.value,onChange:function(e){e=e&&e.target?e.target.value:e,h({isPristine:!1,value:e})}}),(!T||!Object(de.p)(v.value)&&!v.isPristine)&&W.a.createElement("span",{className:"widget-contact__error"},Object(fe.h)("SERVER_ERROR_INVALID_EMAIL"))),W.a.createElement("div",{className:"widget-contact__subject"},W.a.createElement(Je.TextField,{hasError:!I,label:Object(fe.h)("WIDGET_TYPE_CONTACT_SUBJECT"),theme:n,value:b.value,onChange:function(e){e=e&&e.target?e.target.value:e,O({isPristine:!1,value:e})}}),!I&&W.a.createElement("span",{className:"widget-contact__error"},Object(fe.h)("ERROR_MANDATORY_FIELD"))),W.a.createElement("div",{className:"widget-contact__message"},W.a.createElement(Je.TextField,{multiline:!0,useCustomColors:!0,hasError:!_,label:Object(fe.h)("WIDGET_TYPE_CONTACT_MESSAGE"),theme:n,value:p.value,onChange:function(e){e=e&&e.target?e.target.value:e,f({isPristine:!1,value:e})}}),!_&&W.a.createElement("span",{className:"widget-contact__error"},Object(fe.h)("ERROR_MANDATORY_FIELD"))),!Object(je.f)()&&W.a.createElement("div",{className:"widget-contact__captcha"},W.a.createElement(Bt.a,{sitekey:Wt.a.G_RECAPTCHA_KEY,onChange:function(e){l(e)}})),W.a.createElement("button",{className:"widget-contact__submit",disabled:""===b.value||""===p.value||""===p.value||!Object(je.f)()&&(!Object(de.p)(v.value)||void 0===c),type:"submit"},Object(fe.h)("GLOBAL.SEND")))};zt.propTypes=Ht,zt.isEditable=function(){return!1},zt.isWidgetEmpty=function(e){var t=e.value;return se()(t)||""===t},zt.isWidgetHidden=function(e){return zt.isWidgetEmpty(e)};var qt=n(63),Xt=n.n(qt),Qt=n(28),Zt=n.n(Qt),Jt=n(589),en=n(590),tn=function(e){function t(e){var n;return L()(this,t),n=j()(this,F()(t).call(this,e)),n._INITIAL_STATE={isMenuOpen:!1},n.state=Xt()(n._INITIAL_STATE),n.anchorMenuRef=Object(B.createRef)(null),n.handleOpenDeleteDialog=n.handleOpenDeleteDialog.bind(M()(n)),n.handleOpenRenameDialog=n.handleOpenRenameDialog.bind(M()(n)),n.handleCloseDeleteDialog=n.handleCloseDeleteDialog.bind(M()(n)),n.handleCloseRenameDialog=n.handleCloseRenameDialog.bind(M()(n)),n.handleValidateDeleteDialog=n.handleValidateDeleteDialog.bind(M()(n)),n.handleValidateRenameDialog=n.handleValidateRenameDialog.bind(M()(n)),n.ACTIONS_LIST=[{handler:n.handleOpenRenameDialog,label:"GLOBAL.RENAME",value:"RENAME"},{handler:n.handleOpenDeleteDialog,label:"GLOBAL.DELETE",value:"DELETE"}],n}return $()(t,e),N()(t,[{key:"toggleMenu",value:function(){var e=this.state.isMenuOpen;this.setState({isMenuOpen:!e})}},{key:"handleOpenDeleteDialog",value:function(){this.setState({openDeleteDialog:!0})}},{key:"handleOpenRenameDialog",value:function(){this.setState({openRenameDialog:!0})}},{key:"handleCloseDeleteDialog",value:function(){this.setState({openDeleteDialog:!1})}},{key:"handleCloseRenameDialog",value:function(){this.setState({openRenameDialog:!1})}},{key:"handleValidateDeleteDialog",value:function(){var e=this.props.onChange;this.handleCloseDeleteDialog(),e()}},{key:"handleValidateRenameDialog",value:function(){var e=this.props.onChange;this.handleCloseRenameDialog(),e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,r=t.media,i=t.theme,a=t.type,o=this.state,s=o.isMenuOpen,c=o.openDeleteDialog,l=o.openRenameDialog,u=r.docPath;return W.a.createElement(W.a.Fragment,null,W.a.createElement(Je.IconButton,{theme:i,disabled:n,size:Je.Size.l,emphasis:Je.Emphasis.low,icon:et.V,ref:this.anchorMenuRef,onClick:function(){return e.toggleMenu()},"aria-haspopup":!0,label:Object(fe.h)("FRONT.WIDGET.WIDGET_FILE_LIST.MENU.ARIA_LABEL"),"aria-expanded":s||void 0}),W.a.createElement(Je.Dropdown,{isOpen:s,onClose:function(){return e.toggleMenu()},anchorRef:this.anchorMenuRef},W.a.createElement(Je.List,{role:"menu"},Zt()(this.ACTIONS_LIST,(function(e){return W.a.createElement(Je.ListItem,{key:e.value,onItemSelected:e.handler,size:Je.Size.tiny,linkProps:{role:"menuitem"},role:"none"},Object(fe.h)(e.label))})))),l&&W.a.createElement(en.a,{media:r,open:l,type:a,onClose:this.handleCloseRenameDialog,onValidate:this.handleValidateRenameDialog}),c&&W.a.createElement(Jt.a,{docPath:u,open:c,type:a,onClose:this.handleCloseDeleteDialog,onValidate:this.handleValidateDeleteDialog}))}}]),t}(B.PureComponent);_()(tn,"propTypes",{disabled:pe.bool,media:pe.object.isRequired,onChange:pe.func.isRequired,theme:pe.string,type:pe.string.isRequired}),_()(tn,"defaultProps",{disabled:!1,theme:Je.Theme.light});var nn=n(38),rn=n(588),an=n(64),on=new an.a({path:"drive/files"}),sn=n(30),cn=n(226),ln=n(328),un=function(e){var t=e.title,n=e.action,r=e.onValidate,i=Object(B.useState)(!0),a=Xe()(i,2),o=a[0],s=a[1],c=Object(B.useState)(!1),l=Xe()(c,2),u=l[0],d=l[1],p=function(){var e=S()(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,n(t.name);case 4:r(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),Yt.b(Object(fe.h)("GLOBAL.ERROR.GENERIC")),r(!1);case 11:s(!1),d(!1);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return W.a.createElement(ln.a,{fullWidth:!0,label:"GLOBAL.NAME",loading:u,min:1,name:"name",open:o,title:t,value:"",onClose:function(){return r(!1)},onValidate:p})};un.propTypes={action:pe.func.isRequired,onValidate:pe.func.isRequired,title:pe.string.isRequired},un.defaultProps={};var dn=["DOCUMENT","PRESENTATION","SPREADSHEET"],pn={DOCUMENT:W.a.createElement("i",{className:"icon advanced-drive-table__file-thumb--document"}),FOLDER:W.a.createElement(Je.Icon,{icon:et.vb,size:Je.Size.xs}),PRESENTATION:W.a.createElement("i",{className:"icon advanced-drive-table__file-thumb--presentation"}),SPREADSHEET:W.a.createElement("i",{className:"icon advanced-drive-table__file-thumb--spreadsheet"}),UPLOAD:W.a.createElement(Je.Icon,{icon:et.Tc,size:Je.Size.xs})},fn={DOCUMENT:"WIDGET_TYPE_FILE_MANAGEMENT_GOOGLE_DOCUMENT",FOLDER:"FRONT.MEDIA_PICKER.HEADER_CREATE_FOLDER",PRESENTATION:"WIDGET_TYPE_FILE_MANAGEMENT_GOOGLE_PRESENTATION",SPREADSHEET:"WIDGET_TYPE_FILE_MANAGEMENT_GOOGLE_SPREADSHEET",UPLOAD:"FRONT.MEDIA_PICKER.UPLOAD_MEDIA"},gn=/provider=drive.*resource=([^/]*)/,mn=function(e){function t(e){var n;return L()(this,t),n=j()(this,F()(t).call(this,e)),n._INITIAL_STATE={newFile:null,newFolder:null},n.state=Object(nn.cloneDeep)(n._INITIAL_STATE),n.onClickHandlerFactory=n.onClickHandlerFactory.bind(M()(n)),n}return $()(t,e),N()(t,[{key:"onClickHandlerFactory",value:function(e){var t=this,n=e.type,r=e.mimeType,i=this.props.parentPath;if("FOLDER"===n){var a=this.props.isShared;return function(){t.setState({newFolder:{isShared:a,parentPath:i}})}}if("UPLOAD"===n)return function(){t.uploadComponent.selectFiles()};var o=i.match(gn)||[],s=Xe()(o,2),c=(s[0],s[1]);return dn.includes(n)&&c?function(){t.setState({newFile:{mimeType:r,parentId:c}})}:void 0}},{key:"render",value:function(){var e=this,t=this.state,n=t.newFolder,r=t.newFile,i=this.props,a=i.parentPath,o=i.onChange,s=i.onStatusChange,c=i.isDisabled,l=i.providerActions,u=Object(nn.chain)(l).map((function(t){var n=pn[t.type],r=Object(fe.h)(fn[t.type]),i=e.onClickHandlerFactory(t);if(n&&r&&i)return f({},t,{icon:n,label:r,onClick:i})})).filter(Boolean).value(),d=c||u.length<1;return W.a.createElement(B.Fragment,null,W.a.createElement(sn.r,{align:"right",toggle:W.a.createElement(sn.c,{disabled:d,size:Je.Size.s},Object(fe.h)("NEW"))},W.a.createElement("ul",null,Object(nn.map)(u,(function(e){var t=e.type,n=e.label,r=e.icon,i=e.onClick;return W.a.createElement("li",{key:t,className:"dropdown-link",onClick:i},r,W.a.createElement("span",null,n))})))),W.a.createElement(rn.a,{multiple:!0,parentPath:a,onChange:o,onRef:function(t){return e.uploadComponent=t},onStatusChange:s}),n&&W.a.createElement(un,{action:function(e){return cn.a(f({},n,{names:_()({},Object(fe.a)(),e)}))},title:"FRONT.MEDIA_PICKER.HEADER_CREATE_FOLDER",onValidate:function(t){e.setState({newFolder:null}),t&&o()}}),r&&W.a.createElement(un,{action:function(e){return t=f({},r,{title:e}),on.post("insert",t,{});var t},title:"FRONT.MEDIA_PICKER.DETAIL.FILENAME",onValidate:function(t){e.setState({newFile:null}),t&&o()}}))}}]),t}(B.PureComponent);_()(mn,"propTypes",{isDisabled:pe.bool,isShared:pe.bool,onChange:pe.func.isRequired,onStatusChange:pe.func.isRequired,parentPath:pe.string.isRequired,providerActions:Object(pe.arrayOf)(pe.object).isRequired}),_()(mn,"defaultProps",{isDisabled:!1,isShared:!1});var vn=n(407),hn=n(17),yn=n.n(hn),En=n(152),bn=n(498),On=vn.a.defaultProps.properties,Cn={captionPosition:{modes:En.b,propertyPath:["captionPosition"]},navigationType:{modes:En.c,propertyPath:["navigationType"]},viewMode:{modes:En.f,propertyPath:["viewMode"]},viewModeVariant:{modes:En.g,propertyPath:["viewModeVariant"]}},Tn=function(e){var t=e.properties,n=void 0===t?{}:t,r=e.onChange,i=function(e){return W.a.createElement(bn.b,{current:n[e]||On[e],modes:Cn[e].modes,property:Cn[e].propertyPath,onChange:r})},a=function(e){var t=n.viewMode,r=void 0===t?On.viewMode:t,i=r,a=_e()(Cn.viewMode.modes,{value:i});return yn()(a.availableOptions,e)};return W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"p+"},W.a.createElement("span",{className:"display-block mb+ fs-body-2 tc-primary"},Object(fe.h)("WIDGET_SETTINGS_VIEW_MODE")),i("viewMode")),a("viewModeVariant")&&W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"divider divider--dark"}),W.a.createElement("div",{className:"p+"},W.a.createElement("span",{className:"display-block mb+ fs-body-2 tc-primary"},Object(fe.h)("FRONT.SETTINGS.VIEW_MODE_VARIANTS")),i("viewModeVariant"))),a("captionPosition")&&W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"divider divider--dark"}),W.a.createElement("div",{className:"p+"},W.a.createElement("span",{className:"display-block mb+ fs-body-2 tc-primary"},Object(fe.h)("FRONT.SETTINGS.CAPTION")),i("captionPosition"))),W.a.createElement("div",{className:"divider divider--dark"}),W.a.createElement("div",{className:"p+"},W.a.createElement("span",{className:"display-block mb fs-body-2 tc-primary"},Object(fe.h)("FRONT.SETTINGS.OPTIONS")),a("columnCount")&&W.a.createElement(sn.z,{helpText:"".concat(Object(fe.h)("FRONT.SETTINGS.DEFAULT_VALUE_IS")," ").concat(On.columnCount),label:Object(fe.h)("WIDGET_SETTINGS_COLUMN_COUNT"),max:12,min:1,name:"columnCount",placeholder:On.columnCount,type:"number",value:n.columnCount||On.columnCount,onChange:r}),a("hasAutoplay")&&W.a.createElement("div",{className:"pt+"},W.a.createElement(Je.Switch,{checked:void 0===n.hasAutoplay?On.hasAutoplay:n.hasAutoplay,helpher:Object(fe.h)("FRONT.SETTINGS.AUTOPLAY.HELPER"),name:"hasAutoplay",position:Je.Alignment.right,onChange:function(e){return r(e,"hasAutoplay")}},Object(fe.h)("FRONT.SETTINGS.AUTOPLAY")))),a("interval")&&n.hasAutoplay&&W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"divider divider--dark"}),W.a.createElement("div",{className:"p+"},W.a.createElement(sn.z,{helpText:"".concat(Object(fe.h)("FRONT.SETTINGS.SLIDE_INTERVAL.HELPER"),"\n").concat(Object(fe.h)("FRONT.SETTINGS.DEFAULT_VALUE_IS")," ").concat(On.interval,"."),label:Object(fe.h)("FRONT.SETTINGS.SLIDE_INTERVAL"),min:1,name:"interval",placeholder:On.interval,type:"number",value:n.interval||On.interval,onChange:r}))),a("navigationControls")&&W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"divider divider--dark"}),W.a.createElement("div",{className:"p+"},W.a.createElement(Je.Switch,{checked:void 0===n.navigationControls?On.navigationControls:n.navigationControls,helper:Object(fe.h)("FRONT.SETTINGS.NAVIGATION_CONTROLS.HELPER"),name:"navigationControls",position:Je.Alignment.right,onChange:function(e){return r(e,"navigationControls")}},Object(fe.h)("FRONT.SETTINGS.NAVIGATION_CONTROLS")),n.navigationControls&&a("navigationType")&&W.a.createElement("div",{className:"pt+"},i("navigationType")))),a("orientation")&&W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"divider divider--dark"}),W.a.createElement("div",{className:"p+"},W.a.createElement("span",{className:"display-block mb fs-body-2 tc-primary"},Object(fe.h)("GLOBAL.THUMBNAIL")),W.a.createElement(sn.J,{choices:En.d,label:Object(fe.h)("FRONT.SETTINGS.ORIENTATION"),name:"orientation",placeholder:On.orientation,value:n.orientation||On.orientation,onChange:r}))))},Sn=Object(G.connect)((function(e,t){var n=t.uuid,r=_e()(e.widgets.entities,{uuid:n})||{};return{documentList:r.documentList||[],isLoading:r.isLoading||!1}}),{addEntity:ce.e,fetchImages:ce.f,fetchNextPage:ce.g,removeEntity:ce.i})(vn.a),In=n(75),_n=n.n(In),An=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},le.a),wn={link:Object(pe.shape)({description:pe.string,link:pe.string.isRequired,targetBlank:pe.bool,thumbnail:pe.string,title:pe.string.isRequired})},Dn=function(e){function t(e){var n;return L()(this,t),n=j()(this,F()(t).call(this,e)),n.handleClick=n.handleClick.bind(M()(n)),n}return $()(t,e),N()(t,[{key:"handleClick",value:function(){var e=this.props.link,t=e.link,n=e.targetBlank,r=Object(ye.b)(t.toLowerCase())?"":"http://",i=n||yn()(t,"/")||yn()(t,".")?r+t:t;n||yn()(t,"/")||yn()(t,".")?n?window.open(i,"_blank"):window.location.href=i:Object(de.v)("app.front.content-get",{slug:i})}},{key:"render",value:function(){var e=this.props.link,t=e.link,n=e.title,r=e.thumbnail,i=e.description;return W.a.createElement("li",null,W.a.createElement("a",{className:"widget-links__link",onClick:this.handleClick}),r&&W.a.createElement("div",{className:"widget-links__thumbnail",style:Object(de.h)(r,512)}),!r&&W.a.createElement(Be.a,{className:"widget-links__thumbnail widget-links__thumbnail--no-thumbnail",value:n}),W.a.createElement("div",{className:"widget-links__wrapper"},n&&W.a.createElement("span",{className:"widget-links__title"},n),!n&&W.a.createElement("span",{className:"widget-links__title"},t),i&&W.a.createElement("span",{className:"widget-links__description"},i)))}}]),t}(B.PureComponent);_()(Dn,"propTypes",wn);var Ln=function(e){var t=e.items,n=e.noFallback,r=n?Object(fe.b)("current"):void 0,i=Object(de.o)()?Object(fe.a)():r,a=Zt()(t,(function(e){var t=Object(fe.h)(e.link,void 0,i),n=Object(fe.h)(e.title,void 0,i),r=Object(fe.h)(e.description,void 0,i);return{description:r,link:t,targetBlank:e.targetBlank,thumbnail:e.thumbnail,title:n}}));return _n()(a,(function(e){return""!==e.link&&""!==e.title}))},Pn=function(e){function t(){var e,n;L()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=j()(this,(e=F()(t)).call.apply(e,[this].concat(i))),_()(M()(n),"state",{links:void 0}),n}return $()(t,e),N()(t,[{key:"componentDidMount",value:function(){this.initList()}},{key:"componentDidUpdate",value:function(e){ae()(this.props,e)||this.initList()}},{key:"initList",value:function(){var e=this.props.value,t=e.items,n=e.noFallback,r=Ln({items:t,noFallback:n});this.setState({links:r})}},{key:"render",value:function(){var e=this.state.links;return W.a.createElement("ul",{className:"widget-links__list"},Zt()(e,(function(e,t){return W.a.createElement(Dn,{key:t,link:e})})))}}],[{key:"isEditable",value:function(){return!1}},{key:"isWidgetEmpty",value:function(e){var t=e.value,n=t.items,r=t.noFallback;return 0===Ln({items:n,noFallback:r}).length}},{key:"isWidgetHidden",value:function(e){return t.isWidgetEmpty(e)}}]),t}(B.PureComponent);_()(Pn,"propTypes",An);var Nn=n(16),Rn=n.n(Nn),jn=n(130),kn=n.n(jn),Fn=n(342),Un=function(e){function t(){var e,n;L()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=j()(this,(e=F()(t)).call.apply(e,[this].concat(i))),_()(M()(n),"getRemoteServerUrl",(function(e,t){return t?"".concat(e,"/").concat(t):void 0})),n}return $()(t,e),N()(t,[{key:"render",value:function(){var e=this.props.properties,t=e.remoteExtension,n=kn()(this.props,"component");return W.a.createElement("div",{className:"remote-component"},t&&t.id&&W.a.createElement(Fn.b,Rn()({extensionId:t.id,componentType:Fn.a.content},n)),Object(de.o)()&&t&&t.needMaintenance&&W.a.createElement("p",null,"Need maintenance"))}}],[{key:"isEditable",value:function(){return!1}},{key:"isWidgetEmpty",value:function(e){var t=e.value,n=t.remoteExtension;return void 0===n||""===t||!n.enabled}},{key:"isWidgetHidden",value:function(e){return t.isWidgetEmpty(e)}}]),t}(B.PureComponent),Mn=n(519),xn=v({},le.a,{component:Object(pe.shape)(v({},le.a.component,{properties:Object(pe.shape)(v({},le.a.component.properties))}))}),$n=function(e,t){var n=e.date,r=e.link,i=e.summary,a=e.title,o=e.image,s=Object(fe.h)("DATE_FORMAT_COMPLETE"),c=Object(Qe.utc)(n).local().format(s),l=kt()(i,{allowedAttributes:{a:["class","crossorigin","href","hreflang","rel","style","target","title","type"],img:["alt","class","crossorigin","height","sizes","src","srcset","style","width"],p:["class"]},allowedTags:kt.a.defaults.allowedTags.concat(["img"])}),u={__html:l};return W.a.createElement("li",{key:t,className:"widget-rss-feed"},o&&W.a.createElement("div",{className:"widget-rss-feed__thumbnail",style:Object(de.h)(o,128,!1,!0)}),W.a.createElement("div",{className:"widget-rss-feed__wrapper"},W.a.createElement("span",{className:"widget-rss-feed__date"},c),W.a.createElement("a",{className:"widget-rss-feed__link",href:r,rel:"noopener noreferrer",target:"_blank"},W.a.createElement("span",{className:"widget-rss-feed__title"},a)),W.a.createElement("div",{dangerouslySetInnerHTML:u,className:"widget-rss-feed__description"})))},Bn=function(e){function t(){var e,n;L()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=j()(this,(e=F()(t)).call.apply(e,[this].concat(i))),_()(M()(n),"state",{isCallInProgress:!1,items:[]}),n}var n,r;return $()(t,e),N()(t,[{key:"componentDidMount",value:function(){this.fetchFeeds()}},{key:"componentDidUpdate",value:function(e){ae()(e,this.props)||this.fetchFeeds()}},{key:"fetchFeeds",value:(r=S()(C.a.mark((function e(){var t,n,r,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.url,r=t.maxItems,this.setState({isCallInProgress:!0}),e.next=4,Object(Mn.a)(Object(Ut.a)(n),r);case 4:i=e.sent,this.setState({isCallInProgress:!1,items:i});case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.isCallInProgress,n=e.items;return W.a.createElement(B.Fragment,null,!t&&W.a.createElement("ul",{className:"widget-rss__list"},n.map($n)),t&&W.a.createElement(Ve.b,null))}}],[{key:"isEditable",value:function(){return!1}},{key:"isWidgetEmpty",value:(n=S()(C.a.mark((function e(t){var n,r,i,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.maxItems,i=n&&Object(Ut.a)(n),i){e.next=4;break}return e.abrupt("return",!0);case 4:return e.prev=4,e.next=7,Object(Mn.a)(i,r);case 7:return a=e.sent,e.abrupt("return",0===a.length);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(e){return n.apply(this,arguments)})},{key:"isWidgetHidden",value:function(e){return t.isWidgetEmpty(e)}}]),t}(B.PureComponent);_()(Bn,"propTypes",xn);var Wn=n(257),Gn=n.n(Wn),Yn=new an.a({path:"weather"}),Hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.address,n=e.defaultAddress,r=e.unit;return Yn.get("get",{params:{address:t,defaultAddress:n,unit:r}})},Kn=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},le.a),Vn={city:pe.string,forecast:pe.object,inputLang:pe.string,isFirst:pe.bool,unit:pe.object},zn=n(209),qn=n.n(zn),Xn=function(e){function t(){return L()(this,t),j()(this,F()(t).apply(this,arguments))}return $()(t,e),N()(t,[{key:"render",value:function(){var e=this.props,t=e.forecast,n=e.isFirst,r=e.city,i=e.unit,a=e.inputLang;return W.a.createElement("div",{className:H()("widget-weather__item",{"widget-weather__item--first":n})},W.a.createElement("div",{className:"widget-weather__date"},t.formattedDate),W.a.createElement("div",{className:"widget-weather__city"},r),W.a.createElement("div",{className:"widget-weather__temp"},W.a.createElement("span",{className:"widget-weather-temp__min"},t.low+" °"+qn()(Object(fe.h)(i,void 0,a))),W.a.createElement("span",{className:"widget-weather-temp__slash"}," / "),W.a.createElement("span",{className:"widget-weather-temp__max"},t.high+" °"+qn()(Object(fe.h)(i,void 0,a)))),W.a.createElement("div",{className:H()("widget-weather__image","widget-weather__image--".concat(t.code))}))}}]),t}(B.PureComponent);_()(Xn,"propTypes",Vn);var Qn=function(e){function t(){var e,n;L()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=j()(this,(e=F()(t)).call.apply(e,[this].concat(i))),_()(M()(n),"state",{isLoading:!1,isWeatherQueryError:!1,weather:void 0}),n}var n;return $()(t,e),N()(t,[{key:"componentDidMount",value:function(){this.loadWeather()}},{key:"componentDidUpdate",value:function(e){ae()(this.props,e)||this.loadWeather()}},{key:"loadWeather",value:(n=S()(C.a.mark((function e(){var t,n,r,i,a,o,s,c,l,u,d,p,f,g;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.properties,n=Object(fe.b)("current"),r=Object(de.o)()?Object(fe.a)():n,i=t.unit||"c",a=V()(t,"apiProfileAddress"),o=this.setMaxNumber(),s=void 0!==a&&""!==a?Object(de.g)(a):Object(fe.h)(t.location,void 0,r),c=void 0===a||""===a?Object(fe.h)(t.location,void 0,r):void 0,void 0!==s||void 0!==i){e.next=11;break}return this.setState({isWeatherQueryError:!0}),e.abrupt("return");case 11:return this.setState({isLoading:!0}),e.prev=12,e.next=15,Hn({address:s,defaultAddress:c,unit:Object(fe.h)(i,void 0,r)});case 15:l=e.sent,u=l.data,d=u.city,p=u.forecast,f=Zt()(p,(function(e){var t=moment(e.date,"YYYY-MM-DDTHH:mm:ss");return e.formattedDate=Gn()(t.format("dddd DD")),e})),g={city:d,forecast:f.slice(0,o+1),inputLang:r,unit:i},this.setState({isLoading:!1,isWeatherQueryError:!1,weather:g}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),this.setState({isLoading:!1,isWeatherQueryError:!0});case 27:case"end":return e.stop()}}),e,this,[[12,24]])}))),function(){return n.apply(this,arguments)})},{key:"setMaxNumber",value:function(){var e=this.props.properties,t=V()(e,"maxNumber",4);return t<1?t=1:t>7&&(t=7),t}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isWeatherQueryError,r=e.weather,i=!t&&!n&&r;return W.a.createElement(W.a.Fragment,null,W.a.createElement("div",{className:"widget-weather__items"},i&&Zt()(r.forecast,(function(e,t){return W.a.createElement(Xn,{key:t,city:r.city,forecast:e,inputLang:r.inputLang,isFirst:0===t,unit:r.unit})}))),n&&W.a.createElement("div",{className:"widget-weather__error"},Object(fe.h)("FRONT.WEATHER.ERROR")),W.a.createElement(sn.B,{isLoading:t}))}}],[{key:"isEditable",value:function(){return!1}},{key:"isWidgetEmpty",value:function(e){var t=e.value;return void 0===t||(void 0===t.apiProfileAddress||""===t.apiProfileAddress)&&(""===Object(fe.h)(t.location)||void 0===Object(fe.h)(t.location))}},{key:"isWidgetHidden",value:function(e){return t.isWidgetEmpty(e)}}]),t}(B.Component);_()(Qn,"propTypes",Kn);var Zn=n(736),Jn=n.n(Zn),er=function(e){var t=e.items,n=Object(B.useRef)(null),r=function(e,t){var n=Object(Qe.utc)(t),r=Object(Qe.utc)();switch(e){case"completed":return"completed";case"inProgress":case"notStarted":return t&&n.diff(r,"day")<0?"late":t&&(n.isAfter(r,"day")||n.isSame(r,"day"))&&n.diff(r,"week")<1?"risky":(t&&(n.isAfter(r,"day")||n.isSame(r,"day"))&&n.diff(r,"week"),"in-progress");default:return"in-progress"}};return Object(B.useEffect)((function(){if(n){var e=t.filter((function(e){return"risky"===r(e.status,e.dueDateTime)})),i=t.filter((function(e){return"completed"===r(e.status,e.dueDateTime)})),a=t.filter((function(e){return"late"===r(e.status,e.dueDateTime)})),o=t.filter((function(e){return"in-progress"===r(e.status,e.dueDateTime)}));new Jn.a(n.current,{data:{datasets:[{backgroundColor:["rgba(255, 218, 150, 0.7)","rgba(159, 203, 138, 0.7)","rgba(246, 173, 142, 0.7)","rgba(160, 192, 229, 0.7)"],borderColor:["rgba(255, 218, 150, 1)","rgba(159, 203, 138, 1)","rgba(246, 173, 142, 1)","rgba(160, 192, 229, 1)"],borderWidth:1,data:[e.length,i.length,a.length,o.length],label:""}],labels:["Risky","Completed","Late","In progress"]},type:"doughnut"})}}),[t,n]),W.a.createElement("div",{className:"graphContent"},W.a.createElement("canvas",{ref:n,id:"taskChart"}))},tr=function(e){var t=e.isFilteredByLateTasks,n=e.isFilteredByReminderTasks,r=e.isFilteredByTodayTasks,i=e.isOrderedByDueDateDesc,a=e.provider,o=e.setIsFilteredByLateTasks,s=e.setIsFilteredByTodayTasks,c=e.setIsFilteredByReminderTasks,l=e.setIsOrderedByDueDateDesc,u=e.theme,d=e.uuid;return W.a.createElement("div",{className:"task-header"},W.a.createElement(Je.IconButton,{className:H()("mr",{selected:t}),color:u===Je.Theme.dark?"light":void 0,emphasis:Je.Emphasis.low,icon:et.J,size:Je.Size.m,theme:u,onClick:function(){return o({data:!t,uuid:d})},label:Object(fe.h)("FRONT.WIDGET_TASKS.TOOLTIPS.LATE_TASKS"),tooltipProps:{placement:Je.Placement.TOP}}),W.a.createElement(Je.IconButton,{className:H()("mr",{selected:r}),color:u===Je.Theme.dark?"light":void 0,emphasis:Je.Emphasis.low,icon:et.x,size:Je.Size.m,theme:u,onClick:function(){return s({data:!r,uuid:d})},label:Object(fe.h)("FRONT.WIDGET_TASKS.TOOLTIPS.TODAY_TASKS"),tooltipProps:{placement:Je.Placement.TOP}}),"outlook"===a&&W.a.createElement(Je.IconButton,{className:H()("mr",{selected:n}),color:u===Je.Theme.dark?"light":void 0,emphasis:Je.Emphasis.low,icon:et.zc,size:Je.Size.m,theme:u,onClick:function(){c({data:!n,uuid:d})},label:Object(fe.h)("FRONT.WIDGET_TASKS.TOOLTIPS.REMINDER_TASKS"),tooltipProps:{placement:Je.Placement.TOP}}),W.a.createElement(Je.IconButton,{color:u===Je.Theme.dark?"light":void 0,emphasis:Je.Emphasis.low,icon:i?et.Hc:et.Gc,size:Je.Size.m,theme:u,onClick:function(){l({data:!i,uuid:d})},label:Object(fe.h)("FRONT.WIDGET_TASKS.TOOLTIPS.ORDER_TASKS"),tooltipProps:{placement:Je.Placement.TOP}}))},nr=function(e){var t=e.items,n=e.selectedTasks,r=e.theme,i=e.toggleTask,a=function(e,t){var n="date-txt",r=Object(Qe.utc)(t),i=Object(Qe.utc)();switch(e){case"completed":return"".concat(n,"--closed");case"inProgress":case"notStarted":return t&&r.diff(i,"day")<=2?"".concat(n,"--late"):t&&(r.isAfter(i,"day")||r.isSame(i,"day"))&&r.diff(i,"week")<1?"".concat(n,"--risky"):t&&(r.isAfter(i,"day")||r.isSame(i,"day"))&&r.diff(i,"week")>=1?"".concat(n,"--in-progress"):n;default:return n}};return W.a.createElement(W.a.Fragment,null,W.a.createElement(Je.List,{className:"tasks-list",theme:r},t.map((function(e){return W.a.createElement("div",{key:e.id},W.a.createElement(Je.ListItem,{before:e.isLoading?W.a.createElement(Je.Progress,null):W.a.createElement(Je.Checkbox,{className:H()({checked:!n.find((function(t){return t===e.id}))},"tasks-list-checkbox"),tabIndex:-1,theme:r,checked:void 0!==n.find((function(t){return t===e.id}))}),className:"tasks-list-item",theme:r,onItemSelected:function(){return i(e)}},W.a.createElement("div",{className:"task-item__content"},W.a.createElement("div",{className:H()({"task-item__title":!n.find((function(t){return t===e.id})),"task-item__title--closed":n.find((function(t){return t===e.id}))})},e.title),(e.dueDateTime||e.completedDateTime)&&W.a.createElement("div",{className:"task-item__due-date"},W.a.createElement("i",{className:"mdi mdi-calendar-today"}),W.a.createElement("span",{className:void 0===n.find((function(t){return t===e.id}))?a(e.status,e.dueDateTime):"date-txt--closed"},"completed"===e.status?Object(Qe.utc)(e.completedDateTime).local().format(Object(fe.h)("SIMPLE_DATE_FORMAT_NUMBER")):Object(Qe.utc)(e.dueDateTime).local().format(Object(fe.h)("SIMPLE_DATE_FORMAT_NUMBER")))))))}))))},rr=n(227),ir=n.n(rr),ar=n(35),or=function(e){var t=e.task,n=e.uuid,r=e.checkItem,i=e.removeTodo;return W.a.createElement("div",{className:"widget-todo-task"},W.a.createElement("input",{checked:t.isChecked,className:H()("widget-todo-task__checkbox",{"widget-todo-task__checkbox--is-checked":t.isChecked,"widget-todo-task__checkbox--is-unchecked":!t.isChecked}),id:"widget-".concat(n,"-checkbox-").concat(t.id),type:"checkbox",onChange:function(){return r(t.id)}}),W.a.createElement("label",{className:"widget-todo-task__label",htmlFor:"widget-".concat(n,"-checkbox-").concat(t.id)},Object(fe.h)(t.value)),W.a.createElement("button",{className:"widget-todo-task__remove",type:"button",onClick:function(){return i(t)}},W.a.createElement("i",{className:"mdi mdi-close-circle"})))};or.propTypes={checkItem:pe.func.isRequired,removeTodo:pe.func.isRequired,task:Object(pe.objectOf)(pe.any).isRequired,uuid:pe.string.isRequired};var sr=or,cr=function(e){var t=e.todoItems,n=e.checkItem,r=e.removeTodo,i=e.uuid;return W.a.createElement("div",{className:"widget-todo__unchecked-items"},W.a.createElement("div",{className:"widget-todo__task"},t.filter((function(e){return!e.isChecked})).map((function(e){return W.a.createElement(sr,{key:e.id,checkItem:n,removeTodo:r,task:e,uuid:i})}))))};cr.propTypes={checkItem:pe.func.isRequired,removeTodo:pe.func.isRequired,todoItems:Object(pe.arrayOf)(pe.any).isRequired,uuid:pe.string.isRequired};var lr=cr,ur=function(e){var t=e.todoItems,n=e.toggleDisplayCheckedItems,r=e.displayCheckedItems,i=e.checkItem,a=e.removeTodo,o=e.uuid;return W.a.createElement("div",{className:t.filter((function(e){return!e.isChecked})).length>0?"widget-todo__checked-items widget-todo__checked-items--is-pushed":"widget-todo__checked-items"},W.a.createElement("a",{className:"widget-todo__checked-items-toggle",role:"button",tabIndex:0,onClick:function(){return n()},onKeyDown:function(){return n()}},r&&W.a.createElement(W.a.Fragment,null,W.a.createElement("span",null,Object(fe.h)("FRONT.TODO.HIDE_COMPLETED_TASKS")),W.a.createElement("i",{className:"mdi mdi-chevron-up"})),!r&&W.a.createElement(W.a.Fragment,null,W.a.createElement("span",null,Object(fe.h)("FRONT.TODO.DISPLAY_COMPLETED_TASKS")),W.a.createElement("i",{className:"mdi mdi-chevron-down"}))),r&&W.a.createElement("div",{className:"widget-todo__task"},t.filter((function(e){return e.isChecked})).map((function(e){return W.a.createElement(sr,{key:e.id,checkItem:i,removeTodo:a,task:e,uuid:o})}))))};ur.propTypes={checkItem:pe.func.isRequired,displayCheckedItems:pe.bool.isRequired,removeTodo:pe.func.isRequired,todoItems:Object(pe.arrayOf)(pe.any).isRequired,toggleDisplayCheckedItems:pe.func.isRequired,uuid:pe.string.isRequired};var dr=ur,pr=function(e){var t=e.addTodo,n=e.theme,r=e.newTodo,i=e.updateTodo;return W.a.createElement("form",{className:"widget-todo__new-task",onSubmit:function(e){e.preventDefault(),t()}},W.a.createElement("div",{className:"widget-todo__new-task-field"},W.a.createElement(Je.TextField,{label:Object(fe.h)("FRONT.TODO.ADD_TASK"),theme:n,value:r&&r[Object(fe.b)("current")]?r[Object(fe.b)("current")]:"",onChange:function(e){return i(e)}})),W.a.createElement("div",{className:"widget-todo__new-task-add"},W.a.createElement("button",{type:"button",onClick:function(){return t()}},Object(fe.h)("GLOBAL.SUBMIT"))),W.a.createElement("input",{style:{opacity:0},type:"submit"}))};pr.defaultProps={theme:void 0},pr.propTypes={addTodo:pe.func.isRequired,newTodo:Object(pe.objectOf)(pe.any).isRequired,theme:Object(pe.objectOf)(pe.any),updateTodo:pe.func.isRequired};var fr=pr,gr=function(e){var t=e.content,n=e.isCheckedItemsDisplayed,r=e.newTodo,i=e.setIsCheckedItemsDisplayed,a=e.setNewTodo,o=e.setTodoItems,s=e.setUserContentWidget,c=e.theme,l=e.todoItems,u=e.userContentService,d=e.userContentWidget,p=e.uuid,f=function(e){var n=t.getCurrent(),r={};Object.assign(r,d);var i=r.params.todo.findIndex((function(t){return t.id===e}));-1!==i&&(r.params.todo[i].isChecked=!r.params.todo[i].isChecked,u.save({content:n.id,user:Object(je.c)().uid,values:n.userContent.values}),s({data:r,uuid:p}))},g=function(e){Object(Yt.a)(Object(fe.h)("WIDGET_TYPE_TODO_DELETE"),Object(fe.h)("WIDGET_TYPE_TODO_DELETE_DESCRIPTION"),{cancel:Object(fe.h)("CANCEL"),ok:Object(fe.h)("OK")},(function(n){if(n&&!angular.isUndefinedOrEmpty(d)&&!angular.isUndefinedOrEmpty(V()(d,"params.todo"))){var r=t.getCurrent(),i={};Object.assign(i,d),i.params.todo=ir()(i.params.todo,{id:e.id}),u.save({content:r.id,user:Object(je.c)().uid,values:r.userContent.values},(function(){s({data:i,uuid:p})}))}}))},m=function(){var e=t.getCurrent(),n=e.userContent;if(void 0!==r&&Object(fe.d)(r,!0)){if(void 0===n&&(n={userContent:e.id,values:{}},e.userContent=n),n.values=n.values||{},n.values.widgets=n.values.widgets||[],void 0===d||nt()(d))return n.values.widgets.push({active:!0,params:{todo:[]},uuid:p}),void s({data:u.getUserContentWidget(e,p),uuid:p});var i={};Object.assign(i,d),Object.assign(i,{params:i.params||{}}),Object.assign(i,{params:{todo:i.params.todo||[]}}),i.params.todo.push({id:Object(ar.b)(),isChecked:!1,value:r}),u.save({content:e.id,user:Object(je.c)().uid,values:n.values}),a({data:{},uuid:p}),s({data:i,uuid:p})}};return Object(B.useEffect)((function(){s({data:u.getUserContentWidget(t.getCurrent(),p),uuid:p})}),[t,u,p]),Object(B.useEffect)((function(){o({data:V()(d,"params.todo",[]),uuid:p}),m()}),[d]),W.a.createElement(W.a.Fragment,null,l.length>0&&W.a.createElement("div",{className:"widget-todo__list"},l.filter((function(e){return!e.isChecked})).length>0&&W.a.createElement(lr,{checkItem:f,removeTodo:g,todoItems:l,uuid:p}),l.filter((function(e){return e.isChecked})).length>0&&W.a.createElement(dr,{checkItem:f,displayCheckedItems:n,removeTodo:g,todoItems:l,toggleDisplayCheckedItems:function(){i({data:!n,uuid:p})},uuid:p})),W.a.createElement(fr,{addTodo:m,newTodo:r,theme:c,updateTodo:function(e){var t={};Object.assign(t,r),t[Object(fe.b)("current")]=e,a({data:t,uuid:p})}}))};gr.defaultProps={theme:void 0},gr.propTypes={content:Object(pe.objectOf)(pe.any).isRequired,isCheckedItemsDisplayed:pe.bool.isRequired,newTodo:Object(pe.objectOf)(pe.any).isRequired,setIsCheckedItemsDisplayed:pe.func.isRequired,setNewTodo:pe.func.isRequired,setTodoItems:pe.func.isRequired,setUserContentWidget:pe.func.isRequired,theme:Object(pe.objectOf)(pe.any),todoItems:Object(pe.arrayOf)(pe.any).isRequired,userContentService:Object(pe.objectOf)(pe.any).isRequired,userContentWidget:Object(pe.objectOf)(pe.any).isRequired,uuid:pe.string.isRequired};var mr=gr,vr=n(321),hr=function(e){var t=e.content,n=e.filteredTasks,r=e.isFilteredByLateTasks,i=e.isFilteredByReminderTasks,a=e.isFilteredByTodayTasks,o=e.isInit,s=e.isLoading,c=e.isMyTasksCheckedItemsDisplayed,l=e.isOrderedByDueDateDesc,u=e.initState,d=e.myTasksNewTodo,p=e.myTasksTodoItems,f=e.myTasksUserContentWidget,g=e.selectedTasks,m=e.setIsFilteredByLateTasks,v=e.setIsFilteredByReminderTasks,h=e.setIsFilteredByTodayTasks,y=e.setIsLoading,E=e.setIsMyTasksCheckedItemsDisplayed,b=e.setIsOrderedByDueDateDesc,O=e.setFilteredTasks,C=e.setMyTasksNewTodo,T=e.setMyTasksTodoItems,S=e.setSelectedTasks,I=e.setMyTasksUserContentWidget,_=e.setTasks,A=e.style,w=e.tasks,D=e.value,L=e.updateTask,P=e.userContent,N=e.uuid,R=D.alreadyDoneDay,j=D.bucket,k=D.isTeamScoped,F=D.plan,U=D.provider,M=D.viewMode,x=V()(A,["content","theme"],"light");if(!Object(je.f)()||"lumapps"!==U&&(Object(je.g)()||!Object(je.h)()))return null;Object(B.useEffect)((function(){u({uuid:N})}),[]),Object(B.useEffect)((function(){if(w.length>0&&_({data:[],uuid:N}),!(nt()(U)||"lumapps"===U||k&&nt()(F))){y({data:!0,uuid:N});var e=F&&F.id?vr.b:vr.e;e(F&&F.id?F.id:U).then((function(e){_({data:e.data.items?e.data.items.map((function(e){return Object.assign(e,{isLoading:!1})})):[],uuid:N})})).catch((function(){return Object(Yt.b)(Object(fe.h)("FRONT.WIDGET_TASKS.ERROR.FETCH_TASKS_ERROR"))})).finally((function(){return y({data:!1,uuid:N})}))}}),[U,F]),Object(B.useEffect)((function(){var e=w.filter((function(e){return"completed"===e.status})).map((function(e){return e.id}));S({data:e,uuid:N})}),[w]),Object(B.useEffect)((function(){var e=w.filter((function(e){var t=Object(Qe.utc)(e.dueDateTime),n=e.completedDateTime?Object(Qe.utc)(e.completedDateTime):null,o=Object(Qe.utc)(),s=!r||r&&e.dueDateTime&&t.diff(o,"day")<2,c=!a||a&&e.dueDateTime&&t.isSame(o,"day"),l=!i||i&&e.reminder,u="completed"!==e.status||"completed"===e.status&&e.completedDateTime&&!r&&!i&&!a&&n.diff(o,"day")>=-R&&n.diff(o,"day")<=0,d=!j||nt()(j)||j!=={}&&e.categoryId===j.id;return!!(s&&c&&l&&u&&d)}));e.sort((function(e,t){var n=void 0!==g.find((function(t){return t===e.id})),r=void 0!==g.find((function(e){return e===t.id}));return n&&!r||!n&&r?n?1:-1:n&&r&&e.completedDateTime&&t.completedDateTime?l?e.completedDateTime>t.completedDateTime?1:-1:e.completedDateTime<t.completedDateTime?1:-1:!e.dueDateTime&&t.dueDateTime||e.dueDateTime&&!t.dueDateTime?e.dueDateTime?1:-1:l?e.dueDateTime>t.dueDateTime?1:-1:e.dueDateTime<t.dueDateTime?1:-1})),O({data:e,uuid:N})}),[j,r,a,i,l,g,R]);return W.a.createElement(W.a.Fragment,null,o&&W.a.createElement(W.a.Fragment,null,"lumapps"===U&&W.a.createElement(mr,{content:t,isCheckedItemsDisplayed:c,newTodo:d,setIsCheckedItemsDisplayed:E,setNewTodo:C,setTodoItems:T,setUserContentWidget:I,theme:x,todoItems:p,userContentService:P,userContentWidget:f,uuid:N}),"lumapps"!==U&&W.a.createElement("div",{className:"widget-tasks"},W.a.createElement(tr,{isFilteredByLateTasks:r,isFilteredByReminderTasks:i,isFilteredByTodayTasks:a,isOrderedByDueDateDesc:l,provider:U,setIsFilteredByLateTasks:m,setIsFilteredByReminderTasks:v,setIsFilteredByTodayTasks:h,setIsOrderedByDueDateDesc:b,theme:x,uuid:N}),s&&W.a.createElement(Je.Progress,{className:"centered-loader",theme:x}),!s&&"list"===M&&w.length>0&&W.a.createElement(nr,{items:n,selectedTasks:g,theme:x,toggleTask:function(e){var t=g.findIndex((function(t){return t===e.id})),n=w.findIndex((function(t){return t.id===e.id})),r=JSON.parse(JSON.stringify(w)),i=r[n],a="planner"===U?vr.h:vr.g;-1!==t?(L({data:Object.assign(i,{isLoading:!0}),uuid:N}),a(e.id,e.etag,{completedDateTime:null,status:"notStarted"}).then((function(e){L({data:Object.assign(e.data.item,{isLoading:!1}),uuid:N})})).catch((function(){Object(Yt.b)(Object(fe.h)("FRONT.WIDGET_TASKS.ERROR.PATCH_TASK_ERROR")),L({data:Object.assign(i,{isLoading:!1}),uuid:N})}))):(L({data:Object.assign(i,{isLoading:!0}),uuid:N}),a(e.id,e.etag,{status:"completed"}).then((function(e){L({data:Object.assign(e.data.item,{isLoading:!1}),uuid:N})})).catch((function(){Object(Yt.b)(Object(fe.h)("FRONT.WIDGET_TASKS.ERROR.PATCH_TASK_ERROR")),L({data:Object.assign(i,{isLoading:!1}),uuid:N})})))}}),!s&&"graph"===M&&w.length>0&&W.a.createElement(er,{items:n}))))};hr.defaultProps={filteredTasks:[],isFilteredByLateTasks:!1,isFilteredByReminderTasks:!1,isFilteredByTodayTasks:!1,isInit:!1,isLoading:!1,isMyTasksCheckedItemsDisplayed:!1,isOrderedByDueDateDesc:!0,myTasksNewTodo:{},myTasksTodoItems:[],myTasksUserContentWidget:{},selectedTasks:[],tasks:[]},hr.propTypes={content:Object(pe.objectOf)(pe.any).isRequired,filteredTasks:Object(pe.arrayOf)(pe.object),initState:pe.func.isRequired,isFilteredByLateTasks:pe.bool,isFilteredByReminderTasks:pe.bool,isFilteredByTodayTasks:pe.bool,isInit:pe.bool,isLoading:pe.bool,isMyTasksCheckedItemsDisplayed:pe.bool,isOrderedByDueDateDesc:pe.bool,myTasksNewTodo:Object(pe.objectOf)(pe.any),myTasksTodoItems:Object(pe.arrayOf)(pe.any),myTasksUserContentWidget:Object(pe.objectOf)(pe.any),selectedTasks:Object(pe.arrayOf)(pe.string),setFilteredTasks:pe.func.isRequired,setIsFilteredByLateTasks:pe.func.isRequired,setIsFilteredByReminderTasks:pe.func.isRequired,setIsFilteredByTodayTasks:pe.func.isRequired,setIsLoading:pe.func.isRequired,setIsMyTasksCheckedItemsDisplayed:pe.func.isRequired,setIsOrderedByDueDateDesc:pe.func.isRequired,setMyTasksNewTodo:pe.func.isRequired,setMyTasksTodoItems:pe.func.isRequired,setMyTasksUserContentWidget:pe.func.isRequired,setSelectedTasks:pe.func.isRequired,setTasks:pe.func.isRequired,style:Object(pe.objectOf)(pe.any).isRequired,tasks:Object(pe.arrayOf)(pe.object),updateTask:pe.func.isRequired,userContent:Object(pe.objectOf)(pe.any).isRequired,uuid:pe.string.isRequired,value:Object(pe.objectOf)(pe.any).isRequired},hr.isEditable=function(){return!1},hr.isWidgetEmpty=function(e){return void 0===e||0===e.length},hr.isWidgetHidden=function(e){return!Object(je.f)()||"lumapps"!==e.value.provider&&(Object(je.g)()||!Object(je.h)())||hr.isWidgetEmpty(e)};var yr=hr,Er=n(123),br=Object(G.connect)((function(e,t){if(t.uuid){var n=e.widgets.tasks.find((function(e){return e.uuid===t.uuid}));if(void 0!==n)return{filteredTasks:n.filteredTasks,isFilteredByLateTasks:n.isFilteredByLateTasks,isFilteredByReminderTasks:n.isFilteredByReminderTasks,isFilteredByTodayTasks:n.isFilteredByTodayTasks,isInit:n.isInit,isLoading:n.isLoading,isMyTasksCheckedItemsDisplayed:n.isMyTasksCheckedItemsDisplayed,isOrderedByDueDateDesc:n.isOrderedByDueDateDesc,myTasksNewTodo:n.myTasksNewTodo,myTasksTodoItems:n.myTasksTodoItems,myTasksUserContentWidget:n.myTasksUserContentWidget,selectedTasks:n.selectedTasks,tasks:n.tasks}}return{}}),{initState:Er.o,setFilteredTasks:Er.p,setIsFilteredByLateTasks:Er.q,setIsFilteredByReminderTasks:Er.r,setIsFilteredByTodayTasks:Er.s,setIsLoading:Er.t,setIsMyTasksCheckedItemsDisplayed:Er.u,setIsOrderedByDueDateDesc:Er.v,setMyTasksNewTodo:Er.w,setMyTasksTodoItems:Er.x,setMyTasksUserContentWidget:Er.y,setSelectedTasks:Er.z,setTasks:Er.A,updateTask:Er.B})(yr),Or=function(e){var t=e.currentlyOpenedPopover,n=e.fields,r=e.setCurrentlyOpenedPopover,i=e.theme,a=e.user,o=e.uuid,s=Object(B.useRef)(null);return W.a.createElement("div",{className:"widget-delve_user"},W.a.createElement(Je.UserBlock,{avatarProps:a.profilePictureUrl?{image:a.profilePictureUrl,alt:a.fullName}:void 0,fields:n,name:a.fullName,size:Je.Size.l,theme:i,ref:s,onMouseEnter:function(){return r({close:!1,data:a.id+o,uuid:o})},onMouseLeave:function(){return r({close:!0,data:a.id+o,uuid:o})}}),W.a.createElement(Je.Popover,{anchorRef:s,placement:Je.Placement.TOP_START,isOpen:t===a.id+o,offset:{away:20}},W.a.createElement("div",{className:"popover-content-container"},W.a.createElement(Je.UserBlock,{avatarProps:a.profilePictureUrl?{image:a.profilePictureUrl,alt:a.fullName}:void 0,fields:n,name:a.fullName,orientation:Je.Orientation.vertical,simpleAction:W.a.createElement("div",{className:"user-block__more-info"},W.a.createElement(Je.Button,{color:Je.ColorPalette.blue,emphasis:Je.Emphasis.low,size:Je.Size.s,theme:i,onClick:function(){return Object(je.j)(a)}},Object(fe.h)("FRONT.USER.PROFILE.MORE_INFO.LINK"))),theme:i}))),W.a.createElement(Je.Button,{color:i===Je.Theme.dark?Je.ColorPalette.light:void 0,emphasis:Je.Emphasis.medium,theme:i,onClick:function(){return Object(je.j)(a)}},Object(fe.h)("FRONT.WIDGET_DELVE.MY_PROFILE")))};Or.defaultProps={theme:void 0},Or.propTypes={currentlyOpenedPopover:pe.string.isRequired,fields:Object(pe.arrayOf)(pe.string).isRequired,setCurrentlyOpenedPopover:pe.func.isRequired,theme:pe.string,user:Object(pe.objectOf)(pe.any).isRequired,uuid:pe.string.isRequired};var Cr=Or,Tr=n(432),Sr=function(e){var t=e.contentType,n=e.currentlyOpenedPopover,r=e.items,i=e.setCurrentlyOpenedPopover,a=e.theme,o=e.uuid;return W.a.createElement("div",{className:"widget-delve_content"},r.map((function(e){return"people"===t?W.a.createElement("div",{key:e.id},W.a.createElement(Ir,{currentlyOpenedPopover:n,item:e,setCurrentlyOpenedPopover:i,theme:a,uuid:o})):"document"===t?W.a.createElement("div",{key:e.id},W.a.createElement(Je.Button,{className:"widget-delve_document__item",color:Je.ColorPalette.dark,emphasis:Je.Emphasis.low,theme:a,onClick:function(){return window.open(e.reference.webUrl,"_blank")}},W.a.createElement("div",{className:"media-block"},function(e){if("Word"===e.visualization.resourceType||"PowerPoint"===e.visualization.resourceType&&"Site"===e.visualization.containerType){var t={backgroundImage:Object(de.h)(e.visualization.previewImageUrl,-1)["background-image"]};return W.a.createElement("div",{className:"media-block__icon",style:t})}return W.a.createElement("div",{className:"media-block__icon media-block__icon--".concat(Object(Tr.a)(e.visualization.mediaType))})}(e),W.a.createElement("div",{className:"media-block__label"},W.a.createElement("div",{className:"media-block__label--name"},e.visualization.title),W.a.createElement("div",{className:"media-block__label--type"},"".concat(e.visualization.resourceType," file")))))):null})))},Ir=function(e){var t=e.currentlyOpenedPopover,n=e.item,r=e.setCurrentlyOpenedPopover,i=e.theme,a=e.uuid,o=Object(B.useRef)(null),s=function(){var e=[];return n.jobTitle&&e.push(n.jobTitle),n.officeLocation&&e.push(n.officeLocation),e};return W.a.createElement(W.a.Fragment,null,W.a.createElement(Je.UserBlock,{avatarProps:"Group"===n.personType?void 0:{image:"https://lumsites.appspot.com/assets/img/default-avatar/default-avatar-128.jpg",alt:n.fullName},fields:s(),name:n.fullName,orientation:Je.Orientation.horizontal,size:Je.Size.m,theme:i,ref:o,onMouseEnter:function(){return r({close:!1,data:n.id+a,uuid:a})},onMouseLeave:function(){return r({close:!0,data:n.id+a,uuid:a})}}),"Person"===n.personType&&W.a.createElement(Je.Popover,{anchorRef:o,placement:Je.Placement.TOP_START,isOpen:t===n.id+a,offset:{away:20}},W.a.createElement("div",{className:"popover-content-container"},W.a.createElement(Je.UserBlock,{avatarProps:"Group"===n.personType?void 0:{image:"https://lumsites.appspot.com/assets/img/default-avatar/default-avatar-128.jpg",alt:n.fullName},fields:s(),name:n.fullName,orientation:Je.Orientation.vertical,theme:i}))))};Sr.defaultProps={theme:void 0},Sr.propTypes={contentType:pe.string.isRequired,currentlyOpenedPopover:pe.string.isRequired,items:Object(pe.arrayOf)(pe.any).isRequired,setCurrentlyOpenedPopover:pe.func.isRequired,theme:pe.string,uuid:pe.string.isRequired};var _r=Sr,Ar=function(e){var t=e.currentlyOpenedPopover,n=e.getCommunities,r=e.getPeople,i=e.getSharedDocuments,a=e.getTrendingDocuments,o=e.getUsedDocuments,s=e.documents,c=e.initState,l=e.isLoading,u=e.people,d=e.setCurrentlyOpenedPopover,p=e.value,f=e.uuid;if(!Object(je.f)()||Object(je.g)()||!Object(je.h)())return null;var g=p.contentType,m=p.isTargetedUserDisplayed,v=p.user,h=p.maxResults,y=p.orderBy,E=V()(p,["style","content","theme"],"light");Object(B.useEffect)((function(){c({uuid:f})}),[]),Object(B.useEffect)((function(){if(g)switch(g){case"INSIGHT_PEOPLE":r(200,h,f);break;case"INSIGHT_COMMUNITIES":n(200,h,f);break;case"INSIGHT_DOCUMENTS":switch(y){case"MOST_SHARED":i(h,f);break;case"MOST_USED":o(h,f);break;case"MOST_TRENDING":a(h,f)}}}),[g,f,h,y,v]);var b,O;return W.a.createElement("div",{className:"widget-delve"},void 0!==v&&W.a.createElement(W.a.Fragment,null,m&&W.a.createElement(Cr,{currentlyOpenedPopover:t,fields:(b=v||Object(je.c)(),O=[],b&&b.apiProfile&&(b.apiProfile.jobTitle&&O.push(b.apiProfile.jobTitle),b.apiProfile.city&&O.push(b.apiProfile.city)),O),setCurrentlyOpenedPopover:d,theme:E,user:v||Object(je.c)(),uuid:f}),l&&W.a.createElement("div",{className:"loader-container"},W.a.createElement(Je.Progress,{theme:E})),!l&&(u.length>0||s.length>0)&&W.a.createElement(_r,{contentType:u.length>0?"people":"document",currentlyOpenedPopover:t,items:u.length>0?u:s,setCurrentlyOpenedPopover:d,theme:E,uuid:f})))};Ar.propTypes={currentlyOpenedPopover:pe.string,documents:Object(pe.arrayOf)(pe.any),getCommunities:pe.func.isRequired,getPeople:pe.func.isRequired,getSharedDocuments:pe.func.isRequired,getTrendingDocuments:pe.func.isRequired,getUsedDocuments:pe.func.isRequired,initState:pe.func.isRequired,isLoading:pe.bool,people:Object(pe.arrayOf)(pe.any),setCurrentlyOpenedPopover:pe.func.isRequired,uuid:pe.string.isRequired,value:Object(pe.objectOf)(pe.any).isRequired},Ar.defaultProps={currentlyOpenedPopover:"",documents:[],isLoading:!1,people:[]},Ar.isEditable=function(){return!1},Ar.isWidgetEmpty=function(e){return void 0===e||0===e.length},Ar.isWidgetHidden=function(e){return!Object(je.f)()||Object(je.g)()||!Object(je.h)()||Ar.isWidgetEmpty(e)};var wr=Ar,Dr=n(233),Lr=Object(G.connect)((function(e,t){if(t.uuid){var n=e.widgets.delve.find((function(e){return e.uuid===t.uuid}));if(void 0!==n)return{currentlyOpenedPopover:n.currentlyOpenedPopover,documents:n.documents,isLoading:n.isLoading,people:n.people}}return{}}),{getCommunities:Dr.f,getPeople:Dr.g,getSharedDocuments:Dr.h,getTrendingDocuments:Dr.i,getUsedDocuments:Dr.j,initState:Dr.k,setCurrentlyOpenedPopover:Dr.l})(wr),Pr=function(e){var t=e.chartImageUrl,n=e.initState,r=e.isLoading,i=e.getChart,a=e.resetState,o=e.setWidgetWidth,s=e.style,c=e.uuid,l=e.value,u=e.widgetWidth,d=l.selectedChart,p=l.selectedFile,f=l.selectedSheet,g=V()(s,["content","theme"],"light"),m=Object(B.useRef)(null);return Object(B.useEffect)((function(){n({uuid:c})}),[]),Object(B.useLayoutEffect)((function(){setTimeout((function(){if(m.current){var e=m.current.offsetWidth;u&&e===u||o({data:e,uuid:c})}}),1)}),[o,c,u,m.current]),Object(B.useEffect)((function(){u&&d&&p&&f&&c?d.id&&p.id&&f.id&&c&&i(d.id,p.id,f.id,u,u,c):a({data:"",uuid:c})}),[d,p,f,u,c,i]),Object(je.f)()&&!Object(je.g)()&&Object(je.h)()?W.a.createElement("div",{className:"widget-chart",id:"widget-chart",ref:m},!r&&""!==t&&W.a.createElement("img",{alt:"",className:"widget-chart_chart",src:"data:image/gif;base64,".concat(t)}),r&&W.a.createElement(Je.Progress,{className:"centered-loader",theme:g})):null};Pr.propTypes={chartImageUrl:pe.string,getChart:pe.func.isRequired,initState:pe.func.isRequired,isLoading:pe.bool,setWidgetWidth:pe.func.isRequired,style:Object(pe.objectOf)(pe.any).isRequired,uuid:pe.string.isRequired,value:Object(pe.objectOf)(pe.any).isRequired,widgetWidth:pe.number},Pr.defaultProps={chartImageUrl:"",isLoading:!1,widgetWidth:null},Pr.isEditable=function(){return!1},Pr.isWidgetEmpty=function(e){return void 0===e||0===e.length},Pr.isWidgetHidden=function(e){return!Object(je.f)()||Object(je.g)()||!Object(je.h)()||Pr.isWidgetEmpty(e)};var Nr=Pr,Rr=n(306),jr=Object(G.connect)((function(e,t){if(!t.uuid)return{};var n=e.widgets.chart.find((function(e){return e.uuid===t.uuid}));return void 0!==n?{isLoading:n.isLoading,chartImageUrl:n.chartImageUrl,widgetWidth:n.widgetWidth}:{}}),{initState:Rr.g,getChart:Rr.f,resetState:Rr.h,setWidgetWidth:Rr.i})(Nr),kr=n(322),Fr=function(e){var t=e.item,n=e.provider,r=e.theme,i=Object(B.useRef)(null),a=function(e){return n&&n===lt.e.FBWORKPLACE.id?e:e.replace(/&lt;/g,"<").replace(/&gt;/g,">")},o=function(){return t.body.content?t.body.content.length>500?{__html:"".concat(a(t.body.content.slice(0,500)),'... <a href="').concat(t.webUrl,'" target="_blank">').concat(Object(fe.h)("WALL.SEE_MORE_YAMMER"),"</a>")}:{__html:a(t.body.content)}:""},s=function(e){if(e.avatar)switch(e.avatar.contentType){case lt.a.URL:default:return e.avatar.content}if([lt.e.SLACK.id,lt.e.FBWORKPLACE.id].includes(n))return it.InitialSettings.DEFAULT_AVATAR;var t=e.sender.user.id;return"/chat/avatar/".concat(n,"/").concat(t)}(t);return W.a.createElement("div",{ref:i,className:"social-post-block"},W.a.createElement("div",{className:"social-post-block__header"},W.a.createElement("div",{className:"social-post-block__author"},W.a.createElement(Je.UserBlock,{avatarProps:s?{image:s,alt:t.sender.user.displayName}:void 0,name:t.sender.user.displayName,fields:["".concat(Object(Qe.utc)(t.lastModifiedDateTime).fromNow()," ").concat(Object(fe.h)("WIDGET.WALL.POSTBLOCK.META.IN")," ").concat(t.groupName)],size:Je.Size.m,theme:r})),W.a.createElement("div",{className:"social-post-block__open"},W.a.createElement(Je.IconButton,{icon:function(){switch(n){case lt.e.FBWORKPLACE.id:return et.gb;case lt.e.YAMMER.id:return et.jc;default:return""}}(),emphasis:Je.Emphasis.low,theme:r,href:t.webUrl,target:"_blank",label:""}))),t.subject&&W.a.createElement("a",{className:"social-post-block__title",href:t.webUrl,target:"_blank"},t.subject),o()&&W.a.createElement("div",{className:"social-post-block__content",dangerouslySetInnerHTML:o()}),t.thumbnail&&W.a.createElement("div",{className:"social-post-block__thumbnail-wrapper"},W.a.createElement("div",{className:"social-post-block__thumbnail"},W.a.createElement("div",{className:"social-post-block__image"},W.a.createElement(Je.Thumbnail,{alt:"",aspectRatio:Je.AspectRatio.original,align:Je.Alignment.center,image:t.thumbnail,theme:r,onClick:function(){window.open(t.webUrl,"_blank")}})))),W.a.createElement("div",{className:"social-post-block__reactions"},W.a.createElement("span",null,Object(ot.c)(t)," ",Object(ot.c)(t)<=1?Object(fe.h)("LIKE_BUTTON_LABEL"):Object(fe.h)("LIKE_BUTTON_LABEL_PLURAL")),W.a.createElement("span",null,t.nbComments||"0"," ",!t.nbComments||t.nbComments<=1?Object(fe.h)("COMMENT_BUTTON_LABEL"):Object(fe.h)("COMMENT_BUTTON_LABEL_PLURAL"))))};Fr.defaultProps={provider:void 0,theme:void 0},Fr.propTypes={item:Object(pe.objectOf)(pe.any).isRequired,provider:pe.string,theme:pe.string};var Ur=Fr,Mr=function(e){var t=e.getNextPage,n=e.getPostByPostId,r=e.getPosts,i=e.hasNextPage,a=e.initState,o=e.isLoading,s=e.isMainWidget,c=e.nextPageCursor,l=e.posts,u=e.style,d=e.uuid,p=e.value;if(!Object(je.f)())return null;var f=p.channel,g=p.contentType,m=p.listOrderDir,v=p.itemsPerLine,h=p.maxNumber,y=p.myChannel,E=p.orderBy,b=p.postType,O=p.provider,C=p.slideshowAutoplay,T=p.slideshowInterval,S=p.targetedPost,I=p.userSpace,_=p.viewMode,A=V()(u,["content","theme"],"light");Object(B.useEffect)((function(){a({uuid:d})}),[a,d]),Object(B.useEffect)((function(){switch(g){case"pickGroup":I&&f&&r(O.name,I.id,h,"ALL"===b?null:b.toLowerCase(),f.id,E.toLowerCase(),"asc"===m,d);break;case"pickPost":I&&S&&n(O.name,I.id,f.id,S,d);break;case"currentUserGroups":I&&y&&r(O.name,I.id,h,"ALL"===b?null:b.toLowerCase(),y.id,E.toLowerCase(),"asc"===m,d)}}),[f,g,r,n,O,h,y,b,E,S,m,I,d]);var w=function(){c&&t(O.name,I.id,h,"ALL"===b?null:b.toLowerCase(),c,"pickGroup"===g?f.id:y.id,E.toLowerCase(),"asc"===m,d)};return W.a.createElement("div",{className:"widget-wall__wrapper"},"list"===_&&!nt()(l)&&O&&W.a.createElement("div",{className:"widget-wall__list"},l.map((function(e){return W.a.createElement(Ur,{key:e.id+e.uid,item:e,provider:O.name,theme:A})}))),"slideshow"===_&&!nt()(l)&&W.a.createElement("div",{className:"widget-wall__slideshow"},W.a.createElement(Je.Slideshow,{autoPlay:C,fillHeight:!0,groupBy:v,slideshowControlsProps:{nextButtonProps:{label:Object(fe.h)("GLOBAL.NEXT")},previousButtonProps:{label:Object(fe.h)("GLOBAL.PREVIOUS")}},interval:T,theme:A},l.map((function(e){return W.a.createElement(Je.SlideshowItem,{key:e.id,theme:A},W.a.createElement(Ur,{item:e,provider:O.name,theme:A}))})))),!o&&s&&!nt()(l)&&"slideshow"!==_&&W.a.createElement(sn.w,{callback:function(){return w()}}),!o&&!s&&i&&"slideshow"!==_&&O&&W.a.createElement("div",{className:"infinite-scroll-button"},W.a.createElement(Je.Button,{emphasis:Je.Emphasis.medium,leftIcon:et.l,theme:A,onClick:function(){return w()},style:{width:"100%"}},Object(fe.h)("GLOBAL.MORE_RESULTS"))),!o&&(nt()(l)||!O)&&W.a.createElement("div",{className:"no-results"},W.a.createElement(Je.Icon,{icon:et.Pb}),W.a.createElement("span",null,Object(fe.h)("WIDGET.WALL.NO_POSTS"))),o&&W.a.createElement("div",{className:"loader loader--progress loader--circular"},W.a.createElement(Je.Progress,{theme:A})))};Mr.defaultProps={hasNextPage:!1,isLoading:!1,isMainWidget:!1,nextPageCursor:"",posts:[]},Mr.propTypes={getNextPage:pe.func.isRequired,getPostByPostId:pe.func.isRequired,getPosts:pe.func.isRequired,hasNextPage:pe.bool,initState:pe.func.isRequired,isLoading:pe.bool,isMainWidget:pe.bool,nextPageCursor:pe.string,posts:Object(pe.arrayOf)(pe.any),style:Object(pe.objectOf)(pe.any).isRequired,uuid:pe.string.isRequired,value:Object(pe.objectOf)(pe.any).isRequired},Mr.isEditable=function(){return!1},Mr.isWidgetEmpty=function(e){return void 0===e||0===e.length},Mr.isWidgetHidden=function(e){return!Object(je.f)()||Mr.isWidgetEmpty(e)};var xr=Mr,$r=Object(G.connect)((function(e,t){if(t.uuid){var n=e.widgets.wall.find((function(e){return e.uuid===t.uuid})),r=e.loadingState[t.uuid];if(void 0!==n)return{hasNextPage:n.hasNextPage,isLoading:r&&r.loading||!1,nextPageCursor:n.nextPageCursor,posts:n.posts}}return{}}),{getNextPage:kr.e,getPostByPostId:kr.f,getPosts:kr.g,initState:kr.h})(xr);n.d(t,"Widget",(function(){return Pe})),n.d(t,"WidgetChannelList",(function(){return ze})),n.d(t,"WidgetChat",(function(){return Nt})),n.d(t,"WidgetCommunityIntro",(function(){return $t})),n.d(t,"WidgetContact",(function(){return zt})),n.d(t,"DocumentManagementMenu",(function(){return tn})),n.d(t,"FileListWidgetActionsMenu",(function(){return mn})),n.d(t,"WidgetImageGalleryStyleSettings",(function(){return Tn})),n.d(t,"WidgetImageGallery",(function(){return Sn})),n.d(t,"WidgetLinks",(function(){return Pn})),n.d(t,"WidgetRemote",(function(){return Un})),n.d(t,"WidgetRss",(function(){return Bn})),n.d(t,"WidgetWeather",(function(){return Qn})),n.d(t,"WidgetTasks",(function(){return br})),n.d(t,"WidgetDelve",(function(){return Lr})),n.d(t,"WidgetChart",(function(){return jr})),n.d(t,"WidgetWall",(function(){return $r}))},,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Lumdrian}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(22),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__),axios__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(143),axios__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_4__),Lumdrian=function(){function Lumdrian(e){var t=e.dependencies,n=e.verbose,r=void 0!==n&&n;_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,Lumdrian),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this,"endpointsMap",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this,"dependenciesMap",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this,"storage",void 0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this,"verbose",void 0),this.endpointsMap={},this.dependenciesMap={},t&&this.registerDependenciesMap(t),this.storage={},this.verbose=r}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Lumdrian,[{key:"registerEndpoints",value:function(e){var t=this;e.forEach((function(e){t.addEndpoint(e)}))}},{key:"registerDependenciesMap",value:function(e){this.dependenciesMap=e}},{key:"addEndpoint",value:function(e){this.endpointsMap[e.endpointName]=e.endpointUrl}},{key:"load",value:function load(_ref2){var _this2=this,endpointURL=_ref2.endpointURL,endpointName=_ref2.endpointName,identifier=_ref2.identifier,selector=_ref2.selector;return new Promise((function(resolve,reject){var id="".concat(endpointURL,"/").concat(identifier);void 0!==endpointName&&(id="".concat(_this2.endpointsMap[endpointName],"/").concat(identifier));var storedEntity=_this2.storage[id]||{loaderStatus:-1,watchers:[]};if(_this2.verbose&&(console.log("LOAD REQUEST : ".concat(id)),console.log("LOAD STATUS : ".concat(storedEntity.loaderStatus))),-1===storedEntity.loaderStatus)_this2.storage[id]=storedEntity,axios__WEBPACK_IMPORTED_MODULE_4___default.a.get(id).then((function(response){try{var lum=_this2,srcCode=response.data,remoteModule,remoteComponent,define=function(e,t){remoteModule=t.apply(void 0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(e.map((function(e){return lum.dependenciesMap[e]}))))};eval(srcCode),remoteComponent=remoteModule,selector&&(remoteComponent=_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({},selector,remoteModule[selector])),storedEntity.module=remoteModule,_this2.verbose&&console.log("LOAD REQUEST : complete"),storedEntity.watchers&&(_this2.verbose&&console.log("LOAD REQUEST : Waking up ".concat(storedEntity.watchers.length," watcher(s)")),storedEntity.watchers.forEach((function(e){return e.resolve(remoteComponent)}))),storedEntity.loaderStatus=1,_this2.storage[id]=storedEntity,resolve(remoteComponent)}catch(e){reject(e)}})).catch((function(e){storedEntity.watchers&&storedEntity.watchers.forEach((function(t){return t.reject(e)})),reject(e)}));else if(0===storedEntity.loaderStatus)_this2.verbose&&console.log("LOAD REQUEST : waiting for initial load to complete...."),storedEntity.watchers.push({resolve:resolve,reject:reject});else if(1===storedEntity.loaderStatus){_this2.verbose&&console.log("LOAD REQUEST : retrieve from storage");var component=selector?_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()({},selector,storedEntity.module[selector]):storedEntity.module;resolve(component)}}))}}]),Lumdrian}()},function(e,t,n){e.exports=n.p+"assets/img/widget-settings/view-mode-grid-light.svg?5ba969816ebfbad22cd19c787a071e46"},function(e,t,n){e.exports=n.p+"assets/img/widget-settings/slideshow-bullets.svg?e44c3688dcbd81e649c8f7d85c884177"},function(e,t,n){e.exports=n.p+"assets/img/widget-settings/view-mode-variant-grid-group.svg?5f9c2bdd09624e5136d25317dcdeefcb"},function(e,t,n){e.exports=n.p+"assets/img/widget-settings/view-mode-variant-grid-ungroup.svg?094bfe43c0c7dee469f97ac9c21626a9"},function(e,t,n){e.exports=n.p+"assets/img/widget-settings/caption-below.svg?92df037e187bb64c98d7b7ef58655c3a"},function(e,t,n){e.exports=n.p+"assets/img/widget-settings/caption-cover.svg?2b848c4c10ef0048451dce2d5232b529"},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(22),i=n.n(r),a=n(20),o=n.n(a),s=n(24),c=n.n(s),l=n(25),u=n.n(l),d=n(26),p=n.n(d),f=n(3),g=n.n(f),m=n(0),v=n(2),h=(n(86),n(31)),y=function(t){function n(e){var t;return i()(this,n),t=c()(this,u()(n).call(this,e)),t.state={dragging:!1,left:0,node:null,originX:0,originY:0,top:0,x:0,y:0},t.setNode=function(e){if(e){var n=Object(h.t)(e);t.setState({left:n.left,node:e,top:n.top})}},t.onPick=function(e){e.preventDefault(),e.stopPropagation();var n=Object(h.t)(t.state.node);t.setState({dragging:!0,left:n.left,originX:e.pageX,originY:e.pageY,top:n.top,x:e.pageX,y:e.pageY},(function(){return t.props.onPick(e)}))},t.onDrag=function(e){t.state.dragging&&(e.preventDefault(),e.stopPropagation(),t.setState({x:e.pageX,y:e.pageY}))},t.onDrop=function(e){t.state.dragging&&(e.preventDefault(),e.stopPropagation(),t.setState({dragging:!1},(function(){return t.props.onDrop(e)})))},t}return p()(n,t),o()(n,[{key:"componentDidUpdate",value:function(e){var t=this.state;if(t.node&&e.value!==this.props.value){var n=Object(h.t)(t.node);t.left===n.left&&t.top===n.top||this.setState({left:n.left,originX:t.originX+(n.left-t.left),originY:t.originY+(n.top-t.top),top:n.top})}}},{key:"componentDidMount",value:function(){e.document.addEventListener("mousemove",this.onDrag,!0),e.document.addEventListener("mouseup",this.onDrop,!0)}},{key:"componentWillUnmount",value:function(){e.document.removeEventListener("mousemove",this.onDrag,!0),e.document.removeEventListener("mouseup",this.onDrop,!0)}},{key:"render",value:function(){var e=this.state;return m.createElement("div",{className:"widget-style-area__icon",style:{position:"relative"},onMouseDown:this.onPick,ref:this.setNode},e.dragging&&m.createElement("div",{className:"widget-style-area__icon",style:{left:e.x-e.originX,marginBottom:0,marginLeft:-2,marginRight:0,marginTop:-2,opacity:.5,pointerEvents:"none",position:"absolute",top:e.y-e.originY,zIndex:100}}))}}]),n}(m.PureComponent);g()(y,"propTypes",{onDrop:v.func.isRequired,onPick:v.func.isRequired,value:v.string})}).call(this,n(213))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){if(e){var t=function(e){return e.indexOf("javascript:")>=0?e.replace("javascript:",""):e}(e),n=document.createElement("div");return n.textContent=t,n.innerHTML}return""}},function(e,t,n){e.exports=n.p+"assets/img/workplace/workplace.svg?c5e4ebf7651a82f10b018953735e6e8c"},function(e,t,n){e.exports=n.p+"assets/img/slack/icon_slack.svg?2de8d837b2ab95ca789960934888e2ef"},function(e,t,n){e.exports=n.p+"assets/img/microsoft-apps/ms_icon_teams.svg?d1cc37d0af7fbd3d9613489bb2f10f9e"},function(e,t,n){e.exports=n.p+"assets/img/microsoft-apps/ms_icon_yammer.svg?34eccfc2da6cee39a5620e18f7089669"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r="".concat("admin/widget"),i="".concat(r,"/UPDATE_WIDGET_CONTENT"),a=function(e){var t=e.lang,n=e.content;return function(e){return e({payload:{content:n,lang:t},type:i})}}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return p}));var i=n(3),a=n.n(i),o=n(34),s=n(196),c=n(601),l=n(292),u=n(173),d=Object(o.g)(),p=function(e){return function(t,n){var i=e;if(d.isLegacyContext){var o=e.split(".");i=o[o.length-1].replace("-get","")}var p=n(),f=Object(l.c)(p);t(c.a.setCurrentPage(i)),Object(s.a)((function(){u.a.notifyNavigationSubscribers(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({currentPage:i},f))}))}}},,function(e,t,n){"use strict";n.r(t);n(845),n(939),n(940),n(941),n(942),n(943),n(944),n(945),n(946),n(947),n(948),n(949),n(950),n(951),n(952),n(953),n(954),n(955),n(846),n(847),n(956),n(848),n(849),n(850);n.d(t,"DEPENDENCIES",(function(){return r}));var r=[].concat(["oc.lazyLoad","ui.router","ngResource","ngSanitize","ngTimezone","ngCookies","ngStorage","angulartics","angulartics.google.analytics","angular-bind-html-compile","http-auth-interceptor","pascalprecht.translate","toolkit.base_service","dndLists","as.sortable","lumx","cfp.hotkeys","dbaq.emoji","ngPromiseExtras"],["AppTemplates","Factories","Services","CustomServices","Controllers","Directives","Filters","Constants","Values","Widgets","LumSite"])},function(e,t,n){"use strict";n.r(t),n.d(t,"observeTargets",(function(){return u})),n.d(t,"LAZY_LOADABLE_CLASS",(function(){return r})),n.d(t,"LAZY_LOADED_CLASS",(function(){return i}));var r="lazy-loadable",i="lazy-loaded",a=function(e){if(e.hasAttribute("data-lazy")){var t=e.getAttribute("data-lazy"),n=e.getAttribute("src");n!==t&&e.setAttribute("src",t)}e.classList.remove(r),e.classList.add(i)},o=function(){return[].slice.call(document.querySelectorAll(".".concat(r)))},s=function(){return[].slice.call(document.querySelectorAll(".".concat(i)))},c=function(){if("IntersectionObserver"in window){var e=new IntersectionObserver((function(t,n){t.forEach((function(t){if(t.isIntersecting){var n=t.target;a(n),e.unobserve(n)}}))}),{rootMargin:"100px",threshold:.1});window.lazyTargetObserver=e}else{var t=o();t.forEach((function(e){a(e)}))}},l=function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;"attributes"===s.type&&"data-lazy"===s.attributeName&&s.target.setAttribute("src",s.target.getAttribute("data-lazy"))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}},u=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){window.mutationObserver||(window.mutationObserver=new MutationObserver(l));var n=s();n.forEach((function(e){a(e),window.mutationObserver.observe(e,{attributes:!0})}))}else{window.lazyTargetObserver||c();var r=o();r&&r.length>0?r.forEach((function(e){window.lazyTargetObserver.observe(e)})):r&&0===r.length&&setTimeout((function(){e(t)}),200)}}},,,function(e,t,n){var r=n(764),i=n(529),a=n(414),o=n(193),s=n(1060);e.exports=function(e){if(null==e)return 0;if(a(e))return o(e)?s(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}n.d(t,"a",(function(){return r}))},,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"GOOGLE_PROVIDERS",(function(){return i})),n.d(t,"MS_PROVIDERS",(function(){return r}));var r=["planner","outlook","lumapps"],i=["lumapps"]},function(e,t,n){"use strict";n.r(t),n.d(t,"ORDER_BY",(function(){return r})),n.d(t,"POST_TYPES",(function(){return i})),n.d(t,"PROVIDERS",(function(){return a}));var r=["CREATED","GROUPNAME","AUTHOR"],i=["ALL","NORMAL","ANNOUNCEMENT","POLL","QUESTION","PRAISE"],a=["yammer","fbworkplace"]},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){g=e}n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return a}));var o=n(3),s=n.n(o),c=n(37),l=n(87),u=n.n(l),d=n(21),p=n.n(d),f=n(559),g={entities:{},id:"",logo:{},parent:"",slug:"",defaultInstanceId:null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;return Object(c.b)(e,(function(e){switch(t.type){case"__angular__/instance/update":var n=t.newState,r=n.id,a=n.logo,o=n.parent,s=n.slug,c=n.entities;return e.id=r,e.logo=a,e.parent=o,e.slug=s,Object.assign(e.entities,c),e;case f.a:var l=t.payload.instances,d=p()(l,"isDefaultInstance");return d&&(e.defaultInstanceId=d.id),e.entities=i({},e.entities,{},u()(l,"uid")),e;case f.b:var g=t.payload;return e.entities[g.id]=g,g.isDefaultInstance&&(e.defaultInstanceId=g.id),e;default:return e}}))}},function(e,t,n){var r=n(565),i=n(112),a=n(534);e.exports=function(e,t,n){t=r(t,e);var o=-1,s=t.length;for(s||(s=1,e=void 0);++o<s;){var c=null==e?void 0:e[a(t[o])];void 0===c&&(o=s,c=n),e=i(c)?c.call(e):c}return e}},function(e,t,n){"use strict";function r(e){a=e.header}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var i=n(43),a={},o=Object(i.a)({domain:"header",initialState:a,reducers:{"__angular__/instance/update":function(e){Object.assign(e,a)}}}),s=(o.actions,o.reducer)},,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){var t={directories:e.directories};c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,o()({},s.b,{directories:e.directories||[]})),e}(t)[s.b]}var i=n(43),a=n(3),o=n.n(a),s=n(353);n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return r}));var c={directories:[]},l=Object(i.a)({domain:s.b,initialState:c,reducers:{"__angular__/instance/update":function(e){Object.assign(e,c)}}}),u=(l.actions,l.reducer)},function(e,t,n){"use strict";function r(e){var t={user:e.user,userRoles:e.userRoles,permissions:{}};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,n=e.userRoles,r=void 0===n?[]:n,i={},o={};r&&r.forEach((function(e){var t=e.authorizations,n=void 0===t?[]:t;n.forEach((function(e){var t=e.actions,n=void 0===t?[]:t,r=e.canEditOnlyOwnContent;n.forEach((function(e){var t=e.name,n=e.type,s=e.customContentType,c=Object(a.a)(t,n,s);i[c]=!0,r&&(o[c]=r)}))}))}));var s={isSuperAdmin:null==t?void 0:t.isSuperAdmin,instancesSuperAdmin:t?t.instancesSuperAdmin:[],authorizations:i,canEditOnlyOwnContentAuthorizations:o};Object.assign(e,{permissions:s})}(t),o=t.permissions}var i=n(43),a=n(718);n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var o={instancesSuperAdmin:[],isSuperAdmin:!1},s=Object(i.a)({domain:"permissions",initialState:o,reducers:{"__angular__/instance/update":function(e){Object.assign(e,o)}}}),c=(s.actions,s.reducer)},,,,,,,,,function(e,t,n){"use strict";(function(e){function t(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function r(t,n,i){$.each(n,(function(e){angular.isUndefined(i)&&(n[e]=void 0)})),$.each(t,(function(i){"object"===e.type(t[i])?("object"!==e.type(n[i])&&(n[i]={}),r(t[i],n[i])):"array"===e.type(t[i])?n[i]=$.extend(!0,[],t[i]):n[i]=t[i]}))}var i=n(258),a=n.n(i);angular.module("toolkit.base_service",[]).service("BaseService",(function(){function e(e,t){var n=new i(e,t);return n}var n=function(e,t){this.Api=e||{},this.maxResults=30,this.objectIdentifier="objectKey",this.defaultParams={},this.autoInit=!0,this.replace=!0,this.prependOnList=!1,this.prependOnSave=!1,this.fullListResponse=!1,this.preSave=void 0,this.postSave=void 0,this.postGet=void 0,this.postList=void 0;var n=this;angular.isDefined(t)&&angular.forEach({maxResults:"number",objectIdentifier:"string",defaultParams:"object",autoInit:"boolean",preSave:"function",postSave:"function",postGet:"function",postList:"function",replace:"boolean",prependOnList:"boolean",prependOnSave:"boolean",fullListResponse:"boolean"},(function(e,r){if(angular.isDefined(t[r])){if(a()(t[r])!=e)throw new TypeError(r+" must be a "+e);n[r]=t[r]}})),this._current=void 0,this._lastListCallId=void 0,this._lastCallId={},this._lastRefreshDate=void 0,this._saveInProgress={},this._deleteInProgress={},this._list=[]};n.prototype.get=function(e,t,n,r,i){return this._get(e,t,n,r,i)},n.prototype.getAsync=function(e,t,n,r,i){return this._getAsync(e,t,n,r,i)},n.prototype.getList=function(e,t,n){return this._getList(e,t,n)},n.prototype.fetch=function(e,t,n,r,i){return this._fetch(e,t,n,r,i)},n.prototype.del=function(e,t,n){return this._del(e,t,n)},n.prototype.delMulti=function(e,t,n){return this._delMulti(e,t,n)},n.prototype.save=function(e,t,n){return this._save(e,t,n)},n.prototype.isCallInProgress=function(e){return this._isCallInProgress(e)},n.prototype.idToModel=function(e,t,n){if(!angular.isUndefined(e)&&!angular.isUndefined(this.getList())&&0!==this.getList().length){var r=this.get(e,t,n);return t(r),r}t()},n.prototype.modelToId=function(e,t){return t(e[this.objectIdentifier]),e[this.objectIdentifier]},n.prototype._getAsync=function(e,t,n,r,i){if(i=void 0===i||i,!angular.isUndefined(e)){if(angular.isObject(e)){var a=e;return this._getWithParams(a,t,n,r,i)}var o=this,s={};return s[this.objectIdentifier]=e,this._computeProjection(s,r),this.Api.get(s,(function(e){o.postGet&&(e=o.postGet(e)),i&&o.setCurrent(e),angular.isFunction(t)&&t(e)}),n)}},n.prototype._get=function(e,n,r,i,a){if(a=void 0===a||a,!angular.isUndefined(e)){if(angular.isObject(e)){var o=this._prepareParams(e);return this._getWithParams(o,n,r,i,a)}for(var s in this._list)if(this._list[s][this.objectIdentifier]===e){var c=this._list[s];return this.postGet&&(c=this.postGet(c)),a&&this.setCurrent(c),angular.isFunction(n)&&n(c),c}if(void 0===this._lastCallId[e]){var l=this,u={};return u[this.objectIdentifier]=e,this._computeProjection(u,i),this._lastCallId[e]=t(),this.Api.get(u,(function(t){l.postGet&&(t=l.postGet(t)),a&&l.setCurrent(t),angular.isFunction(n)&&n(t),delete l._lastCallId[e]}),(function(t){angular.isFunction(r)&&r(t),delete l._lastCallId[e]}))}}},n.prototype.setCurrent=function(e){this._current=e},n.prototype.getCurrent=function(){return this._current},n.prototype._getWithParams=function(e,n,r,i,a){var o=this,s=e[o.objectIdentifier]||"new";return e=e||{},a=void 0===a||a,this._computeProjection(e,i),this._lastCallId[s]=t(),this.Api.get(e,(function(e){o.postGet&&(e=o.postGet(e)),a&&(o._current=e),angular.isFunction(n)&&n(e),delete o._lastCallId[s]}),(function(e){angular.isFunction(r)&&r(e),delete o._lastCallId[s]}))},n.prototype._getList=function(e,t,n){if(this.autoInit&&angular.isUndefined(this._lastListCallId)&&(angular.isUndefined(this._lastRefreshDate)||Date.now()-this._lastRefreshDate>6e4))if(angular.isFunction(e)){var r=this;this.fetch(void 0,(function(t){e(t.items,r.fullListResponse?t:void 0)}),t,n)}else this.fetch(void 0,e,t,n);return angular.isFunction(e)&&e(this._list),this._list},n.prototype._fetch=function(e,n,r,i,a){if(a=a||"list",angular.isFunction(this.Api[a])){var o={maxResults:this.maxResults};for(var s in this.defaultParams)o[s]=this.defaultParams[s];for(var c in e)o[c]=e[c];this._computeProjection(o,i),this._lastListCallId=t(),o.callId=this._lastListCallId;var l=this;return this.Api[a](o,(function(e){if(e.callId===l._lastListCallId){if(angular.isDefined(e.items))if(l.postList&&(e.items=l.postList(e.items)),l.replace)l._list=e.items;else{for(var t=l._list.length-1;t>=0;t--){var r=l._list[t];if(r)for(var i=0;i<e.items.length;i++){var a=e.items[i];if(a&&a[l.objectIdentifier]===r[l.objectIdentifier]){angular.copy(a,r),e.items.splice(i,1);break}}}for(var o=0;o<e.items.length;o++)l._list.push(e.items[o])}else l._list.splice(0,l._list.length);l._lastListCallId=void 0,l._lastRefreshDate=Date.now(),angular.isFunction(n)&&n(l._list,l.fullListResponse?e:void 0)}}),(function(e){l._lastListCallId=void 0,angular.isFunction(r)&&r(e)}))}r()},n.prototype._del=function(e,n,r){var i=this;i._deleteInProgress[e]=t();var a={};a[this.objectIdentifier]=e,this.Api.delete(a,(function(){for(var t in i._list)if(i._list[t][i.objectIdentifier]===e){i._list.splice(t,1);break}delete i._deleteInProgress[e],angular.isFunction(n)&&n()}),(function(t){delete i._deleteInProgress[e],angular.isFunction(r)&&r(t)}))},n.prototype._delMulti=function(e,n,r){var i=this;for(var a in e)i._deleteInProgress[e[a]]=t();var o={};o.uid=e,this.Api.deleteMulti(o,(function(t){for(var r in t.uid)for(var a in i._list)i._list[a][i.objectIdentifier]===t.uid[r]&&i._list.splice(a,1);for(var o in angular.isFunction(n)&&n(t),e)delete i._deleteInProgress[e[o]]}),(function(t){for(var n in angular.isFunction(r)&&r(t),e)delete i._deleteInProgress[e[n]]}))},n.prototype._save=function(e,n,i){var a=this,o=e[a.objectIdentifier]||"new";a._saveInProgress[o]=t(),angular.isDefined(this.preSave)&&(e=this.preSave(e)),this.Api.save(e,(function(e){var t=!1;for(var i in angular.isDefined(a.postSave)&&(e=a.postSave(e)),a._list)a._list[i][a.objectIdentifier]===e[a.objectIdentifier]&&(r(e,a._list[i]),t=!0);t||(a.prependOnSave?a._list.unshift(e):a._list.push(e)),a.setCurrent(e),delete a._saveInProgress[o],angular.isFunction(n)&&n(e)}),(function(e){delete a._saveInProgress[o],angular.isFunction(i)&&i(e)}))},n.prototype._isCallInProgress=function(e,t){var n={list:"_lastListCallId",get:"_lastCallId",save:"_saveInProgress",del:"_deleteInProgress"};if(void 0!==n[e])return"list"===e?void 0!==this[n[e]]:t?angular.isDefined(this[n[e]])&&t in this[n[e]]:angular.isDefined(this[n[e]])&&0!==Object.keys(this[n[e]]).length;var r=!1,i=this;return angular.forEach(n,(function(e,n){r="list"===n?r||void 0!==i[e]:t?r||angular.isDefined(i[e])&&t in i[e]:r||angular.isDefined(i[e])&&0!==Object.keys(i[e]).length})),r},n.prototype._computeProjectionRecursively=function(e,t,n){var r=this;if(e=angular.isUndefined(e)?{}:e,angular.isUndefined(e.fields)&&angular.isDefined(t)&&((angular.isString(t)||angular.isArray(t))&&t.length>0||angular.isObject(t)&&Object.keys(t).length,1))if(e.fields="",angular.isString(t))e.fields=angular.isDefined(n)&&n.length>0?n+"/"+t:t;else if(angular.isObject(t)||angular.isArray(t)){var i=!0;angular.isDefined(n)&&n.length>0&&!angular.isArray(t)&&(e.fields+=n+"("),angular.forEach(t,(function(a,o){if(!angular.isUndefined(a)&&!1!==a){if(e.fields+=i?"":",",angular.isArray(t))e.fields+=angular.isDefined(n)&&n.length>0?n+"/"+a:a,i=!1;else{var s={};r._computeProjectionRecursively(s,a,o),angular.isDefined(s.fields)&&s.fields.length>0&&(e.fields+=s.fields,i=!1)}0}})),angular.isDefined(n)&&n.length>0&&!angular.isArray(t)&&(e.fields+=")")}else angular.isDefined(t)&&angular.isDefined(n)&&n.length>0&&(e.fields=n);return e},n.prototype._computeProjection=function(e,t){if(this._computeProjectionRecursively(e,t),angular.isDefined(e.fields)&&e.fields.length>0){var n=e.fields.replace(/\([^)]+\)/,"");-1===n.indexOf("more")&&(e.fields+=",more"),-1===n.indexOf("callId")&&(e.fields+=",callId"),-1===n.indexOf("cursor")&&(e.fields+=",cursor")}return e},n.prototype._prepareParams=function(e,t){e=e||{};var n=angular.copy(this.defaultParams);return angular.extend(n,e),angular.isDefined(t)&&this._computeProjection(n,t),n};var i=function(e,t){n.call(this,e,t),this._cursor=void 0,this._more=!1,this._firstRun=!0,this._params={}};i.prototype=Object.create(n.prototype),i.prototype.filterize=function(e,t,n,r,i){return this._filterize(e,t,n,r,i)},i.prototype._filterize=function(e,t,n,r,i){var a=this._prepareParams(e,r);return this._list=[],this._lastListCallId=void 0,this._more=!0,this._cursor=void 0,this._params=a,this.fetch(a,t,n,i)},i.prototype.hasMore=function(){return this._more},i.prototype.nextPage=function(e,t,n){return this._nextPage(e,t,n)},i.prototype._nextPage=function(e,t,n){this._more&&!this._isCallInProgress()&&this.fetch(this._params,e,t,n)},i.prototype._getList=function(e,t,n){return this._firstRun&&0===this._list.length&&this.autoInit&&(this.filterize(null,e,t,n),this._firstRun=!1),angular.isFunction(e)&&e(this._list),this._list},i.prototype._fetch=function(e,n,r,i){if(i=i||"list",angular.isFunction(this.Api[i])){if(this._lastListCallId=t(),this._more){var a={maxResults:this.maxResults,callId:this._lastListCallId,more:this._more,cursor:this._cursor};this._firstRun=!1,e=e||{},angular.extend(a,e);var o=this;return this.Api[i](a,(function(e){e.callId===o._lastListCallId&&(angular.isDefined(e.items)&&(o.prependOnList&&angular.isArray(e.items)&&e.items.reverse(),o.postList&&(e.items=o.postList(e.items,o._list))),o._more=e.more,o._cursor=e.cursor,o._lastListCallId=void 0,o._lastRefreshDate=Date.now(),e.items&&(o.prependOnList&&angular.isArray(e.items)?o._list=e.items.concat(o._list):o._list=o._list.concat(e.items)),o.deduplicate(),angular.isFunction(n)&&n(o._list,o.fullListResponse?e:void 0))}),(function(e){o._more=!1,o._lastListCallId=void 0,angular.isFunction(r)&&r(e)}))}}else r()},i.prototype.deduplicate=function(){var e=this,n={},r=[];angular.forEach(e._list,(function(i){var a=i[e.objectIdentifier]||t();n[a]||(n[a]=!0,r.push(i))})),e._list=r};var o=e,s=function(e,t){this.Api=e,this.maxResults=30,this.autoInit=!0,this.defaultParams={},this.objectIdentifier="objectKey",this._services={},this.options=t||{};var n=this;angular.isDefined(t)&&angular.forEach(["maxResults","objectIdentifier","defaultParams","autoInit"],(function(e){angular.isDefined(t[e])&&(n[e]=t[e])}))};return s.prototype.initList=function(e,t,n,r,i){var a=o(this.Api,this.options);a._list=n||[],a._more=r||!1,a._cursor=i,a.maxResults=this.maxResults,a.objectIdentifier=this.objectIdentifier,a.defaultParams=t||this.defaultParams,this._services[e]=a},s.prototype.filterize=function(e,t,n,r,i,a){if(r=this._getListKey(r),angular.isDefined(this._services[r]))return this._services[r]._filterize(e,t,n,i,a)},s.prototype.nextPage=function(e,t,n,r){if(n=this._getListKey(n),angular.isDefined(this._services[n]))return this._services[n]._nextPage(e,t,r)},s.prototype.getList=function(e,t,n,r){if(n=this._getListKey(n),angular.isDefined(this._services[n]))return this._services[n]._getList(e,t,r)},s.prototype.get=function(e,t,n,r,i,a){if(r=this._getListKey(r),angular.isDefined(this._services[r]))return this._services[r]._get(e,t,n,i,a)},s.prototype.getAsync=function(e,t,n,r,i,a){if(r=this._getListKey(r),angular.isDefined(this._services[r]))return this._services[r]._getAsync(e,t,n,i,a)},s.prototype.save=function(e,t,n,r){if(r=this._getListKey(r),angular.isDefined(this._services[r]))return this._services[r]._save(e,t,n)},s.prototype.del=function(e,t,n,r){if(r=this._getListKey(r),angular.isDefined(this._services[r]))return this._services[r]._del(e,t,n)},s.prototype.delMulti=function(e,t,n,r){if(r=this._getListKey(r),angular.isDefined(this._services[r]))return this._services[r]._delMulti(e,t,n)},s.prototype.getCurrent=function(e){if(e=this._getListKey(e),angular.isDefined(this._services[e]))return this._services[e]._current},s.prototype.setCurrent=function(e,t){if(t=this._getListKey(t),angular.isDefined(this._services[t]))return this._services[t].setCurrent(e)},s.prototype._getListKey=function(e){var t=angular.isDefined(e)?e:"default";return(angular.isUndefined(this._services)||angular.isUndefined(this._services[t]))&&this.initList(t),t},s.prototype.isCallInProgress=function(e,t){var n=!1;if(angular.isString(e)&&angular.isDefined(e)&&angular.isDefined(this._services[e]))n=this._services[e]._isCallInProgress(t)||n;else for(var r in this._services)n=this._services[r]._isCallInProgress(t)||n;return n},s.prototype.hasMore=function(e){var t=angular.isDefined(e)?e:"default";if(angular.isDefined(this._services[t]))return this._services[t].hasMore()},{createService:function(e,t){var r=new n(e,t);return r},createPaginatedService:e,createListKeyService:function(e,t){var n=new s(e,t);return n},SimpleService:n,PaginatedService:i,ListKeyService:s}}))}).call(this,n(528))},function(e,t,n){var r;!function(){"use strict";angular.module("cfp.hotkeys",["AppTemplates"]).provider("hotkeys",["$injector",function(e){this.includeCheatSheet=!1,this.useNgRoute=e.has("ngViewDirective"),this.templateTitle="Keyboard Shortcuts:",this.templateHeader=null,this.templateFooter=null,this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;</div></div></div>',this.templateUrl=null,this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.defaultPreventIn=["INPUT","SELECT","TEXTAREA"],this.$get=["$rootElement","$rootScope","$compile","$window","$document","$templateCache","$http",function(e,t,n,r,i,a,o){function s(e){var t={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓",return:"⏎",enter:"⏎",backspace:"⌫"};e=e.split("+");for(var n=0;n<e.length;n++)"mod"===e[n]&&(r.navigator&&r.navigator.platform.indexOf("Mac")>=0?e[n]="command":e[n]="ctrl"),e[n]=t[e[n]]||e[n];return e.join(" + ")}function c(e,t,n,r,i,a){this.combo=e,this.description=t,this.callback=n,this.action=r,this.allowIn=i,this.persistent=a,this._formated=null}function l(){for(var e=h.hotkeys.length;e--;){var t=h.hotkeys[e];t&&!t.persistent&&p(t)}}function u(){h.helpVisible=!h.helpVisible,h.helpVisible?(S=f("esc"),p("esc"),d("esc",S.description,u,null,["INPUT","SELECT","TEXTAREA"])):(p("esc"),!1!==S&&d(S))}function d(e,t,n,r,i,a){var o,s=["INPUT","SELECT","TEXTAREA"],l=Object.prototype.toString.call(e);if("[object Object]"===l&&(t=e.description,n=e.callback,r=e.action,a=e.persistent,i=e.allowIn,e=e.combo),p(e),t instanceof Function?(a=i,i=r,r=n,n=t,t="$$undefined$$"):angular.isUndefined(t)&&(t="$$undefined$$"),void 0===a&&(a=!0),angular.isUndefined(i)||!angular.isArray(i[0])){var u=angular.isUndefined(i)?[]:i;i=[];for(var d=0,f=e.length;d<f;d++)i[d]=u}for(var v=i.length,y=(s=[],0);y<v;y++)s[y]=angular.copy(m.defaultPreventIn);if("function"==typeof n){var E;o=n,i instanceof Array||(i=[]);for(var b=0;b<v;b++)for(var O=angular.isUndefined(i[b])?[]:i[b],C=0,T=O.length;C<T;C++)O[C]=O[C].toUpperCase(),E=s[b].indexOf(O[C]),-1!==E&&s[b].splice(E,1);n=function(t,n,r){var i=!0;if(t){var a=t.target||t.srcElement,c=a.nodeName.toUpperCase();if((" "+a.className+" ").indexOf(" mousetrap ")>-1)i=!0;else for(var l=e.indexOf(r),u=0,d=s[l].length;u<d;u++)if(s[l][u]===c){i=!1;break}}i&&g(o.apply(this,arguments))}}"string"==typeof r?Mousetrap.bind(e,g(n),r):Mousetrap.bind(e,g(n));var S=new c(e,t,n,r,i,a);return h.hotkeys.push(S),S}function p(e){var t=e instanceof c?e.combo:e;if(Mousetrap.unbind(t),angular.isArray(t)){for(var n=!0,r=t.length;r--;)n=p(t[r])&&n;return n}var i=h.hotkeys.indexOf(f(t));return i>-1&&(Array.isArray(h.hotkeys[i].combo)&&h.hotkeys[i].combo.length>1?h.hotkeys[i].combo.splice(h.hotkeys[i].combo.indexOf(t),1):(angular.forEach(y,(function(e){var t=e.indexOf(h.hotkeys[i]);-1!==t&&e.splice(t,1)})),h.hotkeys.splice(i,1)),!0)}function f(e){if(!e)return h.hotkeys;var t;e=!angular.isArray(e)&&angular.isDefined(e)?[e]:e;for(var n=0,r=e.length;n<r;n++)for(var i=e[n],a=0,o=h.hotkeys.length;a<o;a++)if(t=h.hotkeys[a],t.combo.indexOf(i)>-1)return t;return!1}function g(e){return function(n,r){if(e instanceof Array){var i=e[0],a=e[1];e=function(e){a.scope.$eval(i)}}t.$apply((function(){e(n,f(r),r)}))}}var m=this,v=!0;Mousetrap.prototype.stopCallback=function(e,t){return!v||!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(t.contentEditable&&"true"==t.contentEditable)},c.prototype.format=function(){if(null===this._formated){var e=this.combo;e=!angular.isArray(e)&&angular.isDefined(e)?[e]:e;var t=[];angular.isDefined(e)&&e.length>0&&angular.forEach(e,(function(e){for(var n=e.split(/[\s]/),r=0,i=n.length;r<i;r++)n[r]=s(n[r]);n.length>0&&(t=t.concat(n))})),this._formated=t}return this._formated};var h=t.$new();h.hotkeys=[],h.helpVisible=!1,h.title=this.templateTitle,h.header=this.templateHeader,h.footer=this.templateFooter,h.toggleCheatSheet=u;var y={};if(this.useNgRoute&&t.$on("$routeChangeSuccess",(function(e,t){l(),t&&t.hotkeys&&angular.forEach(t.hotkeys,(function(e){var n=e[2];("string"==typeof n||n instanceof String)&&(e[2]=[n,t]),e[5]=!1,d.apply(this,e)}))})),this.includeCheatSheet){var E=this,b=i[0],O=e[0],C=function(e){var t=angular.element(e);d(E.cheatSheetHotkey,E.cheatSheetDescription,u),O!==b&&O!==b.documentElement||(O=b.body),angular.element(O).append(n(t)(h))};if(this.templateUrl){var T=a.get(this.templateUrl);T?C(T):o.get(this.templateUrl).then((function(e){C(e.data)}))}else C(this.template)}var S=!1,I={add:d,del:p,get:f,bindTo:function(e){return e.$id in y||(y[e.$id]=[],e.$on("$destroy",(function(){for(var t=y[e.$id].length;t--;)p(y[e.$id].pop())}))),{add:function(t){var n;return n=arguments.length>1?d.apply(this,arguments):d(t),y[e.$id].push(n),this}}},template:this.template,toggleCheatSheet:u,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:l,templateTitle:this.templateTitle,pause:function(){v=!1},unpause:function(){v=!0}};return I}]}]).directive("hotkey",["hotkeys",function(e){return{restrict:"A",link:function(t,n,r){var i,a=[];angular.forEach(t.$eval(r.hotkey),(function(t,n){i="string"==typeof r.hotkeyAllowIn?r.hotkeyAllowIn.split(/[\s,]+/):[],a.push(n),e.add({combo:n,description:r.hotkeyDescription,callback:t,action:r.hotkeyAction,allowIn:i})})),n.bind("$destroy",(function(){angular.forEach(a,e.del)}))}}}]).run(["hotkeys",function(e){}])}(),function(i,a,o){function s(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function c(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return m[e.which]?m[e.which]:v[e.which]?v[e.which]:String.fromCharCode(e.which).toLowerCase()}function l(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function u(e,t,n){return n||(n=function(){if(!g)for(var e in g={},m)e>95&&e<112||m.hasOwnProperty(e)&&(g[m[e]]=e);return g}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function d(e,t){var n,r,i,a=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}(e),i=0;i<n.length;++i)r=n[i],y[r]&&(r=y[r]),t&&"keypress"!=t&&h[r]&&(r=h[r],a.push("shift")),l(r)&&a.push(r);return t=u(r,a,t),{key:r,modifiers:a,action:t}}function p(e,t){return e!==a&&(e===t||p(e.parentNode,t))}function f(e){function t(e){e=e||{};var t,n=!1;for(t in m)e[t]?n=!0:m[t]=0;n||(y=!1)}function n(e,t,n,r,i,a){var o,s,c,u,d=[],f=n.type;if(!p._callbacks[e])return[];for("keyup"==f&&l(e)&&(t=[e]),o=0;o<p._callbacks[e].length;++o)if(s=p._callbacks[e][o],(r||!s.seq||m[s.seq]==s.level)&&f==s.action&&("keypress"==f&&!n.metaKey&&!n.ctrlKey||(c=t,u=s.modifiers,c.sort().join(",")===u.sort().join(",")))){var g=!r&&s.combo==i,v=r&&s.seq==r&&s.level==a;(g||v)&&p._callbacks[e].splice(o,1),d.push(s)}return d}function r(e,t,n,r){p.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(t),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(t))}function i(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=c(e);t&&("keyup"!=e.type||v!==t?p.handleKey(t,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):v=!1)}function o(e,n,i,a){function o(n){return function(){y=n,++m[e],clearTimeout(g),g=setTimeout(t,1e3)}}function s(n){r(i,n,e),"keyup"!==a&&(v=c(n)),setTimeout(t,10)}m[e]=0;for(var l=0;l<n.length;++l){var p=l+1===n.length,f=p?s:o(a||d(n[l+1]).action);u(n[l],f,a,e,l)}}function u(e,t,r,i,a){p._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var s,c=e.split(" ");c.length>1?o(e,c,t,r):(s=d(e,r),p._callbacks[s.key]=p._callbacks[s.key]||[],n(s.key,s.modifiers,{type:s.action},i,e,a),p._callbacks[s.key][i?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:i,level:a,combo:e}))}var p=this;if(e=e||a,!(p instanceof f))return new f(e);p.target=e,p._callbacks={},p._directMap={};var g,m={},v=!1,h=!1,y=!1;p._handleKey=function(e,i,a){var o,s=n(e,i,a),c={},u=0,d=!1;for(o=0;o<s.length;++o)s[o].seq&&(u=Math.max(u,s[o].level));for(o=0;o<s.length;++o)if(s[o].seq){if(s[o].level!=u)continue;d=!0,c[s[o].seq]=1,r(s[o].callback,a,s[o].combo,s[o].seq)}else d||r(s[o].callback,a,s[o].combo);var p="keypress"==a.type&&h;a.type!=y||l(e)||p||t(c),h=d&&"keydown"==a.type},p._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)u(e[r],t,n)},s(e,"keypress",i),s(e,"keydown",i),s(e,"keyup",i)}for(var g,m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},v={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},y={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},E=1;E<20;++E)m[111+E]="f"+E;for(E=0;E<=9;++E)m[E+96]=E;f.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},f.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},f.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},f.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},f.prototype.stopCallback=function(e,t){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!p(t,this.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},f.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},f.init=function(){var e=f(a);for(var t in e)"_"!==t.charAt(0)&&(f[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},f.init(),i.Mousetrap=f,e.exports&&(e.exports=f),r=function(){return f}.call(t,n,t,e),void 0===r||(e.exports=r)}(window,document)},function(e,t,n){e.exports===t&&(e.exports="ui.router"),function(e,t,n){"use strict";function r(e,t){return $(new($((function(){}),{prototype:e})),t)}function i(e){return x(arguments,(function(t){t!==e&&x(t,(function(t,n){e.hasOwnProperty(n)||(e[n]=t)}))})),e}function a(e){if(Object.keys)return Object.keys(e);var t=[];return x(e,(function(e,n){t.push(n)})),t}function o(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=r<0?Math.ceil(r):Math.floor(r),r<0&&(r+=n);r<n;r++)if(r in e&&e[r]===t)return r;return-1}function s(e,t,n,r){var i,s=function(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}(n,r),c={},l=[];for(var u in s)if(s[u]&&s[u].params&&(i=a(s[u].params),i.length))for(var d in i)o(l,i[d])>=0||(l.push(i[d]),c[i[d]]=e[i[d]]);return $({},c,t)}function c(e,t,n){if(!n)for(var r in n=[],e)n.push(r);for(var i=0;i<n.length;i++){var a=n[i];if(e[a]!=t[a])return!1}return!0}function l(e,t){var n={};return x(e,(function(e){n[e]=t[e]})),n}function u(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return x(n,(function(n){n in e&&(t[n]=e[n])})),t}function d(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)-1==o(n,r)&&(t[r]=e[r]);return t}function p(e,t){var n=M(e),r=n?[]:{};return x(e,(function(e,i){t(e,i)&&(r[n?r.length:i]=e)})),r}function f(e,t){var n=M(e)?[]:{};return x(e,(function(e,r){n[r]=t(e,r)})),n}function g(e,t){var r={},s=[],c=r,l=$(e.when(r),{$$promises:r,$$values:r});this.study=function(r){function u(e){return U(e)&&e.then&&e.$$promises}if(!U(r))throw new Error("'invocables' must be an object");var p=a(r||{}),f=[],g=[],m={};return x(r,(function e(n,i){if(2!==m[i]){if(g.push(i),1===m[i])throw g.splice(0,o(g,i)),new Error("Cyclic dependency: "+g.join(" -> "));if(m[i]=1,F(n))f.push(i,[function(){return t.get(n)}],s);else{var a=t.annotate(n);x(a,(function(t){t!==i&&r.hasOwnProperty(t)&&e(r[t],t)})),f.push(i,n,a)}g.pop(),m[i]=2}})),r=g=m=null,function(r,a,o){function s(){--b||(O||i(E,a.$$values),h.$$values=E,h.$$promises=h.$$promises||!0,delete h.$$inheritedValues,v.resolve(E))}function g(e){h.$$failure=e,v.reject(e)}function m(n,i,a){function c(e){u.reject(e),g(e)}function l(){if(!j(h.$$failure))try{u.resolve(t.invoke(i,o,E)),u.promise.then((function(e){E[n]=e,s()}),c)}catch(e){c(e)}}var u=e.defer(),d=0;x(a,(function(e){y.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(d++,y[e].then((function(t){E[e]=t,--d||l()}),c))})),d||l(),y[n]=u.promise}if(u(r)&&o===n&&(o=a,a=r,r=null),r){if(!U(r))throw new Error("'locals' must be an object")}else r=c;if(a){if(!u(a))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else a=l;var v=e.defer(),h=v.promise,y=h.$$promises={},E=$({},r),b=1+f.length/3,O=!1;if(j(a.$$failure))return g(a.$$failure),h;a.$$inheritedValues&&i(E,d(a.$$inheritedValues,p)),$(y,a.$$promises),a.$$values?(O=i(E,d(a.$$values,p)),h.$$inheritedValues=d(a.$$values,p),s()):(a.$$inheritedValues&&(h.$$inheritedValues=d(a.$$inheritedValues,p)),a.then(s,g));for(var C=0,T=f.length;C<T;C+=3)r.hasOwnProperty(f[C])?s():m(f[C],f[C+1],f[C+2]);return h}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function m(e,t,n){this.fromConfig=function(e,t,n){return j(e.template)?this.fromString(e.template,t):j(e.templateUrl)?this.fromUrl(e.templateUrl,t):j(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return k(e)?e(t):e},this.fromUrl=function(n,r){return k(n)&&(n=n(r)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then((function(e){return e.data}))},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function v(e,t,i){function a(t,n,r,i){if(E.push(t),h[t])return h[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(y[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return y[t]=new R.Param(t,n,r,i),y[t]}function o(e,t,n,r){var i=["",""],a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:a=a.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+n+"|",")?"]}return a+i[0]+t+i[1]}function s(i,a){var o,s,c,l,u;return o=i[2]||i[3],u=t.params[o],c=e.substring(m,i.index),s=a?i[4]:i[4]||("*"==i[1]?".*":null),s&&(l=R.type(s)||r(R.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":n)})),{id:o,regexp:s,segment:c,type:l,cfg:u}}t=$({params:{}},U(t)?t:{});var c,l,u,d,p=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,g="^",m=0,v=this.segments=[],h=i?i.params:{},y=this.params=i?i.params.$$new():new R.ParamSet,E=[];for(this.source=e;(c=p.exec(e))&&(l=s(c,!1),!(l.segment.indexOf("?")>=0));)u=a(l.id,l.type,l.cfg,"path"),g+=o(l.segment,u.type.pattern.source,u.squash,u.isOptional),v.push(l.segment),m=p.lastIndex;d=e.substring(m);var b=d.indexOf("?");if(b>=0){var O=this.sourceSearch=d.substring(b);if(d=d.substring(0,b),this.sourcePath=e.substring(0,m+b),O.length>0)for(m=0;c=f.exec(O);)l=s(c,!0),u=a(l.id,l.type,l.cfg,"search"),m=p.lastIndex}else this.sourcePath=e,this.sourceSearch="";g+=o(d)+(!1===t.strict?"/?":"")+"$",v.push(d),this.regexp=new RegExp(g,t.caseInsensitive?"i":n),this.prefix=v[0],this.$$paramNames=E}function h(e){$(this,e)}function y(e,r){function i(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return!j(r)||r}function a(r,i,a,u,d){function p(e){function t(e){var t=e(a,r);return!!t&&(F(t)&&r.replace().url(t),!0)}if(!e||!e.defaultPrevented){g&&r.url();g=n;var i,o=s.length;for(i=0;i<o;i++)if(t(s[i]))return;c&&t(c)}}function f(){return o=o||i.$on("$locationChangeSuccess",p),o}var g,m=u.baseHref(),v=r.url();return l||f(),{sync:function(){p()},listen:function(){return f()},update:function(e){e?v=r.url():r.url()!==v&&(r.url(v),r.replace())},push:function(e,t,i){var a=e.format(t||{});null!==a&&t&&t["#"]&&(a+="#"+t["#"]),r.url(a),g=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,a){if(!n.validates(i))return null;var o=e.html5Mode();t.isObject(o)&&(o=o.enabled),o=o&&d.history;var s=n.format(i);if(a=a||{},o||null===s||(s="#"+e.hashPrefix()+s),null!==s&&i&&i["#"]&&(s+="#"+i["#"]),s=function(e,t,n){return"/"===m?e:t?m.slice(0,-1)+e:n?m.slice(1)+e:e}(s,o,a.absolute),!a.absolute||!s)return s;var c=!o&&s?"/":"",l=r.port();return l=80===l||443===l?"":":"+l,[r.protocol(),"://",r.host(),l,c,s].join("")}}}var o,s=[],c=null,l=!1;this.rule=function(e){if(!k(e))throw new Error("'rule' must be a function");return s.push(e),this},this.otherwise=function(e){if(F(e)){var t=e;e=function(){return t}}else if(!k(e))throw new Error("'rule' must be a function");return c=e,this},this.when=function(e,t){var n,a=F(t);if(F(e)&&(e=r.compile(e)),!a&&!k(t)&&!M(t))throw new Error("invalid 'handler' in when()");var o={matcher:function(e,t){return a&&(n=r.compile(t),t=["$match",function(e){return n.format(e)}]),$((function(n,r){return i(n,t,e.exec(r.path(),r.search()))}),{prefix:F(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return a&&(n=t,t=["$match",function(e){return t=n,r=e,t.replace(/\$(\$|\d{1,2})/,(function(e,t){return r["$"===t?0:Number(t)]}));var t,r}]),$((function(n,r){return i(n,t,e.exec(r.path()))}),{prefix:(r=e,o=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(r.source),null!=o?o[1].replace(/\\(.)/g,"$1"):"")});var r,o}},s={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var c in s)if(s[c])return this.rule(o[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),l=e},this.$get=a,a.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function E(e,i){function d(e,t){if(!e)return n;var r,i=F(e),a=i?e:e.name,o=(r=a,0===r.indexOf(".")||0===r.indexOf("^"));if(o){if(!t)throw new Error("No reference point given for path '"+a+"'");t=d(t);for(var s=a.split("."),c=0,l=s.length,u=t;c<l;c++)if(""!==s[c]||0!==c){if("^"!==s[c])break;if(!u.parent)throw new Error("Path '"+a+"' not valid for state '"+t.name+"'");u=u.parent}else u=t;s=s.slice(c).join("."),a=u.name+(u.name&&s?".":"")+s}var p=h[a];return!p||!i&&(i||p!==e&&p.self!==e)?n:p}function p(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!F(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(h.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):F(t.parent)?t.parent:U(t.parent)&&F(t.parent.name)?t.parent.name:"";if(i&&!h[i])return function(e,t){y[e]||(y[e]=[]),y[e].push(t)}(i,t.self);for(var a in E)k(E[a])&&(t[a]=E[a](t,E.$delegates[a]));return h[n]=t,!t.abstract&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){v.$current.navigable==t&&c(e,n)||v.transitionTo(t,e,{inherit:!0,location:!1})}]),function(e){for(var t=y[e]||[];t.length;)p(t.shift())}(n),t}function g(e,i,p,g,y,E,b,O,C){function T(e,n,r,a,o,s){var c=r?n:l(e.params.$$keys(),n),u={$stateParams:c};o.resolve=y.resolve(e.resolve,u,o.resolve,e);var d=[o.resolve.then((function(e){o.globals=e}))];return a&&d.push(a),i.all(d).then((function(){var n=[];return x(e.views,(function(r,i){var a=r.resolve&&r.resolve!==e.resolve?r.resolve:{};a.$template=[function(){return p.load(i,{view:r,locals:o.globals,params:c,notify:s.notify})||""}],n.push(y.resolve(a,o.globals,o.resolve,e).then((function(n){if(k(r.controllerProvider)||M(r.controllerProvider)){var s=t.extend({},a,o.globals);n.$$controller=g.invoke(r.controllerProvider,null,s)}else n.$$controller=r.controller;n.$$state=e,n.$$controllerAs=r.controllerAs,o[i]=n})))})),i.all(n).then((function(){return o.globals}))})).then((function(e){return o}))}var S=i.reject(new Error("transition superseded")),I=i.reject(new Error("transition prevented")),_=i.reject(new Error("transition aborted")),A=i.reject(new Error("transition failed"));return m.locals={resolve:null,globals:{$stateParams:{}}},v={params:{},current:m.self,$current:m,transition:null},v.reload=function(e){return v.transitionTo(v.current,E,{reload:e||!0,inherit:!1,notify:!0})},v.go=function(e,t,n){return v.transitionTo(e,t,$({inherit:!0,relative:v.$current},n))},v.transitionTo=function(t,n,a){n=n||{},a=$({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},a||{});var o,c=v.$current,p=v.params,f=c.path,h=d(t,a.relative),y=n["#"];if(!j(h)){var O={to:t,toParams:n,options:a},C=function(t,n,r,a){var o=e.$broadcast("$stateNotFound",t,n,r);if(o.defaultPrevented)return b.update(),_;if(!o.retry)return null;if(a.$retry)return b.update(),A;var s=v.transition=i.when(o.retry);return s.then((function(){return s!==v.transition?S:(t.options.$retry=!0,v.transitionTo(t.to,t.toParams,t.options))}),(function(){return _})),b.update(),s}(O,c.self,p,a);if(C)return C;if(t=O.to,n=O.toParams,a=O.options,h=d(t,a.relative),!j(h)){if(!a.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+a.relative+"'")}}if(h.abstract)throw new Error("Cannot transition to abstract state '"+t+"'");if(a.inherit&&(n=s(E,n||{},v.$current,h)),!h.params.$$validates(n))return A;n=h.params.$$values(n),t=h;var w=t.path,D=0,L=w[D],P=m.locals,N=[];if(a.reload){if(F(a.reload)||U(a.reload)){if(U(a.reload)&&!a.reload.name)throw new Error("Invalid reload state object");var k=!0===a.reload?f[0]:d(a.reload);if(a.reload&&!k)throw new Error("No such reload state '"+(F(a.reload)?a.reload:a.reload.name)+"'");for(;L&&L===f[D]&&L!==k;)P=N[D]=L.locals,D++,L=w[D]}}else for(;L&&L===f[D]&&L.ownParams.$$equals(n,p);)P=N[D]=L.locals,D++,L=w[D];if(function(e,t,n,r,i,a){function o(e,t,n){function r(t){return"search"!=e.params[t].location}var i=e.params.$$keys().filter(r),a=u.apply({},[e.params].concat(i)),o=new R.ParamSet(a);return o.$$equals(t,n)}if(!a.reload&&e===n&&(i===n.locals||!1===e.self.reloadOnSearch&&o(n,r,t)))return!0}(t,n,c,p,P,a))return y&&(n["#"]=y),v.params=n,B(v.params,E),B(l(t.params.$$keys(),E),t.locals.globals.$stateParams),a.location&&t.navigable&&t.navigable.url&&(b.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===a.location}),b.update(!0)),v.transition=null,i.when(v.current);if(n=l(t.params.$$keys(),n||{}),y&&(n["#"]=y),a.notify&&e.$broadcast("$stateChangeStart",t.self,n,c.self,p,a).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,c.self,p),null==v.transition&&b.update(),I;for(var M=i.when(P),x=D;x<w.length;x++,L=w[x])P=N[x]=r(P),M=T(L,n,L===t,M,P,a);var W=v.transition=M.then((function(){var r,i,o;if(v.transition!==W)return S;for(r=f.length-1;r>=D;r--)o=f[r],o.self.onExit&&g.invoke(o.self.onExit,o.self,o.locals.globals),o.locals=null;for(r=D;r<w.length;r++)i=w[r],i.locals=N[r],i.self.onEnter&&g.invoke(i.self.onEnter,i.self,i.locals.globals);return v.transition!==W?S:(v.$current=t,v.current=t.self,v.params=n,B(v.params,E),v.transition=null,a.location&&t.navigable&&b.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===a.location}),a.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,c.self,p),b.update(!0),v.current)}),(function(r){return v.transition!==W?S:(v.transition=null,o=e.$broadcast("$stateChangeError",t.self,n,c.self,p,r),o.defaultPrevented||b.update(),i.reject(r))}));return W},v.is=function(e,t,r){r=$({relative:v.$current},r||{});var i=d(e,r.relative);return j(i)?v.$current===i&&(!t||c(i.params.$$values(t),E)):n},v.includes=function(e,t,r){if(r=$({relative:v.$current},r||{}),F(e)&&(i=e,i.indexOf("*")>-1)){if(!function(e){for(var t=e.split("."),n=v.$current.name.split("."),r=0,i=t.length;r<i;r++)"*"===t[r]&&(n[r]="*");return"**"===t[0]&&(n=n.slice(o(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(o(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length==n.length&&n.join("")===t.join("")}(e))return!1;e=v.$current.name}var i,s=d(e,r.relative);return j(s)?!!j(v.$current.includes[s.name])&&(!t||c(s.params.$$values(t),E,a(t))):n},v.href=function(e,t,r){r=$({lossy:!0,inherit:!0,absolute:!1,relative:v.$current},r||{});var i=d(e,r.relative);if(!j(i))return null;r.inherit&&(t=s(E,t||{},v.$current,i));var a=i&&r.lossy?i.navigable:i;return a&&a.url!==n&&null!==a.url?b.href(a.url,l(i.params.$$keys().concat("#"),t||{}),{absolute:r.absolute}):null},v.get=function(e,t){if(0===arguments.length)return f(a(h),(function(e){return h[e].self}));var n=d(e,t||v.$current);return n&&n.self?n.self:null},v}var m,v,h={},y={},E={parent:function(e){if(j(e.parent)&&e.parent)return d(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?d(t[1]):m},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=r(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(F(t))return"^"==t.charAt(0)?i.compile(t.substring(1),n):(e.parent.navigable||m).url.concat(t,n);if(!t||i.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new R.ParamSet;return x(e.params||{},(function(e,n){t[n]||(t[n]=new R.Param(n,null,e,"config"))})),t},params:function(e){var t=u(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?$(e.parent.params.$$new(),t):new R.ParamSet},views:function(e){var t={};return x(j(e.views)?e.views:{"":e},(function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),t[r]=n})),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?$({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};m=p({name:"",url:"^",views:null,abstract:!0}),m.navigable=null,this.decorator=function(e,t){return F(e)&&!j(t)?E[e]:k(t)&&F(e)?(E[e]&&!E.$delegates[e]&&(E.$delegates[e]=E[e]),E[e]=t,this):this},this.state=function(e,t){return U(e)?t=e:t.name=e,p(t),this},this.$get=g,g.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function b(){function e(e,t){return{load:function(e,n){var r;return n=$({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},n),n.view&&(r=t.fromConfig(n.view,n.params,n.locals)),r}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function O(e,n,r,i){var a=n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(e){return null}},o=a("$animator"),s=a("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,a,c){return function(n,a,l){function u(o){var s,u=T(n,l,a,i),y=u&&e.$current&&e.$current.locals[u];if((o||y!==g)&&!n._willBeDestroyed){s=n.$new(),g=e.$current.locals[u],s.$emit("$viewContentLoading",u);var E=c(s,(function(e){h.enter(e,a,(function(){f&&f.$emit("$viewContentAnimationEnded"),(t.isDefined(v)&&!v||n.$eval(v))&&r(e)})),function(){function e(){t&&t.remove(),n&&n.$destroy()}var t=d,n=f;n&&(n._willBeDestroyed=!0),p?(h.leave(p,(function(){e(),d=null})),d=p):(e(),d=null),p=null,f=null}()}));p=E,f=s,f.$emit("$viewContentLoaded",u),f.$eval(m)}}var d,p,f,g,m=l.onload||"",v=l.autoscroll,h=function(e,n){function r(e){return 1===G&&Y>=4?!!s.enabled(e):1===G&&Y>=2?!!s.enabled():!!o}var i={enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}};if(e.noanimation)return i;if(s)return{enter:function(e,n,a){r(e)?t.version.minor>2?s.enter(e,null,n).then(a):s.enter(e,null,n,a):i.enter(e,n,a)},leave:function(e,n){r(e)?t.version.minor>2?s.leave(e).then(n):s.leave(e,n):i.leave(e,n)}};if(o){var a=o&&o(n,e);return{enter:function(e,t,n){a.enter(e,null,t),n()},leave:function(e,t){a.leave(e),t()}}}return i}(l,n);n.$on("$stateChangeSuccess",(function(){u(!1)})),u(!0)}}};return c}function C(e,t,n,r){return{restrict:"ECA",priority:-400,compile:function(i){var a=i.html();return function(i,o,s){var c=n.$current,l=T(i,s,o,r),u=c&&c.locals[l];if(u){o.data("$uiView",{name:l,state:u.$$state}),o.html(u.$template?u.$template:a);var d=e(o.contents());if(u.$$controller){u.$scope=i,u.$element=o;var p=t(u.$$controller,u);u.$$controllerAs&&(i[u.$$controllerAs]=p),o.data("$ngControllerController",p),o.children().data("$ngControllerController",p)}d(i)}}}}}function T(e,t,n,r){var i=r(t.uiView||t.name||"")(e),a=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(a?a.state.name:"")}function S(e,t){var n,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e=t+"("+r[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function I(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function _(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function A(e,t,n,r,i){return function(a){var o=a.which||a.button,s=i();if(!(o>1||a.ctrlKey||a.metaKey||a.shiftKey||e.attr("target"))){var c=n((function(){t.go(s.state,s.params,s.options)}));a.preventDefault();var l=r.isAnchor&&!s.href?1:0;a.preventDefault=function(){l--<=0&&n.cancel(c)}}}}function w(e,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,a,o){var s=S(a.uiSref,e.current.name),c={state:s.state,href:null,params:null},l=_(i),u=o[1]||o[0];c.options=$(function(e,t){return{relative:I(e)||t.$current,inherit:!0}}(i,e),a.uiSrefOpts?r.$eval(a.uiSrefOpts):{});var d=function(n){n&&(c.params=t.copy(n)),c.href=e.href(s.state,c.params,c.options),u&&u.$$addStateInfo(s.state,c.params),null!==c.href&&a.$set(l.attr,c.href)};s.paramExpr&&(r.$watch(s.paramExpr,(function(e){e!==c.params&&d(e)}),!0),c.params=t.copy(r.$eval(s.paramExpr))),d(),l.clickable&&i.bind("click",A(i,e,n,l,(function(){return c})))}}}function D(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,r,i,a){function o(t){d.state=t[0],d.params=t[1],d.options=t[2],d.href=e.href(d.state,d.params,d.options),c&&c.$$addStateInfo(d.state,d.params),d.href&&i.$set(s.attr,d.href)}var s=_(r),c=a[1]||a[0],l=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null],u="["+l.map((function(e){return e||"null"})).join(", ")+"]",d={state:null,params:null,options:null,href:null};n.$watch(u,o,!0),o(n.$eval(u)),s.clickable&&r.bind("click",A(r,e,t,s,(function(){return d})))}}}function L(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,r,i,a){function o(n,i,a){var o=e.get(n,I(r)),s=function(e,n){if(!F(e))throw new Error("state should be a string");if(U(n))return e+W(n);if(n=t.$eval(n),U(n))return e+W(n);return e}(n,i);f.push({state:o||{name:n},params:i,hash:s}),g[s]=a}function s(){for(var t=0;t<f.length;t++)n=f[t].state,i=f[t].params,e.includes(n.name,i)?c(r,g[f[t].hash]):l(r,g[f[t].hash]),u(f[t].state,f[t].params)?c(r,d):l(r,d);var n,i}function c(e,t){a((function(){e.addClass(t)}))}function l(e,t){e.removeClass(t)}function u(t,n){return e.is(t.name,n)}var d,p,f=[],g={};d=n(i.uiSrefActiveEq||"",!1)(t);try{p=t.$eval(i.uiSrefActive)}catch(e){}p=p||n(i.uiSrefActive||"",!1)(t),U(p)&&x(p,(function(n,r){if(F(n)){var i=S(n,e.current.name);o(i.state,t.$eval(i.paramExpr),r)}})),this.$$addStateInfo=function(e,t){U(p)&&f.length>0||(o(e,t,p),s())},t.$on("$stateChangeSuccess",s),s()}]}}function P(e){var t=function(t,n){return e.is(t,n)};return t.$stateful=!0,t}function N(e){var t=function(t,n,r){return e.includes(t,n,r)};return t.$stateful=!0,t}var R,j=t.isDefined,k=t.isFunction,F=t.isString,U=t.isObject,M=t.isArray,x=t.forEach,$=t.extend,B=t.copy,W=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),m.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",m),v.prototype.concat=function(e,t){var n={caseInsensitive:R.caseInsensitive(),strict:R.strictMode(),squash:R.defaultSquashPolicy()};return new v(this.sourcePath+e+this.sourceSearch,$(n,t),this)},v.prototype.toString=function(){return this.source},v.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}var n=t(e).split(/-(?!\\)/),r=f(n,t);return f(r,(function(e){return e.replace(/\\-/g,"-")})).reverse()}var r=this.regexp.exec(e);if(!r)return null;t=t||{};var i,a,o,s,c,l=this.parameters(),u=l.length,d=this.segments.length-1,p={};if(d!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;i<d;i++){for(o=l[i],s=this.params[o],c=r[i+1],a=0;a<s.replace.length;a++)s.replace[a].from===c&&(c=s.replace[a].to);c&&!0===s.array&&(c=n(c)),j(c)&&(c=s.type.decode(c)),p[o]=s.value(c)}for(;i<u;i++){for(o=l[i],p[o]=this.params[o].value(t[o]),s=this.params[o],c=t[o],a=0;a<s.replace.length;a++)s.replace[a].from===c&&(c=s.replace[a].to);j(c)&&(c=s.type.decode(c)),p[o]=s.value(c)}return p},v.prototype.parameters=function(e){return j(e)?this.params[e]||null:this.$$paramNames},v.prototype.validates=function(e){return this.params.$$validates(e)},v.prototype.format=function(e){function t(e,t){return(e?encodeURIComponent(t):t).replace(/-/g,(function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()}))}e=e||{};var r=this.segments,i=this.parameters(),a=this.params;if(!this.validates(e))return null;var o,s=!1,c=r.length-1,l=i.length,u=r[0];for(o=0;o<l;o++){var d=o<c,p=i[o],g=a[p],m=g.value(e[p]),v=g.isOptional&&g.type.equals(g.value(),m),h=!!v&&g.squash,y=g.type.encode(m),E=g.type.urlEncode===n||g.type.urlEncode;if(d){var b=r[o+1],O=o+1===c;if(!1===h)null!=y&&(M(y)?u+=f(y,t.bind(null,E)).join("-"):u+=E?encodeURIComponent(y):y),u+=b;else if(!0===h){var C=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=b.match(C)[1]}else F(h)&&(u+=h+b);O&&!0===g.squash&&"/"===u.slice(-1)&&(u=u.slice(0,-1))}else{if(null==y||v&&!1!==h)continue;if(M(y)||(y=[y]),0===y.length)continue;y=f(y,encodeURIComponent).join("&"+p+"="),u+=(s?"&":"?")+p+"="+y,s=!0}}return u},h.prototype.is=function(e,t){return!0},h.prototype.encode=function(e,t){return e},h.prototype.decode=function(e,t){return e},h.prototype.equals=function(e,t){return e==t},h.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},h.prototype.pattern=/.*/,h.prototype.toString=function(){return"{Type:"+this.name+"}"},h.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},h.prototype.$asArray=function(e,t){if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new function(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function i(e){return M(e)?e:j(e)?[e]:[]}function a(e){return!e}function o(e,r){return function(o){if(M(o)&&0===o.length)return o;o=i(o);var s=f(o,e);return!0===r?0===p(s,a).length:function(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}(s)}}var s;this.encode=o(r(e,"encode")),this.decode=o(r(e,"decode")),this.is=o(r(e,"is"),!0),this.equals=(s=r(e,"equals"),function(e,t){var n=i(e),r=i(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!s(n[a],r[a]))return!1;return!0}),this.pattern=e.pattern,this.$normalize=o(r(e,"$normalize")),this.name=e.name,this.$arrayMode=t}(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",(function e(){function i(e){return null!=e?e.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):e}function s(e){return k(e)||M(e)&&k(e[e.length-1])}function c(){for(;b.length;){var e=b.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(y[e.name],u.invoke(e.def))}}function l(e){$(this,e||{})}R=this;var u,d=!1,g=!0,m=!1,y={},E=!0,b=[],O={string:{encode:i,decode:function(e){return null!=e?e.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):e},is:function(e){return null==e||!j(e)||"string"==typeof e},pattern:/[^/]*/},int:{encode:i,decode:function(e){return parseInt(e,10)},is:function(e){return j(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return!0===e||!1===e},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};e.$$getDefaultValue=function(e){if(!s(e.value))return e.value;if(!u)throw new Error("Injectable functions cannot be called at configuration time");return u.invoke(e.value)},this.caseInsensitive=function(e){return j(e)&&(d=e),d},this.strictMode=function(e){return j(e)&&(g=e),g},this.defaultSquashPolicy=function(e){if(!j(e))return m;if(!0!==e&&!1!==e&&!F(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return m=e,e},this.compile=function(e,t){return new v(e,$({strict:g,caseInsensitive:d},t))},this.isMatcher=function(e){if(!U(e))return!1;var t=!0;return x(v.prototype,(function(n,r){k(n)&&(t=t&&j(e[r])&&k(e[r]))})),t},this.type=function(e,t,n){if(!j(t))return y[e];if(y.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return y[e]=new h($({name:e},t)),n&&(b.push({name:e,def:n}),E||c()),this},x(O,(function(e,t){y[t]=new h($({name:t},e))})),y=r(y,{}),this.$get=["$injector",function(e){return u=e,E=!1,c(),x(O,(function(e,t){y[t]||(y[t]=new h(e))})),this}],this.Param=function(e,r,i,c){var l=this;i=function(e){var t=U(e)?a(e):[],n=-1===o(t,"value")&&-1===o(t,"type")&&-1===o(t,"squash")&&-1===o(t,"array");return n&&(e={value:e}),e.$$fn=s(e.value)?e.value:function(){return e.value},e}(i),r=function(n,r,i){if(n.type&&r)throw new Error("Param '"+e+"' has two type configurations.");return r||(n.type?t.isString(n.type)?y[n.type]:n.type instanceof h?n.type:new h(n.type):"config"===i?y.any:y.string)}(i,r,c);var d,g,v=(d={array:"search"===c&&"auto"},g=e.match(/\[\]$/)?{array:!0}:{},$(d,g,i).array);r=v?r.$asArray(v,"search"===c):r,"string"!==r.name||v||"path"!==c||i.value!==n||(i.value="");var E=i.value!==n,b=function(e,t){var n=e.squash;if(!t||!1===n)return!1;if(!j(n)||null==n)return m;if(!0===n||F(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(i,E),O=function(e,t,r,i){var a,s,c=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return a=M(e.replace)?e.replace:[],F(i)&&a.push({from:i,to:n}),s=f(a,(function(e){return e.from})),p(c,(function(e){return-1===o(s,e.from)})).concat(a)}(i,v,E,b);$(this,{id:e,type:r,location:c,array:v,squash:b,replace:O,isOptional:E,value:function(e){return e=function(e){var t,n=f(p(l.replace,(t=e,function(e){return e.from===t})),(function(e){return e.to}));return n.length?n[0]:e}(e),j(e)?l.type.$normalize(e):function(){if(!u)throw new Error("Injectable functions cannot be called at configuration time");var e=u.invoke(i.$$fn);if(null!==e&&e!==n&&!l.type.is(e))throw new Error("Default value ("+e+") for parameter '"+l.id+"' is not an instance of Type ("+l.type.name+")");return e}()},dynamic:n,config:i,toString:function(){return"{Param:"+e+" "+r+" squash: '"+b+"' optional: "+E+"}"}})},l.prototype={$$new:function(){return r(this,$(new l,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=a(l.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),x(t,(function(t){x(a(t),(function(t){-1===o(e,t)&&-1===o(r,t)&&e.push(t)}))})),e},$$values:function(e){var t={},n=this;return x(n.$$keys(),(function(r){t[r]=n[r].value(e&&e[r])})),t},$$equals:function(e,t){var n=!0,r=this;return x(r.$$keys(),(function(i){var a=e&&e[i],o=t&&t[i];r[i].type.equals(a,o)||(n=!1)})),n},$$validates:function(e){var r,i,a,o,s,c=this.$$keys();for(r=0;r<c.length&&(i=this[c[r]],a=e[c[r]],a!==n&&null!==a||!i.isOptional);r++){if(o=i.type.$normalize(a),!i.type.is(o))return!1;if(s=i.type.encode(o),t.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=l})),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),y.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",y),E.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",(function(){return{}})).provider("$state",E),b.$inject=[],t.module("ui.router.state").provider("$view",b),t.module("ui.router.state").provider("$uiViewScroll",(function(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n((function(){e[0].scrollIntoView()}),0,!1)}}]}));var G=t.version.major,Y=t.version.minor;O.$inject=["$state","$injector","$uiViewScroll","$interpolate"],C.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",O),t.module("ui.router.state").directive("uiView",C),w.$inject=["$state","$timeout"],D.$inject=["$state","$timeout"],L.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",w).directive("uiSrefActive",L).directive("uiSrefActiveEq",L).directive("uiState",D),P.$inject=["$state"],N.$inject=["$state"],t.module("ui.router.state").filter("isState",P).filter("includedByState",N)}(window,window.angular)},function(e,t){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function r(e,t){var n,r,i,a=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(a.rootMargin),this.thresholds=this._initThresholds(a.threshold),this.root=a.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function i(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function o(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function s(e,t){for(var n=t;n;){if(n==e)return!0;n=c(n)}return!1}function c(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var l=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(e){var t=this._observationTargets.some((function(t){return t.element==e}));if(!t){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},r.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(e,"resize",this._checkForIntersections,!0),i(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),r=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var a=i.element,s=o(a),c=this._rootContainsTarget(a),l=i.entry,u=t&&c&&this._computeTargetAndRootIntersection(a,r),d=i.entry=new n({time:e.performance&&performance.now&&performance.now(),target:a,boundingClientRect:s,rootBounds:r,intersectionRect:u});l?t&&c?this._hasCrossedThreshold(l,d)&&this._queuedEntries.push(d):l&&l.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=e.getComputedStyle(n).display){for(var i,a,s,l,u,d,p,f,g=o(n),m=g,v=c(n),h=!1;!h;){var y=null,E=1==v.nodeType?e.getComputedStyle(v):{};if("none"==E.display)return;if(v==this.root||v==t?(h=!0,y=r):v!=t.body&&v!=t.documentElement&&"visible"!=E.overflow&&(y=o(v)),y&&(i=y,a=m,s=void 0,l=void 0,u=void 0,d=void 0,p=void 0,f=void 0,s=Math.max(i.top,a.top),l=Math.min(i.bottom,a.bottom),u=Math.max(i.left,a.left),d=Math.min(i.right,a.right),p=d-u,f=l-s,m=p>=0&&f>=0&&{top:s,bottom:l,left:u,right:d,width:p,height:f},!m))break;v=c(v)}return m}},r.prototype._getRootRect=function(){var e;if(this.root)e=o(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var a=this.thresholds[i];if(a==n||a==r||a<n!=a<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||s(t,this.root)},r.prototype._rootContainsTarget=function(e){return s(this.root||t,e)},r.prototype._registerInstance=function(){l.indexOf(this)<0&&l.push(this)},r.prototype._unregisterInstance=function(){var e=l.indexOf(this);-1!=e&&l.splice(e,1)},e.IntersectionObserver=r,e.IntersectionObserverEntry=n}}(window,document)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){function t(){return e.properties}function n(){var e=t(),n=e.selectedChannels;n.length=0}function r(){var e=t(),n=e.sourceType;return n}function i(e){var n=t();n.sourceType=e}return{addSelectedChannel:function(e){var n;if(!angular.isUndefinedOrEmpty(e)){var r=t();(n=r.selectedChannels).push.apply(n,a()(e))}},changeSourceType:function(e){e!==r()&&(i(e),n())},clearSelectedChannels:n,deleteSelectedChannel:function(e){var n=t();Object(o.reject)(n.selectedChannels,{id:e})},getProvider:function(){var e=t()||{},n=e.provider;return n},getSelectedChannels:function(){var e=t(),n=e.selectedChannels;return n},getSourceType:r,getWidgetProperties:t,setProviderId:function(e){var n=t();n.provider=e},setSourceType:i}}n.r(t),n.d(t,"getChannelListUtils",(function(){return r}));var i=n(19),a=n.n(i),o=n(919)},function(e,t,n){"use strict";n.r(t),function(e){function r(t,r,i,o,c,u,p,g,m,v,y,b,C,S,_,w){function L(e){e=e||angular.noop,angular.isDefined(y.grecaptcha)?y.grecaptcha.ready(e):v((function(){return L(e)}),100)}function N(e){var t=angular.fastCopy(e);return!angular.isArray(e)||angular.isUndefinedOrEmpty(e)?"not_found":(t=1===e.length?angular.isString(t[0])?t[0]:angular.toJson(t[0]):angular.toJson(t),encodeURIComponent(t))}function j(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function F(e){return angular.isObject(e)&&angular.isDefined(e.$evalAsync)&&angular.isDefined(e.$watch)}function M(e){return angular.isObject(e)&&e.window===e}function B(e,t,n){if(!angular.isUndefinedOrEmpty(e)){e=e.replace(/\./g,"/");var r=i.get("User");n=n||!1,t=t||r.getConnected()||{};for(var a,o=[],s=!1,c=e.split("/"),l=/(.*)\[(.*)=(.*)]/,u=(a=e,/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/g.test(a)?angular.fastCopy(t.customProfile):angular.fastCopy(t.apiProfile)),d=0;d<c.length;d++){var p=c[d],f=l.exec(p);if(angular.isDefined(f)){var g=f[1],m=f[2],v=f[3],y=h()(u,g);if(angular.isDefinedAndFilled(y))for(var E=0,b=y.length;E<b;E++){var O=y[E];if(angular.isString(v)){var C=v.toLowerCase();"true"===C||"false"===C?v="true"===C:!isNaN(parseFloat(v))&&isFinite(v)&&(v=parseInt(v,10))}if(O[m]===v){o.push(g),o.push(E),u=O;break}}}else{var T=c[d];if(T.indexOf(".")>1){var S=T.split(".");angular.isDefined(u)&&u[S[0]]&&(u=u[S[0]],c.push(K()(S).join(".")))}else{if(T%1==0&&(T=parseInt(T,10)),!angular.isDefined(u)||!angular.isDefined(u[T])){s=!1,o.push(T);break}u=u[T],s=!0}o.push(T)}}return n?o:(angular.isNumber(u)||angular.isString(u)||angular.isArray(u)||(u=void 0),s?u:void 0)}}function G(e,t){var n="url(";return angular.isDefinedAndFilled(t)?n+=J.resizeImage(e,t):n+=J.getMediaUrl(e),n+=")",n}function H(){return H=s()(a.a.mark((function e(t,r){var o,c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.get("User"),r=r||o.getConnected()||{},!angular.isUndefinedOrEmpty(r.id)){e.next=4;break}return e.abrupt("return",t);case 4:return c="",l=[],u=t.split("&"),e.next=9,Promise.all(R()(u,function(){var e=s()(a.a.mark((function e(t){var i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.split(/[=](.+)/),o={},!angular.isDefinedAndFilled([i[0],i[1]],"every")){e.next=17;break}if(o[i[0]]=i[1].split(/\(user\.(.+)\)/)[1],!angular.isDefinedAndFilled(o[i[0]])){e.next=15;break}if(!angular.isUndefinedOrEmpty(ne)){e.next=10;break}return e.next=8,n.e("jsonpath").then(n.t.bind(null,3016,7));case 8:ne=e.sent,ne=ne||{query:h.a};case 10:angular.isFunction(ne.query)||(ne.query=h.a),s=ne.query(r,o[i[0]]),o[i[0]]=N(s),e.next=16;break;case 15:o[i[0]]=angular.isDefinedAndFilled(i[1])?i[1]:"not_assessable_value";case 16:l.push(o);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return angular.forEach(l,(function(e){var t=Object.getOwnPropertyNames(e);c+="".concat(t,"=").concat(e[t],"&")})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function V(){if(!window.LUMAPPS_MODES){var e=h()(c.search(),"modes");window.LUMAPPS_MODES=e}var t=Object(q.c)(window.LUMAPPS_MODES?window.LUMAPPS_MODES.split(","):[]),n=t[q.a.HEADLESS],r=document,i=r.body;return n&&!i.classList.contains("headless")&&i.classList.add("headless"),n}var J={},ee={"<":"&lt;",">":"&gt;"},te={"gbl-imt-ve-o2o":"https://veolia.lumappsusercontent.com/","lumapps-eu":"https://live-eu.lumappsusercontent.com",lumsites:"https://live.lumappsusercontent.com","lumsites-dev":"https://dev.lumappsusercontent.com","lumsites-dev2":"https://dev2.lumappsusercontent.com","lumsites-sandbox":"https://test.lumappsusercontent.com","veolia-intranet":"https://veolia.lumappsusercontent.com/"},ne={},re=13,ie=32,ae=/(?:^|\s|\/\/)[-a-zA-Z0-9:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9:%_+.~#?&/=]*)/g;return J.addScopeInfo=function(e,t,n,r){var i=n?"$isolateScope":"$scope";i+=r?"NoTemplate":"",angular.isString(e)?J.waitForAndExecute(e,(function(e){return e.data(i,t)})):angular.isDefined(e)&&e.length>0&&e.data(i,t)},J.arrayRefresh=function(e,t){return angular.isArray(e)?(t=t||[],t=angular.isArray(t)?t:[t],J.empty(e),angular.forEach(t,(function(t){return e.push(t)})),e):e},J.buildFilterFromUri=function(e,t){var n;try{n=angular.fromJson(decodeURIComponent(e))}catch(e){n={}}if(angular.isUndefinedOrEmpty(n))return{};var r={};return angular.forEach(n,(function(e,n){(angular.isUndefined(t)||t.hasOwnProperty(n))&&(r[n]=e)})),r},J.buildInstanceUrl=function(e,t){return"".concat(function(e){return O()(y.location.href,"/a/".concat(e,"/"))?"/a/".concat(e):""}(t),"/").concat(e.slug,"/")},J.copyObjectToExistingOne=function t(n,r,i){$.each(r,(function(e){angular.isUndefined(i)&&(r[e]=void 0)})),$.each(n,(function(i){"object"===e.type(n[i])?("object"!==e.type(r[i])&&(r[i]={}),t(n[i],r[i])):"array"===e.type(n[i])?r[i]=$.extend(!0,[],n[i]):r[i]=n[i]}))},J.copyProperties=function(e,t,n,r,i){var a=angular.isDefinedAndFilled(t)?h()(r,t):r,o=h()(r,n);return angular.isUndefined(o)&&(o={},U()(r,n,o)),angular.isUndefinedOrEmpty(a)||angular.forEach(e,(function(e){var t=a[e];angular.isDefinedAndFilled(t)&&(o[e]=t,i&&delete a[e])})),r},J.copyPropertySet=function(e,t,n,r,i,a){var o=angular.isDefinedAndFilled(n)?h()(i,n):i,s=h()(i,r),c=o[e];return angular.isUndefined(s)&&(s={},U()(i,r,s)),angular.isUndefined(c)||(s[e]=c,angular.forEach(t,(function(e){s[e]=c})),a&&delete o[e]),i},J.copyText=function(e,t){t=!angular.isUndefinedOrEmpty(t)&&t;var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),t&&_.success(angular.isString(t)?t:w.translate("GLOBAL.COPIED"))},J.displayServerError=function(e){_.error(J.getServerError(e))},J.empty=function(e,t){if(angular.isUndefinedOrEmpty(e))return e;if(angular.isArray(e))if(t)for(;angular.isDefinedAndFilled(e);)e.splice(0,1);else e.length=0;else angular.isObject(e)?Object.empty(e):e=angular.isString(e)?"":void 0;return e},J.equals=function e(t,n,r){if(r=r||[],r=angular.isArray(r)?r:[r],t===n)return!0;if((null===t||null===n)&&-1===r.indexOf("null"))return!1;if((null===t||null===n)&&r.indexOf("null")>-1)return!0;if(t!=t&&n!=n&&-1===r.indexOf("NaN"))return!0;var i,a,o,s=l()(t),c=l()(n);if(s===c){if("object"===s){if(angular.isArray(t)){if(!angular.isArray(n))return!1;if(o=t.length,o===n.length){for(i=0;i<o;i++)if(!e(t[i],n[i],r))return!1;return!0}}if(angular.isDate(t))return!!angular.isDate(n)&&e(t.getTime(),n.getTime(),r);if(j(t))return!!j(n)&&t.toString()===n.toString();if(F(t)||F(n)||M(t)||M(n)||angular.isArray(n)||angular.isDate(n)||j(n))return!1;for(i in a=Object.create(null),t)if("$"!==i.charAt(0)&&!angular.isFunction(t[i])){if(!e(t[i],n[i],r))return!1;a[i]=!0}for(i in n)if("$"!==i.charAt(0)&&!angular.isFunction(n[i])&&!(i in a)&&!e(t[i],n[i],r))return!1;return!0}}else if(angular.isDefinedAndFilled(r)){if(r.indexOf(s)>-1||r.indexOf(c)>-1)return!0;if(r.indexOf('""')>-1&&(angular.isString(t)&&0===t.length||angular.isString(n)&&0===n.length))return!0;if(r.indexOf("false")>-1&&("boolean"==typeof t&&!1===t||"boolean"==typeof n&&!1===n))return!0;if(r.indexOf("[]")>-1&&(angular.isArray(t)&&0===d()(t).length||angular.isArray(n)&&0===d()(n).length))return!0;if(r.indexOf("{}")>-1&&(angular.isObject(t)&&0===Object.keys(k()(t,E.a)).length||angular.isObject(n)&&0===Object.keys(k()(n,E.a)).length))return!0}return!1},J.escapeHtmlTags=function(e,t){return angular.isUndefinedOrEmpty(e)?e:(t=t||"[^>]+",t=angular.isArray(t)?t:[t],e.replace(new RegExp("<([^ ])?(".concat(t.join("|"),")>"),"g"),"&lt;$1$2&gt;"))},J.escapeRegexp=function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},J.findUrls=function(e,t,n,r){r=r||angular.noop;var a=angular.isDefined(e.keyCode)?e.keyCode:e.which,o=angular.isDefinedAndFilled(t.text)?"text":"content",s=angular.isDefinedAndFilled(o)?h()(t,"".concat(o,".").concat(w.getLang("current"))):"",c=e.originalEvent.clipboardData&&angular.isDefinedAndFilled(e.originalEvent.clipboardData.getData("text/plain"));if(!angular.isUndefinedOrEmpty(s)&&O()([re,ie],a)||c){var l=i.get("Config");if(!angular.isDefinedAndFilled(n)||n===l.ATTACHMENT_TYPE.LINK&&!angular.isDefinedAndFilled(t.links)){var u=c?e.originalEvent.clipboardData.getData("text/plain"):s,d=J.findUrlsInString(u);angular.isDefinedAndFilled(d)&&r(z()(d[0],"//"),u)}}},J.findUrlsInString=function(e){return e.match(ae)||[]},J.formatBytes=function(e,t){if(angular.isUndefinedOrEmpty(e))return"";if(0===e)return"0 Byte";var n=angular.isDefined(t)?t+1:3,r=["Byte","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(1024)),a=(e/Math.pow(1024,i)).toPrecision(n);return a>1&&(r[0]="Bytes"),"".concat(a," ").concat(r[i])},J.generatePassword=function(e){e=e||8;for(var t="abcdefghijklmnopqrstuvwxyz",n=t+t.toUpperCase()+"123456789",r="",i=0;i<e;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},J.getAdminProperty=function(e,t,n,r,i){i=!angular.isUndefined(i)&&i;var a=Boolean(J.getProperty(e,t,"properties.__overridden")),o=h()(t,"properties.__dirty",[]),s=O()(o,e)||O()(o,J.toUpperSnakeCase(e))||O()(o,J.toCamelCase(e));if(a||i||!s&&angular.isUndefined(J.getProperty(e,t)))return angular.fastCopy(n);var c=J.getProperty(e,t);return angular.isDefined(c)?c:r},J.getApiProfileFieldFromMap=B,J.getAttr=function(e,t,n){if(n=n||angular.noop,!angular.isUndefined(t)&&!angular.isUndefinedOrEmpty(t[e]))return n(t[e]),t[e]},J.getImageURL=G,J.deprecatedGetCroppedThumbnailURL=function(e,t){return angular.isDefinedAndFilled(t)?J.resizeImage(e,t):J.getMediaUrl(e)},J.getBackgroundImage=function(e,t,n){if(angular.isUndefinedOrEmpty(e))return{};n=n||!1;var r=G(e,t);return n?"background-image:".concat(r):{"background-image":r}},J.getConfigProperty=function(e){for(var t=i.get("Config"),n=i.get("ConfigInstance"),r=[b,n,t],a=0,o=r.length;a<o;++a){var s=r[a],c=J.getProperty(e,s,"");if(angular.isDefined(c))return c}},J.getContentIcon=function(e){var t=i.get("Config");switch(e){case t.AVAILABLE_CONTENT_TYPES.PAGE:case t.AVAILABLE_CONTENT_TYPES.CUSTOM:return"file-document-box";case t.AVAILABLE_CONTENT_TYPES.NEWS:return"newspaper";case t.AVAILABLE_CONTENT_TYPES.MENU:return"menu";case t.AVAILABLE_CONTENT_TYPES.CUSTOM_LIST:return"format-list-bulleted";case t.AVAILABLE_CONTENT_TYPES.COMMUNITY:return"google-circles-extended";case t.AVAILABLE_CONTENT_TYPES.DIRECTORY:return"book-multiple";case t.AVAILABLE_CONTENT_TYPES.USER_DIRECTORY:return"folder-account";case t.AVAILABLE_CONTENT_TYPES.TUTORIAL:return"help-circle";default:return}},J.getContentListSlug=function(e,t){t=t||w.getLang("current");var n=A()(C.DEFAULT_CONTENT_LISTS,(function(t){return t.customContentType===e})),r="";if(angular.isUndefined(n)||angular.isUndefinedOrEmpty(n.slug))return r;if(angular.isDefinedAndFilled(n.slug[t]))r=n.slug[t];else{var i=Object.keys(n.slug);r=n.slug[i[0]]}return r},J.getCurrentAttachmentType=function(e){if(angular.isUndefinedOrEmpty(e))return"";var t=i.get("Config");return angular.isDefinedAndFilled(e.images)?t.ATTACHMENT_TYPE.IMAGE:angular.isDefinedAndFilled(e.files)?t.ATTACHMENT_TYPE.FILE:angular.isDefinedAndFilled(e.links)?t.ATTACHMENT_TYPE.LINK:""},J.getCustomClass=function(e,t){t=t||"";var n=[];if(angular.isUndefinedOrEmpty(e))return n;var r=e.split(",");return angular.isUndefinedOrEmpty(r)||angular.forEach(r,(function(e){angular.isDefinedAndFilled(e)&&n.push(t+e.trim())})),n},J.getHostnameFromString=function(e){return h()(Object(X.b)(e),"hostname")},J.getItemColor=function(e,t){angular.isUndefinedOrEmpty(t)&&(t=b.COLORS_WIDGET);var n=t.length,r=Math.abs(Math.floor(e/n)*n-e);return t[r]},J.getMediaDomain=function(){return J.isLocalEnvironment()?"":te[C.APP_ID]||""},J.getMediaUrl=function(e){if(angular.isUndefinedOrEmpty(e))return e;var t=J.getMediaDomain();return e=angular.isString(e)?e:"",O()(e,"/_ah/img/")&&(e=e.substr(e.lastIndexOf("/"))),W()(e,"http://")||W()(e,"https://")?e:(O()(e,"data:image")||W()(e,"/")||(e="/".concat(e)),W()(e,"/")&&!W()(e,"/serve")&&(e="/serve".concat(e)),W()(e,"/")?t+e:e)},J.getMimeTypeMediaType=function(e){if(!angular.isUndefinedOrEmpty(e)&&angular.isString(e)&&O()(e,"/"))return h()(e.split("/"),"[0]")},J.getParentFullSlug=function(e){var t=e.split("/");return t.length>1?"".concat(t.slice(0,t.length-1).join("/"),"/"):void 0},J.getProperty=function(e,t,n,r,i,a,o){if(!(angular.isUndefinedOrEmpty(e)||angular.isObject(e)&&angular.isUndefinedOrEmpty([e.key,e.backward],"every"))){n=angular.isUndefined(n)?"properties":n,r=!!angular.isUndefined(r)||r,i=!!angular.isUndefined(i)||i,a=!!angular.isUndefined(a)||a,o=!!angular.isUndefined(o)||o,angular.isString(e)&&(e={key:e||""});var s=e.key;if(a){var c=h()(t,d()([n,s]));if(angular.isDefined(c))return c}if(r){var l=h()(t,d()([n,J.toCamelCase(s)]));if(angular.isDefined(l))return l}if(i){var u=h()(t,d()([n,J.toUpperSnakeCase(s)]));if(angular.isDefined(u))return u}if(o&&angular.isDefinedAndFilled(e.backward)){var p=h()(t,d()([n,e.backward]));if(angular.isDefined(p))return p}}},J.getReadableHtmlContent=function(e){return angular.isUndefinedOrEmpty(e)?e:(e=e.replace(/ href(=(""|''))? /g,""),J.isSafeModeEnabled()&&(e=e.replace(/<script/gi,"<safe-script"),e=e.replace(/script>/gi,"safe-script>")),g.trustAsHtml(J.replaceVariables(J.replaceTranslatableValues(e))))},J.getServerError=function(e){return angular.isUndefined(e)||angular.isUndefined(e.data)||angular.isUndefinedOrEmpty(e.data.error)?w.translate("ERROR_GENERIC"):angular.isDefinedAndFilled(e.data.error.message)&&e.data.error.message.match("^([A-Z_]+)$")?w.translate("SERVER_ERROR_".concat(e.data.error.message)):403===e.data.error.code?w.translate("ERROR_NOT_AUTHORIZED"):w.translate("ERROR_GENERIC")},J.getSimpleUrlParams=function(e){var t=angular.isArray(e)?e:[e],n={};return angular.forEach(t,(function(e){if(!angular.isUndefinedOrEmpty(e)&&angular.isString(e)){var t=e.split("_");if(!angular.isUndefinedOrEmpty(t)&&2===t.length){var r=t[0],i=t[1];angular.isUndefinedOrEmpty(r)||angular.isUndefinedOrEmpty(i)||(angular.isArray(n[r])&&-1===n[r].indexOf(i)?n[r].push(i):angular.isDefined(n[r])&&n[r]!==i?(n[r]=[n[r]],n[r].push(i)):n[r]=i)}}})),n},J.getUrlUserInjectionInformation=function(e,t){return H.apply(this,arguments)},J.getMarginTop=function(e,t,n){var r=!n.isInShareContent&&!V();if(!r)return 0;var i=e?e.getCurrent().properties.layoutPosition:0;return i-12},J.getHeaderHeight=function(){var e=document.querySelector("header"),t=e?e.getBoundingClientRect().height:110;return t},J.handleClickOnLink=function(e){var t=h()(e.target.closest("[data-url]"),'attributes["data-url"]');if(!angular.isUndefinedOrEmpty(t)){e.preventDefault(),e.stopImmediatePropagation();var n=angular.fromJson(h()(t,"value",{}));if(!angular.isUndefinedOrEmpty([n.id,n.instance,n.type],"some")){var r,a="_blank"===h()(e,"currentTarget.target","_self");a&&(r=y.open(""));var o=i.get("Content");o.getSlug(n.id,n.instance,n.type).then((function(e){if(!angular.isUndefinedOrEmpty(e)){var t=n.type===C.CONTENT_TYPES.COMMUNITY?"app.front.community":"app.front.content-get",o=i.get("MainNav");o.goTo(t,n.id,n.instance,w.translate(e),void 0,n.type,a,r)}}))}}},J.hasChild=function(e,t){if(angular.isUndefinedOrEmpty([e,t],"some"))return!1;var n=e.components||e.cells||[];if(angular.isUndefinedOrEmpty(n)||!angular.isArray(n))return!1;for(var r=0,i=n.length;r<i;r++){var a=n[r];if(a.uuid===t.uuid||J.hasChild(a,t))return!0}return!1},J.hasMultiple=function(e,t){if(angular.isUndefinedOrEmpty(e))return!1;if(t=angular.isDefined(t)&&!angular.isArray(t)?[t]:t,angular.isUndefinedOrEmpty(t))return!0;for(var n=0,r=t.length;n<r;++n)if(angular.isUndefined(e[t[n]]))return!1;return!0},J.htmlEscape=function(e){return I()(e.replace(/'/g,"&#039;"))},J.htmlUnescape=function(e){return D()(e.replace(/&#0?39;/g,"'"))},J.include=O.a,J.initComponents=function e(t){angular.isDefinedAndFilled(t.components)?angular.forEach(t.components,(function(t){"row"===t.type&&angular.isDefinedAndFilled(t.cells)&&angular.forEach(t.cells,(function(t){return e(t)}))})):t.components=[]},J.initHtmlContent=function(e,t,n,r,i){var a={mainContent:"",popinContent:""};a.mainContent=J.getReadableHtmlContent(t);var o=angular.isDefinedAndFilled(a.mainContent);return o&&!i&&J.waitForAndExecute(n).then((function(){J.rebindLinks(n,J.handleClickOnLink),p.$broadcast("listenerOnLinks",e)})),angular.isDefinedAndFilled(r)&&(a.popinContent=J.getReadableHtmlContent(r)),a},J.initGoogleCaptcha=function(e,t){var n=i.get("Config");t.id=y.grecaptcha.render("captcha",{callback:function(){e.$apply((function(){t.valid=!0,t.response=y.grecaptcha.getResponse(t.id)}))},"expired-callback":function(){e.$apply((function(){t.valid=!1,t.response=null}))},sitekey:n.G_RECAPTCHA_KEY})},J.injectScript=function(e,t,n,r,i){return i=!!angular.isUndefined(i)||i,n=n||"body",u((function(a){var o,s,c=document.createElement("script");angular.isDefinedAndFilled(r)&&(o=document.getElementById(r),angular.isDefinedAndFilled(o)&&(s=o.parentNode)),s=s||n,s=angular.element(s),angular.isDefinedAndFilled(t)&&(c.id=t),o?angular.element(c).insertAfter(o):s.append(c),i&&(c.addEventListener("load",a),c.addEventListener("error",a)),c.charset="UTF-8",c.src=W()(e,"http")||W()(e,"/serve")?e:C.PUBLIC_PATH_PREFIX+e,i||a()}))},J.injectStylesheet=function(e,t,n){var r=document.head,i=document.createElement("link");return i.rel="stylesheet",angular.isDefinedAndFilled(t)&&(i.id=t),i.href=J.isLocalEnvironment()&&W()(e,"/client/")?C.PUBLIC_PATH_PREFIX+e:e,angular.isDefined(n)&&n instanceof Element?r.insertBefore(i,n.nextSibling):r.appendChild(i),i},J.isArray=angular.isArray,J.isDebugModeEnabled=function(){return angular.isDefined(h()(c.search(),"debug"))},J.isDefined=angular.isDefined,J.isDefinedAndFilled=angular.isDefinedAndFilled,J.isDesignerMode=function(){var e=i.get("Content"),t=e.getAction();return angular.isDefinedAndFilled(t)&&"get"!==t},J.isEmailValid=function(e){if(angular.isUndefinedOrEmpty(e))return!1;var t=e.indexOf("@"),n=e.lastIndexOf("."),r=e.length-1;return t>0&&t<r&&n>-1&&n>t+1&&n<r},J.isGAValid=function(e){return angular.isUndefinedOrEmpty(e)||/^UA-\d+-\d+$/.test(e)},J.isFunction=angular.isFunction,J.isHexadecimal=function(e){return/^#[0-9A-F]{6}$/i.test(e)},J.isLangArrayEmpty=function(e){if(angular.isUndefinedOrEmpty(e))return!0;for(var t in e)if(e.hasOwnProperty(t)){if(!angular.isString(t))continue;if(angular.isUndefinedOrEmpty(e[t]))continue;return!1}return!0},J.isLocalEnvironment=function(){return O()(C.API_HOST,"localhost")||O()(C.API_HOST,"127.0.0.1")},J.isNumber=angular.isNumber,J.isObject=angular.isObject,J.isSafeModeEnabled=function(){return angular.isDefined(h()(c.search(),"safe"))},J.isHeadlessModeOn=V,J.isReworkedUIModeOn=function(e){if(!window.LUMAPPS_MODES){var t=h()(c.search(),"modes");window.LUMAPPS_MODES=t}var n=Object(q.c)(window.LUMAPPS_MODES?window.LUMAPPS_MODES.split(","):[],{"reworked-ui":e.hasFeature("reworked-ui")}),r=n[q.a.REWORKED_UI],i=document,a=i.body;return r&&!a.classList.contains("reworked-ui")&&a.classList.add("reworked-ui"),r},J.isSlugValid=Q.l,J.isString=angular.isString,J.isUndefined=angular.isUndefined,J.isUndefinedOrEmpty=angular.isUndefinedOrEmpty,J.legacyEquals=angular.equals,J.loadGoogleCaptcha=function(e){e=e||angular.noop;var n=t[0].createElement("script");n.setAttribute("src","https://www.google.com/recaptcha/api.js?render=explicit&hl=".concat(w.getLang("current"))),n.setAttribute("async",""),n.setAttribute("defer",""),t[0].head.appendChild(n),L(e)},J.mapEnabledEntries=function(e){return!angular.isArray(e)||angular.isUndefinedOrEmpty(e)?[]:angular.isUndefinedOrEmpty(h()(e[0],"enable"))?e:e.reduce((function(e,t){return t.enable&&e.push(t.name),e}),[])},J.matchAttr=function(e,t,n,r){if(r=r||angular.noop,angular.isArray(e)){var i=A()(e,(function(e){return angular.isDefined(e)&&angular.isDefined(e[t])&&e[t]===n}));return r(i),i}},J.multiCallback=function(e,t,n,r,i,a){if(angular.isUndefinedOrEmpty(e.errors))_.success(n),t=[];else{var o,s;e.errors.length<t.length?(o=r,s="warning"):(o=i,s="error");var c=e.errors.length>1?"ol":"ul";o+="<".concat(c,">"),angular.forEach(e.errors,(function(e){var t=w.translate("".concat(a,"_").concat(e.reason));o+="<li>".concat(t,"</li>")})),o+="</".concat(c,">"),_[s](o),t=f()(t,(function(t){return!O()(e.uid||[],t.uid)}))}return t},J.noop=angular.noop,J.objectSize=Object.size,J.openContent=function(e,t,n,r,a){if(e.preventDefault(),!angular.isUndefinedOrEmpty(r)){var o={uid:t},s=i.get("Content"),c="app.front.content-get";angular.isDefinedAndFilled(n)&&S.close(n),angular.isString(r)||(r=r.toString()),a===C.CONTENT_TYPES.COMMUNITY&&(s=i.get("Community"),c="app.front.community"),o.instance=r,s.get(o,(function(n){var o="_blank"===h()(e,"currentTarget.target"),s=h()(n,"slug");if(!angular.isUndefinedOrEmpty(s)){var l=i.get("MainNav");l.goTo(c,t,r,w.translate(s),void 0,a,o)}}),void 0,void 0,{id:!0,instance:!0,link:!0,slug:!0,type:!0},!1)}},J.openPopin=function(e,t){e.preventDefault(),J.waitForAndExecute("#".concat(t));var n=i.get("Analytics"),r=i.get("Content");n.handleTaggingMap("open-content-popin","open-content-popin",{item:r.getCurrent()})},J.parseUrlPattern=function(e){var t=e.match(/\$\$([^$]*)\$\$/g);return angular.forEach(t,(function(t){var n=B(t.replace(/\$/g,""));angular.isDefinedAndFilled(n)&&(e=e.replace(t,n))})),e},J.rebindLinks=function(e,t){if(!angular.isUndefinedOrEmpty([e,t],"some")){var n=angular.element("".concat(e," a"));Array.from(n).forEach((function(e){var t=e&&e.getAttribute("href");t&&t.toLowerCase().startsWith("mailto:")?e.setAttribute("target","_blank"):e.setAttribute("target",e.getAttribute("target")||"_self")})),n.unbind("click",t),n.bind("click",t)}},J.redirectTo=function(e,t,n){m.go(e,t,{reload:n})},J.redirectToContentList=function(e,t,n,r){var i=J.getContentListSlug(e,t);if(!angular.isUndefinedOrEmpty(i)){var a=[];angular.forEach(n,(function(e){return a.push("metadata_".concat(e))})),angular.forEach(r,(function(e){return a.push("tags_".concat(e))})),c.url(J.uri(m.href("app.front.content-get",{slug:i}),a))}},J.reject=Z,J.removeAccentFromString=function(e){if(angular.isUndefinedOrEmpty(e))return"";var t=e.split(" ")||[];return angular.forEach(t,(function(e,n){return t[n]=J.slugify(e)})),t.join(" ")},J.removePrintClass=function(){angular.element("body").removeClass("body--print")},J.replaceNewLines=function(e){return angular.isNumber(e)?e:angular.isUndefinedOrEmpty(e)||!angular.isString(e)?"":e.replace(/(?:\r\n|\r|\n)/g,"<br>")},J.replaceTranslatableValues=function(e){return angular.isUndefinedOrEmpty(e)?e:e.replace(/##([^#]*)##/g,(function(e,t){return angular.isDefinedAndFilled(t)?w.translate(t):t}))},J.replaceVariables=function(e){return angular.isUndefinedOrEmpty(e)?e:e.replace(/\$\$([^$]*)\$\$/g,(function(e,t){if(angular.isUndefinedOrEmpty(t))return t;var n=i.get("User"),r=i.get("Content");if("CONNECTED_USER_EMAIL"===t){var a=n.getConnected();return angular.isDefined(a)&&angular.isDefinedAndFilled(a.email)?n.getConnected().email:""}if("TARGET_NAME"===t){var o=h()(r.getCurrent(),"properties.currentTarget.title","");return angular.isDefinedAndFilled(o)?w.translate(o):""}return"NBSP"===t?"&nbsp;":t}))},J.replaceTokens=function(e,t,n){return n=n||{},t&&(n=angular.extend(n,ee)),e.replace(new RegExp(Object.keys(n).join("|"),"gmi"),(function(e){return n[e]}))},J.resizeImage=function(e,t,n){if(!angular.isUndefinedOrEmpty(e)){if(angular.isObject(e)&&angular.isDefinedAndFilled(e.value)&&(e=e.value),!angular.isString(e))return J.getMediaUrl(e);if(W()(e,"http")||O()(e,"/serve/")||O()(e,"data:image")||(e="/serve".concat(W()(e,"/")?"":"/").concat(e)),-1===t)return J.getMediaUrl(e);if(O()(e,"/serve/")||!O()(e,"data:image")&&(O()(e,c.host())||O()(e,"googleusercontent.com")||O()(e,"0.0.0.0"))){e=Y()(e,"/")?e.slice(0,-1):e,t=angular.isUndefined(t)?512:t;var r=e.split("=s"),i=parseInt(r[r.length-1],10),a=r.length>1&&angular.isNumber(i)&&!isNaN(i);0!==i&&a?(r.splice(r.length-1,1),e="".concat(r.join("=s"),"=s").concat(t)):0!==i&&(e+="=s".concat(t)),n&&(e+="-c")}return J.getMediaUrl(e)}},J.selectText=function(e){var n,r,i=t[0].getElementById(e);t[0].body.createTextRange?(n=t[0].body.createTextRange(),n.moveToElementText(i),n.select()):y.getSelection&&(r=y.getSelection(),n=t[0].createRange(),n.selectNodeContents(i),r.removeAllRanges(),r.addRange(n))},J.setEndOfContenteditable=function(e){var n,r;t[0].createRange?(n=t[0].createRange(),n.selectNodeContents(e),n.collapse(!1),r=y.getSelection(),r.removeAllRanges(),r.addRange(n)):t[0].selection&&(n=t[0].body.createTextRange(),n.moveToElementText(e),n.collapse(!1),n.select())},J.shouldOpenInNewWindow=function(e){return angular.isDefined(e)&&(!0===e||angular.isObject(e)&&(e.ctrlKey||e.shiftKey||2===e.which))},J.slugify=Q.v,J.stripTags=function(e,t,n,r){return t=!!angular.isUndefined(t)||t,n=!!angular.isUndefined(n)||n,r=!!angular.isUndefined(r)||r,angular.isUndefinedOrEmpty(e)?"":(t&&(e=e.replace(/(<!--([^]*?)-->)/gi,"")),e=e.replace(/<p>/gi,""),e=e.replace(/<\/p>/gi,r?"\n":" "),e=e.replace(/<br ?\/?>/gi,n?"\n":" "),e.replace(/(<([^>]+)>)/gi,""))},J.swapObject=Object.swap,J.toCamelCase=function(e){return angular.isString(e)?T()(e.toLowerCase(),!0):""},J.toJson=angular.toJson,J.toUpperSnakeCase=function(e){return angular.isString(e)?x()(e).toUpperCase():""},J.updateUrlParameter=function(e,t,n){var r;e=e||y.location.href;var i=new RegExp("([?&])".concat(t,"=.*?(&|#|$)(.*)"),"gi");if(i.test(e))return angular.isDefined(n)?e.replace(i,"$1".concat(t,"=").concat(n,"$2$3")):(r=e.split("#"),angular.isDefinedAndFilled(r)&&angular.isArray(r)&&(e=r[0].replace(i,"$1$3").replace(/(&|\?)$/,""),angular.isDefined(r[1])&&(e+="#".concat(r[1]))),e);if(angular.isDefined(n)){var a=e.indexOf("?")>-1?"&":"?";return r=e.split("#"),angular.isDefinedAndFilled(r)&&angular.isArray(r)&&(e="".concat(r[0]+a+t,"=").concat(n),angular.isDefined(r[1])&&(e+="#".concat(r[1]))),e}return e},J.uri=function(e,t){return angular.isUndefinedOrEmpty(t)?e:e+(O()(e,"?")?"&":"?")+r({filters:t})},J.values=P.a,J.waitForAndExecute=function(e,t,n,r,i,a){if(angular.isUndefinedOrEmpty(e))return u.reject();n=!angular.isUndefined(n)&&n,r=r||50,i=angular.isUndefinedOrEmpty(i)?600:i,angular.isString(i)&&i.endsWith("s")&&(i=i.endsWith("ms")?parseInt(i.replace("ms",""),10):1e3*parseInt(i.replace("s",""),10),i/=r);var s=u.defer(),c=o((function(){var r=angular.element(e);if(!(angular.isUndefined(r)||0===r.length||n&&angular.isUndefined(angular.element(r[0]).scope()))){if(angular.isDefinedAndFilled(c)&&(o.cancel(c),c=void 0),angular.isFunction(t))t(r);else if(!1!==t){var i=angular.isUndefinedOrEmpty(t)||!0===t?S:t;angular.isFunction(i.open)&&i.open(e.replace("#",""),a)}s.resolve()}}),r,i);return c.then((function(){return s.reject()})),s.promise},J}n.d(t,"UtilsService",(function(){return r})),n.d(t,"reject",(function(){return Z}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(258),l=n.n(c),u=n(174),d=n.n(u),p=n(75),f=n.n(p),g=n(110),m=n.n(g),v=n(4),h=n.n(v),y=n(369),E=n.n(y),b=n(17),O=n.n(b),C=n(405),T=n.n(C),S=n(1138),I=n.n(S),_=n(21),A=n.n(_),w=n(688),D=n.n(w),L=n(99),P=n.n(L),N=n(28),R=n.n(N),j=n(125),k=n.n(j),F=n(7),U=n.n(F),M=n(355),x=n.n(M),B=n(107),W=n.n(B),G=n(521),Y=n.n(G),H=n(1139),K=n.n(H),V=n(552),z=n.n(V),q=n(205),X=n(480),Q=n(149);r.$inject=["$document","$httpParamSerializer","$injector","$interval","$location","$q","$rootScope","$sce","$state","$timeout","$window","ConfigTheme","InitialSettings","LxDialogService","LxNotificationService","Translation"];var Z=function(e,t){if(!angular.isUndefinedOrEmpty(e)){var n=m()(e,t);return n>-1?e.splice(n,1):void 0}};angular.module("Services").service("Utils",r)}.call(this,n(528))},function(e,t,n){"use strict";n.r(t),n.d(t,"DOCUMENT_TYPE_LIST",(function(){return r}));var r=["MOST_USED","MOST_SHARED","MOST_TRENDING"]},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=document.cookie.split(";").find((function(t){return t.trim().startsWith("".concat(e,"="))}));return t?t.split("=")[1]:void 0}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,n){var r=n(2395);e.exports=function(e,t){var n=-1,i=e.length,a=i-1;for(t=void 0===t?i:t;++n<t;){var o=r(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var n=Array.prototype,r=n.reverse;e.exports=function(e){return null==e?e:r.call(e)}},function(e,t,n){var r=n(2061),i=n(234),a=/[&<>"']/g,o=RegExp(a.source);e.exports=function(e){return e=i(e),e&&o.test(e)?e.replace(a,r):e}},function(e,t,n){var r=n(651);e.exports=function(e){var t=null==e?0:e.length;return t?r(e,1,t):[]}},function(e,t,n){var r=n(2394),i=n(2396),a=n(82);e.exports=function(e){var t=a(e)?r:i;return t(e)}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){},function(e,t,n){var r=n(1039),i=r(!0);e.exports=i},function(e,t,n){var r=n(702),i=n(966);e.exports=function(e){return i(r(e,1))}},function(e,t,n){var r=n(649),i=n(350),a=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var s=null==n?0:i(n);return s<0&&(s=a(o+s,0)),r(e,t,s)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),function(e,r){function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){var t=e.constructor;switch(t){case Function:return e;case Boolean:return Boolean(e.valueOf());case Array:for(var n=[],r=0;r<e.length;r++)n[r]=null!==e[r]&&"object"===y()(e[r])?a(e[r]):e[r];return n;case Object:for(var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),s=Object.getOwnPropertyNames(e),c=0;c<s.length;c++){var l=s[c];"$"!==l.charAt(0)&&(o[l]=null!==e[l]&&"object"===y()(e[l])?a(e[l]):e[l])}return o;case Date:case Number:case RegExp:case String:return angular.copy(e);default:return JSON.parse(JSON.stringify(e))}}function o(e,t,n){try{return n&&angular.isDefined(e)?JSON.parse(JSON.stringify(e)):angular.isObject(e)?a(e):e}catch(n){if(console.error(n,e),!t)return angular.copy(e)}}function s(e,t){return Array.isArray(e)&&["every","some"].indexOf(t)>-1?e[t]((function(e){return angular.isDefined(e)})):!angular.isUndefined(e)}function c(e,t,n){return"boolean"==typeof t&&(n=t,t=n),null==n&&(n=!0),t="some"===t?"every":"every"===t?"some":void 0,!angular.isUndefinedOrEmpty(e,t,n)}function l(e,t){return Array.isArray(e)&&["every","some"].indexOf(t)>-1&&"function"==typeof e[t]?e[t]((function(e){return angular.isUndefined(e)})):null==e}function u(t,n,r){"boolean"==typeof n&&(r=n,n=r),null==r&&(r=!0);var i=y()(t);if(t=r&&"string"===i?t.trim():t,Array.isArray(t))return t.length>0&&["every","some"].indexOf(n)>-1&&"function"==typeof t[n]?t[n]((function(e){return angular.isUndefinedOrEmpty(e,void 0,r)})):0===t.length;if(angular.isUndefined(t,n))return!0;var a=Object.prototype.toString.call(t),o="[object Attr]"===a,s="[object Date]"===a,c=t instanceof e||t instanceof angular.element,l="[object RegExp]"===a,u=!(s||l||o||c);return"object"===i&&u&&0===Object.keys(t).length||o&&0===t.value.toString().length||s&&0===t.toString().length||c&&0===t.length||l&&t.toString().length-2==0||"string"===i&&0===t.length}function d(){var e=0,t=this.length;if(0===t)return e;for(var n=0;n<t;n++){var r=this.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}function p(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t];return e}function f(e){var t=0;if("function"==typeof Object.keys)t=Object.keys(e).length;else for(var n in e)e.hasOwnProperty(n)&&t++;return t}function g(e,t){for(var n in e)e.hasOwnProperty(n)&&delete e[n];if(void 0!==r)b()(e,t);else for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}n.d(t,"angularFastCopy",(function(){return o})),n.d(t,"angularIsDefined",(function(){return s})),n.d(t,"angularIsDefinedAndFilled",(function(){return c})),n.d(t,"angularIsUndefined",(function(){return l})),n.d(t,"angularIsUndefinedOrEmpty",(function(){return u})),n.d(t,"cloneObject",(function(){return a})),n.d(t,"hashCode",(function(){return d})),n.d(t,"objectEmpty",(function(){return p})),n.d(t,"objectSize",(function(){return f})),n.d(t,"objectSwap",(function(){return g}));var m=n(3),v=n.n(m),h=n(258),y=n.n(h),E=n(517),b=n.n(E);angular.fastCopy=o,angular.isDefined=s,angular.isDefinedAndFilled=c,angular.isUndefined=l,angular.isUndefinedOrEmpty=u,Object.assign||(Object.assign=b.a),Object.empty=p,Object.size=f,Object.swap=g,String.prototype.hashCode=d}.call(this,n(528),n(38))},,,,,,,,,,,,,,,,function(e,t,n){function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}var a={"./cloudsearch/js/cloudsearch-custom-fields_factory.js":1711,"./cloudsearch/js/cloudsearch-custom-fields_service.js":1712,"./cloudsearch/js/cloudsearch-data-source-config_factory.js":1713,"./cloudsearch/js/cloudsearch-data-source-config_service.js":1714,"./cloudsearch/js/cloudsearch-results_controller.js":1814,"./cloudsearch/js/cloudsearch_constant.js":221,"./common/media-picker/js/community-document-provider_service.js":1837,"./common/media-picker/js/document-provider_factory.js":1838,"./common/media-picker/js/document-provider_service.js":1839,"./communities/common/js/add-link_directive.js":1840,"./communities/community/js/community-analytics-dashboard_controller.js":1841,"./communities/community/js/community-block_directive.js":1842,"./communities/community/js/community-details-card_controller.js":1843,"./communities/community/js/community-form_service.js":1844,"./communities/community/js/community-moderation_controller.js":1845,"./communities/community/js/community-move-post_controller.js":1849,"./communities/community/js/community-new-post_controller.js":1850,"./communities/community/js/community-post-visibility-list_controller.js":1975,"./communities/community/js/community-request_directive.js":1976,"./communities/community/js/community-request_factory.js":1977,"./communities/community/js/community-request_service.js":1978,"./communities/community/js/community-template_service.js":1979,"./communities/community/js/community_constant.js":1980,"./communities/community/js/community_controller.js":1981,"./communities/community/js/community_factory.js":1982,"./communities/community/js/community_service.js":1983,"./communities/community/js/module-community-admin-dialog_controller.js":1985,"./communities/community/js/module-community-share-dialog_controller.js":1986,"./communities/community/js/multi-select-community-selector_controller.js":1987,"./communities/community/js/request-button_directive.js":1989,"./communities/member-list/js/community-member-list_directive.js":1990,"./communities/post/js/active-post_service.js":1991,"./communities/post/js/crawler_factory.js":1992,"./communities/post/js/merge-posts-dialog_directive.js":1993,"./communities/post/js/moderate-post-dialog_directive.js":1994,"./communities/post/js/post-block_directive.js":1995,"./communities/post/js/post-comment_factory.js":1996,"./communities/post/js/post-idea_service.js":1997,"./communities/post/js/post_constant.js":1998,"./communities/post/js/post_factory.js":1999,"./communities/post/js/post_service.js":2e3,"./communities/post/js/report-post-dialog_directive.js":2001,"./content/common/js/abstract_content-form_service.js":2002,"./content/common/js/abstract_content_service.js":2003,"./content/common/js/content-block_directive.js":2004,"./content/common/js/content-create-button_directive.js":2005,"./content/common/js/content-form_service.js":2006,"./content/common/js/content-front_controller.js":2007,"./content/common/js/content_factory.js":2008,"./content/common/js/content_service.js":2009,"./content/modules/cell/js/cell_directive.js":2010,"./content/modules/cell/js/cell_service.js":2011,"./content/modules/row/js/row_directive.js":2012,"./content/modules/row/js/row_service.js":2013,"./content/modules/widget/common/js/extension-widget_service.js":2014,"./content/modules/widget/common/js/widget-content_directive.js":2028,"./content/modules/widget/common/js/widget-footer_directive.js":2029,"./content/modules/widget/common/js/widget-header_directive.js":2030,"./content/modules/widget/common/js/widget-settings-advanced_directive.js":2031,"./content/modules/widget/common/js/widget-settings-default_directive.js":2032,"./content/modules/widget/common/js/widget-settings-file-selection_directive.js":2033,"./content/modules/widget/common/js/widget-settings-footer_directive.js":2034,"./content/modules/widget/common/js/widget-settings-header_directive.js":2035,"./content/modules/widget/common/js/widget-settings-style_directive.js":2036,"./content/modules/widget/common/js/widget-settings_constant.js":549,"./content/modules/widget/common/js/widget-settings_directive.js":2037,"./content/modules/widget/common/js/widget-slideshow_directive.js":2038,"./content/modules/widget/common/js/widget_constant.js":2039,"./content/modules/widget/common/js/widget_directive.js":2040,"./content/modules/widget/common/js/widget_factory.js":2047,"./content/modules/widget/common/js/widget_service.js":2048,"./content/modules/widget/modules/widget-awesome-table/js/widget-awesome-table_directive.js":2049,"./content/modules/widget/modules/widget-awesome-table/views/partials/widget-awesome-table-settings_controller.js":2050,"./content/modules/widget/modules/widget-breadcrumb/js/widget-breadcrumb_directive.js":2051,"./content/modules/widget/modules/widget-breaking-news/js/widget-breaking-news_directive.js":2052,"./content/modules/widget/modules/widget-calendar/js/calendar_factory.js":2053,"./content/modules/widget/modules/widget-calendar/js/calendar_request_factory.js":2054,"./content/modules/widget/modules/widget-calendar/js/calendar_service.js":2055,"./content/modules/widget/modules/widget-calendar/js/event_factory.js":2056,"./content/modules/widget/modules/widget-calendar/js/event_service.js":2057,"./content/modules/widget/modules/widget-calendar/js/widget-calendar-settings_controller.js":2058,"./content/modules/widget/modules/widget-calendar/js/widget-calendar_directive.js":2059,"./content/modules/widget/modules/widget-calendar/js/workspace_factory.js":2060,"./content/modules/widget/modules/widget-channel-list/js/channel-list_utils.js":918,"./content/modules/widget/modules/widget-channel-list/js/channel_factory.js":2063,"./content/modules/widget/modules/widget-channel-list/js/channel_service.js":2064,"./content/modules/widget/modules/widget-channel-list/js/widget-channel-list-settings_controller.js":2065,"./content/modules/widget/modules/widget-channel-list/js/widget-channel-list__directive.js":2066,"./content/modules/widget/modules/widget-channel-list/js/widget-channel-list_constants.js":389,"./content/modules/widget/modules/widget-chart/js/widget-chart_directive.js":2067,"./content/modules/widget/modules/widget-chart/views/partials/widget-chart-settings_controller.js":2068,"./content/modules/widget/modules/widget-chat/js/chat_factory.js":2069,"./content/modules/widget/modules/widget-chat/js/chat_service.js":2070,"./content/modules/widget/modules/widget-chat/js/widget-chat-settings_controller.js":2071,"./content/modules/widget/modules/widget-chat/js/widget-chat_directive.js":2072,"./content/modules/widget/modules/widget-classroom/js/widget-classroom_directive.js":2073,"./content/modules/widget/modules/widget-comments/js/comment_factory.js":2074,"./content/modules/widget/modules/widget-comments/js/comment_service.js":2075,"./content/modules/widget/modules/widget-comments/js/widget-comments-field_directive.js":2076,"./content/modules/widget/modules/widget-comments/js/widget-comments-item_directive.js":2077,"./content/modules/widget/modules/widget-comments/js/widget-comments_directive.js":2078,"./content/modules/widget/modules/widget-community-intro/js/widget-community-intro_directive.js":2079,"./content/modules/widget/modules/widget-community-list/js/widget-community-list_directive.js":2080,"./content/modules/widget/modules/widget-community-list/views/partials/widget-community-list-settings_controller.js":2081,"./content/modules/widget/modules/widget-community-members/js/widget-community-members_directive.js":2082,"./content/modules/widget/modules/widget-community-navigation/js/widget-community-navigation_directive.js":2083,"./content/modules/widget/modules/widget-contact/js/custom-email_factory.js":2084,"./content/modules/widget/modules/widget-contact/js/custom-email_service.js":2085,"./content/modules/widget/modules/widget-contact/js/widget-contact_directive.js":2086,"./content/modules/widget/modules/widget-content-filter/js/widget-content-filter_directive.js":2087,"./content/modules/widget/modules/widget-content-filter/views/partials/widget-content-filter-settings_controller.js":2088,"./content/modules/widget/modules/widget-content-list/js/widget-content-list_directive.js":2089,"./content/modules/widget/modules/widget-content-list/views/partials/widget-content-list-settings_controller.js":2090,"./content/modules/widget/modules/widget-data/js/data_factory.js":2091,"./content/modules/widget/modules/widget-data/js/data_service.js":2092,"./content/modules/widget/modules/widget-data/js/widget-data_directive.js":2093,"./content/modules/widget/modules/widget-data/views/partials/widget-data-settings_controller.js":2094,"./content/modules/widget/modules/widget-delve/js/widget-delve_directive.js":2095,"./content/modules/widget/modules/widget-delve/views/partials/widget-delve-settings_controller.js":2096,"./content/modules/widget/modules/widget-directory-entry-list/js/widget-directory-entry-list_directive.js":2097,"./content/modules/widget/modules/widget-directory-entry-list/views/partials/widget-directory-entry-list-settings_controller.js":2098,"./content/modules/widget/modules/widget-drawio/js/widget-drawio_directive.js":2099,"./content/modules/widget/modules/widget-drawio/views/partials/widget-drawio-settings_controller.js":2100,"./content/modules/widget/modules/widget-drive-file-preview/js/widget-drive-file-preview_directive.js":2101,"./content/modules/widget/modules/widget-drive-file-preview/views/partials/widget-drive-file-preview-settings_controller.js":2102,"./content/modules/widget/modules/widget-drive/js/drive-files_factory.js":2103,"./content/modules/widget/modules/widget-drive/js/drive_factory.js":2104,"./content/modules/widget/modules/widget-drive/js/drive_service.js":2105,"./content/modules/widget/modules/widget-drive/js/widget-drive_directive.js":2106,"./content/modules/widget/modules/widget-drive/js/widget-drive_service.js":2107,"./content/modules/widget/modules/widget-drive/views/partials/widget-drive-settings_controller.js":2108,"./content/modules/widget/modules/widget-email/js/gmail_factory.js":2109,"./content/modules/widget/modules/widget-email/js/gmail_service.js":2110,"./content/modules/widget/modules/widget-email/js/widget-email_directive.js":2111,"./content/modules/widget/modules/widget-email/views/partials/widget-email-settings_controller.js":2112,"./content/modules/widget/modules/widget-featured-image/js/widget-featured-image_directive.js":2113,"./content/modules/widget/modules/widget-featured-image/views/partials/widget-featured-image-settings_controller.js":2114,"./content/modules/widget/modules/widget-file-list/js/widget-file-list_constant.js":393,"./content/modules/widget/modules/widget-file-list/js/widget-file-list_directive.js":2115,"./content/modules/widget/modules/widget-file-list/views/partials/widget-file-list-settings_controller.js":2116,"./content/modules/widget/modules/widget-file-management/js/navigation-folder_directive.js":2117,"./content/modules/widget/modules/widget-file-management/js/widget-file-management-drive_service.js":2118,"./content/modules/widget/modules/widget-file-management/js/widget-file-management_directive.js":2119,"./content/modules/widget/modules/widget-file-management/views/partials/widget-file-management-settings_controller.js":2120,"./content/modules/widget/modules/widget-html/js/widget-html_directive.js":2121,"./content/modules/widget/modules/widget-iframe/js/iframe-lazy-loading.js":746,"./content/modules/widget/modules/widget-iframe/js/widget-iframe_controller.js":2122,"./content/modules/widget/modules/widget-iframe/js/widget-iframe_directive.js":2123,"./content/modules/widget/modules/widget-iframe/views/partials/widget-iframe-settings_controller.js":2124,"./content/modules/widget/modules/widget-image-gallery/js/widget-image-gallery_directive.js":2125,"./content/modules/widget/modules/widget-image-gallery/views/partials/widget-image-gallery-settings_controller.js":2126,"./content/modules/widget/modules/widget-instance-list/js/widget-instance-list_directive.js":2127,"./content/modules/widget/modules/widget-instance-list/views/partials/widget-instance-list-settings_controller.js":2128,"./content/modules/widget/modules/widget-intro/js/widget-intro_directive.js":2129,"./content/modules/widget/modules/widget-leaderboard/js/widget-leaderboard-settings_controller.js":2130,"./content/modules/widget/modules/widget-leaderboard/js/widget-leaderboard_directive.js":2131,"./content/modules/widget/modules/widget-links/js/widget-links_directive.js":2132,"./content/modules/widget/modules/widget-links/views/partials/widget-links-settings_controller.js":2133,"./content/modules/widget/modules/widget-list/js/widget-list_directive.js":2134,"./content/modules/widget/modules/widget-mandatory-read/js/widget-mandatory-read_directive.js":2135,"./content/modules/widget/modules/widget-media-list/js/widget-media-list_directive.js":2136,"./content/modules/widget/modules/widget-media-list/views/partials/widget-media-list-settings_controller.js":2137,"./content/modules/widget/modules/widget-meta-social/js/widget-meta-social_directive.js":2138,"./content/modules/widget/modules/widget-meta/js/widget-meta_directive.js":2139,"./content/modules/widget/modules/widget-meta/views/partials/widget-meta-settings_controller.js":2140,"./content/modules/widget/modules/widget-metadata/js/widget-metadata_directive.js":2141,"./content/modules/widget/modules/widget-metadata/views/partials/widget-metadata-settings_controller.js":2142,"./content/modules/widget/modules/widget-post-details/js/widget-post-details_directive.js":2143,"./content/modules/widget/modules/widget-post-list/js/widget-post-list_directive.js":2144,"./content/modules/widget/modules/widget-post-list/views/partials/widget-post-list-settings_controller.js":2145,"./content/modules/widget/modules/widget-process-maker/js/widget-process-maker_directive.js":2146,"./content/modules/widget/modules/widget-process-maker/views/partials/widget-process-maker-settings_controller.js":2147,"./content/modules/widget/modules/widget-remote/js/widget-remote_directive.js":2148,"./content/modules/widget/modules/widget-remote/views/partials/widget-remote-settings_controller.js":2149,"./content/modules/widget/modules/widget-rss/js/rss_factory.js":2150,"./content/modules/widget/modules/widget-rss/js/rss_service.js":2151,"./content/modules/widget/modules/widget-rss/js/widget-rss_directive.js":2152,"./content/modules/widget/modules/widget-share/js/share_service.js":2153,"./content/modules/widget/modules/widget-share/js/widget-share_directive.js":2154,"./content/modules/widget/modules/widget-sharepoint-site-list/js/sharepoint-site_factory.js":2155,"./content/modules/widget/modules/widget-sharepoint-site-list/js/sharepoint-site_service.js":2156,"./content/modules/widget/modules/widget-sharepoint-site-list/js/widget-sharepoint-site-list-settings_controller.js":2157,"./content/modules/widget/modules/widget-sharepoint-site-list/js/widget-sharepoint-site-list_directive.js":2158,"./content/modules/widget/modules/widget-standalone-question/js/widget-standalone-question_directive.js":2159,"./content/modules/widget/modules/widget-standalone-question/js/widget-standalone-question_service.js":2160,"./content/modules/widget/modules/widget-standalone-question/views/partials/widget-standalone-question-settings_controller.js":2161,"./content/modules/widget/modules/widget-stock-exchange/js/stock_exchange_factory.js":2162,"./content/modules/widget/modules/widget-stock-exchange/js/widget-stock-exchange_directive.js":2163,"./content/modules/widget/modules/widget-stock-exchange/views/partials/widget-stock-exchange-settings_controller.js":2164,"./content/modules/widget/modules/widget-sub-nav/js/widget-sub-nav-custom-settings_directive.js":2165,"./content/modules/widget/modules/widget-sub-nav/js/widget-sub-nav-item_directive.js":2166,"./content/modules/widget/modules/widget-sub-nav/js/widget-sub-nav_directive.js":2167,"./content/modules/widget/modules/widget-sub-nav/views/partials/widget-sub-nav-settings_controller.js":2168,"./content/modules/widget/modules/widget-tasks/js/widget-tasks_directive.js":2169,"./content/modules/widget/modules/widget-tasks/views/partials/widget-tasks-settings_controller.js":2170,"./content/modules/widget/modules/widget-tip/js/widget-tip_directive.js":2171,"./content/modules/widget/modules/widget-tip/views/partials/widget-tip-settings_controller.js":2172,"./content/modules/widget/modules/widget-title/js/widget-title_directive.js":2173,"./content/modules/widget/modules/widget-todo/js/widget-todo_directive.js":2174,"./content/modules/widget/modules/widget-user-directory-search/js/widget-user-directory-search_directive.js":2175,"./content/modules/widget/modules/widget-user-directory-search/views/partials/widget-user-directory-search-settings_controller.js":2176,"./content/modules/widget/modules/widget-user-list/js/widget-user-list_directive.js":2177,"./content/modules/widget/modules/widget-user-list/views/partials/widget-user-list-advanced-settings_controller.js":2178,"./content/modules/widget/modules/widget-user-list/views/partials/widget-user-list-settings_controller.js":2179,"./content/modules/widget/modules/widget-video/js/widget-video_directive.js":2180,"./content/modules/widget/modules/widget-video/views/partials/widget-video-settings_controller.js":2181,"./content/modules/widget/modules/widget-wall/js/widget-wall_directive.js":2182,"./content/modules/widget/modules/widget-wall/views/partials/widget-wall-settings_controller.js":2183,"./content/modules/widget/modules/widget-weather/js/widget-weather_directive.js":2184,"./content/modules/widget/modules/widget-weather/views/partials/widget-weather-settings_controller.js":2185,"./delve/js/tasks_constant.js":920,"./document/js/document-management-menu_directive.js":2186,"./favorites/js/favorite-button_directive.js":2187,"./favorites/js/favorite_factory.js":2188,"./favorites/js/favorite_service.js":2189,"./feed/js/feed-block_directive.js":2190,"./feed/js/feed-subscribers_factory.js":2191,"./feed/js/feed-user-subscription_factory.js":2192,"./feed/js/feed_factory.js":2193,"./feed/js/feed_service.js":2194,"./fsitems/js/fsitems_factory.js":2195,"./fsitems/js/fsitems_service.js":2196,"./header/js/header_factory.js":2197,"./header/js/header_service.js":2198,"./hotkeys/js/hotkey_controller.js":2199,"./instance-script/js/instance-script_factory.js":2200,"./instance-script/js/instance-script_service.js":2201,"./instance/js/instance-block_directive.js":2202,"./layout/modules/app/js/app_controller.js":2203,"./layout/modules/front/js/front_controller.js":2204,"./login/js/login-choice_controller.js":2205,"./login/js/login_controller.js":2206,"./login/js/login_factory.js":2207,"./main-nav/js/main-nav-front_controller.js":2208,"./main-nav/js/main-nav-item-front_directive.js":2209,"./main-nav/js/main-nav_factory.js":2210,"./main-nav/js/main-nav_service.js":2211,"./media/js/media-block_directive.js":2212,"./media/js/media_constant.js":145,"./media/js/media_factory.js":2213,"./media/js/media_service.js":2214,"./media/js/tag_factory.js":2215,"./media/js/tag_service.js":2216,"./module/modules/classroom/js/classroom_factory.js":2217,"./module/modules/classroom/js/classroom_service.js":2218,"./module/modules/classroom/js/course-block_directive.js":2219,"./module/modules/content-list/js/content-list_controller.js":2220,"./module/modules/directory/js/directory-entry-block_directive.js":2221,"./module/modules/user-directory/js/user-directory-details_directive.js":2222,"./module/modules/user-directory/js/user-directory-field_directive.js":2223,"./module/modules/user-directory/js/user-directory-org-chart-item_directive.js":2224,"./module/modules/user-directory/js/user-directory-tools_service.js":2225,"./module/modules/user-directory/js/user-directory_controller.js":2226,"./module/modules/user-directory/js/user-organizationchart_service.js":2227,"./notification/js/notification-group_directive.js":2228,"./notification/js/notification-settings_constant.js":2229,"./notification/js/notification_factory.js":2230,"./notification/js/notification_service.js":2231,"./role/js/role_factory.js":2232,"./role/js/role_service.js":2233,"./search/js/__mockData__/index.js":2234,"./search/js/community-search_factory.js":2235,"./search/js/community-search_service.js":2236,"./search/js/legacy-search-autocomplete_factory.js":2237,"./search/js/legacy-search_constant.js":364,"./search/js/legacy-search_factory.js":2238,"./search/js/legacy-search_service.js":2239,"./search/js/search-directory-entries_factory.js":2240,"./search/js/search-results-block_directive.js":2241,"./search/js/search-results_controller.js":2242,"./search/js/search-user_factory.js":2243,"./search/js/search_constant.js":61,"./search/js/search_service.js":2244,"./social-advocacy/js/social-advocacy_controller.js":2245,"./social/attachments/js/attachments-controls_directive.js":2246,"./social/attachments/js/attachments-links_directive.js":2247,"./social/attachments/js/attachments_directive.js":2248,"./social/js/comment-button_directive.js":2249,"./social/js/follow-button_component.js":2250,"./social/js/interest-block_directive.js":2251,"./social/js/interest_factory.js":2252,"./social/js/interest_service.js":2253,"./social/js/like-button_directive.js":2254,"./social/js/reaction_service.js":2255,"./social/js/share-post-button_directive.js":2256,"./social/js/social-activity-history_factory.js":2257,"./social/js/social-activity-history_service.js":2258,"./social/js/social-activity_factory.js":2259,"./social/js/social-activity_service.js":2260,"./social/js/social-subscription_factory.js":2261,"./social/js/social-subscription_service.js":2262,"./social/profile/js/social-profile-achievement_directive.js":2263,"./social/profile/js/social-profile-achievements_controller.js":2264,"./social/profile/js/social-profile-activities_controller.js":2265,"./social/profile/js/social-profile-activity-action_directive.js":2266,"./social/profile/js/social-profile-activity_directive.js":2267,"./social/profile/js/social-profile-history_controller.js":2268,"./social/profile/js/social-profile-notifications_controller.js":2269,"./social/profile/js/social-profile-subscription_directive.js":2270,"./social/profile/js/social-profile-subscriptions_controller.js":2271,"./social/profile/js/social-profile-user_factory.js":2272,"./social/profile/js/social-profile-user_service.js":2273,"./social/profile/js/social-profile_controller.js":2274,"./social/profile/js/social-profile_service.js":2275,"./style/js/style_factory.js":2276,"./style/js/style_service.js":2277,"./tasks/js/tasks_constant.js":817,"./template/js/template-builder_service.js":2278,"./user/js/user-access_service.js":2279,"./user/js/user-auth_factory.js":2280,"./user/js/user-block-wrapper_directive.js":2281,"./user/js/user-block_directive.js":2282,"./user/js/user-content_factory.js":2283,"./user/js/user-content_service.js":2284,"./user/js/user-directory_factory.js":2285,"./user/js/user-directory_service.js":2286,"./user/js/user-favorite_factory.js":2287,"./user/js/user-favorite_service.js":2288,"./user/js/user-feed-subscriptions_service.js":2289,"./user/js/user-follower_factory.js":2290,"./user/js/user-follower_service.js":2291,"./user/js/user-following_factory.js":2292,"./user/js/user-following_service.js":2293,"./user/js/user-list-dialog_directive.js":2294,"./user/js/user-organization-chart_factory.js":2295,"./user/js/user-settings_factory.js":2296,"./user/js/user-settings_service.js":2297,"./user/js/user_constant.js":2298,"./user/js/user_factory.js":2299,"./user/js/user_service.js":2300,"./wall/js/wall_constant.js":818,"./zendesk/js/zendesk-block_directive.js":2301,"./zendesk/js/zendesk_constant.js":2302,"./zendesk/js/zendesk_factory.js":2303,"./zendesk/js/zendesk_service.js":2304};r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=1710},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/cloudsearch/customfields/:methodKey",{},{list:{isArray:!1,method:"POST",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CloudSearchCustomFieldsFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"name"})}e.$inject=["CloudSearchCustomFieldsFactory","LumsitesBaseService"],angular.module("Services").service("CloudSearchCustomFields",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/cloudsearch/datasourceconfig/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CloudSearchDataSourceConfigFactory",e)}()},function(e,t,n){"use strict";function r(e,t){var n=t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid",postGet:function(e){return angular.forEach(e.items,(function(e){!angular.isUndefinedOrEmpty(e.customFields)&&Object(s.v)(e)&&(e.customFields=a()(e.customFields,"order"))})),e}});return n.getDataSourceMDIName=function(e){if(Object(s.v)(e))return"";if(Object(s.s)(e))return"lumapps";switch(e.uid){case"calendar":return o.ICON.GOOGLE_CALENDAR;case"drive":return o.ICON.GOOGLE_DRIVE;case"groups":return o.ICON.GOOGLE_GROUPS;case"keep":return o.ICON.GOOGLE_KEEP;case"mail":return o.ICON.GOOGLE_MAIL;case"sites":return o.ICON.GOOGLE_SITES;default:return""}},n}n.r(t),n.d(t,"CloudSearchDataSourceConfigService",(function(){return r}));var i=n(218),a=n.n(i),o=n(61),s=n(84);r.$inject=["CloudSearchDataSourceConfigFactory","LumsitesBaseService"],angular.module("Services").service("CloudSearchDataSourceConfig",r)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t,n,r,i,o,p,f,g,m,v,h){function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p.store,n=t.dispatch,a=t.getState,o=a().search,c=o.currentDataSourceUid,f=o.isLoading;if(!f){var g={disableQueryInterpretation:"false"===r.isQI,query:i.query};if(n(Object(d.x)(e)),b.IS_NATIVE_REWORK){if(Object(u.q)(c)||Object(u.r)(c))return;if(Object(u.n)({uid:c}))return void b.parentCtrl.updateSearch();if(c===l.TAB_ALL.uid){var m=s()(b.parentCtrl,"availableTabs",[]).filter(u.n);b.parentCtrl.fetchSidebarResults(m)}}n(Object(d.v)({engineType:b.IS_NATIVE_REWORK?l.ENGINE_TYPE.ELASTICSEARCH:l.ENGINE_TYPE.CLOUDSEARCH,params:g}))}}var E,b=this;b.TAB_ALL=l.TAB_ALL,b.parentCtrl=void 0,b.Search=f,b.LegacySearch=i,b.LegacySearchConstant=o,b.Utils=g,b.debouncedSearch=a()(y,250),b.isLegacyDataSource=u.p,b.switchDataSource=function(t){var r=l.TAB_ALL.uid;null===t&&(t=r),p.store.dispatch(Object(d.o)(t)),b.IS_NATIVE_REWORK&&(b.parentCtrl.switchTab(t),e.$emit("data-source-change")),Object(u.q)(t)||(p.store.dispatch(Object(d.w)()),n.go("app.front.search",{query:i.query,tab:t},{notify:!1}),y({currentFilters:!0,dataSources:t===l.TAB_ALL.uid,filters:!0,sortOrders:!0}))},b.updateSortByAndSearch=function(e,t,n,r){p.store.dispatch(Object(d.r)(e,r)),y()},b.exactQueryHref=n.href("app.front.search",{isQI:!1,query:b.LegacySearch.query}),b.getQuery=function(){return Object(c.a)(b.LegacySearch.query)},t.$watch((function(){return i.query}),(function(e,t){e!==t&&(n.go("app.front.search",{isQI:null,query:i.query},{notify:!0}),b.IS_NATIVE_REWORK&&Object(u.p)(b.parentCtrl.currentTab.id)||y({currentFilters:!0,filters:!0}))})),E=s()(m.getInstance(),"publicContentAuthorized",!1),b.IS_CLOUDSEARCH=v.isConnected()&&!v.isExternal()&&h.hasFeature("cloudsearch")&&!E,b.IS_NATIVE_REWORK=!b.IS_CLOUDSEARCH&&h.hasFeature("elasticsearch-ps"),b.IS_NATIVE_REWORK&&(b.parentCtrl=t.vm,b.parentCtrl.filterMainTabs=u.n,t.$watch((function(){return f.SOURCES}),(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=Object(u.m)(e),n=t.customTabs,r=t.tabs;b.parentCtrl.availableTabs=b.parentCtrl.initTabs({customTabs:n,tabKey:"id",tabs:Object(u.i)(r)})}}))),b.mappedSources=[],b.switchDataSource(r.tab)}n.r(t),n.d(t,"CloudSearchResultsController",(function(){return r}));var i=n(71),a=n.n(i),o=n(4),s=n.n(o),c=n(803),l=n(61),u=n(84),d=n(159);n(271);r.$inject=["$rootScope","$scope","$state","$stateParams","LegacySearch","LegacySearchConstant","ReduxStore","Search","Utils","Instance","User","Features"],angular.module("Controllers").controller("CloudSearchResultsController",r)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){function i(){return a.apply(this,arguments)}function a(){return a=u()(c.a.mark((function t(){var n,r,i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=v()(e.getCurrent(),"driveFolder")||{},r=n.docPath,i=n.source,!angular.isUndefinedOrEmpty(r)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,s(i);case 5:return a=t.sent,o=v()(a,"sortableFields",[]),t.abrupt("return",[{categories:[{canPick:!0,id:"LIBRARY",rootPath:r}],display:"inline",id:"community",sortableFields:o}]);case 8:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return l=u()(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g.a,e.next=3,f.getRemoteList();case 3:return e.t1=e.sent,e.t2={id:t},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(){return d=u()(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRemoteList({instanceId:n.getCurrentInstanceId()});case 2:return t=e.sent,e.next=5,i();case 5:return r=e.sent,e.abrupt("return",angular.fastCopy([].concat(o()(r),o()(t))));case 7:case"end":return e.stop()}}),e,this)}))),d.apply(this,arguments)}var f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},{getList:function(){return d.apply(this,arguments)},getRemoteList:t.getList});return f}n.r(t),n.d(t,"CommunityDocumentProviderService",(function(){return i}));var a=n(19),o=n.n(a),s=n(6),c=n.n(s),l=n(10),u=n.n(l),d=n(3),p=n.n(d),f=n(21),g=n.n(f),m=n(4),v=n.n(m);i.$inject=["Content","DocumentProvider","Instance"],angular.module("Services").service("CommunityDocumentProvider",i)},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/document/provider/:methodKey"),{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}n.r(t),n.d(t,"DocumentProviderFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("DocumentProviderFactory",r)},function(e,t,n){"use strict";function r(e,t,n){function r(){return e.list({instanceId:t.getCurrentInstanceId()}).$promise}function i(){return i=s()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(angular.isDefinedAndFilled(f)){e.next=7;break}return p||(p=r()),e.next=4,p;case 4:t=e.sent,n=t.providers,f=n;case 7:return e.abrupt("return",angular.fastCopy(f));case 8:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function o(){return o=s()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l.a,e.next=3,this.getList();case 3:return e.t1=e.sent,e.t2={id:t},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)}))),o.apply(this,arguments)}function c(){return c=s()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider(t);case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",n.categories);case 6:case"end":return e.stop()}}),e,this)}))),c.apply(this,arguments)}function u(){return u=s()(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProviderCategories(t);case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",l()(r,{id:n}));case 6:case"end":return e.stop()}}),e,this)}))),u.apply(this,arguments)}function d(){return d=s()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider(t);case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",n.driveResourceAuthorized);case 6:case"end":return e.stop()}}),e,this)}))),d.apply(this,arguments)}var p,f,g=n.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid"});return g.getList=function(){return i.apply(this,arguments)},g.getProvider=function(e){return o.apply(this,arguments)},g.getProviderCategories=function(e){return c.apply(this,arguments)},g.getProviderCategory=function(e,t){return u.apply(this,arguments)},g.getProviderAuthorizedActions=function(e){return d.apply(this,arguments)},g}n.r(t),n.d(t,"DocumentProviderService",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(21),l=n.n(c);r.$inject=["DocumentProviderFactory","Instance","LumsitesBaseService"],angular.module("Services").service("DocumentProvider",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l){var u=this;u.form={},u.linkInput="",u.currentTextarea=void 0,u.Config=n,u.FormValidation=r,u.LsTextEditor=i,u.LsTextEditorMarkdown=a,u.addLink=function(){var e=u.form.addLinkDialog;if(u.selectedText=void 0,e.$valid){if("MARKDOWN"===u.linkType&&a.formatLink(u.linkInput,u.textEditorControl),angular.isUndefinedOrEmpty(u.content.links)||"ATTACHMENT"===u.linkType){if(!angular.isFunction(u.urlCallback))return void o.close(u.dialogKey);var t={link:u.linkInput};u.urlCallback(t)}o.close(u.dialogKey)}else angular.isDefinedAndFilled(e)&&r.setFormDirty(e),s.error(c.translate("ERROR_MANDATORY_FIELDS"))},u.registerForm=function(e,n){t((function(){u.form[n]=angular.isDefinedAndFilled(e[n])?e[n]:void 0}))},u.editLink=function(){if(u.linkInput="ATTACHMENT"===u.linkType?e.get(u.content,"links[0].url"):void 0,"ATTACHMENT"===u.linkType||!a.isSelectionLinkWrapped(u.textEditorControl))return angular.isDefinedAndFilled(u.currentTextarea)&&(u.selectedText=u.currentTextarea.value.substring(u.currentTextarea.selectionStart,u.currentTextarea.selectionEnd)),void l.waitForAndExecute("#"+u.dialogKey);a.formatLink(void 0,u.textEditorControl)},u.urlCallback=u.urlCallback||angular.noop,angular.isUndefinedOrEmpty(u.linkType)&&(u.linkType="ATTACHMENT"),angular.isDefinedAndFilled(u.textEditorControl)&&(u.currentTextarea=e.first(u.textEditorControl.textAreaElement)),u.dialogKey+="-"+u.linkType}t.$inject=["$timeout","Config","FormValidation","LsTextEditor","LsTextEditorMarkdown","LxDialogService","LxNotificationService","Translation","Utils"],angular.module("Directives").directive("lsAddLink",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{content:"=lsContent",dialogKey:"<lsDialogKey",linkType:"@?lsLinkType",textEditorControl:"=lsTextEditorControl",type:"<?lsType",urlCallback:"&?lsUrlCallback"},templateUrl:"/client/front-office/modules/communities/common/views/partials/add-link.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i){var a,o=this;o.DIALOG_ID="community-analytics-dashboard-",o.community={},t.$on("lx-dialog__open-start",(function(t,n){n===o.DIALOG_ID&&e.search("analytics",!0)})),t.$on("lx-dialog__close-end",(function(t,n){n===o.DIALOG_ID&&e.search("analytics",void 0),i.removePrintClass()})),t.$on("$stateChangeStart",(function(){i.removePrintClass()})),a=n.getCurrent(),!angular.isUndefinedOrEmpty(a)&&r.canViewCommunityAnalytics()&&(o.community.uid=a.uid,o.community.title=a.title,o.community.privacy="COMMUNITY_PRIVACY_".concat(a.privacy.toUpperCase()),o.DIALOG_ID+=o.community.uid,e.search().analytics&&n.openAnalyticsDashboard())}n.r(t),n.d(t,"CommunityAnalyticsDashboardController",(function(){return r})),r.$inject=["$location","$scope","Community","UserAccess","Utils"],angular.module("Controllers").controller("CommunityAnalyticsDashboardController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,c,l){function u(){var e,t=angular.isUndefined(d.fields)?r.COMMUNITY_FIELDS:d.fields;angular.isObject(t)&&!angular.isArray(t)&&(t=t.map((function(e,t){return{enable:e,name:t}}))),d.fieldsToDisplay={},angular.forEach(t,(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=e;angular.isObject(e)||(t={enable:!0,name:e}),d.fieldsToDisplay[t.name]=t.enable}})),e=n.isWriteable(d.community),d.showRequestButton=i.hasFeature("advanced_community")&&d.fieldsToDisplay.follow&&n.isReadOnly(d.community)&&!e,d.showFollowButton=n.isWriteable(d.community)||!n.isDescriptionOnly(d.community),d.fieldsToDisplay.thumbnail=!!angular.isUndefinedOrEmpty(d.fieldsToDisplay.thumbnail)||d.fieldsToDisplay.thumbnail}var d=this;d.belongsToTheCurentInstance=!0,d.fieldsToDisplay={},d.showFollowButton=!0,d.showRequestButton=!1,d.Community=n,d.Translation=c,d.getClasses=function(){var e=[],t=d.blockSize||"l";return e.push("community-block--size-".concat(t)),d.fieldsToDisplay.content?e.push("community-block--has-content"):e.push("community-block--no-content"),"dark"===d.theme?e.push("community-block--theme-dark"):e.push("community-block--theme-light"),"grid"===d.viewMode?e.push("community-block--view-mode-grid"):e.push("community-block--view-mode-list"),"ungroup"===d.viewModeVariant?e.push("community-block--view-mode-variant-ungroup"):e.push("community-block--view-mode-variant-group"),e},d.getStyle=function(){return angular.isUndefinedOrEmpty(d.widgetProperties)?{}:s.adjustShadow(s.getBlockStyle(d.widgetProperties,d.viewMode,d.viewModeVariant))},angular.isUndefinedOrEmpty(d.community)?d.backgroundImage={}:d.backgroundImage=l.getBackgroundImage(d.community.thumbnail,void 0,!1),d.backgroundImage,u(),d.hasSocialFeature=i.hasFeature("social"),d.community.instance!==a.getCurrentInstanceId()?(d.belongsToTheCurentInstance=!1,a.getSiblings(!1).then((function(t){var n=c.translate(d.community.slug),r={slug:n},i=o()(t,{id:d.community.instance});angular.isDefinedAndFilled(i)&&(r.instance=i.slug),d.communityLink=e.href("app.front.community",r,{absolute:!0}),d.displayInstance&&(d.instanceDetails=i)}))):d.displayInstance&&a.getSiblings().then((function(e){d.instanceDetails=o()(e,{id:d.community.instance})}))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{blockSize:"@?",community:"<",displayInstance:"<?",displayThumbnail:"<?",excerptLimit:"@?",fields:"<?",theme:"@?",viewMode:"@?",viewModeVariant:"@?",widgetProperties:"=?"},templateUrl:"/client/front-office/modules/communities/community/views/community-block.html"}}n.r(t),n.d(t,"CommunityBlockDirective",(function(){return i}));var a=n(21),o=n.n(a);r.$inject=["$state","$stateParams","Community","Config","Features","Instance","Style","Translation","Utils"],angular.module("Directives").directive("lsCommunityBlock",i)},function(e,t,n){"use strict";function r(e){var t,n=this;n.DIALOG_ID="community-details-card-",n.community={},t=e.getCurrent(),angular.isUndefinedOrEmpty(t)||(n.community={adminKeys:t.adminKeys,description:t.description,driveFolder:t.driveFolder,email:t.email,following:t.following,privacy:"COMMUNITY_PRIVACY_".concat(t.privacy.toUpperCase()),public:t.public,thumbnail:t.thumbnail,title:t.title,uid:t.uid,userKeys:t.userKeys,workspaceId:t.workspace},n.DIALOG_ID+=n.community.uid)}n.r(t),n.d(t,"CommunityDetailsCardController",(function(){return r})),r.$inject=["Community"],angular.module("Controllers").controller("CommunityDetailsCardController",r)},function(e,t){!function(){"use strict";function e(e,t){var n=e.createAbstractContentFormService(t),r={};return n.DISPLAY_MODE={complete:"complete",limited:"limited"},n._checkFeedKeys=function(){return!1},n.getDisplayMode=function(e){return e=e||"default",r[e]||n.DISPLAY_MODE.complete},n.setDisplayMode=function(e,t){e=e||"default",r[e]=n.DISPLAY_MODE[t]||n.DISPLAY_MODE.complete},n}e.$inject=["AbstractContentForm","Community"],angular.module("Services").service("CommunityForm",e)}()},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,o,s,c,l,u,d,p){function f(t){c.unselectAll(m.COMMUNITY_MODERATION_DATA_TABLE_ID),t=t||{};var n=l.getRelatedStatusFlags(e.get(t,"isMerged.value")),r=!0===t.reportStatus?l.REPORT_STATUSES.REPORTED:void 0,i=angular.extend(angular.fastCopy(t),{author:e.get(t.author,"email"),hasRelevant:e.get(t.hasRelevant,"value"),isMergePending:n[1],isMerged:n[0],reportStatus:r});l.filterize(i,void 0,void 0,m.LIST_KEY,v)}function g(e,t,n){m.COMMUNITY_MODERATION_DATA_TABLE_ID===t&&(m.selectedRows=n)}var m=this,v={items:{authorDetails:{firstName:!0,lastName:!0},comments:!0,likes:!0,parentContentDetails:{slug:!0,title:!0},postType:!0,score:{total:!0},uid:!0}},h={items:{email:!0,firstName:!0,lastName:!0}};m.COMMUNITY_MODERATION_DATA_TABLE_ID="communityModerationDataTable",m.COMMUNITY_MODERATION_DATA_TABLE_HEADERS=[{format:function(e){return p.getUserFullName(e.authorDetails)},label:d.translate("AUTHOR"),name:"authorDetails.firstName",sortable:!0},{format:function(e){return d.translate(e.parentContentDetails.title)},label:d.translate("COMMUNITY"),name:"parentContentDetails.title."+d.getLang("current"),sortable:!0},{format:function(t){return d.translate("FRONT.COMMUNITY.POST.TYPE."+e.get(t,"postType"))},label:d.translate("COMMUNITY_POST_TYPES"),name:"postType",sortable:!0},{label:a()(d.translate("LIKES")),name:"likes",sortable:!0},{label:a()(d.translate("COMMENTS")),name:"comments",sortable:!0},{format:function(t){return e.get(t,"score.total","").toString()},label:d.translate("COMMUNITY_POST_SCORE"),name:"score.total",sortable:!0}],m.DEFAULT_FILTER={author:void 0,hasRelevant:void 0,isMergePending:void 0,isMerged:void 0,isSpam:void 0,isSpamPending:void 0,postType:[],query:void 0},m.LIST_KEY="community-moderation",m.POST_TYPES=e.values(s.POST_TYPES),m.isFilterVisible=!1,m.selectedRows=[],m.ConfigTheme=o,m.Community=i,m.Post=l,m.PostConstant=u,m.User=p;var y=e.debounce(f,500);m.debouncedFilterUsers=e.debounce((function(e){p.filterize({action:"COMMUNITY_PUBLISH",query:e,showHidden:!1,status:"enabled"},void 0,void 0,m.LIST_KEY,h)}),500),m.onRemovePostSuccess=function(){c.unselectAll(m.COMMUNITY_MODERATION_DATA_TABLE_ID)},m.toggleFilter=function(){m.isFilterVisible=!m.isFilterVisible,m.isFilterVisible||(m.filter=angular.fastCopy(m.DEFAULT_FILTER))},m.viewPost=function(){angular.isUndefinedOrEmpty(m.selectedRows)||r.go("app.front.community",{identifier:m.selectedRows[0].uid,slug:d.translate(m.selectedRows[0].parentContentDetails.slug),view:"post"})},n.$watch("vm.filter",(function(e,t){e!==t&&y(e)}),!0),n.$on("lx-data-table__selected",g),n.$on("lx-data-table__sorted",(function(n,r,i){r===m.COMMUNITY_MODERATION_DATA_TABLE_ID&&(l._services[m.LIST_KEY]._list=t("orderBy")(l.displayList(m.LIST_KEY),(function(t){return e.get(t,i.name)}),"desc"===i.sort))})),n.$on("lx-data-table__unselected",g),m.filter=angular.fastCopy(m.DEFAULT_FILTER),f(m.filter)}n.d(t,"CommunityModerationController",(function(){return r}));var i=n(257),a=n.n(i);r.$inject=["$filter","$scope","$state","Community","ConfigTheme","InitialSettings","LxDataTableService","Post","PostConstant","Translation","User"],angular.module("Controllers").controller("CommunityModerationController",r)}.call(this,n(38))},,,,function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o,s,c){var l=this;l.DIALOG_ID="community-move-post-dialog",l.FIELDS=["members","title","content"],l.WHERE_ADMIN=!0,l.LIST_KEY="community-move-list-key",l.COMMUNITY_SELECTOR_SUBMIT_LABEL=s.translate("SUBMIT"),l.currentCommunity=void 0,l.filters={community:void 0},l.is={moving:!1,searchLoading:!1},l.listCommunities=[],l.pendingCommunity=void 0,l.post=void 0,l.Community=n,l.Utils=c,l.debouncedCommunitySearch=n.debouncedListAvailable,l.selectCommunity=function(t){l.is.moving||(l.is.moving=!0,n.get({uid:t},(function(t){l.pendingCommunity=t,o.move({communityId:l.pendingCommunity.id,uid:l.post.uid},void 0,(function(t){a.setCurrent(void 0),e.$broadcast("community__post-moved",t),i.success(s.translate("POST_MOVE_SUCCESS")),r.close(l.DIALOG_ID)}),(function(e){c.displayServerError(e),l.is.moving=!1}))}),(function(e){c.displayServerError(e),l.is.moving=!1}),void 0,void 0,!1))},t.$on("lx-dialog__close-end",(function(e,t){t===l.DIALOG_ID&&(l.is.moving=!1)})),t.$on("lx-dialog__open-start",(function(e,t){t===l.DIALOG_ID&&l.init()})),l.init=function(){l.is.moving=!1,l.post=a.movedPost,l.currentCommunity=n.getCurrent()||l.post.parentContentDetails,l.pendingCommunity=void 0,n.listAvailable({isCommunityAdmin:l.WHERE_ADMIN,query:l.filters.community},void 0,void 0,l.LIST_KEY)}}e.$inject=["$rootScope","$scope","Community","LxDialogService","LxNotificationService","Post","PostMoveFactory","Translation","Utils"],angular.module("Controllers").controller("CommunityMovePostController",e)}()},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o,c,h,E,O,T,I,A,D,R,k,F,U,M,x,$,B,W,G,Y){function H(){Q.isSuggestedMeetingLoading=!0;var e=Q.createdAt.format(),t=j()(e).add(2,"W").format(),n=j.a.duration(j()(Q.eventEndDate.date).diff(j()(Q.eventStartDate.date))).asMinutes(),r=Math.floor(n/60),i=n%60,a={fromDate:e,hours:r,minutes:i,toDate:t,uid:Q.community.id};o.getSuggestedMeetings(a).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.suggestions,n=void 0===t?[]:t;Q.suggestedMeetingTimes=n,angular.forEach(Q.suggestedMeetingTimes,(function(e){e.startDate=j.a.utc(e.startDate).local().format(),e.endDate=j.a.utc(e.endDate).local().format(),e.isEverybodyFree=angular.isUndefinedOrEmpty(e.busy)&&angular.isUndefinedOrEmpty(e.unknown),Q.isSuggestedMeetingLoading=!1}))})).catch((function(){Q.isSuggestedMeetingLoading=!1}))}function K(){Q.createdAt=angular.isDefinedAndFilled(Q.newPost.createdAt)?j.a.utc(Q.newPost.createdAt).local():j()(),Q.eventStartDate={date:angular.isDefinedAndFilled(Q.newPost.eventStartDate)?j.a.utc(Q.newPost.eventStartDate).local():angular.copy(Q.createdAt)},Q.eventEndDate={date:angular.isDefinedAndFilled(Q.newPost.eventEndDate)?j.a.utc(Q.newPost.eventEndDate).local():angular.copy(Q.eventStartDate.date).add(1,"hour")},Q.times=[];for(var e=0;e<24;e++){var t=j()().startOf("hour").hours(e);Q.times.push(t.format("LT")),Q.times.push(t.minutes(30).format("LT"))}angular.forEach(["eventStartDate","eventEndDate"],(function(e,t){Q[e].dateFormatted=Q[e].date.locale(Q.postLang).format("ll"),Q[e].timeFormated=Q[e].date;var n=!1;angular.isUndefinedOrEmpty(Q.newPost[e])&&(n=!0,Q[e].timeFormated.minutes()>=30?Q[e].timeFormated=Q[e].timeFormated.minutes(30):Q[e].timeFormated=Q[e].timeFormated.minutes(0),Q[e].timeFormated.add(1,"hour")),Q[e].timeFormated=Q[e].timeFormated.startOf("minutes").locale(Q.postLang).format("LT"),n&&"eventEndDate"===t&&Q[e].timeFormated.add(1,"hour")}))}function V(){Q.currentAttachmentType=void 0,Q.feedMentioned=[],Q.isSameOrigin=!1,Q.postLang=x.getLang("current"),Q.specialMentions={},Q.specialMentions[-1]=D.mentionAllKeywords,Q.iePostContent="",Q.ieContentMode="edit",Q.wrexValue=null,Q.wrexEditorRef=null,Q.newPost={authorDetails:{uid:S()(W.getConnected(),"uid")},calendarEventId:"",content:{},externalKey:void 0,feedKeys:void 0,files:[],images:[],kind:"Content",links:[],location:{},parentContentDetails:{feedKeys:["-1"]},postType:void 0,slug:{},tags:[],tagz:[],title:{}},Q.postDate=x.translate("RIGHT_NOW")}function z(e){var t=e.query,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.a,i=arguments.length>3?arguments[3]:void 0;Q.is.searchLoading=!0;var a=T.getInstance();I.filter(i,"communityList",{lang:X,query:t,instance:a.id},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,r=void 0===t?[]:t;o._services[i]._list=r,Q.is.searchLoading=!1,n()}),(function(){Q.is.searchLoading=!1,r()}),c.PROJECTION.PICKER)}var q,X,Q=this,Z=(q={},l()(q,o.availablePostTypes.EVENT.value,x.translate("FRONT.COMMUNITY.POST.TITLE_PLACEHOLDER.EVENT")),l()(q,o.availablePostTypes.IDEA.value,x.translate("FRONT.COMMUNITY.POST.TITLE_PLACEHOLDER.IDEA")),l()(q,o.availablePostTypes.QUESTION.value,x.translate("FRONT.COMMUNITY.POST.TITLE_PLACEHOLDER.QUESTION")),l()(q,"default",x.translate("FRONT.COMMUNITY.POST.TITLE_PLACEHOLDER.DEFAULT")),q),J=[{type:"body",children:[{text:""}]}];Q.MediaConstant=U,Q.HEADINGS_LIST=["FRONT.TEXT_EDITOR.HEADINGS.HEADING1","FRONT.TEXT_EDITOR.HEADINGS.HEADING2","FRONT.TEXT_EDITOR.HEADINGS.NORMAL_TEXT"],Q.LIST_KEY="community-list-key",Q.FIELDS=["members","title","content"],Q.WHERE_ADMIN=!1,Q.COMMUNITY_SELECTOR_SUBMIT_LABEL=x.translate("NEXT"),Q.currentHeading="FRONT.TEXT_EDITOR.HEADINGS.NORMAL_TEXT",Q.classes=[],Q.filters={community:void 0},Q.isSuggestedMeetingLoading=!1,Q.listCommunities=[],Q.pendingCommunity=void 0,Q.dateFormat="YYYY-MM-DD[T]HH:mm:ss.SSS",Q.is={saving:!1},Q.isSameOrigin="app.front.community"===n.current.name,Q.isConnectedUserAdmin=!1,Q.isUserAdmin=!1,Q.suggestedMeetingTimes=[],Q.postDate=void 0,Q.postLang=x.getLang("current"),Q.postTypes=void 0,Q.saveButtonLabel=x.translate("POST"),Q.user=void 0,Q.keyPrefix="community-new-post",Q.keys={contentPicker:"".concat(Q.keyPrefix,"-content-picker"),newPostDialog:"".concat(Q.keyPrefix,"-dialog")},Q.dialogSettings={files:{isOpen:!1,key:"".concat(Q.keyPrefix,"-file-picker")},imageInsert:{images:[],isOpen:!1,key:"".concat(Q.keyPrefix,"-imageInsert-picker")},images:{isOpen:!1,key:"".concat(Q.keyPrefix,"-image-picker")},links:{isOpen:!1,key:"".concat(Q.keyPrefix,"-add-link-dialog")}},Q.isPreviewLoading=!1,Q.is={searchLoading:!1},Q.postType=void 0,Q.textEditorControl={},Q.times=[],Q.editorDisplayOption={displayStyleButton:!1,displayViewSwitch:!1},Q.community=void 0,Q.datePickerIds={end:Object(v.f)(),start:Object(v.f)()},Q.userRights={admin:!1,editor:!1,isAuthor:!1},Q.inlineImages=[],Q.wrexEditorRef=null,Q.wrexValue=null,Q.wrexChangeId=null,Q.wrexImageInsertionPoint=null,Q.wrexOnChange=function(e){Q.wrexEditorRef=e,Q.wrexChangeId=Math.random()},Q.titlePlaceholder=Z.default,Q.ieCompatibilityModeActive=Object(f.a)()||Object(g.a)(),Q.ieContentMode="edit",Q.iePostContent="",Q.ieOnChange=function(e){Q.iePostContent=e},Q.ActivePost=a,Q.Community=o,Q.Config=h,Q.Features=O,Q.LsTextEditor=D,Q.LsTextEditorMarkdown=R,Q.LsDatePickerService=A,Q.LxDialogService=k,Q.Post=M,Q.Translation=x,Q.User=W,Q.Upload=B,Q.User=W,Q.Utils=Y,Q.changePostType=function(e){var t,n=S()(e,"value");angular.isUndefined(n)||angular.isUndefined(Q.postTypes[n])||(Q.newPost.postType=n,Q.postType=e,Q.titlePlaceholder=(t=Q.newPost.postType,Z[t]||Z.default),n===o.availablePostTypes.EVENT.value&&K())},Q.debouncedCommunitySearch=y()(z,500),Q.debouncedFindUrls=y()(Y.findUrls,500),Q.findUrlsCallback=function(e,n){if(!angular.isUndefinedOrEmpty(e)){var r=new RegExp("!\\[[^\\]]*?\\]\\((\\w+)?://".concat(Object(v.c)(e),"\\)"));angular.isDefinedAndFilled(n)&&n.match(r)||t.$broadcast("attachments__get-preview",e)}},Q.getClasses=function(){return Q.classes},Q.formatDate=function(e,t){t.dateFormatted=j()(e).locale(Q.postLang).format("ll"),O.hasFeature("microsoft")&&W.isMicrosoft()&&(t.date=j()("".concat(t.dateFormatted," [at] ").concat(t.timeFormated),x.translate("DATE_FORMAT_COMPLETE")),H())},Q.onFocusField=function(){-1===Q.classes.indexOf("community-new-post-dialog--focused")&&Q.classes.push("community-new-post-dialog--focused")},Q.handleTagzChange=function(e){angular.isDefined(e)&&(Q.newPost.tagz=s()(e))},Q.onUploadSuccess=function(e){B.onFileUploadSuccess(e,o.getCurrent(),Q.newPost,!0,Q.dialogSettings,Q.pasteDropFilesEnd)},Q.pasteDropFilesEnd=function(e){t.$broadcast("attachments__paste-drop-files-end",e)},Q.selectCommunity=function(e){o.get({uid:e},(function(e){Q.setCommunity(e)}),Y.displayServerError,void 0,void 0,!1)},Q.setCommunity=function(e){var t=$.store.dispatch;if(t(p.a.setEditedPost({images:[],files:[],links:[],title:"",tagsDetails:[],postStatusDetails:{},eventStartDate:void 0,eventEndDate:void 0,uid:"",mentions:[],content:[{type:"body",children:[{text:""}]}],postType:"DEFAULT",externalKey:e.id,instance:e.instance,availableCategories:e.tagsDetails,parentContentDetails:{postTypes:e.postTypes,postStatuses:e.postStatuses,slug:e.slug,type:e.type,securedRepository:null==e?void 0:e.securedRepository}})),t(p.a.openDialog()),k.close(Q.keys.newPostDialog),angular.isDefined(e)){Q.community=e,Q.postTypes=L()(o.availablePostTypes,Q.community.postTypes),angular.isUndefinedOrEmpty(S()(Q.newPost,"postType"))&&(angular.isUndefined(Q.newPost)&&V(),Q.postType=o.getFirstAvailablePostTypes(Q.postTypes),Q.newPost.postType=Q.postType.value);var n=W.getConnected(),r=o.isUserAdmin(Q.community,n);Q.postType=o.getFirstAvailablePostTypes(Q.postTypes),Q.newPost.postType=S()(Q.postType,"value",o.availablePostTypes.DEFAULT.value),Q.userRights.admin=r,Q.userRights.isAuthor=S()(Q.newPost,"authorDetails.uid")&&S()(n,"uid")===Q.newPost.authorDetails.uid,Q.userRights.editor=G.isUserAllowed("COMMUNITY_POST_EDIT"),Q.newPost.parentContentDetails=e,Q.isConnectedUserAdmin=r,Q.isUserAdmin=o.isUserAdmin(Q.community,Q.user),Q.specialMentions={},Q.specialMentions[e.communityFeedKey]=D.mentionAllKeywords}},Q.setSuggestedTime=function(e){Q.eventStartDate.date=j()(e.startDate),Q.eventStartDate.dateFormatted=Q.eventStartDate.date.format(x.translate("DATE_FORMAT")),Q.eventStartDate.timeFormated=Q.eventStartDate.date.format(x.translate("HOUR_FORMAT")),Q.eventEndDate.date=j()(e.endDate),Q.eventEndDate.dateFormatted=Q.eventEndDate.date.format(x.translate("DATE_FORMAT")),Q.eventEndDate.timeFormated=Q.eventEndDate.date.format(x.translate("HOUR_FORMAT"))},Q.setTime=function(e,t){angular.isUndefined(e)||(e.timeFormated=t,O.hasFeature("microsoft")&&W.isMicrosoft()&&(e.date=j()("".concat(e.dateFormatted," [at] ").concat(e.timeFormated),x.translate("DATE_FORMAT_COMPLETE")),H()))},Q.submitPost=function(){if(!Q.is.saving){if(Q.ieCompatibilityModeActive||(Q.userMentioned=Object(P.a)(Q.wrexEditorRef,Q.wrexEditorRef.children.length)),Q.is.saving=!0,angular.isUndefinedOrEmpty(S()(Q.newPost.parentContentDetails,"id")))return F.error(x.translate("COMMUNITY_NOT_SELECTED")),void(Q.is.saving=!1);if(Q.newPost.postType===o.availablePostTypes.EVENT.value){if(angular.forEach(["eventStartDate","eventEndDate"],(function(e){var t=j()(Q[e].date).format("YYYY-MM-DD"),n=j()(Q[e].timeFormated,j()().locale(Q.postLang).localeData().longDateFormat("LT")).locale(Q.postLang).format("HH:mm:00.000000");Q.newPost[e]=j()("".concat(t,"T").concat(n)).utc().format(Q.dateFormat)})),!j()(Q.newPost.eventEndDate).isAfter(Q.newPost.eventStartDate))return F.error(x.translate("COMMUNITY_NEW_POST_INVALID_DATES")),void(Q.is.saving=!1);if(!x.hasTranslations(Q.newPost.title,!0))return F.error(x.translate("COMMUNITY_NEW_POST_TITLE_REQUIRED")),void(Q.is.saving=!1)}if(angular.isUndefined(Q.newPost.content)&&(Q.newPost.content={}),Q.ieCompatibilityModeActive?Q.newPost.content[Q.postLang]=Q.iePostContent:Q.newPost.content[Q.postLang]=Object(m.b)(Q.wrexEditorRef.children),!x.hasTranslations(Q.newPost.content,!0)&&angular.isUndefinedOrEmpty(Q.currentAttachmentType))return F.error(x.translate("COMMUNITY_NEW_POST_DESCRIPTION_REQUIRED")),void(Q.is.saving=!1);angular.extend(Q.newPost,{customer:E.getCustomerId(),instance:T.getCurrentInstanceId(),type:h.AVAILABLE_CONTENT_TYPES.POST}),angular.isDefinedAndFilled(Q.userMentioned)&&(Q.newPost.mentions=_()(Q.userMentioned,"id")),angular.isDefined(Q.feedMentioned)?Q.newPost.mentionsFeedKeys=_()(Q.feedMentioned,"id"):Q.newPost.mentionsFeedKeys=[],M.save(Q.newPost,(function(t){M.setCurrent(t),e.$broadcast("community__post-saved",t),Q.is.saving=!1,k.close(Q.keys.newPostDialog);var n=!0,r=b()(T.getProperty(h.INSTANCE_PROPERTIES.SOCIAL_SETTINGS),(function(e){return"multiposting_allowed"===e.name}));r&&(n=r.enable),t.canShare&&n?F.success(x.translate("FRONT.COMMUNITY.NEW_POST.PUBLISHED"),x.translate("FRONT.COMMUNITY.POST.ACTION.SHARE"),(function(){return e.$broadcast("community-multi-select__open",{post:t})})):F.success(x.translate("FRONT.COMMUNITY.NEW_POST.PUBLISHED")),o.goTo(t.parentContentDetails,!0)}),(function(e){Q.is.saving=!1,Object(u.b)($.store.getState(),e)?$.store.dispatch(Object(u.a)(e)):Object(d.b)($.store.getState(),e)?$.store.dispatch(Object(d.a)(e)):Y.displayServerError(e)}),"community-".concat(Q.newPost.parentContentDetails.id))}},Q.openImagePicker=function(){var e,t,n=Q.dialogSettings.imageInsert;n.isOpen=!0,Q.wrexImageInsertionPoint=null===(e=Q.wrexEditorRef)||void 0===e||null===(t=e.selection)||void 0===t?void 0:t.focus,Y.waitForAndExecute("#".concat(n.key),r)},Q.closeDialog=function(){x.hasTranslations(Q.newPost.title,!0)||x.hasTranslations(Q.newPost.content,!0)||!angular.isUndefinedOrEmpty(Q.currentAttachmentType)?F.confirm(x.translate("GLOBAL.DISCARD_DRAFT"),x.translate("FRONT.COMMUNITY.POST.WARNING.UNFINISHED_EDIT"),{cancel:x.translate("GLOBAL.GO_BACK"),ok:x.translate("GLOBAL.DISCARD")},(function(e){e&&k.close(Q.keys.newPostDialog)})):k.close(Q.keys.newPostDialog)},Q.toggleIEPreviewMode=function(){Q.ieContentMode="edit"===Q.ieContentMode?"preview":"edit"},t.$on("attachments__preview-loading-update",(function(e,t){Q.isPreviewLoading=t})),t.$on("ls-rich-text-editor__movement",(function(e,t){Q.currentHeading=t.prefixMode})),t.$on("create-new-post__open",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=$.store.dispatch;X=angular.isDefinedAndFilled(T.getInstance().langs)?T.getInstance().langs:x.getLang("current");var c=x.translate(n.content);angular.isDefinedAndFilled(c)&&(t=c),angular.isDefinedAndFilled(o)&&(t=o),r&&(Q.community=r,s(p.a.setEditedPost(i({postType:a,images:[],files:[],links:[],tagsDetails:[],postStatusDetails:{},uid:"",mentions:[]},n,{eventStartDate:n.eventStartDate?j.a.utc(n.eventStartDate).local().format(N.c):void 0,eventEndDate:n.eventEndDate?j.a.utc(n.eventEndDate).local().format(N.c):void 0,externalKey:r.id,instance:r.instance,content:angular.isUndefinedOrEmpty(t)?J:Object(m.a)(t),availableCategories:r.tagsDetails,parentContentDetails:{postTypes:r.postTypes,postStatuses:r.postStatuses,slug:r.slug,type:r.type,securedRepository:r.securedRepository},title:angular.isUndefinedOrEmpty(n.title)?"":x.translate(n.title)}))),s(p.a.openDialog()))})),t.$on("lx-dialog__open-end",(function(e,t){Q.keys.newPostDialog===t&&angular.element("#".concat(t," textarea")).focus()})),t.$on("lx-dialog__open-start",(function(e,t){Q.community=void 0,Q.keys.newPostDialog===t&&angular.isUndefinedOrEmpty(S()(o.getCurrent(),"uid"))&&z({query:Q.filters.community},void 0,void 0,Q.LIST_KEY)})),t.$on("lx-dialog__close-end",(function(e,t){Q.keys.newPostDialog===t&&V()})),t.$on("abstract-picker__close-end",(function(e,t){t===Q.dialogSettings.imageInsert.key&&function(){var e=Q.dialogSettings.imageInsert;e.isOpen=!1;for(var t,n=x.getLang("current");t=e.images.pop();){var r,i=b()(t.croppedContent,{lang:n})||C()(t.croppedContent),a=i||b()(t.content,{lang:n})||C()(t.content),o=a.servingUrl||a.url;null===(r=Q.wrexEditorRef)||void 0===r||r.insertImage({src:o,alt:a.name},Q.wrexImageInsertionPoint)}Q.wrexImageInsertionPoint=null}()}))}n.r(t),n.d(t,"CommunityNewPostController",(function(){return a}));var o=n(19),s=n.n(o),c=n(3),l=n.n(c),u=n(454),d=n(462),p=n(119),f=n(377),g=n(501),m=n(327),v=(n(489),n(31)),h=n(71),y=n.n(h),E=n(21),b=n.n(E),O=n(51),C=n.n(O),T=n(4),S=n.n(T),I=n(28),_=n.n(I),A=n(33),w=n.n(A),D=n(125),L=n.n(D),P=n(421),N=n(34),R=n(41),j=n.n(R);a.$inject=["$rootScope","$scope","$state","AbstractPicker","ActivePost","Community","CommunityConstant","Config","Customer","Features","Instance","LegacySearch","LsDatePickerService","LsTextEditor","LsTextEditorMarkdown","LxDialogService","LxNotificationService","MediaConstant","Post","Translation","ReduxStore","Upload","User","UserAccess","Utils"],angular.module("Controllers").controller("CommunityNewPostController",a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){!function(){function e(e,t){var n=this;n.DIALOG_ID="post-visibility-dialog",n.FIELDS=["members","title","content","follow"],n.post=void 0,n.postVisibilityCommunitiesList=[];e.$on("post-visibility-dialog__open",(function(e,r){n.post=r.post,n.currentContextCommunityId=r.currentContextCommunityId,n.isSharedInPrivateCommunities=r.isSharedInPrivateCommunities,t.waitForAndExecute("#".concat(n.DIALOG_ID))})),e.$on("lx-dialog__close-end",(function(e,t){t!==n.DIALOG_ID&&(n.postVisibilityCommunitiesList=[],n.postVisibilityCommunitiesCount=0)})),e.$on("lx-dialog__open-start",(function(e,t){t===n.DIALOG_ID&&n.init()})),n.init=function(){n.postVisibilityCommunitiesList=n.post.visibleInCommunitiesDetails.map((function(e){return e.postedTo})).filter((function(e){return!n.currentContextCommunityId||e.uid!==n.currentContextCommunityId})),n.postVisibilityCommunitiesCount=n.currentContextCommunityId?n.post.visibleInCommunitiesCount-1:n.post.visibleInCommunitiesCount}}e.$inject=["$scope","Utils"],angular.module("Controllers").controller("CommunityPostVisibilityListController",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r){var i=this;i.CommunityRequest=n,i.addRequestUserToCommunity=function(){var e=t.getCurrent(r.getListKey());i.request.communityKey===e.id&&(e.usersDetails=e.usersDetails||[],e.usersDetails.push(i.request.userDetails),angular.isUndefined(e.userKeys)&&(e.userKeys=[]),e.userKeys.push(i.request.userKey),angular.isFunction(i.onApprove)&&i.onApprove())},angular.isUndefinedOrEmpty(i.listKey)&&angular.isDefinedAndFilled(e.get(i.request,"communityKey"))&&(i.listKey="community-requests-"+i.request.communityKey)}t.$inject=["Community","CommunityRequest","ModuleAdmin"],angular.module("Directives").directive("lsCommunityRequest",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{listKey:"=?lsListKey",onApprove:"&?lsOnApprove",onRefuse:"&?lsOnRefuse",request:"=lsRequest"},templateUrl:"/client/front-office/modules/communities/community/views/community-request.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/community/request/:methodKey",{},{approve:{isArray:!1,method:"POST",params:{methodKey:"approve"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},reject:{isArray:!1,method:"POST",params:{methodKey:"reject"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CommunityRequestFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){function a(t,n){if(!angular.isUndefinedOrEmpty(t)){var r=o.displayList(n),i=e.findIndex(r,{uid:t});i>-1&&r.splice(i,1)}}var o=r.createLumsitesBaseService(n,{autoInit:!1,objectIdentifier:"uid"});return o.STATUS_TYPES={ACCEPTED:"accepted",PENDING:"pending",REJECTED:"rejected"},o.approveRequest=function(e,t,n,r){(!angular.isUndefinedOrEmpty(e)||o.isApproving||o.isRefusing)&&(t=t||angular.noop,n=n||i.displayServerError,o.isApproving=!0,o.Api.approve({uid:e},(function(n){o.isApproving=!1,a(e,r),t(n)}),(function(e){o.isApproving=!1,n(e)})))},o.createRequest=function(e,n,r){e=e||t.getCurrent().uid,angular.isUndefinedOrEmpty(e)||(n=n||angular.noop,r=r||i.displayServerError,o.save({communityKey:e},n,r))},o.rejectRequest=function(e,t,n,r){(!angular.isUndefinedOrEmpty(e)||o.isRefusing||o.isApproving)&&(t=t||angular.noop,n=n||i.displayServerError,o.isRefusing=!0,o.Api.reject({uid:e},(function(n){o.isRefusing=!1,a(e,r),t(n)}),(function(e){o.isRefusing=!1,n(e)})))},o}t.$inject=["Community","CommunityRequestFactory","LumsitesBaseService","Utils"],angular.module("Services").service("CommunityRequest",t)}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i){function a(e){var n={properties:{isCollapsible:!1},type:"widget",uuid:Object(t.b)(),widgetType:r.WIDGET_TYPES[e]};return angular.fastCopy(angular.extend(angular.fastCopy(n),c[e]))}function o(e){e=Boolean(e);var n=[a("FEATURED_IMAGE"),a("COMMUNITY_MEMBERS"),a("TITLE"),a("COMMUNITY_INTRO"),a("META_SOCIAL"),a("COMMUNITY_NAVIGATION")];return e&&n.push(a("CONTENT_FILTER")),{components:n,properties:{paddingBottom:12,paddingLeft:24,paddingRight:24,paddingTop:12,plain:!0,sticky:!0},type:"cell",uuid:Object(t.b)(),width:3}}var s=this,c={CALENDAR:{isMainWidget:!0,properties:{currentCommunityCalendar:!0,displayToolbar:!0,endTime:19,startTime:8,visualizationMode:"week",isCollapsible:!1}},COMMUNITY_INTRO:{properties:{marginTop:0,isCollapsible:!1}},COMMUNITY_NAVIGATION:{title:{},properties:{isCollapsible:!1}},CONTENT_FILTER:{properties:{hideSubheader:!0,linkedToLocalWidget:!0,viewMode:"condensed",isCollapsible:!1},title:{}},FEATURED_IMAGE:{properties:{marginLeft:-24,marginRight:-24,marginTop:-12,isCollapsible:!1}},FILE_LIST:{properties:{canManageFiles:!0,currentCommunityDrive:!0,displayType:"community-folder",isCollapsible:!1}},POST_DETAILS:{isMainWidget:!0,properties:{isCollapsible:!1}},POST_LIST:{properties:{displayType:"current",isCollapsible:!1,isContributionFieldDisplayed:!0}}};return s.origin=void 0,s.getDefaultPageTemplate=function(e){var r;switch(e){case n.availableViews.post.id:r={components:[{cells:[o(),{components:[a("POST_DETAILS")],type:"cell",uuid:Object(t.b)(),width:9}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1};break;case n.availableViews.calendar.id:r={components:[{cells:[o(),{components:[a("CALENDAR")],type:"cell",uuid:Object(t.b)(),width:9}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1};break;case n.availableViews.media.id:r={components:[{cells:[o(),{components:[a("FILE_LIST")],type:"cell",uuid:Object(t.b)(),width:9}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1};break;case n.availableViews.dashboard.id:r={components:[{cells:[o(),{components:[],type:"cell",uuid:Object(t.b)(),width:9}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1};break;case n.availableViews.posts.id:default:r=function(){var e=a("POST_LIST");e.isMainWidget=!0,e.properties.viewMode="cascade",e.properties.viewModeVariant="ungroup",e.properties.columnCount=2;var n=a("POST_LIST");return n.properties.pinnedOnly=!0,n.properties.isContributionFieldDisplayed=!1,n.properties.viewMode="grid",n.properties.viewModeVariant="ungroup",n.properties.itemsPerLine=3,n.properties.slideshowEnabled=!0,{components:[{cells:[o(!0),{components:[n,e],type:"cell",uuid:Object(t.b)(),width:9}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1}}()}return r.functionalInnerId=e,r},s.getTemplateByName=function(t,n){return e.find(t.templates,{functionalInnerId:n})},s.reset=function(e){s.origin=void 0,e&&(e.template={})},s.setAsCurrent=function(e,t){s.orig=t,angular.isUndefined(e)&&t||(e.template=s.getTemplateByName(e,s.orig)||{})},s.swapBack=function(e){angular.isDefined(e)&&(s.updateTemplate(e),s.reset(e))},s.updateTemplate=function(t){var n=e.findIndex(t.templates,{functionalInnerId:t.template.functionalInnerId});n>-1&&(t.templates[n]=t.template)},s}n.$inject=["Community","InitialSettings","User"],angular.module("Services").service("CommunityTemplate",n)}()}.call(this,n(38))},function(e,t){!function(){"use strict";var e={adminKeys:!0,adminsDetails:!0,author:!0,authorDetails:!0,calendarId:!0,calendarSettings:!0,canContribute:!0,canMarkRelevant:!0,chat:!0,communityFeedKey:!0,communityType:!0,customer:!0,description:!0,driveFolder:!0,editors:!0,feedKeys:!0,hasCalendarId:!0,hasDriveFolder:!0,header:!0,headerDetails:!0,id:!0,instance:!0,postStatuses:!0,postTypes:!0,privacy:!0,properties:!0,publishers:!0,slug:!0,securedRepository:!0,subscription:!0,tagsDetails:!0,tagz:!0,template:!0,templates:!0,thumbnail:!0,title:!0,type:!0,uid:!0,useChat:!0,userContent:!0,userKeys:!0,usersDetails:!0,version:!0,workspace:!0},t={PROJECTION:{GET:e,LIST:{items:e},PICKER:{items:{customer:!0,description:!0,editors:!0,feedKeys:!0,id:!0,instance:!0,privacy:!0,properties:!0,publishers:!0,slug:!0,thumbnail:!0,title:!0,type:!0,uid:!0,userKeys:!0}},USER_LIST:{items:{apiProfile:!0,customProfile:!0,customer:!0,email:!0,firstName:!0,fullName:!0,id:!0,lastName:!0,primaryEmail:!0,profilePicture:!0,profilePictureUrl:!0,profileStatus:!0,uid:!0}}}};angular.module("Constants").constant("CommunityConstant",t)}()},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,o,c,p,f,g,m,v,h,y,E,b,O,C,T,S,I,_,A,w){function D(){k=c.getAvailableViews(c.getCurrent())}function L(){C.edit(c.getCurrent(),"admin-settings-dialog-".concat(c.getCurrent().uid))}var P,N,R=this,j={action:"COMMUNITY_PUBLISH",maxResults:5,tags:[],type:[g.AVAILABLE_CONTENT_TYPES.POST]},k=[];R.contentFilterWidget={component:{properties:{community:[c.getCurrent().uid],hideSubheader:!0,linkedToLocalWidget:!0,linkedWidget:{properties:{widgetType:b.WIDGET_TYPES.POST_LIST}},style:{content:{paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0},global:{boxShadow:0}}},uuid:"community-filter-".concat(c.getCurrent().uid),widgetType:b.WIDGET_TYPES.CONTENT_FILTER}},R.isCallInProgress=!1,R.isFabOpen=!1,R.isFiltering=!1,R.newContentAvailable=!1,R.currentTemplate=void 0,R.chatPosition=d.c.STICKY,R.chatIsConfigured=!1,R.isCallInProgress=!1,R.isFabOpen=!1,R.isFiltering=!1,R.newContentAvailable=!1,R.currentTemplate=void 0,R.Community=c,R.Config=g,R.ConfigTheme=m,R.Content=h,R.Features=y,R.Header=E,R.Layout=O,R.ModuleAdmin=C,R.Post=S,R.Translation=I,R.User=_,R.Utils=A,R.getMarginTop=function(){return A.getMarginTop(E,y,O)},R.addNewPost=function(e,n,r){!n||"desk"===O.breakpoint||R.isFabOpen?(t.$broadcast("create-new-post__open",void 0,c.getCurrent(),e,r),R.isFabOpen=!1):R.isFabOpen=!R.isFabOpen},R.getCommunityClass=function(){var e=[],t=c.getCurrent().properties||{};return angular.isDefinedAndFilled(t.class)&&e.push(T.getModuleClass(t.class)),e},n.$watch((function(){return a()(c.getCurrent(),"hasCalendarId")}),D),n.$watch((function(){return a()(c.getCurrent(),"hasDriveFolder")}),D),n.$on("$locationChangeSuccess",(function(){"#edit-community-dialog"===o.location.hash&&L()})),_.isGod()&&n.$on("$destroy",(function(){angular.isDefinedAndFilled(t.COMMUNITY_ID)&&delete t.COMMUNITY_ID})),n.$on("$stateChangeStart",(function(){C.isEditing.community&&(p.resetContentForm(),C.isEditing.community=!1,o.location.hash="")})),n.$on("community__post-saved",(function(e,t){var r=h.getCurrent();r&&r.id===t.uid&&h.setCurrent(t),t.postType===b.POST_TYPES.EVENT&&n.$broadcast("widget-calendar-settings")})),n.$on("community__post-moved",(function(e,t){var n=S.displayList(R.listKeyPost);A.reject(n,{uid:t.uid})})),n.$on("community__switch-view",(function(e,t){angular.isUndefinedOrEmpty(t)||t===R.currentView||(R.currentView=t)})),n.$on("admin-community-save-success",(function(e,t){t===c.getCurrent().id&&c.setCurrent(c.getCurrent(P))})),n.$on("lx-dialog__close-end",(function(e,t){t===C.dialogKeys.community&&(R.isFabOpen=!1,p.resetContentForm(),C.isEditing.community=!1,o.location.hash="")})),t.$on(u.b,(function(){L(),window.location.hash=""})),t.$on(u.d,(function(){c.openAnalyticsDashboard()})),n.$on("$destroy",(function(){"app.front.community"!==r.current.name&&c.setCurrent(void 0)})),N=c.getCurrent(),angular.isUndefinedOrEmpty(N)||(angular.isUndefined(N.postTypes)&&(N.postTypes=c.defaultPostTypes),R.postTypesConfig=s()(c.availablePostTypes,c.getCurrent().postTypes),R.defaultPostType=c.getFirstAvailablePostTypes(R.postTypesConfig),R.postTypesConfig=l()(R.postTypesConfig,{value:R.defaultPostType.value}),angular.extend(j,{contentId:N.uid,externalKey:N.uid}),R.listKeyPost="community-".concat(N.uid),P="admin-settings-dialog-".concat(N.uid),h.setCurrent(c.getCurrent()),D(),R.currentView=c.getDefaultLandingView(i.view,k),function(t){R.currentTemplate=f.getTemplateByName(h.getCurrent(),t),h.getCurrent().template=R.currentTemplate;var n=v.getElementList(h.getCurrent(),"widget","isGlobal",!0);angular.forEach(n,(function(t){var n=e.find(w.getGlobalWidgets(),{id:t.id});if(angular.isDefinedAndFilled(n)){var r=t.uuid;A.swapObject(t,angular.fastCopy(n)),t.uuid=r}else t.isGlobal=!1,delete t.id,delete t.instance,delete t.customer}))}(R.currentView),R.userCanWrite=c.isWriteable(),c.setAllNotificationsAsRead(R.currentView),N&&N.chat&&(R.chatIsConfigured=!0),_.isGod()&&(t.COMMUNITY_ID=N.uid),"#edit-community-dialog"===o.location.hash&&L())}n.d(t,"CommunityController",(function(){return r}));var i=n(4),a=n.n(i),o=n(125),s=n.n(o),c=n(227),l=n.n(c),u=n(317),d=n(48);r.$inject=["$rootScope","$scope","$state","$stateParams","$window","Community","CommunityForm","CommunityTemplate","Config","ConfigTheme","ContentTemplate","Content","Features","Header","InitialSettings","Layout","ModuleAdmin","ModuleFront","Post","Translation","User","Utils","Widget"],angular.module("Controllers").controller("CommunityController",r)}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/community/:methodKey"),{},{delete:{isArray:!1,method:"delete",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},follow:{isArray:!1,method:"POST",params:{methodKey:"follow"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/community/:id/:methodKey")},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},getUserList:{isArray:!1,method:"POST",params:{methodKey:"list"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/community/user/:methodKey")},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},listByType:{isArray:!1,method:"GET",params:{methodKey:"list"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/community/:communityType/:methodKey")},planMeeting:{isArray:!1,method:"GET",params:{methodKey:"plan-meeting"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},saveLayout:{isArray:!1,method:"POST",params:{methodKey:"save"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/community/layout/:methodKey")},search:{isArray:!1,method:"POST",url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/search/community/")},unfollow:{isArray:!1,method:"DELETE",params:{methodKey:"unfollow"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/community/:id/:methodKey")}})}n.r(t),n.d(t,"CommunityFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("CommunityFactory",r)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o,c,u,p,f,g,v,y,b,C,S,_){function w(e,t,n,r,i){t=t||angular.noop,n=n||angular.noop;var a=angular.extend({},{customerId:c.getCustomerId(),instanceId:[f.getCurrentInstanceId()],lang:C.getLang("current"),maxResults:8},e);F.filterize(a,t,n,r,i)}function L(e,t){return R.apply(this,arguments)}function R(){return R=d()(s.a.mark((function e(n,a){var o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.search(n).$promise,n.cursor||F.initList(a,null,[],!1,void 0),$[a]=i({},$[a],{cursor:null,loading:!0,params:n}),c=F.getList(void 0,void 0,a),e.prev=4,e.next=7,o;case 7:u=e.sent,angular.isDefinedAndFilled(u.items)&&c.push.apply(c,l()(u.items)),t((function(){return F.displayList(a)})),$[a].cursor=u.cursor,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(4),e.t0;case 16:return e.prev=16,$[a].loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,13,16,19]])}))),R.apply(this,arguments)}function j(e,t){return e in $&&"search"===t?$[e].loading:g.proto.prototype.isCallInProgress.call(F,e,t)}function k(e){return e in $?!j(e,"search")&&Boolean($[e].cursor):g.proto.prototype.hasMore.call(F,e)}var F=n.createAbstractContentService(r),U={calendar:{icon:"calendar",id:"calendar",label:"FRONT.COMMUNITY.CALENDAR",order:4},dashboard:{icon:"home-outline",id:"dashboard",label:"FRONT.COMMUNITY.DASHBOARD",order:0},media:{icon:"google-drive",id:"media",label:"FRONT.COMMUNITY.DRIVE",order:3},post:{icon:"comment-text",id:"post",label:"FRONT.COMMUNITY.POST_DETAILS",order:2},posts:{icon:"comment-text-outline",id:"posts",label:"FRONT.COMMUNITY.POSTS",order:1}},M=[U.post.id,U.posts.id],x=[U.dashboard.id,U.posts.id],$={};return F.availablePostTypes={DEFAULT:{icon:"message-text-outline",value:void 0},EVENT:{icon:"calendar",value:void 0},IDEA:{icon:"lightbulb-outline",value:void 0},QUESTION:{icon:"help",value:void 0}},F.availableViews=U,F.defaultPostTypes=a.DEFAULT_POST_TYPES,F.privacyTypes={descriptionOnly:"description_only",open:"open",readOnly:"read_only",restricted:"restricted"},F.debouncedListAvailable=m()(w,500),F.categoryCreate=function(){return{$tempId:Object(N.b)(),instance:f.getCurrentInstanceId(),kind:o.TAG_TYPE.COMMUNITY,name:{},status:"LIVE"}},F.displayNextPage=function(e,t){if(e in $&&k(e)){var n=$[e],r=n.cursor,a=n.params;L(i({},a,{cursor:r}),e)}g.proto.prototype.displayNextPage.call(F,e,t)},F.editTemplate=function(t,n){var r={contentType:p.CONTENT_TYPES.COMMUNITY,key:t,subTemplate:n};n===U.post.id&&e.params.identifier&&(r.postId=e.params.identifier),e.go("app.front.content-edit",r)},F.getAvailableViews=function(e){if(!angular.isUndefinedOrEmpty(e)){var t=angular.copy(M),n=!F.isReadOnly(e)||F.isWriteable(e);e.hasCalendarId&&n?t.push(U.calendar.id):t=P()(t,U.calendar.id),e.hasDriveFolder&&n?t.push(U.media.id):t=P()(t,U.media.id);var r=E()(e,"properties",{});return!0===r.hasDashboard?t.push(U.dashboard.id):t=P()(t,U.dashboard.id),t}},F.getDefaultLandingView=function(e,t){var n=angular.copy(x);return angular.isDefinedAndFilled(e)&&n.unshift(e),h()(I()(n,t))},F.getFirstAvailablePostTypes=function(e,t){t=t||E()(e,"DEFAULT.value"),e=angular.isObject(e)?Object.keys(e):e;var n=O()(F.availablePostTypes,t)?t:h()(e);return E()(F.availablePostTypes,n)},F.getSuggestedMeetings=function(e){return r.planMeeting(i({},e)).$promise},F.getUserList=function(e,t,n,r,i){return g.proto.prototype.filterize.call(F,e,t,n,r,i,"getUserList")},F.getUserListFeedKeys=function(e){if(angular.isUndefinedOrEmpty(e))return[];if(e.privacy===F.privacyTypes.open){var t=f.getInstance(),n=t.restrictToFeeds;return angular.isDefinedAndFilled(n)?n:[u.ALL.id]}var r=P()(e.feedKeys||[],u.ALL.id),i=e.editors||[];return D()(r,i)},F.goTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!angular.isUndefinedOrEmpty(e)){var n=e.instance!==f.getCurrentInstanceId();v.goTo("app.front.community",e.id,e.instance,e.slug,t?-1:void 0,o.AVAILABLE_CONTENT_TYPES.COMMUNITY,n)}},F.hasMore=k,F.isCallInProgress=j,F.isDescriptionOnly=function(e){return e=e||F.getCurrent(),E()(e,"privacy")===F.privacyTypes.descriptionOnly},F.isEditableBy=function(e,t){return t=t||F.getCurrent(),!angular.isUndefinedOrEmpty([t,e],"some")&&(e.isSuperAdmin||S.isInstanceAdmin()||T()(t.adminKeys,e.id)||S.hasSubscriptions(t.editors))},F.isReadOnly=function(e){return e=e||F.getCurrent(),E()(e,"privacy")===F.privacyTypes.readOnly||E()(e,"privacy")===F.privacyTypes.descriptionOnly},F.isOneDriveCommunity=function(e){return e=e||F.getCurrent(),!angular.isUndefinedOrEmpty(e)&&(angular.isDefinedAndFilled(e.driveFolder)&&e.driveFolder.source===y.PROVIDERS.microsoft||angular.isUndefinedOrEmpty(e.driveFolder)&&S.isMicrosoft())},F.isOutlookCommunity=function(e){return e=e||F.getCurrent(),!angular.isUndefinedOrEmpty(e)&&("microsoft"===e.calendarIdpType||angular.isUndefinedOrEmpty(e.calendarIdpType)&&S.isMicrosoft()&&(e.createCalendar||angular.isDefinedAndFilled(e.calendarId)))},F.isUserAdmin=function(e,t){return!angular.isUndefinedOrEmpty([e,t],"some")&&(angular.isDefinedAndFilled(e.editors)?Boolean(I()(e.editors,A()(t.subscriptions,"feed")).length):!(!angular.isDefined(t)||!O()(e,"adminKeys"))&&T()(e.adminKeys,t.id))},F.isWriteable=function(e){return e=e||F.getCurrent(),!angular.isUndefinedOrEmpty(e)&&e.canContribute},F.listAvailable=w,F.listCommunityByType=function(e,t,n,r){return g.proto.prototype.promiseFilterize.call(F,e,t,n,r)},F.openAnalyticsDashboard=function(){_.waitForAndExecute("#community-analytics-dashboard-".concat(F.getCurrent().uid))},F.saveLayout=function(e,t,n){angular.isUndefinedOrEmpty(e)||(t=t||angular.noop,n=n||angular.noop,delete e.userContent,r.saveLayout(e,(function(e){t(e)}),n))},F.search=L,F.setAllNotificationsAsRead=function(e){e===U.posts.id&&b.setAllAsRead(E()(F.getCurrent(),"uid",-1))},F.statusCreate=function(){return{title:{},uuid:Object(N.b)()}},F.tagToUid=function(e,t){t=t||angular.noop,angular.isDefined(e.uid)&&t(e.uid)},F.initService=function(){angular.forEach(F.availablePostTypes,(function(e,t){e.value=p.POST_TYPES[t]})),F.init()},F}n.r(t),n.d(t,"CommunityService",(function(){return a}));var o=n(6),s=n.n(o),c=n(19),l=n.n(c),u=n(10),d=n.n(u),p=n(3),f=n.n(p),g=n(71),m=n.n(g),v=n(51),h=n.n(v),y=n(4),E=n.n(y),b=n(356),O=n.n(b),C=n(17),T=n.n(C),S=n(157),I=n.n(S),_=n(28),A=n.n(_),w=n(167),D=n.n(w),L=n(106),P=n.n(L),N=n(35);a.$inject=["$state","$timeout","AbstractContent","CommunityFactory","CommunityWizardConfiguration","Config","Customer","Feed","InitialSettings","Instance","LumsitesBaseService","MainNav","MediaConstant","Notification","Translation","User","Utils"],angular.module("Services").service("Community",a)},function(e,t){var n=Object.prototype,r=n.hasOwnProperty;e.exports=function(e,t){return null!=e&&r.call(e,t)}},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,d,p,f,g){function m(){var e=n.getCurrent(d.getListKey());if(angular.isUndefinedOrEmpty(e))return v.followFor.disabled=!0,void(v.followFor.exceptions=[]);v.followFor.disabled="open"!==e.privacy&&angular.isUndefinedOrEmpty(e.publishers),v.followFor.exceptions=angular.fastCopy(e.subscribedFeedKeys)||[],"open"!==e.privacy&&(s()(e.publishers,o.ALL.id)||v.followFor.exceptions.push(o.ALL.id),s()(e.publishers,o.PUBLIC.id)||v.followFor.exceptions.push(o.PUBLIC.id))}var v=this;e("CommunityBuilderController",{$scope:v});var h=v.save;v.dialogId=d.dialogKeys.community,v.dialogWarningId="".concat(d.dialogKeys.community,"-warning"),v.dialogIdMsShare=d.dialogKeys.communityMsShare,v.canSeeFollowSettings=!1,v.followFor={disabled:!0,exceptions:[]},v.subscribedFeeds=[],v.ConfigTheme=r,v.Feed=o,v.Instance=c,v.Translation=p,v.initChild=function(){v.canSeeFollowSettings=(f.getConnected().isSuperAdmin||f.isInstanceAdmin())&&i.hasFeature("social"),v.init(),v.registerWatchers(t),function(){v.subscribedFeeds=[];var e=n.getCurrent(d.getListKey());angular.isUndefinedOrEmpty(a()(e,"subscribedFeedKeys"))||angular.forEach(e.subscribedFeedKeys,(function(e){o.getFeedById(e).then((function(e){v.subscribedFeeds.push(e)}))}))}(),m()},v.openEditCommunityDialog=function(){g.waitForAndExecute("#module-community-admin-dialog")},v.save=function(){var e=[v.optionsStepValidator(),v.permissionsStepValidator(),v.informationStepValidator()];e=l()(e,!0),angular.forEach(e,u.error),angular.isDefinedAndFilled(e)||h().then(void 0,(function(e){u.error(e)}))},t.$on("lx-dialog__open-end",(function(e,t){t===v.dialogId&&angular.isDefinedAndFilled(n.getCurrent(d.getListKey()))&&v.initChild()})),t.$watch("vm.activeTabIndex",(function(e){0===e&&m()}),!0)}n.r(t),n.d(t,"ModuleCommunityAdminDialogController",(function(){return r}));var i=n(4),a=n.n(i),o=n(17),s=n.n(o),c=n(106),l=n.n(c);r.$inject=["$controller","$scope","Community","ConfigTheme","Features","Feed","Instance","LxNotificationService","ModuleAdmin","Translation","User","Utils"],angular.module("Controllers").controller("ModuleCommunityAdminDialogController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o){var c=this;e("CommunityBuilderController",{$scope:c}),c.addedGroups=[],c.addedGroupIds=[],c.addedUsers=[],c.calendar={},c.dialogIdMsShare=i.dialogKeys.communityMsShare,c.privacy=void 0,c.removedGroups=[],c.removedGroupIds=[],c.removedUsers=[],c.Utils=o,c.getGroupMail=function(e){return s()(a()(e.groups),"group")},c.goToCalendar=function(){n.open("https://outlook.office.com/owa/?path=/calendar/view/Month","_blank")},c.hasMailGroups=function(e){return angular.isDefinedAndFilled(l()(e,"groups.group"))},t.$on("lx-dialog__open-start",(function(e,t,n){t===c.dialogIdMsShare&&(c.addedGroupIds=n.addedGroupIds,c.addedUsers=n.addedUsers,c.calendar=n.calendar,c.privacy=n.privacy,c.removedGroupIds=n.removedGroupIds,c.removedUsers=n.removedUsers,angular.isDefinedAndFilled(c.addedGroupIds)&&r.getMulti(c.addedGroupIds).then((function(e){c.addedGroups=e.items})),angular.isDefinedAndFilled(c.removedGroupIds)&&r.getMulti(c.removedGroupIds).then((function(e){c.removedGroups=e.items})))}))}n.r(t),n.d(t,"ModuleCommunityShareDialogController",(function(){return r}));var i=n(51),a=n.n(i),o=n(4),s=n.n(o),c=n(28),l=n.n(c);r.$inject=["$controller","$scope","$window","Feed","ModuleAdmin","Utils"],angular.module("Controllers").controller("ModuleCommunityShareDialogController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,d,p){function f(e){var r=e.query,a=e.postId,o=e.followingOnly,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a,u=arguments.length>3?arguments[3]:void 0;g.is.searchLoading=!0,void 0===a&&(a=g.post.uid),i.search(u,"communityList",{lang:d.getLang("current")||"en",postId:a,query:r,followingOnly:o},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.items,r=void 0===n?[]:n;t._services[u]._list=r,g.is.searchLoading=!1,c()}),(function(){g.is.searchLoading=!1,l()}),n.PROJECTION.PICKER)}var g=this;g.post={},g.is={searchLoading:!1,locked:!1},g.pendingCommunities=[],g.lockedCommunities=[],g.pendingCommunitiesMap={},g.LIST_KEY="community-list-key",g.FIELDS=["members","title","content"],g.is={saving:!1},g.classes=[],g.community=void 0,g.multiSelectCommunityId="multi-select-community-dialog",g.filters={community:void 0},g.filterFollowingOnly=!0;e.$on("lx-dialog__scroll-end",(function(e,n){g.multiSelectCommunityId===n&&t._services[g.LIST_KEY]._list&&t._services[g.LIST_KEY]._list.length>0&&!1===g.is.searchLoading&&(g.is.searchLoading=!0,i.nextPage(g.LIST_KEY,"communityList",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.items,r=void 0===n?[]:n;t._services[g.LIST_KEY]._list=t._services[g.LIST_KEY]._list.concat(r),g.is.searchLoading=!1}),(function(){g.is.searchLoading=!1})))})),e.$on("community-multi-select__open",(function(e,t){angular.isDefinedAndFilled(r.getInstance().langs)?r.getInstance().langs:d.getLang("current"),g.is.locked=!1,g.is.searchLoading=!1,g.pendingCommunitiesMap={},g.pendingCommunities=[],g.lockedCommunities=[],g.post=t.post,g.post.visibleInCommunitiesDetails&&g.post.visibleInCommunitiesDetails.forEach((function(e){g.lockedCommunities.push(e.postedTo.uid)})),p.waitForAndExecute("#".concat(g.multiSelectCommunityId))})),e.$on("community-multi-share__ended",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:args,n=t.success;n?o.close(g.multiSelectCommunityId):g.is.locked=!1})),e.$on("lx-dialog__open-start",(function(e,t){g.multiSelectCommunityId===t&&f({query:g.filters.community,postId:g.post.uid,followingOnly:g.filterFollowingOnly},void 0,void 0,g.LIST_KEY)})),g.getClasses=function(){return g.classes},g.requestComm=function(){return t.displayList(g.LIST_KEY)},g.selectCommunity=function(){g.is.locked=!0,c.store.dispatch(Object(u.f)(g.post.uid,g.pendingCommunities))},g.toggleCommunity=function(e){var t=l()(g.pendingCommunities,(function(t){return t===e.uid}));0===t.length?(g.pendingCommunities.push(e.uid),g.pendingCommunitiesMap[e.uid]=e):delete g.pendingCommunitiesMap[t[0]]},g.onSelectSearchScope=function(e){g.filterFollowingOnly!==e&&(g.filterFollowingOnly=e,f({query:g.filters.community,postId:g.post.uid,followingOnly:g.filterFollowingOnly},void 0,void 0,g.LIST_KEY))},g.debouncedCommunitySearch=a()(f,500)}n.r(t),n.d(t,"MultiSelectCommunitySelectorController",(function(){return r}));var i=n(71),a=n.n(i),o=(n(4),n(28),n(33)),s=n.n(o),c=(n(125),n(144)),l=n.n(c),u=(n(35),n(391));r.$inject=["$scope","Community","CommunityConstant","Instance","CommunitySearch","LxDialogService","ReduxStore","Translation","Utils"],angular.module("Controllers").controller("MultiSelectCommunitySelectorController",r)},,function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r){var i,a,o=this;o.User=r,o.requestCommunityAccess=function(){var t=e.get(o.entity,"uid");o.isRequestPending=!0,n.createRequest(t,void 0,(function(){o.isRequestPending=!1}))},i=r.getConnected().uid,a=e.get(o.entity,"uid"),o.listKey="community-request-list-"+i,function(r,i){i=i||e.get(t.getCurrent(),"uid"),angular.isUndefinedOrEmpty([i,r],"some")?o.isRequestPending=!1:n.get({communityId:i},(function(){o.isRequestPending=!0}),void 0,o.listKey)}(i,a)}t.$inject=["Community","CommunityRequest","User"],angular.module("Directives").directive("lsRequestButton",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{entity:"=lsEntity",size:"@?lsSize"},templateUrl:"/client/front-office/modules/communities/community/views/request-button.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,c,l){var u=this,d=!1;u.USER_LIST_KEY="community-user-",u.users=[],u.Community=r,u.InitialSettings=a,u.Utils=l,u.displayAllUsers=function(){n((function(){var t={methodName:"getUserList",params:{uid:u.community.uid},projection:i.PROJECTION.USER_LIST,serviceName:"Community",title:s.translate("COMMUNITY_USERS")};e.$broadcast("user-list-dialog__open",t)}))},t.$on("admin-community-save-success",(function(e,t){t===u.community.id&&(u.community=r.getCurrent(),u.init())})),t.$on("community-member-update",(function(e,t){t===u.USER_LIST_KEY&&d&&(u.users=r.displayList(u.USER_LIST_KEY),d=!1)})),u.init=function(){u.maxUserDisplay=u.maxUserDisplay||4,u.more=!angular.isDefined(u.more)||u.more,angular.isUndefinedOrEmpty(u.community)||(o()(u.USER_LIST_KEY,u.community.uid)||(u.USER_LIST_KEY+=u.community.uid),c.isConnected()&&function(){if(!angular.isUndefinedOrEmpty(u.community.uid)){if(r._services[u.USER_LIST_KEY]){if(r.isCallInProgress(u.USER_LIST_KEY))return void(d=!0);if(r.displayList(u.USER_LIST_KEY).length>=u.maxUserDisplay)return void(u.users=r.displayList(u.USER_LIST_KEY).slice(0,u.maxUserDisplay))}u.users=[],r.initList(u.USER_LIST_KEY),r.getUserList({maxResults:u.maxUserDisplay,uid:u.community.uid},(function(t){u.users=t,e.$broadcast("community-member-update",u.USER_LIST_KEY)}),(function(){d=!1}),u.USER_LIST_KEY,i.PROJECTION.USER_LIST)}}())},u.init()}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{community:"<",maxUserDisplay:"<?",more:"<?"},templateUrl:"/client/front-office/modules/communities/member-list/views/community-member-list.html"}}n.r(t),n.d(t,"CommunityMemberListController",(function(){return r})),n.d(t,"CommunityMemberListDirective",(function(){return i}));var a=n(17),o=n.n(a);r.$inject=["$rootScope","$scope","$timeout","Community","CommunityConstant","InitialSettings","Translation","User","Utils"],angular.module("Directives").directive("lsCommunityMemberList",i)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(259),r=n.n(t);!function(){function t(t,n,i,a,o,s){function c(){l=void 0,u.userRights.editor=!1,u.userRights.admin=!1,u.userRights.isAuthor=!1,d=!1}var l,u=this,d=!1;return u.tagsDialogId="post-tags-modal-identifier",u.statusDialogId="post-status-modal-identifier",u.userRights={admin:!1,editor:!1,isAuthor:!1},u.PostIdea=a,u.getCommunity=function(){if(angular.isDefined(l))return angular.isDefined(t.getCurrent())&&t.getCurrent().id===l.externalKey?t.getCurrent():l.parentContentDetails},u.getPost=function(){return l},u.isCallInProgress=function(){return!!e.has(l,"uid")&&i.isCallInProgress(l.uid)},u.openStatusDialog=function(e,t){u.setPost(e),u.userRights.admin||u.userRights.editor?(d=Boolean(t),a.pendingStatus=e.postStatus,n.open(u.statusDialogId)):c()},u.openTagDialog=function(e,t){u.setPost(e),u.userRights.isAuthor||u.userRights.admin||u.userRights.editor?(d=Boolean(t),l.$pendingTags=l.tags?r()(l.tags,new Array(l.tags.length).fill(!0)):{},n.open(u.tagsDialogId)):c()},u.saveStatus=function(){angular.isUndefined(l)||a.saveStatus(l,d,(function(){n.close(u.statusDialogId)}))},u.saveTags=function(){if(!angular.isUndefined(l)){var e=angular.copy(l);e.tags=[],angular.forEach(l.$pendingTags,(function(t,n){t&&e.tags.push(n)})),d?(l.tags=e.tags,c()):i.save(e,(function(e){l.tags=e.tags,l.tagsDetails=e.tagsDetails,l.version=e.version,c(),n.close(u.tagsDialogId)}),void 0,l.uid)}},u.setPost=function(n){u.userRights.admin=t.isUserAdmin(n.parentContentDetails,o.getConnected()),u.userRights.isAuthor=e.get(n,"authorDetails.uid")&&e.get(o.getConnected(),"uid")===n.authorDetails.uid,u.userRights.editor=s.isUserAllowed("COMMUNITY_POST_EDIT"),l=n},u}t.$inject=["Community","LxDialogService","Post","PostIdea","User","UserAccess"],angular.module("Services").service("ActivePost",t)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/misc/:methodKey",{},{urlinfo:{isArray:!1,method:"GET",params:{methodKey:"urlinfo"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CrawlerFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l){var u=this;u.POST_FIELDS=["metadata","title","dates","content","attachments"],u.POST_SEARCH_DUPLICATES_KEY="post-search-duplicates",u.POST_SEARCH_DIALOG_ID="post-search-duplicates-dialog",u.is={admin:!1,disabled:!1,loading:!1,mergePending:!1,readMode:!0},u.mergedSlavePostsIds=[],u.slavePosts=[],u.tempSlavePosts=[],u.LxDialogService=i,u.Post=o,u.Utils=l,u.canRemove=function(t){return!u.is.readMode&&!e.includes(u.mergedSlavePostsIds,t.uid)},u.cancelMergeReport=function(){u.is.mergePending||angular.isUndefinedOrEmpty(u.slavePosts)||u.is.readMode?i.close(u.dialogId):a.confirm(s.translate("COMMUNITY_POST_MERGE_MANAGE"),s.translate("COMMUNITY_POST_MERGE_CANCEL_DESCRIPTION"),{cancel:s.translate("CANCEL"),ok:s.translate("OK")},(function(e){e&&i.close(u.dialogId)}))},u.getPostList=function(){o.filterize({contentId:u.masterPost.externalKey,isMerged:!!r.isEditableBy(c.getConnected(),e.get(u.masterPost,"parentContentDetails"))&&void 0,maxResults:5,query:u.searchPostQuery},void 0,void 0,u.POST_SEARCH_DUPLICATES_KEY)},u.isSelected=function(t,n){return angular.isDefinedAndFilled(e.find(n,{uid:t.uid}))},u.switchMasterPost=function(e,t){if(!angular.isUndefinedOrEmpty([e,t],"some")&&!angular.isDefinedAndFilled(u.mergedSlavePostsIds)&&e.uid!==u.masterPost.uid){var n=u.masterPost;u.masterPost=e,u.slavePosts[t]=n}},u.toggleSlave=function(t,n){if(!angular.isUndefinedOrEmpty(t)&&u.masterPost.uid!==t.uid&&!e.includes(u.mergedSlavePostsIds,t.uid)){n=!angular.isUndefined(n)&&n;var r=n?u.tempSlavePosts:u.slavePosts;u.isSelected(t,r)?n?l.reject(r,{uid:t.uid}):a.confirm(s.translate("COMMUNITY_POST_MERGE_REMOVE"),s.translate("COMMUNITY_POST_MERGE_REMOVE_DESCRIPTION"),{cancel:s.translate("CANCEL"),ok:s.translate("OK")},(function(e){e&&l.reject(r,{uid:t.uid})})):r.push(t)}},u.updateSlaves=function(){u.slavePosts=angular.fastCopy(u.tempSlavePosts),u.tempSlavePosts=[],i.close(u.POST_SEARCH_DIALOG_ID)},n.$on("lx-dialog__open-start",(function(t,n,i){n===u.POST_SEARCH_DIALOG_ID?u.tempSlavePosts=angular.fastCopy(u.slavePosts):function(t,n,i){if(u.dialogId===n){u.is.readMode=e.get(i,"isReadMode",!0),u.is.mergePending=o.isMergePending(u.masterPost),u.is.admin=r.isEditableBy(c.getConnected(),e.get(u.masterPost,"parentContentDetails"));var a=e.get(u.masterPost,"merge.slavesPosts",[]);if(u.is.mergePending||(u.mergedSlavePostsIds=a,u.canSetAsOriginal=!u.is.mergePending&&angular.isUndefinedOrEmpty(u.mergedSlavePostsIds),u.is.readMode||(u.getPostList(),u.masterPost.isMerged))){u.is.loading=!0;var s=e.get(u.masterPost.merge,"masterPost"),d=u.masterPost.uid===s;d||(a=e.union([s],e.without(a,u.masterPost.uid))),angular.isUndefinedOrEmpty(a)||(u.mergedSlavePostsIds=a,u.canSetAsOriginal=!u.is.mergePending&&angular.isUndefinedOrEmpty(u.mergedSlavePostsIds),o.filterize({ids:a},(function(t){d?u.slavePosts=t||[]:(u.slavePosts=e.union([angular.fastCopy(u.masterPost)],e.reject(t,{uid:s})),u.masterPost=e.find(t,{uid:s})),u.is.loading=!1}),(function(e){l.displayServerError(e),u.is.loading=!1}),"slave-post-details",o.PROJECTION.list))}}}(0,n,i)})),n.$on("lx-dialog__scroll-end",(function(e,t){u.POST_SEARCH_DIALOG_ID===t&&o.displayNextPage(u.POST_SEARCH_DUPLICATES_KEY)}))}t.$inject=["$rootScope","$scope","Community","LxDialogService","LxNotificationService","Post","Translation","User","Utils"],angular.module("Directives").directive("lsMergePostsDialog",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{dialogId:"@lsDialogId",masterPost:"<?lsMasterPost"},templateUrl:"/client/front-office/modules/communities/post/views/partials/merge-posts-dialog.html",transclude:!0}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o){var s=this,c={},l=!1;s.isModerating=!1,s.isModerated=!1,s.Post=o,s.declineHandler=function(t){angular.isUndefinedOrEmpty(t.report)&&delete s.post.report,delete s.post.reportStatus,s.post.alreadyReported=!1,e.$broadcast("post-moderated",s.post.uid,!1),a.close(s.dialogId)},s.deleteHandler=function(){l=!0,e.$broadcast("post-moderated",s.post.uid,!0),s.isModerated=!0},s.moderatePost=function(e){s.isModerating=!0;var t={action:e,uid:s.post.uid||s.post.id};o.moderatePost(t).then((function(t){t.postId===s.post.uid&&angular.isFunction(c[e])&&c[e](t)})).catch((function(){a.close(s.dialogId)})).finally((function(){s.isModerating=!1}))},t.$on("lx-dialog__close-end",(function(t,a){if(s.dialogId===a&&l){var c="app.front.community"===n.current.name&&angular.isDefinedAndFilled(r.identifier);c?i.goTo(s.post.parentContentDetails):o.del(s.post.uid,(function(){e.$broadcast("community__post-deleted",s.post.uid)}),void 0,s.postListKey)}})),angular.forEach(o.MODERATION_ACTIONS,(function(e){var t=s[e.toLowerCase()+"Handler"];angular.isFunction(t)&&(c[e]=t)}))}e.$inject=["$rootScope","$scope","$state","$stateParams","Community","LxDialogService","Post"],angular.module("Directives").directive("lsModeratePostDialog",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{dialogId:"@lsDialogId",post:"<lsPost",postListKey:"@lsPostListKey"},templateUrl:"/client/front-office/modules/communities/post/views/partials/moderate-post-dialog.html",transclude:!0}}))}()},function(e,t,n){"use strict";n.r(t),function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=n(18),a=n.n(i),o=n(3),s=n.n(o),c=n(391),l=n(245),u=n(21),d=n.n(u);!function(){function t(t,n,i,o,s,u,p,f,g,m,v,h,y,E,b,O,C,T,S,I,_,A,w){function D(){var t,n=N.post.reports,r=e.first(n),i=n.length-1,a=I.translate("FRONT.COMMUNITY.REPORTED_AS."+r.reportType).toLowerCase(),o="<strong>"+r.reporterDetails.fullName+"</strong>",s={REPORT_COUNT:i,REPORT_TIME:moment.utc(N.post.lastReportDate).local().fromNow(),REPORTED_AS:a,REPORTER_NAME:o};t=n.length>2?k:2===n.length?U:F;var c="FRONT.COMMUNITY.MODERATION_REPORT."+t;N.moderationAlertMessage=I.replace(c,Object.keys(s),e.values(s))}function L(){if(angular.isDefinedAndFilled(N.post.reports))return t.resolve();N.isLoadingReportMessage=!0;var n=N.post.uid;R+=n;var r={postId:n};return t((function(t){O.getReportList(r,O.PROJECTION.reportList,R).then((function(n){angular.isDefinedAndFilled(n)&&(angular.extend(N.post,e.first(n)),t())})).finally((function(){N.isLoadingReportMessage=!1}))}))}var P,N=this,R="report-list-key-",j=["activities","dashboard","history","posts"],k="MORE",F="ONE",U="TWO";N.MERGE_DIALOG_ID="merge-posts-dialog-",N.MODERATE_DIALOG_ID="moderate-post-dialog-",N.REPORT_DIALOG_ID="report-post-dialog-",N.actions={display:!1,edit:!1,merge:!1,mergeAdmin:!1,pin:!1,remove:!1,reportAdmin:!1},N.cansUnshare=!1,N.commentWidget={widgetType:y.WIDGET_TYPES.COMMENTS,shouldDisplayTitle:!0},N.communityContext="app.front.community"===s.current.name,N.feedMentioned=[],N.fieldsToDisplay={},N.hasMoreButton=!1,N.isBeingDeleted=!1,N.isFocus=!1,N.isLoadingReportMessage=!1,N.isMergeDialogOpen=!1,N.isModerateDialogOpen=!1,N.isReportDialogOpen=!1,N.listKey=void 0,N.moderationAlertMessage="",N.movePostDialogId="community-move-post-dialog",N.postVisibilityDialogId="post-visibility-dialog",N.moreButtonStyle={},N.pinnedListKey=void 0,N.postDate=void 0,N.postTypes=y.POST_TYPES,N.sharedDate=void 0,N.sharer=null,N.AVAILABLE_VIEW={list:"posts",post:"post"},N.view=u.view||N.AVAILABLE_VIEW.list,N.belongsToCurentInstance=void 0,N.postLink={dataId:null,href:null,target:null},N.ActivePost=f,N.Community=g,N.Features=h,N.Instance=E,N.Post=O,N.PostIdea=C,N.Translation=I,N.User=_,N.Utils=w,N.unsharePost=function(){T.store.dispatch(Object(c.g)(N.post.uid,P.uid,N.listKey))},N.shouldDisplaySharedByInfo=function(){return P.uid!==N.post.externalKey&&N.post.visibleInCommunitiesCount>1&&N.post.visibleInCommunitiesDetails.some((function(e,t){return t>0&&e.postedTo.uid===P.uid}))},N.isSharedInPrivateCommunities=function(){return!!angular.isDefined(N.post.visibleInCommunitiesDetails)&&N.post.visibleInCommunitiesDetails.length<N.post.visibleInCommunitiesCount},N.getPostVisibilityCommunityList=function(){return N.communityContext?N.post.visibleInCommunitiesDetails.filter((function(e){return P.uid!==e.postedTo.uid})):N.post.visibleInCommunitiesDetails.filter((function(e){return e.postedTo.uid!==N.post.externalKey}))},N.getPrivateCommunitiesCount=function(){return angular.isDefined(N.post.visibleInCommunitiesDetails)?N.post.visibleInCommunitiesCount-N.post.visibleInCommunitiesDetails.length:0},N.openPostVisibilityDialog=function(){i.$broadcast(N.postVisibilityDialogId+"__open",{post:N.post,currentContextCommunityId:N.communityContext?P.uid:void 0,isSharedInPrivateCommunities:N.isSharedInPrivateCommunities()})},N.editPost=function(){i.$broadcast("create-new-post__open",N.post,P)},N.getClasses=function(){var t=[];return e.some(e.values(N.actions))&&t.push("post-block--has-actions"),N.isFocus?t.push("post-block--is-focus"):t.push("post-block--is-blur"),"dark"===N.theme?t.push("post-block--theme-dark"):t.push("post-block--theme-light"),"grid"===N.viewMode?t.push("post-block--view-mode-grid"):"cascade"===N.viewMode?t.push("post-block--view-mode-cascade"):t.push("post-block--view-mode-list"),"ungroup"===N.viewModeVariant?t.push("post-block--view-mode-variant-ungroup"):t.push("post-block--view-mode-variant-group"),N.post.$hidden&&t.push("post-block--real-time-append"),t},N.getStyle=function(){return angular.isUndefinedOrEmpty(N.widgetProperties)?{}:S.adjustShadow(S.getBlockStyle(N.widgetProperties,N.viewMode,N.viewModeVariant))},N.goToCommunity=function(){var e=N.post.parentContentDetails;angular.isUndefinedOrEmpty(e)||g.goTo(e)},N.isPostPinned=function(){return null!=d()(N.post.pinnedInCommunitiesDetails,(function(e){return P.uid===e.pinnedIn.uid}))},N.isReported=function(){return N.post.reportStatus===O.REPORT_STATUSES.REPORTED},N.moderatePost=function(){N.isModerateDialogOpen=!0,w.waitForAndExecute("#"+N.MODERATE_DIALOG_ID)},N.movePost=function(){O.setMovedPost(N.post),w.waitForAndExecute("#"+N.movePostDialogId),i.$broadcast("move-post__open",N.post)},N.onRemovePostSuccess=function(){var e="app.front.community"===s.current.name&&angular.isDefinedAndFilled(u.identifier);e?N.goToCommunity():(i.$broadcast("refresh-posts",N.pinnedListKey,!1),i.$broadcast("community__post-deleted",N.post.uid))},N.onUnpinSuccess=function(){var t=e.get(O._services[N.pinnedListKey],"_list");angular.isDefinedAndFilled(t)&&(w.reject(t,{uid:N.post.uid}),angular.isUndefinedOrEmpty(t)&&i.$broadcast("refresh-posts",N.pinnedListKey,!1)),"community"===v.getCurrent().type&&i.$broadcast("reset-slideshow-index"),i.$broadcast("post-unpinned",N.post.uid)},N.openMergeReport=function(e,t){N.disableMergeLink||t&&O.isMergePending(N.post)||(N.isMergeDialogOpen=!0,w.waitForAndExecute("#"+N.MERGE_DIALOG_ID,void 0,void 0,void 0,void 0,{isReadMode:e}))},N.pinPost=function(){O.pin(N.post,P.uid,N.post.title,(function(){var t=e.get(O._services[N.pinnedListKey],"_list"),n=angular.isUndefinedOrEmpty(t);angular.isDefined(t)&&t.unshift(N.post),n&&i.$broadcast("refresh-posts",N.pinnedListKey,!1)}),void 0)},N.requestSharePost=function(){N.post.canShare&&i.$broadcast("community-multi-select__open",{post:N.post})},N.reportPost=function(){N.post.alreadyReported||(N.isReportDialogOpen=!0,w.waitForAndExecute("#"+N.REPORT_DIALOG_ID))},N.switchFocus=function(t,r){window.getSelection&&""!=window.getSelection().toString()||angular.isDefinedAndFilled(t)&&"a"===t.target.tagName.toLowerCase()||!e.includes(j,N.view)||(N.isFocus=!N.isFocus,N.commentWidget.properties.preloadedOnly=N.displayPreloaded&&!N.isFocus,N.commentWidget.properties.relevantOnly=N.displayRelevant&&!N.isFocus,p((function(){var e=n.find(".comment-field__rich-text-editor textarea");angular.isDefinedAndFilled(e)&&r&&e.focus()}),250))},N.unpinPost=function(){O.unpin(N.post,P.uid,N.onUnpinSuccess)},o.$on("community__post-saved",(function(e,t){t.uid===N.post.uid&&(N.post=t,N.init())})),o.$on("post__vote-done",(function(e,t){t.uid===N.post.uid&&(N.post.score=t.score,N.post.userVote=t.userVote,N.init())})),o.$on("community__post-moved",(function(e,t){t.uid===N.post.uid&&(N.communityContext?i.$broadcast("refresh-posts",N.pinnedListKey,!1):(N.post=t,N.init()))})),o.$on("post__update",(function(e,t){N.communityContext&&N.post.uid===t.uid&&(N.post.comments=t.comments,N.post.liked=t.liked||!1,N.post.likes=t.likes)})),o.$on("post-moderated",(function(e,t,n){N.post.uid===t&&(n?N.isBeingDeleted=!0:(delete N.post.reportStatus,N.post.alreadyReported=!1))})),o.$on("post-reported",(function(e,t){N.post.uid===t.uid&&(angular.extend(N.post,t),N.actions.reportAdmin&&L().then(D))})),o.$on("lx-dialog__close-end",(function(e,t){t===N.MERGE_DIALOG_ID?N.isMergeDialogOpen=!1:t===N.REPORT_DIALOG_ID&&(N.isReportDialogOpen=!1)})),N.init=function(){P=g.getCurrent()||e.get(N.post,"parentContentDetails"),N.community=P;var t=new RegExp("[a-z0-9]{8}-[a-z0-9]{4}-4[a-z0-9]{3}-[a-z0-9]{4}-[a-z0-9]{12}");angular.isDefinedAndFilled(N.post.title)&&angular.forEach(N.post.title,(function(e,n){angular.isDefinedAndFilled(e)&&(e.match(t)||"USELESS TITLE"===e)&&(N.post.title[n]="")})),N.view===N.AVAILABLE_VIEW.post&&(N.isFocus=!0);var i,o,c=e.get(N.post,"uid","");if(N.MERGE_DIALOG_ID+=e.get(P,"uid",""),N.REPORT_DIALOG_ID+=c,N.MODERATE_DIALOG_ID+=c,N.communityContext){if(N.listKey="community-"+P.uid,N.pinnedListKey=Object.keys(N.Post._services).filter((function(e){return 0===e.indexOf("community-pinned-"+P.uid)}))[0],e.get(N.post,"parentContentDetails.id")===P.uid&&(N.post.parentContentDetails.canMarkRelevant=P.canMarkRelevant),angular.isArray(N.post.tagsDetails)){var f=e.map(P.tagsDetails,"uid");N.post.tagsDetails=N.post.tagsDetails.filter((function(t){return e.includes(f,t.uid)})),N.post.tags=e.map(N.post.tagsDetails,"uid")}var v=e.find(P.postStatuses,{uid:N.post.postStatus});angular.isUndefined(v)&&(N.post.postStatus=void 0)}N.belongsToCurentInstance=N.post.instance===E.getCurrentInstanceId(),angular.isDefinedAndFilled(N.post.tagz)||(N.post.tagz=[]),angular.isDefinedAndFilled(N.post.content)&&(N.feedMentioned=b.getFeedMentionedFromFeedKeys(I.translate(N.post.content),N.post.mentionsFeedKeys)),function(){var e=angular.isUndefined(N.fields)?E.getProperty(m.INSTANCE_PROPERTIES.POST_FIELDS):N.fields;if(angular.isObject(e)&&!angular.isArray(e)){var t=[];angular.forEach(e,(function(e,n){t.push({enable:e,name:n})})),e=t}N.fieldsToDisplay={},angular.forEach(e,(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=e;angular.isObject(e)||(t={enable:!0,name:e}),N.fieldsToDisplay[t.name]=t.enable}})),N.fieldsToDisplay.likes=N.fieldsToDisplay.comments,N.fieldsToDisplay.ideaScore=!0;var n=!0,r=d()(E.getProperty(m.INSTANCE_PROPERTIES.SOCIAL_SETTINGS),(function(e){return"multiposting_allowed"===e.name}));r&&(n=r.enable),N.fieldsToDisplay.sharePost=N.post.canShare&&N.post.postType!==y.POST_TYPES.EVENT&&n&&N.fieldsToDisplay.comments}(),!N.belongsToCurentInstance&&angular.isUndefinedOrEmpty(N.postLink.href)?O.getDestinationAsPromise(N.post).then((function(e){N.postLink=r({},N.postLink,{href:e.destination,target:"_blank"})})):N.postLink=r({},N.postLink,{dataId:N.Post.displayPostTitleAttributes["data-id"],href:s.href("app.front.community",{identifier:N.post.uid,slug:N.Translation.translate(N.post.parentContentDetails.slug),view:"post"})}),moment().diff(moment(N.post.publicationDate),"days")<2?N.postDate=moment.utc(N.post.publicationDate).local().fromNow():N.postDate=moment.utc(N.post.publicationDate).local().format("LL"),angular.isUndefinedOrEmpty(N.linesLimit)&&(N.linesLimit=10),N.displayActions=!!angular.isUndefinedOrEmpty(N.displayActions)||N.displayActions,function(){if(N.displayActions){var t=_.getConnected(),n=N.post.visibleInCommunitiesCount&&N.post.visibleInCommunitiesCount>1,r="app.front.community"===s.current.name&&angular.isDefinedAndFilled(u.identifier),i=angular.isDefinedAndFilled(e.get(N.post,"authorDetails.id"))&&e.get(t,"id")===N.post.authorDetails.id,a=g.isUserAdmin(P,t),o=g.isUserAdmin(N.post.parentContentDetails,t),c=_.isInstanceAdmin(),l=h.hasFeature("advanced_community"),d=g.isWriteable(P)||_.hasSubscriptions(P.publishers)||e.includes(P.userKeys,t.id)||"open"===P.privacy,p=!n;N.actions={display:!r,edit:i||A.isUserAllowed("COMMUNITY_POST_EDIT")||o,move:(t.isSuperAdmin||c||a)&&p,pin:l&&N.communityContext&&(A.isUserAllowed("COMMUNITY_POST_EDIT")||a),remove:t.isSuperAdmin||c||i||A.isUserAllowed("COMMUNITY_POST_DELETE")||o,report:N.communityContext&&!i&&(t.isSuperAdmin||c||a||d),reportAdmin:N.communityContext&&(t.isSuperAdmin||c||a)},N.actions.merge=!1}}(),N.actions.reportAdmin&&N.isReported()&&L().then(D),(N.displayInstance||N.post.instance!==E.getCurrentInstanceId())&&E.getInstanceById(N.post.instance,(function(e){N.instanceDetails=e})),N.disableMergeLink=!angular.isUndefinedOrEmpty(N.disableMergeLink)&&N.disableMergeLink,e.set(N.commentWidget,"properties.style.global",{}),e.set(N.commentWidget,"properties.style.content",{}),N.commentWidget.uuid=N.post.uid,N.commentWidget.properties.preloadedOnly=N.displayPreloaded&&!N.isFocus,N.commentWidget.properties.relevantOnly=N.displayRelevant&&!N.isFocus,N.commentWidget.properties.style.global.borderRadius=0,N.commentWidget.properties.style.global.boxShadow=0,N.commentWidget.properties.style.content.paddingTop=0,N.commentWidget.properties.style.content.paddingRight=0,N.commentWidget.properties.style.content.paddingBottom=0,N.commentWidget.properties.style.content.paddingLeft=0,N.commentWidget.properties.style.content.backgroundColor="transparent",N.commentWidget.properties.style.content.theme=N.theme,p((function(){n.find(".ls-rich-text").outerHeight()>20*N.linesLimit?N.hasMoreButton=!0:N.hasMoreButton=!1}),500),i=e.get(N.widgetProperties,"style.content.backgroundColor","#ffffff"),o="transparent"===i?"#ffffff":i,N.moreButtonStyle.solidBackground={backgroundColor:o},N.moreButtonStyle.gradientBackground={background:"linear-gradient(to right, "+Object(l.c)(o,0)+", "+o+" 100%)"},function(){if(N.post.visibleInCommunitiesDetails){var t=d()(N.post.visibleInCommunitiesDetails,(function(e){return P.uid===e.postedTo.uid}));if(t){N.canUnshare=t.canUnshare||!1;var n=_.getConnected();e.get(n,"id")===t.postedBy.id?N.sharer=null:(N.sharerName=I.replace("FRONT.COMMUNITY.POST.SHARED.BY","FULLNAME",_.getUserFullName(t.postedBy)),N.sharer=t.postedBy),moment().diff(moment(t.postedAt),"days")<2?N.sharedDate=moment.utc(t.postedAt).local().fromNow():N.sharedDate=moment.utc(t.postedAt).local().format("LL")}}}();var C=N.post,S=(C.$promise,a()(C,["$promise"]));T.store.dispatch({type:"post/UPDATE_POST",payload:{postId:N.post.uid,post:S}})},N.init()}t.$inject=["$q","$element","$rootScope","$scope","$state","$stateParams","$timeout","ActivePost","Community","Config","Content","Features","InitialSettings","Instance","LsTextEditor","Post","PostIdea","ReduxStore","Style","Translation","User","UserAccess","Utils"],angular.module("Directives").directive("postBlock",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e){var t=e.vm.post.uid,n="post-block-loaded";e.vm.fieldsToDisplay.metadata?e.$on("user-block-loaded",(function(){e.$emit(n,t)})):e.$emit(n,t)},replace:!0,restrict:"E",scope:{back:"&?",commentsListKey:"@?",disableMergeLink:"<?",displayActions:"<?",displayCommunity:"<?",displayInstance:"<?",displayPreloaded:"<?",displayRelevant:"<?",fields:"<?",hidePinIndicator:"<?",linesLimit:"<?",post:"<",theme:"@?",viewMode:"@?",viewModeVariant:"@?",widgetProperties:"=?"},templateUrl:"/client/front-office/modules/communities/post/views/post-block.html"}}))}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/community/post/comments/:methodKey",{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("PostCommentFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r){function i(e,n){if(angular.isDefined(e)&&"idea"===e.postType.toLowerCase()){o[e.uid]=!0;var i={uid:e.uid,vote:n};r.vote(i,void 0,(function(n){o[e.uid]=!1,t.$broadcast("post__vote-done",n)}),(function(){o[e.uid]=!1}))}}var a=this,o={},s="down",c="up";return a.statusDialogIdPrefix="idea-status-dialog-id-",a.pendingStatus=void 0,a.downVote=function(e){i(e,s)},a.isLoading=function(e){return o[e]},a.saveStatus=function(t,r,i,o){if(!angular.isUndefinedOrEmpty(a.pendingStatus)){i=i||angular.noop,o=o||angular.noop;var s=angular.fastCopy(t);s.postStatus=a.pendingStatus,r?(t.postStatus=a.pendingStatus,t.postStatusDetails=e.find(e.get(t.parentContentDetails,"postStatuses"),{uuid:a.pendingStatus}),a.pendingStatus=void 0):n.save(s,(function(e){t.postStatus=e.postStatus,t.postStatusDetails=e.postStatusDetails,t.version=e.version,a.pendingStatus=void 0,i()}),o,t.id)}},a.upVote=function(e){i(e,c)},a}t.$inject=["$rootScope","Post","PostVoteFactory"],angular.module("Services").service("PostIdea",t)}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),n.d(t,"PostConstant",(function(){return r}));var r={EVENT_FILTERS:{ALL_EVENTS:"ALL_EVENTS",FUTURE_EVENTS:"FUTURE_EVENTS",ONGOING_EVENTS:"ONGOING_EVENTS",PAST_EVENTS:"PAST_EVENTS"},MERGE_STATUS:[{key:"YES",value:!0},{key:"NO",value:!1},{key:"PENDING",value:"pending"}],RELEVANT_COMMENT:[{key:"YES",value:!0},{key:"NO",value:!1}]};angular.module("Constants").constant("PostConstant",r)},function(e,t){!function(){"use strict";function e(e,t){var n=t.APPLICATION_HOST+"/_ah/api/lumsites/v1/community/post/:uid/merge/:methodKey",r=t.APPLICATION_HOST+"/_ah/api/lumsites/v1/community/post/report/:methodKey";return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/community/post/:methodKey",{},{approveMerge:{isArray:!1,method:"POST",params:{methodKey:"approve"},url:n},delete:{isArray:!1,method:"delete",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"POST",params:{methodKey:"search"}},moderate:{isArray:!1,method:"POST",params:{methodKey:"moderate"},url:r},pin:{isArray:!1,method:"POST",params:{methodKey:"pin"}},rejectMerge:{isArray:!1,method:"POST",params:{methodKey:"reject"},url:n},report:{isArray:!1,method:"POST",params:{methodKey:"save"},url:r},reportList:{isArray:!1,method:"POST",params:{methodKey:"list"},url:r},reportMerge:{isArray:!1,method:"POST",params:{methodKey:"report"},url:n},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},unpin:{isArray:!1,method:"POST",params:{methodKey:"unpin"}}})}function t(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/community/post/:uid/move/:communityId",null,{move:{isArray:!1,method:"POST"}})}function n(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/community/post/:uid/vote/:vote",null,{vote:{isArray:!1,method:"PUT"}})}n.$inject=["$resource","Config"],t.$inject=["$resource","Config"],e.$inject=["$resource","Config"],angular.module("Factories").factory("PostVoteFactory",n),angular.module("Factories").factory("PostMoveFactory",t),angular.module("Factories").factory("PostFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35),r=n(125),i=n.n(r),a=n(59),o=n(21),s=n.n(o),c=n(38),l=n(391);!function(){function n(n,r,o,u,d,p,f,g,m,v,h,y,E,b,O,C,T){var S=m.createLumsitesBaseService(E,{autoInit:!1,objectIdentifier:"uid",preSave:function(e){if(angular.isUndefinedOrEmpty(e))return{};if(angular.isUndefinedOrEmpty(e.uid)){e.slug=e.slug||{};var n=O.getLang("current");e.slug[n]=Object(t.b)()}return angular.isDefinedAndFilled(e.parentContentDetails)&&(e.externalKey=e.parentContentDetails.id,e.feedKeys=e.parentContentDetails.feedKeys),e}});S.reduxReducerName="posts",S.reduxUpdateActionType="posts/update";var I={},_={};S.PROJECTION={list:{items:{alreadyReported:!0,authorDetails:!0,comments:!0,content:!0,customer:!0,eventEndDate:!0,eventStartDate:!0,externalKey:!0,feedKeys:!0,files:!0,images:!0,instance:!0,isMerged:!0,liked:!0,likes:!0,links:!0,mentionsDetails:!0,mentionsFeedKeys:!0,parentContentDetails:!0,pinDetails:!0,postStatus:!0,postType:!0,publicationDate:!0,relevantComment:!0,relevantCommentDetails:!0,reportStatus:!0,score:!0,tags:!0,tagsDetails:!0,title:!0,type:!0,uid:!0,updateAt:!0,userVote:!0,version:!0}},reportList:{postId:!0,report:!0},reportSpammer:{spammerInfo:!0}},S.MODERATION_ACTIONS={DECLINE:"DECLINE",DELETE:"DELETE"},S.REPORT_STATUSES={REPORTED:"REPORTED"},S.REPORTED_AS={SPAM:"SPAM"},S.defaultParams={},S.movedPost=void 0,S.approveMerge=function(t,n,i,a){angular.isUndefinedOrEmpty([t,n],"some")||(i=i||angular.noop,a=a||angular.noop,h.confirm(O.translate("COMMUNITY_POST_MERGE_APPROVE"),O.translate("COMMUNITY_POST_MERGE_APPROVE_DESCRIPTION"),{cancel:O.translate("CANCEL"),ok:O.translate("OK")},(function(o){o&&E.approveMerge({uid:t.uid},{postUids:e.map(n,"uid")},(function(e){h.success(O.translate("COMMUNITY_POST_MERGE_APPROVE_SUCCESS")),angular.isDefinedAndFilled(e)&&(t=e,r.$broadcast("community__post-saved",e)),i(e),v.close()}),(function(e){T.displayServerError(e),a(e)}))})))},S.filterize=function(e,t,n,r,i){return angular.isDefinedAndFilled(r)&&(I[r]=e),t=t||angular.noop,n=n||angular.noop,i=i||S.PROJECTION.list,m.proto.prototype.filterize.call(S,e,t,n,r,i)},S.getLocalPost=function(t,n){return n=S._getListKey(n),e.find(S._services[n]._list,(function(e){return(e.uid||e.id)===t}))},S.getRelatedStatusFlags=function(e){var t=[e,void 0];return"pending"===e&&(t[0]=void 0,t[1]=!0),t},S.getReportList=function(e,t,r){return angular.isDefinedAndFilled([r,S.displayList(r)],"every")?n.resolve(S.displayList(r)):(_[r]||(_[r]=n.defer()),i=_[r],m.proto.prototype.filterize.call(S,e,i.resolve,i.reject,r,t,"reportList"),i.promise);var i},S.getWriterFullName=function(e){if(!angular.isUndefinedOrEmpty(e))return u.getWriterFullName(e)},S.goTo=function(e){if(!angular.isUndefinedOrEmpty([e,e.parentContentDetails],"some")){var t=e.parentContentDetails,n=t.instance!==f.getCurrentInstanceId();y.goTo("app.front.community",t.id,t.instance,t.slug,e.uid,p.CONTENT_TYPES.COMMUNITY,n)}},S.getDestinationAsPromise=function(e){if(angular.isUndefinedOrEmpty([e,e.parentContentDetails],"some"))return new Promise((function(e,t){return t()}));var t=e.parentContentDetails,n=t.instance,r="app.front.community",i={identifier:e.uid,view:"post",slug:O.translate(t.slug)};return f.getCurrentInstanceId()===n?new Promise((function(e){var t=o.href(r,i,{absolute:!0});e({destination:t,isInstanceDifferent:!1})})):new Promise((function(e,t){f.getInstanceById(n,(function(t){i.instance=t.slug;var n=o.href(r,i,{absolute:!0}),a=decodeURIComponent(n);e({destination:a,isInstanceDifferent:!0})}),(function(){t()}))}))},S.hasAttachment=function(e){return!angular.isUndefinedOrEmpty(e)&&angular.isDefinedAndFilled([e.images,e.files,e.links],"some")},S.isCallInProgress=function(e){return Boolean(m.proto.prototype.isCallInProgress.call(S,e)||g.getIsLoading(e))},S.isMergeMaster=function(t){return t.isMerged&&angular.isDefinedAndFilled(e.get(t,"merge"))&&t.uid===t.merge.masterPost},S.isMergePending=function(t){return!t.isMerged&&angular.isDefinedAndFilled(e.get(t,"merge"))},S.isMergeSlave=function(t){return t.isMerged&&angular.isDefinedAndFilled(e.get(t,"merge"))&&t.uid!==t.merge.masterPost},S.moderatePost=function(e){return e=S.computeProjection(e,S.PROJECTION.reportList),E.moderate({},e).$promise},S.pin=function(e,t,n,r,i){if(!angular.isUndefinedOrEmpty(e)){r=r||angular.noop,i=i||angular.noop;var a=n;angular.isString(a)&&(a={},a[O.inputLanguage]=n),E.pin({uid:e.uid,communityId:t},(function(t){angular.isDefinedAndFilled(t)&&angular.extend(e,t),r(t)}),i)}},S.prependPost=function(e,t){t=S._getListKey(t);var n=S._services[t];n&&angular.isArray(n._list)&&n._list.unshift(e)},S.rejectMerge=function(e,t,n){angular.isUndefinedOrEmpty(e)||(t=t||angular.noop,n=n||angular.noop,E.rejectMerge({uid:e.uid},{},(function(n){h.success(O.translate("COMMUNITY_POST_MERGE_REJECT_SUCCESS")),angular.isDefinedAndFilled(n)&&(e=n,r.$broadcast("community__post-saved",n)),t(n),v.close()}),(function(e){T.displayServerError(e),n(e)})))},S.remove=function(e,t,n,r){angular.isUndefinedOrEmpty(e)||(t=t||angular.noop,n=n||angular.noop,h.confirm(O.translate("COMMUNITY_POST_DELETE"),O.translate("COMMUNITY_POST_DELETE_DESCRIPTION"),{cancel:O.translate("CANCEL"),ok:O.translate("OK")},(function(i){i&&S.del(e.id||e.uid,(function(e){h.success(O.translate("COMMUNITY_POST_DELETE_SUCCESS")),t(e)}),(function(e){T.displayServerError(e),n(e)}),r)})))},S.reportMerge=function(t,n,i,a,o){if(angular.isUndefinedOrEmpty([t,n],"some"))h.error(O.translate("COMMUNITY_POST_MERGE_REPORT_ERROR"));else{i=i||[];var s=e.difference(e.map(n,"uid"),i);a=a||angular.noop,o=o||angular.noop;var c=u.isEditableBy(C.getConnected(),e.get(t,"parentContentDetails"));E.reportMerge({uid:t.uid},{postUids:s},(function(e){h.success(O.translate(c?"COMMUNITY_POST_MERGE_APPROVE_SUCCESS":"COMMUNITY_POST_MERGE_REPORT_SUCCESS")),angular.isDefinedAndFilled(e)&&(t=e,r.$broadcast("community__post-saved",e)),a(e),v.close()}),(function(e){T.displayServerError(e),o(e)}))}},S.reportPost=function(e,t,n){if(!angular.isUndefinedOrEmpty(e)){t=t||angular.noop,n=n||angular.noop;var r={uid:e.id||e.uid};r=S.computeProjection(r,S.PROJECTION.reportList),E.report({},r,t,(function(e){T.displayServerError(e),n(e)}))}},S.save=function(t,n,r,a){if(!angular.isUndefinedOrEmpty(t)){t=i()(t,["alreadyReported","analyticsViewSum","archivers","attachmentsCount","author","authorDetails","authorId","calendarEventId","canDelete","canEdit","canMarkRelevant","canPin","canonicalUrl","comments","content","count","createdAt","customContentType","customContentTypeDetails","customContentTypeTags","customer","deleters","editors","endDate","eventEndDate","eventStartDate","excerpt","externalKey","featuredEndDate","featuredFeedKeys","featuredStartDate","feedKeys","files","following","hasCommentWidget","hasRelevantComment","header","headerDetails","id","images","instance","isCustomizableLayout","isDefaultContentList","isDefaultUserDirectory","isFeatured","isHomepage","isMerged","isNavItem","isOpen","isPinned","lastRevision","liked","likes","link","links","location","mediaThumbnail","mentions","mentionsDetails","mentionsFeedKeys","merge","metadata","navigation","notificationsEnabled","notifyAuthor","notifyFeedKeys","notifyUsers","parentContentDetails","parentCustomContentType","parentsNavigation","pinDetails","postStatus","postStatusDetails","postType","properties","public","publicationDate","publishers","readers","relevantComment","relevantCommentDetails","reportStatus","score","slug","startDate","status","subscribedFeedKeys","subscription","subtitle","tags","tagsDetails","tagz","template","thumbnail","thumbnailBlobkey","title","type","uid","updatedAt","updatedBy","updatedByDetails","updatedById","url","userContent","userVote","version","weight","writer","writerDetails","writerId"]),n=n||angular.noop,r=r||angular.noop,a=S._getListKey(a);var o=S._services[a],s=e.findIndex(o._list,(function(e){return e.uid===t.uid})),c=!I[a]||angular.isUndefinedOrEmpty(I[a].tags),l=c||angular.isDefinedAndFilled(e.intersection(I[a].tags,t.tags));return m.proto.prototype.save.call(S,t,(function(e){s>-1?o._list[s]=e:l&&(o._list.pop(),o._list.unshift(e)),n(e)}),r,a)}},S.setMovedPost=function(e){S.movedPost=e},S.updateLocalPost=function(t,n){n=S._getListKey(n);var r=S._services[n];if(r&&angular.isArray(r._list)){var i=e.find(r._list,(function(e){return(e.uid||e.id)===t.id}));i&&angular.extend(i,t)}},S.unpin=function(e,t,n,r){angular.isUndefinedOrEmpty(e)||(n=n||angular.noop,r=r||angular.noop,h.confirm(O.translate("UNPIN"),O.translate("UNPIN_DESCRIPTION"),{cancel:O.translate("CANCEL"),ok:O.translate("OK")},(function(i){i&&E.unpin({communityId:t,uid:e.uid},(function(t){angular.isDefinedAndFilled(t)&&(angular.extend(e,t),void 0===t.pinnedInCommunitiesDetails&&delete e.pinnedInCommunitiesDetails),n(t)}),r)})))};var A=Object(a.a)("posts");return S.getAttributes=A,S.displayPostActionAttributes=A({element:"actions",action:"display-post"}),S.displayPostTitleAttributes=A({element:"title",action:"display-post"}),S.displayPostContentAttributes=A({element:"content",action:"expand-post"}),S.reloadPostList=function(e){r.$broadcast("community__post-saved",e)},S.mapStateToRedux=function(){return{}},S.mapReduxToAngular=function(e){if(e.multiSharePayload){var t=!1,n=e.multiSharePayload,i=n.postId,a=n.post,o=n.error,u=n.isUnshare,d=n.listkey;o?h.error(O.translate("FRONT.COMMUNITY.POST.SHARED.FAILED")):(Object.values(S._services).forEach((function(e){var t=s()(e._list,(function(e){return e.uid==i}));t&&(t.canShare=a.canShare,t.visibleInCommunitiesCount=a.visibleInCommunitiesCount,t.visibleInCommunitiesDetails=a.visibleInCommunitiesDetails)})),h.success(O.translate(u?"FRONT.COMMUNITY.POST.UNSHARED.SUCCESS":"FRONT.COMMUNITY.POST.SHARED.SUCCESS")),t=!0),b.store.dispatch({type:l.a}),u?(Object(c.remove)(S._services[d]._list,(function(e){return e.uid===i})),r.$broadcast("community__post-deleted",a.uid),r.$broadcast("refresh-posts",d,!1)):r.$broadcast("community-multi-share__ended",{success:t})}},S.init=function(){S.defaultParams={customerId:d.getCustomerId(),instanceId:f.getCurrentInstanceId(),lang:O.getLang("current")},b.subscribe(S,!0)},S}n.$inject=["$q","$rootScope","$state","Community","Customer","InitialSettings","Instance","LegacySearch","LumsitesBaseService","LxDialogService","LxNotificationService","MainNav","PostFactory","ReduxStore","Translation","User","Utils"],angular.module("Services").service("Post",n)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n){var r=this;r.isReporting=!1,r.isReportSent=!1,r.Post=n,r.sendReport=function(){r.isReporting=!0,n.reportPost(r.post,(function(t){r.post.uid===t.postId&&(r.post.alreadyReported=!0,r.post.reportStatus=n.REPORT_STATUSES.REPORTED,r.post.report=t.report||[],r.isReportSent=!0,e.$broadcast("post-reported",r.post))}),(function(){r.isReporting=!1,t.close(r.dialogId)}))}}e.$inject=["$rootScope","LxDialogService","Post"],angular.module("Directives").directive("lsReportPostDialog",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{dialogId:"@lsDialogId",post:"<lsPost"},templateUrl:"/client/front-office/modules/communities/post/views/partials/report-post-dialog.html",transclude:!0}}))}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){var a=function(){function a(e){this.tmpSlug={},this.wasEmpty={},this.activeListKey=void 0,this.service=e}return a.prototype._checkFeedKeys=function(e){return angular.isUndefinedOrEmpty(e.feedKeys)},a.prototype._checkSlug=function(e){return!r.hasTranslations(e)},a.prototype._checkTitle=function(e){return!r.hasTranslations(e.title)},a.prototype.checkContent=function(a,o){a=!!angular.isUndefined(a)||a,o=!!angular.isUndefined(o)||o;var s=this,c=s.service.getCurrent(s.activeListKey);if(angular.isUndefinedOrEmpty(c))return!1;var l=t.getCurrentInstanceLangs();if(a&&s._checkTitle(c))return n.error(r.translate("ERROR_MANDATORY_FIELDS_TITLE")),!1;if(o&&s._checkSlug(s.tmpSlug))return n.error(r.translate("ERROR_MANDATORY_FIELDS_URL")),!1;if(s._checkFeedKeys(c))return n.error(r.translate("FEED_REQUIRED")),!1;if(!a&&!o)return!0;var u=!1;return angular.forEach(l,(function(t){var l=!a||Boolean(c.title[t]),d=!o||Boolean(e.get(s,"tmpSlug["+t+"]")),p=[],f=!1;p.push(r.translate("LANG_ERROR")+" ( "+t+" ) :"),l===d?angular.isDefinedAndFilled(e.get(s,"tmpSlug["+t+"]"))&&!i.isSlugValid(s.tmpSlug[t])&&(f=!0,p.push("- "+r.translate("ERROR_URL_BAD_FORMAT"))):(f=!0,l||p.push("- "+r.translate("ERROR_MANDATORY_FIELDS_TITLE")),d||p.push("- "+r.translate("ERROR_MANDATORY_FIELDS_URL"))),f&&(u=!0,n.error(p.join("<br/>")))})),!u},a.prototype.checkContentFeeds=function(e){var t=this.service.getCurrent(this.activeListKey);return!!angular.isUndefinedOrEmpty(t)||e.$submitted&&angular.isUndefinedOrEmpty(t.feedKeys)},a.prototype.checkContentSlug=function(t){return!!angular.isUndefinedOrEmpty(e.get(t,"slug"))||!t.slug.$pristine&&(t.slug.$invalid||!i.isSlugValid(e.get(this,"tmpSlug["+r.inputLanguage+"]")))},a.prototype.checkContentTitle=function(t){return!!angular.isUndefinedOrEmpty(e.get(t,"title"))||!t.title.$pristine&&t.title.$invalid},a.prototype.checkTemplateContentFeeds=function(){var t=this.service.getCurrent(this.activeListKey);return!!angular.isUndefinedOrEmpty(e.get(t,"template"))||t.template.basicMode&&angular.isUndefinedOrEmpty(t.template.feedKeys)},a.prototype.getTmpSlug=function(t){var n=this.service.getCurrent(t);return angular.isUndefinedOrEmpty(this.activeListKey)&&this.setActiveListKey(t),angular.isDefinedAndFilled(e.get(n,"slug"))&&angular.isUndefinedOrEmpty(this.tmpSlug)&&(this.tmpSlug=angular.fastCopy(n.slug)),this.tmpSlug},a.prototype.resetContentForm=function(){var e=this;e.tmpSlug={},e.wasEmpty={},e.activeListKey=void 0},a.prototype.saveContent=function(t,n){if(t=t||angular.noop,n=n||angular.noop,this.checkContent()){var r=this.service.getCurrent(this.activeListKey);r.slug=this.tmpSlug,this.service.save(angular.fastCopy(e.omit(r,["$promise","$resolved"])),t,n,this.activeListKey)}else n()},a.prototype.setActiveListKey=function(e){this.activeListKey=e},a.prototype.setSlugFromTitle=function(t,n){n=n||r.inputLanguage;var a=this,o=e.get(a.service.getCurrent(a.activeListKey),"slug["+n+"]");if(angular.isUndefined(a.tmpSlug)&&(a.tmpSlug={}),angular.isUndefinedOrEmpty(a.tmpSlug[n])&&(a.wasEmpty[n]=!0),!angular.isDefinedAndFilled(o)||a.wasEmpty[n]){var s=i.slugify(t);s!==a.tmpSlug[n]&&a.wasEmpty[n]&&(a.tmpSlug[n]=s)}},a.prototype.setTmpSlug=function(e){this.tmpSlug=e},a}();return{createAbstractContentFormService:function(e){return new a(e)}}}t.$inject=["Instance","LxNotificationService","Translation","Utils"],angular.module("Services").service("AbstractContentForm",t)}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(1137),r=n.n(t),i=n(4),a=n.n(i);!function(){function t(t,n,i,o,s,c,l,u,d,p,f,g,m,v,h,y,E,b,O,C){var T=v.proto,S=function(){function v(t,n,r){if(angular.isUndefined(e.get(t,n+"Input.date")))t[n]=void 0;else{var i=t[n+"Input"],a=moment(i.date).format(w),o=angular.isDefined(i.hour)&&i.hour>0&&i.hour<=24?i.hour:"00",s=angular.isDefined(i.min)&&i.min>0&&i.min<=60?i.min:"00";t[n]=moment(a+"T"+o+":"+s+":00.000",A).utc().format(r)}}function S(e,t,n){if(!angular.isUndefinedOrEmpty(e[t])){var r=moment.utc(e[t]).local(),i=r.format(n),a=parseInt(r.format("HH"),10),o=parseInt(r.format("mm"),10);e[t+"Input"]={date:i,hour:a,min:o}}}function I(e){try{return e=O.replaceVariables(O.replaceTranslatableValues(e)),s(e)}catch(e){return""}}function _(e,t){this.action=void 0,this.breadcrumb=void 0,this.isDefaultContentList=!1,this.isDefaultUserDirectory=!1,this.viewMode=void 0,t=t||{},t.postList=this.bindCallback(this,"_postList"),t.postGet=this.bindCallback(this,"_postGet"),t.preSave=this.bindCallback(this,"_preSave"),t.postSave=this.bindCallback(this,"_postSave"),T.call(this,e,t),this.defaultParams={}}var A="YYYY-MM-DD[T]HH:mm:ss.SSS",w="YYYY-MM-DD",D=e.identity,L="_blank",P="",N="_self";return _.prototype=Object.create(T.prototype),_.prototype._fixGlobalWidgets=function(t){var n=p.getElementList(t,"widget","isGlobal",!0);angular.forEach(n,(function(t){var n=e.find(C.getGlobalWidgets(),{id:t.id});if(angular.isDefinedAndFilled(n)){var r=t.uuid;O.swapObject(t,angular.fastCopy(n)),t.uuid=r}else t.isGlobal=!1,delete t.id,delete t.instance,delete t.customer}))},_.prototype._formatClientObjectForServer=function(e){return angular.isUndefinedOrEmpty(e)||(v(e,"startDate",A),v(e,"endDate",A),v(e,"featuredStartDate",A),v(e,"featuredEndDate",A),y.formatMetadataForServer(e),e.userContent=void 0),e},_.prototype._formatServerObjectToClient=function(e){return y.formatMetadataForClient(e,!1),e.notifyAuthor=!angular.isUndefined(e.notifyAuthor)&&e.notifyAuthor,angular.isDefinedAndFilled(e.template)&&O.initComponents(e.template),S(e,"startDate",A),S(e,"endDate",A),S(e,"featuredStartDate",A),S(e,"featuredEndDate",A),e},_.prototype._postGet=function(e,t){return t=!!angular.isUndefined(t)||t,this._fixGlobalWidgets(e),t&&(this.originalContent=angular.fastCopy(e)),this._formatServerObjectToClient(e)},_.prototype._postList=function(e){var t=[],n=this;return angular.forEach(e,(function(e){t.push(n._postGet(e,!1))})),t},_.prototype._postSave=function(e){h.init(),this.isHomepage&&(b.isInstanceAdmin()||b.getConnected().isSuperAdmin)&&(e.isHomepage=!0,this._setHomePage(e.id));var t=m.getInstance(),n=e.customContentType;return this.isDefaultUserDirectory&&(e.isDefaultUserDirectory=!0,t.defaultUserDirectory=e.id),t.defaultContentLists=t.defaultContentLists||{},this.isDefaultContentList?(e.isDefaultContentList=!0,t.defaultContentLists[n]=e.id):t.defaultContentLists[n]===e.id&&delete t.defaultContentLists[n],this._formatServerObjectToClient(e)},_.prototype._preSave=function(e){return this.isHomepage=Boolean(e.isHomepage),this.isDefaultUserDirectory=Boolean(e.isDefaultUserDirectory),this.isDefaultContentList=Boolean(e.isDefaultContentList),angular.isFunction(D)&&(e=D(e)),this._formatClientObjectForServer(e)},_.prototype._setHomePage=function(e){this.Api.setHomePage({uid:e},(function(){m.getInstance().homePage=e}))},_.prototype.bindCallback=function(e,t){return function(n){return angular.isFunction(e[t])?e[t](n):n}},_.prototype.cleanForHasChanges=function t(n){if(!angular.isUndefinedOrEmpty(n)){var r=["adminsDetails","authorDetails","createdAt","endDateInput","featuredEndDateInput","featuredStartDateInput","isBackwardedStyle","key","markedAsRelevant","relevantCommentDetails","startDateInput","stylesMigrated","updatedAt","updatedByDetails","userContent","weather"];n.type===g.CONTENT_TYPES.COMMUNITY&&(r.push("customContentTypeDetails"),r.push("isDefaultContentList"),r.push("template")),angular.forEach(n,(function(i,a){if(e.includes(r,a)||angular.isString(a)&&"$"===a.charAt(0)||angular.isObject(i)&&"widget"===i.type&&!0===i.isGlobal)delete n[a];else{if("metadata"===a){var o=[];angular.forEach(i,(function(e,t){angular.isUndefinedOrEmpty(e)?delete n[a][t]:angular.isArray(e)?o=o.concat(e):angular.isString(e)&&o.push(e)})),n[a]=o.sort()}"featuredEndDate"!==a&&"featuredStartDate"!==a||(n[a]=moment.utc(i).format(w)),angular.isObject(i)&&angular.isDefinedAndFilled(i)&&("cell"===e.get(i,"type")&&!0===e.get(i,"properties.sticky")&&delete i.properties.plain,t(i)),(angular.isUndefinedOrEmpty(i)||!1===i)&&delete n[a]}}))}},_.prototype.createBreadcrumb=function(t){if(!angular.isUndefinedOrEmpty(h.getCurrent())){this.breadcrumb=[];var n=this.getCurrent();if(!angular.isUndefinedOrEmpty(n)&&!angular.isUndefinedOrEmpty(c.params.slug)){var i,o=(t||c.params.slug).split("/"),s=this;if("community"===n.type){for(var l=n.id,u=h.findNavItemById(l),d=angular.isDefinedAndFilled(a()(u,"parentId"));d;)s.breadcrumb.push(u),d=angular.isDefinedAndFilled(u.parentId),l=u.parentId,u=h.findNavItemById(l);r()(s.breadcrumb)}else angular.forEach(o,(function(e){angular.isDefinedAndFilled(i)?i+="/"+e:i=e;var t=h.findNavItemBySlug(i);angular.isDefinedAndFilled(t)&&s.breadcrumb.push(t)}));if(angular.isUndefinedOrEmpty(t)&&angular.isUndefinedOrEmpty(this.breadcrumb)){u=h.findNavItemById(n.id);E.hasTranslations(e.get(u,"slugFull"))&&this.createBreadcrumb(E.translate(u.slugFull))}angular.isUndefinedOrEmpty(this.breadcrumb)&&this.breadcrumb.push(n)}}},_.prototype.getAction=function(){return this.action},_.prototype.getAuthor=function(t){var n=e.get(t,"content");return angular.isUndefinedOrEmpty(n)?e.get(t,"authorDetails"):n},_.prototype.getBreadcrumb=function(){return this.breadcrumb},_.prototype.getCurrentContentSlug=function(){var t=this.getCurrent();if(angular.isDefinedAndFilled(e.get(t,"slug")))return E.translate(t.slug);var r,i=n.path(),a=i.split("/"),o=-1!==i.indexOf("/ls/community/")||-1!==i.indexOf("/ls/group/"),s=m.getCurrentInstanceSlug();if(o){var c=a.indexOf(s);if("ls"===a[c+1])r=c+2;else{var l=a.indexOf("community");r=-1!==l?l:a.indexOf("group")}}return o&&angular.isDefined(r)?a[r+1]:e.last(a)},_.prototype.getExcerpt=function(t,n,r){if(n=n||!1,r=r||!1,angular.isUndefinedOrEmpty(e.get(t,"template")))return"";for(var i=C.findWidgetsByType(t.template,g.WIDGET_TYPES.HTML),a=[],o=[],s=0,c=i.length;s<c;s++){var l=i[s];if(E.hasTranslations(e.get(l,"properties.content"),!0)&&(a.push(l),e.get(l,"properties.isIntro",!1))){o=[l],a=[];break}}if(angular.isUndefinedOrEmpty(o)){var u=e.find(C.findWidgetsByType(t.template,g.WIDGET_TYPES.INTRO),(function(t){return E.hasTranslations(e.get(t,"properties.content"),!0)}));angular.isDefinedAndFilled(u)&&(o=[u])}if(!r&&angular.isUndefinedOrEmpty(o)&&(o=[e.get(a,"[0]",{})]),angular.isDefinedAndFilled(e.get(o,"[0].properties.content"))){var d=o[0].properties.content;return angular.isObject(d)?(angular.forEach(d,(function(e,t){d[t]=O.replaceTranslatableValues(e),!n&&angular.isDefinedAndFilled(O.stripTags(e))&&(d[t]=I(e))})),d):!n&&angular.isDefinedAndFilled(O.stripTags(d))?I(d):d}return""},_.prototype.getLink=function(t,n,r,i,a){if(angular.isUndefinedOrEmpty(t))return"";if(n=!!angular.isUndefined(n)||n,E.hasTranslations(t.link,!0))return E.translate(t.link)+(r?"#comments":"");var o=E.translate(t.slug),s={slug:o},u=this.getStateName(t.type);if(t.instance===m.getCurrentInstanceId())if("app.front.search"===c.current.name){var d=h.findNavItemById(t.uid);angular.isDefinedAndFilled(d)&&(s.slug=E.translate(d.slugFull)||s.slug)}else{var p=h.findNavItemBySlug(l.slug),f=e.get(p,"children",[]),g=angular.isDefinedAndFilled(e.find(f,{id:t.id}));!angular.isDefinedAndFilled(l.slug)||!g&&h.findNavItemById(t.id)||(s.slug=l.slug+"/"+o)}else{var v=m.instanceKeyToInstanceFromSiblings(t.instance,!0);angular.isDefinedAndFilled(v)&&(s.instance=v.slug)}return angular.isDefinedAndFilled(a)&&angular.isUndefinedOrEmpty(s.instance)&&(s.instance=a),r&&(s["#"]="comments"),i?u+"("+angular.toJson(s)+")":c.href(u,s,{absolute:n})},_.prototype.getLinkTarget=function(t){return e.get(t,"instance")!==m.getCurrentInstanceId()||E.hasTranslations(e.get(t,"link",!0))?"same_tab"!==m.getProperty(d.INSTANCE_PROPERTIES.CONTENT_LIST_LINK_OPEN_NEW_TAB)||E.hasTranslations(e.get(t,"link",!0))?L:N:P},_.prototype.getSlug=function(t,n){var r=this;if(angular.isUndefinedOrEmpty([t,n],"some"))return o.reject();var i={fields:"slug",instance:n,uid:t};return o((function(t,n){r.Api.get(i,(function(n){var r=e.get(n,"slug",{});t(r)}),(function(e){n(e)}))}))},_.prototype.getStateName=function(e){switch(e){case g.CONTENT_TYPES.COMMUNITY:return"app.front.community";default:return"app.front.content-get"}},_.prototype.getViewMode=function(){return this.viewMode},_.prototype.getWriter=function(n,r){r=!0===r?t.get("User").getConnected():r;var i=e.get(n,"writerDetails");return angular.isUndefinedOrEmpty(i)?e.get(n,"authorDetails",angular.isObject(r)?r:void 0):i},_.prototype.getWriterFullName=function(e){if(angular.isUndefinedOrEmpty(e))return"";var n=t.get("User"),r=["firstName","lastName"];return O.hasMultiple(e.writerDetails,r)?n.getUserFullName(e.writerDetails):O.hasMultiple(e.authorDetails,r)?n.getUserFullName(e.authorDetails):""},_.prototype.goTo=function(e){angular.isUndefinedOrEmpty(e)||(E.hasTranslations(e.link,!0)?u.open(E.translate(e.link),"_blank"):h.goTo("app.front.content-get",e.id,e.instance,e.slug))},_.prototype.hasChanges=function(){var e=this.getCurrent(),t=angular.fastCopy(e,void 0,!0);if(angular.isDefinedAndFilled(t)){this.cleanForHasChanges(t);var r=angular.fastCopy(this.originalContent,void 0,!0);this.cleanForHasChanges(r);var a=angular.equals(r,t);return!a&&n.search().debug&&(console.group("Content changes"),i.debug("Original content:",r,this.originalContent),i.debug("Current content:",t,e),console.groupEnd()),!a}return!1},_.prototype.isEditable=function(e,n){e=Boolean(e),n=Boolean(n);var r=this.getCurrent();if("template"===r.type||!r.customContentTypeDetails||!r.customContentTypeDetails.isWorkflowEnabled)return!0;if(r.customContentTypeDetails.isWorkflowEnabled){var i=t.get("UserAccess");if(r.status!==d.CONTENT_STATUS.ARCHIVE.value&&(r.status===d.CONTENT_STATUS.DRAFT.value||r.status===d.CONTENT_STATUS.TO_VALIDATE.value&&e||r.status===d.CONTENT_STATUS.LIVE.value)&&i.isUserAllowed("CUSTOM_CONTENT_EDIT",{checkContent:n,content:r,customContentTypeId:r.customContentType}))return!0}return!1},_.prototype.isWorkflowEnabled=function(t){var n=[g.CONTENT_TYPES.CUSTOM_LIST,g.CONTENT_TYPES.DIRECTORY];return e.get(t,"customContentTypeDetails.isWorkflowEnabled",!1)&&!e.includes(n,t.type)},_.prototype.postGet=function(e,t){return this._postGet(e,t)},_.prototype.registerPreSaveMethod=function(t){D=angular.isFunction(t)?t:e.identity},_.prototype.setAction=function(e){this.action=e},_.prototype.setDefaultLang=function(t){angular.isUndefinedOrEmpty(t)||e.set(this.defaultParams,"lang",t)},_.prototype.setViewMode=function(e){this.viewMode=e},_.prototype.unregisterPreSaveMethod=function(){D=e.identity},_.prototype.updateStatus=function(e,t,n,r,i){r=r||angular.noop,i=i||angular.noop;var a=O.toCamelCase(t),o=angular.isFunction(this.Api[a])?this.Api[a]:this.Api.updateStatus,s={comment:n,status:t,uid:e};o(s,r,i)},_.prototype.init=function(){this.defaultParams={customerId:f.getCustomerId(),instanceId:m.getCurrentInstanceId(),lang:E.getLang("current")}},_}();return{createAbstractContentService:function(e,t){return t=t||{autoInit:!1,objectIdentifier:"uid"},new S(e,t)},proto:S}}t.$inject=["$injector","$location","$log","$q","$sanitize","$state","$stateParams","$window","Config","ContentTemplate","Customer","InitialSettings","Instance","LumsitesBaseService","MainNav","Metadata","Translation","User","Utils","Widget"],angular.module("Services").service("AbstractContent",t)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u,d,p,f,g){function m(){if(!angular.isUndefinedOrEmpty(y.content)){var e=y.forceThumbnailFullSize||"cover"===y.viewMode?1920:512;y.thumbnailURL=i.getCroppedThumbnailFromRootContent(y.content,!0,e,h)}}function v(){var e=angular.isUndefined(y.fields)?s.getProperty(t.INSTANCE_PROPERTIES.CONTENT_FIELDS):y.fields,n=!1;y.fieldsToDisplay=[],angular.forEach(e,(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=e;angular.isObject(e)||(t={enable:!0,name:e}),t.enable&&y.fieldsToDisplay.push(t),"metadata"===t.name&&t.enable&&(n=!0)}})),E=n?u.getMetadataClasses(y.content.metadata,"content-block--metadata-"):[]}var h,y=this,E=[];y.classes=[],y.fieldsToDisplay=[],y.htmlFormatted="",y.thumbnailURL=void 0,y.Content=n,y.CustomContentType=r,y.Document=i,y.Instance=s,y.Metadata=u,y.Translation=p,y.User=f,y.Utils=g,y.displaySource=function(){var e=o()(y.content,"properties.duplicateContent");if(angular.isUndefinedOrEmpty(e))return!1;var t=o()(n.getWriter(y.content),"id"),r=o()(n.getWriter(y.content.properties.duplicateContent),"id");return r!==t},y.getClasses=function(){g.empty(y.classes),angular.isArray(y.classes)||(y.classes=[]),y.resetStyle||y.classes.push("content-block--default-style");var e=y.theme||"light";y.classes.push("content-block--theme-".concat(e));var t=y.viewMode||"list";y.classes.push("content-block--view-mode-".concat(t)),angular.isDefinedAndFilled(y.thumbnailPosition)&&y.classes.push("content-block--".concat(y.thumbnailPosition,"-thumbnail"));var n=y.blockSize||"l";y.classes.push("content-block--size-".concat(n)),angular.isDefinedAndFilled(y.hAlign)&&y.classes.push("content-block--h-align-".concat(y.hAlign)),!angular.isUndefinedOrEmpty(o()(y.content,"id"))&&d.hasUnreadNotifications(y.content.id)&&y.classes.push("content-block--unread"),angular.isUndefinedOrEmpty(o()(y.content,"feedKeys"))||!angular.isUndefinedOrEmpty(a.ALL)&&c()(y.content.feedKeys,a.ALL.id)||y.classes.push("content-block--is-restricted"),p.hasTranslations(y.content.link,!0)&&y.classes.push("content-has-external-link");var r=o()(y.content,"properties.class");return angular.isDefinedAndFilled(r)&&Array.prototype.push.apply(y.classes,g.getCustomClass(r,"")),angular.isDefinedAndFilled(E)&&Array.prototype.push.apply(y.classes,E),y.classes},y.getMetadataFunctionalInnerId=function(e){var t=u.getMetadataFromKey(e,!1,!0),n=o()(t,"functionalInnerId");return angular.isDefinedAndFilled(n)?"content-block-metadata__metadata--".concat(n):""},y.isMetadataEmpty=function(e){return angular.isDefinedAndFilled(e)},e.$on("metadata-refactored",(function(){v()})),angular.isDefinedAndFilled(y.parentId)?(e.$on("widget-content-list-size-update",(function(e,t,n){y.parentId!==t||angular.isUndefinedOrEmpty(n)||(y.blockSize=n)})),e.$on("widget-content-list-theme-update",(function(e,t,n){y.parentId!==t||angular.isUndefinedOrEmpty(n)||(y.theme=n)}))):e.$on("cropper-preview-size-change",(function(){return m()})),y.fullExcerpt=!angular.isUndefined(y.fullExcerpt)&&y.fullExcerpt,y.excerpt=y.excerpt||s.getProperty(t.INSTANCE_PROPERTIES.CONTENT_LIST_EXCERPT),h=g.isDesignerMode()?p.inputLanguage:p.getLang("current"),m(),v(),y.displayInstance&&s.getInstanceById(y.content.instance,(function(e){y.instanceDetails=e})),angular.isUndefinedOrEmpty(y.parentId)&&(y.parentId="content-block-".concat(Object(l.b)())),y.fullExcerpt&&(y.htmlFormatted=g.getReadableHtmlContent(p.translate(n.getExcerpt(y.content,!0))))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{blockSize:"@?",content:"<",contentClick:"&",displayAnalyticsViews:"<?",displayInstance:"<?",excerpt:"@?",fields:"<?",forceThumbnailFullSize:"<?",fullExcerpt:"<?",hAlign:"@?",hideThumbnail:"<?",metadataParent:"<?",parentId:"@?",resetStyle:"<?",theme:"@?",thumbnailPosition:"@?",viewMode:"@?"},templateUrl:"/client/front-office/modules/content/common/views/content-block.html"}}n.r(t),n.d(t,"ContentBlockController",(function(){return r})),n.d(t,"ContentBlockDirective",(function(){return i}));var a=n(4),o=n.n(a),s=n(17),c=n.n(s),l=n(35);r.$inject=["$scope","Config","Content","CustomContentType","Document","Feed","Instance","Metadata","Notification","Translation","User","Utils"],angular.module("Directives").directive("lsContentBlock",i)},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o,s,c){function l(){var e=angular.fastCopy(i.displayList(i.CURRENT_INSTANCE_CCT_LIST_KEY));u.allowedCustomContentTypes=e.filter((function(e){return c.isUserAllowed("CUSTOM_CONTENT_EDIT",{customContentTypeId:e.uid})})),u.canCreateContent=d&&angular.isDefinedAndFilled(u.allowedCustomContentTypes)}var u=this,d=!1;u.DROPDOWN_ID="dropdown-content-create-button",u.allowedCustomContentTypes=[],u.canCreateContent=!1,u.canCreateFromScratch=!1,u.currentListKey="template-list-",u.CustomContentType=i,u.Template=o,u.selectCustomContentType=function(e,t){e.stopPropagation(),angular.isUndefinedOrEmpty(t)||(u.selectedCustomContentType=t,u.canCreateFromScratch=!u.selectedCustomContentType.createFromScratchLocked||c.canManageInstanceSettings(),u.currentListKey="template-list-"+u.selectedCustomContentType.uid,o.cacheFilterize({customContentType:u.selectedCustomContentType.uid,visibleInheritedOnly:!1},void 0,void 0,u.currentListKey))},e.$on("lx-dropdown__close",(function(e,t){t.uuid===u.DROPDOWN_ID&&n((function(){u.selectedCustomContentType=void 0}))})),e.$on("main-nav-loaded",(function(){u.init()})),u.init=function(){a.is.initializing||angular.isUndefinedOrEmpty(r.getCurrent().navigation)||(u.currentPageNavItem=a.findNavItemBySlug(t.slug),angular.isUndefinedOrEmpty(u.currentPageNavItem)||(d=c.isUserAllowed("MENU_DROP",{checkContent:!0,ignoreAdmins:!1,uuid:u.currentPageNavItem.uuid}),i.init().then(l)))},u.init()}e.$inject=["$scope","$stateParams","$timeout","Content","CustomContentType","MainNav","Template","User","UserAccess"],angular.module("Directives").directive("lsContentCreateButton",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"/client/front-office/modules/content/common/views/content-create-button.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){return e.createAbstractContentFormService(t)}e.$inject=["AbstractContentForm","Content"],angular.module("Services").service("ContentForm",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v,h,y,E,b,O,C,T,S,I,_,A,w,D,L,P,N,R,j,k,F,U,M){function x(e){var n=v.getCurrent();angular.isUndefinedOrEmpty(n.header)||C.get(n.header,(function(r){C.setCurrent(r),n=v.getCurrent(),e&&(n.header=void 0,n.headerDetails=C.getCurrent(),angular.isDefinedAndFilled(n.headerDetails)&&(n.headerDetails.id=void 0)),t.$broadcast("template__get-header")}))}function $(){var e=h.getElementList(v.getCurrent(),"widget","isGlobal",!0);angular.forEach(e,(function(e){var t=angular.fastCopy(a()(U.getGlobalWidgets(),{id:e.id}));angular.extend(e,t)}))}angular.noop(M);var B=this;B.FLOATING_TOOLBAR_BUTTONS=[],B.contentTypes=T.CONTENT_TYPES,B.isOldContentList=!1,B.Content=v,B.EndUserTranslation=O,B.Header=C,B.Layout=I,B.Utils=F,B.getMarginTop=function(){return F.getMarginTop(C,A,I)},B.currentView=r.current.name,B.currentParams=r.params,n.$on("$stateChangeSuccess",(function(e,t){B.currentView=r.current.name,B.currentParams=r.params})),B.getContentClass=function(){var e=[],t=v.getCurrent();if(angular.isUndefinedOrEmpty(t))return e;var n=v.getViewMode(),r=v.getAction();if(angular.isDefinedAndFilled(t.properties)&&t.properties.class&&(e=m()(e,F.getCustomClass(t.properties.class,"content--"))),angular.isDefinedAndFilled(t.metadata)){var i=L.getMetadataClasses(t.metadata,"content--metadata-");e=e.concat(i)}return"default"===n?e.push("content--designer-mode"):"simple"===n?e.push("content--simple-designer-mode"):"basic"===n&&e.push("content--basic-designer-mode"),"get"!==r||I.isCustomizationLocked?"get"===r&&I.isCustomizationLocked&&e.push("content--is-layout-customization-disabled"):e.push("content--is-layout-customization-enabled"),angular.isDefinedAndFilled(t.type)&&e.push("content--type-".concat(t.type.toLowerCase().replace("_","-"))),e},B.getHeaderHeight=function(){var e=document.querySelector("header .header-top"),t=document.querySelector("header .header-main-nav"),n=e?e.getBoundingClientRect().height:0,r=t?t.getBoundingClientRect().height:0;return n+r},function(){v.setAction(r.current.data.action),v.displayAllWidgets=!1,o((function(){v.displayAllWidgets=!0}),3e3);var n=v.getAction(),m=v.getCurrent();if("create"===n)!function(){var e,t,n=!1,r=i.contentType||"content",a=i.template||"posts",o="content"===r?i.type:a,l=N.getCurrent();angular.isDefinedAndFilled(i.template)&&l?(t=l,e=l.header,n=!0):t=R.createBaseTemplate(r,o,i.customContentType),n&&(v._fixGlobalWidgets(v.getCurrent()),$());var d={author:k.getConnected().email,customer:E.getCustomerId(),header:e,instance:S.getCurrentInstanceId(),properties:t.properties,status:g.CONTENT_DEFAULT_STATUS};if("content"===r)angular.extend(d,{template:t,type:i.type});else if("community"===r){angular.extend(d,{templates:[],type:T.CONTENT_TYPES.COMMUNITY}),angular.forEach(c.availableViews,(function(e){d.templates.push(u.getDefaultPageTemplate(e.id))}));var f=p.getCurrent();!i.fromCommunity||angular.isUndefinedOrEmpty(s()(f,"fromCommunity"))?p.createNew():d.templates=f.templates}v.setCurrent(d),x(!0);var m=v.getCurrent();"content"===r?(m.type===T.CONTENT_TYPES.DIRECTORY&&b.setCurrent({customer:E.getCustomerId(),instance:S.getCurrentInstanceId(),template:{components:[]}}),angular.isDefinedAndFilled(i.customContentType)&&(m.customContentType=i.customContentType,m.customContentTypeDetails=y.getCurrent())):"community"===r&&u.setAsCurrent(m,a),w.setUnassignedMedia([]),v.originalContent=angular.fastCopy(m)}();else if(i.isTemplate&&"true"===i.isTemplate)!function(){var e=i.contentType||"content",t="content"===e?N:p,n=t.getCurrent(),r={author:k.getConnected().email,customer:E.getCustomerId(),header:n.header,instance:S.getCurrentInstanceId(),properties:n.properties,status:g.CONTENT_DEFAULT_STATUS};"content"===e?angular.extend(r,{template:n,type:"template"}):"community"===e&&angular.extend(r,{templates:n.templates,type:T.CONTENT_TYPES.COMMUNITY}),v.setCurrent(r),$(),x();var a=v.getCurrent();"community"===e&&u.setAsCurrent(a,i.subTemplate),v.originalContent=angular.fastCopy(a)}();else if("edit"===n&&angular.isDefined(m.customContentType))!function(){var e=v.getCurrent();$(),e.type===B.contentTypes.CUSTOM_LIST&&R.reworkContentListTemplate(e)}();else if("edit"===n&&m.type===B.contentTypes.DIRECTORY)!function(){var e=v.getCurrent();b.get(e.externalKey,(function(t){R.reworkDirectoryTemplate(e,t.directoryProperties)}))}();else if("edit"===n&&m.type===B.contentTypes.COMMUNITY){var h=i.subTemplate||"posts";u.setAsCurrent(m,h),v.originalContent=angular.fastCopy(m)}m=v.getCurrent()||{};var O=P.is.initializing?P.initializationPromise:e.resolve();if(O.then((function(){P.setAllAsRead(s()(m,"uid",-1))})),"get"!==n&&j.getLang("current")!==j.inputLanguage?_.init():(v.createBreadcrumb(),B.isOldContentList="get"===n&&m.type===B.contentTypes.CUSTOM_LIST&&angular.isDefined(m.properties)&&(angular.isDefined(m.properties.showFilter)||angular.isDefined(m.properties.contentFields)),m.type!==B.contentTypes.CUSTOM_LIST||B.isOldContentList||R.reworkContentListTemplate(m)),v.setViewMode(function(){if(r.current.data.designer){var e=v.getCurrent();if(!angular.isUndefinedOrEmpty(e)){var t=v.getAction();if("style"===t)return"locked";var n=i.contentType||"content",a=e.status===g.CONTENT_STATUS.DRAFT.value;if(!v.isEditable(a,!0))return"locked";var o="content"===n?N:p;if(i.isTemplate||"template"===i.type)return"create"===t||o.isEditable(o.getCurrent())?"default":"locked";var s=e.template||{};return s.fixedLayout&&s.fixedWidgets?s.basicMode?"basic":"simple":"default"}}}()),function(){var e=v.getAction(),t=i.contentType||"content";return"community"===t&&("create"===e||"edit"===e)}()){var C=[],I=l()(r.current.name,"create")||l()(r.current.name,"edit")&&i.isTemplate,A="subTemplate";l()(r.current.name,"create")&&(A="template");var L=I?d()(c.availableViews,"id"):c.getAvailableViews(m);angular.forEach(L,(function(e){var n=angular.fastCopy(c.availableViews[e]);n.action=function(e){var n=a()(C,{id:i[A]});angular.isDefinedAndFilled(n)&&(n.isActive=!1),e.isActive=!0;var o={};o[A]=e.id,r.go(r.current.name,angular.extend(i,o),{notify:!1}),function(e){var n=i.contentType;if("community"===n){var r=v.getCurrent();angular.isUndefinedOrEmpty(r)||(t.$broadcast("close-component-settings"),u.updateTemplate(r),u.setAsCurrent(r,e),v.originalContent.template=angular.fastCopy(r.template))}}(e.id)},e===i[A]&&(n.isActive=!0),e===c.availableViews.media.id&&(s()(v.getCurrent(),"driveFolder.source")===D.PROVIDERS.microsoft||I&&k.isMicrosoft())&&(n.icon="folder",n.label="FRONT.COMMUNITY.DRIVE_VIEW"),e===c.availableViews.calendar.id&&(c.isOutlookCommunity(m)||I&&k.isMicrosoft())&&(n.label="FRONT.COMMUNITY.CALENDAR_VIEW"),C.push(n)})),C=f()(C,"order"),B.FLOATING_TOOLBAR_BUTTONS=[C]}}()}n.r(t),n.d(t,"ContentFrontController",(function(){return r}));var i=n(21),a=n.n(i),o=n(4),s=n.n(o),c=n(17),l=n.n(c),u=n(28),d=n.n(u),p=n(218),f=n.n(p),g=n(167),m=n.n(g);r.$inject=["$q","$rootScope","$scope","$state","$stateParams","$timeout","Community","CommunityTemplate","CommunityTemplates","Config","Content","ContentTemplate","CustomContentType","Customer","Directory","EndUserTranslation","Header","InitialSettings","Instance","Layout","MainNav","Features","Media","MediaConstant","Metadata","Notification","Template","TemplateBuilder","Translation","User","Utils","Widget","resolveCustomContentType"],angular.module("Controllers").controller("ContentFrontController",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/content/:methodKey",{},{archive:{isArray:!1,method:"POST",params:{methodKey:"archive"}},delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},follow:{isArray:!1,method:"POST",params:{methodKey:"follow"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/content/:id/:methodKey"},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},like:{isArray:!1,method:"POST",params:{methodKey:"like"}},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},setHomePage:{isArray:!1,method:"POST",params:{methodKey:"setHomepage"}},unarchive:{isArray:!1,method:"POST",params:{methodKey:"unarchive"}},unfollow:{isArray:!1,method:"DELETE",params:{methodKey:"unfollow"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/content/:id/:methodKey"},unlike:{isArray:!1,method:"POST",params:{methodKey:"unlike"}},updateStatus:{isArray:!1,method:"POST",params:{methodKey:"updateStatus"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("ContentFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var r=n(3),i=n.n(r);!function(){function n(n,r,a,o){function s(){var r=c.getCurrent(),a=c.getAction(),o=n.params;return function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:""},e.pick(r,["id","mediaThumbnail","customContentType","slug","status","template","title","adminKeys","author","authorId","editors","type","properties","canEdit","headerDetails","isHomepage","postTypes","securedRepository"]),{isDesignerMode:angular.isDefinedAndFilled(a)&&"get"!==a,view:o?o.view:null})}var c=r.createAbstractContentService(a);return c.reduxReducerName="content",c.reduxUpdateActionType="content/update",c.mapStateToRedux=s,c.mapReduxToAngular=function(e){var t=n.current.name;t.startsWith("app.front.content")||0!==Object.keys(e).length||c.setCurrent(e)},c.reduxReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"__angular__/content/update":return t.newState;case"ROOT/content/RESET_CONTENT":return{};default:return e}},c.initService=function(){o.subscribe(c),c.init()},c}n.$inject=["$state","AbstractContent","ContentFactory","ReduxStore"],angular.module("Services").service("Content",n)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,v,h,y,E,b,O,C,T,S,I,_,A){function w(e){("widget-search"===e.target.id||"input"!==e.target.nodeName.toLowerCase()&&"textarea"!==e.target.nodeName.toLowerCase())&&63!==e.keyCode&&(F.searchFilter.closed=!1,angular.element("#widget-search").focus())}function D(e){var n=t.parent(".component-row__grid"),i=e.pageX-n.offset().left,a=n.offset().left-t.offset().left,o=Math.round(n.outerWidth()/U),s=Math.round(a/o),c=Math.round(i/o+s),l=p()(F.nextCell,"width",0)+(F.cell.width-c);c>=3&&l>=3&&r.$apply((function(){F.cell.width=c,g()(F.nextCell,"width",l)})),r.$broadcast("cell-resize")}function L(){t.removeClass("component-cell--is-resizing"),e.off("mousemove",D),e.off("mouseup",L)}function P(){angular.isUndefinedOrEmpty(j)||t.css({left:j.offset().left,width:j.outerWidth()})}function N(){if(F.cell.properties.sticky&&"get"===d.getAction()){var e=angular.element(a).outerHeight(),n=t.find(".component-cell__components"),r=n.outerHeight(),i=n.position();angular.extend(i,{bottom:i.top-r}),R=R||r;var o,s=t.outerWidth(),c=t.outerHeight(),u=l.HEADER_FRONT_OFFSET-i.top,p=R>=e-u,f=p?-1*parseInt(t.css("padding-bottom"),10)-12:"initial",g=angular.element(".footer").get(0).getBoundingClientRect(),m=g.top+f<e;o=angular.isUndefinedOrEmpty(j)?t.offset():j.offset(),angular.element(a).scrollTop()+u>o.top&&"desk"===h.breakpoint?angular.isUndefinedOrEmpty(j)&&s>0?(j=t.clone(),j[0].innerHTML="",j.insertBefore(t).css({height:c,visibility:"hidden"}),t.css({left:o.left,overflow:"hidden",position:"fixed",top:"".concat(u,"px"),width:"".concat(s,"px"),zIndex:100}),p&&(t.css({bottom:f}),parseInt(t.css("top"),10)!==u&&t.css({top:u})),t.addClass("component-cell--is-sticky").appendTo("body")):(angular.isDefinedAndFilled(j)&&t.css({left:j.offset().left,width:j.outerWidth()}),p&&!m?(t.css({bottom:f}),parseInt(t.css("top"),10)!==u&&t.css({top:u})):m&&g.top<u+R?t.css({bottom:e-g.top-f,top:"initial"}):(parseInt(t.css("top"),10)!==u&&t.css({top:u}),parseInt(t.css("bottom"),10)!==f&&t.css({bottom:f}))):angular.isDefinedAndFilled(j)&&(j.replaceWith(t),t.removeAttr("style").removeClass("component-cell--is-sticky"),j=void 0)}}var R,j,k,F=this,U=12,M=[],x={},$={},B=[],W=!1;F.DIALOG_ID="cell-widgets-",F.isHidden={},F.searchFilter={closed:!0,sortAlpha:!1,widget:""},F.Content=d,F.Features=v,F.Layout=h,F.Translation=T,F.UserAccess=I,F.Widget=A,F.addCell=function(e){var t=u()(x.cells,{uuid:F.cell.uuid});if("right"===e&&t++,x.cells.length<=3){var n={components:[],type:"cell",uuid:Object(m.b)(),width:3};x.cells.splice(t,0,n),angular.forEach(x.cells,(function(e){e.width=U/x.cells.length})),r.$broadcast("cell-add")}else E.error(T.translate("CELL_ERROR_MAX_CELLS"))},F.addFirstWidget=function(){var e=n("searchWidget")(F.Widget.availableWidgets,F.searchFilter.widget);e=n("sortLatin")(e,"type","WIDGET_TYPE_",F.searchFilter.sortAlpha),angular.isDefinedAndFilled(e)&&F.toggleWidget(e[0],!0)},F.addRow=function(e,t){var n,r;e=e||"top",e=e.toLowerCase(),t=t||"in",t=t.toLowerCase();var i=d.getCurrent()||{};switch(t){case"in":case"inside":switch(r={cells:[{components:[],type:"cell",uuid:Object(m.b)(),width:6},{components:[],type:"cell",uuid:Object(m.b)(),width:6}],type:"row",uuid:Object(m.b)()},e){case"top":case"over":F.cell.components.splice(0,0,r);break;case"bottom":case"under":F.cell.components.push(r)}break;case"out":case"outside":r={cells:[{components:[],type:"cell",uuid:Object(m.b)(),width:U}],type:"row",uuid:Object(m.b)()},n=angular.isDefinedAndFilled($)?u()($.components,{uuid:x.uuid}):u()(i.template.components,{uuid:x.uuid}),"bottom"===e&&n++,angular.isDefined($)?$.components.splice(n,0,r):i.template.components.splice(n,0,r)}},F.addSelectedWidgets=function(){var e,t,n=0,r=[];if(angular.forEach(A.availableWidgets,(function(e){e.selected&&(t={isOverride:Boolean(e.isOverride),type:"widget",uuid:Object(m.b)(),widgetType:e.type},"question"===e.type&&(t.properties={isStandAlone:!0}),r.push(t),e.selected=!1)})),angular.forEach(A.getGlobalWidgets(),(function(e){e.selected&&(delete e.selected,t=angular.fastCopy(e),t.uuid=Object(m.b)(),r.push(t))})),angular.forEach(A.enabledExtensionWidgets,(function(e){e.selected&&(e.widgetType||(e.widgetType=e.type,e.type=e.category),delete e.selected,t=angular.fastCopy(e),t.uuid=Object(m.b)(),r.push(t))})),angular.forEach(r,(function(t){switch(k){case"top":case"over":F.cell.components.splice(0,0,t);break;case"bottom":case"under":F.cell.components.push(t)}0===n&&(e=t),n++})),k=void 0,y.close(F.DIALOG_ID),angular.isDefinedAndFilled(e)){var i=p()(M,0);angular.isDefinedAndFilled(i)&&(O.setCurrent(i),O.isFocused=!0,O.isActive=!1),s.setCurrent(F.cell),s.focus(),s.deactivate(),A.setCurrent(e),A.isFocused=!1,A.isActive=!0}},F.addWidgetFromEmptyCell=function(){angular.isUndefinedOrEmpty(F.cell.components)&&F.displayAvailableWidgets("top")},F.canDisplayLayoutActions=function(){var e=d.getCurrent();return!e.template.fixedLayout||"template"===e.type||I.canManageInstanceSettings()},F.deleteGlobalWidget=function(e){E.confirm(T.translate("CELL_DELETE_GLOBAL_WIDGET_CONFIRM"),T.translate("CELL_DELETE_GLOBAL_WIDGET_CONFIRM_DESCRIPTION"),{cancel:T.translate("CANCEL"),ok:T.translate("OK")},(function(t){if(t){var n=A.getGlobalWidgets();A.del(e.id,(function(){var t=u()(n,{id:e.id});t>-1&&(n.splice(t,1),d._fixGlobalWidgets(d.getCurrent())),E.success(T.translate("CELL_DELETE_GLOBAL_WIDGET_SUCCESS"))}),_.displayServerError)}}))},F.displayAvailableWidgets=function(e){k=e||"top",k=k.toLowerCase(),_.waitForAndExecute("#".concat(F.DIALOG_ID))},F.dragEnd=function(){A.isDragging=!1,angular.element(".content").removeClass("content--is-dragging"),"get"===d.getAction()&&f.saveUserTemplate(d.getCurrent(),S.getConnected()),angular.isUndefinedOrEmpty(A.getCurrent())&&(F.openWidgetSettings(void 0,void 0,F.dragged),F.dragged=void 0)},F.dragStart=function(e){O.resetRow(),s.resetCell(),A.resetWidget(),F.dragged=e,A.isDragging=e.uuid,angular.element(".content").addClass("content--is-dragging")},F.getCellClass=function(){_.empty(B),B.push("component-cell--w-".concat(F.cell.width));var e=p()(F.cell,"properties",{});e.plain&&B.push("component-cell--is-plain"),F.cell.width===U&&B.push("component-cell--is-full"),!angular.isUndefinedOrEmpty(F.cell.components)&&angular.isArray(F.cell.components)||B.push("component-cell--is-empty");var t=p()(s.getCurrent(),"uuid")===F.cell.uuid;return t&&s.isFocused&&B.push("component-cell--is-focused"),t&&s.isActive&&B.push("component-cell--is-active"),function(){if(angular.isUndefinedOrEmpty(F.cell.components))return!1;for(var e=0,t=F.cell.components.length;e<t;e++)if("row"!==F.cell.components[e].type)return!1;return"get"!==d.getAction()&&"default"===d.getViewMode()}()&&B.push("component-cell--has-only-rows"),angular.isDefinedAndFilled(e.class)&&Array.prototype.push.apply(B,_.getCustomClass(e.class,"component-cell--")),B},F.getCellComponentsStyle=function(){var e=F.cell.properties;e=e||{},e.style=e.style||{};var t=C.adjustSpacings(e.style.components);return F.cell.properties.plain&&angular.isUndefinedOrEmpty(t.shadowElevation)&&angular.isDefinedAndFilled(t.shadowOpacity)?t.defaultShadowElevation=1:delete t.defaultShadowElevation,C.adjustShadow(b.adjustBackgroundImage(o()({},t,e.style.components)))},F.getWidgetIcon=function(e){var t=c()(A.availableWidgets,{type:e.widgetType});return p()(t,"icon")},F.isComponentFullHeight=function(e){return"widget"===p()(e,"type")&&(!F.isHidden[e.uuid]&&p()(e,"properties.fullHeight",!1))},F.isWidgetDragEnabled=function(e){return("get"!==d.getAction()&&"default"===d.getViewMode()||"get"===d.getAction()&&d.getCurrent().isCustomizableLayout&&!h.isCustomizationLocked&&!F.cell.properties.customizationDisabled&&!F.customizationDisabled)&&"widget"===p()(e,"type")&&!A.isDragDisabled()},F.isWidgetLoadable=function(e){var t=d.getAction(),n=d.getCurrent();n=d.getCurrent()||{};var r=n&&n.properties&&n.properties.class&&n.properties.class.indexOf("lazy-loading")>-1,i=!0;return r&&"get"===t&&!F.Content.displayAllWidgets&&e.properties&&e.properties.class&&e.properties.class.indexOf("lazy-loading")>-1&&(i=!1),i},F.moveComponent=function(e){W||F.cell.components.splice(e,1)},F.openCellSettings=function(){var e=p()(M,0);angular.isDefinedAndFilled(e)&&(O.setCurrent(e),O.isFocused=!0,O.isActive=!1);var t=s.getCurrent();s.setCurrent(F.cell),s.blur(),t===F.cell?s.activate():(s.isActive=!1,i((function(){s.activate()}))),_.hasChild(s.getCurrent(),A.getCurrent())?(A.isFocused=!0,A.isActive=!1):A.resetWidget()},F.openWidgetSettings=function(e,t,n){if("widget"===p()(n,"type")){var r=p()(M,0);return angular.isDefinedAndFilled(r)&&(O.setCurrent(r),O.isFocused=!0,O.isActive=!1),s.setCurrent(F.cell),s.focus(),s.deactivate(),A.setCurrent(n),A.isFocused=!1,A.isActive=!0,n}},F.resizeCell=function(n){n.preventDefault(),t.addClass("component-cell--is-resizing"),e.on("mousemove",D),e.on("mouseup",L)},F.toggleWidget=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.selected=!e.selected||t,t&&F.addSelectedWidgets()},r.$on("editing-html",(function(e,t){W=t})),r.$on("lx-dialog__close-end",(function(e,t){F.DIALOG_ID===t&&(F.searchFilter.closed=!0,F.searchFilter.widget="",angular.element(a).off("keypress",w))})),r.$on("lx-dialog__open-start",(function(e,t){F.DIALOG_ID===t&&angular.element(a).on("keypress",w)})),r.$on("widget-resized",(function(){p()(F.cell,"properties.sticky",!1)&&!_.isDesignerMode()&&(R=void 0,N())})),r.$on("$destroy",(function(){(p()(F.cell,"properties.sticky",!1)||"get"===d.getAction())&&(angular.element(a).unbind("scroll",N),angular.element(a).unbind("resize",P),angular.isDefinedAndFilled(j)&&(t.remove(),j.remove(),j=void 0))})),function(){F.DIALOG_ID+=F.cell.uuid;var e=p()(F.cell,"properties",{});p()(e,"sticky")&&(e.plain=!0,"get"===d.getAction()&&(angular.element(a).bind("scroll",N),angular.element(a).bind("resize",P))),_.copyProperties(["backgroundColor","backgroundImage","backgroundPosition","backgroundSize"],"style","style.components",e,!0),_.copyProperties(["marginBottom","marginLeft","marginRight","marginTop","paddingBottom","paddingLeft","paddingRight","paddingTop"],"","style.components",e,!0),angular.isDefinedAndFilled(p()(e.style,"main.backgroundColor"))&&delete e.style.main.backgroundColor,F.cell.properties=e,M=s.getParents(d.getCurrent().template,F.cell),x=M[M.length-1],$=M[M.length-2],angular.forEach(F.cell.components,(function(e){F.isHidden[e.uuid]=!1}))}()}function i(e,t){return{bindToController:!0,compile:function(n){return t.compile(n,(function(t,n,r,i){n.on("mouseenter",(function(){"get"!==e.getAction()&&"default"===e.getViewMode()&&n.parents(".component-cell").addClass("component-cell--hover-disabled")})),n.on("mouseleave",(function(){"get"!==e.getAction()&&"default"===e.getViewMode()&&n.parents(".component-cell").removeClass("component-cell--hover-disabled")})),n.on("click",(function(n){if("get"!==e.getAction()&&"default"===e.getViewMode()){if(!angular.element(n.target).hasClass("component-cell__component")&&!angular.element(n.target.parentNode).hasClass("component-cell"))return;n.stopPropagation(),t.$apply((function(){i.openCellSettings()}))}})),t.$on("$destroy",(function(){n.off()}))}))},controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{cell:"=lsCell",customizationDisabled:"=lsCustomizationDisabled",last:"=lsLast",nextCell:"=lsNextCell"},templateUrl:"/client/front-office/modules/content/modules/cell/views/cell.html"}}n.r(t),n.d(t,"CellController",(function(){return r})),n.d(t,"LsCellDirective",(function(){return i}));var a=n(436),o=n.n(a),s=n(21),c=n.n(s),l=n(110),u=n.n(l),d=n(4),p=n.n(d),f=n(7),g=n.n(f),m=n(35);i.$inject=["Content","RecursionHelper"],r.$inject=["$document","$element","$filter","$scope","$timeout","$window","Cell","ConfigTheme","Content","ContentTemplate","Features","Layout","LxDialogService","LxNotificationService","Media","Row","Style","Translation","User","UserAccess","Utils","Widget"],angular.module("Directives").directive("lsCell",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){var a,o=this;o.isActive=!1,o.isFocused=!1,o.activate=function(){o.isActive=!0,angular.isDefinedAndFilled(a)&&t.$broadcast("designer-component__active","cell",a.uuid,o.isActive)},o.blur=function(){o.isFocused=!1,angular.isDefinedAndFilled(a)&&t.$broadcast("designer-component__focus","cell",a.uuid,o.isFocused)},o.deactivate=function(){o.isActive=!1,angular.isDefinedAndFilled(a)&&t.$broadcast("designer-component__active","cell",a.uuid,o.isActive)},o.deleteCurrent=function(n){r.confirm(i.translate("CELL_DELETE"),i.translate("CELL_DELETE_DESCRIPTION"),{cancel:i.translate("CANCEL"),ok:i.translate("OK")},(function(s){if(s)if(function(t){if(angular.isUndefinedOrEmpty(e.get(t,"components")))return!1;var n=0,r=!1;for(var i in t.components){var o=t.components[i];if(angular.isObject(o)&&!angular.isUndefinedOrEmpty(o.cells)){var s=o.cells;for(var c in n+=s.length,s){var l=s[c];if(angular.isObject(l)&&l.uuid===a.uuid){r=!0;break}}if(!r||n>1)return!0}}return!1}(n)){var c=o.getParents(n,a),l=c[c.length-1],u=angular.isDefined(c[c.length-2])?c[c.length-2]:n,d=l.cells.splice(l.cells.indexOf(a),1);if(l.cells.length>0)angular.forEach(l.cells,(function(e){e.width=12/l.cells.length}));else{var p=u.components.splice(u.components.indexOf(l),1);t.$broadcast("designer-component__delete","row",e.get(p,"uuid"))}t.$broadcast("designer-component__delete","cell",e.get(d,"uuid"))}else r.error(i.translate("CELL_ERROR_DELETE_LAST"))}))},o.focus=function(){o.isFocused=!0,angular.isDefinedAndFilled(a)&&t.$broadcast("designer-component__focus","cell",a.uuid,o.isFocused)},o.getCurrent=function(){return a},o.getParents=function(e,t){var n=e.components||e.cells||[];if(!angular.isUndefinedOrEmpty(n)&&angular.isArray(n))for(var r=[],i=0,a=n.length;i<a;i++){var s=n[i];if(s.uuid===t.uuid)return r;var c=o.getParents(s,t);if(angular.isDefined(c))return c.unshift(s),c}},o.resetCell=function(){angular.isDefinedAndFilled(a)&&t.$broadcast("designer-component__unset","cell",a.uuid),a=void 0,o.blur(),o.deactivate()},o.setCurrent=function(e){angular.isDefinedAndFilled(a)&&t.$broadcast("designer-component__unset","cell",a.uuid),a=e,angular.isDefined(a)&&(n.isActive=!1,angular.isDefinedAndFilled(a)&&t.$broadcast("designer-component__set","cell",a.uuid))}}t.$inject=["$rootScope","Header","LxNotificationService","Translation"],angular.module("Services").service("Cell",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){var c=this,l=["padding","paddingBottom","paddingLeft","paddingRight","paddingTop"],u=[];c.getRowClass=function(){if(o.empty(u),c.root){u.push("component-row--is-root");var t=e.get(a.getCurrent(),"uuid")===c.row.uuid;t&&a.isFocused&&u.push("component-row--is-focused"),t&&a.isActive&&u.push("component-row--is-active")}return angular.isDefinedAndFilled(e.get(c.row,"properties.class"))&&Array.prototype.push.apply(u,o.getCustomClass(c.row.properties.class,"component-row--")),u},c.getRowWrapperStyle=function(){var t=c.row.properties;return t=t||{},angular.isUndefinedOrEmpty(t)?{}:e.pick(t.style,l)},c.getRowStyle=function(){var t=c.row.properties;return t=t||{},angular.isUndefinedOrEmpty(t)?{}:i.adjustBackgroundImage(e.omit(t.style,l))},c.isRowFluid=function(){return e.get(c.row,"properties.fullWidth",!1)},c.openRowSettings=function(){var e=a.getCurrent();a.setCurrent(c.row),a.isFocused=!1,e===c.row?a.isActive=!0:(a.isActive=!1,n((function(){a.isActive=!0})));var t=a.getCurrent();o.hasChild(t,r.getCurrent())?(r.isFocused=!0,r.isActive=!1):r.resetCell(),o.hasChild(t,s.getCurrent())?(s.isFocused=!0,s.isActive=!1):s.resetWidget()},t.$on("widget-size-update",(function(){t.$broadcast("widget-size-update-in-row")})),function(){c.root=!!angular.isDefined(c.root)&&c.root,angular.isUndefined(c.row.properties)&&(c.row.properties={});var e=c.row.properties;angular.isDefinedAndFilled(e.color)&&(angular.isUndefined(e.style)&&(e.style={}),e.style.backgroundColor=e.color,delete e.color),o.copyProperties(["paddingBottom","paddingLeft","paddingRight","paddingTop","marginBottom","marginLeft","marginRight","marginTop"],"","style",e,!0)}()}function n(e,n){return{bindToController:!0,compile:function(t){return n.compile(t,(function(t,n,r,i){n.on("click",(function(n){if("get"!==e.getAction()&&"default"===e.getViewMode()){if(n.stopPropagation(),!t.vm.root||!angular.element(n.target).hasClass("component-row")&&!angular.element(n.target).hasClass("component-row__wrapper"))return;t.$apply((function(){i.openRowSettings()}))}})),t.$on("$destroy",(function(){n.off()}))}))},controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{customizationDisabled:"=lsCustomizationDisabled",root:"=lsRoot",row:"=lsRow"},templateUrl:"/client/front-office/modules/content/modules/row/views/row.html"}}n.$inject=["Content","RecursionHelper"],t.$inject=["$scope","$timeout","Cell","Media","Row","Utils","Widget"],angular.module("Directives").directive("lsRow",n)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n,r){var i,a=this;a.isActive=!1,a.isFocused=!1,a.deleteCurrent=function(t){n.confirm(r.translate("ROW_DELETE"),r.translate("ROW_DELETE_DESCRIPTION"),{cancel:r.translate("CANCEL"),ok:r.translate("OK")},(function(a){a&&(t.components.length>1?(t.components.splice(t.components.indexOf(i),1),e.$broadcast("designer-component__delete","row")):n.error(r.translate("ROW_ERROR_DELETE_LAST")))}))},a.getCurrent=function(){return i},a.resetRow=function(){i=void 0,a.isFocused=!1,a.isActive=!1,e.$broadcast("designer-component__unset","row")},a.setCurrent=function(n){i=n,angular.isDefined(i)?(t.isActive=!1,e.$broadcast("designer-component__set","row")):e.$broadcast("designer-component__unset","row")}}e.$inject=["$rootScope","Header","LxNotificationService","Translation"],angular.module("Services").service("Row",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i){function o(e){return c.apply(this,arguments)}function c(){return c=s()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(u.d)());case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(e){p.betaExtensions[e.id]=e}var p=t.createLumsitesBaseService(i,{autoInit:!1,objectIdentifier:"uid"});return p.extensions={},p.betaExtensions={},p.reduxReducerName="marketplace",p.reduxUpdateActionType="marketplace/update",p.addExtension=d,p.getEnabledExtensions=function(){return Object(u.c)(r.store.getState())},p.initBetaExtensions=function(){n.getCustomer().properties.remoteComponentServerComponents&&angular.forEach(JSON.parse(n.getCustomer().properties.remoteComponentServerComponents),(function(e,t){var r=[];angular.forEach(e.extensionComponents,(function(e){r.push({areSettingsLoading:!1,error:null,isComponentLoading:!1,type:l()(e.type.replace("Widget","")).toLowerCase(),name:e.componentName})}));var i={bundle:n.getCustomer().properties.remoteComponentServerUrlField,id:t+1,extensionOldId:e.bundleName,components:r,description:e.description,category:"widget",enabled:e.isActivated,properties:e.properties||{},type:"remote",name:{en:e.name.en||e.name},icon:{en:e.icon.en||e.icon},version:{bundle:n.getCustomer().properties.remoteComponentServerUrlField}};d(i)}))},p.mapReduxToAngular=function(e){var t=e.extensions;p.extensions=Object.keys(t).map((function(e){if(!t[e].extensionOldId)return t[e]})),p.extensions=t},p.mapStateToRedux=function(){return{betaExtensions:p.betaExtensions}},p.init=function(t){e(s()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.subscribe(p,!0),p.initBetaExtensions(),e.next=4,o(r.store.dispatch);case 4:t();case 5:case"end":return e.stop()}}),e)}))))},p}n.r(t),n.d(t,"ExtensionWidgetService",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(355),l=n.n(c),u=n(342);r.$inject=["$timeout","LumsitesBaseService","Customer","ReduxStore","WidgetFactory"],angular.module("Services").service("ExtensionWidget",r)},,,,,,,,,,,,,,function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){var a=this;a.ConfigTheme=t,a.Translation=n,a.Utils=i,a.getWidgetContentStyle=function(){return r.getWidgetContentStyle(e.get(a.parentCtrl.widget,"properties",{}))},this.setParentController=function(e){a.parentCtrl=e}}t.$inject=["ConfigTheme","Translation","Style","Utils"],angular.module("Directives").directive("widgetContent",(function(){return{bindToController:!0,controller:t,controllerAs:"widgetContent",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetContent","^widget"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-content.html",transclude:!0}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,o,c){function d(e){for(var t=/[?&]([^=#]+)=([^&#]*)/g,n={},r=t.exec(e);angular.isDefined(r);)n[r[1]]=r[2],r=t.exec(e);return n}function p(){var e,t=m.parentCtrl.widget,n=m.isHovering||"hover"===t.state,r=angular.fastCopy(l()(t,"properties.style.footer",{})),i="block"===l()(r,"main.display","block")?"wrapper":"main";return angular.forEach(["backgroundColor","backgroundImage"],(function(e){angular.isDefinedAndFilled(l()(r,[i,e]))&&delete r[i][e],angular.isDefinedAndFilled(l()(r,["hover",i,e]))&&delete r.hover[i][e]})),n?(e=angular.merge({},r,r.hover||{}),e.wrapper.borderTopWidth!==e.wrapper.borderBottomWidth!==e.wrapper.borderLeftWidth!==e.wrapper.borderRightWidth&&delete e.wrapper.borderWidth,e.wrapper.borderTopColor!==e.wrapper.borderBottomColor!==e.wrapper.borderLeftColor!==e.wrapper.borderRightColor&&delete e.wrapper.borderColor,e.wrapper.borderBottomLeftRadius!==e.wrapper.borderBottomRightRadius!==e.wrapper.borderTopLeftRadius!==e.wrapper.borderTopRightRadius&&delete e.wrapper.borderRadius,e.wrapper.marginTop!==e.wrapper.marginLeft!==e.wrapper.marginBottom!==e.wrapper.marginRight&&delete e.wrapper.margin,e.wrapper.paddingTop!==e.wrapper.paddingLeft!==e.wrapper.paddingBottom!==e.wrapper.paddingRight&&delete e.wrapper.padding,e):r}function f(t,n){t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},d(n)),m.footerLink=e.href("app.front.content-get",t),m.footerTarget="_self"}var g,m=this;m.isHovering=!1,m.buildFooterLink=function(e){var t=l()(e,"properties.more",{}),r=t.link,a=void 0===r?void 0:r,o=t.linkInstance,s=void 0===o?void 0:o;if(!angular.isUndefinedOrEmpty(a)){var d=c.translate(a);if(!angular.isUndefinedOrEmpty(d)){n.handleTaggingMap("widget-footer_click","button",{widget:e});var p={slug:d.split("?")[0]};Object(u.a)(d)?(g=!1,m.footerLink=d,m.footerTarget="_blank"):s&&s!==i.getCurrentInstanceId()?(g=!1,i.getInstanceById(s,(function(e){angular.isDefinedAndFilled(e)&&(p.instance=e.slug),f(p,d)}),(function(){f(p,d)}))):(g=!0,f(p,d))}}},m.getWrapperClasses=function(){var e=[],t=m.parentCtrl.widget.properties.style,n=l()(t,"footer.wrapper.flexDirection")||"row";return"row"===n&&e.push("widget-footer__wrapper--layout-left"),"row-reverse"===n&&e.push("widget-footer__wrapper--layout-right"),"column"===n&&e.push("widget-footer__wrapper--layout-top"),"column-reverse"===n&&e.push("widget-footer__wrapper--layout-bottom"),e},m.getWidgetFooterLabelStyle=function(){return p().label||{}},m.getWidgetFooterIconStyle=function(){return p().icon||{}},m.getWidgetFooterStyle=function(){var e=angular.fastCopy(p().main)||{};return o.adjustShadow(a.adjustBackgroundImage(e))},m.getWidgetFooterWrapperStyle=function(){var e=p().wrapper||{};return o.adjustShadow(a.adjustBackgroundImage(e))},m.handleFooterLink=function(t,n){if(g){t.preventDefault();var r=l()(n,"properties.more.link");if(!angular.isUndefinedOrEmpty(r)){var i=c.translate(r);if(!angular.isUndefinedOrEmpty(i)){var a=d(i)||{};a.slug=i.split("?")[0],e.go("app.front.content-get",a)}}}},m.setIsHovering=function(e){m.isHovering=e},m.init=function(){m.buildFooterLink(m.parentCtrl.widget)},this.setParentController=function(e){m.parentCtrl=e,m.init()}}function a(){return{bindToController:!0,controller:i,controllerAs:"widgetFooter",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["lsWidgetFooter","^widget"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-footer.html"}}n.r(t),n.d(t,"WidgetFooterDirective",(function(){return a}));var o=n(3),s=n.n(o),c=n(4),l=n.n(c),u=n(136);i.$inject=["$state","$window","Analytics","Instance","Media","Style","Translation"],angular.module("Directives").directive("lsWidgetFooter",a)},function(e,t,n){"use strict";function r(e,t,n,r,i,a){var s,c=this;c.getWidgetHeaderStyle=function(){var e=o()(c.parentCtrl.widget,"properties.style.header.main",{});return a.adjustShadow(i.adjustBackgroundImage(e))},c.getWidgetHeaderWrapperStyle=function(){var e=o()(c.parentCtrl.widget,"properties.style.header.wrapper",{});return a.adjustShadow(i.adjustBackgroundImage(e))},c.getWidgetHeaderIconStyle=function(){return i.adjustBackgroundImage(o()(c.parentCtrl.widget,"properties.style.header.icon",{}))},c.getWidgetHeaderLabelStyle=function(){return i.adjustBackgroundImage(o()(c.parentCtrl.widget,"properties.style.header.label",{}))},c.getWrapperClasses=function(){var e=[],t=c.parentCtrl.widget.properties.style,n=o()(t,"header.wrapper.flexDirection")||"row";return"row"===n&&e.push("widget-header__wrapper--layout-left"),"row-reverse"===n&&e.push("widget-header__wrapper--layout-right"),"column"===n&&e.push("widget-header__wrapper--layout-top"),"column-reverse"===n&&e.push("widget-header__wrapper--layout-bottom"),e},c.toggleWidgetContent=function(){var e=o()(c.parentCtrl.widget,"properties.isCollapsible");!s||angular.isDefined(e)&&!e||(s.toggleClass("widget--is-folded"),t.$emit("widget-resized"))},n((function(){s=e.closest(".widget--has-header")})),this.setParentController=function(e){c.parentCtrl=e},r((function(e){e.length>0&&(c.hasTranscluded=!0)}))}function i(){return{bindToController:!0,controller:r,controllerAs:"widgetHeader",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetHeader","^widget"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-header.html",transclude:!0}}n.r(t),n.d(t,"WidgetHeaderController",(function(){return r})),n.d(t,"WidgetHeaderDirective",(function(){return i}));var a=n(4),o=n.n(a);r.$inject=["$element","$scope","$timeout","$transclude","Media","Style"],angular.module("Directives").directive("widgetHeader",i)},function(e,t){!function(){"use strict";function e(e){var t=this;t.Widget=e,this.setParentController=function(e){t.parentCtrl=e}}e.$inject=["Widget"],angular.module("Directives").directive("widgetSettingsAdvanced",(function(){return{bindToController:!0,controller:e,controllerAs:"widgetSettingsAdvanced",link:function(e,t,n,r){r[0].setParentController(r[1])},require:["widgetSettingsAdvanced","^widgetSettings"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-settings-advanced.html",transclude:!0}}))}()},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a){var o=this;o.Share=n,o.Translation=r,o.Widget=a,function(){var e=a.getCurrent();e.properties=e.properties||{};var t=e.properties;angular.isUndefined(t.more)&&(t.more={})}(),this.setParentController=function(e){o.parentCtrl=e}}e.$inject=["$scope","ContentPicker","Share","Translation","Utils","Widget"],angular.module("Directives").directive("widgetSettingsDefault",(function(){return{bindToController:!0,controller:e,controllerAs:"widgetSettingsDefault",link:function(e,t,n,r){r[0].setParentController(r[1])},require:["widgetSettingsDefault","^widgetSettings"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-settings-default.html",transclude:!0}}))}()},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,o,s,l,d,f,m,h,E,O,T,I,A,D,P){function j(){var e=A.getCurrent();return e.properties=e.properties||{},e.properties}function k(e){var t=d.getMediaContentByLang(e.object,!0),n=e.object,r=n.docPath,i=n.override;!function(e){var t=j();angular.isUndefinedOrEmpty(t.files)&&(t.files=[]),S()(t.files,e)||t.files.push(e)}(r),function(e,t){var n=j();angular.isDefinedAndFilled(e)&&L()([e.name,e.description,e.thumbnail],T.hasTranslations)&&(angular.isUndefined(n.overrides)&&(n.overrides={}),n.overrides[t.docPath]=e)}(i,t)}function F(){var e=j().folder,t=e.categoryId,n=e.providerId;return le.getProviderCategory(n,t)}function U(){return C()(j().folder,"providerId")}function M(){return x.apply(this,arguments)}function x(){return x=u()(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j(),e.next=3,F();case 3:n=e.sent,!t.folder.categoryId&&angular.isDefinedAndFilled(n)&&(t.folder.categoryId=n.id),!t.folder.docPath&&angular.isDefinedAndFilled(n)&&(t.folder.docPath=n.rootPath);case 6:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function $(e){angular.forEach(ue.files,(function(t){var n=d.getMediaContentByLang(t,!0);angular.isUndefinedOrEmpty(e.overrides[n.fileId])||(t.override=e.overrides[n.fileId])}))}function B(e){return le.getProviderCategories(e).then((function(t){var n=v()(t,{canPick:!0});n=v()(n,(function(t){return S()(C()(R,e,[]),t.id)})),ue.pickableFolders=n}))}function W(e){var t,n=j();if(!angular.isUndefinedOrEmpty(n)){var r=(t={},p()(t,P.SELECTION_TYPES.COMMUNITY_FOLDER,["folder"]),p()(t,P.SELECTION_TYPES.LIST,["files"]),p()(t,P.SELECTION_TYPES.PICK,["folder","overrides"]),t);b()(r[e],(function(e){delete n[e]}))}}function G(e){var t=j();t.folder={providerId:e}}function Y(){var e;j().files=[],b()(ue.files,k),e=j(),b()(e.overrides,(function(t,n){var r=e.files.some((function(e){return e.indexOf(n)>-1}));r||delete e.overrides[n]})),angular.isUndefinedOrEmpty(e.overrides)&&delete e.overrides}function H(){var e=j();delete e.override,angular.isArray(ue.files)&&(ue.files=y()(ue.files)),function(e){var t=e.categoryId,n=e.folderType,r=e.object,i=e.providerId;if(!angular.isUndefinedOrEmpty(r)){var a=j();a.folder={categoryId:t,docPath:r.docPath,folderType:n,providerId:i}}}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ue.files,{folderType:N.FOLDER_TYPES.CUSTOM}))}function K(){return V.apply(this,arguments)}function V(){return V=u()(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j(),n=t.displayType,n===P.SELECTION_TYPES.PICK?Y():H(),e.next=4,ue.updateWidget(!0,!1);case 4:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function z(){return z=u()(c.a.mark((function e(t){var n,r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue.is.selected=void 0,W(t),t!==P.SELECTION_TYPES.PICK){e.next=7;break}return e.next=5,ue.updateWidget(!0,!0);case 5:e.next=17;break;case 7:if(t!==P.SELECTION_TYPES.COMMUNITY_FOLDER){e.next=15;break}return n=j(),r=l.getCurrent().driveFolder,i=r.docPath,a=r.source,n.folder={categoryId:"TEAM_DRIVE",docPath:i,folderType:N.FOLDER_TYPES.CUSTOM,providerId:a},e.next=13,ue.updateWidget(!0,!0);case 13:e.next=17;break;case 15:return e.next=17,ue.toggleProvider();case 17:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function q(){return q=u()(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j(),!angular.isUndefinedOrEmpty(t)){e.next=3;break}return e.abrupt("return");case 3:return delete t.folder,e.next=6,ue.updateWidget(!0,!0);case 6:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function X(){return X=u()(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!angular.isUndefinedOrEmpty(t)){e.next=2;break}return e.abrupt("return");case 2:if(r=j(),!angular.isUndefinedOrEmpty(n)){e.next=6;break}return w()(r,"overrides.".concat(t),{}),e.abrupt("return");case 6:return w()(r,["overrides",t,"description",n],""),w()(r,["overrides",t,"name",n],""),w()(r,["overrides",t,"thumbnail",n],""),e.next=11,ue.updateWidget(!0,!1);case 11:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Q(){return Q=u()(c.a.mark((function e(t){var n,r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=j(),!(angular.isUndefinedOrEmpty(t)||n.displayType!==P.SELECTION_TYPES.PICK||t<0||t>C()(n.files,"length",0))){e.next=3;break}return e.abrupt("return");case 3:return r=y()(ue.files.splice(t,1)),i=d.getMediaContentByLang(r.object||r,!0),a=C()(i,"fileId"),n.files.splice(t,1),angular.isDefinedAndFilled(n.overrides)&&angular.isDefinedAndFilled(a)&&delete n.overrides[a],ue.is.editing=void 0,e.next=11,ue.updateWidget(!0,!1);case 11:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function Z(){return Z=u()(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue.files.splice(t,1),e.next=3,ue.updateWidget(!0,!1,!0);case 3:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function J(){return J=u()(c.a.mark((function e(t,n,r){var i,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==N.FOLDER_TYPES.CATEGORY){e.next=4;break}return e.next=3,le.getProviderCategory(U(),n);case 3:i=e.sent.rootPath;case 4:return a=j(),o=a.folder,o.categoryId=n,o.docPath=i,o.folderType=t,ue.files=[],e.next=11,ue.updateWidget(!0,!r);case 11:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function ee(){return ee=u()(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!angular.isUndefined(t)&&!angular.isUndefinedOrEmpty(t.name)){e.next=2;break}return e.abrupt("return");case 2:return t.enable=!t.enable,e.next=5,ue.updateWidget(!0,!1);case 5:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e,t,n){return ne.apply(this,arguments)}function ne(){return ne=u()(c.a.mark((function e(r,o,s){var l,u,p,f,g,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=j(),r=!!angular.isUndefined(r)||Boolean(r),!o||s){e.next=18;break}if(ue.is.loading.files=!0,u=t.resolve(),ue.files=[],l.displayType!==P.SELECTION_TYPES.PICK){e.next=11;break}i.$evalAsync((function(){ue.categoryAllowFileManagement=!1,l.canManageFiles=!1})),angular.isDefinedAndFilled(l.files)&&(u=d.getMulti(l.files),u.then((function(e){var t=e.items,n=void 0===t?[]:t;ue.files=_()(n,(function(e){return{id:e.id,object:e}})),angular.isDefinedAndFilled(l.overrides)&&$(l)}))),e.next=15;break;case 11:if(l.displayType!==P.SELECTION_TYPES.LIST&&l.displayType!==P.SELECTION_TYPES.COMMUNITY_FOLDER){e.next=15;break}return e.next=14,M();case 14:C()(l.folder,"folderType")===N.FOLDER_TYPES.CUSTOM&&(p=l.folder,f=p.categoryId,g=p.docPath,m=p.providerId,u=d.promiseGet({docPath:g}),u.then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ue.files={categoryId:f,id:e.id,object:e,providerId:m}})));case 15:u.finally((function(){ue.is.loading.files=!1})),e.next=19;break;case 18:s&&(l.files=_()(ue.files,"object.docPath"));case 19:if(!angular.isFunction(ue.parentUpdateWidget)){e.next=22;break}return e.next=22,ue.parentUpdateWidget();case 22:r&&a((function(){n.$broadcast("widget-file-selection-settings",A.getCurrent().uuid)}));case 23:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(){return ie.apply(this,arguments)}function ie(){return ie=u()(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=A.getCurrent(),angular.isUndefinedOrEmpty(t.properties)&&(t.properties={}),angular.isUndefinedOrEmpty(t.properties.folder)&&(t.properties.folder={}),n=t.properties.folder.providerId,!angular.isUndefinedOrEmpty(n)){e.next=9;break}return e.next=7,ue.toggleProvider("local",!0);case 7:e.next=11;break;case 9:return e.next=11,B(n);case 11:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ae(){ue.isCommunityContext,le=e.get(de)}function oe(){return se.apply(this,arguments)}function se(){return se=u()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue.is.loading.providers=!0,e.next=3,le.getList();case 3:ue.providerList=e.sent,i.$apply((function(){ue.is.loading.providers=!1}));case 5:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ce(){return ce=u()(c.a.mark((function t(){var n,r,i,a,o,u,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ue.isCommunityContext=l.getCurrent().type===h.CONTENT_TYPES.COMMUNITY,ae(),t.next=4,oe();case 4:return t.next=6,re();case 6:return n=A.getCurrent(),r=n.uuid,i=j(),I.isDesignerMode()&&(a=e.get("FroalaService"),ue.FROALA_OPTIONS=a.getOptions(!1,!1,!1,!1,a.LIGHT_OPTIONS_TOOLBAR_BUTTONS)),ue.FILE_PICKER_ID+=r,t.next=12,ue.updateWidget(!1,!0);case 12:ue.isCommunityContext&&(j().currentCommunityDrive||i.displayType===P.SELECTION_TYPES.COMMUNITY_FOLDER)&&(de="CommunityDocumentProvider",o=l.getCurrent().driveFolder,u=o.docPath,d=o.source,i.folder={categoryId:"TEAM_DRIVE",docPath:u,folderType:N.FOLDER_TYPES.CUSTOM,providerId:d}),O.init(s.TAG_TYPE.MEDIA,D.LIST_KEY_MEDIA_TAGS);case 14:case"end":return t.stop()}}),t)}))),ce.apply(this,arguments)}var le,ue=this,de="DocumentProvider";ue.FILE_PICKER_ID="widget-file-selection-picker-",ue.FILE_TYPES_CONFIG={file:{icon:"file",pluralKey:"FRONT.FILE_TYPES.FILES",singularKey:"FRONT.FILE_TYPES.FILE"},image:{allowedFileTypes:E.DOCUMENT_TYPES.imagesAndFolders,icon:"image",pluralKey:"FRONT.FILE_TYPES.IMAGES",singularKey:"FRONT.FILE_TYPES.IMAGE"}},ue.FOLDER_TYPES=N.FOLDER_TYPES,ue.FROALA_OPTIONS={},ue.files=[],ue.is={editing:void 0,loading:{files:!1,providers:!0}},ue.isCommunityContext=!1,ue.mediaPickerParams={},ue.pickableFolders=[],ue.showMediaPickerDialog=!1,ue.Document=d,ue.DrivePicker=f,ue.MediaConstant=E,ue.Tag=O,ue.Translation=T,ue.Widget=A,ue.WidgetFileListConstant=D,ue.WidgetSettingsConstant=P,ue.changeMode=function(e){return z.apply(this,arguments)},ue.clearFolder=function(){return q.apply(this,arguments)},ue.debouncedUpdateWidget=g()(te,P.DEBOUNCE_DELAY),ue.eraseOverride=function(e,t){return X.apply(this,arguments)},ue.getFileDescription=function(e){var t=j();return d.getDescription(e,C()(t,"overrides[".concat(C()(e,"fileId"),"]")),T.inputLanguage)},ue.getFileName=function(e){var t=j();return d.getName(e,C()(t,"overrides[".concat(C()(e,"fileId"),"]")),T.inputLanguage)},ue.getFileTypeConfigProperty=function(e){return C()(ue.FILE_TYPES_CONFIG,[ue.fileTypes,e])},ue.getFroalaOptions=function(e){var t=T.translate_(e.description,T.inputLanguage,!0);return angular.isDefinedAndFilled(t)?ue.FROALA_OPTIONS.placeholderText=t:delete ue.FROALA_OPTIONS.placeholderText,ue.FROALA_OPTIONS},ue.hasTitle=function(e){var t=d.getMediaContentByLang(e,!0);return angular.isDefinedAndFilled(C()(t,"title"))},ue.openMediaPicker=function(){var e,t,n;return e=j(),t=e.displayType===P.SELECTION_TYPES.PICK,n=t?C()(ue.FILE_TYPES_CONFIG,[ue.fileTypes,"allowedFileTypes"]):void 0,ue.mediaPickerParams={allowFolderPick:!t,allowedProviders:t?_()(ue.providerList,"id"):C()(e.folder,"providerId"),allowedTypes:n,multiple:t,showFoldersOnly:!t},ue.showMediaPickerDialog=!0,ue.is.loading.files=!0,I.waitForAndExecute("#".concat(ue.FILE_PICKER_ID),o)},ue.removeFile=function(e){return Q.apply(this,arguments)},ue.removeOriginFile=function(e){return Z.apply(this,arguments)},ue.selectFolder=function(e,t,n){return J.apply(this,arguments)},ue.toggleField=function(e){return ee.apply(this,arguments)},ue.toggleFile=function(e){if(!angular.isUndefinedOrEmpty(e)){var t=j();ue.is.editing=ue.is.editing===e?void 0:e;var n=C()(t,"overrides[".concat(e,"]"));angular.isDefinedAndFilled(ue.is.editing)?(t.overrides=t.overrides||{},t.overrides[e]=t.overrides[e]||{description:{},name:{},thumbnail:{}}):angular.isDefined(n)&&angular.isUndefinedOrEmpty([n.name,n.description,n.thumbnail],"every")&&delete t.overrides[e]}},ue.toggleProvider=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=j(),i=C()(r.folder,"providerId");return!angular.isDefinedAndFilled(i)||e!==i||t||n?(G(e),B(e).then((function(){return ue.selectFolder(N.FOLDER_TYPES.CATEGORY,C()(y()(ue.pickableFolders),"id"),t)}))):ue.updateWidget(!0,!0)},ue.updateWidget=te,i.$on("abstract-picker__close-end",(function(e,t){t===ue.FILE_PICKER_ID&&(angular.isDefinedAndFilled(ue.files)&&i.$apply(u()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:case"end":return e.stop()}}),e)})))),a((function(){ue.showMediaPickerDialog=!1,ue.is.loading.files=!1})))})),i.$on("inputLanguage",u()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.updateWidget(!1,!1);case 2:case"end":return e.stop()}}),e)})))),function(){ce.apply(this,arguments)}()}function a(){return{bindToController:!0,controller:i,controllerAs:"vm",require:["widgetSettingsFileSelection","^widgetSettings"],restrict:"E",scope:{fileTypes:"@?",parentUpdateWidget:"&?updateWidget"},templateUrl:"/client/front-office/modules/content/modules/widget/common/views/partials/widget-settings-file-selection.html",transclude:!0}}n.r(t),n.d(t,"WidgetSettingsFileSelectionDirective",(function(){return a}));var o,s=n(6),c=n.n(s),l=n(10),u=n.n(l),d=n(3),p=n.n(d),f=n(71),g=n.n(f),m=n(75),v=n.n(m),h=n(51),y=n.n(h),E=n(155),b=n.n(E),O=n(4),C=n.n(O),T=n(17),S=n.n(T),I=n(28),_=n.n(I),A=n(7),w=n.n(A),D=n(217),L=n.n(D),P=n(145),N=n(393);i.$inject=["$injector","$q","$rootScope","$scope","$timeout","AbstractPicker","Config","Content","Document","DrivePicker","Features","InitialSettings","MediaConstant","Tag","Translation","Utils","Widget","WidgetFileListConstant","WidgetSettingsConstant"];var R=(o={},p()(o,P.MediaConstant.PROVIDERS.lumapps,[P.MediaConstant.CATEGORIES.mine,P.MediaConstant.CATEGORIES.library]),p()(o,P.MediaConstant.PROVIDERS.google,[P.MediaConstant.CATEGORIES.mine]),p()(o,P.MediaConstant.PROVIDERS.microsoft,[P.MediaConstant.CATEGORIES.mine]),p()(o,P.MediaConstant.PROVIDERS.community,[P.MediaConstant.CATEGORIES.library]),o);angular.module("Directives").directive("lsWidgetSettingsFileSelection",a)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){var o=this;o.CONTENT_PICKER_ID="widget-settings-more-",o.selectedContent={},o.Translation=i,o.Widget=a,o.hasCurrentWidgetTitle=function(){return a.shouldDisplayWidgetHeader(a.getCurrent().title)},o.openContentPicker=function(){n.open(o.CONTENT_PICKER_ID)},t.$on("content-picker__close-start",(function(t,n){o.CONTENT_PICKER_ID!==n||angular.isUndefinedOrEmpty(o.selectedContent)||(o.selectedContent.type===r.CONTENT_TYPES.COMMUNITY?a.getCurrent().properties.more.link=e.mapValues(o.selectedContent.slug,(function(e){return"ls/community/".concat(e)})):a.getCurrent().properties.more.link=o.selectedContent.slug,a.getCurrent().properties.more.linkInstance=o.selectedContent.instance,o.selectedContent={})})),o.CONTENT_PICKER_ID+=a.getCurrent().uuid}t.$inject=["$scope","ContentPicker","InitialSettings","Translation","Widget"],angular.module("Directives").directive("widgetSettingsFooter",(function(){return{bindToController:!0,controller:t,controllerAs:"widgetSettingsFooter",require:["widgetSettingsFooter","^widgetSettings"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-settings-footer.html",transclude:!0}}))}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t);var r=n(59);!function(){function e(e){var t=this;t.Widget=e,t.hasCurrentWidgetTitle=function(){return e.shouldDisplayWidgetHeader(e.getCurrent().title)};var n=Object(r.a)("widget");t.getAttributes=n,t.collapsedByDefaultActionAttributes=n({element:"settings",action:"collapsed-default-checkbox"}),t.enableCollapseActionAttributes=n({element:"settings",action:"collapsible-checkbox"}),this.setParentController=function(e){t.parentCtrl=e}}e.$inject=["Widget"],angular.module("Directives").directive("widgetSettingsHeader",(function(){return{bindToController:!0,controller:e,controllerAs:"widgetSettingsHeader",require:["widgetSettingsHeader","^widgetSettings"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-settings-header.html",transclude:!0}}))}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d){function f(){return v.availableStylesList=p()(a.displayList("widget"),{status:"LIVE"})}var m,v=this,h={content:{},footer:{},global:{},header:{}};v.AVAILABE_ALIGN_ITEMS=["stretch","center","flex-start","flex-end","baseline"],v.AVAILABLE_BACKGROUND_POSITIONS=["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"],v.AVAILABLE_BACKGROUND_SIZES=["auto","cover","contain"],v.AVAILABLE_FLEX_DIRECTIONS=["row","column"],v.AVAILABLE_FONT_WEIGHTS=["light","normal","semibold","bold"],v.AVAILABLE_JUSTIFY_CONTENT=["flex-start","flex-end","center","space-between","space-around"],v.availableStylesList=[],v.Cell=r,v.ConfigTheme=i,v.Style=a,v.Translation=s,v.Widget=d,v.hasStyleChanged=function(){return angular.isDefinedAndFilled(o()(d.getCurrent(),"style"))&&!l.equals(d.getCurrent().properties.style,m,["null"])},v.modelToSelection=function(e,t){angular.isDefinedAndFilled(e)?a.get(e,(function(e){t(e)}),void 0,"widget"):t(void 0)},v.restoreStyle=function(){d.getCurrent().properties.style=angular.fastCopy(m)},v.selectionToModel=function(e,t){angular.isDefined(e.id)?t(e.id):t(void 0)},v.setWidgetStyle=function(){var t={},n=d.getCurrent(),r=o()(n.properties.style,"main");angular.isDefinedAndFilled(n.properties.style.main)&&(t={margin:r.margin,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,marginTop:r.marginTop}),angular.isDefinedAndFilled(d.getCurrent().style)?a.get(d.getCurrent().style,(function(e){n.properties.style=angular.fastCopy(e.properties),m=m||angular.fastCopy(e.properties),angular.isDefinedAndFilled(t)&&(m.main=m.main||{},angular.extend(m.main,t),n.properties.style=m)}),void 0,"widget"):(a.setCurrent(void 0,"widget"),m=m||angular.fastCopy(h),angular.isDefinedAndFilled(t)&&(m.main=m.main||{},angular.extend(m.main,t)),n.properties.style=angular.fastCopy(m)),v.value=n.properties.style,e.$broadcast("widget-style",n.uuid,n.properties.style)},v.updateWidgetStyle=function(){n((function(){e.$broadcast("widget-style-settings",o()(d.getCurrent(),"uuid"))}))},v.onChange=function(e){var t=v.value,n=d.getCurrent(),r=n.properties;r.isBackwardedStyle=!1,t.content.height!==e.content.height&&(r.height=e.content.height),t.content.fullHeight!==e.content.fullHeight&&(r.fullHeight=e.content.fullHeight),angular.forEach(["header","footer"],(function(n){var r=o()(e,[n,"main","display"],"block"),i=o()(t,[n,"main","display"],"block");if(r!==i){var a="flex"===r?"wrapper":"main",s="flex"===r?"main":"wrapper";angular.isDefinedAndFilled(e[n][s])&&angular.isDefinedAndFilled(e[n][a])&&(e[n][a]=angular.extend(e[n][a],u()(e[n][s],d._WIDGET_HEADER_FOOTER_SWITCHABLE_PROPERTIES)),e[n][s]=c()(e[n][s],d._WIDGET_HEADER_FOOTER_SWITCHABLE_PROPERTIES))}})),r.style=e,v.value=e},v.onChangeState=function(e){var t=d.getCurrent();t.state=e},t.$on("widget-style",(function(e,t,n,r){r&&(v.Widget.getCurrent().style=void 0),t===d.getCurrent().uuid&&n.properties&&(m=angular.fastCopy(n.properties)),v.availableStylesList=f()})),t.$on("close-component-settings",(function(){if(v.hasStyleChanged()){var e=d.getCurrent();e.properties.style=angular.fastCopy(m),e.state=void 0}})),function(){var e=d.getCurrent();m=angular.fastCopy(e.properties.style);var t=e.properties||{};angular.isDefinedAndFilled(t.height)&&g()(t,"style.content.height",t.height),angular.isDefinedAndFilled(t.fullHeight)&&g()(t,"style.content.fullHeight",t.fullHeight),v.value=e.properties.style,v.availableStylesList=f(),a.get(e.style,(function(t){"DELETED"===t.status&&(e.style=void 0)}),void 0,"widget")}(),this.setParentController=function(e){v.parentCtrl=e}}function i(){return{bindToController:!0,controller:r,controllerAs:"widgetSettingsStyle",link:function(e,t,n,r){r[0].setParentController(r[1])},require:["lsWidgetSettingsStyle","^widgetSettings"],restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-settings-style.html",transclude:!0}}n.r(t),n.d(t,"WidgetSettingsStyleDirective",(function(){return i}));var a=n(4),o=n.n(a),s=n(130),c=n.n(s),l=n(125),u=n.n(l),d=n(75),p=n.n(d),f=n(7),g=n.n(f);r.$inject=["$rootScope","$scope","$timeout","Cell","ConfigTheme","Style","Translation","Utils","Widget"],angular.module("Directives").directive("lsWidgetSettingsStyle",i)},function(e,t){!function(){function e(e,t,n,r){var i=this;i.Content=e,i.Instance=t,i.Translation=n,i.Widget=r,angular.isUndefined(i.dblclickHelper)&&(i.dblclickHelper=!1),angular.isUndefined(i.hideMoreLink)&&(i.hideMoreLink=!1),angular.isUndefined(i.hideNoResults)&&(i.hideNoResults=!1),angular.isUndefined(i.hideTitle)&&(i.hideTitle=!1),angular.isUndefined(i.hideStyleTitle)&&(i.hideStyleTitle=i.hideTitle),angular.isUndefined(i.hideSpecificSettings)&&(i.hideSpecificSettings=!1),angular.isUndefined(i.hideSpecificStyles)&&(i.hideSpecificStyles=!1),r.settingsActiveTab=0}e.$inject=["Content","Instance","Translation","Widget"],angular.module("Directives").directive("widgetSettings",(function(){return{bindToController:!0,controller:e,controllerAs:"widgetSettings",restrict:"E",scope:{dblclickHelper:"<?",hideMoreLink:"<?",hideNoResults:"<?",hideSpecificSettings:"<?",hideSpecificStyles:"<?",hideStyleTitle:"<?",hideTitle:"<?"},templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-settings.html",transclude:!0,replace:!0}}))}()},function(e,t,n){"use strict";n.r(t);var r=n(31);!function(){function e(e,t,n,i,a){function o(){var e;return"palm"===a.breakpoint?e=1:"lap"===a.breakpoint?e="1"===f.groupBy?1:2:"desk"===a.breakpoint&&(e=angular.isDefinedAndFilled(f.groupBy)?f.groupBy:1),e}function s(e){t.find(".widget-slideshow__wrapper").css({"-moz-transform":"translate3d("+e+"%, 0, 0)","-ms-transform":"translate3d("+e+"%, 0, 0)","-o-transform":"translate3d("+e+"%, 0, 0)","-webkit-transform":"translate3d("+e+"%, 0, 0)",transform:"translate3d("+e+"%, 0, 0)"})}function c(){n.cancel(p),p=void 0}function l(){return Math.ceil(f.listLength/o())}function u(){return f.enableSlideshow&&angular.isDefinedAndFilled(o())&&f.listLength/o()>1}function d(e){f.autoPlay&&!e&&c(),(f.activeIndex+1)*o()>=f.listLength?f.activeIndex=0:f.activeIndex++,s(-1*f.activeIndex*100)}var p,f=this;f.activeIndex=0,f.countSlides=l,f.displayControls=u,f.getSlideshowClasses=function(){var e=[];return angular.isDefinedAndFilled(o())&&e.push("widget-slideshow--group-by-"+o()),f.enableSlideshow?e.push("widget-slideshow--slideshow"):e.push("widget-slideshow--no-slideshow"),angular.isUndefinedOrEmpty(f.theme)?e.push("widget-slideshow--theme-light"):e.push("widget-slideshow--theme-"+f.theme),u()?e.push("widget-slideshow--controls"):e.push("widget-slideshow--no-controls"),e},f.goToSlide=function(e){f.autoPlay&&c(),(e<f.activeIndex||e>f.activeIndex)&&s(-100*parseInt(e,10)),f.activeIndex=e},f.next=d,f.previous=function(){f.autoPlay&&c(),f.activeIndex?f.activeIndex--:f.activeIndex=l()-1,s(-1*f.activeIndex*100)},e.$on("reset-slideshow-index",(function(e,t){(angular.isUndefinedOrEmpty(t)||t===f.widget.uuid)&&(f.activeIndex=0,s(0))})),f.theme=f.theme||"light",(angular.isUndefined(f.slideInterval)||f.slideInterval<=0)&&(f.slideInterval=3),f.enableSlideshow&&f.autoPlay&&!Object(r.n)()&&(p=n((function(){d(!0)}),1e3*f.slideInterval))}e.$inject=["$scope","$element","$interval","$timeout","Layout"],angular.module("Directives").directive("widgetSlideshowItem",(function(){return{replace:!0,require:"^widgetSlideshow",restrict:"E",template:'<div class="widget-slideshow__block" ng-transclude></div>',transclude:!0}})).directive("widgetSlideshow",(function(){return{bindToController:!0,controller:e,controllerAs:"widgetSlideshow",replace:!0,require:["widgetSlideshow","^widget"],restrict:"E",scope:{autoPlay:"=",enableSlideshow:"=",groupBy:"@",listLength:"@",slideInterval:"@?",theme:"@?"},templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget-slideshow.html",transclude:!0}}))}()},function(e,t){!function(){"use strict";angular.module("Constants").constant("WidgetConstant",[])}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,m,v,h,y,O,C,T,S,I,_){function A(e){R=c()(e,"name","");var t=k.widget.properties.style,n=c()(k.widget.properties.style,"main");if(e.id&&e.id===k.widget.style){var r={};angular.isDefinedAndFilled(n)&&(r={margin:n.margin,marginBottom:n.marginBottom,marginLeft:n.marginLeft,marginRight:n.marginRight,marginTop:n.marginTop}),k.widget.properties.style=angular.fastCopy(e.properties)||{},angular.isDefinedAndFilled(r)&&(k.widget.properties.style.main=k.widget.properties.style.main||{},angular.extend(k.widget.properties.style.main,r)),L=angular.fastCopy(e)}else e.isDefault&&(angular.isUndefinedOrEmpty(t)||angular.isUndefinedOrEmpty([t.global,t.header,t.content,t.footer],"every"))&&(k.widget.style=e.id,k.widget.properties.style=angular.fastCopy(e.properties),L=angular.fastCopy(e));_.initStyleParams(k.widget,c()(k.cell,"properties.plain"))}function w(e,t){t?(T.swap(c()(k,"widget.properties.content",{}),e,T.inputLanguage),T.inputLanguage=e):angular.isFunction(P)&&(P(),P=void 0)}function D(){return c()(k,"widget.properties.isCollapsible",!0)}var L,P,N,R,j,k=this,F=[f.WIDGET_TYPES.HTML,f.WIDGET_TYPES.INTRO,f.WIDGET_TYPES.TIP],U=["margin","marginTop","marginRight","marginBottom","marginLeft"],M=!1;k.backwardCompatWidgetType=_.getBackwardCompatibleWidgetType(k.widget.widgetType),k.listkey=void 0,k.widgetSize=void 0,k.ConfigTheme=a,k.Content=s,k.Layout=v,k.Widget=_,k.designerMode=function(){return angular.isDefined(s.getAction())&&"get"!==s.getAction()},k.getListKey=function(){var e=k.listkey;return angular.isDefinedAndFilled(k.listKeySuffix)&&(e+=k.listKeySuffix),e},k.getWidgetClass=function(e){var t=c()(k,"widget.properties",{});if(angular.isDefinedAndFilled(k.widgetSize)&&e.push("widget--".concat(k.widgetSize)),angular.isDefined(t.fullHeight)&&t.fullHeight&&e.push("widget--is-full-height"),D()&&k.shouldDisplayWidgetHeader()&&e.push("widget--is-collapsible"),k.shouldDisplayWidgetHeader()&&c()(t,"isClosed")&&D()&&!I.isDesignerMode()&&e.push("widget--is-folded"),angular.isDefinedAndFilled(t.class)){var n=t.class.split(",");angular.forEach(n,(function(t){angular.isDefinedAndFilled(t)&&e.push("widget--".concat(t.trim()))}))}k.getWidgetTranslation(k.widget.title)&&e.push("widget--has-header");var r=c()(t,"more",{});angular.isDefinedAndFilled(r)&&k.getWidgetTranslation(r.label)&&k.getWidgetTranslation(r.link)&&e.push("widget--has-footer");var i=c()(t,"style.main",{});angular.isDefinedAndFilled(i.borderTopWidth)&&e.push("widget--has-border-top"),angular.isDefinedAndFilled(i.borderBottomWidth)&&e.push("widget--has-border-bottom");var a=c()(t,"style.content",{});angular.isDefinedAndFilled(a.theme)?e.push("widget--theme-".concat(a.theme)):e.push("widget--theme-light"),angular.isDefinedAndFilled(R)&&e.push("widget--shared-".concat(I.slugify(R)))},k.getWidgetCustomPath=function(){return"/client/front-office/specifics/overrides/".concat(m.getInstance().override,"/modules/content/modules/widget/modules/widget-").concat(k.backwardCompatWidgetType,"/views/widget-").concat(k.backwardCompatWidgetType,"-custom-section.html")},k.getWidgetMargin=function(){return"desk"!==v.breakpoint?{}:g()(c()(k,"widget.properties.style.main",{}),U)},k.getWidgetStyle=function(){var e=c()(k.widget.properties.style,"main",{});return!c()(k.cell,"properties.plain",!1)&&angular.isUndefinedOrEmpty(e.shadowElevation)&&angular.isDefinedAndFilled(e.shadowOpacity)?e.defaultShadowElevation=1:delete e.defaultShadowElevation,C.adjustShadow(y.adjustBackgroundImage(p()(e,U)))},k.getWidgetTranslation=function(e){var t=c()(k.widget,"properties",{});return _.getWidgetTranslation(e,t.noFallback)},k.langDetectOnBlur=function(){d.hasFeature("ml-language-detection")&&h.DETECT_LANG_ON_BLUR&&angular.isFunction(P)&&!angular.isUndefinedOrEmpty(c()(k,"widget.properties.content"))&&h.detectLang(c()(k.widget.properties.content,T.inputLanguage),T.inputLanguage,w,void 0,void 0,void 0,void 0,void 0,!0)},k.openWidgetSettings=function(){O.setCurrent(j[0]),O.isFocused=!0,O.isActive=!1,i.setCurrent(N),i.isFocused=!0,i.isActive=!1;var e=_.getCurrent();_.setCurrent(k.widget),_.isFocused=!1,e===k.widget?_.isActive=!0:(_.isActive=!1,r((function(){_.isActive=!0}))),C.setCurrent(L,"widget"),t.$broadcast("open-widget-settings",_.getCurrent().uuid)},k.setListKey=function(e){k.listkey=e},k.setWidgetSize=function(t){t=angular.isUndefinedOrEmpty(t)?e.outerWidth():t;var n=k.widgetSize;t<=400&&"s"!==n?k.widgetSize="s":t>400&&t<=700&&"m"!==n?k.widgetSize="m":t>700&&"l"!==n&&(k.widgetSize="l")},k.shouldDisplayWidgetFooter=function(){var e=c()(k.widget,"properties.more");return!angular.isUndefinedOrEmpty(e)&&!angular.isUndefinedOrEmpty([e.label,e.link],"some")&&angular.isDefinedAndFilled([k.getWidgetTranslation(e.label),k.getWidgetTranslation(e.link)],"every")},k.shouldDisplayWidgetHeader=function(){var e=c()(k.widget,"title");return _.shouldDisplayWidgetHeader(e)},k.updateWidgetVisiblityForUser=function(){angular.isUndefined(k.widget.properties.isHiddenByUser)?k.widget.properties.isHiddenByUser=!0:k.widget.properties.isHiddenByUser=!k.widget.properties.isHiddenByUser,"get"===s.getAction()&&l.saveUserTemplate(s.getCurrent(),S.getConnected())},n.$on("add-scope-info",(function(e,t){t!=="widgets.".concat(c()(k,"widget.uuid"))||M||E.ENABLE_ANGULAR_DEBUG_INFO||(I.addScopeInfo(t,n,!1,!1),M=!0)})),n.$on("widget-style",(function(e,t,n){t===k.widget.uuid&&A(n)})),function(){k.isHidden=k.isHidden||!1;var e=k.widget,t=c()(E.SCOPE_INFO,"widgets.".concat(e.uuid));if(!M&&!E.ENABLE_ANGULAR_DEBUG_INFO&&angular.isDefinedAndFilled(t)){var r=angular.isString(t)?t:".widget-".concat(e.uuid);I.addScopeInfo(r,n,!1,!1),M=!0}C.setCurrent(void 0,"widget");var i,a=s.getCurrent()||k.content,l="widget-".concat(e.uuid||k.content.id,"-");if(k.setListKey(l+(angular.isDefined(c()(a,"id"))?a.id:Object(b.b)())),angular.isDefined(s.getCurrent())&&(j=_.getParents(s.getCurrent().template,e)),angular.isDefinedAndFilled(j)&&(N=j[j.length-1]),angular.isUndefined(e.properties)&&(e.properties={},e.properties.isCollapsible=!1),angular.isUndefined(c()(e,"properties.isCollapsible"))&&(e.properties.isCollapsible=!0),angular.isDefinedAndFilled(c()(e,"properties.style"))&&(e.properties.style=(i=e.properties.style,angular.forEach(i,(function(e,t){i[t]=p()(i[t],(function(e){return angular.isUndefinedOrEmpty(e)}))})),i)),angular.isDefinedAndFilled(s.getCurrent())){var f=angular.isDefinedAndFilled(e.style)?C.get(e.style,void 0,void 0,"widget"):void 0;if(angular.isDefinedAndFilled(f))A(f);else{var g=o()(C.displayList("widget"),{isDefault:!0});angular.isDefinedAndFilled(g)?A(g):_.initStyleParams(k.widget,c()(k.cell,"properties.plain"))}}else _.initStyleParams(k.widget,c()(k.cell,"properties.plain"));d.hasFeature("ml-language-detection")&&u()(F,e.widgetType)&&(P=n.$watch((function(){return c()(k.widget,"properties.content.".concat(T.inputLanguage),"")}),(function(e,t){if(!h.isDetectingLang&&e!==t&&angular.isDefinedAndFilled(e)){if(0===e.indexOf("<p>")&&0!==t.indexOf("<p>"))return;h.detectLang(e,T.inputLanguage,w,void 0,void 0,void 0,void 0,void 0,!1)}})))}()}function i(e,t,n,i){var a=["classroom","community-list","content-list","directory-entry-list","file-list","instance-list","media-list","post-list","sharepoint-site-list","user-list"],o=a.concat(["leaderboard"]);return{bindToController:!0,controller:r,controllerAs:"widgetRoot",link:function(r,s,c,l){var d=r.widgetRoot.backwardCompatWidgetType,p=d,f="widget",g="",m=v()(y()(p));u()(Object.keys(O),"Widget".concat(m))?f="":u()(a,p)?(f+=" widget-list",g=' backward-compatible-type="'.concat(p,'"'),p="list"):f+=" widget-".concat(p," widget-").concat(r.widgetRoot.widget.uuid);var h=e("<widget-".concat(p,' widget="widgetRoot.widget"').concat(g,' class="').concat(f,'"></widget-').concat(p,">"))(r),E=[];s.append(h).on("click",(function(e){i.getAction()&&"get"!==i.getAction()&&"locked"!==i.getViewMode()&&(e.stopPropagation(),r.$apply(l.openWidgetSettings))}));var b=function(){!function(e,t,n,r){u()(o,r)?e.$emit("widget-size-update"):n.setWidgetSize(t.outerWidth())}(r,s,l,d)};r.$on("cell-add",(function(){E.push(t(b))})),r.$on("cell-resize",(function(){E.push(t(b))})),r.$on("designer-component__delete",(function(){E.push(t(b))})),angular.element(n).on("resize",(function(){E.push(t(b))})),E.push(t(b)),r.$on("$destroy",(function(){s.off(),angular.forEach(E,(function(e){t.cancel(e)}))}))},replace:!0,restrict:"E",scope:{cell:"=",content:"=?",customizationDisabled:"=",isHidden:"=?",listKeySuffix:"@?",widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/common/views/widget.html"}}n.r(t),n.d(t,"WidgetController",(function(){return r})),n.d(t,"WidgetDirective",(function(){return i}));var a=n(21),o=n.n(a),s=n(4),c=n.n(s),l=n(17),u=n.n(l),d=n(130),p=n.n(d),f=n(125),g=n.n(f),m=n(544),v=n.n(m),h=n(405),y=n.n(h),E=n(105),b=n(35),O=n(722);i.$inject=["$compile","$timeout","$window","Content"],r.$inject=["$element","$rootScope","$scope","$timeout","Cell","ConfigTheme","Content","ContentTemplate","Features","InitialSettings","Instance","Layout","MachineLearning","Media","Row","Style","Translation","User","Utils","Widget"],angular.module("Directives").directive("widget",i)},,,,,,,function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/widget/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("WidgetFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,g){function m(e,t,n){return angular.forEach(e,(function(e){var r=n[e];angular.isDefined(r)&&(n[t][e]=r,delete n[e])})),n}function h(e){return angular.isDefinedAndFilled(e.fontColor)&&(e.label.color=e.fontColor,delete e.fontColor),angular.isDefinedAndFilled(e.fontSize)&&(e.label.fontSize=e.fontSize,delete e.fontSize),angular.isDefinedAndFilled(e.fontWeight)&&(angular.isDefined(w[e.fontWeight])&&(e.label.fontWeight=w[e.fontWeight]),delete e.fontWeight),angular.isDefinedAndFilled(e.iconColor)&&(e.icon.color=e.iconColor,delete e.iconColor),angular.isDefinedAndFilled(e.iconSize)&&(e.icon.fontSize=e.iconSize,delete e.iconSize),e}function E(e){angular.forEach(["Top","Right","Bottom","Left"],(function(t){!function(e,t){var n="padding".concat(t),r="margin".concat(t),i=e.style,a=angular.isUndefinedOrEmpty(e[n])?i.global[n]:e[n],o=angular.isUndefinedOrEmpty(e[r])?i.global[r]:e[r];angular.isDefinedAndFilled(a)&&(angular.isUndefinedOrEmpty(i.content[n])&&(i.content[n]=a),angular.isUndefinedOrEmpty(i.header.wrapper[r])&&(i.header.wrapper[r]=a),angular.isUndefinedOrEmpty(i.footer.wrapper[r])&&(i.footer.wrapper[r]=a),delete i.global[n],delete e[n]),angular.isDefinedAndFilled(o)&&(i.main[r]=o,delete i.global[r],delete e[r])}(e,t)}))}function O(e){e.marginLeft=e.paddingLeft,e.marginRight=e.paddingRight,delete e.paddingLeft,delete e.paddingRight}function T(e,t){var n=[];return angular.isUndefinedOrEmpty(e)||angular.forEach(e.components,(function(e){n=n.concat(_.getWidgetsByType(e,t))})),n}function S(){return i.GLOBAL_WIDGETS}var I,_=a.createLumsitesBaseService(g,{autoInit:!1,objectIdentifier:"uid"}),A={cellType:["default","survey"],googleSync:!1,icon:"",type:""},w={bold:700,light:300,normal:400,semibold:500},D={main:["display","backgroundSize","backgroundColor","backgroundPosition","backgroundImage"],wrapper:["flexDirection","alignItems","justifyContent","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"]},L=!1;return _._WIDGET_HEADER_FOOTER_SWITCHABLE_PROPERTIES=["backgroundColor","backgroundImage","backgroundImageObject","backgroundPosition","backgroundSize","boxShadow","shadowElevation","shadowOpacity"],_.availableWidgets=[],_.defaultParams={},_.enabledExtensionWidgets=[],_.extensionWidgets=[],_.isActive=!1,_.isDragging=!1,_.isFocused=!1,_.context=void 0,_.settingsActiveTab=0,_.reduxReducerName="widget",_.create=function(e){return angular.extend(angular.fastCopy(A),e)},_.deleteCurrent=function(e){s.confirm(d.translate("WIDGET_DELETE"),d.translate("WIDGET_DELETE_DESCRIPTION"),{cancel:d.translate("CANCEL"),ok:d.translate("OK")},(function(n){if(n){var r=_.getParents(e,I),i=r[r.length-1];angular.isDefinedAndFilled(i.components)&&i.components.splice(i.components.indexOf(I),1),t.$broadcast("designer-component__delete","widget")}}))},_.findWidgetsByType=T,_.getBackwardCompatibleWidgetType=function(e){switch(e){case"manpower-directory-entry":return"manpower-directory-entry-list";case i.WIDGET_TYPES.COMMUNITY_POST_LIST:return"post-list";case i.WIDGET_TYPES.CLASSROOM:return"classroom";case i.WIDGET_TYPES.DIRECTORY_ENTRY:return"directory-entry-list";case i.WIDGET_TYPES.INSTANCE_LIST:return"instance-list";case i.WIDGET_TYPES.MEDIA:return"media-list";case i.WIDGET_TYPES.USER:return"user-list";default:return e}},_.getCurrent=function(){return I},_.getExtensionWidgets=function(){return _.extensionWidgets=n.extensions,_.extensionWidgets},_.getBetaExtensionWidgets=function(){return Object.keys(n.betaExtensions).map((function(e){return n.betaExtensions[e]}))},_.getEnabledExtensionWidgets=function(){return _.enabledExtensionWidgets=n.getEnabledExtensions(),_.enabledExtensionWidgets},_.getGlobalWidgets=S,_.getParents=function e(t,n){t=t||{};for(var r=t.components||t.cells||[],i=0,a=r.length;i<a;i++){if(n.uuid===r[i].uuid)return[];var o=e(r[i],n);if(angular.isDefined(o))return o.unshift(r[i]),o}},_.getWidgetsByType=function(e,t){var n=[];return angular.isUndefinedOrEmpty(e)||(t=t.toUpperCase(),"row"===e.type?n=n.concat(function(e,t){var n=[];return angular.isUndefinedOrEmpty(e)||angular.forEach(e.cells,(function(e){angular.isUndefinedOrEmpty(e)||angular.forEach(e.components,(function(e){n=n.concat(_.getWidgetsByType(e,t))}))})),n}(e,t)):"page"===e.type?n=n.concat(T(e,t)):"widget"===e.type&&e.widgetType.toUpperCase()===t&&n.push(e)),n},_.getWidgetTranslation=function(e,t){var n;if(!angular.isUndefinedOrEmpty(e))return n=f.isDesignerMode()?e[d.inputLanguage]:t?e[d.getLang("current")]:d.translate(e),n},_.initStyleParams=function(e,t){if(!angular.isUndefinedOrEmpty(e)){e.properties=e.properties||{},e.properties.style=e.properties.style||{};var n=angular.fastCopy(e.properties.style),r=e.properties,i=e.properties.style;angular.isUndefinedOrEmpty(i.main)&&(i.main={}),angular.isUndefinedOrEmpty(i.header)&&(i.header={});var a=i.header;angular.forEach(["main","wrapper","icon","label"],(function(e){angular.isUndefinedOrEmpty(a[e])&&(a[e]={}),angular.isDefined(D[e])&&m(D[e],e,a)})),angular.isUndefinedOrEmpty(i.content)&&(i.content={}),angular.isUndefinedOrEmpty(i.footer)&&(i.footer={});var o=i.footer;angular.forEach(["main","wrapper","icon","label"],(function(e){angular.isUndefinedOrEmpty(o[e])&&(o[e]={}),angular.isDefined(D[e])&&m(D[e],e,o)})),angular.isDefined(i.global)&&(O(a.wrapper),O(o.wrapper),angular.isUndefinedOrEmpty(i.global)&&delete i.global),angular.isDefinedAndFilled(r.color)&&(i.main.backgroundColor=r.color,r.veoliaWidgetColor=r.color,delete r.color);var s=["marginBottom","marginLeft","marginRight","marginTop"],c="style.main";if(angular.isDefinedAndFilled(r.paddingLeft)&&(i.global=i.global||{},i.global.paddingLeft=r.paddingLeft,delete r.paddingLeft),angular.isDefinedAndFilled(r.paddingRight)&&(i.global=i.global||{},i.global.paddingRight=r.paddingRight,delete r.paddingRight),angular.isDefinedAndFilled(i.global)){r.isBackwardedStyle=!0,E(r);var l="style.global",u=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"];f.copyProperties(C()(["backgroundSize","backgroundColor","backgroundPosition","backgroundImage"],s,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],u),l,c,r),f.copyPropertySet("borderColor",["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],l,c,r),f.copyPropertySet("borderRadius",u,l,c,r),angular.isDefinedAndFilled(p()(i,"global.boxShadow"))&&("cascade"===r.viewMode||"ungroup"===r.viewModeVariant?b()(r,"style.content.shadowElevation",r.style.global.boxShadow):b()(r,"style.main.shadowElevation",r.style.global.boxShadow)),delete i.global}f.copyProperties(s,"",c,r,!0),angular.isDefinedAndFilled(r.height)&&(i.content.height=r.height),angular.isDefinedAndFilled(r.fullHeight)&&(i.content.fullHeight=r.fullHeight),angular.isDefinedAndFilled(a.borderWidth)&&(a.wrapper.borderBottomWidth=a.borderWidth,delete a.borderWidth),angular.isDefinedAndFilled(a.icon)&&v()(a.icon)&&(r.headerIcon=a.icon,a.icon={}),angular.isDefinedAndFilled(a.height)&&(a.wrapper.height=a.height,delete a.height),h(a),f.copyPropertySet("borderColor",["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],"style.header","style.header.wrapper",r),angular.isDefinedAndFilled(o.borderWidth)&&(o.wrapper.borderTopWidth=o.borderWidth,delete o.borderWidth),angular.isDefinedAndFilled(o.height)&&(o.wrapper.height=o.height,delete o.height),h(o),f.copyPropertySet("borderColor",["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],"style.footer","style.footer.wrapper",r);var d="ungroup"===e.properties.viewModeVariant||t?"transparent":"#FFFFFF";"ungroup"===e.properties.viewModeVariant&&(i.main.backgroundColor="transparent"),!r.isBackwardedStyle||"transparent"!==o.main.backgroundColor&&"transparent"!==a.main.backgroundColor&&"transparent"!==i.content.backgroundColor||(i.main.backgroundColor="transparent",o.main.backgroundColor=o.main.backgroundColor||d,a.main.backgroundColor=a.main.backgroundColor||d,i.content.backgroundColor=i.content.backgroundColor||d),angular.toJson(n)!==angular.toJson(e.properties.style)&&(e.properties.stylesMigrated=!0)}},_.isDragDisabled=function(e){return angular.isDefined(e)&&(L=e),L},_.resetAvailableWidgets=function(){var t=e.get("ConfigInstance"),n=e.get("User");_.availableWidgets=o()(t.AVAILABLE_WIDGETS,(function(e){return e.googleSync&&!n.isMicrosoft()||!e.googleSync&&!e.isMicrosoft||e.isMicrosoft&&n.isMicrosoft()}))},_.resetWidget=function(){I=void 0,_.isFocused=!1,_.isActive=!1,t.$broadcast("designer-component__unset","widget")},_.saveGlobalWidget=function(e,t){e=angular.isUndefined(e)||!angular.isFunction(e)?y.a:e,t=angular.isUndefined(t)||!angular.isFunction(t)?y.a:t,_.save(I,(function(t){I.id=t.id;var n=u()(_.getGlobalWidgets(),{id:t.id});angular.isDefinedAndFilled(n)?f.swapObject(n,angular.fastCopy(I)):S().push(angular.fastCopy(I)),e()}),t)},_.setCurrent=function(e){angular.isDefinedAndFilled(I)&&(I.state="default"),I=e,angular.isDefinedAndFilled(e)?(r.isActive=!1,t.$broadcast("designer-component__set","widget")):t.$broadcast("designer-component__unset","widget")},_.shouldDisplayWidgetHeader=function(e){return!angular.isUndefinedOrEmpty(e)&&angular.isDefinedAndFilled(_.getWidgetTranslation(e))},_.reduxReducerName="widget",_.reduxUpdateActionType="widget/update",_.mapStateToRedux=function(){var e=_.getCurrent();return{currentWidget:e}},_.mapReduxToAngular=function(e){var n=e.currentWidget;I&&n&&!c()(I.properties.content,n.properties.content)&&(I.properties.content=angular.fastCopy(n.properties.content),t.$broadcast("content_refresh"))},_.initReduxStore=function(){l.subscribe(_,!0)},_.init=function(){_.defaultParams={},_.resetAvailableWidgets(),n.init((function(){_.getEnabledExtensionWidgets()}))},_}function i(){return function(e,t){var n=[];return angular.forEach(e,(function(e){(angular.isUndefined(e.context)||g()(e.context,t).length>0)&&n.push(e)})),n}}n.r(t),n.d(t,"WidgetService",(function(){return r})),n.d(t,"WidgetContextFilter",(function(){return i}));var a=n(75),o=n.n(a),s=n(85),c=n.n(s),l=(n(17),n(21)),u=n.n(l),d=n(4),p=n.n(d),f=n(157),g=n.n(f),m=n(193),v=n.n(m),h=n(33),y=n.n(h),E=n(7),b=n.n(E),O=n(167),C=n.n(O);r.$inject=["$injector","$rootScope","ExtensionWidget","Header","InitialSettings","LumsitesBaseService","LxNotificationService","ReduxStore","Translation","Utils","WidgetFactory"],angular.module("Services").service("Widget",r),angular.module("Filters").filter("widgetContext",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){var r=this;r.getWidgetClass=function(){var e=[];return r.parentCtrl.getWidgetClass(e),r.isWidgetEmpty()&&e.push("widget--is-empty"),e},r.isWidgetEmpty=function(){var t=e.get(r.widget,"properties.embedUrl");return angular.isUndefinedOrEmpty(r.parentCtrl.getWidgetTranslation(t))},r.isWidgetHidden=function(){return r.parentCtrl.isHidden=!r.parentCtrl.designerMode()&&!r.widget.properties.noResults&&r.isWidgetEmpty(),r.parentCtrl.isHidden},t.$on("widget-awesome-table-settings",(function(e,t){r.widget.uuid===t&&r.init()})),r.init=function(){if(!angular.isUndefinedOrEmpty(r.widget.properties.embedUrl)){var e=r.widget.properties.embedUrl.split("/");e.length<2||(r.viewId=e[e.length-2])}},this.setParentController=function(e){r.parentCtrl=e,"AwesomeTableViewInclude"in n&&delete n.AwesomeTableViewInclude,r.init()}}t.$inject=["$scope","$window"],angular.module("Widgets").directive("widgetAwesomeTable",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetAwesomeTable","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-awesome-table/views/widget-awesome-table.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(t){if("https://awesome-table.com"===t.origin&&angular.isObject(t.data)){var n=e.get(t,"data.setId"),r=c.getCurrent();r.properties=r.properties||{};var i=r.properties;angular.isDefinedAndFilled(n)&&(i.embedUrl="https://view-awesome-table.com/"+n+"/view"),u.updateWidget()}}var u=this;u.DIALOG_ID="awesome-table-dialog",u.displayHttpsWarning=!1,u.Translation=o,u.Widget=c,u.closeDialog=function(){angular.isUndefinedOrEmpty(c.getCurrent().properties.embedUrl)||a.close(u.DIALOG_ID)},u.removeSelectedTable=function(){var t=c.getCurrent(),n=e.get(t,"properties");angular.isUndefined(n)||(n.embedUrl=void 0,u.updateWidget())},u.isTableSelected=function(){return angular.isDefinedAndFilled(c.getCurrent().properties.embedUrl)},u.openDialog=function(){s.waitForAndExecute("#"+u.DIALOG_ID)},u.setTableToPreview=l,u.updateWidget=function(){r((function(){t.$broadcast("widget-awesome-table-settings",c.getCurrent().uuid)}))},n.$on("$destroy",(function(){i.removeEventListener("message",l)})),n.$on("lx-dialog__close-start",(function(e,t){var n=c.getCurrent(),r=n.properties||{};u.DIALOG_ID===t&&"https://view-awesome-table.com/undefined/view"===n.properties.embedUrl&&(r.embedUrl=void 0,r.height=void 0)})),i.addEventListener("message",l,!1)}t.$inject=["$rootScope","$scope","$timeout","$window","LxDialogService","Translation","Utils","Widget"],angular.module("Controllers").controller("WidgetAwesomeTableSettingsController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s){var c=this;c.Content=n,c.MainNav=a,c.Translation=s,c.back=function(){var e=n.getBreadcrumb(),r=e[e.length-2];angular.isDefinedAndFilled(o()(r,"slugFull"))&&t.go("app.front.content-get",{slug:s.translate(r.slugFull)})},c.getWidgetClass=function(){var e=[];return c.parentCtrl.getWidgetClass(e),c.isWidgetEmpty()&&e.push("widget--is-empty"),e},c.goToHome=function(){var t="";0===e.path().indexOf("/a/")&&(t="/a/".concat(r.getCustomerSlug())),t+="/".concat(i.getInstance().slug),e.path(t)},c.isWidgetEmpty=function(){return!a.isCallInProgress()&&angular.isUndefinedOrEmpty(n.getBreadcrumb())},c.isWidgetHidden=function(){return c.parentCtrl.designerMode()||c.widget.properties.noResults||a.isCallInProgress()||!angular.isUndefinedOrEmpty(n.getBreadcrumb())?c.parentCtrl.isHidden=!1:c.parentCtrl.isHidden=!0,c.parentCtrl.isHidden},this.setParentController=function(e){c.parentCtrl=e}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetBreadcrumb","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-breadcrumb/views/widget-breadcrumb.html"}}n.r(t),n.d(t,"widgetBreadcrumbDirective",(function(){return i}));var a=n(4),o=n.n(a);r.$inject=["$location","$state","Content","Customer","Instance","MainNav","Translation"],angular.module("Widgets").directive("widgetBreadcrumb",i)},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a){function o(){return a.empty(s.classes),angular.isArray(s.classes)||(s.classes=[]),s.parentCtrl.getWidgetClass(s.classes),s.isWidgetEmpty()&&s.classes.push("widget--is-empty"),s.classes}var s=this;s.classes=[],s.Content=r,s.Translation=i,s.isWidgetEmpty=function(){var e=s.parentCtrl.getListKey();return!r.isCallInProgress(e)&&angular.isUndefinedOrEmpty(r.displayList(e))},s.isWidgetHidden=function(){return s.parentCtrl.isHidden=!s.parentCtrl.designerMode()&&!s.widget.properties.noResults&&s.isWidgetEmpty(),s.parentCtrl.isHidden},s.openLink=function(e){var n=r.getCurrent();t.handleTaggingMap("breaking-news","news",{isHomePage:!!angular.isDefinedAndFilled(n)&&n.isHomepage,item:e})},e.$on("widget-style-settings",(function(e,t){s.widget.uuid===t&&o()})),s.init=function(){r.filterize({isFeatured:!0,maxResults:1,sortOrder:["-publicationDate","-createdAt"],type:n.AVAILABLE_CONTENT_TYPES.NEWS},void 0,void 0,s.parentCtrl.getListKey()),o()},s.setParentController=function(e){s.parentCtrl=e,s.init()}}e.$inject=["$scope","Analytics","Config","Content","Translation","Utils"],angular.module("Widgets").directive("widgetBreakingNews",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetBreakingNews","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-breaking-news/views/widget-breaking-news.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/calendar/:methodKey",{},{list:{method:"GET",params:{methodKey:"list"},isArray:!1},get:{method:"GET",params:{methodKey:"get"},isArray:!1}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CalendarFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t){function n(e,t){this._isCallInProgress=!1,this.fetchedResults=0,this.maxResults=0,this.requests=[],this.sort=e,this.cb=t}return n.prototype._addFetchedResults=function(e){this.fetchedResults+=angular.isArray(e)?e.length:0},n.prototype._getPendingRequests=function(){var t=[];return angular.forEach(this.requests,(function(n){e.get(n,"params.more",!1)&&t.push(n.method(n.params).$promise)})),t},n.prototype._getResultsSubset=function(){var t=this.requests.reduce((function(t,n){return t.events=e.union(t.events,n.items),t.more=t.more||n.params.more,t}),{events:[],more:!1});return t.events=e.sortBy(e.compact(t.events),this.sort).slice(0,this.maxResults),t},n.prototype._processResults=function(e){var t;this._setCallInProgress(!1),this._storeFulfilledResults(e),t=this._getResultsSubset(),this.cb(t.events,t.more)},n.prototype._storeFulfilledResults=function(e){var t=this;angular.forEach(e,(function(e,n){"fulfilled"===e.state&&(t._storeRequestStates(e.value,n),t._addFetchedResults(e.value.items))}))},n.prototype._storeRequestStates=function(e,t){this.requests[t].params.cursor=e.cursor,this.requests[t].params.more=e.more,e.items&&(this.requests[t].items=this.requests[t].items.concat(e.items))},n.prototype._setCallInProgress=function(e){this._isCallInProgress=e},n.prototype._setMaxResults=function(){this.maxResults+=this.requests[this.requests.length-1].params.maxResults},n.prototype.add=function(e,t){angular.isUndefinedOrEmpty([e,t],"some")||((angular.isUndefinedOrEmpty(t.maxResults)||t.maxResults<=0)&&(t.maxResults=30),this.requests.push({items:[],method:e,params:angular.extend({cursor:void 0,maxResults:30,more:!0},t)}))},n.prototype.exec=function(){if(!this._isCallInProgress&&0!==this.requests.length){this._setCallInProgress(!0);var e=this._getPendingRequests();this._setMaxResults(),t.allSettled(e).then(this._processResults.bind(this))}},n.prototype.hasMore=function(){if(this.fetchedResults>this.maxResults)return!0;for(var e in this.requests)if(this.requests[e].params.more)return!0;return!1},n.prototype.isCallInProgress=function(){return this._isCallInProgress},n}t.$inject=["$q"],angular.module("Factories").factory("CalendarRequestFactory",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid"});return n.get=function(e,t){return a()(n.displayList(t),{id:e})},n}n.r(t),n.d(t,"CalendarService",(function(){return r}));var i=n(21),a=n.n(i);r.$inject=["CalendarFactory","LumsitesBaseService"],angular.module("Services").service("Calendar",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/calendar/event/:methodKey",{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("EventFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return t.createLumsitesBaseService(e,{objectIdentifier:"uid"})}e.$inject=["EventFactory","LumsitesBaseService"],angular.module("Services").service("EventService",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(19),r=n.n(t),i=n(71),a=n.n(i),o=n(75),s=n.n(o),c=n(21),l=n.n(c);!function(){function t(t,n,i,o,c,u,d,p,f,g,m){function v(){y.availableCalendars.length=0;var e={maxResults:50};angular.isDefinedAndFilled(y.calendarSearchText)&&(e.query=y.calendarSearchText),n.filterize(e,(function(e){var t;angular.isArray(e)&&(t=y.availableCalendars).push.apply(t,r()(e))}),void 0,y.LIST_KEY)}function h(){y.calendarsSelectionIsUpdating=!1,y.updateWidget()}var y=this;y.DIALOG_ID="add-calendar-dialog",y.LIST_KEY="calendar-widget",y.VIEW_MODE={MONTH:"month",PLANNING:"planning",WEEK:"week"},y.availableCalendars=[],y.calendarsSelectionIsUpdating=!1,y.isCalendarUserChecked=!1,y.isCalendarCommunityChecked=!1,y.isCommunityContext=!1,y.showCalendarDialog=!1,y.Calendar=n,y.Colors=e.get(p.getCurrent("global"),"properties.colors",i.COLORS_WIDGET),y.Content=o,y.Utils=g,y.addCalendar=function(){y.showCalendarDialog=!0,y.isCommunityContext&&g.reject(y.availableCalendars,{id:o.getCurrent().calendarId}),g.waitForAndExecute("#".concat(y.DIALOG_ID))},y.addPublicCalendar=function(t){var r={id:t,summary:t};return n.get({uid:t},(function(n){r.summary=e.get(n,"calendar.summary",t)})),r},y.closeDialog=function(){y.filters={},angular.forEach(n.displayList(y.LIST_KEY),(function(e){e.isChecked&&(e.isChecked=!1)})),u.close(y.DIALOG_ID)},y.debouncedFilterCalendars=a()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";y.calendarSearchText=e,v()}),300),y.deleteCalendar=function(t){var n=m.getCurrent();return"community"===t?(n.properties.currentCommunityCalendar=!1,void y.updateWidget()):"user"===t?(n.properties.userCalendarChecked=!1,void y.updateWidget()):(n.properties.calendarsSelected=e.filter(n.properties.calendarsSelected,(function(e){return e.id!==t})),void y.updateWidget())},y.getNextCalendars=function(){n.hasMore(y.LIST_KEY)&&n.nextPage((function(e){var t;if(angular.isArray(e)){var n=s()(e,(function(e){var t=e.id;return!l()(y.availableCalendars,{id:t})}));(t=y.availableCalendars).push.apply(t,r()(n))}}),void 0,y.LIST_KEY)},y.isAlreadyDisplayed=function(t){return e.includes(e.map(m.getCurrent().properties.calendarsSelected,"id"),t)},y.setCalendars=function(){if(!y.calendarsSelectionIsUpdating){y.calendarsSelectionIsUpdating=!0;var e=m.getCurrent();e.properties=e.properties||{};var t=e.properties,r=0;(y.isCalendarUserChecked||t.userCalendarChecked)&&(t.userCalendarChecked=!0,y.isCalendarUserChecked=!1,t.userCalendarColor=t.userCalendarColor||g.getItemColor(r),r++),(y.isCalendarCommunityChecked||t.currentCommunityCalendar)&&(t.currentCommunityCalendar=!0,y.isCalendarCommunityChecked=!1,t.currentCommunityCalendarColor=t.currentCommunityCalendarColor||g.getItemColor(r),r++),angular.forEach(n.displayList(y.LIST_KEY),(function(e){e.isChecked&&(t.othersCalendarsChecked=!0,t.calendarsSelected.push(e),e.isChecked=!1,e.color=e.color||g.getItemColor(r),r++)})),h(),y.calendarsSelectionIsUpdating=!1,y.filters={},u.close(y.DIALOG_ID)}},y.updateCalendarsSelection=function(){if(!y.calendarsSelectionIsUpdating){y.calendarsSelectionIsUpdating=!0;var t=e.last(m.getCurrent().properties.calendarsSelected);if(angular.isString(t)){m.getCurrent().properties.calendarsSelected.pop();var r={uid:t};n.get(r,(function(e){m.getCurrent().properties.calendarsSelected.push(e),h()}),(function(){d.error(f.translate("WIDGET_TYPE_CALENDAR_SETTINGS_ADD_PUBLIC_CALENDAR_ERROR")),h()}))}else h()}},y.updateWidget=function(e,n){var r=m.getCurrent();r.properties.displayWeekend||(r.properties.startDayOnSunday=!1),t.$broadcast("widget-calendar-settings",r.uuid,e,n)},y.switchViewMode=function(e){m.getCurrent().properties.visualizationMode!==e&&(m.getCurrent().properties.visualizationMode=e,y.updateWidget())},y.toggleCalendar=function(t){if("user"!==t)if("community"!==t){var r=e.find(n.displayList(y.LIST_KEY),{id:t});angular.isDefinedAndFilled(r)&&(r.isChecked=!r.isChecked)}else y.isCalendarCommunityChecked=!y.isCalendarCommunityChecked;else y.isCalendarUserChecked=!y.isCalendarUserChecked},y.isCommunityContext=o.getCurrent().type===c.CONTENT_TYPES.COMMUNITY,v()}t.$inject=["$rootScope","Calendar","ConfigTheme","Content","InitialSettings","LxDialogService","LxNotificationService","Style","Translation","Utils","Widget"],angular.module("Controllers").controller("WidgetCalendarSettingsController",t)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o,s,l,d,f,m,h,E,O,T,I){function A(e){var t=moment(e.start).startOf("day"),n=e.end;b()(n,"T")||(n=moment(e.end).subtract(1,"days").format(W));var r=moment(n).startOf("day"),i=moment.duration(r.diff(t)).asHours().toFixed(0);return i=parseInt(i,10),i=Math.floor(i/24)+1,i||1}function D(e,t){U.more[U.widget.properties.visualizationMode]=angular.isDefined(t)?t:U.more[U.widget.properties.visualizationMode],U.widget.properties.visualizationMode=U.widget.properties.visualizationMode.toLowerCase();var n=U.widget.properties.displayWeekend&&U.widget.properties.startDayOnSunday;moment.updateLocale(moment().locale(),{month:{dow:n?0:1},week:{dow:n?0:1}});var r="format".concat(u()(U.widget.properties.visualizationMode),"Events");U[r](e)}function N(e){if(angular.isUndefined(e)||angular.isUndefined(e.start))return!1;if(angular.isUndefinedOrEmpty(e.attendees))return!0;var t="primary"===e.calendarId?O.getConnected().email:e.calendarId,n=e.attendees.filter((function(e){return e.email===t&&"declined"===e.responseStatus}));return angular.isUndefinedOrEmpty(n)}function R(e){var t;switch(U.widget.properties.visualizationMode=U.widget.properties.visualizationMode.toLowerCase(),U.widget.properties.visualizationMode){case"month":U.visualizedMonth=moment(U.visualizedMonth)[e](1,"month").toDate(),t=U.visualizedMonth;break;case"planning":U.visualizedDay=moment(U.visualizedDay)[e](1,"day").toDate(),t=U.visualizedDay;break;case"week":U.visualizedWeek=moment(U.visualizedWeek)[e](1,"week").toDate(),t=U.visualizedWeek}U.events=angular.fastCopy(U.cachedEvents[t]),U.loadEvents()}function j(e,t){U.datePickerDate=void 0,angular.isDefinedAndFilled(e)&&(U.widget.properties.visualizationMode=e),U.widget.properties.visualizationMode=U.widget.properties.visualizationMode.toLowerCase();var n,i={day:moment(U.visualizedDay).format("LL"),month:moment(U.visualizedMonth).format($),week:moment(U.visualizedWeek).format(B)};switch(U.widget.properties.visualizationMode){case"month":n=U.cachedEvents[i.month];break;case"planning":n=U.cachedEvents[i.day];break;case"week":n=U.cachedEvents["WEEK_".concat(i.week)]}U.events=angular.fastCopy(n),(angular.isUndefinedOrEmpty(U.events)||t)&&("planning"!==U.widget.properties.visualizationMode&&D(),U.requestFactory=new r((function(e){if(!angular.isUndefined(y()(e,"start"))){var t=moment(e.start),n=moment();return moment.duration(t.diff(n)).asHours()}}),D),angular.isDefinedAndFilled(U.calendars)&&(U.widget.properties.visualizationMode=U.widget.properties.visualizationMode.toLowerCase(),angular.forEach(U.calendars,(function(e){if(U.checkedCalendars[e.id]){var t;switch(U.widget.properties.visualizationMode){case"month":t={calendarId:e.id,endDate:moment(U.visualizedMonth).endOf("month").endOf("week").format(P.a),maxResults:500,startDate:moment(U.visualizedMonth).startOf("month").startOf("week").format(P.a)};break;case"planning":t={calendarId:e.id,maxResults:U.numberOfEvents,startDate:moment(U.visualizedDay).format(P.a)};break;case"week":t={calendarId:e.id,endDate:moment(U.visualizedWeek).endOf("week").add(1,"day").format(P.a),maxResults:500,startDate:moment(U.visualizedWeek).startOf("week").format(P.a)}}angular.isDefinedAndFilled(t)&&(Y&&angular.isDefinedAndFilled(F)&&e.id===k?(t.id=F,U.requestFactory.add(I.list,t)):U.requestFactory.add(s.list,t))}}))),U.requestFactory.exec())}var k,F,U=this,M=6,x="MM-DD-YYYY",$="MMMM-YYYY",B="ww-YYYY",W="YYYY-MM-DD",G="YYYY-MMMM",Y=o.getCurrent().type===d.CONTENT_TYPES.COMMUNITY;U.calendars={},U.events={},U.cachedEvents={},U.sidebarIsOpen=!1,U.datePickerId="date-picker",U.more={},U.Colors=y()(h.getCurrent("global"),"properties.colors",a.COLORS_WIDGET),U.EventService=l,U.Translation=E,U.Utils=T,U.moment=moment,U.range=C.a,U.closeSidebar=function(){U.sidebarIsOpen=!1},U.datePickerCallback=function(e){var t;switch(U.widget.properties.visualizationMode=U.widget.properties.visualizationMode.toLowerCase(),U.widget.properties.visualizationMode){case"month":U.visualizedMonth=moment(e).toDate(),t=U.visualizedMonth;break;case"planning":U.visualizedDay=moment(e).toDate(),t=U.visualizedDay;break;case"week":U.visualizedWeek=moment(e).toDate(),t=U.visualizedWeek}U.events=angular.fastCopy(U.cachedEvents[t]),U.loadEvents()},U.formatMonthEvents=function(e){U.events={};var t=moment.utc(U.visualizedMonth).local().startOf("month").startOf("week"),n=moment.utc(U.visualizedMonth).local().endOf("month").endOf("week"),r=U.widget.properties.startDayOnSunday?"YYYY-ww":"GGGG-WW";do{var i=t.format(r);if(angular.isUndefined(U.events[i])&&(U.events[i]={}),U.widget.properties.displayWeekend||t.isoWeekday()<M){var a={};a[t.clone().format(x)]=[],angular.extend(U.events[i],a)}}while(t.add(1,"days").diff(n)<0);angular.forEach(e,(function(e){if(N(e)){e.isAllDay?(e.start=e.start.substring(0,e.start.indexOf("T")),e.end=e.end.substring(0,e.end.indexOf("T"))):b()(e.htmlLink,"outlook")&&(e.start=moment.utc(e.start).local().format(),e.end=moment.utc(e.end).local().format());for(var t=A(e);t>0;){var n=void 0;n=b()(e.start,"T")?moment.utc(e.start).local().add(t-1,"days"):moment(e.start).add(t-1,"days");var i=n.format(r),a=n.format(x);if(angular.isDefined(y()(U.events,[i,a]))){var o=angular.fastCopy(e);o.start=e.isAllDay||!e.start.includes("T")?e.start:moment.utc(e.start).local().format(),o.end=e.isAllDay||!e.end.includes("T")?e.end:moment.utc(e.end).local().format(),t>1&&(o=angular.copy(e),o.start=moment.utc(e.start).local().format(W)),U.events[i][a].push(o)}t--}}})),U.cachedEvents[moment.utc(U.visualizedMonth).local().format($)]=angular.copy(U.events)},U.formatPlanningEvents=function(e){U.events={},angular.forEach(e,(function(e){if(N(e)){var t;e.isAllDay?(e.start=e.start.substring(0,e.start.indexOf("T")),e.end=e.end.substring(0,e.end.indexOf("T"))):b()(e.htmlLink,"outlook")&&(e.start=moment.utc(e.start).format(),e.end=moment.utc(e.end).format()),t=b()(e.start,"T")?moment.utc(e.start).local().format(G):moment(e.start).format(G),angular.isArray(U.events[t])||(U.events[t]=[]);var n,r=A(e);n=r>500&&moment().diff(e.start,"days")>0?Math.min(500+moment().diff(e.start,"days"),A(e)):Math.min(500,A(e));for(var i=0;i<n;i++){var a=angular.copy(e);a.start=a.start.includes("T")?moment.utc(e.start).local().format():e.start,i>0&&(a.start=moment.utc(e.start).add(i,"days").format(W)),a.end=n>1&&i<n-1?moment.utc(e.end).local().format(W):moment.utc(e.end).local().format(),a.end=e.end.includes("T")?a.end:e.end,moment.utc(a.start).local().startOf("day").isSameOrAfter(moment().startOf("day"))&&U.events[t].push(a)}U.events[t]=U.events[t].sort((function(e,t){var n=moment(e.start).valueOf(),r=moment(t.start).valueOf(),i=moment(e.end).valueOf(),a=moment(t.end).valueOf();return n<r?-1:n>r?1:i<a?-1:i>a?1:0}))}})),U.cachedEvents[moment.utc(U.visualizedDay).local().format("LL")]=angular.fastCopy(U.events)},U.formatWeekEvents=function(e){U.events={};var t=moment(U.visualizedWeek).startOf("week"),n=moment(U.visualizedWeek).endOf("week");U.widget.properties.displayWeekend||(U.widget.properties.startDayOnSunday?(t=t.add(1,"day"),n=n.subtract(1,"day")):n=n.subtract(2,"day"));var r={};U.widget.properties.startTime<0&&(U.widget.properties.startTime=0),U.widget.properties.endTime>24&&(U.widget.properties.endTime=24);for(var a=U.widget.properties.startTime;a<U.widget.properties.endTime;a++)r[a]=[];for(U.events=i({},U.events,c()({},t.clone().format(x),p()(r)));t.add(1,"days").diff(n)<0;)U.events=i({},U.events,c()({},t.clone().format(x),p()(r)));angular.forEach(e,(function(e){if(N(e)){e.isAllDay?(e.start=e.start.substring(0,e.start.indexOf("T")),e.end=e.end.substring(0,e.end.indexOf("T"))):b()(e.htmlLink,"outlook")&&(e.start=moment.utc(e.start).local().format(),e.end=moment.utc(e.end).local().format());for(var t=A(e),n=0;n<t;n++){var r=angular.fastCopy(e);e.isAllDay||!e.start.includes("T")?(r.start=moment(e.start).format(),r.end=moment(e.end).format()):(r.start=moment.utc(e.start).local().format(),r.end=moment.utc(e.end).local().format()),n===t-1&&n>0&&(r.end=moment.utc(e.end).local().format());var i=moment.utc(r.start).local().add(n,"days"),a=i.format(x),o=0;if(0===n?(o=moment.utc(r.start).local().format("H"),o=parseInt(o,10)):r.start=i.format(W),o<U.widget.properties.startTime){var s=moment("".concat(a," ").concat(U.widget.properties.startTime,":00:00"));moment(r.end).isAfter(s)&&(o=U.widget.properties.startTime,r.start=s)}angular.isDefined(y()(U.events,[a,o]))&&U.events[a][o].push(r)}}})),function(e){angular.forEach(e,(function(e){var t=[],n=v()(L()(e));angular.forEach(n,(function(e){var n=moment(e.start),r=moment(e.end),i=moment.duration(r.diff(n)).asHours().toFixed(2);t=t.concat([{duration:Number(i),hour:e.start,htmlLink:e.htmlLink,name:e.summary,type:1},{duration:Number(i),hour:e.end,htmlLink:e.htmlLink,name:e.summary,type:-1}])})),t=_()(_()(t,(function(e){return-1*e.duration})),(function(e){return Number((moment.duration(moment(e.hour).diff(moment())).asHours()+e.type/100).toFixed(2))}));var r=0,i=0,a=0,o={};angular.forEach(t,(function(e){if(0===r&&(i=r,a=0),r+=e.type,r>i&&(i=r),e.count=i,a+=e.type,1===e.type)if(o[a]){if(o[a])for(var n=0;;n++)if(!o[n]){e.order=n,o[n]=!0;break}}else e.order=a,o[a]=!0;else if(-1===e.type){var s=g()(t,(function(t){return e.htmlLink===t.htmlLink&&1===t.type}));o[s.order]=!1}})),angular.forEach(n,(function(e){var n=g()(t,(function(t){return t.hour===e.end&&t.htmlLink===e.htmlLink}));e.overlappingNumber=n?n.count-1:0;var r=g()(t,(function(t){return t.hour===e.start&&t.htmlLink===e.htmlLink}));e.overlappingOrder=r?r.order:0}))}))}(U.events),U.cachedEvents["WEEK_".concat(moment(U.visualizedWeek).format(B))]=angular.fastCopy(U.events)},U.getEventBackgroundColor=function(e){return{"background-color":y()(U.calendars,"['".concat(e.calendarId,"'].color"))}},U.getEventPosition=function(e){var t=moment(e.start),n=moment(e.end);return{height:60*moment.duration(n.diff(t)).asHours(),top:"".concat(1*parseInt(moment(e.start).format("mm"),10),"px")}},U.getWidgetClass=function(){var e=[];return U.parentCtrl.getWidgetClass(e),U.isWidgetEmpty()&&e.push("widget--is-empty"),e},U.isPastEvent=function(e){return moment(e.end).isBefore(moment())},U.isWidgetEmpty=function(){return!U.widget.properties.displayToolbar&&!U.requestFactory.isCallInProgress()&&"planning"===U.widget.properties.visualizationMode&&angular.isUndefinedOrEmpty(U.events)},U.isWidgetHidden=function(){return U.parentCtrl.isHidden=!U.parentCtrl.designerMode()&&U.isWidgetEmpty()&&!U.widget.properties.noResults,U.parentCtrl.isHidden},U.loadEvents=j,U.loadMoreEvents=function(){U.numberOfEvents=angular.isNumber(U.widget.properties.number)?U.widget.properties.number+(U.numberOfEvents||0):void 0,U.loadEvents("planning",!0)},U.loadNextEvents=function(){R("add")},U.loadPreviousEvents=function(){R("subtract")},U.loadTodayEvents=function(){U.datePickerDate=void 0,U.visualizedDay=moment().toDate(),U.visualizedWeek=moment().toDate(),U.visualizedMonth=moment().toDate(),U.loadEvents(U.widget.properties.visualizationMode)},U.openDatePicker=function(e){T.waitForAndExecute("#".concat(e),m)},U.openEvent=function(e){t.open(e,"_blank")},U.openSidebar=function(){U.sidebarIsOpen=!0},U.updateCalendarSelection=function(){U.events={},U.cachedEvents={},U.loadEvents()},e.$on("widget-calendar-settings",(function(e,t,n,r){(U.widget.uuid===t||angular.isUndefinedOrEmpty(t))&&(n=(n||"").toLowerCase(),"display"===n?function(e){var t=y()(U.widget,"properties",{});if((!angular.isUndefinedOrEmpty(t.calendarsSelected)||t.userCalendarChecked||t.currentCommunityCalendar)&&"none"!==(e||"").toLowerCase())if(angular.isUndefinedOrEmpty(e))angular.forEach(t.calendarsSelected,(function(e){U.calendars[e.id]=e}));else{var n=g()(t.calendarsSelected,{id:e});angular.isDefinedAndFilled(n)?U.calendars[e]=n:"primary"===e&&t.userCalendarChecked?S()(U.calendars,"['".concat(e,"'].color"),t.userCalendarColor):t.currentCommunityCalendar&&S()(U.calendars,"['".concat(e,"'].color"),t.currentCommunityCalendarColor)}}(r):(U.events={},U.cachedEvents={},U.init()))})),U.init=function(){U.widget.properties=U.widget.properties||{};var e=U.widget.properties;e.visualizationMode=y()(e,"visualizationMode","").toLowerCase(),angular.isUndefined(e.userCalendarChecked)&&!Y&&(e.userCalendarChecked=!0),angular.isUndefined(e.calendarsSelected)&&(angular.isUndefinedOrEmpty(U.widget.properties)||(U.widget.properties=U.widget.properties||{},U.widget.properties.calendarsSelected=[],angular.isDefinedAndFilled(U.widget.properties.calendarIdType)&&"default"===U.widget.properties.calendarIdType&&(U.widget.properties.userCalendarChecked=!0),(angular.isDefinedAndFilled(U.widget.properties.calendarIdType)&&"select"===U.widget.properties.calendarIdType||U.widget.properties.myCalendarsChecked)&&(U.widget.properties.othersCalendarsChecked=!0,angular.isDefinedAndFilled(U.widget.properties.myCalendarsSelected)&&(U.widget.properties.calendarsSelected=U.widget.properties.calendarsSelected.concat(U.widget.properties.myCalendarsSelected))),(angular.isDefinedAndFilled(U.widget.properties.calendarIdType)&&"text"===U.widget.properties.calendarIdType||U.widget.properties.publicCalendarsChecked)&&(U.widget.properties.othersCalendarsChecked=!0,angular.isDefinedAndFilled(U.widget.properties.publicCalendarsSelected)&&angular.forEach(U.widget.properties.publicCalendarsSelected.split(","),(function(e){var t={uid:e};U.widget.properties.calendarsSelected.push({id:e,summary:e});var r=U.widget.properties.calendarsSelected.length-1;n.get(t,(function(t){U.widget.properties.calendarsSelected[r].summary=y()(t,"calendar.summary",e)}))}))),U.widget.properties.calendarsSelected=w()(U.widget.properties.calendarsSelected),delete U.widget.properties.calendarIdType,delete U.widget.properties.publicCalendarsChecked,delete U.widget.properties.publicCalendarsSelected,delete U.widget.properties.myCalendarsChecked,delete U.widget.properties.myCalendarsSelected,delete U.widget.properties.calendars)),U.checkedCalendars={},U.calendars={};var t=0;if(e.userCalendarChecked){var r=angular.isDefinedAndFilled(e.userCalendarColor)?e.userCalendarColor:T.getItemColor(t);e.userCalendarColor=r,U.calendars.primary={color:e.userCalendarColor,id:"primary",summary:E.translate("USER_CALENDAR")},U.checkedCalendars.primary=!0,t++}var i=o.getCurrent();if(Y&&e.currentCommunityCalendar){k=i.calendarId;var a={color:e.currentCommunityCalendarColor||T.getItemColor(t),id:k,summary:E.translate("CURRENT_COMMUNITY_CALENDAR")};U.calendars[a.id]=a,U.checkedCalendars[a.id]=!0,t++,F=i.workspace}e.othersCalendarsChecked&&angular.forEach(e.calendarsSelected,(function(e,n){angular.isUndefinedOrEmpty(e.color)&&(e.color=T.getItemColor(n+t)),U.calendars[e.id]=e,U.checkedCalendars[e.id]=!0})),-1!==U.Colors.indexOf("transparent")&&U.Colors.splice(U.Colors.indexOf("transparent"),1),U.originalCalendars=angular.fastCopy(U.calendars),e.visualizationMode=e.visualizationMode||"planning",U.numberOfEvents=angular.isNumber(e.number)?e.number:void 0,e.startTime=e.startTime||0,e.endTime=e.endTime||24,U.visualizedDay=moment().toDate(),U.visualizedWeek=moment().toDate(),U.visualizedMonth=moment().toDate(),j(),angular.isUndefinedOrEmpty(e.more)&&(e.more={label:{},link:{}},angular.forEach(f.getInstance().langs,(function(t){e.more.link[t]="https://calendar.google.com"})))},this.setParentController=function(e){U.parentCtrl=e,U.init()}}function o(){return{bindToController:!0,controller:a,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetCalendar","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-calendar/views/widget-calendar.html"}}n.r(t),n.d(t,"widgetCalendarDirective",(function(){return o}));var s=n(3),c=n.n(s),l=n(257),u=n.n(l),d=n(63),p=n.n(d),f=n(21),g=n.n(f),m=n(260),v=n.n(m),h=n(4),y=n.n(h),E=n(17),b=n.n(E),O=n(403),C=n.n(O),T=n(7),S=n.n(T),I=n(218),_=n.n(I),A=n(146),w=n.n(A),D=n(99),L=n.n(D),P=n(305);a.$inject=["$scope","$window","Calendar","CalendarRequestFactory","ConfigTheme","Content","EventFactory","EventService","InitialSettings","Instance","LsDatePickerService","Style","Translation","User","Utils","WorkspaceFactory"],angular.module("Widgets").directive("widgetCalendar",o)},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/workspace/calendar/event/:methodKey"),{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}n.r(t),n.d(t,"WorkspaceFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("WorkspaceFactory",r)},function(e,t,n){var r=n(867),i=r({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=i},function(e,t,n){var r=n(867),i=r({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});e.exports=i},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/chat/:methodKey"),{},{list:{isArray:!1,method:"POST",params:{methodKey:"list"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/chat/userSpaces/:methodKey")},listConversations:{isArray:!1,method:"POST",params:{methodKey:"list"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/chat/channels/:methodKey")},listJoined:{isArray:!1,method:"POST",params:{methodKey:"joined"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/chat/userSpaces/list/:methodKey")}})}n.r(t),n.d(t,"ChannelFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("ChannelFactory",r)},function(e,t,n){"use strict";function r(e,t,n){var r=t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid"});return r.getListConversations=function(t,n,r,a){return e.listConversations({callId:Object(i.b)(),maxResults:r,page:a,provider:t,spaceId:n}).$promise},r.listJoined=function(t){var n=t.provider,r=t.maxResults,a=t.page,o=t.searchFilter;return e.listJoined({callId:Object(i.b)(),maxResults:r,page:a,provider:n,searchFilter:o}).$promise},r}n.r(t),n.d(t,"ChannelService",(function(){return r}));var i=n(35);r.$inject=["ChannelFactory","LumsitesBaseService","Utils"],angular.module("Services").service("Channel",r)},function(e,t,n){"use strict";function r(e,t){function n(){return n=s()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.showChannelListDialog=!0,t.next=3,e.waitForAndExecute("#".concat(o.CHANNEL_LIST_DIALOG_ID));case 3:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}var r,i,o=this,c=Object(d.getChannelListUtils)(t.getCurrent()),p=c.addSelectedChannel,f=c.changeSourceType,g=c.deleteSelectedChannel,m=c.getProvider,v=c.getSourceType,h=c.getWidgetProperties,y=c.setProviderId,E=c.setSourceType;o.AVAILABLE_PROVIDERS=[{id:"teams",sources:[{icon:"mdi-microsoft",name:"PICK_TEAMS",type:u.SOURCE_TYPES.CUSTOM},{icon:"mdi-account",name:"JOINED_TEAMS",type:u.SOURCE_TYPES.CATEGORY}]}],o.CHANNEL_LIST_DIALOG_ID="channel-list-dialog",o.listDialogService={},o.showChannelListDialog=!1,o.SOURCE_TYPES=u.SOURCE_TYPES,o.addSelectedChannel=p,o.changeSourceType=f,o.deleteSelectedChannel=g,o.getSourceType=v,o.onLimitConversationChange=function(){var e=h();e.limitConversation?e.numberConversations=e.numberConversations||5:e.numberConversations=void 0},o.openAddChannelDialog=function(){return n.apply(this,arguments)},o.setProviderId=y,r=t.getCurrent(),r.properties=r.properties||{},r.properties.selectedChannels=r.properties.selectedChannels||[],y(l()(o.AVAILABLE_PROVIDERS).id),E(r.properties.sourceType||u.SOURCE_TYPES.CATEGORY),i=m(),o.listDialogService={defaultParams:{provider:i},name:"Channel",searchFilterName:"searchFilter"}}n.r(t),n.d(t,"WidgetChannelListSettingsController",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(51),l=n.n(c),u=n(389),d=n(918);r.$inject=["Utils","Widget"],angular.module("Controllers").controller("WidgetChannelListSettingsController",r)},function(e,t,n){"use strict";function r(){var e=this;e.getWidgetClass=function(){var t=[];return e.parentCtrl.getWidgetClass(t),t},this.setParentController=function(t){e.parentCtrl=t}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetChannelList","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-channel-list/views/widget-channel-list.html"}}n.r(t),n.d(t,"WidgetChannelListController",(function(){return r})),n.d(t,"WidgetChannelListDirective",(function(){return i})),angular.module("Widgets").directive("widgetChannelList",i)},function(e,t,n){"use strict";function r(){var e=this;this.setParentController=function(t){e.parentCtrl=t}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetChart","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-chart/views/widget-chart.html"}}n.r(t),n.d(t,"WidgetChartController",(function(){return r})),n.d(t,"WidgetChartDirective",(function(){return i})),angular.module("Widgets").directive("widgetChart",i)},function(e,t,n){"use strict";function r(e,t,n,r,i){function o(e,t){var n=i.getCurrent(),r=a()(n,"properties");n.uuid!==h.uuid&&m(),s()(r,[e],t),n.properties=r}function u(e){var t=i.getCurrent(),n=a()(t,"properties");return t.uuid!==h.uuid&&m(),a()(n,e)}function d(){var e=u("selectedFile"),n=u("selectedSheet");angular.isUndefinedOrEmpty(e)||Object(c.c)(e.id).then((function(e){v.sheetList=e.data.items,angular.isDefinedAndFilled(n)&&p()})).catch((function(){t.error(r.translate("FRONT.WIDGET_CHART.SETTINGS.ERROR.FETCH_SHEETS"))}))}function p(){var e=u("selectedFile"),n=u("selectedSheet");angular.isUndefinedOrEmpty(e)||0===v.sheetList.length||angular.isUndefinedOrEmpty(n)||Object(c.b)(e.id,n.id).then((function(e){v.chartList=e.data.items})).catch((function(){t.error(r.translate("FRONT.WIDGET_CHART.SETTINGS.ERROR.FETCH_CHARTS"))}))}function f(t,n){var r=t.docPath,i=t.content[0].fileId,a=t.content[0].ext,s=e.getMediaContentByLang(t,!0),c=s.name;angular.isDefinedAndFilled(t)&&angular.isDefinedAndFilled(n)&&(o("selectedFile",{docPath:r,fileName:c,id:i,isValid:"xlsx"===a}),o("selectedSheet",void 0),o("selectedChart",void 0),v.sheetList=[],v.chartList=[],"xlsx"===a&&d())}function g(){o("selectedFile",{docPath:void 0,fileName:void 0,id:void 0,isFileValid:!0}),o("selectedSheet",void 0),o("selectedChart",void 0),v.sheetList=[],v.chartList=[]}function m(){var e;h=i.getCurrent(),e=a()(h,"properties"),angular.isDefinedAndFilled(e.selectedFile)&&e.selectedFile.isValid&&d(),s()(h.properties,e)}var v=this,h={};v.chartList=[],v.sheetList=[],v.openMediaPicker=function(){var e={allowedFileTypes:l.documentTypes.documents,allowedProviders:[l.PROVIDERS.microsoft],isMediaModel:!1};n.open(void 0,(function(e){f(e.object,"picked")}),e)},v.isFileSelected=function(e){if(!angular.isUndefined(e)){var t=u("selectedFile");return!(!angular.isDefined(t)||!angular.isDefined(t.id))||(g(),!1)}},v.drivePickerCallback=f,v.deleteSelectedFile=g,v.getFileName=function(){var e=u("selectedFile");if(!angular.isUndefinedOrEmpty(e)&&!angular.isUndefinedOrEmpty(e.fileName))return angular.isDefinedAndFilled(e.fileName)?e.fileName:e.id},v.selectSheet=function(){var e=u("selectedSheet");v.chartList=[],e&&p()},v.isFileValid=function(){var e=u("selectedFile");return!angular.isDefinedAndFilled(e)||!angular.isDefined(e.isValid)||e.isValid},m()}n.r(t),n.d(t,"WidgetChartSettingsController",(function(){return r}));var i=n(4),a=n.n(i),o=n(7),s=n.n(o),c=n(551),l=n(145);r.$inject=["Document","LxNotificationService","ReusableMediaPicker","Translation","Widget"],angular.module("Controllers").controller("WidgetChartSettingsController",r)},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/chat/:element/:methodKey"),{},{getChannelById:{isArray:!1,method:"GET",params:{element:"channels",methodKey:"get"}},getChannelByName:{isArray:!1,method:"GET",params:{element:"channels",methodKey:"getByName"}},listChannelsForUserSpace:{isArray:!1,method:"POST",params:{element:"channels",methodKey:"list"}},listProviders:{isArray:!1,method:"GET",params:{element:"providers",methodKey:"list"}},listUserSpaces:{isArray:!1,method:"POST",params:{element:"userSpaces",methodKey:"list"}}})}n.r(t),n.d(t,"ChatFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("ChatFactory",r)},function(e,t,n){"use strict";function r(e,t){var n=t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid"});return n.getChannelById=function(t,n,r){return e.getChannelById({provider:t,spaceId:n,channelId:r}).$promise},n.getChannelByName=function(t,n,r){return e.getChannelByName({provider:t,spaceId:n,channelName:r}).$promise},n.listProviders=function(){return e.listProviders().$promise},n.listUserSpaces=function(t,n){return e.listUserSpaces(n,t).$promise},n.listChannelsForUserSpace=function(t,n,r){return e.listChannelsForUserSpace(r,t,n).$promise},n}n.r(t),n.d(t,"ChatService",(function(){return r}));n(168);r.$inject=["ChatFactory","LumsitesBaseService"],angular.module("Services").service("Chat",r)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o){function c(){g=a.getCurrent(),p.userSpacesLoading=!0;var t=m()(g,"properties.provider",null);Object(O.m)({provider:t}).then((function(e){var t=e.data;v.cursor=t.cursor,v.hasMore=t.more,v.page=t.page,p.userSpaces=m()(t,"items",[])})).catch((function(t){Object(T.b)(Object(S.h)("FRONT.FETCH_GROUPS_ERROR")),e.err(t)})).finally((function(){p.userSpacesLoading=!1,r((function(){n.$broadcast("widget-chat-settings",g.uuid)}))}))}function u(){g=a.getCurrent(),p.channelsLoading=!0;var t=m()(g,"properties.provider",null),i=m()(g,"properties.userSpace.id",null);Object(O.l)({provider:t,spaceId:i}).then((function(e){var t=e.data;y.cursor=t.cursor,y.hasMore=t.more,y.page=t.page,p.channels=m()(t,"items",[])})).catch((function(t){Object(T.b)(Object(S.h)("FRONT.FETCH_CHANNELS_FOR_GROUP_ERROR")),e.err(t)})).finally((function(){p.channelsLoading=!1,r((function(){n.$broadcast("widget-chat-settings",g.uuid)}))}))}function d(){p.chatChannelTimeout&&(clearTimeout(p.chatChannelTimeout),p.chatChannelTimeout=void 0)}var p=this,g={},v={cursor:void 0,hasMore:!1,page:void 0},y={cursor:void 0,hasMore:!1,page:void 0};p.Widget=a,p.providers=[],p.userSpaces=[],p.channels=[],p.providersLoading=!1,p.userSpacesLoading=!1,p.userSpacesMoreLoading=!1,p.channelsLoading=!1,p.channelsMoreLoading=!1,p.currentWidget=g,p.chatSlackChannelNameValid=!1,p.chatSlackChannelNameError=void 0,p.chatChannelNameChecking=void 0,p.selectedProvider=void 0,p.selectedUserSpace=void 0,p.chatChannelTimeout=void 0;var I=function(){var e=l()(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return p.chatSlackChannelNameValid=!1,p.chatSlackChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY",e.abrupt("return");case 4:n=!1,p.chatChannelNameChecking=!0,o.getChannelByName(p.selectedProvider,p.selectedUserSpace,t).then((function(e){e&&e.channel&&e.channel.id?(n=!0,g.properties.channel=e.channel):p.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.NOTFOUND"})).catch((function(e){console.log(e),p.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.NOTFOUND"})).finally((function(){p.chatChannelNameValid=n,p.chatChannelNameChecking=!1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();p.getProviderName=C.b,p.loadNextUserSpaces=function(){var i=t.defer();if(!v.hasMore)return i.resolve([]),i.promise;var a=m()(g,"properties.provider",null);return p.userSpacesMoreLoading=!0,Object(O.m)({cursor:v.cursor,page:v.page+1,provider:a}).then((function(e){var t=e.data;v.cursor=t.cursor,v.hasMore=t.more,v.page=t.page,i.resolve(m()(t,"items",[]))})).catch((function(t){Object(T.b)(Object(S.h)("FRONT.FETCH_GROUPS_ERROR")),e.err(t),p.userSpacesMoreLoading=!1})).finally((function(){p.userSpacesMoreLoading=!1,r((function(){n.$broadcast("widget-chat-settings",g.uuid)}))})),i.promise},p.loadNextChannels=function(){var i=t.defer();if(!y.hasMore)return i.resolve([]),i.promise;var a=m()(g,"properties.provider",null),o=m()(g,"properties.userSpace.id",null);return p.channelsMoreLoading=!0,Object(O.l)({cursor:y.cursor,page:y.page+1,provider:a,spaceId:o}).then((function(e){var t=e.data;y.cursor=t.cursor,y.hasMore=t.more,y.page=t.page,i.resolve(m()(t,"items",[]))})).catch((function(t){Object(T.b)(Object(S.h)("FRONT.FETCH_GROUPS_ERROR")),e.err(t),p.channelsMoreLoading=!1})).finally((function(){p.channelsMoreLoading=!1,r((function(){n.$broadcast("widget-chat-settings",g.uuid)}))})),i.promise},p.onChange=function(e,t){var n=i({},m()(g,"properties",{}));1===t.length&&"viewMode"===f()(t)&&n.viewMode!==e&&(n=i({},n,{},p.defaultProps.properties)),h()(n,t,e),g.properties=n},p.selectUserSpace=function(){g=a.getCurrent(),p.selectedUserSpace=g.properties.userSpace.id,console.log(p.selectedUserSpace),p.channels=[],g.properties.channel=null,u()},p.selectProvider=function(e){g=a.getCurrent(),p.channels=[],p.userSpaces=[],p.selectedProvider=e,g.properties.channel=null,g.properties.userSpace=null,g.properties.provider=e,c()},p.chatSlackChannelNameChange=function(){if(g=a.getCurrent(),!g.properties.channel.name)return p.chatSlackChannelNameValid=!1,void(p.chatSlackChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY");d();var e=Object(C.a)(p.selectedProvider,g.properties.channel.name);e?function(e){if(g=a.getCurrent(),!g.properties.channel.name)return p.chatSlackChannelNameValid=!1,void(p.chatSlackChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY");p.chatSlackChannelNameValid=void 0,p.chatSlackChannelNameError=void 0,d(),p.chatChannelTimeout=setTimeout((function(){p.chatChannelTimeout=void 0,I(g.properties.channel.name)}),e)}(1500):(p.chatChannelNameValid=!1,p.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.NAME.INVALID")},p.chatChannelNameHasError=function(){return!1===p.chatChannelNameValid},g=a.getCurrent(),g.properties=g.properties||{},g.properties.position="default",g.properties.hasActions=!0,E()(g.properties.provider)&&(g.properties.provider=b.e.TEAMS.id),p.providersLoading=!0,p.selectedProvider=g.properties.provider,p.selectedUserSpace=m()(g.properties,"channel.spaceId"),Object(O.p)().then((function(e){p.providers=m()(e,"data.providers",[])})).catch((function(t){Object(T.b)(Object(S.h)("FRONT.CHAT.FETCH_PROVIDERS_ERROR")),e.err(t)})).finally((function(){p.providersLoading=!1,r((function(){n.$broadcast("widget-chat-settings",g.uuid)}))})),g.properties.provider&&(c(),g.properties.userSpace&&u())}n.r(t),n.d(t,"WidgetChatSettingsController",(function(){return a}));var o=n(6),s=n.n(o),c=n(10),l=n.n(c),u=n(3),d=n.n(u),p=n(51),f=n.n(p),g=n(4),m=n.n(g),v=n(7),h=n.n(v),y=n(66),E=n.n(y),b=n(48),O=n(95),C=n(168),T=n(36),S=n(5);a.$inject=["$log","$q","$rootScope","$timeout","Widget","Chat"],angular.module("Controllers").controller("WidgetChatSettingsController",a)},function(e,t,n){"use strict";function r(){var e=this;this.setParentController=function(t){e.parentCtrl=t}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetChat","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-chat/views/widget-chat.html"}}n.r(t),n.d(t,"WidgetChatController",(function(){return r})),n.d(t,"WidgetChatDirective",(function(){return i})),angular.module("Widgets").directive("widgetChat",i)},function(e,t){!function(){"use strict";function e(e){function t(){n=r.widgetListCtrl.getOriginalListKey()+"-"+r.widgetListCtrl.SELECTION_TYPES.list,r.widgetListCtrl.setListKey(n),e.filterize({},r.widgetListCtrl.updateListItems,r.widgetListCtrl.updateListItems,n,i)}var n,r=this,i={items:{alternateLink:!0,descriptionHeading:!0,id:!0,name:!0}};r.init=function(e){var t=r.widget.properties;angular.isUndefinedOrEmpty(t.itemsSeparator)&&(t.itemsSeparator=!0),r.widgetListCtrl.init(e)},r.setParentController=function(e){r.widgetListCtrl=e,r.widgetListCtrl.widgetListChildCtrl={initList:t},r.init(!0)}}e.$inject=["Classroom"],angular.module("Widgets").directive("widgetClassroom",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetClassroom","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-classroom/views/widget-classroom.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/comment/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}},like:{isArray:!1,method:"POST",params:{methodKey:"like"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},markRelevant:{isArray:!1,method:"POST",params:{methodKey:"markRelevant"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},unlike:{isArray:!1,method:"POST",params:{methodKey:"unlike"}},unmarkRelevant:{isArray:!1,method:"POST",params:{methodKey:"unmarkRelevant"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CommentFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){var o=a.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid",prependOnSave:!0}),s={list:{items:{answersNumber:!0,authorProperties:!0,canEdit:!0,canHide:!0,content:!0,createdAt:!0,files:!0,images:!0,liked:!0,likes:!0,links:!0,markedAsRelevant:!0,mentionsDetails:!0,mentionsFeedKeys:!0,parent:!0,status:!0,text:!0,uid:!0,user:!0}}};return o.defaultParams={},o.filterize=function(e,t,n,r,i){return i=i||s.list,a.proto.prototype.filterize.call(o,e,t,n,r,i)},o.getAnswers=function(e,t,n,r,i){t.answersNumber&&angular.isUndefinedOrEmpty(o.displayList(n))&&(r=r||angular.noop,i=i||angular.noop,o.filterize({content:e,parent:t.uid,sortOrder:"desc"},r,i,n))},o.getLocalParent=function(t,n){if(t.parent){var r=e.get(o,"_services."+n+"._list");return e.find(r,(function(e){return(e.uid||e.id)===t.parent}))}},o.isComment=function(t){return angular.isDefinedAndFilled(e.get(t,"answersNumber"))},o.isFeatureEnabled=function(){return r.hasFeature("new-comments")},o.markRelevant=function(e,n,r,i){n=n||angular.noop,r=r||angular.noop,i=i||angular.noop,t.markRelevant({uid:e.uid},n,r).$promise.finally(i)},o.unmarkRelevant=function(e,n,r,i){n=n||angular.noop,r=r||angular.noop,i=i||angular.noop,t.unmarkRelevant({uid:e.uid},n,r).$promise.finally(i)},o.init=function(){o.defaultParams={customer:n.getCustomerId(),instance:i.getCurrentInstanceId(),maxResults:3}},o}t.$inject=["CommentFactory","Customer","Features","Instance","LumsitesBaseService"],angular.module("Services").service("Comment",t)}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(19),r=n.n(t),i=n(454),a=n(35);!function(){function t(t,n,o,s,c,l,u,d,p,f,g,m,v,h,y,E,b,O,C){function T(){I.isSaving=!1,I.newComment.files=[],I.newComment.images=[],I.newComment.links=[],I.newComment.text={},I.showActions=!1,n.$emit("close-comment-field")}function S(e){var t=e.content[0].type;0===t.indexOf("image")?(I.newComment.images=[e],I.newComment.files=[]):0!==t.indexOf("document")&&0!==t.indexOf("file")||(I.newComment.files=[e],I.newComment.images=[]),I.isUploadingFile=!1,I.pasteDropFilesEnd()}var I=this;I.alertMessage=void 0,I.currentAttachmentType=O.getCurrentAttachmentType(I.comment),I.community=l.getCurrent(),I.feedMentioned=[],I.isPreviewLoading=!1,I.isSaving=!1,I.isUploadingFile=!1,I.newComment=angular.copy(I.comment)||{files:[],images:[],links:[],text:{}},I.specialMentions={},I.showAlert=!1,I.keyPrefix="create-edit-comment-".concat(I.comment?I.comment.uid:Object(a.b)()),I.dialogSettings={files:{isOpen:!1,key:"".concat(I.keyPrefix,"-file-picker")},images:{isOpen:!1,key:"".concat(I.keyPrefix,"-image-picker")},links:{isOpen:!1,key:"".concat(I.keyPrefix,"-add-link-dialog")}},I.Translation=y,I.Upload=E,I.User=b,I.Utils=O,I.cancelComment=T,I.debouncedFindUrls=e.debounce(O.findUrls,500),I.displayActions=function(){I.showActions=!0,I.currentAttachmentType=O.getCurrentAttachmentType(I.comment||I.newComment)},I.findUrlsCallback=function(e){angular.isUndefinedOrEmpty(e)||n.$broadcast("attachments__get-preview",e)},I.onUploadSuccess=function(e){E.onFileUploadSuccess(e,u.getCurrent(),I.newComment,!1,I.dialogSettings,I.pasteDropFilesEnd)},I.pasteDropFilesEnd=function(e){n.$broadcast("attachments__paste-drop-files-end",e)},I.submitComment=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;I.isSaving||(I.isSaving=!0,o((function(){if(!y.hasTranslations(I.newComment.text)&&angular.isUndefinedOrEmpty([I.newComment.files,I.newComment.images,I.newComment.links],"every"))return v.error(y.translate("WIDGET_TYPE_COMMENTS_INCOMPLETE_FIELD")),void(I.isSaving=!1);var a,o=angular.isUndefinedOrEmpty(I.comment);o?(a={content:I.currentContent.uid||I.currentContent.id,customer:d.getCustomerId(),instance:f.getCurrentInstanceId(),status:"LIVE"},angular.isDefinedAndFilled(I.parentId)&&(a.parent=I.parentId)):a=angular.copy(I.comment),a=I.community&&I.community.securedRepository?angular.extend(a,{files:[].concat(r()(I.newComment.files),r()(I.newComment.images)),links:I.newComment.links,text:I.newComment.text}):angular.extend(a,{files:I.newComment.files,images:I.newComment.images,links:I.newComment.links,text:I.newComment.text}),angular.isDefinedAndFilled(e.get(a.text,y.inputLanguage))&&(a.text[y.inputLanguage]=O.replaceTokens(a.text[y.inputLanguage],!0)),angular.isDefinedAndFilled(I.userMentioned)&&(a.mentions=e.map(I.userMentioned,"id")),angular.isDefinedAndFilled(I.feedMentioned)&&(a.mentionsFeedKeys=e.map(I.feedMentioned,"id")),c.save(a,(function(r){if(o&&(I.currentContent.comments=parseInt(I.currentContent.comments,10)+1),angular.isDefinedAndFilled(I.parentId)){var i=I.listKey.replace("-".concat(I.parentId),""),a=e.find(c.displayList(i),{uid:I.parentId});o&&angular.isDefinedAndFilled(a)&&(a.answersNumber=parseInt(a.answersNumber,10)+1)}p.hasFeature("advanced_community")&&t.$broadcast("post__update",I.currentContent),T(),s.handleTaggingMap("comment","content",{comment:r,content:I.currentContent}),n.$emit("close-comment-field")}),(function(e){I.isSaving=!1,Object(i.b)(C.store.getState(),e)?C.store.dispatch(Object(i.a)(e)):O.displayServerError(e)}),I.listKey)}),a))},I.onUploadFromLocal=function(e){I.isUploadingFile=!0,E.uploadMediaSecured(I.community,e[0],y.inputLanguage,S,(function(){v.error(y.translate("FILE_UPLOAD_ERROR")),I.isUploadingFile=!1}))},n.$on("attachments__preview-loading-update",(function(e,t){I.isPreviewLoading=t})),angular.isDefinedAndFilled(e.get(I.currentContent,"feedKeys[0]"))&&(I.specialMentions[I.currentContent.feedKeys[0]]=m.mentionAllKeywords),E.loadUploadUrl(),I.currentContent.type===g.CONTENT_TYPES.POST&&angular.isDefinedAndFilled(I.currentContent.visibleInCommunitiesCount)&&I.currentContent.visibleInCommunitiesCount>1&&(I.showAlert=!0,I.alertMessage=y.replace("FRONT.COMMUNITY.POST.COMMENT.WARNING.SHARED","COUNT",I.currentContent.visibleInCommunitiesCount)),angular.isUndefinedOrEmpty(I.comment)||(I.feedMentioned=[],angular.isDefinedAndFilled(I.comment.text)&&(I.feedMentioned=m.getFeedMentionedFromFeedKeys(y.translate(I.comment.text),I.comment.mentionsFeedKeys)),angular.isDefinedAndFilled(I.comment.mentionsDetails)&&(I.userMentioned=angular.fastCopy(I.comment.mentionsDetails)))}t.$inject=["$rootScope","$scope","$timeout","Analytics","Comment","Community","Content","Customer","Features","Instance","InitialSettings","LsTextEditor","LxNotificationService","Media","Translation","Upload","User","Utils","ReduxStore"],angular.module("Widgets").directive("widgetCommentsField",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{comment:"=?",currentContent:"=",listKey:"@",parentId:"@",theme:"@?"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-comments/views/widget-comments-field.html"}}))}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,u,d,p,f,g){function m(){return!a.hasFeature("social")||angular.isDefinedAndFilled(v.comment.parent)?(v.displayRelevantButton=!1,v.displayRelevantButton):(v.displayRelevantButton=v.canMarkRelevant,v.displayRelevantButton)}var v=this,h="HIDE",y="LIVE",E="CANCEL";v.childrenListKey=v.listKey,v.commentDate=void 0,v.displayingAnswers=!1,v.editingComment=!1,v.Comment=r,v.Community=i,v.Translation=d,v.User=p,v.Utils=g,v.answerComment=function(){v.displayAnswers(),n((function(){t.$broadcast("ls-rich-text-editor__focus")}))},v.canAnswerComment=function(){return p.isConnected()&&v.comment.status===y&&v.isEnabled&&!v.parentId},v.displayAnswers=function(){v.displayingAnswers=!v.displayingAnswers,r.getAnswers(v.currentContent.uid||v.currentContent.id,v.comment,v.childrenListKey)},v.displayComment=function(){return v.comment.status===y||v.comment.status===h&&v.comment.canHide},v.displayMore=function(){r.displayNextPage(v.childrenListKey)},v.displayMoreButton=function(){return!r.isCallInProgress(v.childrenListKey)&&r.hasMore(v.childrenListKey)},v.editComment=function(){v.editingComment=!0,n((function(){t.$broadcast("ls-rich-text-editor__focus")}))},v.getCommentClass=function(){var e=[];return v.comment.status===h&&e.push("comment--is-hidden"),v.comment.markedAsRelevant&&e.push("comment--is-relevant"),v.comment.$hidden&&e.push("comment--real-time-append"),e},v.toggleCommentVisibility=function(){v.comment.status!==h?l.confirm(d.translate("WIDGET_TYPE_COMMENTS_HIDE"),d.translate("WIDGET_TYPE_COMMENTS_HIDE_DESCRIPTION"),{cancel:d.translate(E),ok:d.translate("OK")},(function(e){e&&(v.comment.status=h,r.save(v.comment,(function(){v.currentContent.comments=parseInt(v.currentContent.comments,10)-(v.comment.answersNumber||0)-1}),g.displayServerError,v.listKey))})):v.comment.status===h&&l.confirm(d.translate("WIDGET_TYPE_COMMENTS_SHOW"),d.translate("WIDGET_TYPE_COMMENTS_SHOW_DESCRIPTION"),{cancel:d.translate(E),ok:d.translate("OK")},(function(e){e&&(v.comment.status=y,r.save(v.comment,(function(){v.currentContent.comments=parseInt(v.currentContent.comments,10)+(v.comment.answersNumber||0)+1}),g.displayServerError,v.listKey))}))},v.toggleRelevant=function(){if(v.relevantInProgress=!0,v.comment.markedAsRelevant)r.unmarkRelevant(v.comment,(function(){var t=c()(r.displayList(v.listKey),{uid:v.comment.uid});angular.isDefinedAndFilled(t)&&(t.markedAsRelevant=!1),v.comment.markedAsRelevant=!1,m(),e.$broadcast("unmarked-as-relevant",v.currentContent.uid,v.comment)}),g.displayServerError,(function(){v.relevantInProgress=!1}));else{var t=v.currentContent.relevantComment;r.markRelevant(v.comment,(function(){if(t!==v.comment.uid){var n=c()(r.displayList(v.listKey),{uid:t});angular.isDefinedAndFilled(n)&&(n.markedAsRelevant=!1)}v.comment.markedAsRelevant=!0,e.$broadcast("marked-as-relevant",v.currentContent.uid,v.comment)}),g.displayServerError,(function(){v.relevantInProgress=!1}))}},t.$on("close-comment-field",(function(){v.editingComment=!1})),t.$on("marked-as-relevant",(function(e,t,n){v.currentContent.uid===t&&(v.comment.markedAsRelevant=v.comment.uid===n.uid,m())})),function(){v.childrenListKey+="-".concat(v.comment.uid),v.feedMentioned=[],angular.isDefinedAndFilled(v.comment.text)&&(v.feedMentioned=s.getFeedMentionedFromFeedKeys(d.translate(v.comment.text),v.comment.mentionsFeedKeys));var e=p.getConnected();v.canMarkRelevant=o()(v.currentContent,"authorDetails.id")===e.uid||o()(v.currentContent,"parentContentDetails.canMarkRelevant",!1)||i.isUserAdmin(o()(v.currentContent,"parentContentDetails"),e),m(),moment().diff(moment(v.comment.createdAt),"days")<2?v.commentDate=moment.utc(v.comment.createdAt).local().fromNow():v.commentDate=moment.utc(v.comment.createdAt).local().format("LL")}()}function i(e){return{bindToController:!0,compile:function(t){return e.compile(t)},controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{comment:"=",currentContent:"=",isEnabled:"=",listKey:"@",parentId:"@?",theme:"@?"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-comments/views/widget-comments-item.html"}}n.r(t),n.d(t,"WidgetCommentsItemDirective",(function(){return i}));var a=n(4),o=n.n(a),s=n(21),c=n.n(s);i.$inject=["RecursionHelper"],r.$inject=["$rootScope","$scope","$timeout","Comment","Community","Features","LsTextEditor","LxNotificationService","Post","Translation","User","UserAccess","Utils"],angular.module("Widgets").directive("widgetCommentsItem",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){function c(){var t=r.displayList(l.parentCtrl.getListKey());angular.isUndefinedOrEmpty([t,l.currentContent.latestComments],"every")||(angular.forEach(l.currentContent.latestComments,(function(n,r){var i=e.find(t,{uid:n.uid});angular.isDefinedAndFilled(i)&&(l.currentContent.latestComments[r]=i,l.inLatestComments[i.uid]=!0)})),angular.forEach(t,(function(e){e.markedAsRelevant=l.currentContent.relevantComment===e.uid,e.markedAsRelevant&&(l.currentContent.relevantCommentDetails=e)})))}var l=this,u={};l.inLatestComments={},l.Comment=r,l.displayMore=function(){var t=l.parentCtrl.getListKey(),n=r._services[t||"default"];u.maxResults=10,angular.isDefinedAndFilled(e.get(n,"_params"))&&(n._params.maxResults=r.defaultParams.maxResults),angular.isDefinedAndFilled(e.get(n,"_cursor"))?r.nextPage(c,void 0,t):r.filterize(u,(function(){n._list=n._list.concat(l.currentContent.latestComments),n._list=e.uniqBy(n._list,(function(e){return e.uid})),n._list=e.sortBy(n._list,"createdAt").reverse(),n._more=n._list.length<l.currentContent.comments,n._cursor=n._more?n._cursor:void 0}),void 0,l.parentCtrl.getListKey())},l.getListKey=function(e){return angular.isDefinedAndFilled(e)?"list-parent-"+e+"-"+l.widget.uuid:"list-"+l.widget.uuid},l.getWidgetClass=function(){var e=[];return l.parentCtrl.getWidgetClass(e),l.isWidgetEmpty()&&e.push("widget--is-empty"),e},l.isCommentDisplayedInList=function(e){return!l.inLatestComments[e.uid]&&(!l.isRelevantCommentDisplayed()||e.uid!==l.currentContent.relevantComment)},l.isCommentFieldDisplayed=function(){var e=l.currentContent.type===a.CONTENT_TYPES.POST&&o.isMergeSlave(l.currentContent);return l.widget.properties.isEnabled&&s.isConnected()&&!e},l.isMoreButtonDisplayed=function(){var e=l.parentCtrl.getListKey();return!r.isCallInProgress(e)&&r.hasMore(e)},l.isRelevantCommentDisplayed=function(){return angular.isDefinedAndFilled(l.currentContent.relevantCommentDetails)&&!l.widget.properties.preloadedOnly&&angular.isUndefinedOrEmpty(l.currentContent.latestComments)},l.isWidgetEmpty=function(){var e=l.parentCtrl.getListKey();return l.parentCtrl.designerMode()&&!r.isCallInProgress(e)&&angular.isUndefinedOrEmpty(r.displayList(e))},l.isWidgetHidden=function(){return l.parentCtrl.isHidden=!1,l.parentCtrl.isHidden},l.onPostUpdate=function(e,t){"COMMENT_ADD"===e?l.currentContent.comments+=1:"COMMENT_HIDE"===e?l.currentContent.comments-=1:"RELEVANT_COMMENT_MARKED"===e?l.currentContent.relevantComment=t.relevantCommentId:"RELEVANT_COMMENT_UNMARKED"===e&&(l.currentContent.relevantComment=void 0)},t.$on("marked-as-relevant",(function(e,r,i){l.currentContent.uid===r&&(l.currentContent.relevantComment=i.uid,l.currentContent.relevantCommentDetails=i,n((function(){t.$broadcast("user-block__reset",i.authorProperties)})))})),t.$on("unmarked-as-relevant",(function(e,t,n){l.currentContent.relevantComment===n.uid&&(l.currentContent.relevantComment=void 0,l.currentContent.relevantCommentDetails=void 0)})),this.setParentController=function(t){l.parentCtrl=t,function(){l.widget.properties=e.get(l.widget,"properties",{});var t=l.widget.properties;l.currentContent=angular.isDefinedAndFilled(l.parentCtrl.content)?l.parentCtrl.content:i.getCurrent(),t.relevant=!(!angular.isUndefined(t.relevant)&&!t.relevantOnly)||t.relevant,t.isEnabled=!!angular.isUndefined(t.isEnabled)||t.isEnabled;var n=e.get(l.currentContent,"uid")||e.get(l.currentContent,"id");if(l.currentContent.type===a.CONTENT_TYPES.POST&&l.parentCtrl.setListKey("post-comments-"+n),angular.isDefinedAndFilled(n)){u={content:n,maxResults:t.displayNumber||r.defaultParams.maxResults,sortOrder:"desc"};var o=l.parentCtrl.getListKey();!l.Comment.isFeatureEnabled()&&e.get(l.currentContent,"comments",0)>0&&r.filterize(u,(function(){c()}),void 0,o)}}()}}t.$inject=["$scope","$timeout","Comment","Content","InitialSettings","Post","User"],angular.module("Widgets").directive("widgetComments",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetComments","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-comments/views/widget-comments.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e){function t(){return angular.isUndefined(n.community.description)||!n.parentCtrl.getWidgetTranslation(n.community.description)&&angular.isUndefinedOrEmpty(n.community.tagz)}var n=this;n.community=void 0,n.getWidgetClass=function(){var e=[];return n.parentCtrl.getWidgetClass(e),t()&&e.push("widget--is-empty"),e},n.isWidgetHidden=function(){return!n.parentCtrl.designerMode()&&t()?n.parentCtrl.isHidden=!0:n.parentCtrl.isHidden=!1,n.parentCtrl.isHidden},this.setParentController=function(t){n.parentCtrl=t,n.community=e.getCurrent()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetCommunityIntro","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-community-intro/views/widget-community-intro.html"}}n.r(t),n.d(t,"WidgetCommunityIntroDirective",(function(){return i})),r.$inject=["Content"],angular.module("Widgets").directive("widgetCommunityIntro",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(t){var i=p.widget.properties;t=t||{};var a=i.displayType,o={followingOnly:Boolean(i.followingOnly),isCommunityAdmin:Boolean(i.isCommunityAdmin),ids:"pick"===a?i.communityIds:[],status:[r.CONTENT_STATUS.LIVE.value]};angular.isNumber(i.maxNumber)&&(o.maxResults=i.maxNumber),angular.isDefinedAndFilled(t.query)&&(o.query=t.query),"list"===a?angular.isDefinedAndFilled(t.instance)?o.instanceId=t.instance:e.get(i,"isAllInstancesSiblings",!1)?(o.instanceId=void 0,o.currentInstanceId=s.getCurrentInstanceId()):angular.isDefinedAndFilled(i.instance)?o.instanceId=i.instance:o.instanceId=[s.getCurrentInstanceId()]:o.instanceId=void 0,"pick"===a&&angular.isUndefinedOrEmpty(i.communityIds)&&angular.extend(o,{queryType:"getContentByIds"}),function(){g={items:{canContribute:!0,id:!0,instance:!0,privacy:!0,properties:{followAndNotify:!0},slug:!0,uid:!0}};var e=p.widget.properties;angular.isDefinedAndFilled(e.fields)?angular.forEach(e.fields,(function(e){if(!angular.isUndefined(e)&&!angular.isUndefinedOrEmpty(e.name)&&e.enable){var t=e.name.toLowerCase();switch(t){case"title":g.items.title=!0;break;case"content":g.items.description=!0;break;case"follow":g.items.subscription=m;break;case"thumbnail":g.items.thumbnail=!0}}})):(g.items.description=!0,g.items.id=!0,g.items.instance=!0,g.items.slug=!0,g.items.subscription=m,g.items.thumbnail=!0,g.items.title=!0,g.items.uid=!0)}(),n.filterize(o,p.widgetListCtrl.updateListItems,p.widgetListCtrl.updateListItems,p.widgetListCtrl.getListKey(),g)}function u(){p.widget.properties=p.widget.properties||{};var t=p.widget.properties;angular.isUndefinedOrEmpty(t.viewMode)&&(t.viewMode="list"),angular.isUndefinedOrEmpty(t.displayType)&&(t.displayType="list"),angular.isUndefinedOrEmpty(t.viewModeVariant)&&(t.viewModeVariant="group"),angular.isUndefinedOrEmpty(t.itemsSeparator)&&(t.itemsSeparator=!0);var n=r.COMMUNITY_FIELDS,i=!1;angular.isUndefinedOrEmpty(t.fields)&&(t.fields=[],i=!0),angular.forEach(n,(function(n){angular.isString(n)&&(n={enable:"thumbnail"===n||i,name:n});var r=e.find(t.fields,{name:n.name});(i||angular.isUndefinedOrEmpty(r))&&t.fields.push(n)}));var a=t.instance||[],o=[];s.getSiblings().then((function(e){o=e,o.length>1&&a.length>1||t.isAllInstancesSiblings||"pick"===t.displayType?t.isInstanceNameDisplayed=!angular.isDefined(t.isInstanceNameDisplayed)||t.isInstanceNameDisplayed:t.isInstanceNameDisplayed=!1,t.instance=angular.isDefinedAndFilled(a)?a:[s.getCurrentInstanceId()]}))}function d(){p.widget.properties.displayType===p.widgetListCtrl.SELECTION_TYPES.pick&&"basic"===i.getViewMode()&&"get"!==i.getAction()&&c.waitForAndExecute("#"+f,(function(){a.open(f)}))}var p=this,f="widget-community-list-settings-content-picker-",g={},m={customerKey:!0,followerUserKey:!0,followingContentKey:!0,followingContentType:!0,id:!0,instanceKey:!0,notify:!0,type:!0,uid:!0};p.init=function(e){p.widget.properties=p.widget.properties||{};var t=p.widget.properties;t.communityIds=t.communityIds||[],f+=p.widget.uuid,p.widgetListCtrl.init(e)},this.setParentController=function(e){p.widgetListCtrl=e,p.widgetListCtrl.widgetListChildCtrl={initList:l,initProperties:u,onWidgetListClick:d},p.init(!0)}}t.$inject=["$scope","Community","Config","Content","ContentPicker","ContentTemplate","Instance","Utils"],angular.module("Widgets").directive("widgetCommunityList",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetCommunityList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-community-list/views/widget-community-list.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c,l,u,d,p,f){var g,m,v,h,y,E=this;E.CONTENT_PICKER_ID="widget-community-list-settings-content-picker-",E.PICKER_TITLE_KEY="GLOBAL.COMMUNITY",E.listkey="",E.showFilters=!1,E.Config=a,E.Content=o,E.CustomContentType=l,E.Instance=d,E.isInstanceNameOption=function(){var t=f.getCurrent().properties||{};return t.isAllInstancesSiblings||e.get(t,"instance",[]).length>1||"pick"===t.displayType},E.openContentPicker=function(){p.waitForAndExecute("#"+E.CONTENT_PICKER_ID,s)},E.setAsMainWidget=function(){var e=f.getCurrent();if(e.isMainWidget){var t=c.getElementList(o.getCurrent(),"widget","isMainWidget",!0);angular.forEach(t,(function(t){t.uuid!==e.uuid&&(t.isMainWidget=!1)}))}n.$broadcast("widget-is-main-toggled",e.uuid,e.isMainWidget)},E.switchViewMode=function(e){f.getCurrent().properties.viewMode!==e&&(f.getCurrent().properties.viewMode=e,f.getCurrent().properties.viewModeVariant="group",E.updateWidget())},E.switchViewModeVariant=function(e){f.getCurrent().properties.viewModeVariant!==e&&(f.getCurrent().properties.viewModeVariant=e,E.updateWidget())},E.toggleField=function(e){angular.isUndefined(e)||angular.isUndefinedOrEmpty(e.name)||(e.enable=!e.enable,E.updateWidget())},E.toggleInstanceNameOption=function(){var e=f.getCurrent().properties;e.isInstanceNameDisplayed=!e.isInstanceNameDisplayed,E.updateWidget()},E.updateInstanceNameProperty=function(){var e=f.getCurrent().properties||{};e.isAllInstancesSiblings&&(e.isInstanceNameDisplayed=!0),E.updateWidget()},E.updateWidget=function(){var e=f.getCurrent(),t=e.properties||{};t.isAllInstancesSiblings||1!==t.instance.length||"pick"!==!t.displayType||(t.isInstanceNameDisplayed=!1),i((function(){n.$broadcast("widget-community-list-settings",f.getCurrent().uuid)}))},r.$on("content-picker__close-start",E.updateWidget),g=f.getCurrent(),m=e.get(g,"uuid",""),v=e.get(o.getCurrent(),"id"),h="widget-"+m+"-",y=u.hasFeature("social"),E.CONTENT_PICKER_ID+=m,g.properties.fields=function(t,n){return n?t:e.filter(t,(function(e){return"follow"!==e.name}))}(e.get(g,"properties.fields"),y),E.listkey=angular.isDefinedAndFilled(v)?h+v:h+Object(t.b)(),E.showFilters=y,g.properties.communityIds=g.properties.communityIds||[],angular.isUndefinedOrEmpty(g.properties.displayType)&&(g.properties.displayType="list")}n.$inject=["$rootScope","$scope","$timeout","Config","Content","ContentPicker","ContentTemplate","CustomContentType","Features","Instance","Utils","Widget"],angular.module("Controllers").controller("WidgetCommunityListSettingsController",n)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r){var i,a=this,o=!1,s=[];a.Community=t,a.Content=n,a.getWidgetClass=function(){return r.empty(s),a.parentCtrl.getWidgetClass(s),a.isWidgetEmpty()&&s.push("widget--is-empty"),s},a.isWidgetEmpty=function(){return!i||o},a.init=function(){var t=e.params;i=n.getCurrent(),o="community"===t.contentType&&("template"===t.type||t.isTemplate)},this.setParentController=function(e){a.parentCtrl=e,a.init()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetCommunityMembers","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-community-members/views/widget-community-members.html"}}n.r(t),n.d(t,"WidgetCommunityMembersController",(function(){return r})),n.d(t,"WidgetCommunityMembersDirective",(function(){return i})),r.$inject=["$state","Community","Content","Utils"],angular.module("Widgets").directive("widgetCommunityMembers",i)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l){var u,d=this;d.views=void 0,d.communityType=void 0,d.currentUserType=void 0,d.currentView=void 0,d.getWidgetClass=function(){var e=[];return d.parentCtrl.getWidgetClass(e),d.isWidgetEmpty()&&e.push("widget--is-empty"),e},d.isWidgetEmpty=function(){return!u||!d.views.calendar&&!d.views.media&&!d.views.dashboard},d.isWidgetHidden=function(){return d.parentCtrl.isHidden=!d.parentCtrl.designerMode()&&d.isWidgetEmpty(),d.parentCtrl.isHidden},d.switchView=function(n,s){var c=s&&s.uid||void 0;o()(d.views,n)&&t.go("app.front.community",{identifier:c,view:n},{notify:!1}).then((function(){a.getCurrent().template=i.getTemplateByName(u,n),r.setAllNotificationsAsRead(n),e.$broadcast("community__switch-view",n)}))},this.setParentController=function(e){d.parentCtrl=e,function(){u=a.getCurrent();var e=r.getAvailableViews(u),i="app.front.content-edit"===t.current.name?n.subTemplate:n.view;d.communityType=u.communityType,d.currentUserType=l.getConnected().accountType,d.isOneDriveCommunity=r.isOneDriveCommunity(u),d.isOutlookCommunity=r.isOutlookCommunity(u),d.views=c()(e,e),d.currentView=r.getDefaultLandingView(i,e)}()},d.openCommunityDetailsCardDialog=function(){var e=u;if(!e||!e.id)throw new Error("No current community to show");s.open("community-details-card-".concat(e.id))}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetCommunityNavigation","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-community-navigation/views/widget-community-navigation.html"}}n.r(t),n.d(t,"WidgetCommunityNavigationDirective",(function(){return i}));var a=n(356),o=n.n(a),s=n(259),c=n.n(s);r.$inject=["$rootScope","$state","$stateParams","Community","CommunityTemplate","Content","LxDialogService","User"],angular.module("Widgets").directive("widgetCommunityNavigation",i)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/email/:methodKey",{},{send:{isArray:!1,method:"POST",params:{methodKey:"send"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("EmailFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n){var i=n.createLumsitesBaseService(r,{autoInit:!1,objectIdentifier:"uid"});return i.sendEmail=function(n,r,i,a,o,s,c){return t.send({body:n,captcha:r,customerId:e.getCustomerId(),replyTo:i,subject:a,to:o,contentId:s,widgetId:c}).$promise},i}n.r(t),n.d(t,"EmailService",(function(){return r})),r.$inject=["Customer","EmailFactory","LumsitesBaseService"],angular.module("Services").service("Email",r)},function(e,t){!function(){"use strict";function e(e){var t=this;t.Content=e,this.setParentController=function(e){t.parentCtrl=e}}e.$inject=["Content"],angular.module("Widgets").directive("widgetContact",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetContact","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-contact/views/widget-contact.html"}}))}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,m,h,E,O,T,I,A,D,P,R,k,U,x,B,G){function H(){E.getItems(ye.subscriptionParams.customContentTypes).then((function(e){ye.subscriptionContentTypes=e}))}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";if(angular.isUndefinedOrEmpty(C()(ge,t)))return e;angular.isObject(ge[t])&&(ge[t]=z()(ge[t]));var r=[];return r=angular.isArray(ge[t][0])?Y.a.apply(void 0,p()(ge[t])):ge[t],v()(e,(function(e){return!S()(r,e[n])}))}function q(){var e=C()(ye.widget,"properties",{});ye.hasFilters=$()(C()(e,"filters",[]),["enable",!0]),ye.hasFollowButton=ye.isContentListFilter()&&T.hasFeature("social")&&!e.disableFollowButton}function Q(){return angular.isDefinedAndFilled(ve)&&ve.widgetType===I.WIDGET_TYPES.COMMUNITY_LIST}function Z(){return me===I.CONTENT_TYPES.DIRECTORY||angular.isDefinedAndFilled(ve)&&ve.widgetType===I.WIDGET_TYPES.DIRECTORY_ENTRY}function J(){return J=u()(o.a.mark((function e(t){var n,r,i,a,s,l,u,d,p,f,m,v,h,y,b,O,T,I,_,w,D;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.translate("CUSTOM_CONTENT_TYPE_SELECT_HERITABLE"),r=angular.isDefinedAndFilled(C()(ye.widget,"properties.instance",[])),i=0,e.next=5,E.getItems(g()(t));case 5:a=e.sent,s=a.map((function(e){var t=e.instance;return A.instanceKeyToInstanceFromSiblings(t,!0)})),l={},u=!0,d=!1,p=void 0,e.prev=11,f=a.keys()[Symbol.iterator]();case 13:if(u=(m=f.next()).done){e.next=32;break}if(v=m.value,h=a[v],y=s[v],b=C()(y,"name"),O=angular.isDefined(l[n])?N()(l[n],"id"):[],!h.heritable){e.next=24;break}angular.isUndefined(l[n])&&(l[n]=[]),S()(O,h.id)||(l[n].push(h),O.push(h.id),i++),e.next=29;break;case 24:if(r&&!S()(ye.widget.properties.instance,h.instance)){e.next=29;break}if(!angular.isUndefined(b)){e.next=27;break}return e.abrupt("return");case 27:angular.isUndefined(l[b])&&(l[b]=[]),S()(l[b],h)||(l[b].push(h),i++);case 29:u=!0,e.next=13;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(11),d=!0,p=e.t0;case 38:e.prev=38,e.prev=39,u||null==f.return||f.return();case 41:if(e.prev=41,!d){e.next=44;break}throw p;case 44:return e.finish(41);case 45:return e.finish(38);case 46:for(T=0,I=Object.entries(l);T<I.length;T++)_=c()(I[T],2),w=_[0],D=_[1],angular.isUndefinedOrEmpty(D)?delete ye.customContentTypes[w]:ye.customContentTypes[w]=W()(D,(function(e){return x.translate(e.name)}));ye.nbCustomContentTypes=i;case 48:case"end":return e.stop()}}),e,null,[[11,34,38,46],[39,,41,45]])}))),J.apply(this,arguments)}function ee(){if(_e)return n.resolve();ye.is.initializing.ccts=!0;var e=[],t=m.getCurrent(),r=ye.widget.properties,i=[];return angular.isDefinedAndFilled(C()(r,"customList.customContentType"))?e.push(r.customList.customContentType):ye.widget.properties.linkedToLocalWidget&&!Z()&&(angular.isDefinedAndFilled(C()(ve,"properties.customContentType"))?e=ve.properties.customContentType:angular.isDefinedAndFilled(Ie)?angular.forEach(Ie,(function(t){i.push(n((function(n){E.listForInstance(t).then((function(t){angular.isUndefinedOrEmpty(t)||(e=e.concat(N()(t,"id"))),n()})).catch(n)})))})):e.push(t.customContentType)),angular.isUndefinedOrEmpty(i)&&(i=[n.resolve(e)]),n((function(t,r){n.all(i).then((function(){(function(e){return J.apply(this,arguments)})(e).then(t).catch(r)})).catch(r)})).finally((function(){ye.is.initializing.ccts=!1}))}function te(){ye.is.initializing.metadata=!0,ye.availableMetadata=[],ye.filteredMetadata={};var e=$()(Te,(function(e){return e.entriesHasMetadata}));(!Z()||angular.isUndefinedOrEmpty(Te)||e)&&R.getRefactoredMetadata().then((function(e){var t=R.getMetadataFilteredByProperty("displayInFilter",!0,e),n=angular.isDefinedAndFilled(C()(ge,"metadata")),r=N()(he,"uid");angular.forEach(t,(function(e){if(!angular.isUndefinedOrEmpty(e.id)){var t=angular.isUndefinedOrEmpty(e.customContentTypes),i=angular.isUndefinedOrEmpty(e.instance),a=!Z()&&(angular.isUndefinedOrEmpty(r)||angular.isDefinedAndFilled(_()(e.customContentTypes,r)));if(C()(ve,"widgetType")!==I.WIDGET_TYPES.INSTANCE_LIST||i){var o=t||a;if(o){ye.availableMetadata.push(e);var s=R.getFilteredMetadata(e.id,!0);if(n){var c=V(s,"metadata");c.length===s.length?ye.filteredMetadata[e.id]=s:ye.filteredMetadata[e.id]=s.filter((function(e){return!c.some((function(t){return e.id===t.id}))}))}else ye.filteredMetadata[e.id]=s}}}}));var i=b()(z()(C()(ve,"properties.metadata")));if(angular.isUndefinedOrEmpty(i))ye.is.initializing.metadata=!1;else{var a=ye.widget.properties.metadata;angular.forEach(C()(ve,"properties.metadata",[]),(function(e,t){angular.isUndefinedOrEmpty(e)||(a[t]=(a[t]||[]).concat(e))})),ye.is.initializing.metadata=!1}})),ye.is.initializing.metadata=!1}function ne(){var e=[];return angular.isDefinedAndFilled(ye.widget.properties.query)&&e.push("query_".concat(ye.widget.properties.query)),angular.isDefinedAndFilled(C()(ye.widget,"properties.customContentType"))&&e.push("customContentType_".concat(angular.isArray(ye.widget.properties.customContentType)?ye.widget.properties.customContentType.join(","):ye.widget.properties.customContentType)),angular.isDefined(ye.widget.properties.onlyFeatureFeeds)&&e.push("onlyFeatureFeeds_".concat(ye.widget.properties.onlyFeatureFeeds)),angular.forEach(ye.widget.properties.tags,(function(t){angular.isDefinedAndFilled(t)&&e.push("tags_".concat(t))})),angular.forEach(ye.widget.properties.metadata,(function(t){angular.isDefinedAndFilled(t)&&e.push("metadata_".concat(t))})),angular.isDefinedAndFilled(ye.widget.properties.startDate)&&e.push("startDate_".concat(moment(ye.widget.properties.startDate).format(be))),angular.isDefinedAndFilled(ye.widget.properties.endDate)&&e.push("endDate_".concat(moment(ye.widget.properties.endDate).format(be))),e}function re(){var e=t.search(),n=e.filters;return angular.isArray(n)?n:angular.isDefinedAndFilled(n)?[n]:void 0}function ie(e){if(angular.isUndefinedOrEmpty(e))return n.resolve({});ye.is.initializing.tags=!0;var t=ye.widget.properties,r=[];return n((function(n){r=angular.isDefinedAndFilled(t.instance)?t.instance:C()(ve,"properties.isAllInstancesSiblings",!1)?void 0:angular.isDefinedAndFilled(C()(ve,"properties.instance",[]))?ve.properties.instance:[A.getCurrentInstanceId()];var i,a=angular.isDefinedAndFilled(C()(ge,"tags"));if(Z()){var o=(i=e,M()(i,(function(e,t){return angular.isDefinedAndFilled(t.tags)&&(e[x.translate(t.name)]=t.tags),e}),{}));return a&&(o=V(o,"tags","uuid")),void n(o)}E.getTagsForHeaderSelect(N()(e,"uid"),(function(e){angular.forEach(Object.keys(e),(function(t){e[t]=W()(e[t],(function(e){return x.translate(e.name)}))})),n(e)}),(function(){n({})}),r,a?ge.tags:void 0)})).finally((function(){ye.is.initializing.tags=!1}))}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ee,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.getLang("current");return angular.isUndefined(e)?"":moment(e).locale(n).format(t)}function oe(e){return se.apply(this,arguments)}function se(){return se=u()(o.a.mark((function e(t){var r,i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=G.getSimpleUrlParams(t),ye.widget.properties.query=r.query,ye.widget.properties.tags=angular.isUndefined(r.tags)||angular.isArray(r.tags)?r.tags:r.tags.split(","),r.customContentType=r.customContentType||[],angular.isArray(r.customContentType)||(ye.widget.properties.customContentType=r.customContentType.split(",")),angular.isDefined(r.startDate)&&(ye.widget.properties.startDate=moment(r.startDate,be),ye.widget.properties.startDateStr=ae(moment(r.startDate,be))),angular.isDefined(r.endDate)&&(ye.widget.properties.endDate=moment(r.endDate,be),ye.widget.properties.endDateStr=ae(moment(r.endDate,be))),!angular.isDefinedAndFilled(r.metadata)){e.next=21;break}return i=[],ye.widget.properties.metadata=ye.widget.properties.metadata||{},r.metadata=angular.isArray(r.metadata)?r.metadata:[r.metadata],angular.forEach(r.metadata,(function(e){if(!angular.isUndefinedOrEmpty(e)&&angular.isString(e)){var t=e.split(",");angular.forEach(t,(function(e){i.push(R.getMetadataFromKey(e,!0,!1))}))}})),e.next=14,n.all(i);case 14:if(a=e.sent,!angular.isUndefinedOrEmpty(a)){e.next=17;break}return e.abrupt("return");case 17:s=w()(a.filter(Boolean),"topParent"),c=Object.assign(ye.widget.properties.metadata,j()(s,(function(e,t){var n,r,i=null!==(n=null===(r=ye.widget.properties.metadata)||void 0===r?void 0:r[t])&&void 0!==n?n:[],a=N()(e,"id");return K()(i.concat(a))}))),delete c[void 0],ye.widget.properties.metadata=c;case 21:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ce(){var e;angular.isUndefinedOrEmpty([ye.widget.properties.linkedUuid,ve],"some")||(ve.widgetType===I.WIDGET_TYPES.DIRECTORY_ENTRY&&angular.isDefinedAndFilled(Te)?(e={metadata:angular.fastCopy(C()(ve.properties,"metadata")),tags:angular.fastCopy(C()(ve.properties,"directoryTags"))},ge=e):ge=ve.widgetType===I.WIDGET_TYPES.POST_LIST&&angular.isDefinedAndFilled(ye.currentCommunity)?{communityTags:angular.fastCopy(C()(ve.properties,"communityTags"))}:angular.fastCopy(C()(ve.properties,"filterRestriction")),angular.isDefinedAndFilled(ge)&&angular.forEach(ge.metadata,(function(e,t){angular.isDefined(e)&&!angular.isArray(e)&&(ge.metadata[t]=[e])})))}function le(e,t){ye.widget.properties.tags=[],ye.widget.properties.metadata={};var r=n.resolve();e&&(ye.instances=[],r=n((function(e,t){ye.is.initializing.instances=!0,A.getSiblings(!1).then((function(t){if(Ie=[],t.length>1)ye.widget.properties.linkedToLocalWidget&&!Z()&&(C()(ve,"properties.isAllInstancesSiblings",!1)?(Ie=A.getSiblingsIds(!0),ye.instances=angular.fastCopy(t)):(Ie=C()(ve,"properties.instance",[]),ye.instances=v()(t,(function(e){return S()(C()(ve,"properties.instance",[]),e.uid)}))));else{Ie=[A.getCurrentInstanceId()];var n=angular.fastCopy(A.getCurrent());angular.isDefinedAndFilled(n)&&(ye.instances=[n])}if(angular.isDefinedAndFilled(Ie)&&angular.isUndefinedOrEmpty(ye.instances)){var r={ids:Ie};A.filterize(r,(function(t){ye.instances=t,e(ye.instances)}))}else e(ye.instances)})).catch(t)})).finally((function(){ye.is.initializing.instances=!1}))),r.then((function(){H();var e=n.resolve();t&&(e=ee()),e.then((function(){if(angular.isDefinedAndFilled(ye.customContentTypes)){var e=[];if(he=[],1===ye.nbCustomContentTypes){he=ye.customContentTypes[y()(Object.keys(ye.customContentTypes))];var t=ie(he);e.push(t),t.then((function(e){ye.customContentTypeTags=e,ye.customContentTypeTagsForInterest=angular.isObject(e)?b()(z()(e)):e,te()}))}else{var r=C()(ye.widget,"properties.customContentType",[]),i=C()(ve,"properties.customContentType",[]);angular.isUndefinedOrEmpty(r)&&angular.isDefinedAndFilled(i)&&(r=i),angular.forEach(r,(function(t){var r=n.defer();e.push(r.promise),E.getItem({uid:t},(function(e){he.push(e),ie(he).then((function(e){ye.customContentTypeTags=e,ye.customContentTypeTagsForInterest=angular.isObject(e)?b()(z()(e)):e,r.resolve()}))}),r.resolve,void 0,ye.widget.uuid,!1)})),n.all(e).then((function(){te()}))}n.all(e).then((function(){ce(),ye.hasCustomContentTypeTags=!!angular.isDefinedAndFilled(ye.customContentTypeTags)&&ye.customContentTypeTags[y()(Object.keys(ye.customContentTypeTags))].length>0}))}else Z()?(angular.isDefinedAndFilled(O.getCurrent())&&me===I.CONTENT_TYPES.DIRECTORY?(Te=[O.getCurrent()],ye.currentDirectory=Te[0]):angular.isDefinedAndFilled(C()(ve,"properties.directory"))?(Te=[],angular.forEach(ve.properties.directory,(function(e){var t=O.getById(e);angular.isDefinedAndFilled(t)&&Te.push(t)})),1===ve.properties.directory.length&&(ye.currentDirectory=Te[0])):(Te=[],ye.currentDirectory={}),ce(),ie(Te).then((function(e){ye.currentDirectoryTags=e,ye.hasCurrentDirectoryTags=angular.isDefinedAndFilled(ye.currentDirectoryTags),te()}))):_e&&(angular.isDefinedAndFilled(d.getCurrent())?ye.currentCommunity=d.getCurrent():angular.isDefinedAndFilled(C()(ve,"properties.community",[]))&&1===ve.properties.community.length&&"pick"===ve.properties.displayType?d.get({uid:ve.properties.community[0]},(function(e){d.setCurrent(angular.fastCopy(e)),ye.currentCommunity=d.getCurrent(),ce(),angular.isDefinedAndFilled(C()(ge,"communityTags"))?ye.currentCommunityTags=ye.currentCommunity.tagsDetails.filter((function(e){return S()(ge.communityTags,e.uid)})):ye.currentCommunityTags=ye.currentCommunity.tagsDetails,angular.isUndefinedOrEmpty(C()(ve,"properties.postType"))&&(ye.currentCommunityPostTypes=ye.currentCommunity.postTypes||z()(I.POST_TYPES))}),G.displayServerError):ye.currentCommunity={},ce(),ye.currentCommunityTags=ye.currentCommunity.tagsDetails,angular.isDefinedAndFilled(C()(ve,"properties.postType"))?ye.currentCommunityPostTypes=angular.fastCopy(ve.properties.postType):ye.currentCommunityPostTypes=ye.currentCommunity.postTypes||z()(I.POST_TYPES))}))}))}function ue(){var e=A.getProperty(f.INSTANCE_PROPERTIES.CONTENT_FILTERS);Z()?e=A.getProperty(f.INSTANCE_PROPERTIES.DIRECTORY_FILTERS):Q()?e=A.getProperty(f.INSTANCE_PROPERTIES.COMMUNITY_FILTERS):_e?e=A.getProperty(f.INSTANCE_PROPERTIES.POST_FILTERS):angular.isDefinedAndFilled(ve)&&ve.widgetType===I.WIDGET_TYPES.INSTANCE_LIST&&(e=A.getProperty(f.INSTANCE_PROPERTIES.INSTANCE_FILTERS)),angular.isUndefinedOrEmpty(e)?ye.widget.properties.filters=[]:angular.isString(e[0])?(ye.widget.properties.filters=[],angular.forEach(e,(function(e){ye.widget.properties.filters.push({enable:!0,name:e})}))):ye.widget.properties.filters=angular.copy(e)}function de(e){var t=m.getCurrent(),n=h.getElement(t,"widget","uuid",e);n.isMainWidget&&(ye.widget.properties.linkedUuid=e,ye.init())}function pe(e){var n;if(e&&ye.closeDropdown(),ye.widget.properties.linkedToLocalWidget){s((function(){r.$broadcast("widget-content-filter-search",ye.widget.uuid)})),ye.refreshSubscribeButton();var i=ne();if(angular.equals(i,re()))return;t.search("filters",i)}else A.getCurrentInstanceId()===ye.widget.properties.customList.instance?(n=G.uri(a.href(m.getStateName(ye.widget.properties.customList.type),{slug:x.translate(ye.widget.properties.customList.slug)}),ne()),t.url(n)):A.getInstanceById(ye.widget.properties.customList.instance,(function(e){n=G.uri(a.href("app.front.content-get",{instance:e.slug,slug:x.translate(ye.widget.properties.customList.slug)},{absolute:!0}),ne()),l.open(decodeURIComponent(n),"_blank")}))}function fe(){return angular.isDefinedAndFilled(ve)&&ve.widgetType===I.WIDGET_TYPES.CONTENT_LIST}var ge,me,ve,he,ye=this,Ee="MMMM D, YYYY",be="YYYY-MM-DD",Oe=["author","communityTags","customContentType","startDate","endDate","startDateStr","endDateStr","tags","onlyFeatureFeeds","metadata","postStatus","postType","hasRelevant","isMerged","reportStatus"],Ce="widget-content-filter-",Te=[],Se=[I.CONTENT_TYPES.CUSTOM_LIST,I.CONTENT_TYPES.CUSTOM,I.CONTENT_TYPES.PAGE,I.CONTENT_TYPES.NEWS],Ie=[],_e=!1;ye.canSubscribe=!1,ye.currentCommunity={},ye.currentCommunityPostTypes=[],ye.currentCommunityTags=[],ye.currentDirectory={},ye.currentDirectoryTags=[],ye.customContentTypes={},ye.customContentTypeTags={},ye.customContentTypeTagsForInterest=[],ye.couldBeLinkedToALocalWidget=!1,ye.dropdownId="widget-content-filter-dropdown-".concat(ye.widget.uuid),ye.dropdownTarget="widget-content-filter-dropdown-target-".concat(ye.widget.uuid),ye.filteredMetadata={},ye.findingSubscription=!1,ye.hasCustomContentTypeTags=!1,ye.hasCurrentDirectoryTags=!1,ye.instances=[],ye.is={initializing:{ccts:!0,instances:!0,metadata:!0,tags:!0}},ye.nbCustomContentTypes=0,ye.subscriptionParams={},ye.subscriptionContentTypes=[],ye.Community=d,ye.CustomContentType=E,ye.Directory=O,ye.Features=T,ye.Instance=A,ye.Interest=D,ye.PostConstant=k,ye.Metadata=R,ye.SocialSubscription=U,ye.Translation=x,ye.User=B,ye.closeDropdown=function(e){angular.isDefinedAndFilled(e)&&e.stopPropagation(),P.close(ye.dropdownId)},ye.filterIsVisible=function(e){var t=angular.isUndefinedOrEmpty(C()(e,"name"))||!e.enable,n=!Z()&&!_e&&S()(Se,me)&&!S()(f.CONTENT_FILTERS,e.name),r=Z()&&!S()(f.DIRECTORY_FILTERS,e.name),i=_e&&!S()(f.POST_FILTERS,e.name);if(t||n||r||i)return!1;var a=e.name.toLowerCase(),o=B.getConnected(),s=C()(o,"isSuperAdmin",!1)||d.isUserAdmin(ye.currentCommunity,o);switch(a){case"author":return angular.isDefinedAndFilled(ye.currentCommunity)||fe()||s;case"community-tags":return angular.isDefinedAndFilled(C()(ye.currentCommunity,"tagsDetails"));case"directory-tags":return angular.isDefinedAndFilled(ye.currentDirectoryTags);case"metadata":var c=$()(Te,(function(e){C()(e,"entriesHasMetadata")}));return S()(Se,me)||me===I.CONTENT_TYPES.DIRECTORY&&c||angular.isDefinedAndFilled(ve)&&ve.widgetType===I.WIDGET_TYPES.DIRECTORY_ENTRY;case"post-merged":return s;case"post-status":return S()(ye.currentCommunity.postTypes,I.POST_TYPES.IDEA)&&angular.isDefinedAndFilled(ye.currentCommunity.postStatuses);case"relevant-comment":case"report-status":return s;case"tags":var l=!1;return!angular.isUndefinedOrEmpty(he)&&(angular.forEach(he,(function(e){angular.isDefinedAndFilled(C()(e,"tags"))&&angular.isArray(e.tags)&&(l=!0)})),l);default:return!0}},ye.getMetadataClass=function(e){var t=e.heritable?"widget-content-filter__metadata--is-heritable":"";return angular.isDefinedAndFilled(e.functionalInnerId)&&(t+=" metadata-selector--".concat(e.functionalInnerId)),t},ye.getWidgetClass=function(){var e=[];return ye.parentCtrl.getWidgetClass(e),ye.isWidgetEmpty()&&e.push("widget--is-empty"),ye.widget.properties.hideSubheader&&e.push("widget-content-filter--subheader-hidden"),e},ye.goToFilteredCustomList=pe,ye.hasFilledFilters=function(){var e=ye.widget.properties;if(angular.isDefined(e.query))return!0;var t=N()(Oe,(function(t){return e[t]}));return angular.isDefinedAndFilled(t,"some")},ye.idToDirectory=function(e,t,n,r){angular.forEach(n,(function(i,a){var o=L()(n[a],(function(t){return t[r]===e}));angular.isDefined(o)&&(t||F.a)(o)}))},ye.isContentListFilter=fe,ye.isWidgetEmpty=function(){return!ye.hasFilters&&!ye.hasFollowButton||angular.isUndefinedOrEmpty(ye.widget.properties.customList)&&!ye.widget.properties.linkedToLocalWidget},ye.isWidgetHidden=function(){return ye.parentCtrl.isHidden=!ye.parentCtrl.designerMode()&&ye.isWidgetEmpty(),ye.parentCtrl.isHidden},ye.onCustomContentTypeChange=function(){le(!1,!1),ye.refreshSubscribeButton()},ye.onInstanceChange=function(){le(!1,!0),ye.refreshSubscribeButton()},ye.openDropdown=function(e){e.stopPropagation(),P.open(ye.dropdownId,"#".concat(ye.dropdownTarget))},ye.refreshSubscribeButton=function(){if(T.hasFeature("social")){var e=C()(ye.widget,"properties",{});ye.canSubscribe=angular.isDefinedAndFilled(ve)&&ve.widgetType===I.WIDGET_TYPES.CONTENT_LIST&&angular.isUndefinedOrEmpty(e.query)&&!e.onlyFeatureFeeds&&angular.isUndefinedOrEmpty(e.startDateStr)&&angular.isUndefinedOrEmpty(e.endDateStr)&&(C()(ve,"properties.customContentType.length",0)>0||angular.isDefinedAndFilled(e.customContentType)),ye.canSubscribe?function(){if(T.hasFeature("social")&&(ye.isSubscribed=!1,ye.canSubscribe)){var e=C()(ve,"properties");if(!angular.isUndefinedOrEmpty(e)){var t=C()(ye.widget,"properties",{}),n=angular.isUndefinedOrEmpty(C()(t,"customContentType"))?C()(e,"customContentType"):t.customContentType,r=[];angular.forEach(n,(function(e,t){angular.isObject(e)&&angular.isDefinedAndFilled(e.id)?r[t]=e.id:r[t]=e}));var i=t.tags;if(angular.isUndefinedOrEmpty(i)){i=[];var a=X()(N()(ye.customContentTypeTags,"uuid"),ye.customContentTypeTags);angular.forEach(e.customContentTypeTags,(function(e){angular.isDefinedAndFilled(a[e])&&i.push(e)}))}var o=angular.fastCopy(C()(e,"metadata",{}));angular.isDefinedAndFilled(t.metadata)&&angular.forEach(t.metadata,(function(e,t){o[t]=angular.fastCopy(e)}));var s=angular.isDefinedAndFilled(z()(o))?g()(b()(z()(o))):[];ye.subscriptionParams={customContentTypes:r,customContentTypeTags:angular.fastCopy(i),orMetadata:s},H(),ye.findingSubscription=!0}}}():ye.isSubscribed=!1}else ye.canSubscribe=!1},ye.resetAllFilters=function(){ye.widget.properties.query=void 0,ye.resetFilter(),ye.goToFilteredCustomList(!0)},ye.resetFilter=function(){var e=ye.widget.properties;angular.forEach(Oe,(function(t){e[t]=void 0}))},i.$on("widget-is-main-toggled",(function(e,t,n){ye.widget.properties.linkedToLocalWidget&&(de(t),ue(),n||(ye.widget.properties.linkedToLocalWidget=!1))})),i.$on("content-picker__close-start",(function(e,t){Ce===t&&(ye.init(),ue())})),i.$on("widget-content-filter-settings",(function(e,t){ye.widget.uuid===t&&(ye.init(),ue())})),i.$on("widget-community-list-settings",(function(e,t){ye.widget.properties.linkedToLocalWidget&&de(t)})),i.$on("widget-content-list-settings",(function(e,t){ye.widget.properties.linkedToLocalWidget&&de(t)})),i.$on("widget-directory-entry-list-settings",(function(e,t){ye.widget.properties.linkedToLocalWidget&&de(t)})),i.$on("widget-instance-list-settings",(function(e,t){ye.widget.properties.linkedToLocalWidget&&de(t)})),i.$on("widget-post-list-settings",(function(e,t){ye.widget.properties.linkedToLocalWidget&&de(t)})),i.$on("widget-content-filter-settings-update",(function(e,t){t===ye.widget.uuid&&q()}));var Ae=r.$on("$locationChangeSuccess",(function(e,t,n){angular.isDefined(n)&&!angular.equals(t.split("?")[0],n.split("?")[0])||oe(re()).then((function(){pe(!1)}))}));i.$on("$destroy",Ae),i.$watch("vm.widget.properties.filters",(function(e,t){e!==t&&q()}),!0),ye.init=function(){Ce="widget-content-filter-".concat(ye.widget.uuid),ye.widget=ye.widget||{},ye.widget.properties=C()(ye.widget,"properties",{});var e=ye.widget.properties,t=m.getCurrent();if(me=C()(t,"type"),e.linkedToLocalWidget){ve=h.getElement(t,"widget","isMainWidget",!0)||e.linkedWidget||{properties:{}};var n=C()(ve,"widgetType");_e=n===I.WIDGET_TYPES.POST_LIST,ye.widget.properties.onlyFeatureFeeds=C()(ve,"properties.onlyFeatureFeeds"),ye.refreshSubscribeButton()}else{if(!angular.isDefinedAndFilled(C()(e,"customList.type")))return void(e.filters=[]);me=e.customList.type}var r=f.CONTENT_FILTERS;if(Z()?r=f.DIRECTORY_FILTERS:_e?r=f.POST_FILTERS:Q()&&(r=f.COMMUNITY_FILTERS),angular.isDefinedAndFilled(e.filters)&&(e.filters=v()(e.filters,(function(e){return S()(r,e.name)}))),angular.isUndefinedOrEmpty(e.filters)||!angular.isObject(y()(e.filters)))ue();else{var i=f.CONTENT_FILTERS;Z()?i=f.DIRECTORY_FILTERS:_e?i=f.POST_FILTERS:Q()&&(i=f.COMMUNITY_FILTERS);var a=N()(e.filters,"name");angular.forEach(i,(function(t){S()(a,t)||e.filters.push({enable:!1,name:t})}))}"community"===me&&angular.isUndefined(C()(e,"viewMode"))&&(e.viewMode="condensed"),"condensed"===e.viewMode&&(e.style.content.theme="light"),Ie=[],ye.instances=[],le(!0,!0);var o=re();angular.isDefinedAndFilled(o)&&oe(o).then((function(){pe(!1)})),q()},this.setParentController=function(e){ye.parentCtrl=e,ye.init()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetContentFilter","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-content-filter/views/widget-content-filter.html"}}n.r(t),n.d(t,"WidgetContentFilterController",(function(){return r})),n.d(t,"WidgetContentFilterDirective",(function(){return i}));var a=n(6),o=n.n(a),s=n(8),c=n.n(s),l=n(10),u=n.n(l),d=n(19),p=n.n(d),f=n(174),g=n.n(f),m=n(75),v=n.n(m),h=n(51),y=n.n(h),E=n(260),b=n.n(E),O=n(4),C=n.n(O),T=n(17),S=n.n(T),I=n(157),_=n.n(I),A=n(508),w=n.n(A),D=n(21),L=n.n(D),P=n(28),N=n.n(P),R=n(224),j=n.n(R),k=n(33),F=n.n(k),U=n(223),M=n.n(U),x=n(217),$=n.n(x),B=n(218),W=n.n(B),G=n(167),Y=n.n(G),H=n(146),K=n.n(H),V=n(99),z=n.n(V),q=n(259),X=n.n(q);r.$inject=["$httpParamSerializer","$location","$q","$rootScope","$scope","$state","$timeout","$window","Community","Config","Content","ContentTemplate","CustomContentType","Directory","Features","InitialSettings","Instance","Interest","LxDropdownService","Metadata","PostConstant","SocialSubscription","Translation","User","Utils"],angular.module("Widgets").directive("widgetContentFilter",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u){var d,p,f=this;f.PICKER_ID="widget-content-filter-",f.couldBeLinkedToALocalWidget=!1,f.Config=r,f.Utils=l,f.Widget=u,f.isFollowable=function(){var e=p||d.properties.linkedWidget,t=(angular.isUndefined(d.properties.customList)||angular.isUndefinedOrEmpty(d.properties.customList))&&!d.properties.linkedToLocalWidget;return!t&&angular.isDefinedAndFilled(e)&&e.widgetType===c.WIDGET_TYPES.CONTENT_LIST&&s.hasFeature("social")},f.linkToLocalWidget=function(){n((function(){d=u.getCurrent(),angular.isDefinedAndFilled(e.get(d,"properties.linkedToLocalWidget"))&&(d.properties.customList=void 0),t.$broadcast("widget-content-filter-settings",d.uuid)}))},f.openContentPicker=function(){l.waitForAndExecute("#"+f.PICKER_ID,a)},f.updateSettings=function(){n((function(){d=u.getCurrent(),t.$broadcast("widget-content-filter-settings-update",d.uuid)}))},function(){d=u.getCurrent(),d.properties=d.properties||{};var t=d.properties;f.PICKER_ID+=e.get(d,"uuid"),angular.isUndefined(t.customList)&&(d.properties.customList={}),p=o.getElement(i.getCurrent(),"widget","isMainWidget",!0),angular.isDefined(p)&&(f.couldBeLinkedToALocalWidget=!0)}()}t.$inject=["$rootScope","$timeout","Config","Content","ContentPicker","ContentTemplate","Features","InitialSettings","Utils","Widget"],angular.module("Controllers").controller("WidgetContentFilterSettingsController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(305),r=n(35);!function(){function n(n,i,a,o,s,c,l,u,d,p,f,g,m,v,h,y,E){function b(){j.widget.properties.notifications&&!angular.isUndefinedOrEmpty(v.displayList(v.KEY_UNREAD))&&(E.empty(j.notificationsList),angular.forEach(j.widgetListCtrl.items,(function(e){!angular.isUndefinedOrEmpty(e)&&v.hasUnreadNotifications(e.uid)&&j.notificationsList.push(e.uid)})))}function O(){var e=[],t=j.widget.properties;return angular.isDefinedAndFilled(t.viewMode)&&"cover"===t.viewMode&&e.push("widget-content-list--"+t.thumbnailPosition+"-thumbnail"),angular.isDefined(t.perLine)&&t.perLine>0&&e.push("widget-content-list--group-by-"+t.perLine),angular.isDefinedAndFilled(t.slideshow)&&"vertical"!==t.viewMode?e.push("widget-content-list--slideshow"):e.push("widget-content-list--no-slideshow"),l.isCallInProgress(j.widgetListCtrl.getListKey())&&e.push("widget-content-list--is-loading"),t.fullExcerpt&&e.push("widget-content-list--has-full-excerpt"),e}function C(){var t=j.widget.properties;if("cover"===t.viewMode&&"background"===t.thumbnailPosition)return t.coverTheme="s"===j.widgetListCtrl.widgetCtrl.widgetSize?e.get(t,"style.content.theme","light"):"dark",t.coverTheme}function T(){var t=j.widget.properties,n=angular.isArray(t.customContentType)?t.customContentType:[t.customContentType];E.empty(j.widgetListCtrl.tabs.items);var r,a=[],o={};return angular.forEach(n,(function(t){a.push(p.getCustomContentTypesTags(t).then((function(t){angular.isUndefinedOrEmpty(t)||angular.extend(o,e.zipObject(e.map(t,"uuid"),t))})))})),i.all(a).then((function(){angular.forEach(t.customContentTypeTags,(function(n){if(!angular.isUndefinedOrEmpty(n)){var i=o[n];if(!angular.isUndefinedOrEmpty(i)&&h.hasTranslations(i.name)){var a={name:h.translate(i.name),uid:i.uuid},s=t.customContentTypeTags.indexOf(i.uuid);-1===s?j.widgetListCtrl.tabs.items.push(a):j.widgetListCtrl.tabs.items[s]=a,angular.isUndefined(r)&&(r=angular.fastCopy(e.last(j.widgetListCtrl.tabs.items)))}}})),j.widgetListCtrl.tabs.items=e.compact(j.widgetListCtrl.tabs.items),j.widgetListCtrl.selectTab(t.allTabEnabled?void 0:r,!1)}))}function S(){if("subList"===j.widget.properties.type){var t=j.widgetListCtrl.getListKey()+"-"+o.params.slug;j.widgetListCtrl.setListKey(t);var n={};n=j.widgetListCtrl.widgetCtrl.designerMode()&&angular.isDefinedAndFilled(o.params.key)?m.findNavItemById(o.params.key)||{}:m.findNavItemBySlug(o.params.slug)||{},R.ids=[],angular.forEach(e.get(n,"children",[]),(function(t){var n=e.get(t,"uid",e.get(t,"id"));angular.isDefinedAndFilled(n)&&R.ids.push(n)})),R.queryType="getContentByIds",l.cacheFilterize(R,j.widgetListCtrl.updateListItems,j.widgetListCtrl.updateListItems,t,j.widgetListCtrl.projection)}}function I(){var e={items:{feedKeys:!0,id:!0,instance:!0,link:!0,properties:!0,slug:!0,type:!0,uid:!0}},t=j.widget.properties;return t.fullExcerpt&&(e.items.template=!0),t.hideThumbnail||(e.items.thumbnail=!0,e.items.mediaThumbnail=!0,e.items.thumbnailBlobkey=!0),angular.isDefinedAndFilled(t.fields)?angular.forEach(t.fields,(function(n){if(!angular.isUndefined(n)&&!angular.isUndefinedOrEmpty(n.name)&&n.enable){var r=n.name.toLowerCase();switch(r){case"author":e.items.author=!0,e.items.authorDetails=y.getAuthorProjection(),e.items.writer=!0,e.items.writerDetails=y.getAuthorProjection();break;case"publication-date":f.getInstance().googleAnalytics&&t.displayAnalyticsViews&&(e.items.analyticsViewSum=!0),e.items.publicationDate=!0;break;case"tags":e.items.customContentType=!0,e.items.customContentTypeDetails=!0,e.items.customContentTypeTags=!0;break;case"title":e.items.title=!0;break;case"excerpt":e.items.excerpt=!0;break;case"metadata":e.items.customContentType=!0,e.items.metadata=!0;break;case"social":e.items.comments=!0,e.items.liked=!0,e.items.likes=!0,e.items.hasCommentWidget=!0}}})):(f.getInstance().googleAnalytics&&t.displayAnalyticsViews&&(e.items.analyticsViewSum=!0),e.items.author=!0,e.items.authorDetails=y.getAuthorProjection(),e.items.comments=!0,e.items.customContentTypeDetails=!0,e.items.customContentTypeTags=!0,e.items.excerpt=!0,e.items.hasCommentWidget=!0,e.items.liked=!0,e.items.likes=!0,e.items.metadata=!0,e.items.publicationDate=!0,e.items.title=!0,e.items.writer=!0,e.items.writerDetails=y.getAuthorProjection()),e}function _(r,i,a){r=r||{};var o=f.getCurrentInstanceId(),s=j.widget.properties;if(R=angular.fastCopy(F),R.instanceId=[o],s.featuredOnly&&(R.isFeatured=!0),R.onlyFeatureFeeds=Boolean(s.onlyFeatureFeeds),angular.isUndefinedOrEmpty(s.type))j.widgetListCtrl.initialized=!0;else{if("pick"===s.type)R.ids=s.contents,R.queryType="getContentByIds",l.cacheFilterize(R,j.widgetListCtrl.updateListItems,j.widgetListCtrl.updateListItems,j.widgetListCtrl.getListKey(),j.widgetListCtrl.projection,a);else if("list"===s.type&&angular.isDefined(s.customContentType)){var c;f.getSiblings(!1).then((function(u){if(u.length>1&&(e.get(s,"isAllInstancesSiblings",!1)?(R.instanceId=e.map(u,"id"),R.currentInstanceId=o):angular.isDefinedAndFilled(s.instance)&&(R.instanceId=angular.isArray(s.instance)?s.instance:[s.instance],delete R.currentInstanceId)),e.get(s,"isAllInstancesFavorites",!1)&&(R.userFavoritesOnly=!0),R.customContentType=s.customContentType,angular.isDefinedAndFilled(s.listOrderDir)&&(c="asc"===s.listOrderDir.toLowerCase()?"":"-"),angular.isDefinedAndFilled(s.listOrder)?R.sortOrder=[angular.isDefined(c)?c+s.listOrder:s.listOrder]:R.sortOrder=["-publicationDate"],angular.isDefinedAndFilled(s.author)&&(R.author=s.author),angular.isNumber(s.maxNumber)&&(R.maxResults=s.maxNumber),angular.isDefinedAndFilled(r.tags)?R.customContentTypeTags=r.tags:angular.isDefinedAndFilled(s.customContentTypeTags)&&(s.tabsEnabled&&i&&(j.widgetListCtrl.tabSelected=s.allTabEnabled?j.widgetListCtrl.tabDefault:j.widgetListCtrl.tabs.items[0]),angular.isDefinedAndFilled(j.widgetListCtrl.tabSelected)&&(R.customContentTypeTags="all"===j.widgetListCtrl.tabSelected.uid?s.customContentTypeTags:j.widgetListCtrl.tabSelected.uid)),angular.isDefinedAndFilled(s.metadata)||angular.isDefinedAndFilled(r.metadata)){var d=angular.fastCopy(s.metadata)||{};angular.isDefinedAndFilled(r.metadata)&&angular.forEach(r.metadata,(function(e,t){d[t]=angular.fastCopy(e)})),R.combinedMetadata=[],angular.forEach(d,(function(e){(angular.isString(e)||angular.isArray(e))&&angular.isDefinedAndFilled(e)&&R.combinedMetadata.push({metadata:e})}))}if(angular.isDefinedAndFilled(r))R.query=r.query,R.onlyFeatureFeeds=angular.isDefined(r.onlyFeatureFeeds)?Boolean(r.onlyFeatureFeeds):R.onlyFeatureFeeds,angular.isDefined(r.startDate)&&(R.startDate=moment(r.startDate).utc().format(t.b)),angular.isDefined(r.endDate)&&(R.endDate=moment(r.endDate).utc().format(t.b)),angular.isDefinedAndFilled(r.customContentType)&&(R.customContentType=angular.isArray(r.customContentType)?r.customContentType:[r.customContentType]),angular.isDefinedAndFilled(r.instance)&&(R.instanceId=angular.isArray(r.instance)?r.instance:[r.instance],delete R.currentInstanceId),angular.isDefinedAndFilled(r.author)&&(R.author=angular.isDefinedAndFilled(r.author.email)?r.author.email:void 0),l.filterize(R,j.widgetListCtrl.updateListItems,j.widgetListCtrl.updateListItems,j.widgetListCtrl.getListKey(),j.widgetListCtrl.projection);else if(U&&j.widget.isMainWidget&&angular.isDefinedAndFilled(n.search().filters)){var p=E.getSimpleUrlParams(n.search().filters);R.query=p.query,R.customContentTypeTags=p.tags,angular.isDefinedAndFilled(p.customContentType)&&(R.customContentType=angular.isArray(p.customContentType)?p.customContentType:[p.customContentType]),angular.isDefinedAndFilled(p.instance)&&(R.instanceId=angular.isArray(p.instance)?p.instance:[p.instance],delete R.currentInstanceId),angular.isDefinedAndFilled(p.onlyFeatureFeeds)&&(R.onlyFeatureFeeds="true"===p.onlyFeatureFeeds),angular.isDefinedAndFilled(p.startDate)&&(R.startDate=moment(p.startDate+"T00:00:00.000000").utc().format(t.b)),angular.isDefinedAndFilled(p.endDate)&&(R.endDate=moment(p.endDate+"T23:59:59.999999").utc().format(t.b)),angular.isDefinedAndFilled(p.metadata)&&(p.metadata=angular.isArray(p.metadata)?p.metadata:[p.metadata],R.combinedMetadata=R.combinedMetadata||[],angular.forEach(p.metadata,(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=e.split(",");angular.forEach(t,(function(e){(angular.isString(e)||angular.isArray(e))&&angular.isDefinedAndFilled(e)&&R.combinedMetadata.push({metadata:e})}))}}))),l.filterize(R,j.widgetListCtrl.updateListItems,j.widgetListCtrl.updateListItems,j.widgetListCtrl.getListKey(),j.widgetListCtrl.projection)}else l.cacheFilterize(R,j.widgetListCtrl.updateListItems,j.widgetListCtrl.updateListItems,j.widgetListCtrl.getListKey(),j.widgetListCtrl.projection,a);U=!1}))}S()}}function A(){b()}function w(){j.widget.properties.type===j.widgetListCtrl.SELECTION_TYPES.pick&&"basic"===l.getViewMode()&&"get"!==l.getAction()&&E.waitForAndExecute("#"+k,(function(){u.open(k)}))}function D(){j.activeHighlightIndex=0}function L(){var e=j.widget.properties;return"cover"!==e.viewMode&&angular.isDefined(e.customContentTypeTags)&&e.customContentTypeTags.length>1}function P(){j.widget.properties=j.widget.properties||{};var t=j.widget.properties;j.widget.isMainWidget&&j.widgetListCtrl.setListKey(j.widgetListCtrl.getListKey()+Object(r.b)()),t.customContentType=t.customContentType||[],angular.isArray(t.customContentType)||(t.customContentType=[t.customContentType]),angular.forEach(t.customContentType,(function(e,n){angular.isObject(e)&&angular.isDefinedAndFilled([e.uid,e.id],"some")&&(t.customContentType[n]=e.uid||e.id)})),angular.isDefinedAndFilled(t.maxNumber)&&!angular.isNumber(t.maxNumber)&&(t.maxNumber=parseInt(t.maxNumber,10)),angular.isDefinedAndFilled(t.perLine)&&!angular.isNumber(t.perLine)&&(t.perLine=parseInt(t.perLine,10)),t.contents=t.contents||[],t.type=t.type||"pick",angular.isDefinedAndFilled(t.truncate)&&!angular.isNumber(t.truncate)&&(t.truncate=parseInt(t.truncate,10)),angular.isNumber(t.truncate)||(t.truncate=f.getProperty(c.INSTANCE_PROPERTIES.CONTENT_LIST_EXCERPT)),t.uncompressedThumbnail=!angular.isUndefined(t.uncompressedThumbnail)&&t.uncompressedThumbnail,t.fullExcerpt=!angular.isUndefined(t.fullExcerpt)&&t.fullExcerpt;var n=f.getProperty(c.INSTANCE_PROPERTIES.CONTENT_FIELDS);if(angular.isUndefinedOrEmpty(t.fields))angular.isString(n[0])?(t.fields=[],angular.forEach(n,(function(e){t.fields.push({enable:!0,name:e})}))):t.fields=angular.copy(n);else if(angular.isString(t.fields[0])){var i=[];angular.forEach(t.fields,(function(e){i.push({enable:!0,name:e})})),angular.forEach(n,(function(n){angular.isObject(n)&&(n=n.name),e.includes(t.fields,n)||i.push({enable:!1,name:n})})),t.fields=i}angular.isUndefinedOrEmpty(t.viewMode)&&(t.viewMode="vertical"),angular.isUndefinedOrEmpty(t.thumbnailPosition)&&(t.thumbnailPosition="background"),"cover"===t.viewMode&&(t.slideshow=!0,t.tabsEnabled=!1,C()),angular.isDefinedAndFilled(t.customContentTypeTags)&&p.getTagsForHeaderSelect(t.customContentType,(function(n){var r=[];angular.forEach(n,(function(t){r=r.concat(e.map(t,"uuid"))})),t.customContentTypeTags=e.intersection(t.customContentTypeTags,r)}),void 0,t.instance||[f.getCurrentInstanceId()])}function N(e){var t=j.widgetListCtrl.widgetCtrl.widgetSize,n=e[0];if(!angular.isUndefinedOrEmpty(n)&&n!==t){var r=j.widget.properties,i=r.coverTheme,o=C(),s=angular.isDefinedAndFilled(o)?o:r.style.content.theme;i!==s&&(a.$broadcast("widget-content-list-theme-update",j.widget.uuid,s),j.widgetListCtrl.computeClasses()),a.$broadcast("widget-content-list-size-update",j.widget.uuid,t)}}var R,j=this,k="widget-content-picker-",F={action:"PAGE_READ",onlyFeatureFeeds:!1,status:[c.CONTENT_STATUS.LIVE.value],type:[c.AVAILABLE_CONTENT_TYPES.PAGE,c.AVAILABLE_CONTENT_TYPES.NEWS,c.AVAILABLE_CONTENT_TYPES.CUSTOM]},U=!0;j.activeHighlightIndex=0,j.notificationsList=[],j.Content=l,j.CustomContentType=p,j.Notification=v,j.Translation=h,j.Utils=E,j.selectHighlight=function(e){e=angular.isUndefined(e)||e<0?0:e;var t=j.widgetListCtrl.items.length;e=e>=t?t:e,j.activeHighlightIndex=e},a.$on("main-nav-loaded",S),a.$on("notifications-loaded",b),a.$on("widget-style-settings",(function(e,t){if(j.widget.uuid===t){var n=j.widget.properties,r=n.coverTheme,i=C();angular.isDefinedAndFilled(i)&&r!==i&&a.$broadcast("widget-content-list-theme-update",j.widget.uuid,n.coverTheme),a.$broadcast("widget-content-list-size-update",j.widget.uuid),j.widgetListCtrl.computeClasses()}})),j.init=function(e){k+=j.widget.uuid,j.widgetListCtrl.init(e)},this.setParentController=function(e){j.widgetListCtrl=e,j.widgetListCtrl.widgetListChildCtrl={computeClasses:O,computeTabsNames:T,getProjection:I,initList:_,initProperties:P,notificationsList:j.notificationsList,onListItemsUpdated:A,onWidgetListClick:w,selectTab:D,shouldDisplayListTabs:L,widgetSizeUpdate:N},j.init(!0)}}n.$inject=["$location","$q","$scope","$state","$timeout","Config","Content","ContentPicker","ContentTemplate","CustomContentType","Instance","Layout","MainNav","Notification","Translation","User","Utils"],angular.module("Widgets").directive("widgetContentList",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetContentList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-content-list/views/widget-content-list.html"}}))}()}.call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(19),r=n.n(t);!function(){function t(t,n,i,a,o,s,c,l,u,d,p,f,g,m){function v(t,n,r,i){var a=m.getCurrent().properties;if(!angular.isUndefined(a[r])){var o=[];angular.forEach(t,(function(t){o=o.concat(e.map(t,n))}));var s=angular.fastCopy(a[r]),c=[];a[r]=[],angular.forEach(s,(function(e){var t=angular.isDefined(i)?e[i]:e;o.indexOf(t)>-1&&c.push(e)})),a[r]=c}}function h(t){if(angular.isArray(t)&&!angular.isUndefinedOrEmpty(t)){var n=e.get(m.getCurrent(),"properties",{});angular.forEach(l.displayList(l.CURRENT_INSTANCE_CCT_LIST_KEY),(function(n){e.includes(t,n.parentCustomContentType)&&(t=[].concat(r()(t),[n.id]))})),O.customContentTypeMetaData=f.listByCustomContentTypeIds(t);var i=n.isAllInstancesSiblings?void 0:n.instance;l.getTagsForHeaderSelect(t,(function(e){O.contentTypesTags=e,v(O.contentTypesTags,"uuid","customContentTypeTags")}),void 0,i)}}function y(){var n;(n=e.get(m.getCurrent(),"properties.customContentType"),t((function(t,r){angular.isUndefinedOrEmpty(n)&&t([]),n=angular.isArray(n)?n:[n],l.getItems(n).then((function(r){var i=[];angular.forEach(r,(function(t){var r=e.get(t,"id");angular.isUndefinedOrEmpty(r)||e.includes(n,r)&&i.push(t)})),t(i)})).catch(r)}))).then((function(t){h(e.map(t,"id"))}))}function E(e,t,n){for(var r in e)if(e.hasOwnProperty(r)&&angular.isArray(e[r]))for(var i=0,a=e[r].length;i<a;++i)if(e[r][i][n]===t)return e[r][i]}function b(t){t=Boolean(t);var r=m.getCurrent(),i=r.properties||{};if(i.isAllInstancesSiblings||1!==i.instance.length||(i.isInstanceNameDisplayed=!1),!t){var o=e.get(r,"properties.metadata",{});r.properties.filterRestriction={metadata:e.filter(o,(function(e){return Boolean(e)})),tags:e.get(r,"properties.customContentTypeTags")}}a((function(){n.$broadcast("widget-content-list-settings",r.uuid)}))}var O=this;O.CONTENT_PICKER_ID="widget-content-picker-",O.SORTABLE_OPTIONS={},O.authorKey=void 0,O.availableAuthors=[],O.contentTypeMetadata=[],O.contentTypes={},O.contentTypesTags={},O.isExcerptEnabled=!1,O.isMetadataEnabled=!1,O.listOrderSelection=["publicationDate","updatedAt","title","author","likes","comments"],O.listkey=void 0,O.CustomContentType=l,O.Features=u,O.Instance=d,O.MainNav=p,O.Metadata=f,O.Utils=g,O.debouncedUpdateWidget=e.debounce(b,250),O.emailToUserObject=function(e,t){t=t||angular.noop,angular.isDefinedAndFilled(e)&&t({email:e})},O.openContentPicker=function(){g.waitForAndExecute("#"+O.CONTENT_PICKER_ID,s)},O.propertyToContentTypes=function(e,t){var n=E(O.contentTypes,e,"id");angular.isDefinedAndFilled(n)&&t(n)},O.selectCustomContentType=function(){var e;h(m.getCurrent().properties.customContentType),e=m.getCurrent().properties.customContentType,angular.isDefinedAndFilled(e)||delete m.getCurrent().properties.metadata,O.updateWidget()},O.setAsMainWidget=function(){var e=m.getCurrent();if(e.isMainWidget){var t=c.getElementList(o.getCurrent(),"widget","isMainWidget",!0);angular.forEach(t,(function(t){t.uuid!==e.uuid&&(t.isMainWidget=!1)}))}n.$broadcast("widget-is-main-toggled",e.uuid,e.isMainWidget)},O.updateCoverTheme=function(){var e=m.getCurrent().properties;"background"===e.thumbnailPosition?e.coverTheme="dark":e.coverTheme=void 0,O.updateWidget(!0)},O.toggleField=function(e){if(!angular.isUndefined(e)&&!angular.isUndefinedOrEmpty(e.name)){var t=e.name.toLowerCase();"excerpt"===t&&(O.isExcerptEnabled=e.enable),"metadata"===t&&(O.isMetadataEnabled=e.enable),O.updateWidget(!0)}},O.updateContentTypeList=function(t,n){var r=e.get(m.getCurrent(),"properties",{}),i=!1,a=d.getSiblings(!0),o=e.find(a,(function(e){return angular.isUndefined(e.parent)})),s=e.get(o,"id");r.isAllInstancesSiblings&&angular.isDefinedAndFilled(s)?(t=[s],r.isInstanceNameDisplayed=!0):angular.isDefinedAndFilled(r.instance)&&(r.isAllInstancesFavorites=!1,t=angular.fastCopy(r.instance),angular.isDefinedAndFilled(s)&&!e.includes(t,s)&&(t.push(s),i=!0)),l.groupByInstances(t,r.isAllInstancesSiblings,i,(function(e){!n&&angular.isDefinedAndFilled(r.customContentType)&&angular.isArray(r.customContentType)&&(v(e,"id","customContentType"),h(r.customContentType)),O.contentTypes=e,n||O.updateWidget()}))},O.updateContentTypeTags=function(){O.updateWidget()},O.updateWidget=b,O.userObjectToEmail=function(t,n){n=n||angular.noop,angular.isDefinedAndFilled(e.get(t,"email"))&&n(t.email)},O.uuidToTagMultiContentTypes=function(e,t){t(E(O.contentTypesTags,e,"uuid"))},i.$on("content-picker__close-start",(function(e,t){t===O.CONTENT_PICKER_ID&&O.updateWidget(!0)})),i.$on("custom-content-type-list-updated",(function(){y()})),i.$on("reset-instance-siblings-selector",(function(){var e=m.getCurrent().properties;e.instance=[d.getCurrentInstanceId()],e.customContentType=[],e.customContentTypeTags=[],e.metadata=[],e.author=[]})),i.$on("widget-sub-nav-settings",(function(e,t){m.getCurrent().uuid===t&&O.updateWidget()})),function(){var t=m.getCurrent(),n=[],r=d.getCurrentInstanceId();t.properties=t.properties||{};var i=t.properties;O.authorKey="author-"+t.uuid,O.listkey="widget-"+t.uuid,O.CONTENT_PICKER_ID+=t.uuid,angular.isUndefinedOrEmpty(i.instance)&&(i.instance=[r]),i.customContentType=e.uniq(i.customContentType),d.getSiblings(!1).then((function(t){t.length>1?n=i.isAllInstancesSiblings?d.getSiblingsIds(!0):i.instance:(n=[r],i.instance=[r],i.isAllInstancesSiblings=!1),i.isAllInstancesSiblings||(n=e.intersection(n,d.getSiblingsIds(!0))),O.updateContentTypeList(n,!0)})),angular.isArray(i.customContentType)&&angular.isDefinedAndFilled(i.customContentType)&&y(),O.isExcerptEnabled=angular.isDefinedAndFilled(e.filter(i.fields,{enable:!0,name:"excerpt"})),O.isMetadataEnabled=angular.isDefinedAndFilled(e.filter(i.fields,{enable:!0,name:"metadata"})),O.SORTABLE_OPTIONS.orderChanged=O.updateWidget,O.updateWidget()}()}t.$inject=["$q","$rootScope","$scope","$timeout","Content","ContentPicker","ContentTemplate","CustomContentType","Features","Instance","MainNav","Metadata","Utils","Widget"],angular.module("Controllers").controller("WidgetContentListSettingsController",t)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/content/data/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("DataFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid"})}e.$inject=["DataFactory","LumsitesBaseService"],angular.module("Services").service("Data",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l){function d(e){return p.apply(this,arguments)}function p(){return p=c()(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.split(/\?(.+)/),r=n[1],!angular.isDefinedAndFilled(n[1])||!u()(n[1],"user.")){e.next=6;break}return e.next=5,l.getUrlUserInjectionInformation(n[1],s.getConnected());case 5:r=e.sent;case 6:return e.abrupt("return","".concat(n[0],"?").concat(r));case 7:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var f=this,g=f.widget.properties.content,m=f.widget.properties.type;f.chartOptions={legend:{display:!0},maintainAspectRatio:!1},f.Charts=n,f.Data=r,f.getWidgetClass=function(){var e=[];return f.parentCtrl.getWidgetClass(e),f.isWidgetEmpty()&&e.push("widget--is-empty"),angular.isDefined(m)&&e.push("widget-data--".concat(m)),e},f.isWidgetEmpty=function(){return!r.isCallInProgress(f.parentCtrl.getListKey())&&(angular.isUndefined(m)||angular.isUndefinedOrEmpty(f.widget.properties.url))},f.isWidgetHidden=function(){return f.parentCtrl.designerMode()||r.isCallInProgress(f.parentCtrl.getListKey())||!angular.isUndefined(m)&&!angular.isUndefinedOrEmpty(f.widget.properties.url)?f.parentCtrl.isHidden=!1:f.parentCtrl.isHidden=!0,f.parentCtrl.isHidden},e.$on("widget-data-settings",(function(e,t){f.widget.uuid===t&&f.init()})),f.init=function(){var e=c()(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=angular.fastCopy(f.widget.properties.url),m=f.widget.properties.type,!angular.isDefined(m)||!angular.isDefinedAndFilled(f.widget.properties.url)){e.next=8;break}if(!u()(s,"?")){e.next=7;break}return e.next=6,d(s);case 6:s=e.sent;case 7:r.get({raw:"raw"===m,url:s},(function(e){e.raw?f.rawContent=e.rawContent:g=e.content,t((function(){return e=m,void("pie"===e?angular.isDefinedAndFilled(g)&&angular.isDefinedAndFilled(g.headers)&&angular.isDefinedAndFilled(g.values)?f.chartData=n.getPieData(g.values[0],g.headers):i.error(a.translate("WIDGET_TYPE_DATA_DATA_ERROR")):"table"===e&&(f.chartData={headers:g.headers||[],values:g.values||[]}));var e}))}),l.displayServerError,f.parentCtrl.getListKey());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.setParentController=function(e){f.parentCtrl=e,f.init()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetData","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-data/views/widget-data.html"}}n.r(t),n.d(t,"WidgetDataController",(function(){return r})),n.d(t,"WidgetDataDirective",(function(){return i}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(17),u=n.n(l);r.$inject=["$scope","$timeout","Charts","Data","LxNotificationService","Translation","User","Utils"],angular.module("Widgets").directive("widgetData",i)},function(e,t){!function(){"use strict";function e(e,t,n){this.updateWidget=function(){t((function(){e.$broadcast("widget-data-settings",n.getCurrent().uuid)}))}}e.$inject=["$rootScope","$timeout","Widget"],angular.module("Controllers").controller("WidgetDataSettingsController",e)}()},function(e,t,n){"use strict";function r(){var e=this;this.setParentController=function(t){e.parentCtrl=t}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetDelve","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-delve/views/widget-delve.html"}}n.r(t),n.d(t,"WidgetDelveDirective",(function(){return i})),angular.module("Widgets").directive("widgetDelve",i)},function(e,t,n){"use strict";function r(e){function t(t){var o,c,l,u;"current"===t&&(r.pickerUsers=[],o="user",c=null,l=e.getCurrent(),u=a()(l,"properties"),l.uuid!==i.uuid&&n(),s()(u,[o],c),l.properties=u)}function n(){i=e.getCurrent(),function(){r.documentTypeList=c.DOCUMENT_TYPE_LIST;var e=a()(i,"properties");angular.isUndefinedOrEmpty(e.userType)&&(e.userType="current"),angular.isUndefinedOrEmpty(e.user)&&t("current"),angular.isUndefinedOrEmpty(e.orderBy)&&(e.orderBy="MOST_USED"),angular.isUndefinedOrEmpty(e.maxResults)&&(e.maxResults=10),angular.isUndefinedOrEmpty(e.contentType)&&(e.contentType="INSIGHT_PEOPLE"),angular.isUndefinedOrEmpty(e.isTargetedUserDisplayed)&&(e.isTargetedUserDisplayed=!0),s()(i.properties,e)}()}var r=this,i={};r.selectUserType=t,n()}n.r(t),n.d(t,"WidgetDelveSettingsController",(function(){return r}));var i=n(4),a=n.n(i),o=n(7),s=n.n(o),c=n(920);r.$inject=["Widget"],angular.module("Controllers").controller("WidgetDelveSettingsController",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u,d,p,f,g,m){function v(){var e=[],t=S.widget.properties;if(angular.isUndefinedOrEmpty(t.directory))return e;if(angular.isArray(t.directory)&&1===t.directory.length){var n=s.getById(t.directory[0]);angular.isDefined(n)&&angular.isDefinedAndFilled(n.type)&&e.push("widget-directory-entry-list--"+n.type)}else angular.isDefinedAndFilled(t.directory.type)&&e.push("widget-directory-entry-list--"+t.directory.type);return e}function h(){var t,n=S.widget.properties.directoryTags;if(g.empty(S.widgetListCtrl.tabs.items),!angular.isUndefinedOrEmpty([n,_],"some")){var r=e.zipObject(e.map(_,"uuid"),_);angular.forEach(n,(function(n){if(!angular.isUndefinedOrEmpty(n)){var i=r[n];!angular.isUndefinedOrEmpty(i)&&f.hasTranslations(i.name)&&(S.widgetListCtrl.tabs.items.push({name:f.translate(i.name),uid:i.uuid}),angular.isUndefined(t)&&(t=angular.fastCopy(e.last(S.widgetListCtrl.tabs.items))))}})),S.widgetListCtrl.selectTab(S.widget.properties.allTabEnabled?void 0:t)}}function y(n,r,i){var o,s={currentInstance:d.getCurrentInstanceId(),ignore403:!0},l=S.widgetListCtrl.getListKey(),p=S.widget.properties;if(angular.isDefinedAndFilled(p.listOrderDir)&&(o="ASC"===p.listOrderDir.toUpperCase()?"":"-"),angular.isDefinedAndFilled(p.sortOrder)?(s.sortOrder=p.sortOrder,s.displaySortMandatory=!1):angular.isDefinedAndFilled(p.listOrder)?(s.sortOrder=angular.isDefined(o)?o+p.listOrder:p.listOrder,s.displaySortMandatory=!1):(s.sortOrder="order",s.displaySortMandatory=!0),angular.isDefinedAndFilled(p.instance)&&(s.instance=p.instance),angular.isDefinedAndFilled(p.metadata)||n){var m=n&&angular.isDefinedAndFilled(n.metadata)?n.metadata:p.metadata;s.combinedMetadata=[],angular.forEach(m,(function(e){angular.isUndefinedOrEmpty(e)||!angular.isString(e)&&!angular.isArray(e)||s.combinedMetadata.push({metadata:e})}))}s.tags=e.compact(function(t){if(angular.isDefinedAndFilled(e.get(t,"tags")))return t.tags;var n=S.widget.properties;return angular.isUndefinedOrEmpty(n.directoryTags)?void 0:n.tabsEnabled&&angular.isDefined(S.widgetListCtrl.tabSelected)&&"all"!==S.widgetListCtrl.tabSelected.uid?[S.widgetListCtrl.tabSelected.uid]:n.directoryTags}(n));var v=a.getCurrent();if(e.get(v,"type")===u.CONTENT_TYPES.DIRECTORY&&S.widget.isMainWidget){if(angular.isUndefinedOrEmpty([v.uid,v.externalKey],"every"))return void S.widgetListCtrl.updateListItems();s.directory=v.externalKey}else angular.isDefinedAndFilled(p.directory)&&(angular.isArray(p.directory)?s.directory=p.directory:angular.isDefined(p.directory.id)&&(s.directory=[p.directory.id]));if("pick"===p.type)return s.ids=e.map(p.entries,"id"),s.queryType="getDirectoryEntriesByIds",s.sortOrder=void 0,c.cacheFilterize(s,(function(e){S.widgetListCtrl.updateListItems(),e.length<s.ids.length&&(S.widget.properties.entries=angular.fastCopy(e))}),S.widgetListCtrl.updateListItems,l,void 0,i),void(A=!1);if(angular.isNumber(p.maxNumber)&&(s.maxResults=p.maxNumber),"favorites"===p.type&&(s.userFavoritesOnly=!0),s.lang=f.getLang("current"),angular.isDefinedAndFilled(n))s.query=n.query,c.filterize(s,S.widgetListCtrl.updateListItems,S.widgetListCtrl.updateListItems,l);else if(A&&S.widget.isMainWidget&&angular.isDefinedAndFilled(t.search().filters)){var h=g.getSimpleUrlParams(t.search().filters);s.query=h.query,s.tags=h.tags,angular.isDefinedAndFilled(h.metadata)&&(h.metadata=angular.isArray(h.metadata)?h.metadata:[h.metadata],s.combinedMetadata=s.combinedMetadata||[],angular.forEach(h.metadata,(function(e){angular.isUndefinedOrEmpty(e)||angular.forEach(e.split(","),(function(e){angular.isUndefinedOrEmpty(e)||!angular.isString(e)&&!angular.isArray(e)||s.combinedMetadata.push({metadata:e})}))}))),c.filterize(s,S.widgetListCtrl.updateListItems,S.widgetListCtrl.updateListItems,l)}else c.cacheFilterize(s,S.widgetListCtrl.updateListItems,S.widgetListCtrl.updateListItems,l,void 0,i);A=!1}function E(){S.widget.properties=S.widget.properties||{};var e=S.widget.properties;if(angular.isUndefined(e.entries)&&(e.entries=[]),angular.isUndefinedOrEmpty(e.type)&&(e.type="pick"),angular.isDefinedAndFilled(e.instance)&&angular.isString(e.instance)&&(e.instance=[e.instance]),angular.isUndefinedOrEmpty(e.viewMode)&&(e.viewMode="vertical"),angular.isDefinedAndFilled(e.viewMode)&&("vertical"===e.viewMode?e.viewMode="list":"horizontal"===e.viewMode&&(e.viewMode="grid")),angular.isUndefinedOrEmpty(e.viewModeVariant)&&(e.viewModeVariant="group"),angular.isUndefinedOrEmpty(e.itemsSeparator)&&(e.itemsSeparator=!0),angular.isUndefined(e.itemsPerLine)&&angular.isDefinedAndFilled(e.perLine)){var t=angular.isString(e.perLine)?parseInt(e.perLine,10):e.perLine;angular.isNumber(t)&&(e.itemsPerLine=t),delete e.perLine}if(angular.isDefinedAndFilled(e.itemsPerLine)&&angular.isString(e.itemsPerLine)){var n=parseInt(e.itemsPerLine,10);angular.isNumber(n)&&(e.itemsPerLine=n)}angular.isDefinedAndFilled(e.slideshow)&&(e.slideshowEnabled=e.slideshow,delete e.slideshow),angular.isDefinedAndFilled(e.slideshowAutoPlay)&&(e.slideshowAutoplay=e.slideshowAutoPlay,delete e.slideshowAutoPlay)}function b(){S.widget.properties.type===S.widgetListCtrl.SELECTION_TYPES.pick&&"basic"===a.getViewMode()&&"get"!==a.getAction()&&g.waitForAndExecute("#"+I,l)}function O(){return!S.canAddLocalEntry}function C(){var e=S.widget.properties;return"pick"!==e.type&&angular.isDefinedAndFilled(e.directoryTags)&&e.directoryTags.length>1}function T(){S.parentCtrl.directoryEntries=e.filter(S.widgetListCtrl.items,(function(e){return angular.isDefinedAndFilled(e.id)}))}var S=this,I="widget-directory-entry-list-picker-",_=[],A=!0;S.canAddLocalEntry=!1,S.DirectoryEntry=c,S.init=function(t){t&&(I+=S.widget.uuid),S.widget.properties=S.widget.properties||{};var n,r,i=S.widget.properties;angular.isDefinedAndFilled(i.instance)&&angular.isString(i.instance)&&(i.instance=[i.instance]),angular.isArray(i.instance)||(i.instance=void 0),t?(n=S.widgetListCtrl.init.bind(S,t),n=n||angular.noop,angular.isArray(S.widget.properties.instance)?(_=[],s.getMultiInstanceDirectories(S.widget.properties.instance,(function(t){angular.forEach(t,(function(t){angular.isDefinedAndFilled(e.get(t,"tags"))&&(_=_.concat(t.tags))})),n()}),!0)):n()):S.widgetListCtrl.init(t),r=s.getCurrent(),angular.isUndefinedOrEmpty(r)||e.get(a.getCurrent(),"type")!==u.CONTENT_TYPES.DIRECTORY||angular.isUndefinedOrEmpty(r.userLocalEntryFeedKeys)||!S.widget.isMainWidget?(S.canAddLocalEntry=!1,S.canAddLocalEntry):(S.canAddLocalEntry=m.hasSubscriptions(r.userLocalEntryFeedKeys),S.canAddLocalEntry)},this.setParentController=function(e){S.widgetListCtrl=e,S.widgetListCtrl.widgetListChildCtrl={computeClasses:v,computeTabsNames:h,initList:y,initProperties:E,isWidgetEmpty:O,onListItemsUpdated:T,onWidgetListClick:b,shouldDisplayListTabs:C},S.parentCtrl={directoryEntries:[]},S.init(!0)}}t.$inject=["$location","$scope","$state","Analytics","Content","ContentTemplate","Directory","DirectoryEntry","DirectoryEntryPicker","InitialSettings","Instance","LxDialogService","Translation","Utils","User"],angular.module("Widgets").directive("widgetDirectoryEntryList",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetDirectoryEntryList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-directory-entry-list/views/widget-directory-entry-list.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u,d,p,f,g,m){function v(){var t,n,r;t=m.getCurrent().properties.directory,n={},r=[],m.getCurrent().isMainWidget&&c.getCurrent()?E.tags[f.translate(c.getCurrent().name)]=c.getCurrent().tags:(angular.forEach(b,(function(i){if(angular.isDefinedAndFilled(t)&&angular.isDefinedAndFilled(i.id)&&e.includes(t,i.id)&&angular.isDefinedAndFilled(i.tags)){n[f.translate(i.name)]=i.tags;var a=e.intersection(m.getCurrent().properties.directoryTags,e.map(i.tags,"uuid"));a.length&&(r=e.union(r,a))}})),m.getCurrent().properties.directoryTags=r,E.tags=n),h()}function h(){r((function(){t.$broadcast("widget-directory-entry-list-settings",m.getCurrent().uuid)}))}function y(t){c.getMultiInstanceDirectories(t,(function(t,n){for(var r in m.getCurrent().properties.directory=e.intersection(m.getCurrent().properties.directory,n),E.directories=t,t)t.hasOwnProperty(r)&&angular.isArray(t[r])&&(b=b.concat(t[r]));v()}))}var E=this,b=[];E.displayDirectorySelector=function(){return angular.isDefined(m.getCurrent().properties.instance)&&m.getCurrent().properties.instance.length&&angular.isDefinedAndFilled(E.directories)},E.isEmpty=angular.isUndefinedOrEmpty,E.keys=Object.keys,E.openDirectoryEntryPicker=function(){g.waitForAndExecute("#"+E.pickerId,l)},E.updateDirectoryList=y,E.updateTags=v,E.updateWidget=h,E.modelToSelect=function(t,n,r,i){for(var a in r)if(r.hasOwnProperty(a)){var o=e.find(r[a],(function(e){return e[i]===t}));angular.isDefined(o)&&(n||e.noop)(o)}},E.setAsMainWidget=function(){var e=m.getCurrent();if(e.isMainWidget){var n=o.getElementList(a.getCurrent(),"widget","isMainWidget",!0);angular.forEach(n,(function(t){t.uuid!==e.uuid&&(t.isMainWidget=!1)}))}t.$broadcast("widget-is-main-toggled",e.uuid,e.isMainWidget)},E.switchViewMode=function(e){m.getCurrent().properties.viewMode!==e&&(m.getCurrent().properties.viewMode=e,m.getCurrent().properties.viewModeVariant="group",E.updateWidget())},E.switchViewModeVariant=function(e){m.getCurrent().properties.viewModeVariant!==e&&(m.getCurrent().properties.viewModeVariant=e,E.updateWidget())},E.directories={},E.tags={},E.pickerId="widget-directory-entry-list-picker-"+m.getCurrent().uuid,E.listOrderSelection=["createdAt","updatedAt","name"],E.contentTypes=u.CONTENT_TYPES,E.Content=a,E.CustomContentType=s,E.Instance=d,E.Directory=c,E.Metadata=p,n.$on("directory-entry-picker__close-start",(function(e,t){t===E.pickerId&&h()})),n.$on("reset-instance-siblings-selector",(function(){var e=m.getCurrent().properties;e.instance=[d.getCurrentInstanceId()],e.directory=[],e.directoryTags=[],e.metadata=[]})),i.DIRECTORY_ENTRY_CUSTOM_SORT_ORDER&&E.listOrderSelection.push("order"),angular.isUndefined(m.getCurrent().properties.instance)&&(m.getCurrent().properties.instance=[d.getCurrentInstanceId()]),angular.isDefined(m.getCurrent().properties.directory)&&(angular.isArray(m.getCurrent().properties.directory)||(angular.isObject(m.getCurrent().properties.directory)?m.getCurrent().properties.directory=[m.getCurrent().properties.directory.id]:m.getCurrent().properties.directory=[m.getCurrent().properties.directory])),angular.isDefined(m.getCurrent().properties.instance)&&m.getCurrent().properties.instance.length>0&&y(m.getCurrent().properties.instance)}t.$inject=["$rootScope","$scope","$timeout","ConfigTheme","Content","ContentTemplate","CustomContentType","Directory","DirectoryEntryPicker","InitialSettings","Instance","Metadata","Translation","Utils","Widget"],angular.module("Controllers").controller("WidgetDirectoryEntryListSettingsController",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";angular.module("Widgets").directive("widgetDrawio",(function(){return{bindToController:!0,controller:"WidgetIframeController",controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetDrawio","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-iframe/views/widget-iframe.html"}}))}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){var a=this,o=!1;a.displayHttpsWarning=!1,a.Translation=r,a.Widget=i,a.deleteSelectedFile=function(t){var n=i.getCurrent(),s=e.get(n,"properties");angular.isUndefined(s)||angular.isUndefinedOrEmpty(t)||(s[t+"Id"]=void 0,s.embedUrl=void 0,s[t+"Name"]=void 0,s[t+"Url"]=void 0,s.url=void 0,s.height=void 0,n.title[r.inputLanguage]=void 0,s.more.link[r.inputLanguage]=void 0,o=!0,a.updateWidget(),a.init(),o=!1)},a.drivePickerCallback=function(e,t){if(angular.isDefinedAndFilled(e)&&angular.isDefinedAndFilled(t)){var n=i.getCurrent();n.properties=n.properties||{};var r=n.properties;angular.isDefinedAndFilled(e.id)?(r[t+"Id"]=e.id,r.embedUrl=e.embedUrl,r[t+"Name"]=e.name,r[t+"Url"]=e.url,r.url=e.url):angular.isDefinedAndFilled(e.url)&&(r[t+"Id"]=e.url.split("/").pop())}a.updateWidget()},a.fileAsLink=function(){var t=i.getCurrent().properties;e.set(t,"more.link."+r.inputLanguage,t.pickedUrl),a.updateWidget()},a.fileAsTitle=function(){var t=i.getCurrent();e.set(t,"title."+r.inputLanguage,t.properties.pickedName),a.updateWidget()},a.formatUrl=function(){var e=i.getCurrent().properties.url[r.inputLanguage];angular.isDefinedAndFilled(e)&&!e.startsWith("http")&&(e="http://"+e),a.updateWidget()},a.getFileId=function(e){if(!angular.isUndefinedOrEmpty(e))return i.getCurrent().properties[e+"Id"]},a.getFileName=function(t){if(!angular.isUndefinedOrEmpty(t)){var n=i.getCurrent(),r=e.get(i.getCurrent(),"properties",{});return angular.isDefinedAndFilled(r[t+"Name"])?(r.title=r[t+"Name"],r[t+"Name"]):n.properties[t+"Id"]}},a.getFileUrl=function(e){if(!angular.isUndefinedOrEmpty(e)){var t=i.getCurrent().properties;return angular.isDefinedAndFilled(t[e+"Url"])?(t.url=t[e+"Url"],t[e+"Url"]):t[e+"Url"]}},a.isFileSelected=function(e){if(!angular.isUndefined(e)){var t=i.getCurrent();t.properties=t.properties||{};var n=t.properties;return!!angular.isDefined(n[e+"Id"])||(n[e+"Id"]=void 0,n[e+"Name"]=void 0,!1)}},a.updateWidget=function(){n((function(){t.$broadcast("widget-iframe-settings",i.getCurrent().uuid)}))},a.init=function(){var e=i.getCurrent();e.properties=e.properties||{};var t=e.properties;!0===o?(t.titleType="addOwnTitle",t.linkType="addOtherLink"):(t.titleType=t.titleType||"addOwnTitle",t.linkType=t.linkType||"addOtherLink")},a.init()}t.$inject=["$rootScope","$timeout","Translation","Widget"],angular.module("Controllers").controller("WidgetDrawioSettingsController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(){return{bindToController:!0,controller:"WidgetIframeController",controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetDriveFilePreview","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-iframe/views/widget-iframe.html"}}n.r(t),n.d(t,"WidgetDriveFilePreviewDirective",(function(){return r})),angular.module("Widgets").directive("widgetDriveFilePreview",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c){function u(){return u=s()(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.getCurrent().properties.docPath,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(p.a)({docPath:t});case 5:r=e.sent,i=r.data.content[0],n.open(i.servingUrl,"_blank");case 8:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}var m=this,v=!1;m.displayHttpsWarning=!1,m.Translation=o,m.Widget=c;var h=Object(g.a)("widget");m.collapsedByDefaultActionAttributes=h({element:"settings",action:"collapsed-default-checkbox"}),m.enableCollapseActionAttributes=h({element:"settings",action:"collapsible-checkbox"}),m.deleteSelectedFile=function(e){var t=c.getCurrent(),n=l()(t,"properties");angular.isUndefined(n)||angular.isUndefinedOrEmpty(e)||(n["".concat(e,"Id")]=void 0,n["".concat(e,"Name")]=void 0,n.docPath=void 0,n.height=void 0,"useFile"===n.titleType&&d()(t,"title[".concat(o.inputLanguage,"]"),void 0),"useFileLink"===n.linkType&&d()(n,"more.link[".concat(o.inputLanguage,"]"),void 0),v=!0,m.updateWidget(),m.init(),v=!1)},m.fileAsLink=function(){var e=c.getCurrent().properties;e.pickedUrl?(d()(e,"more.link.".concat(o.inputLanguage),e.pickedUrl),m.updateWidget()):Object(p.a)({docPath:e.docPath}).then((function(t){var n=t.data.content[0];e.pickedUrl=n.servingUrl,d()(e,"more.link.".concat(o.inputLanguage),e.pickedUrl),m.updateWidget()}))},m.fileAsTitle=function(){var e=c.getCurrent();d()(e,"title.".concat(o.inputLanguage),e.properties.pickedName),m.updateWidget()},m.getFileId=function(e){if(!angular.isUndefinedOrEmpty(e))return c.getCurrent().properties["".concat(e,"Id")]},m.getFileName=function(e){if(!angular.isUndefinedOrEmpty(e)){var t=c.getCurrent(),n=l()(c.getCurrent(),"properties",{});return angular.isDefinedAndFilled(n["".concat(e,"Name")])?(n.title=n["".concat(e,"Name")],n["".concat(e,"Name")]):t.properties["".concat(e,"Id")]}},m.getFileUrl=function(e){if(!angular.isUndefinedOrEmpty(e)){var t=c.getCurrent().properties;return angular.isDefinedAndFilled(t["".concat(e,"Url")])?(t.url={},t.url[o.inputLanguage]=t["".concat(e,"Url")],t["".concat(e,"Url")]):t["".concat(e,"Url")]}},m.isFileSelected=function(e){if(!angular.isUndefined(e)){var t=c.getCurrent();t.properties=t.properties||{};var n=t.properties;return!!angular.isDefined(n["".concat(e,"Id")])||(n["".concat(e,"Id")]=void 0,n["".concat(e,"Name")]=void 0,!1)}},m.openDocumentInNewTab=function(){return u.apply(this,arguments)},m.openMediaPicker=function(){var e={allowedFileTypes:f.documentTypes.all,allowedProviders:[f.PROVIDERS.microsoft,f.PROVIDERS.google],isMediaModel:!1};i.open(void 0,(function(e){!function(e,t){var n=e.docPath,i=e.id,a=r.getMediaContentByLang(e,!0),o=a.name;if(angular.isDefinedAndFilled(e)&&angular.isDefinedAndFilled(t)){var s=c.getCurrent();s.properties=s.properties||{};var l=s.properties;Object(p.a)({docPath:n}).then((function(e){var t=e.data.content[0];l.pickedUrl=t.servingUrl})),l["".concat(t,"Id")]=i,l.docPath=n,l["".concat(t,"Name")]=o}m.updateWidget()}(e.object,"picked")}),e)},m.updateWidget=function(){t((function(){e.$broadcast("widget-iframe-settings",c.getCurrent().uuid)}))},m.hasCurrentWidgetTitle=function(){return c.shouldDisplayWidgetHeader(c.getCurrent().title)},m.init=function(){var e=c.getCurrent();e.properties=e.properties||{};var t=e.properties;!0===v?(t.titleType="addOwnTitle",t.linkType="addOtherLink"):(t.titleType=t.titleType||"addOwnTitle",t.linkType=t.linkType||"addOtherLink")},m.init()}n.r(t),n.d(t,"WidgetDriveFilePreviewSettingsController",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(4),l=n.n(c),u=n(7),d=n.n(u),p=n(302),f=n(145),g=n(59);r.$inject=["$rootScope","$timeout","$window","Document","ReusableMediaPicker","Translation","Widget"],angular.module("Controllers").controller("WidgetDriveFilePreviewSettingsController",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/drive/files/:methodKey",{},{copy:{isArray:!1,method:"POST",params:{methodKey:"copy"}},destroy:{isArray:!1,method:"POST",params:{methodKey:"destroy"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},insert:{isArray:!1,method:"POST",params:{methodKey:"insert"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},move:{isArray:!1,method:"POST",params:{methodKey:"move"}},search:{isArray:!1,method:"GET",params:{methodKey:"search"}},trash:{isArray:!1,method:"POST",params:{methodKey:"trash"}},untrash:{isArray:!1,method:"POST",params:{methodKey:"untrash"}},update:{isArray:!1,method:"POST",params:{methodKey:"update"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("DriveFilesFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/drive/:methodKey",{},{getToken:{isArray:!1,method:"GET",params:{methodKey:"getToken"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("DriveFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n){function r(e){var t=[],n=[];return angular.isUndefinedOrEmpty(e)||angular.forEach(e,(function(e){a()(n,e.id)||(t.push(e),n.push(e.id))})),t}var i=n.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"});return i.isSearchInProgress=!1,i.filterize=function(e,t,n,a){t=t||angular.noop,n=n||angular.noop;var o=i._getListKey(a);i._services[o]._filterize(e,(function(e){t(e),i._services[a]._list=r(i._services[a]._list)}),n)},i.nextSearchPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:angular.noop,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:angular.noop,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return i.isSearchInProgress=!0,this.nextPage((function(){i.isSearchInProgress=!1,e()}),(function(){i.isSearchInProgress=!1,t()}),n,r)},i.openFile=function(t){var n=t.file;angular.isUndefinedOrEmpty(n)||(a()(n.link,"http://drive.google.com/views/app.html")?e.open("https://drive.google.com/open?id=".concat(n.id),"_blank"):e.open(n.link,"_blank"))},i.search=function(e,n,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default";n=n||angular.noop,a=a||angular.noop,i.isSearchInProgress=!0,t.search(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.cursor,s=t.items,c=void 0===s?[]:s,l=t.more;i.isSearchInProgress=!1;var u=r(c);i._services[o]||(i._services[o]={}),i._services[o]._cursor=a,i._services[o]._list=u,i._services[o]._params=e,i._services[o]._more=l,n(u)}),(function(e){i.isSearchInProgress=!1,a(e)}),o)},i}n.r(t),n.d(t,"DriveService",(function(){return r}));var i=n(17),a=n.n(i);r.$inject=["$window","DriveFilesFactory","LumsitesBaseService"],angular.module("Services").service("Drive",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(e,t){var n={ignore403:!0},r=t.field,a=f.parentCtrl.getListKey();angular.isDefined(t.type)&&(r=r+" "+t.type),n.folderId=e,n.maxResults=angular.isDefinedAndFilled(f.widget.properties.number)?f.widget.properties.number:void 0,n.orderBy=r,i.filterize(n,(function(){p=e}),void 0,a),angular.isDefinedAndFilled(e)?i.get({fileId:e,ignore403:!0},void 0,void 0,a):i.setCurrent(void 0,a)}function u(e){f.browsedFolderIds.push(e),l(e,m)}function d(){var t=f.widget.properties.folderId;angular.forEach(a.getInstance().langs,(function(n){var r=e.get(f.widget,"properties.more.link."+n);(angular.isUndefinedOrEmpty(r)||e.includes(r,g))&&(angular.isDefined(t)&&angular.isDefinedAndFilled(t[n])?e.set(f.widget,"properties.more.link"+n,g+"/drive/folders/"+t[n]):e.set(f.widget,"properties.more.link"+n,g))}))}var p,f=this,g="https://drive.google.com",m={field:"title",type:void 0};f.browsedFolderIds=[],f.Drive=i,f.Media=o,f.Translation=s,f.moment=moment,f.getWidgetClass=function(){var e=[];return f.parentCtrl.getWidgetClass(e),f.isWidgetEmpty()&&e.push("widget--is-empty"),e},f.isWidgetEmpty=function(){var e=f.parentCtrl.getListKey();return!i.isCallInProgress(e)&&angular.isUndefinedOrEmpty(i.displayList(e))&&f.browsedFolderIds.length<=1},f.isWidgetHidden=function(){return f.parentCtrl.isHidden=!f.parentCtrl.designerMode()&&!f.widget.properties.noResults&&f.isWidgetEmpty(),f.parentCtrl.isHidden},f.loadPreviousFolder=function(){f.browsedFolderIds.pop(),l(e.last(f.browsedFolderIds),m)},f.openFileOrFolder=function(e){var t=e.file;angular.isUndefinedOrEmpty(t)||(t.isFolder?u(t.id):i.openFile({file:t}),r.handleTaggingMap("open-drive-element","open-drive-element",{item:t}))},f.toggleSortOrder=function(e){var t=p||c.getFolderLangProperty(f.widget.properties,"folderId");m.field=e,m.type=angular.isDefined(m.type)?void 0:"desc",l(t,m)},t.$on("widget-drive-settings",(function(t,n){f.widget.uuid===n&&(d(),u(s.translate(e.get(f.widget,"properties.folderId"))))})),f.init=function(){!function(){f.widget.properties=f.widget.properties||{};var e=f.widget.properties;angular.isUndefined(e.isRootFolder)&&(e.isRootFolder=!0),angular.isUndefined(e.more)&&(e.more={label:{},link:{}})}(),d(),u(s.translate(e.get(f.widget,"properties.folderId")))},this.setParentController=function(e){f.parentCtrl=e,f.init()}}t.$inject=["$scope","$window","Analytics","Drive","Instance","Media","Translation","WidgetDrive"],angular.module("Widgets").directive("widgetDrive",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetDrive","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-drive/views/widget-drive.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){this.getFolderLangProperty=function(e,n,r,i){var a=t.getConnected();if(i=!angular.isDefined(i)||i,r=r||a.lang,!angular.isUndefinedOrEmpty(e[n])){if(!angular.isObject(e[n]))return e[n];if(angular.isDefinedAndFilled(r)&&angular.isDefined(e[n][r]))return e[n][r];if(i){if(angular.isDefinedAndFilled(a.langs))for(var o=0,s=a.langs.length;o<s;o++)if(angular.isDefined(e[n][a.langs[o]]))return e[n][a.langs[o]];return e[n][Object.keys(e[n])[0]]}}},this.setFolderLangProperty=function(t,n,r){angular.isObject(t[n])||(t[n]={}),t[n][e.inputLanguage]=r}}e.$inject=["Translation","User"],angular.module("Services").service("WidgetDrive",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o){var s=this,c={id:void 0,name:void 0};s.DrivePicker=r,s.drivePickerCallback=function(e){if(!angular.isUndefinedOrEmpty(e)){var n=a.getCurrent().properties;t.$apply((function(){angular.isDefinedAndFilled(e.id)?(o.setFolderLangProperty(n,"folderId",e.id),o.setFolderLangProperty(n,"folderName",e.name)):angular.isDefinedAndFilled(e.url)&&o.setFolderLangProperty(n,"folderId",e.url.split("/").pop()),s.updateWidget()}))}},s.getFolderName=function(){var e=a.getCurrent().properties,t=i.inputLanguage;return o.getFolderLangProperty(e,"folderName",t)||o.getFolderLangProperty(e,"folderId",t,!1)},s.isFolderSelected=function(){return!!angular.isDefined(o.getFolderLangProperty(a.getCurrent().properties,"folderId"))||(a.getCurrent().properties.folderId=void 0,a.getCurrent().properties.folderName=void 0,!1)},s.setFolder=function(){var e=a.getCurrent().properties;e.isRootFolder?(c.id=angular.copy(o.getFolderLangProperty(e,"folderId")),c.name=angular.copy(o.getFolderLangProperty(e,"folderName")),a.getCurrent().properties.folderId=void 0,a.getCurrent().properties.folderName=void 0):(o.setFolderLangProperty(e,"folderId",c.id||void 0),o.setFolderLangProperty(e,"folderName",c.name||void 0)),s.updateWidget()},s.updateWidget=function(){n((function(){e.$broadcast("widget-drive-settings",a.getCurrent().uuid)}))}}e.$inject=["$rootScope","$scope","$timeout","DrivePicker","Translation","Widget","WidgetDrive"],angular.module("Controllers").controller("WidgetDriveSettingsController",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gmail/:methodKey",{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("GmailFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid"})}e.$inject=["GmailFactory","LumsitesBaseService"],angular.module("Services").service("Gmail",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(){i.filterize({maxResults:c.widget.properties.number})}function s(){angular.isDefinedAndFilled(c.widget.properties.number)&&(c.widget.properties.number=parseInt(c.widget.properties.number,10)),angular.isUndefinedOrEmpty(c.widget.properties.more)&&(c.widget.properties.more={label:{},link:{}},angular.forEach(a.getInstance().langs,(function(e){c.widget.properties.more.link[e]="https://mail.google.com"}))),angular.isUndefinedOrEmpty(c.widget.properties.truncate)&&(c.widget.properties.truncate=200),o()}var c=this;c.Gmail=i,c.getSender=function(t){if(angular.isUndefinedOrEmpty(t))return"";var n=t.match(/(?:"?([^"]*)"?\s)?(?:<?(.+@[^>]+)>?)/);return e.get(n,1,e.get(n,2,t))},c.getWidgetClass=function(){var e=[];return c.parentCtrl.getWidgetClass(e),c.isWidgetEmpty()&&e.push("widget--is-empty"),e},c.isWidgetEmpty=function(){return!i.isCallInProgress()&&angular.isUndefinedOrEmpty(i.getList())},c.isWidgetHidden=function(){return c.parentCtrl.designerMode()||c.widget.properties.noResults||i.isCallInProgress()||!angular.isUndefinedOrEmpty(i.getList())?(c.parentCtrl.isHidden=!1,!1):(c.parentCtrl.isHidden=!0,!0)},c.openEmail=function(e){angular.isUndefinedOrEmpty(e)||n.open(e,"_blank")},t.$on("widget-email-settings",(function(e,t){c.widget.uuid===t&&o()})),this.setParentController=function(e){c.parentCtrl=e,s()}}t.$inject=["$scope","$window","ConfigTheme","Gmail","Instance"],angular.module("Widgets").directive("widgetEmail",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetEmail","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-email/views/widget-email.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n){this.updateWidget=function(){t((function(){e.$broadcast("widget-email-settings",n.getCurrent().uuid)}))},function(){var e=n.getCurrent();e.properties=e.properties||{};var t=e.properties;angular.isUndefinedOrEmpty(t.truncate)&&(t.truncate=200)}()}e.$inject=["$rootScope","$timeout","Widget"],angular.module("Controllers").controller("WidgetEmailSettingsController",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){var c=this;c.featuredThumbnail=null,c.focalPoint=void 0,c.Content=n,c.Translation=a,c.Utils=o,c.addContentThumbnail=function(e){n.getCurrent().thumbnail=e.blobKey,c.featuredImage=e.blobKey},c.editContentBasic=function(){"get"!==n.getAction()&&"basic"===n.getViewMode()&&s.openSelection(c.widget.uuid)},c.getFeaturedImageStyle=function(){var t=i.imageSizeBreakpoints[e.get(c.parentCtrl,"widgetSize","m")],n=i.getMediaImage(c.featuredImage,void 0,void 0,t);if(!angular.isUndefinedOrEmpty(n)){var r=c.focalPoint?{display:"block"}:o.getBackgroundImage(n,-1),a=c.widget.properties;return angular.isDefined(a.height)&&!a.fullHeight?(a.height=parseInt(a.height,10),r.height=a.height+"px"):a.fullHeight||(r.height="200px"),c.focalPoint||angular.extend(r,{"background-position":a.imageFormat.position,"background-size":a.imageFormat.size}),r}},c.getModeThumbnail=function(){var e=c.widget.properties;return e.imageFormat&&"cover"===e.imageFormat.size?"horizontal":"original"},c.getWidgetClass=function(){var e=[];return c.parentCtrl.getWidgetClass(e),c.isWidgetEmpty()&&e.push("widget--is-empty"),e},c.isWidgetEmpty=function(){return angular.isUndefinedOrEmpty(c.featuredImage)&&"basic"!==n.getViewMode()},c.isWidgetHidden=function(){return c.parentCtrl.designerMode()||c.widget.properties.noResults||!angular.isUndefinedOrEmpty(c.featuredImage)?(c.parentCtrl.isHidden=!1,!1):(c.parentCtrl.isHidden=!0,!0)},t.$on("abstract-picker__close-end",(function(e,t){"media-picker-content-thumbnail"===t&&c.init()})),t.$on("delete-content-thumbnail",(function(){c.init()})),t.$on("update-featured-image-thumbnail",(function(){c.init()})),c.init=function(){var t;c.focalPoint=function(){var e=n.getCurrent();if(e.mediaThumbnail)return r.getFocusPointFromMedia(e.mediaThumbnail,!0,a.inputLanguage)}(),c.featuredImage=(t=n.getCurrent(),r.getCroppedThumbnailFromRootContent(t,!0,void 0,a.inputLanguage));var i=e.get(c.widget,"properties",{});angular.isUndefinedOrEmpty(i.imageFormat)&&(i.imageFormat={position:c.focalPoint?void 0:"center center",size:"cover"}),c.parentCtrl.setWidgetSize()},this.setParentController=function(e){c.parentCtrl=e,c.init()}}t.$inject=["$scope","Content","Document","Media","Translation","Utils","UploaderAction"],angular.module("Widgets").directive("widgetFeaturedImage",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetFeaturedImage","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-featured-image/views/widget-featured-image.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o,c,l,u,p,f,g,m){function v(){n((function(){var e;O.featuredThumbnail=(e=O.Content.getCurrent(),o.getCroppedThumbnailFromRootContent(e,!0,610,f.inputLanguage)),O.contextContent=O.getContentCrop("content"),O.isCropDisabled=!O.contextContent||!O.contextContent.servingUrl,O.contextCroppedContent=O.getContentCrop("croppedContent")}))}function h(e,t,n){return y.apply(this,arguments)}function y(){return y=d()(s.a.mark((function e(t,n,r){var a,c,l,d,p,g,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=O.Content.getCurrent(),c=angular.fastCopy(a.mediaThumbnail),l=f.inputLanguage,!r){e.next=17;break}return e.next=6,O.uploadCropContent(r);case 6:d=e.sent,c.croppedContent=[],o.removeCrop(c,l),p=u.formatUploadedFile(d,l),g=p.content&&p.content[0]||{},g.focalPoint=t,g.cropInfo=n,c.croppedContent.push(g),c.hasCroppedContent=!0,e.next=18;break;case 17:o.removeCrop(c,l);case 18:return c.content=c.content||[{}],c.content[0].focalPoint=t,c.content[0].cropInfo=n,m=i({},a,{mediaThumbnail:c}),e.abrupt("return",m);case 23:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function E(){n((function(){O.cropperIsOpened=!1}),1e3)}function b(){return b=d()(s.a.mark((function t(n,r,i){var o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(n,r,i);case 2:o=t.sent,a.setCurrent(o),v(),e.$broadcast("update-featured-image-thumbnail"),E();case 7:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}var O=this;O.CONTENT_ID=a.getCurrent().id,O.readonlyFields=!1,O.featuredThumbnail=null,O.contextContent=null,O.contextCroppedContent=null,O.cropperIsOpened=!1,O.Config=r,O.Content=a,O.FeaturedImage=c,O.MediaConstant=p,O.Utils=g,t.$on("abstract-picker__close-end",(function(e,n){"media-picker-content-thumbnail"===n&&t.$apply((function(){v()}))})),O.isFocalPointFilled=function(){return O.contextCroppedContent&&O.contextCroppedContent.focalPoint},O.getContentCrop=function(e){var t=O.Content.getCurrent();if(t.mediaThumbnail){var n=o.getMediaContentByLang(t.mediaThumbnail,!0,f.inputLanguage,!1,e);return n}},O.getTranslation=function(e){return f.translate(e)},O.onCropperClose=E,O.openCropper=function(){O.cropperIsOpened=!0},O.onCropperConfirm=function(e,t,n){return b.apply(this,arguments)},O.uploadCropContent=function(e){return new Promise((function(t){e.toBlob((function(e){m.uploadMultiple([e],void 0,(function(e){t(i({},e,{name:O.contextContent&&O.contextContent.name||e.name}))}))}))}))},e.$on("delete-content-thumbnail",(function(e,t){a.getCurrent().id===t&&n((function(){O.featuredThumbnail=null}))})),O.readonlyFields="locked"===a.getViewMode(),v()}n.r(t);var o=n(6),s=n.n(o),c=n(3),l=n.n(c),u=n(10),d=n.n(u);a.$inject=["$rootScope","$scope","$timeout","Config","Content","Document","FeaturedImage","LxNotificationService","Media","MediaConstant","Translation","Utils","Upload"],angular.module("Controllers").controller("WidgetFeaturedImageSettingsController",a)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o,s,l,d,p,f,m,h,E,O,T,I,A){function D(){return P.apply(this,arguments)}function P(){return P=g()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=le.push,e.t1=le,e.t2=c.a,e.t3=w.a,e.next=6,se.getList();case 6:e.t4=e.sent,e.t5=(0,e.t3)(e.t4,"id"),e.t6=(0,e.t2)(e.t5),e.t0.apply.call(e.t0,e.t1,e.t6);case 10:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function j(e){return e===R.FOLDER_TYPES.CUSTOM}function k(){var e=x(),t=e.folder,n=t.categoryId,r=t.providerId;return se.getProviderCategory(r,n).then((function(e){return e&&e.properties||{}}))}function F(e){var t=e.docPath,n=e.folderType;return j(n)?l.promiseGet({docPath:t},void 0,void 0,!1):{}}function U(e){return M.apply(this,arguments)}function M(){return M=g()(u.a.mark((function e(t){var n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!angular.isUndefinedOrEmpty(t)){e.next=2;break}return e.abrupt("return","");case 2:if(!j(t.folderType)){e.next=8;break}return e.next=5,F(t);case 5:return n=e.sent,r=l.getMediaContentByLang(n,!0),i=r.name,e.abrupt("return",i);case 8:return e.abrupt("return",E.translate("FRONT.WIDGET_FILE_LIST.SETTINGS.FOLDER.".concat(t.providerId.toUpperCase(),".").concat(t.categoryId.toUpperCase())));case 9:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function x(){return C()(ce.widget,"properties")}function $(e){return B.apply(this,arguments)}function B(){return B=g()(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C()(ce.homeFolder,"name")){e.next=2;break}return e.abrupt("return");case 2:return ce.is.loading.homeFolder=!0,e.next=5,U(t);case 5:r=e.sent,n.$apply((function(){ce.homeFolder={name:r},ce.is.loading.homeFolder=!1}));case 7:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie();ce.is.loading.files=!0;var n=x(),i=L()(ce.sortOrderProperties,(function(e,t){return angular.isDefinedAndFilled(t.sortName)&&e.push(t.sortName),e}),["-isFolder"]),a={lang:E.inputLanguage,maxResults:n.maxNumber,searchInFolder:e&&!e.endsWith("resource=root"),searchText:ce.searchQuery,sortOrder:i},o=t.reject();if(n.displayType===A.SELECTION_TYPES.LIST||n.displayType===A.SELECTION_TYPES.COMMUNITY_FOLDER){if(n.folder&&S()(le,n.folder.providerId)){var s=n.folder,c=s.categoryId,u=s.providerId;a.docPath=e,a.searchTags=n.folderTags,o=angular.isDefinedAndFilled([u,c],"every")?k().then((function(e){a.searchParameters=e})):t.resolve(),o=o.then((function(){return l.promiseFilterize(a,ce.widgetListCtrl.getListKey())})).then((function(){return $(n.folder)}))}}else o=l.getMulti(n.files).then((function(e){l.initList(ce.widgetListCtrl.getListKey(),{maxResults:n.maxNumber,searchText:ce.searchQuery},e.items,!1,void 0)}));return o.then((function(){ce.widgetListCtrl.updateListItems()})).finally((function(){r((function(){ce.is.loading.files=!1}))})),o}function G(){ce.homeFolder={}}function Y(){var e;!function(){var e=x();ce.folderBlockClasses=[];var t=C()(e,"style.content.theme");ce.folderBlockClasses.push("folder-block--theme-".concat(t)),e.itemsSeparator&&ce.folderBlockClasses.push("folder-block--has-separator"),ce.folderBlockClasses}(),e=x(),ce.mediaBlockClasses=[],e.itemsSeparator&&ce.mediaBlockClasses.push("media-block--has-separator"),ce.mediaBlockClasses}function H(){var e=x();ce.blockStyle={};var t=e.itemsMargin;return angular.isDefinedAndFilled(t)&&(ce.blockStyle.marginBottom="".concat(t,"px")),ce.blockStyle}function K(){var e=x();ce.lxColorTheme="dark"===C()(e,"style.content.theme")?"white":"grey"}function V(){return z.apply(this,arguments)}function z(){return z=g()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return t=e.sent,n=ie(),e.abrupt("return",l.getPermissions({docPath:n,searchParameters:t}));case 5:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function q(){return X.apply(this,arguments)}function X(){return X=g()(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x(),n=t.folder.providerId,e.next=4,se.getProviderAuthorizedActions(n);case 4:return r=e.sent,e.abrupt("return",w()(r,(function(e){var t=e.resource,n=e.mimeType;return{mimeType:n,type:t}})));case 6:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Q(){return Z.apply(this,arguments)}function Z(){return Z=g()(u.a.mark((function e(){var t,r,i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:if(t=e.sent,r=t.isWriter,i=[],a=x(),!(a.displayType===A.SELECTION_TYPES.LIST&&r||a.displayType===A.SELECTION_TYPES.COMMUNITY_FOLDER)){e.next=15;break}return e.t0=i.push,e.t1=i,e.t2=c.a,e.next=12,q();case 12:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 15:n.$apply((function(){ce.isWriterOnCurrentFolder=a.displayType===A.SELECTION_TYPES.COMMUNITY_FOLDER||r,ce.providerActions=i}));case 16:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function J(){var e;ce.widgetListCtrl.initialized||(e=x(),l.initList(ce.widgetListCtrl.getListKey(),{maxResults:e.maxNumber,searchText:ce.searchQuery},[],!0),G()),W().then((function(e){var t=x();t.displayType!==A.SELECTION_TYPES.LIST&&t.displayType!==A.SELECTION_TYPES.COMMUNITY_FOLDER||Q(e)}))}function ee(){var e=x();e.displayType=e.displayType||A.SELECTION_TYPES.LIST,e.displayType===A.SELECTION_TYPES.LIST||e.displayType===A.SELECTION_TYPES.COMMUNITY_FOLDER?(G(),e.folder&&e.folder.folderType===R.FOLDER_TYPES.CUSTOM&&S()(le,e.folder.providerId)&&(ce.is.loading.homeFolder=!0)):e.files=e.files||[];var t="style.content.theme",n=C()(e,t,"light");if(N()(e,t,n),e.viewMode="vertical",e.listOrder=e.listOrder||"name",e.listOrderDir=e.listOrderDir||A.ORDER_DIRECTION.ASCENDING,angular.isUndefinedOrEmpty(e.itemsSeparator)&&(e.itemsSeparator=!0),angular.isString(e.maxNumber)){var r=parseInt(e.maxNumber,10);e.maxNumber=angular.isNumber(r)?r:A.MAX_NUMBER_TO_DISPLAY}e.maxNumber=e.maxNumber||A.MAX_NUMBER_TO_DISPLAY,e.displayToolbar=e.displayType===A.SELECTION_TYPES.LIST||e.displayType===A.SELECTION_TYPES.COMMUNITY_FOLDER,function(){var e=x(),t=f.getProperty(o.INSTANCE_PROPERTIES.FILE_FIELDS),n=!1;angular.isUndefinedOrEmpty(e.fields)&&(e.fields=[],n=!0),angular.forEach(t,(function(t){angular.isString(t)&&(t={enable:n,name:t});var r=y()(e.fields,{name:t.name});(n||angular.isUndefinedOrEmpty(r))&&e.fields.push(t)}))}(),function(){var e=x();ce.fieldsToDisplay={},angular.forEach(e.fields,(function(e){ce.fieldsToDisplay[e.name]=e.enable})),ce.fieldsToDisplay}(),H(),Y(),K()}function te(){var e=x();return e.displayType===A.SELECTION_TYPES.LIST||e.displayType===A.SELECTION_TYPES.COMMUNITY_FOLDER?!S()(le,e.folder.providerId):angular.isUndefinedOrEmpty(e.files)}function ne(e){if(!angular.isUndefinedOrEmpty(e))return e.docPath}function re(){return ce.breadcrumbList.length>0?_()(ce.breadcrumbList):ce.widget.properties.folder}function ie(){var e=re();return ne(e)}function ae(){return ae=g()(u.a.mark((function e(){var t,n,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=re(),n=t.docPath,e.next=3,l.promiseGet({docPath:n});case 3:if(r=e.sent,i=l.getMediaContentByLang(r,!0),o=C()(i,"url"),!angular.isUndefinedOrEmpty(o)){e.next=8;break}return e.abrupt("return");case 8:a.open(decodeURIComponent(o),"_blank");case 9:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function oe(){return oe=g()(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"-",n=ce.sortOrderProperties[t].sortName,ce.sortOrderProperties[t].sortName=S()(n,"-")?n.replace(/-/g,""):"-".concat(n||t),angular.forEach(ce.sortOrderProperties,(function(e,n){n!==t&&(ce.sortOrderProperties[n].sortName="")})),e.next=6,W();case 6:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}var se,ce=this,le=[];ce.DROPDOWN_ID="header-sort-dropdown",ce.breadcrumbList=[],ce.fieldsToDisplay={},ce.is={loading:{files:!1,homeFolder:!1}},ce.isWriterOnCurrentFolder=!1,ce.searchQuery="",ce.sortOrderProperties={description:{isHidden:!0,sortName:"",translate:"FRONT.SETTINGS.DESCRIPTION"},name:{isHidden:!1,sortName:m.SORT_ORDER,translate:"FRONT.SETTINGS.NAME"}},ce.providerActions=[],ce.Document=l,ce.Folder=d,ce.Utils=O,ce.WidgetFileListConstant=I,ce.debouncedSearchFile=v()(W,A.DEBOUNCE_DELAY),ce.getCurrentDocumentPath=ie,ce.getCurrentFolderName=function(){return 0===ce.breadcrumbList.length?C()(ce.homeFolder,"name"):l.getMediaContentByLang(_()(ce.breadcrumbList),!0).name},ce.getDocumentPath=ne,ce.navigateTo=function(e){return function(e){var t=ce.getDocumentPath(e);if(angular.isDefinedAndFilled(ce.homeFolder)&&t===ce.getDocumentPath(ce.homeFolder))ce.breadcrumbList.length=0;else{var n=b()(ce.breadcrumbList,(function(e){return ce.getDocumentPath(e)===t}));n>-1?ce.breadcrumbList.splice(n+1):ce.breadcrumbList.push(e)}}(e),ce.isWriterOnCurrentFolder=!1,ce.searchQuery="",W(e.docPath).then(Q)},ce.navigateToParentFolder=function(){var e=ce.breadcrumbList.length;return ce.searchQuery="",1===e?ce.navigateTo(ce.homeFolder):e>1?ce.navigateTo(ce.breadcrumbList[e-2]):Promise.resolve(void 0)},ce.onStatusChange=function(e){n.$apply((function(){ce.is.loading.files="PENDING"===e.status}))},ce.openCurrentFolderInExternalTab=function(){return ae.apply(this,arguments)},ce.reloadContent=function(){return W().then(Q)},ce.sortOrder=function(e){return oe.apply(this,arguments)},n.$watch("vm.widget.properties.style.content.theme",(function(){Y(),K()})),n.$watch("vm.widget.properties.itemsMargin",(function(){H()})),ce.init=function(){var t=g()(u.a.mark((function t(n){var r,a,c,l,d,f,g;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=ce.widget,a=s.getCurrent(),c=I.LIST_KEY_MEDIA_TAGS,l=a.type===p.CONTENT_TYPES.COMMUNITY,!h.isCallInProgress(c)&&angular.isUndefinedOrEmpty(h.getList(void 0,void 0,c))&&h.init(o.TAG_TYPE.MEDIA,I.LIST_KEY_MEDIA_TAGS,void 0),l&&(r.properties.currentCommunityDrive||r.properties.displayType===A.SELECTION_TYPES.COMMUNITY_FOLDER)&&angular.isDefinedAndFilled(C()(a,"driveFolder.source"))&&(d=a.driveFolder,f=d.docPath,g=d.source,r.properties.folder={docPath:f,folderType:R.FOLDER_TYPES.CUSTOM,providerId:g}),se=e.get("DocumentProvider"),t.next=9,D();case 9:r.properties.displayType===A.SELECTION_TYPES.LIST&&r.properties.folder&&r.properties.folder.providerId!==m.PROVIDERS.microsoft&&(ce.sortOrderProperties=i({},ce.sortOrderProperties,{createdAt:{isHidden:!1,sortName:"",translate:"FRONT.SETTINGS.CREATED_AT"}})),ce.widgetListCtrl.init(n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.setParentController=function(e){ce.widgetListCtrl=e,ce.widgetListCtrl.widgetListChildCtrl={initList:J,initProperties:ee,isWidgetEmpty:te},ce.init(!0)}}function o(){return{bindToController:!0,controller:a,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["lsWidgetFileList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-file-list/views/widget-file-list.html"}}n.r(t),n.d(t,"WidgetFileListDirective",(function(){return o}));var s=n(19),c=n.n(s),l=n(6),u=n.n(l),d=n(3),p=n.n(d),f=n(10),g=n.n(f),m=n(71),v=n.n(m),h=n(21),y=n.n(h),E=n(110),b=n.n(E),O=n(4),C=n.n(O),T=n(17),S=n.n(T),I=n(142),_=n.n(I),A=n(28),w=n.n(A),D=n(223),L=n.n(D),P=n(7),N=n.n(P),R=n(393);a.$inject=["$injector","$q","$scope","$timeout","$window","Config","Content","Document","Folder","InitialSettings","Instance","MediaConstant","Tag","Translation","Utils","Widget","WidgetFileListConstant","WidgetSettingsConstant"],angular.module("Widgets").directive("lsWidgetFileList",o)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u){function p(){var e=c.getCurrent();return e.properties=e.properties||{},e.properties}function f(){var e=p();if(!angular.isUndefinedOrEmpty(e.folder)){var t=p().folder,n=t.categoryId,r=t.providerId;return C.getProviderCategory(r,n)}}function g(){return d()(p().folder,"providerId")}function m(){T.isCommunityContext,C=e.get("DocumentProvider")}function v(){return h.apply(this,arguments)}function h(){return h=s()(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return t=e.sent,n=g(),r=p(),e.abrupt("return",d()(t,"canManage",!1)&&"local"!==n||r.displayType===u.SELECTION_TYPES.COMMUNITY_FOLDER);case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function y(){return y=s()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!angular.isUndefined(t)&&!angular.isUndefinedOrEmpty(t.name)){e.next=2;break}return e.abrupt("return");case 2:return t.enable=!t.enable,e.next=5,T.updateWidget(!0);case 5:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function E(){return b.apply(this,arguments)}function b(){return b=s()(a.a.mark((function e(){var i,o,s,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!(l.length>0&&void 0!==l[0])||l[0],o=p(),e.next=4,v();case 4:if(s=e.sent,n.$apply((function(){T.categoryAllowFileManagement=s,s||(o.canManageFiles=!1)})),i){e.next=8;break}return e.abrupt("return");case 8:r((function(){t.$broadcast("widget-file-list-settings",c.getCurrent().uuid)}));case 9:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function O(){return O=s()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.isCommunityContext=i.getCurrent().type===o.CONTENT_TYPES.COMMUNITY,m(),e.next=4,T.updateWidget(!1,!0);case 4:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}var C,T=this;T.categoryAllowFileManagement=!1,T.debouncedUpdateWidget=l()(E,u.DEBOUNCE_DELAY),T.toggleField=function(e){return y.apply(this,arguments)},T.updateWidget=E,n.$on("inputLanguage",s()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.updateWidget(!1,!1);case 2:case"end":return e.stop()}}),e)})))),function(){O.apply(this,arguments)}()}n.r(t),n.d(t,"WidgetFileListSettingsController",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(71),l=n.n(c),u=n(4),d=n.n(u);r.$inject=["$injector","$rootScope","$scope","$timeout","Content","InitialSettings","Widget","WidgetSettingsConstant"],angular.module("Controllers").controller("WidgetFileListSettingsController",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t){var n=this;n.DriveFileService=t,n.unfold=function(r){r.displayChildren=!r.displayChildren,r.displayChildren&&t.loadSubFolders(n.listKey,e.map(r.children,"id"))},n.level=n.level||1}t.$inject=["DriveFileService"],angular.module("Directives").directive("lsNavigationFolder",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,require:["^widgetFileManagement"],restrict:"E",scope:{folder:"<lsFolder",level:"<lsLevel",listKey:"@lsListKey"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-file-management/views/partials/navigation-folder.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);angular.module("Services").service("DriveFileService",["Drive","DriveFilesFactory","Utils","Translation","Config","LxNotificationService",function(n,r,i,a,o,s){function c(e,t){for(var n=0;n<e.length;n++)if(angular.isDefined(t))for(var r=0;r<t.length;r++)e[n]===t[r].id&&(t[r].isSelected=!1)}function l(e,t,n){if(e=C(e),t===N[e].mainFolderId)return N[e].folders;if(angular.isDefined(n)&&n.length>0)for(var r=0;r<n.length;r++){if(t===n[r].id)return n[r];if(angular.isDefined(n[r].children)&&n[r].children.length>0){var i=l(e,t,n[r].children);if(angular.isDefined(i))return i}}}function u(e,t,n){var r=[];if(n=n||!1,angular.isDefined(t)&&angular.isDefined(e)){if(e===t.id)return r.unshift(n?t.id:{id:t.id,title:t.title}),r;if(t.children.length>0)for(var i=0;i<t.children.length;i++)if(r=u(e,t.children[i],n),r.length>0)return r.unshift(n?t.id:{id:t.id,title:t.title}),r}return r}function d(e,t){if(angular.isArray(t))for(var n=0;n<t.length;n++){if(t[n].id===e)return t.splice(n,1),!0;if(angular.isArray(t[n].children)&&d(e,t[n].children))return!0}return!1}function p(e,t){var n=T(e);if(angular.isDefined(t)){for(var r=0;r<n.currentFolderFiles.length;r++)if(n.currentFolderFiles[r].id===t)return void n.currentFolderFiles.splice(r,1);for(var i=!1,a=0;a<n.currentFolderFolders.length;a++)n.currentFolderFolders[a].id===t&&(n.currentFolderFolders.splice(a,1),i=!0);i&&d(t,n.folders.children)}}function f(e,t,n,i){var a=T(e);0===a.folders.children.length&&(a.mainFolderId=t,function(e,t,n,i){if(!angular.isDefined(t))return;n=n||angular.noop,i=i||angular.noop,r.get({fileId:t,kind:E(e,t)},n,i)}(e,t,(function(r){angular.extend(r,{id:t}),a.folders=h(r),a.currentFolder=a.folders,m(e,t,!0,(function(t){angular.isArray(t.items)&&angular.forEach(t.items,(function(t){t.id&&m(e,t.id)}))})),(n||angular.noop)(r)}),(function(e){(i||angular.noop)(e)})))}function g(e,t,n){if(angular.isUndefined(N[e])){var r=T(e);n=n||{},P[e]=angular.copy(L),P[e].maxResults=n.maxResults||L.maxResults,P[e].kind=n.kind||"",r.trashFolderId=n.trashFolderId,f(e,t,(function(){r.breadcrumb=u(t,r.folders,!1)}),n.initMainFolderErrorCb),b(e,t)}}function m(t,n,i,a,o){t=C(t);var s=l(t,n,N[t].folders.children);i=i||!1,a=a||angular.noop,o=o||angular.noop,(angular.isDefined(s)&&0===s.children.length||i)&&(s.isLoading=!0,r.list({fetchAll:!0,folderId:n,folderOnly:!0,ignore403:!0,kind:E(t,n)},(function(t){if(angular.isDefinedAndFilled(t.items)&&angular.isDefined(s)){s.isParent=!0;var n=e.map(s.children,"id");angular.forEach(t.items,(function(t){e.includes(n,t.id)||s.children.push(angular.extend(h(t)))}))}s.isLoading=!1,a(t)}),o))}function v(e,t){return!!(angular.isDefined(o.WIDGET_DRIVE_PERMISSION)&&angular.isArray(o.WIDGET_DRIVE_PERMISSION[e])&&angular.isDefined(t))&&o.WIDGET_DRIVE_PERMISSION[e].indexOf(t)>-1}function h(e){var t=angular.extend(angular.fastCopy(D),e),n=function(e){var t={isGoogle:!1,mime:void 0};if(angular.isDefined(e)){var n;e.toLowerCase().indexOf("google")>=0?(t.isGoogle=!0,n=/\.([^.][a-z]\w+)$/):n=e.toLowerCase().match(/(document|spreadsheet)/)?/\.([^.][a-z]\w+)$/:/([a-z]\w+)[\/]/;var r=n.exec(e);r&&angular.isDefined(r[1])&&(t.mime=r[1])}return-1===["document","sheet","spreadsheet","folder","presentation","image"].indexOf(t.mime)&&(t.mime="default"),t}(e.mimeType);return t.icon=n.mime,t.isGoogle=n.isGoogle,t.isFolder="folder"===n.mime,t.fileSize=e.fileSize?i.formatBytes(e.fileSize):void 0,t.isFolder||(t.children=void 0),e.role&&(t.roles.write=v("write",e.role),t.roles.read=v("read",e.role)),t}function y(e,t){for(var n=T(e),r=n.currentFolderFiles.concat(n.currentFolderFolders),i=0;i<r.length;i++)if(r[i].id===t)return r[i]}function E(e,t){var n=T(e);return n.mainFolderId===t&&"drive#teamDrive"===P[e].kind?"drive#teamDrive":"drive#file"}function b(e,n,i,a){var o=T(e);!1===o.currentFolderLoading&&((o.currentFolderFilter.folderId!==n||angular.isUndefined(o.currentFolderFilter.cursor))&&(o.currentFolderFilter=angular.copy(P[e]),o.currentFolderFiles=[],o.currentFolderFolders=[]),o.currentFolderFilter.callId=Object(t.b)(),o.currentFolderFilter.folderId=n,o.currentFolderFilter.ignore403=!0,o.currentFolderLoading=!0,r.list(o.currentFolderFilter,(function(t){if(angular.isDefined(o.currentFolder)&&n!==o.currentFolder.id&&(o.currentFolder=l(e,n,o.folders.children)||o.currentFolder),o.currentFolderFilter.more=t.more,o.currentFolderFilter.cursor=t.cursor,angular.isDefined(t.items))for(var r=0;r<t.items.length;r++){var a=h(t.items[r]);(a.isFolder?o.currentFolderFolders:o.currentFolderFiles).push(a)}o.currentFolderId=n,o.currentFolderLoading=!1,(i||angular.noop)(t)}),(function(e){o.currentFolderLoading=!1,(a||angular.noop)(e)})))}function O(e,t,n,i,a){angular.isDefined(n)&&function(e,t,n,i,a){var o=T(e);if(angular.isDefined(t)){var s=y(e,t),c={description:n.description,fileId:t,kind:E(e,t),title:n.title};i=i||angular.noop,a=a||angular.noop,o.actionLoading=!0,r.update(c,(function(e){angular.extend(s,e),i(e),o.actionLoading=!1}),(function(e){a(err),o.actionLoading=!1}))}}(e,t,{title:n},i,a)}function C(e){return e||"default"}function T(e){return e=e||L,angular.isUndefined(N[e])&&(N[e]=angular.copy(R)),N[e]}function S(e,t,n,i,a){!function(e,t,n,i,a){var o=T(e);if(angular.isDefined(t)&&angular.isDefined(n)){var s=y(e,t),c={fileId:t,kind:E(e,t),target:n};o.actionLoading=!0,r.move(c,(function(r){if(n!==o.currentFolderId&&p(e,t),s.isFolder){var a=l(e,n,o.folders.children);a&&angular.isArray(a.children)&&a.children.push(s)}(i||angular.noop)(r),o.actionLoading=!1}),(function(e){(a||angular.noop)(e),o.actionLoading=!1}))}}(e,t,n,i,a)}function I(e){return T(e).currentFolderId}function _(e){return T(e).currentFolderLoading}function A(e,t,n){var r=T(e);n=n||!1;var i=u(t,r.folders,!0);if(n){var a=i.indexOf(r.mainFolderId);-1!==a&&i.splice(a,1)}return i}function w(e,t){var n=T(e);angular.isArray(t)||(t=[t]),n.fileSelected&&(c(t,n.currentFolderFiles),c(t,n.currentFolderFolders))}var D={title:void 0,id:void 0,webContentLink:void 0,isParent:!1,isFolder:!1,isGoogle:!1,icon:"",fileSize:void 0,ownersName:[],roles:{read:!1,write:!1},link:void 0,lastUpdate:void 0,isSelected:!1,displayChildren:!1,isLoading:!1,children:[],lastModifyingUserName:void 0},L={callId:"",complete:!1,cursor:void 0,kind:"",maxResults:25,more:!1},P=[],N=[],R={mainFolderId:void 0,trashFolderId:void 0,currentFolderId:void 0,currentFolder:void 0,folders:angular.copy(D),actionLoading:!1,currentFolderFiles:[],currentFolderFolders:[],currentFolderLoading:!1,currentFolderFilter:angular.copy(L),selectedFileId:void 0,selectedFile:void 0,fileSelected:!1,breadcrumb:[]};return{init:function(e,t,n){g(e,t,n)},dropCallback:function(t,n,r,i,o,c){if(!angular.isUndefinedOrEmpty(o.id)&&r.id!==o.id){var l=A(c,o.id);e.includes(l,r.id)||function(e,t,n){angular.isDefined(e)&&angular.isDefined(t)&&S(n,e,t,(function(){s.success(a.translate("WIDGET_TYPE_FILE_MANAGEMENT_MOVE_SUCCESS"))}),(function(){s.error(a.translate("WIDGET_TYPE_FILE_MANAGEMENT_MOVE_ERROR"))}))}(r.id,o.id,c)}},reset:function(e,t,n){!function(e,t,n){N[e]=void 0,g(e,t,n)}(e,t,n)},filter:function(e,t,n,r){b(e,t,n,r)},insert:function(e,t,n,i,a,o){!function(e,t,n,i,a,o){if(angular.isDefined(t)&&angular.isDefined(n)){var s=T(e);i=i||s.currentFolderId;var c={kind:E(e,void 0),mimeType:n,parentId:i,title:t};s.actionLoading=!0,r.insert(c,(function(e){s.currentFolderFiles.push(h(e)),(a||angular.noop)(e),s.actionLoading=!1}),(function(e){(o||angular.noop)(e),s.actionLoading=!1}))}}(e,t,n,i,a,o)},duplicate:function(e,t,n,i,s){!function(e,t,n,i,s){var c=T(e);if(angular.isDefined(t)&&t.id&&!t.isFolder){var l={fileId:t.id,folder:c.currentFolderId,kind:E(e,t.id),title:n||a.translate(o.WIDGET_DRIVE_DEFAULT.copyName)+" "+t.title};i=i||angular.noop,s=s||angular.noop,c.actionLoading=!0,r.copy(l,(function(e){c.currentFolderFiles.push(h(e)),i(e),c.actionLoading=!1}),(function(e){s(e),c.actionLoading=!1}))}}(e,t,n,i,s)},trash:function(e,t,n,i){!function(e,t,n,i){e=C(e),angular.isDefined(t)&&(N[e].actionLoading=!0,n=n||angular.noop,i=i||angular.noop,r.trash({fileId:t,kind:E(e,t)},(function(r){p(e,t),n(r),N[e].actionLoading=!1}),(function(t){i(t),N[e].actionLoading=!1})))}(e,t,n,i)},move:S,rename:function(e,t,n,r,i){O(e,t,n,r,i)},createFolder:function(e,t,n,i,s){!function(e,t,n,i,s){var c=T(e);t=t||a.translate(o.WIDGET_DRIVE_DEFAULT.newFolderName),n=n||c.currentFolderId;var u={kind:E(e,void 0),mimeType:"application/vnd.google-apps.folder",parentId:n,title:t};c.actionLoading=!0,r.insert(u,(function(t){n===c.currentFolderId&&c.currentFolderFolders.push(h(t));var r=l(e,n,c.folders.children);r&&angular.isArray(r.children)&&r.children.push(h(t)),(i||angular.noop)(t),c.actionLoading=!1}),(function(e){(s||angular.noop)(e),c.actionLoading=!1}))}(e,t,n,i,s)},getNavigationFolders:function(e){return T(e).folders},getCurrentFolderFiles:function(e){return T(e).currentFolderFiles},getCurrentFolderFolders:function(e){return T(e).currentFolderFolders},getCurrentFolderId:I,changeFolder:function(t,n,r,i){if(!_(t)){var a=T(t);angular.isDefined(n)&&n!==a.currentFolderId&&(a.selectedFileId=void 0,a.fileSelected=!1,b(t,n,(function(t){for(var i=e.map(a.currentFolder.children,"id"),o=0;o<a.currentFolderFolders.length;o++)-1===i.indexOf(a.currentFolderFolders[o].id)&&a.currentFolder.children.push(a.currentFolderFolders[o]);a.breadcrumb=u(n,a.folders,!1),(r||angular.noop)(t)}),(function(e){(i||angular.noop)(e)})))}},isCurrentFolderLoading:_,isCurrentFolderEmpty:function(e){var t=T(e);return 0===t.currentFolderFiles.length&&0===t.currentFolderFolders.length},isTeamDrive:function(e){return"drive#teamDrive"===E(e,I(e))},getBreadcrumb:function(e){return T(e).breadcrumb},getFolderParentIds:A,setSelectedFile:function(e,t){if(angular.isDefined(t)&&angular.isDefined(t.id)){var n=T(e);n.selectedFileId!==t.id&&(angular.isDefined(n.selectedFileId)&&w(e,n.selectedFileId),n.selectedFileId=t.id,n.selectedFile=t,t.isSelected=!0,n.fileSelected=!0)}},getSelectedFile:function(e){return T(e).selectedFile},unSelectFiles:w,isSelectedFileReadable:function(e){var t=T(e);return t.fileSelected&&angular.isDefined(t.selectedFile)&&angular.isObject(t.selectedFile.roles)&&t.selectedFile.roles.read},isSelectedFileWritable:function(e){var t=T(e);return t.fileSelected&&angular.isDefined(t.selectedFile)&&angular.isObject(t.selectedFile.roles)&&t.selectedFile.roles.write},isCurrentFolderWritable:function(e){var t=T(e);return angular.isDefined(t.currentFolder)&&angular.isObject(t.currentFolder.roles)&&t.currentFolder.roles.write},isCurrentFileTrashFolder:function(e){var t=T(e);return t.selectedFile.id===t.trashFolderId},isFileSelected:function(e){return T(e).fileSelected},isSelectedFileFolder:function(e){var t=T(e);return angular.isDefined(t.selectedFile)&&t.selectedFile.isFolder},isSelectedFileGoogle:function(e){var t=T(e);return angular.isDefined(t.selectedFile)&&t.selectedFile.isGoogle},isSelectedFileDownloadAvailable:function(e){var t=T(e);return angular.isDefined(t.selectedFile)&&t.selectedFile.webContentLink},loadSubFolders:function(e,t){angular.isDefined(t)&&(angular.isArray(t)||(t=[t]),angular.forEach(t,(function(t){t&&m(e,t)})))},currentFolderHasMore:function(e){return T(e).currentFolderFilter.more},loadMoreFiles:function(e,t,n){var r=T(e);angular.isDefined(r.currentFolderFilter.folderId)&&r.currentFolderFilter.more&&b(e,r.currentFolderFilter.folderId,t,n)},isPerformingAction:function(e){return T(e).actionLoading},setIsPerformingAction:function(e,t){"boolean"==typeof t&&(T(e).actionLoading=t)}}}])}.call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c,l,u,d,p,f,g){function m(t){var n,r,i=p.getCurrent()&&p.getCurrent().type===g.CONTENT_TYPES.COMMUNITY;angular.isDefined(O.widget.properties)?(r=O.widget.properties.isRootFolder?"root":undefined,O.widgetStyle={"max-height":O.widget.properties.maxHeight,"min-height":O.widget.properties.minHeight},r=i&&O.widget.properties.currentCommunityDrive?e.get(p.getCurrent(),"driveFolder.folderId"):O.widget.properties.folderId||r,b=O.widget.properties.deleteId||void 0,n={initMainFolderErrorCb:v,kind:O.widget.properties.kind||"",maxResults:O.widget.properties.maxResults||25,title:O.widget.properties.folderName,trashFolderId:b}):O.widget.properties={classicTrash:!0};var o=t?a.reset:a.init;o(O.listKey,r,n)}function v(){O.isMainFolderExisting=!1}function h(e){angular.isDefined(e.link)&&r.open(e.link,"_blank")}function y(){return!1}function E(e,t){O.widget.uuid===t&&m(!0)}var b,O=this;O.widgetStyle={},O.order={reverse:!1,predicate:"title"},O.form={},O.isMainFolderExisting=!0,O.nameModal=void 0,O.nameModalConfig={},O.isDrivePickerLoading=!1,O.listKey=angular.isDefined(p.getCurrent())&&angular.isDefined(p.getCurrent().id)?"widget-"+O.widget.uuid+"-"+p.getCurrent().id:"widget-"+O.widget.uuid+"-"+Object(t.b)(),O.nameFormId="generic-name-dialog-"+O.widget.uuid,O.FileApi=a,O.DrivePicker=o,O.FormValidation=u,O.Config=d,O.Translation=c,O.moment=moment,O.getWidgetClass=function(){var e=[];return O.parentCtrl.getWidgetClass(e),e},O.isWidgetEmpty=y,O.isWidgetHidden=function(){return!1},O.refreshWidget=E,O.setParentController=function(e){O.parentCtrl=e,m()},O.registerForm=function(e,t){i((function(){O.form[t]=e&&e[t]?e[t]:void 0}))},O.isEmpty=function(){return O.editingMode()},O.onFileClick=function(e){a.setSelectedFile(O.listKey,e)},O.onFileDoubleClick=function(e){angular.isDefined(e)&&(e.isFolder?a.changeFolder(O.listKey,e.id):h(e))},O.orderFiles=function(e){e===O.order.predicate?O.order.reverse=!O.order.reverse:(O.order.predicate=e,O.order.reverse=!1)},O.isOrderActive=function(e,t){return O.order.predicate===e&&t},O.seeCurrentFile=function(){h(a.getSelectedFile(O.listKey))},O.deleteCurrentFile=function(){s.confirm(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_DELETE_CONFIRM"),c.translate("WIDGET_TYPE_FILE_MANAGEMENT_DELETE_CONFIRM_DESCRIPTION"),{cancel:c.translate("CANCEL"),ok:c.translate("OK")},(function(e){e&&a.isFileSelected(O.listKey)&&function(e){if(angular.isDefined(e)){var t=function(){s.success(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_DELETE_SUCCESS"))},n=function(){s.error(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_DELETE_ERROR"))};angular.isUndefined(b)?a.trash(O.listKey,e,t,n):a.move(O.listKey,e,b,t,n)}}(a.getSelectedFile(O.listKey).id)}))},O.downloadSelectedFile=function(){angular.isDefined(a.getSelectedFile(O.listKey).webContentLink)&&(r.location.href=a.getSelectedFile(O.listKey).webContentLink)},O.openNewFolderConfig=function(){O.nameModalConfig.callback=function(e){var t,n;t=e.name,a.createFolder(O.listKey,t,n,(function(){s.success(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_FOLDER_CREATION_SUCCESS"))}),(function(){s.error(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_FOLDER_CREATION_ERROR"))}))},f.waitForAndExecute("#"+O.nameFormId)},O.openNewFileConfig=function(e){O.nameModal={mimeType:e.mimeType},O.nameModalConfig.callback=function(e){!function(e,t){angular.isDefined(e)&&angular.isDefined(t)&&a.insert(O.listKey,e,t,void 0,(function(){}),(function(){s.error(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_INSERT_FILE_ERROR"))}))}(e.name,e.mimeType)},f.waitForAndExecute("#"+O.nameFormId)},O.openFileCopyConfig=function(){var e=c.translate(d.WIDGET_DRIVE_DEFAULT.copyName)+" ";O.nameModalConfig.callback=function(e){var t;t=e.name,a.duplicate(O.listKey,a.getSelectedFile(O.listKey),t,(function(){s.success(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_COPY_SUCCESS"))}),(function(){s.error(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_COPY_ERROR"))}))},O.nameModal={name:e+a.getSelectedFile(O.listKey).title},f.waitForAndExecute("#"+O.nameFormId)},O.openRenameConfig=function(){O.nameModalConfig.callback=function(e){!function(e){angular.isDefined(e)&&a.rename(O.listKey,a.getSelectedFile(O.listKey).id,e,(function(){s.success(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_RENAME_SUCCESS"))}),(function(){s.error(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_RENAME_ERROR"))}))}(e.name)},O.nameModal={name:a.getSelectedFile(O.listKey).title},f.waitForAndExecute("#"+O.nameFormId)},O.saveNameForm=function(e){e=e||O.form.nameForm,e.$valid?(l.close(O.nameFormId),(O.nameModalConfig.callback||angular.noop)(O.nameModal)):(u.setFormDirty(e),s.error(c.translate("WIDGET_TYPE_FILE_MANAGEMENT_NAME_FORM_ERROR")))},n.$on("lx-dialog__close-end",(function(){O.nameModal=void 0,O.nameModalConfig={}})),n.$on("widget-file-management-settings",E),n.pickerUploadCallback=function(e,t){"loaded"!==t&&n.$apply((function(){a.setIsPerformingAction(O.listKey,!1),angular.isArray(e)&&"picked"===t&&a.filter(O.listKey,a.getCurrentFolderId(O.listKey))}))},m()}n.$inject=["$scope","$window","$timeout","FileApi","DrivePicker","LxNotificationService","Translation","LxDialogService","FormValidation","Config","Content","Utils","InitialSettings"],angular.module("Widgets").directive("widgetFileManagement",(function(){return{restrict:"E",templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-file-management/views/widget-file-management.html",require:["widgetFileManagement","^widget"],scope:{widget:"="},link:function(e,t,n,r){r[0].setParentController(r[1])},controller:n,controllerAs:"vm",bindToController:!0,replace:!0}})),n.$inject=["$scope","$window","$timeout","DriveFileService","DrivePicker","LxNotificationService","Translation","LxDialogService","FormValidation","Config","Content","Utils","InitialSettings"]}()}.call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(e,t){angular.isUndefined(a.getCurrent().properties)&&(a.getCurrent().properties={}),angular.isDefined(e)&&angular.isDefined(t)&&(angular.isDefinedAndFilled(e.id)?(a.getCurrent().properties[t+"Id"]=e.id,a.getCurrent().properties[t+"Name"]=e.name):angular.isDefinedAndFilled(e.url)&&(a.getCurrent().properties[t+"Id"]=e.url.split("/").pop())),c.updateWidget()}function s(){n((function(){t.$broadcast("widget-file-management-settings",a.getCurrent().uuid)}))}var c=this;c.SELECTION_TYPE={connect:"connectFolder",currentCommunity:"currentCommunity",select:"selectFolder"},c.isCommunityContext=r.getCurrent().type===i.CONTENT_TYPES.COMMUNITY,c.folderType=c.SELECTION_TYPE.select,c.trashType=c.SELECTION_TYPE.select,c.isCommunityContext&&e.get(a.getCurrent(),"properties.currentCommunityDrive")&&(c.folderType=c.SELECTION_TYPE.currentCommunity),c.clearFolder=function(){c.isFolderSelected("")},c.deleteSelectedFolder=function(t){var n=a.getCurrent();angular.isUndefinedOrEmpty(t)||angular.isUndefined(e.get(n,"properties"))||(e.set(n,"properties."+t+"Id",void 0),e.set(n,"properties."+t+"Name",void 0))},c.drivePickerCallbackDelete=function(e){o(e,"delete")},c.drivePickerCallbackMain=function(e){o(e,"folder")},c.getFolderName=function(t){if(!angular.isUndefinedOrEmpty(t)){var n=e.get(a.getCurrent(),"properties",{});return angular.isDefinedAndFilled(n[t+"Name"])?n[t+"Name"]:c.getFolderId(t)}},c.getFolderId=function(t){if(!angular.isUndefinedOrEmpty(t))return e.get(a.getCurrent(),"properties."+t+"Id",void 0)},c.isFolderSelected=function(t){if(angular.isDefinedAndFilled(c.getFolderId(t)))return!0;var n=e.get(a.getCurrent(),"properties");return angular.isDefined(n)&&(n[t+"Id"]=void 0,n[t+"Name"]=void 0),!1},c.setFolder=function(t){var n=a.getCurrent();(e.get(n,"properties.isRootFolder")||"drive"===t)&&(e.set(n,"properties.folderId","root"),e.set(n,"properties.folderName",void 0),c.updateWidget())},c.setTrash=function(t){var n=a.getCurrent();(e.get(n,"properties.classicTrash")||"drive"===t)&&(e.set(n,"properties.deleteId",void 0),e.set(n,"properties.deleteName",void 0),c.updateWidget())},c.updateWidget=s,c.onChange=function(){var t=c.folderType===c.SELECTION_TYPE.currentCommunity;t&&s(),e.set(a.getCurrent(),"properties.currentCommunityDrive",t)}}t.$inject=["$rootScope","$timeout","Content","InitialSettings","Widget"],angular.module("Controllers").controller("WidgetFileManagementSettingsController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,u,d,p,f,g){function m(e){return!(!angular.isString(e)||-1===e.indexOf("HierarchyRequestError"))&&(a((function(){$(".froala").froalaEditor("undo.run"),d.error(p.translate("CANT_DROP_HERE"))})),!0)}function v(){s.removeEventListener("error",m)}function h(){return C.isWidgetEmpty=!C.editingContent&&(angular.isUndefinedOrEmpty(C.widget.properties.content)||angular.isUndefinedOrEmpty(C.parentCtrl.getWidgetTranslation(C.widget.properties.content))),C.parentCtrl.designerMode()||(C.parentCtrl.isHidden=!C.widget.properties.noResults&&C.isWidgetEmpty,C.parentCtrl.isHidden),C.isWidgetEmpty}function y(){var e=C.parentCtrl.getWidgetTranslation(C.widget.properties.content),t=C.parentCtrl.getWidgetTranslation(C.widget.properties.popin),n=f.initHtmlContent(C.widget.uuid,e,".widget-html__content",t,S);C.htmlContent=n.mainContent,C.popinContent=n.popinContent,h()&&(C.htmlContent="",C.popinContent="")}function E(){if(g.isDragDisabled())g.isDragDisabled(!1),e.parents(".component-cell").removeClass("component-cell--hover-disabled");else{g.isDragDisabled(!0),e.parents(".component-cell").addClass("component-cell--hover-disabled");var t=function(e){return e.stopPropagation()};f.waitForAndExecute(".widget-html__wysiwyg .fr-element",(function(e){e.on("dragstart",t).on("selectstart",t)}))}}function b(){s.addEventListener("error",m),o()(C.FroalaService,"editingPopin",!1),C.editingContent=!0,n.$broadcast("editing-html",!0),E(),T.appendTo(".app-content").bind("click",(function(e){e.stopPropagation(),r.$apply((function(){!function(){v();var e=$(".froala");e.froalaEditor("codeView.isActive")&&e.froalaEditor("codeView.toggle"),a((function(){C.editingContent=!1,n.$broadcast("editing-html",!1),y(),T.removeClass("app-filter--is-shown").remove(),E()}))}()}))})),a((function(){T.addClass("app-filter--is-shown")}),100)}function O(){if(f.isDesignerMode()){var e=t.get("FroalaService");C.FroalaService=e;var n=e.getHTMLToolbar();C.FROALA_OPTIONS=e.getOptions(!0,!0,!0,!0,n),C.FROALA_OPTIONS.events["froalaEditor.blur"]=C.parentCtrl.langDetectOnBlur}else C.FroalaService={openContent:f.openContent,openPopin:f.openPopin};C.FROALA_POPIN_OPTIONS=angular.extend(angular.fastCopy(C.FROALA_OPTIONS),{isPopin:!0,toolbarButtons:c()(C.FROALA_OPTIONS.toolbarButtons,"insertPopin")}),y()}var C=this,T=angular.element("<div/>",{class:"app-filter app-filter--no-transition"}),S=!1;C.CONTENT_TYPES=u.CONTENT_TYPES,C.FROALA_OPTIONS={},C.FROALA_POPIN_OPTIONS={},C.editingContent=!1,C.isWidgetEmpty=!1,C.isWidgetHidden=!1,C.href=i.href,C.Translation=p,C.Utils=f,C.editContentBasic=function(){"get"===l.getAction()||"basic"!==l.getViewMode()||C.editingContent||(b(),h())},C.editContentDefaultOrSimple=function(){var e=l.getViewMode();"get"===l.getAction()||"default"!==e&&"simple"!==e||C.editingContent||(b(),h())},C.getWidgetClass=function(){var e=[];return C.parentCtrl.getWidgetClass(e),e.push("widget-editable"),C.isWidgetEmpty&&e.push("widget--is-empty"),C.editingContent&&(e.push("widget-html--is-editing"),e.push("widget-editable--is-editing")),angular.isDefinedAndFilled(C.widget.properties.isIntro)&&e.push("widget--is-intro"),e},C.initFroala=function(){C.widget.properties=C.widget.properties||{};var e=C.widget.properties,t=p.inputLanguage;e.content=e.content||{},e.content[t]=e.content[t]||"",e.popin=e.popin||{},e.popin[t]=e.popin[t]||"",C.FroalaService.widgetUuid=C.widget.uuid},r.$on("$destroy",v),r.$on("inputLanguage",y),r.$on("content_refresh",y),r.$on("listenerOnLinks",(function(e){e===C.widget.uuid&&(S=!0)})),this.setParentController=function(e){C.parentCtrl=e,O()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetHtml","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-html/views/widget-html.html"}}n.r(t),n.d(t,"WidgetHtmlController",(function(){return r})),n.d(t,"WidgetHtmlDirective",(function(){return i}));var a=n(7),o=n.n(a),s=n(106),c=n.n(s);r.$inject=["$element","$injector","$rootScope","$scope","$state","$timeout","$window","Content","InitialSettings","LxNotificationService","Translation","Utils","Widget"],angular.module("Widgets").directive("widgetHtml",i)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c){function u(e){angular.isDefinedAndFilled(e.height)&&(O.iframeHeight=angular.isString(e.height)?parseInt(e.height,10):e.height)}function f(){return g.apply(this,arguments)}function g(){return g=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l()(O.widget,"properties",{}),t.docPath){e.next=3;break}return e.abrupt("return",O.parentCtrl.getWidgetTranslation(t.url));case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return v=s()(a.a.mark((function t(n){var s,c,u,p,f,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!angular.isDefinedAndFilled(n.docPath)){t.next=9;break}return t.next=3,r.fetchPreview(n.docPath);case 3:return s=t.sent,c=s.previewUrl,O.iframeUrl=e.trustAsResourceUrl(c),O.dataSrc=O.iframeUrl,O.src=o.isDesignerMode()?O.iframeUrl:void 0,t.abrupt("return");case 9:if(!angular.isDefinedAndFilled(n.embedUrl)){t.next=14;break}return O.iframeUrl=e.trustAsResourceUrl(n.embedUrl),O.dataSrc=O.iframeUrl,O.src=o.isDesignerMode()?O.iframeUrl:void 0,t.abrupt("return");case 14:if(E&&angular.isDefinedAndFilled(b)){t.next=16;break}return t.abrupt("return");case 16:if(d()(b,"#")&&(p=b.split(/[#](.+)/),b=l()(p,"0")),!d()(b,"?")){t.next=27;break}if(f=b.split(/\?(.+)/),g=f[1],!angular.isDefinedAndFilled(f[1])||!d()(f[1],"user.")){t.next=24;break}return t.next=23,o.getUrlUserInjectionInformation(f[1],i.getConnected());case 23:g=t.sent;case 24:u="".concat(f[0],"?").concat(C,"&").concat(g),t.next=28;break;case 27:u="".concat(b,"?").concat(C);case 28:u+="&iframeId=".concat(O.widget.uuid),n.sendUserIdentity&&(u+="&token=".concat(encodeURIComponent(i.getToken()))),angular.isDefinedAndFilled(l()(p,"1"))&&(u+="#".concat(l()(p,"1"))),O.iframeUrl=e.trustAsResourceUrl(u),O.dataSrc=O.iframeUrl,O.src=o.isDesignerMode()?O.iframeUrl:void 0;case 34:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function h(e){angular.isDefinedAndFilled(e.width)&&(O.iframeWidth=angular.isString(e.width)?parseInt(e.width,10):e.width)}function y(e){var n=l()(e,"data.srcId");angular.isDefinedAndFilled(n)&&n!==O.widget.uuid||angular.isUndefinedOrEmpty(l()(e,"data.height"))||angular.isDefinedAndFilled(l()(e,"data.AWTheight"))||t.$apply((function(){O.iframeHeight="".concat(e.data.height,"px")}))}var E,b,O=this,C="parentUrl=".concat(encodeURIComponent(n.location.href));O.iframeHeight=void 0,O.iframeUrl=void 0,O.iframeWidth=void 0,O.getWidgetClass=function(){var e=[];O.parentCtrl.getWidgetClass(e),O.isWidgetEmpty()&&e.push("widget--is-empty");var t=e.indexOf("widget--is-folded");return O.embed&&t>-1&&e.splice(t,1),e},O.isWidgetEmpty=function(){return!E&&(o.isDesignerMode()||angular.isUndefinedOrEmpty(b))},O.isWidgetHidden=function(){var e=!1;return O.parentCtrl.designerMode()||O.widget.properties.noResults||E||!angular.isUndefinedOrEmpty(b)||(O.parentCtrl.isHidden=!0,e=!0),e},t.$on("$destroy",(function(){return n.removeEventListener("message",y,!1)})),t.$on("widget-iframe-settings",(function(e,t){O.widget.uuid===t&&O.init()})),t.$on("widget-resized",(function(){O.init()})),t.$on("inputLanguage",(function(){O.init()})),O.init=function(){var e=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l()(O.widget,"properties",{}),E=angular.isDefinedAndFilled([t.docPath,t.url,t.embedUrl],"some"),E){e.next=4;break}return e.abrupt("return");case 4:return angular.isUndefinedOrEmpty(t.sendUserIdentity)&&(t.sendUserIdentity=!1),O.iframeHeight=500,O.iframeWidth="100%",O.iframeClass="display-block ".concat(o.isDesignerMode()?p.LAZY_LOADED_CLASS:p.LAZY_LOADABLE_CLASS),e.next=10,f();case 10:return b=e.sent,u(t),h(t),e.next=15,m(t);case 15:n.addEventListener("message",y,!1),c((function(){Object(p.observeTargets)(o.isDesignerMode())}),300);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.setParentController=function(e){O.parentCtrl=e,O.init()}}n.r(t),n.d(t,"WidgetIframeController",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(4),l=n.n(c),u=n(17),d=n.n(u),p=n(746);r.$inject=["$sce","$scope","$window","Document","User","Utils","$timeout"],angular.module("Controllers").controller("WidgetIframeController",r)},function(e,t){!function(){"use strict";angular.module("Widgets").directive("widgetIframe",(function(){return{bindToController:!0,controller:"WidgetIframeController",controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetIframe","^widget"],restrict:"E",scope:{embed:"<?",widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-iframe/views/widget-lazy-iframe.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a){var o=this;o.displayHttpsWarning=!1,o.Features=r,o.formatUrl=function(){var e=a.getCurrent().properties.url[i.inputLanguage];angular.isDefinedAndFilled(e)&&!e.startsWith("http")&&(e="http://"+e),o.updateWidget()},o.setDisplayHttpsWarning=function(){var e,t=a.getCurrent().properties;angular.isDefinedAndFilled(t.url)&&t.url[i.inputLanguage]&&(e=t.url[i.inputLanguage]),o.displayHttpsWarning=angular.isDefinedAndFilled(e)&&e.startsWith("http://")&&n.location.href.startsWith("https://"),o.updateWidget()},o.updateWidget=function(){t((function(){e.$broadcast("widget-iframe-settings",a.getCurrent().uuid)}))}}e.$inject=["$rootScope","$timeout","$window","Features","Translation","Widget"],angular.module("Controllers").controller("WidgetIframeSettingsController",e)}()},function(e,t,n){"use strict";function r(){var e=this;this.setParentController=function(t){e.parentCtrl=t}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetImageGallery","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-image-gallery/views/widget-image-gallery.html"}}n.r(t),n.d(t,"WidgetImageGalleryController",(function(){return r})),n.d(t,"WidgetImageGalleryDirective",(function(){return i})),angular.module("Widgets").directive("widgetImageGallery",i)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){var r=this,a={};r.Widget=n,r.onChange=function(e,t){var n=i({},f()(a,"properties",{}));1===t.length&&"viewMode"===d()(t)&&n.viewMode!==e&&(n=i({},n,{},v.a.defaultProps.properties)),m()(n,t,e),a.properties=n||{}},r.toggleField=function e(t){a.properties=a.properties||{};var n=a.properties.fields,r=void 0===n?[]:n,i=l()(r,{name:t.name});angular.isUndefinedOrEmpty(e)||(i.enable=!i.enable,a.properties.fields=r)},function(){a=n.getCurrent();var r=v.a.defaultProps.properties;a.properties=a.properties?i({},r,{},a.properties):r,function(){a.properties=a.properties||{};var n=t.getProperty(e.INSTANCE_PROPERTIES.IMAGE_GALLERY_FIELDS),r=a.properties.fields,i=void 0===r?[]:r;angular.forEach(n,(function(e){var t=l()(i,{name:e});angular.isUndefinedOrEmpty(t)&&i.push({enable:!0,name:e})})),a.properties.fields=i}()}()}n.r(t),n.d(t,"WidgetImageGallerySettingsController",(function(){return a}));var o=n(3),s=n.n(o),c=n(21),l=n.n(c),u=n(51),d=n.n(u),p=n(4),f=n.n(p),g=n(7),m=n.n(g),v=n(407);a.$inject=["Config","Instance","Widget"],angular.module("Controllers").controller("WidgetImageGallerySettingsController",a)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u){function d(n){switch(f.widget.properties.type){case f.widgetListCtrl.SELECTION_TYPES.pick:!function(){var t=f.widgetListCtrl.getOriginalListKey()+"-"+f.widgetListCtrl.SELECTION_TYPES.pick,n=e.get(f.widget,"properties",{});if(f.widgetListCtrl.setListKey(t),angular.isDefinedAndFilled(n.instancesIds)){var r={ids:n.instancesIds,maxResult:n.instancesIds.length};s.cacheFilterize(r,f.widgetListCtrl.updateListItems,f.widgetListCtrl.updateListItems,t,v)}else s.displayList(t,v).length=0,f.widgetListCtrl.updateListItems()}();break;default:case"favorites":case"all":!function(n){var r=e.get(f.widget,"properties",{}),i={maxResults:parseInt(r.maxNumber,10)||s.maxResults,showHidden:!1,sortOrder:""};"favorites"===r.type&&(i.userFavoritesOnly=!0);var a=f.widgetListCtrl.getOriginalListKey()+"-"+f.widgetListCtrl.SELECTION_TYPES.list;if(f.widgetListCtrl.setListKey(a),i.sortOrder="desc"===r.listOrderDir?"-":"",i.sortOrder+=r.listOrder?r.listOrder:"name",angular.isDefinedAndFilled([r.metadata,n.metadata],"some")){var o=angular.fastCopy(r.metadata);angular.isDefinedAndFilled(n.metadata)&&(o=angular.fastCopy(n.metadata),angular.forEach(n.metadata,(function(t,n){angular.isUndefinedOrEmpty(t)&&(o[n]=e.get(r.metadata,"["+n+"]",[]))}))),i.combinedMetadata=[],angular.forEach(o,(function(e){(angular.isString(e)||angular.isArray(e))&&angular.isDefinedAndFilled(e)&&i.combinedMetadata.push({metadata:e})}))}if(angular.isDefinedAndFilled(n))angular.isDefinedAndFilled(n.query)&&(i.name=n.query),s.filterize(i,f.widgetListCtrl.updateListItems,f.widgetListCtrl.updateListItems,a,v);else if(m&&f.widget.isMainWidget&&angular.isDefinedAndFilled(t.search().filters)){var c=u.getSimpleUrlParams(t.search().filters);i.name=c.query,angular.isDefinedAndFilled(c.metadata)&&(c.metadata=angular.isArray(c.metadata)?c.metadata:[c.metadata],i.combinedMetadata=i.combinedMetadata||[],angular.forEach(c.metadata,(function(e){angular.isUndefinedOrEmpty(e)||angular.forEach(e.split(","),(function(e){angular.isUndefinedOrEmpty(e)||!angular.isString(e)&&!angular.isArray(e)||i.combinedMetadata.push({metadata:e})}))}))),s.filterize(i,f.widgetListCtrl.updateListItems,f.widgetListCtrl.updateListItems,a,v)}else s.cacheFilterize(i,f.widgetListCtrl.updateListItems,f.widgetListCtrl.updateListItems,a,v);m=!1}(n)}}function p(){f.widget.properties.type===f.widgetListCtrl.SELECTION_TYPES.pick&&"basic"===a.getViewMode()&&"get"!==a.getAction()&&u.waitForAndExevute("#"+g,c)}var f=this,g="widget-instance-list-picker-",m=!0,v={items:{createdAt:!0,deletableFromFavorite:!0,description:!0,favicon:!0,homepage:!0,id:!0,isInFavoriteFeedKeys:!0,logo:!0,markedAsFavorite:!0,metadata:!0,name:!0,properties:!0,slug:!0,subtitle:!0,title:!0,uid:!0}};f.init=function(t){g+=f.widget.uuid,function(){var t=f.widget.properties;if(angular.isUndefinedOrEmpty(t.viewMode)&&(t.viewMode="vertical"),angular.isDefinedAndFilled(t.viewMode)&&("vertical"===t.viewMode?t.viewMode="list":"horizontal"===t.viewMode&&(t.viewMode="grid")),angular.isUndefinedOrEmpty(t.viewModeVariant)&&(t.viewModeVariant="group"),angular.isUndefinedOrEmpty(t.itemsSeparator)&&(t.itemsSeparator=!0),angular.isDefinedAndFilled(t.itemsPerLine)&&angular.isString(t.itemsPerLine)){var n=parseInt(t.itemsPerLine,10);angular.isNumber(n)&&(t.itemsPerLine=n)}angular.isDefinedAndFilled(t.slideshow)&&(t.slideshowEnabled=t.slideshow),angular.isDefinedAndFilled(t.slideshowAutoPlay)&&(t.slideshowAutoplay=t.slideshowAutoPlay);var r=s.getProperty(i.INSTANCE_PROPERTIES.INSTANCE_FIELDS);if(angular.isUndefinedOrEmpty(t.fields))angular.isString(r[0])?(t.fields=[],angular.forEach(r,(function(e){t.fields.push({enable:!0,name:e})}))):t.fields=angular.fastCopy(r);else if(angular.isString(t.fields[0])){var a=[];angular.forEach(t.fields,(function(e){a.push({enable:!0,name:e})})),angular.forEach(r,(function(n){angular.isObject(n)&&(n=n.name),e.includes(t.fields,n)||a.push({enable:!1,name:n})})),t.fields=a}}(),f.widgetListCtrl.init(t)},f.setParentController=function(e){f.widgetListCtrl=e,f.widgetListCtrl.widgetListChildCtrl={initList:d,onWidgetListClick:p},f.init(!0)}}t.$inject=["$location","$scope","$state","Config","Content","Features","Instance","InstancePicker","Translation","Utils"],angular.module("Widgets").directive("widgetInstanceList",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetInstanceList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-instance-list/views/widget-instance-list.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c,l,u,d){var p,f=this,g="widget-";f.PICKER_ID="widget-instance-list-picker-",f.isPickerOpen=!1,f.listOrderSelection=["name","createdAt"],f.instanceList=[],f.Instance=s,f.Utils=u,f.openInstancePicker=function(){f.isPickerOpen=!0,u.waitForAndExecute("#"+f.PICKER_ID,c)},f.updateWidget=function(){var t=d.getCurrent();"pick"===t.properties.type&&t.isMainWidget&&(t.isMainWidget=!1);var r=e.get(t,"properties.metadata",{});t.properties.filterRestriction={metadata:e.filter(r,(function(e){return Boolean(e)}))},i((function(){n.$broadcast("widget-instance-list-settings",d.getCurrent().uuid)}))},f.setAsMainWidget=function(){var e=d.getCurrent();if(e.isMainWidget){var t=o.getElementList(a.getCurrent(),"widget","isMainWidget",!0);angular.forEach(t,(function(t){t.uuid!==e.uuid&&(t.isMainWidget=!1)})),n.$broadcast("widget-is-main-toogled",e.uuid,e.isMainWidget)}},f.switchViewMode=function(e){d.getCurrent().properties.viewMode!==e&&(d.getCurrent().properties.viewMode=e,d.getCurrent().properties.viewModeVariant="group",f.updateWidget())},f.switchViewModeVariant=function(e){d.getCurrent().properties.viewModeVariant!==e&&(d.getCurrent().properties.viewModeVariant=e,f.updateWidget())},r.$on("instance-picker__close-start",(function(t,n){f.PICKER_ID===n&&(d.getCurrent().properties.instancesIds=e.map(f.instanceList,"id")),f.updateWidget()})),r.$on("instance-picker__close-end",(function(){f.isPickerOpen=!1})),function(){var n=a.getCurrent(),i=d.getCurrent();p=angular.isDefinedAndFilled(e.get(n,"id"))?n.id:Object(t.b)(),g+=i.uuid+"-"+p,f.PICKER_ID+=i.uuid,i.properties=i.properties||{};var o,c=i.properties;if(f.metadata=(o=l.getRefactoredMetadata(!0),e.filter(o,{instance:void 0})),angular.isUndefinedOrEmpty(c.type)&&(c.type="all"),"pick"===c.type&&angular.isArray(c.instancesIds)&&angular.isDefinedAndFilled(c.instancesIds)){if(f.isCallInProgress=s.isCallInProgress(g+"-pick"),!f.isCallInProgress)return void(f.instanceList=s.displayList(g+"-pick"));var u=r.$watch((function(){return s.isCallInProgress(g+"-pick")}),(function(e){f.isCallInProgress=e,f.isCallInProgress||(f.instanceList=s.displayList(g+"-pick"),angular.isFunction(u)&&(u(),u=void 0))}))}}()}n.$inject=["$rootScope","$scope","$timeout","Content","ContentTemplate","Instance","InstancePicker","Metadata","Utils","Widget"],angular.module("Controllers").controller("WidgetInstanceListSettingsController",n)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,c){function l(){c.isDragDisabled()?(c.isDragDisabled(!1),e.parents(".component-cell").removeClass("component-cell--hover-disabled")):(c.isDragDisabled(!0),e.parents(".component-cell").addClass("component-cell--hover-disabled"))}function u(){e.find(".widget-content__transclude").css("height",e.find(".widget-content__transclude").outerHeight()),l(),d.editingContent=!0,p.appendTo(".app-content").bind("click",(function(e){e.stopPropagation(),n.$apply((function(){var e;e=a.inputLanguage,angular.isDefined(d.widget.properties.content)&&a.hasTranslation(d.widget.properties.content,e)&&(d.widget.properties.content[e]=s.stripTags(d.widget.properties.content[e])),d.editingContent=!1,"basic"!==i.getViewMode()&&p.removeClass("app-filter--is-shown"),r((function(){"basic"!==i.getViewMode()&&p.remove(),l()}))}))})),"basic"!==i.getViewMode()&&r((function(){p.addClass("app-filter--is-shown"),e.find(".widget-content__transclude").removeAttr("style")}),100)}var d=this,p=angular.element("<div/>",{class:"app-filter app-filter--no-transition"});d.editingContent=!1,d.froalaOptions={charCounterCount:"basic"!==i.getViewMode(),events:{},htmlAllowedTags:[],pastePlain:!0,toolbarButtons:[]},d.recompileFroala=!1,d.Translation=a,d.Utils=s,d.editContentBasic=function(){"get"===i.getAction()||"basic"!==i.getViewMode()||d.editingContent||u()},d.editContentDefaultOrSimple=function(){"get"===i.getAction()||"default"!==i.getViewMode()&&"simple"!==i.getViewMode()||d.editingContent||u()},d.getWidgetClass=function(){var e=[];return d.parentCtrl.getWidgetClass(e),e.push("widget-editable"),d.isWidgetEmpty()&&e.push("widget--is-empty"),d.editingContent&&(e.push("widget-intro--is-editing"),e.push("widget-editable--is-editing")),e},d.initFroala=function(){d.widget.properties=d.widget.properties||{};var e=d.widget.properties,t=a.inputLanguage;e.content=e.content||{},e.content[t]=e.content[t]||"",o()(d.FroalaService,"widgetUuid",d.widget.uuid)},d.isWidgetEmpty=function(){return!d.editingContent&&(angular.isUndefined(d.widget.properties.content)||!d.parentCtrl.getWidgetTranslation(d.widget.properties.content))},d.isWidgetHidden=function(){return d.parentCtrl.designerMode()||!angular.isUndefined(d.widget.properties.content)&&d.parentCtrl.getWidgetTranslation(d.widget.properties.content)?d.parentCtrl.isHidden=!1:d.parentCtrl.isHidden=!0,d.parentCtrl.isHidden},n.$watch(i.getViewMode.bind(i),(function(e){var t=d.froalaOptions.charCounterCount;d.froalaOptions.charCounterCount="basic"!==e,t!==d.froalaOptions.charCounterCount&&(d.recompileFroala=!0,r((function(){d.recompileFroala=!1})))}),!0),this.setParentController=function(e){d.parentCtrl=e,function(){if(s.isDesignerMode()){var e=t.get("FroalaService");d.FroalaService=e,d.froalaOptions.events={"froalaEditor.blur":d.parentCtrl.langDetectOnBlur,"froalaEditor.image.beforePasteUpload":e.beforePasteUpload,"froalaEditor.image.beforeUpload":e.beforeUpload,"froalaEditor.initialized":e.focus}}else d.FroalaService={openContent:s.openContent,openPopin:s.openPopin}}()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetIntro","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-intro/views/widget-intro.html"}}n.r(t),n.d(t,"WidgetIntroController",(function(){return r})),n.d(t,"WidgetIntroDirective",(function(){return i}));var a=n(7),o=n.n(a);r.$inject=["$element","$injector","$scope","$timeout","Content","Translation","Utils","Widget"],angular.module("Widgets").directive("widgetIntro",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(e){r((function(){t.$broadcast("widget-leaderboard-settings",c.getCurrent().uuid,e)}))}var u=this;u.CONTENT_PICKER_ID="leaderboard-content-picker-",u.PICKED_CONTENT_LIST_KEY="picked-content-",u.pickedContent={},u.showContentPicker=!1,u.Content=i,u.LeaderboardKinds=o,u.openContentPicker=function(){u.showContentPicker=!0,s.waitForAndExecute("#"+u.CONTENT_PICKER_ID,a)},u.switchType=function(){var e=c.getCurrent().properties,t=!1;e.scopeKind===o.platform&&(e.allTime=!0,e.showOtherPoints=!1,t=!0),e.scopeKind!==o.content&&(u.pickedContent=void 0,delete e.content,t=!0),t&&u.updateWidget()},u.updateWidget=l,u.debouncedUpdateWidget=e.debounce(l,350),n.$on("content-picker__close-end",(function(t,n){if(u.CONTENT_PICKER_ID===n){u.showContentPicker=!1;var r=e.get(u.pickedContent,"uid");r!==e.get(c.getCurrent(),"properties.content")&&(e.set(c.getCurrent(),"properties.content",r),u.updateWidget())}})),function(){var t=c.getCurrent();u.CONTENT_PICKER_ID+=t.uuid,u.PICKED_CONTENT_LIST_KEY+=t.uuid,t.properties=t.properties||{};var n=t.properties;n.scopeKind=n.scopeKind||o.instance;var r=e.get(t,"properties.content");if(!angular.isUndefinedOrEmpty(r)){var a=i.getCurrent(u.PICKED_CONTENT_LIST_KEY);e.get(a,"uid")===r?u.pickedContent=a:i.get(r,(function(e){u.pickedContent=e}),void 0,u.PICKED_CONTENT_LIST_KEY)}}()}t.$inject=["$rootScope","$scope","$timeout","Content","ContentPicker","LeaderboardKinds","Utils","Widget"],angular.module("Controllers").controller("WidgetLeaderboardSettingsController",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(){return a.empty(d.classes),angular.isArray(d.classes)||(d.classes=[]),d.parentCtrl.getWidgetClass(d.classes),d.isWidgetEmpty&&d.classes.push("widget--is-empty"),d.isCallInProgress&&d.classes.push("widget-leaderboard--is-loading"),d.classes}function s(){var t=e.get(d.widget,"properties",{}),n=angular.isNumber(t.maxEntries)?t.maxEntries:10;return angular.isDefinedAndFilled(t.leaderboardId)?{maxEntries:n,uid:t.leaderboardId}:{allTime:t.scopeKind===r.platform||(t.allTime||!1),maxEntries:n,otherPoints:t.showOtherPoints,scopeId:t.scopeKind===r.content?t.content:void 0,scopeKind:t.scopeKind||r.instance}}function c(){return d.isWidgetEmpty=d.initialized&&!d.isCallInProgress&&angular.isUndefinedOrEmpty(e.get(n.getCurrent(d.parentCtrl.getListKey()),"entries",[])),d.parentCtrl.designerMode()||(d.parentCtrl.isHidden=d.initialized&&!d.parentCtrl.designerMode()&&!d.widget.properties.noResults&&d.isWidgetEmpty,d.parentCtrl.isHidden),d.isWidgetEmpty}function l(){return d.isInfiniteScrollEnabled=d.initialized&&d.widget.isMainWidget&&!d.isCallInProgress&&p,d.isInfiniteScrollEnabled}function u(){d.initialized=!0,p=e.get(n.getCurrent(d.parentCtrl.getListKey()),"more"),c(),o(),l()}var d=this,p=!1,f={};d.classes=[],d.emptyMessage="FRONT.LEADERBOARD.NO_COMPETITORS",d.initialized=!1,d.isCallInProgress=!0,d.isInfiniteScrollEnabled=!1,d.isWidgetEmpty=!1,d.isWidgetHidden=!1,d.Leaderboard=n,d.LeaderboardKinds=r,d.handleInfiniteScroll=function(e){angular.isUndefined(d.parentCtrl)||(e||d.widget.isMainWidget)&&p&&n.nextCompetitors(s(),u,u,d.parentCtrl.getListKey())},t.$on("widget-is-main-toggled",(function(e,t,n){d.widget.uuid===t&&(n?d.isWidgetEmpty=!1:c(),o(),l())})),t.$on("widget-size-update-in-row",(function(){var e=d.parentCtrl.widgetSize;d.parentCtrl.setWidgetSize(),e!==d.parentCtrl.widgetSize&&o()})),t.$on("widget-style-settings",(function(e,t){d.widget.uuid===t&&o()})),t.$on("widget-leaderboard-settings",(function(e,t){d.widget.uuid===t&&d.init()})),t.$watch((function(){return n.isCallInProgress(d.parentCtrl.getListKey())}),(function(e){d.isCallInProgress=e,e?d.isWidgetEmpty=!1:c(),o(),l()}),!0),d.init=function(){d.initialized=!1,d.widget.properties=d.widget.properties||{};var e=d.widget.properties;e.load=!!angular.isUndefined(e.load)||e.load,e.allTime=e.allTime||!1,e.showBadges=!!angular.isUndefinedOrEmpty(e.showBadges)||e.showBadges,e.showOtherPoints=!!angular.isUndefinedOrEmpty(e.showOtherPoints)||e.showOtherPoints,e.maxEntries=angular.isUndefinedOrEmpty(e.maxEntries)?10:e.maxEntries,angular.isString(e.maxEntries)&&(e.maxEntries=parseInt(e.maxEntries,10)),e.maxEntries=angular.isNumber(e.maxEntries)?e.maxEntries:10,d.parentCtrl.setWidgetSize(),o(),l(),n.get(s(),u,u,d.parentCtrl.getListKey(),f)},this.setParentController=function(e){d.parentCtrl=e,d.init()}}t.$inject=["$scope","Leaderboard","LeaderboardKinds","Translation","Utils"],angular.module("Widgets").directive("widgetLeaderboard",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetLeaderboard","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-leaderboard/views/widget-leaderboard.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t){var n=this;t.$on("inputLanguage",(function(t,r){var i=e.get(n.widget,"properties");i.inputLang=r.lang})),this.setParentController=function(e){n.parentCtrl=e}}t.$inject=["$scope"],angular.module("Widgets").directive("widgetLinks",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetLinks","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-links/views/widget-links.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,c,l){var u,d=this,p={description:{},link:{},targetBlank:!0,thumbnail:void 0,title:{}};d.DIALOG_ID="add-widget",d.activeLink=void 0,d.form={},d.isUploading=!1,d.UPLOAD_ID="link-thumbnail-uploader",d.Config=t,d.FormValidation=n,d.Translation=o,d.Utils=c,d.addLink=function(){d.activeLink=angular.fastCopy(p),c.waitForAndExecute("#".concat(d.DIALOG_ID))},d.deleteLink=function(e){i.confirm(o.translate("WIDGET_TYPE_LINKS_DELETE"),o.translate("WIDGET_TYPE_LINKS_DELETE_DESCRIPTION"),{cancel:o.translate("CANCEL"),ok:o.translate("OK")},(function(t){t&&l.getCurrent().properties.items.splice(e,1)}))},d.deleteThumbnail=function(){d.activeLink.thumbnail=void 0},d.editLink=function(e){angular.isUndefined(e.targetBlank)&&(e.targetBlank=!0),u=e,d.activeLink=angular.fastCopy(e),c.waitForAndExecute("#".concat(d.DIALOG_ID))},d.editThumbnail=function(){s.openSelection(d.uploadId)},d.saveLink=function(){if(!angular.isUndefinedOrEmpty(d.form.linkForm)){var e=l.getCurrent().properties;if(angular.isUndefined(e.items)&&(e.items=[]),!a()(d.form.linkForm,"$valid",!1)||!o.hasTranslations(d.activeLink.link,!0)||!o.hasTranslations(d.activeLink.title,!0))return n.setFormDirty(d.form.linkForm),void i.error(o.translate("ERROR_MANDATORY_FIELDS"));angular.isDefinedAndFilled(u)?angular.copy(d.activeLink,u):e.items.push(d.activeLink),r.close(d.DIALOG_ID)}},d.uploadThumbnail=function(e){angular.isDefinedAndFilled(a()(e,"blobKey"))&&(d.activeLink.blobKey=e.blobKey,d.activeLink.thumbnail=d.activeLink.blobKey),angular.isDefinedAndFilled(a()(e,"url"))&&(d.activeLink.thumbnail=e.url)},e.$on("lx-dialog__close-end",(function(e,t){t===d.DIALOG_ID&&(d.activeLink=void 0,u=void 0)})),e.$on("inputLanguage",(function(){angular.isDefined(d.form.linkForm)&&d.form.linkForm.$setPristine()})),function(){var e=l.getCurrent();d.DIALOG_ID+=e.uuid;var t=e.properties.items;angular.isUndefined(t)&&(e.properties.items=[])}()}n.r(t),n.d(t,"WidgetLinksSettingsController",(function(){return r}));var i=n(4),a=n.n(i);r.$inject=["$scope","Config","FormValidation","LxDialogService","LxNotificationService","Translation","UploaderAction","Utils","Widget"],angular.module("Controllers").controller("WidgetLinksSettingsController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l){function u(){return m.isInfiniteScrollEnabled=m.initialized&&m.widget.isMainWidget&&!y&&h,m.isInfiniteScrollEnabled}function d(){var e=m.executeChildFunction("isWidgetEmpty");return m.isWidgetEmpty=m.initialized&&(!m.widget.isMainWidget||m.widgetCtrl.designerMode())&&!m.shouldDisplayTabs&&!m.shouldDisplayTabsSelector&&!y&&angular.isUndefinedOrEmpty(m.items)&&(!angular.isDefined(e)||e),m.widgetCtrl.designerMode()||(m.widgetCtrl.isHidden=m.initialized&&!m.widgetCtrl.designerMode()&&!m.widget.properties.noResults&&m.isWidgetEmpty,m.widgetCtrl.isHidden),m.isWidgetEmpty}function p(){if(c()([m.LIST_TYPES.community,m.LIST_TYPES.file,m.LIST_TYPES.media,m.LIST_TYPES.user],m.backwardCompatibleType))return!1;var e=m.widget.properties,t=e.tabsEnabled&&(m.executeChildFunction("shouldDisplayListTabs")||!1),n=a.breakpoint||"desk";return m.shouldDisplayTabs=t&&"desk"===n,m.shouldDisplayTabsSelector=t&&"desk"!==n,t?m.isWidgetEmpty=!1:d(),m.computeClasses(),t}function f(e,t,n){e=e||{},t=t||!1,m.items=[],m.projection=m.executeChildFunction("getProjection")||{},m.executeChildFunction("initList",[e,t,n])}var g,m=this,v={},h=!1,y=!0;m.LIST_TYPES={classroom:"classroom",community:"community-list",content:"content-list",directory:"directory-entry-list",file:"file-list",instance:"instance-list",media:"media-list",post:"post-list",sharepointSite:"sharepoint-site-list",user:"user-list"},m.SELECTION_TYPES={communityFolder:"community-folder",list:"list",pick:"pick",select:"select"},m.SERVICES={classroom:"Classroom","community-list":"Community","content-list":"Content","directory-entry-list":"DirectoryEntry","file-list":"Document","instance-list":"Instance","media-list":"Media","post-list":"Post","sharepoint-site-list":"SharepointSite","user-list":"User"},m.classes=[],m.initialized=!1,m.isInfiniteScrollEnabled=!1,m.isWidgetEmpty=!1,m.isWidgetHidden=!1,m.items=[],m.projection={},m.shouldDisplayTabsSelector=!1,m.shouldDisplayTabs=!1,m.tabs={all:s.translate("ALL"),items:[]},m.tabDefault={name:m.tabs.all,uid:"all"},m.tabSelected={name:m.tabs.all,uid:"all"},m.widgetListChildCtrl={},m.computeClasses=function(){var e=m.widget.properties;return l.empty(m.classes),m.classes.push("widget-".concat(m.backwardCompatibleType)),m.widgetCtrl.getWidgetClass(m.classes),(c()([m.SELECTION_TYPES.pick,m.SELECTION_TYPES.select],e.typeDisplay||e.displayType||e.type)||"basic"!==i.getViewMode()||"get"===i.getAction())&&m.classes.push("widget-editable"),m.isWidgetEmpty&&m.classes.push("widget--is-empty"),angular.isDefinedAndFilled(e.viewMode)&&m.classes.push("widget-".concat(m.backwardCompatibleType,"--view-mode-").concat(e.viewMode)),angular.isDefinedAndFilled(e.viewModeVariant)&&m.classes.push("widget-".concat(m.backwardCompatibleType,"--view-mode-variant-").concat(e.viewModeVariant)),m.classes=m.classes.concat(m.executeChildFunction("computeClasses")||[]),m.classes},m.executeChildFunction=function(e,t){var n=m.widgetListChildCtrl[e];if(angular.isFunction(n))return n.apply(m,t)},m.getOriginalListKey=function(){return g},m.handleInfiniteScroll=function(e){angular.isUndefined(m.widgetCtrl)||(e||m.widget.isMainWidget)&&h&&m.service.nextPage(m.updateListItems,m.updateListItems,m.getListKey())},m.initList=f,m.onWidgetListClick=function(){y||m.executeChildFunction("onWidgetListClick")},m.selectTab=function(e,t){n.$broadcast("reset-slideshow-index"),e=e||m.tabDefault,t=!!angular.isUndefined(t)||t;var r=m.getOriginalListKey();angular.isUndefinedOrEmpty(e)?m.setListKey(r):m.setListKey("".concat(r,"-").concat(e.uid)),m.tabSelected={name:e.name,uid:e.uid},t&&f(v),m.executeChildFunction("selectTab",[e,t])},m.setService=function(t){m.service=e.get(t)},m.updateListItems=function(){m.initialized=!0;var e=m.getListKey();m.items=m.service.displayList(e,m.projection),h=m.service.hasMore(e),d(),m.computeClasses(),u(),m.executeChildFunction("onListItemsUpdated")},n.$on("layout-breakpoint",(function(e,t,n){("desk"===t||angular.isUndefinedOrEmpty(n)||"desk"===n)&&p()})),n.$on("widget-content-filter-search",(function(e,t){if(m.widget.isMainWidget){var n=r.getElement(i.getCurrent(),"widget","uuid",t);angular.isDefinedAndFilled(n)&&(v=angular.fastCopy(n.properties),f(v))}})),n.$on("widget-is-main-toggled",(function(e,t,n){m.widget.uuid===t&&(n?m.isWidgetEmpty=!1:d(),m.computeClasses(),u())})),n.$on("widget-size-update-in-row",(function(){var e=m.widgetCtrl.widgetSize;m.widgetCtrl.setWidgetSize(),m.executeChildFunction("widgetSizeUpdate",[e]),e!==m.widgetCtrl.widgetSize&&m.computeClasses()})),n.$on("widget-style-settings",(function(e,t){m.widget.uuid===t&&m.computeClasses()})),n.$on("widget-".concat(m.backwardCompatibleType,"-settings"),(function(e,t){m.widget.uuid===t&&m.init(!1)})),n.$watch((function(){return angular.isDefined(m.service)&&m.service.isCallInProgress(m.getListKey())}),(function(e){y=e,e?m.isWidgetEmpty=!1:d(),m.computeClasses(),u()}),!0),m.init=function(e){var n=m.SERVICES[m.backwardCompatibleType];m.initialized=!1,m.widgetListChildCtrl=m.widgetListChildCtrl||{},m.widget.isMainWidget=m.widget.isMainWidget||!1,m.setService(angular.isFunction(n)?n():n),e=!!angular.isUndefined(e)||e,e&&(g=m.getListKey()),m.widgetCtrl.setWidgetSize(),m.executeChildFunction("initProperties"),m.executeChildFunction("handleBackwardCompatibility"),p(),m.computeClasses(),u(),o()(m.widget,"properties.tabsEnabled",!1)?t.when(m.executeChildFunction("computeTabsNames")).then((function(){f(void 0,!0,!0)})):f(void 0,!0,!0)},this.setParentController=function(e){m.widgetCtrl=e,m.getListKey=m.widgetCtrl.getListKey,m.setListKey=m.widgetCtrl.setListKey}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetList","^widget"],restrict:"E",scope:{backwardCompatibleType:"@",widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-list/views/widget-list.html"}}n.r(t),n.d(t,"WidgetList",(function(){return i}));var a=n(4),o=n.n(a),s=n(17),c=n.n(s);r.$inject=["$injector","$q","$scope","ContentTemplate","Content","Layout","Translation","Utils"],angular.module("Widgets").directive("widgetList",i)},function(e,t,n){"use strict";function r(e,t,n,r){var i=this;i.editingContent=!1,i.isWidgetEmpty=!1,i.Widget=r,i.Translation=n,i.getWidgetClass=function(){var e=[];return i.parentCtrl.getWidgetClass(e),e.push("widget-editable"),e},i.isWidgetHidden=function(){return i.parentCtrl.isHidden=!1,i.parentCtrl.isHidden},this.setParentController=function(e){i.parentCtrl=e}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetMandatoryRead","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-mandatory-read/views/widget-mandatory-read.html"}}n.r(t),n.d(t,"WidgetMandatoryReadDirective",(function(){return i})),n.d(t,"WidgetMandatoryReadController",(function(){return r})),r.$inject=["$scope","Content","Translation","Widget"],angular.module("Widgets").directive("widgetMandatoryRead",i)},function(e,t,n){"use strict";n.r(t),function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=n(3),a=n.n(i),o=n(4),s=n.n(o),c=n(223),l=n.n(c);!function(){function t(t,n,i,o,c,u,d,p,f,g,m,v,h,y,E,b){function O(){var e={lang:E.getLang("current")},t=I.widget.properties;if("from"===t.typeDisplay)e.sortOrder="-createdAt",angular.isDefinedAndFilled(t.displayTags)&&angular.isArray(t.displayTags)&&(e.tags=t.displayTags),angular.isNumber(t.maxNumber)&&(e.maxResults=t.maxNumber),angular.isArray(t.instance)&&(e.instance=angular.isUndefinedOrEmpty(t.instance)?m.getCurrentInstanceId():t.instance),v.cacheFilterize(e,I.widgetListCtrl.updateListItems,I.widgetListCtrl.updateListItems,I.widgetListCtrl.getListKey());else if("select"===t.typeDisplay){var n=t.media.map(v.getDocPath);p.getMulti(n).then((function(e){return v.initList(I.widgetListCtrl.getListKey(),null,e.items,!1,void 0)})).then((function(){o((function(){I.widgetListCtrl.updateListItems()}))}))}}function C(){var e=I.widget.properties,t=void 0===e?{}:e;angular.isUndefined(t.media)&&(t.media=[]),t.media=t.media.concat(t.drive||[]),t.drive&&delete t.drive,angular.isUndefinedOrEmpty(t.typeDisplay)&&(t.typeDisplay="select",t.displayTags=[]),angular.isUndefinedOrEmpty(t.viewMode)&&(t.slideshow?(t.viewMode="horizontal",t.perLine=1,t.hideMediaInfo=!0):t.viewMode="vertical"),angular.isString(t.maxNumber)&&(t.maxNumber=parseInt(t.maxNumber,10)),t.maxNumber=t.maxNumber||10,angular.extend(I.fieldsToDisplay,{description:!t.hideMediaInfo,name:!t.hideMediaInfo,tags:!1})}function T(){I.widget.properties.typeDisplay===I.widgetListCtrl.SELECTION_TYPES.select&&"basic"===d.getViewMode()&&"get"!==d.getAction()&&b.waitForAndExecute("#".concat(_),c)}function S(){!function(){var e=I.widgetListCtrl||{},t=e.items,n=I.widget.properties||{},r=n.media;angular.isUndefinedOrEmpty([t,r],"some")||angular.forEach(t,(function(e){angular.forEach(r,(function(t){v.getMediaId(e)===t.id&&angular.isDefinedAndFilled(t.override)&&(e.override=t.override)}))}))}();var e=I.widgetListCtrl||{},t=e.items,n=I.widget.properties||{},i=n.media,o=s()(I,"widget.properties.typeDisplay")===I.widgetListCtrl.SELECTION_TYPES.select?l()(i,(function(e,n){var r=t.find((function(e){return e.id===n.id}));return e.push(r||n),e}),[]):t;I.widgetListCtrl.items=l()(o,(function(e,t){return function(e){if(I.widgetListCtrl.widgetCtrl.designerMode())return!0;if(angular.isUndefinedOrEmpty(e))return!1;var t=I.widgetListCtrl.widgetCtrl.getWidgetTranslation;if(angular.isDefinedAndFilled(e.override)&&(E.hasTranslations(e.override.name,!0)||E.hasTranslations(e.override.description,!0)))return angular.isDefinedAndFilled(t(e.override.name)||t(e.override.description));var n=e.name||e.content.reduce((function(e,t){return r({},e,a()({},t.lang,t.name))}),{}),i=e.description||e.content.reduce((function(e,t){return r({},e,a()({},t.lang,t.description))}),{});return angular.isDefinedAndFilled(t(n)||t(i)||p.getName(p.getMediaContentByLang(e),e.override))}(t)&&e.push(t),e}),[])}var I=this,_="widget-media-list-picker-";I.fieldsToDisplay={},I.Media=v,I.init=function(t){_+=I.widget.uuid,y.isCallInProgress("tag-admin")||angular.isDefined(e.get(y._services,"tag-admin"))?I.widgetListCtrl.init(t):y.init(u.TAG_TYPE.MEDIA,"tag-admin",(function(){I.widgetListCtrl.init(t)})),I.fieldsToDisplay=angular.extend(g.getDefaultFieldsToDisplay(),I.fieldsToDisplay)},this.setParentController=function(e){I.widgetListCtrl=e,I.widgetListCtrl.widgetListChildCtrl={initList:O,initProperties:C,onListItemsUpdated:S,onWidgetListClick:T},I.init(!0)}}t.$inject=["$element","$interval","$scope","$timeout","AbstractPicker","Config","Content","Document","Features","Fsitems","Instance","Media","MediaConstant","Tag","Translation","Utils"],angular.module("Widgets").directive("widgetMediaList",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetMediaList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-media-list/views/widget-media-list.html"}}))}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o,s,c,l,u,d,p){var f=this;f.PICKER_ID="widget-media-list-picker-",f.mediaTag=[],f.CustomContentType=a,f.Document=o,f.Instance=c,f.MediaConstant=l,f.Tag=u,f.countSelectedMedia=function(){var e=0,t=p.getCurrent().properties;return angular.isDefinedAndFilled(t.media)&&angular.isArray(t.media)&&(e+=t.media.length),e},f.openMediaPicker=function(){d.waitForAndExecute("#".concat(f.PICKER_ID),r)},f.updateTagsList=function(e){angular.isUndefined(e)&&(e=[c.getCurrentInstanceId()]),u.getMultiInstanceTags(i.TAG_TYPE.MEDIA,e,(function(e){f.mediaTag=e})),f.updateWidget()},f.updateWidget=function(){n((function(){e.$broadcast("widget-media-list-settings",p.getCurrent().uuid)}))},t.$on("abstract-picker__close-end",(function(e,t){t===f.PICKER_ID&&f.updateWidget()})),t.$on("reset-instance-siblings-selector",(function(){var e=p.getCurrent().properties;e.instance=[c.getCurrentInstanceId()],e.displayTags=[]})),function(){var e=p.getCurrent();f.PICKER_ID+=e.uuid;var t=e.properties;angular.isUndefined(t.instance)?t.instance=[c.getCurrentInstanceId()]:f.updateTagsList(t.instance)}()}e.$inject=["$rootScope","$scope","$timeout","AbstractPicker","Config","CustomContentType","Document","Features","Instance","MediaConstant","Tag","Utils","Widget"],angular.module("Controllers").controller("WidgetMediaListSettingsController",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,c){function l(){var l,g=s.getProperty(t.INSTANCE_PROPERTIES.META_SOCIAL_FIELDS);if(d=u.widget.properties.fields,angular.isUndefinedOrEmpty(d)&&(d=[],angular.isDefinedAndFilled(g)&&(angular.isString(g[0])?(d=[],angular.forEach(g,(function(e){("follow"!==e||p)&&d.push({enable:!0,name:e}),"like"!==e&&"comment"!==e||r.getCurrent().type!==a.CONTENT_TYPES.COMMUNITY?"comment"===e&&angular.isUndefinedOrEmpty(c.findWidgetsByType(r.getCurrent().template,a.WIDGET_TYPES.COMMENTS))&&(d[d.length-1].enable=!1):(d[d.length-1].enable=!1,d[d.length-1].ngDisabled=!0)}))):d=angular.copy(g)),u.widget.properties.fields=d),f=o()(d,{name:"follow"}),!f&&p)d.push({enable:!1,name:"follow"});else if(f&&!p)for(var m=0,v=d.length;m<v;m++)if("follow"===d[m].name){d.splice(m,1);break}u.isCommunityContext&&(l=!0,e.isTemplate||"template"===e.type||(l=n.isWriteable(r.getCurrent())),u.showRequestButton=i.hasFeature("advanced_community")&&n.isReadOnly(r.getCurrent())&&!l,u.showFollowButton=i.hasFeature("advanced_community")&&(l||!n.isDescriptionOnly(r.getCurrent())))}var u=this,d={},p=i.hasFeature("social"),f=!1;u.isCommunityContext=r.getCurrent().type===a.CONTENT_TYPES.COMMUNITY,u.showFollowButton=!1,u.showRequestButton=!1,u.Content=r,u.getWidgetClass=function(){var e=[];return u.parentCtrl.getWidgetClass(e),u.isWidgetEmpty()&&e.push("widget--is-empty"),e},u.isWidgetEmpty=function(){return!1},u.isWidgetHidden=function(){return u.parentCtrl.isHidden=!1,!1},this.setParentController=function(e){u.parentCtrl=e,l()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetMetaSocial","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-meta-social/views/widget-meta-social.html"}}n.r(t),n.d(t,"WidgetMetaSocialController",(function(){return r})),n.d(t,"WidgetMetaSocialDirective",(function(){return i}));var a=n(21),o=n.n(a);r.$inject=["$stateParams","Config","Community","Content","Features","InitialSettings","Instance","Widget"],angular.module("Widgets").directive("widgetMetaSocial",i)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,u,d,p,f,g){function m(){v.contentAnalyticsViews=!(!s.getInstance().googleAnalytics||!v.widget.properties.displayAnalyticsViews)&&r.getCurrent().analyticsViewSum}var v=this;v.isNewContent=!1,v.Config=n,v.Content=r,v.CustomContentType=i,v.Metadata=u,v.Translation=d,v.User=p,v.Utils=f,v.getMetadataFunctionalInnerId=function(e){var t,n=u.getMetadataFromKey(e,!1,!0);return angular.isDefinedAndFilled(n.functionalInnerId)&&(t="widget-meta__metadata--".concat(n.functionalInnerId)),t},v.getWidgetClass=function(){var e=[];v.parentCtrl.getWidgetClass(e),v.isWidgetEmpty()&&e.push("widget--is-empty");var t=o()(v.widget.properties.fields,{name:"author"});c()(t,"enable",!1)&&e.push("widget-meta--has-author");var n=o()(v.widget.properties.fields,{name:"social"});return c()(n,"enable",!1)&&e.push("widget-meta--has-social"),e},v.isWidgetEmpty=function(){var e=r.getCurrent(),t=o()(v.widget.properties.fields,(function(t){return!!t.enable&&("tags"===t.name?angular.isDefinedAndFilled(e.customContentTypeTags):"metadata"!==t.name||angular.isDefinedAndFilled(e.metadata))}));return angular.isUndefinedOrEmpty(t)},v.isWidgetHidden=function(){return!v.parentCtrl.designerMode()&&v.isWidgetEmpty()?v.parentCtrl.isHidden=!0:v.parentCtrl.isHidden=!1,v.parentCtrl.isHidden},v.isArray=angular.isArray,e.$on("widget-meta-settings",(function(e,t){v.widget.uuid===t&&m()})),v.init=function(){var e=r.getCurrent();v.isNewContent=angular.isUndefinedOrEmpty(c()(e,"uid",c()(e,"id")));var i=c()(e,"properties.duplicateContent");v.hasComments=angular.isDefinedAndFilled(g.findWidgetsByType(e.template,a.WIDGET_TYPES.COMMENTS)),v.isDuplicated=angular.isDefined(i)&&c()(r.getWriter(i),"id")!==c()(r.getWriter(e),"id"),v.contentPublicationDate=e.publicationDate||new Date,v.isSoscialAdvocacyEnabled=l.isEnabled(),v.communityContext="app.front.community"===t.current.name,m(),function(){if(!angular.isDefinedAndFilled(v.widget.properties.fields)){var e=s.getProperty(n.INSTANCE_PROPERTIES.META_FIELDS);angular.isString(e[0])?(v.widget.properties.fields=[],angular.forEach(e,(function(e){v.widget.properties.fields.push({enable:!0,name:e})}))):v.widget.properties.fields=angular.fastCopy(e)}}()},this.setParentController=function(e){v.parentCtrl=e,v.init()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetMeta","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-meta/views/widget-meta.html"}}n.r(t),n.d(t,"WidgetMetaController",(function(){return r})),n.d(t,"WidgetMetaDirective",(function(){return i}));var a=n(21),o=n.n(a),s=n(4),c=n.n(s);r.$inject=["$scope","$state","Config","Content","CustomContentType","InitialSettings","Instance","SocialAdvocacy","Metadata","Translation","User","Utils","Widget"],angular.module("Widgets").directive("widgetMeta",i)},function(e,t){!function(){"use strict";function e(e,t,n){this.updateWidget=function(){t((function(){e.$broadcast("widget-meta-settings",n.getCurrent().uuid)}))}}e.$inject=["$rootScope","$timeout","Widget"],angular.module("Controllers").controller("WidgetMetaSettingsController",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l){function u(){t.parents(".component-cell").addClass("component-cell--hover-disabled"),l.isDragDisabled(!0),d=angular.element("<div/>",{class:"app-filter"}),d.appendTo(".app-content").bind("click",(function(e){e.stopPropagation(),n.$apply((function(){p.editingContent=!1,d.removeClass("app-filter--is-shown"),r((function(){t.parents(".component-cell").removeClass("component-cell--hover-disabled"),d.remove(),l.isDragDisabled(!1)}),600)}))})),r((function(){p.editingContent=!0,d.addClass("app-filter--is-shown")}))}var d,p=this;p.editingContent=!1,p.Content=a,p.Metadata=o,p.Translation=s,p.Utils=c,p.editContentBasic=function(){"get"===a.getAction()||"basic"!==a.getViewMode()||p.editingContent||u()},p.editContentDefaultOrSimple=function(){var e=a.getViewMode();"get"===a.getAction()||p.editingContent||"default"!==e&&"simple"!==e||u()},p.getMetadataFunctionalInnerId=function(e){var t,n=o.getMetadataFromKey(e,!1,!0);return angular.isDefined(n)&&angular.isDefinedAndFilled(n.functionalInnerId)&&(t="widget-meta__metadata--"+n.functionalInnerId),t},p.getWidgetClass=function(){var e=[];return p.parentCtrl.getWidgetClass(e),e.push("widget-editable"),p.isWidgetEmpty()&&e.push("widget--is-empty"),p.editingContent&&(e.push("widget-metadata--is-editing"),e.push("widget-editable--is-editing")),e},p.isWidgetEmpty=function(){return angular.isUndefinedOrEmpty(p.metadatas)},p.isWidgetHidden=function(){return p.parentCtrl.designerMode()||p.widget.properties.noResults||!angular.isUndefinedOrEmpty(p.metadatas)?p.parentCtrl.isHidden=!1:p.parentCtrl.isHidden=!0,p.parentCtrl.isHidden},function(){p.metadatas=[];var t=a.getCurrent();angular.isDefinedAndFilled(p.widget.properties.metadata)?o.getRefactoredMetadata(!1).then((function(){angular.forEach(p.widget.properties.metadata,(function(e){angular.isDefined(o.getMetadataFromKey(e,!1,!0).key)&&p.metadatas.push(e)})),p.filteredMetadata=e.pick(t.metadata,p.metadatas)})):p.filteredMetadata=e.pick(t.metadata,p.metadatas)}(),this.setParentController=function(e){p.parentCtrl=e}}t.$inject=["$element","$scope","$timeout","$window","Content","Metadata","Translation","Utils","Widget"],angular.module("Widgets").directive("widgetMetadata",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetMetadata","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-metadata/views/widget-metadata.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.Content=e,n.Metadata=t,n.metadata=t.getRefactoredMetadata(!0)}e.$inject=["Content","Metadata"],angular.module("Controllers").controller("WidgetMetadataSettingsController",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o,s,c){function l(){var e;u.community=r.getCurrent(),e=t.identifier||t.postId,angular.isUndefinedOrEmpty(e)||(u.isLoading=!0,a.get(e,(function(t){u.post=t,u.isLoading=!1,i.setAllAsRead(e)}),(function(){u.isLoading=!1})))}var u=this;u.community=void 0,u.post=void 0,u.isLoading=!1,u.fields=s.getConfigProperty(c.INSTANCE_PROPERTIES.POST_FIELDS),u.getBack=function(){e.go("app.front.community",{identifier:void 0,slug:o.translate(u.community.slug),view:n.availableViews.posts.id})},u.isWidgetEmpty=function(){return angular.isUndefinedOrEmpty(u.post)&&!u.isLoading},u.isWidgetHidden=function(){return u.parentCtrl.isHidden=u.isWidgetEmpty()&&!u.parentCtrl.designerMode(),u.parentCtrl.isHidden},this.setParentController=function(e){u.parentCtrl=e,l()}}e.$inject=["$state","$stateParams","Community","Content","Notification","Post","Translation","Utils","Config"],angular.module("Widgets").directive("widgetPostDetails",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetPostDetails","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-post-details/views/widget-post-details.html"}}))}()},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,a,s,l,d,f,m,v,h){function y(){var e=u()(w.widget,"properties");angular.isUndefinedOrEmpty(e)||(angular.isDefinedAndFilled(e.maxNumber)&&!angular.isNumber(e.maxNumber)&&(w.widget.properties.maxNumber=parseInt(e.maxNumber,10)),angular.isDefinedAndFilled(e.community)&&!angular.isArray(e.community)&&(w.widget.properties.community=[e.community.id],w.widget.properties.displayType="pick"),angular.isDefinedAndFilled(e.truncate)&&angular.isUndefinedOrEmpty(e.linesLimit)&&(w.widget.properties.linesLimit=Math.ceil(e.truncate/100),delete w.widget.properties.truncate))}function E(){N={items:{alreadyReported:!0,canShare:!0,content:!0,customer:!0,externalKey:!0,feedKeys:!0,instance:!0,isPinned:!0,liked:!0,likes:!0,parentContentDetails:!0,pinnedInCommunitiesDetails:!0,postStatus:!0,postType:!0,reportStatus:!0,score:!0,tagz:!0,type:!0,uid:!0,updateAt:!0,userVote:!0,version:!0,visibleInCommunitiesCount:!0,visibleInCommunitiesDetails:!0,files:!0,images:!0,links:!0}};var e=w.widget.properties;angular.isDefinedAndFilled(e.fields)?angular.forEach(e.fields,(function(e){if(!angular.isUndefined(e)&&!angular.isUndefinedOrEmpty(e.name)&&e.enable){var t=e.name.toLowerCase();switch(t){case"comments":N.items.authorDetails=!0,N.items.comments=!0,N.items.relevantCommentDetails=!0;break;case"content":N.items.mentionsDetails=!0,N.items.mentionsFeedKeys=!0;break;case"dates":N.items.eventStartDate=!0,N.items.eventEndDate=!0;break;case"metadata":N.items.authorDetails=!0,N.items.comments=!0,N.items.isMerged=!0,N.items.liked=!0,N.items.likes=!0,N.items.merge={masterPost:!0,slavesPosts:!0},N.items.postStatusDetails=!0,N.items.tagsDetails=!0,N.items.publicationDate=!0,N.items.relevantComment=!0;break;case"title":N.items.title=!0}}})):(N.items.authorDetails=!0,N.items.comments=!0,N.items.content=!0,N.items.eventEndDate=!0,N.items.eventStartDate=!0,N.items.files=!0,N.items.images=!0,N.items.links=!0,N.items.mentionsDetails=!0,N.items.mentionsFeedKeys=!0,N.items.postType=!0,N.items.publicationDate=!0,N.items.relevantComment=!0,N.items.relevantCommentDetails=!0,N.items.tagsDetails=!0,N.items.title=!0)}function b(){w.widget.properties=w.widget.properties||{};var t=w.widget.properties;t.community=t.community||[],t.communityTags=t.communityTags||[],t.displayType=t.displayType||"list","list"===t.displayType&&(t.tabsEnabled=!1),t.tabsEnabled&&(t.community.length<2&&t.communityTags.length>1?(t.tabsType="tags",I=t.tabsType):t.communityTags.length<2&&t.community.length>1&&(t.tabsType="communities",I=t.tabsType)),angular.isUndefinedOrEmpty(t.viewMode)&&(t.viewMode="list"),angular.isUndefinedOrEmpty(t.viewModeVariant)&&(t.viewModeVariant="group"),angular.isUndefinedOrEmpty(t.itemsSeparator)&&(t.itemsSeparator=!0);var n=t.instance||[];l.getSiblings().then((function(e){e.length>1&&n.length>1||t.isAllInstancesSiblings?t.isInstanceNameDisplayed=!angular.isDefined(t.isInstanceNameDisplayed)||t.isInstanceNameDisplayed:t.isInstanceNameDisplayed=!1,t.instance=angular.isDefinedAndFilled(n)?n:[l.getCurrentInstanceId()]}));var i=l.getProperty(r.INSTANCE_PROPERTIES.POST_FIELDS),a=!1;if(angular.isUndefinedOrEmpty(t.fields))t.fields=[],a=!0;else if(i.find((function(e){return"sharedInCommunities"===e}))){var o=e.find(t.fields,{name:"sharedInCommunities"});o||t.fields.push({name:"sharedInCommunities",enable:!0})}angular.forEach(i,(function(e){angular.isString(e)&&(e={enable:!!("attachments"!==e&&"comments"!==e||w.isCommunityContext)&&a,name:e});var n=c()(t.fields,{name:e.name});(a||angular.isUndefinedOrEmpty(n))&&t.fields.push(e)}));var s="current"===t.displayType,u=t.pinnedOnly||t.withAttachmentOnly||t.postType&&t.postType.length>0;s&&!u||(t.isContributionFieldDisplayed=!1)}function O(e){var t=arguments,n=w.widget.properties||{};if(A=u()(n,"pinnedOnly"),"pick"===n.displayType&&angular.isUndefinedOrEmpty(n.community))w.widgetListCtrl.updateListItems();else{var r,a;E();var o=i.getCurrent(),s=n.displayType||"list";"current"===s&&"community"===o.type?r=angular.isDefinedAndFilled(o.uid)?[o.uid]:[]:(r="pick"===s&&n.community||[],a="pick"===s&&n.communityTags||[]),n.tabsEnabled&&angular.isDefinedAndFilled(I)&&angular.isDefined(w.widgetListCtrl.tabSelected)&&"all"!==w.widgetListCtrl.tabSelected.uid&&("communities"===I?r=[w.widgetListCtrl.tabSelected.uid]:a=[w.widgetListCtrl.tabSelected.uid]);var c,p={contentId:r,followingOnly:Boolean(n.followingOnly),hasAttachments:!!n.withAttachmentOnly||void 0,ignore403:!0,isPinned:A||void 0,tags:a};if("list"===s?u()(n,"isAllInstancesSiblings",!1)?(p.instanceId=void 0,p.currentInstance=l.getCurrentInstanceId()):angular.isDefinedAndFilled(e.instance)?p.instanceId=e.instance:angular.isDefinedAndFilled(n.instance)?p.instanceId=n.instance:p.instanceId=[l.getCurrentInstanceId()]:p.instanceId=void 0,angular.isNumber(n.maxNumber)&&(p.maxResults=n.maxNumber),w.isCommunityContext&&angular.isUndefinedOrEmpty(p.maxResults)&&(p.maxResults=10),angular.isDefined(n.listOrderDir)&&(c="asc"===n.listOrderDir.toLowerCase()?"":"-"),angular.isDefinedAndFilled(n.listOrder)?("createdAt"===n.listOrder&&(n.listOrder="publicationDate"),"publicationDate"===n.listOrder?p.sortOrder=["".concat(angular.isDefined(c)?c:"-","lastSharedAt")]:"updatedAt"===n.listOrder?p.sortOrder=["".concat(angular.isDefined(c)?c:"-","lastUpdatedOrSharedAt")]:p.sortOrder=["".concat(angular.isDefined(c)?c:"").concat(n.listOrder)]):p.sortOrder=["".concat(angular.isDefined(c)?c:"-","lastSharedAt")],angular.isDefinedAndFilled(e)){var m=d.getRelatedStatusFlags(u()(e,"isMerged.value")),v=!0===e.reportStatus?d.REPORT_STATUSES.REPORTED:void 0;angular.extend(p,{author:u()(e.author,"email"),hasRelevant:u()(e.hasRelevant,"value"),isMergePending:m[1],isMerged:m[0],postStatus:g()(e.postStatus,"uid"),postType:e.postType,query:e.query,reportStatus:v,tags:g()(e.communityTags,"uid")})}if(angular.isDefinedAndFilled(n.postType)&&angular.isUndefinedOrEmpty(p.postType)&&(p.postType=n.postType),"current"===s&&angular.isUndefinedOrEmpty(p.contentId))w.widgetListCtrl.updateListItems();else{if(_){var h=moment.utc().format("YYYY-MM-DDTHH:mm:ss.SS");switch(n.eventFilter){case f.EVENT_FILTERS.PAST_EVENTS:p.eventEndBefore=h;break;case f.EVENT_FILTERS.ONGOING_EVENTS:p.eventStartBefore=h,p.eventEndAfter=h;break;case f.EVENT_FILTERS.FUTURE_EVENTS:p.eventStartAfter=h}}d.filterize(p,(function(){w.widgetListCtrl.updateListItems.apply(null,t)}),w.widgetListCtrl.updateListItems,w.widgetListCtrl.getListKey(),N)}}}function C(){var e=w.widget.properties;if(e.tabsEnabled){var t=w.widgetListCtrl.getListKey();if("tags"===e.tabsType&&angular.isDefined(e.communityTags)&&e.communityTags.length>1){var r={ids:e.communityTags,instance:l.getCurrentInstanceId(),kind:"community"};if(I===e.tabsType&&angular.equals(g()(w.widgetListCtrl.tabs.items,"uid"),e.communityTags))return void w.widgetListCtrl.selectTab(e.allTabEnabled?void 0:u()(w.widgetListCtrl.tabs.items,"[0]"),!0);h.empty(w.widgetListCtrl.tabs.items),I=e.tabsType,m.filterize(r,(function(){var n,r=m.getList(void 0,void 0,t);angular.isUndefinedOrEmpty(r)||(angular.forEach(e.communityTags,(function(e){var t=c()(r,{uid:e});w.widgetListCtrl.tabs.items.push({name:v.translate(t.name),uid:t.uid}),angular.isUndefined(n)&&(n=angular.fastCopy(p()(w.widgetListCtrl.tabs.items)))})),w.widgetListCtrl.selectTab(e.allTabEnabled?void 0:n,!0))}),void 0,t,P)}else if("communities"===e.tabsType&&angular.isDefined(e.community)&&e.community.length>1){var i={followingOnly:Boolean(e.followingOnly),ids:e.community};if(I===e.tabsType&&angular.equals(g()(w.widgetListCtrl.tabs.items,"uid"),e.community))return void w.widgetListCtrl.selectTab(e.allTabEnabled?void 0:u()(w.widgetListCtrl.tabs.items,"[0]"),!0);h.empty(w.widgetListCtrl.tabs.items),I=e.tabsType,n.filterize(i,(function(){var r,i=n.displayList(t);angular.isUndefinedOrEmpty(i)||(angular.forEach(i,(function(e){!angular.isUndefinedOrEmpty(e)&&v.hasTranslations(e.title)&&(w.widgetListCtrl.tabs.items.push({name:v.translate(e.title),uid:e.uid}),angular.isUndefined(r)&&(r=angular.fastCopy(p()(w.widgetListCtrl.tabs.items))))})),w.widgetListCtrl.selectTab(e.allTabEnabled?void 0:r,!0))}),void 0,t,D)}else I=void 0}}function T(){w.widget.properties.displayType===w.widgetListCtrl.SELECTION_TYPES.pick&&"basic"===i.getViewMode()&&"get"!==i.getAction()&&h.waitForAndExecute("#".concat(L),a)}function S(){var e=w.widget.properties;return angular.isDefined(e.communityTags)&&e.communityTags.length>1||angular.isDefined(e.community)&&e.community.length>1}var I,_,A,w=this,D={items:{title:!0,uid:!0}},L="widget-cp-list-settings-content-picker-",P={items:{name:!0,uid:!0},kind:!0},N=[];w.tabs={all:v.translate("ALL"),items:[]},w.isCommunityContext=i.getCurrent().type===s.CONTENT_TYPES.COMMUNITY,w.Post=d,w.Utils=h,t.$on("community__post-deleted",(function(e,t){w.isCommunityContext&&!A||(h.reject(w.widgetListCtrl.items,{uid:t}),w.widgetListCtrl.updateListItems())})),t.$on("community__post-moved",(function(e,t){w.isCommunityContext&&A&&(h.reject(w.widgetListCtrl.items,{uid:t.uid}),w.widgetListCtrl.updateListItems())})),t.$on("refresh-posts",(function(e,t,n){w.widgetListCtrl.getListKey()===t&&(n?w.widgetListCtrl.init(!1):w.widgetListCtrl.updateListItems())})),t.$on("widget-post-list-settings-update-selected-types",(function(e,t){w.widget.uuid===t&&w.init()})),w.init=function(e){e&&(L+=w.widget.uuid);var t=i.getCurrent(),n=w.widget.properties||{};A=u()(n,"pinnedOnly"),"current"===n.displayType&&"community"===t.type&&A&&w.widgetListCtrl.widgetCtrl.setListKey("community-pinned-".concat(t.uid||"","-").concat(w.widget.uuid)),function(){var e=w.widget.properties;_=o()(e.postType,[s.POST_TYPES.EVENT]),_||!angular.isUndefinedOrEmpty([e.listOrder,e.listOrderDir],"every")&&!u()(e,"listOrder","").startsWith("event")||(e.listOrder="publicationDate",e.listOrderDir="desc")}(),angular.isUndefinedOrEmpty(n.eventFilter)&&(n.eventFilter=f.EVENT_FILTERS.ALL_EVENTS),w.widgetListCtrl.init(e)},this.setParentController=function(e){w.widgetListCtrl=e,w.isCommunityContext&&w.widgetListCtrl.widget.isMainWidget&&w.widgetListCtrl.setListKey("community-".concat(i.getCurrent().uid)),w.widgetListCtrl.widgetListChildCtrl={computeTabsNames:C,handleBackwardCompatibility:y,initList:O,initProperties:b,onWidgetListClick:T,shouldDisplayListTabs:S},w.init(!0)},this.isLoading=function(){return w.widgetListCtrl.service.isCallInProgress(w.widgetListCtrl.getListKey())}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["lsWidgetPostList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-post-list/views/widget-post-list.html"}}n.d(t,"WidgetPostListDirective",(function(){return i}));var a=n(85),o=n.n(a),s=n(21),c=n.n(s),l=n(4),u=n.n(l),d=n(142),p=n.n(d),f=n(28),g=n.n(f);r.$inject=["$scope","Community","Config","Content","ContentPicker","InitialSettings","Instance","Post","PostConstant","Tag","Translation","Utils"],angular.module("Widgets").directive("lsWidgetPostList",i)}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v,y,O,C,T,S){function I(){D.isOnlyEventTypeSelected=f()(S.getCurrent().properties.postType,[v.POST_TYPES.EVENT]),D.listOrderSelection=angular.fastCopy(P),D.isOnlyEventTypeSelected&&(D.listOrderSelection=E()(P,L).concat(N))}function _(){n((function(){e.$broadcast("widget-post-list-settings",S.getCurrent().uuid)}))}var A,w,D=this,L="score.total",P=["publicationDate","likes","comments","updatedAt",L],N=["eventStartDate","eventEndDate"];D.PICKER_TITLE_KEY="GLOBAL.COMMUNITY",D.availablePostTypes=h()(v.POST_TYPES),D.community=[],D.content=void 0,D.contentPickerId="widget-cp-list-settings-content-picker-",D.listKey=void 0,D.showFilters=!1,D.tags={},D.Community=r,D.Config=i,D.Content=o,D.CustomContentType=p,D.Instance=y,D.PostConstant=O,D.Utils=T,D.debouncedUpdateWidget=a()(_,500),D.isUndefinedOrEmpty=angular.isUndefinedOrEmpty,D.modelToSelection=function(e,t){t=t||angular.noop,angular.forEach(Object.keys(D.tags),(function(n){var r=s()(D.tags[n],(function(t){return t.uid===e}));angular.isDefined(r)&&t(r)}))},D.openContentPicker=function(){T.waitForAndExecute("#".concat(D.contentPickerId),c)},D.setAsMainWidget=function(){var t=S.getCurrent();if(t.isMainWidget){var n=u.getElementList(o.getCurrent(),"widget","isMainWidget",!0);angular.forEach(n,(function(e){e.uuid!==t.uuid&&(e.isMainWidget=!1)}))}e.$broadcast("widget-is-main-toggled",t.uuid,t.isMainWidget)},D.switchViewMode=function(e){S.getCurrent().properties.viewMode!==e&&(S.getCurrent().properties.viewMode=e,"cascade"===S.getCurrent().properties.viewMode?S.getCurrent().properties.viewModeVariant="ungroup":S.getCurrent().properties.viewModeVariant="group",D.updateWidget())},D.switchViewModeVariant=function(e){S.getCurrent().properties.viewModeVariant!==e&&(S.getCurrent().properties.viewModeVariant=e,D.updateWidget())},D.toggleField=function(e){angular.isUndefined(e)||angular.isUndefinedOrEmpty(e.name)||(e.enable=!e.enable,D.updateWidget(!0))},D.toggleInstanceNameOption=function(){var e=S.getCurrent(),t=e.properties;t.isInstanceNameDisplayed=!t.isInstanceNameDisplayed,D.updateWidget()},D.updateTags=function(e){var t,n,r;e=!!angular.isUndefined(e)||e,t=D.community,n={},angular.forEach(t,(function(e){angular.isDefinedAndFilled(e.tagsDetails)&&(n[C.translate(e.title)]=e.tagsDetails)})),D.tags=n,r=S.getCurrent(),r.properties.communityTags=d()(l()(m()(D.community,"tags")),r.properties.communityTags),e&&D.updateWidget()},D.updateInstanceNameProperty=function(){var e=S.getCurrent().properties||{};e.isAllInstancesSiblings&&(e.isInstanceNameDisplayed=!0),D.updateWidget()},D.updatePostType=function(){var t=S.getCurrent().properties||{};t.postType&&t.postType.length>0&&(t.isContributionFieldDisplayed=!1),D.updateWidget(),n((function(){I(),e.$broadcast("widget-post-list-settings-update-selected-types",S.getCurrent().uuid)}))},D.updateDisplayType=function(){var e=S.getCurrent().properties||{};"current"!==e.displayType&&(e.isContributionFieldDisplayed=!1),D.updateWidget()},D.updateFilters=function(){var e=S.getCurrent().properties||{};(e.pinnedOnly||e.withAttachmentOnly)&&(e.isContributionFieldDisplayed=!1),D.updateWidget()},D.updateWidget=_,D.isContributionFieldEnabled=function(){var e="community"===D.content.type;return"#contribution-field"===window.location.hash&&e},D.isPostListFiltered=function(){var e=S.getCurrent().properties||{},t=e.pinnedOnly||e.withAttachmentOnly||e.postType.length>0,n="current"===e.displayType;return t||!n},t.$on("content-picker__close-start",(function(){S.getCurrent().properties.community=m()(D.community,"id"),D.updateTags()})),A=S.getCurrent(),w="widget-".concat(A.uuid,"-"),D.content=o.getCurrent(),A.properties=A.properties||{},D.contentPickerId+=A.uuid,D.listKey=angular.isDefined(D.content.id)?w+D.content.id:w+Object(b.b)(),D.showFilters=g.hasFeature("social"),function(){var e=S.getCurrent()||{};e.properties=e.properties||{};var t=e.properties;angular.isDefined(t.community)&&!angular.isArray(t.community)?(t.community=t.community.id,D.community=[t.community]):t.community=t.community||[],"createdAt"===t.listOrder&&(t.listOrder="publicationDate")}(),function(){var e=S.getCurrent(),t=e.properties.community;if(angular.isDefinedAndFilled(t)){var n={ids:t,queryType:"getContentByIds",status:[i.CONTENT_STATUS.LIVE.value]};r.filterize(n,(function(e){D.community=e,D.updateTags(!1)}),void 0,D.listKey)}}(),I()}n.r(t),n.d(t,"WidgetPostListSettingsController",(function(){return r}));var i=n(71),a=n.n(i),o=n(21),s=n.n(o),c=n(260),l=n.n(c),u=n(157),d=n.n(u),p=n(85),f=n.n(p),g=n(28),m=n.n(g),v=n(99),h=n.n(v),y=n(106),E=n.n(y),b=n(35);r.$inject=["$rootScope","$scope","$timeout","Community","Config","Content","ContentPicker","ContentTemplate","CustomContentType","Features","InitialSettings","Instance","PostConstant","Translation","Utils","Widget"],angular.module("Controllers").controller("WidgetPostListSettingsController",r)},function(e,t){!function(){"use strict";angular.module("Widgets").directive("widgetProcessMaker",(function(){return{bindToController:!0,controller:"WidgetIframeController",controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetProcessMaker","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-process-maker/views/widget-process-maker.html"}}))}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){function a(){!function(){var e=i.getCurrent();e.properties=e.properties||{};var t=e.properties;if(t.serverIP=t.serverIP.replace(/^(http:\/\/|https:\/\/)/,""),angular.isUndefinedOrEmpty([t.serverIP,t.workspace,t.language,t.skin,t.view],"some"))return t.url={},void(t.embedUrl=void 0);var n="https://"+t.serverIP+"/sys"+t.workspace+"/"+t.language+"/"+t.skin+"/bpm3PluginLumApps/index.php/material/"+t.view.value;t.url={},t.url[r.inputLanguage]=n,t.embedUrl=n}(),n((function(){t.$broadcast("widget-iframe-settings",i.getCurrent().uuid)}))}var o=this;o.form={},o.listViews=[{name:"FRONT.PROCESS_MAKER.VIEW.INBOX",value:"cases/inbox"},{name:"FRONT.PROCESS_MAKER.VIEW.START_CASE",value:"process/start"}],o.updateWidget=a,o.debouncedUpdateWidget=e.debounce(a,500),function(){var e=i.getCurrent();e.properties=e.properties||{};var t=e.properties;angular.extend(t,{language:t.language||"en",skin:t.skin||"neoclassic",workspace:t.workspace||"workflow"})}()}t.$inject=["$rootScope","$timeout","Translation","Widget"],angular.module("Controllers").controller("WidgetProcessMakerSettingsController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o){var s=this;s.Content=n,s.init=function(){s.widget.widgetType="remote";var e=s.widget,n=e.id,c=e.enabled,l=e.properties,d=e.components;if(l.remoteExtension&&l.remoteExtension.bundleName){var f=l.remoteExtension,m=f.isActivated,v=f.extensionComponents,h=f.bundleName;l.remoteExtension={components:v||l.remoteExtension.components,id:h,bundleName:h,isActivated:m,enabled:m}}n&&d&&(l.remoteExtension={components:d,id:n,enabled:c});var y=l.remoteExtension;if(a.hasFeature("platform-extensions")&&n){var E=p()(o.getExtensionWidgets(),{id:s.widget.properties.remoteExtension&&s.widget.properties.remoteExtension.id});0===o.getBetaExtensionWidgets().length&&t.initBetaExtensions();var b=p()(o.getBetaExtensionWidgets(),(function(e){return e.id===l.remoteExtension.id}));E?(s.widget.properties.remoteExtension.enabled=E.enabled,s.widget.globalProperties=i({},E.settings.global,{},E.settings.internal)):b&&(s.widget.properties.remoteExtension.enabled=b.enabled,s.widget.globalProperties=b.properties)}else if(a.hasFeature("platform-extensions")&&l.remoteExtension.bundleName){g()(s.widget.properties.remoteExtension.bundleName,"?uid")&&(y.bundleName=y.bundleName.substring(0,y.bundleName.indexOf("?")),y.id=y.bundleName),0===o.getBetaExtensionWidgets().length&&t.initBetaExtensions();var O=p()(u()(JSON.parse(r.getCustomer().properties.remoteComponentServerComponents),{bundleName:s.widget.properties.remoteExtension.bundleName})),C=p()(o.getBetaExtensionWidgets(),(function(e){return e.extensionOldId===l.remoteExtension.bundleName}));C&&(s.widget.properties.remoteExtension.id=C.id,s.widget.globalProperties=C.properties),O&&(s.widget.properties.remoteExtension.enabled=O.isActivated)}else y.needMaintenance||(s.widget.properties.remoteExtension=i({},y,{enabled:!1,id:s.widget.id}))},s.setParentController=function(e){s.parentCtrl=e,s.init()},e.$on("widget-remote-settings",(function(e,t){(s.widget.uuid===t||angular.isUndefinedOrEmpty(t))&&s.init()}))}function o(){return{bindToController:!0,controller:a,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetRemote","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-remote/views/widget-remote.html"}}n.r(t),n.d(t,"WidgetRemoteController",(function(){return a})),n.d(t,"WidgetRemoteDirective",(function(){return o}));var s=n(3),c=n.n(s),l=n(75),u=n.n(l),d=n(21),p=n.n(d),f=n(17),g=n.n(f);a.$inject=["$scope","ExtensionWidget","Content","Customer","Features","Widget"],angular.module("Widgets").directive("widgetRemote",o)},function(e,t,n){"use strict";function r(e,t,n,r,i){var o,s,c,l,u,d=this;d.Customer=n,d.Utils=r,d.Widget=i,d.hasSettings=function(){var e=i.getCurrent(),t=e.properties.remoteExtension;return angular.isDefinedAndFilled(t)&&(angular.isDefinedAndFilled(a()(t.components,{type:"settings"}))||angular.isDefinedAndFilled(a()(t.components,{type:"WidgetSettings"})))},d.updateWidget=function(n){var r=i.getCurrent();r.properties=n,t((function(){e.$broadcast("widget-remote-settings",r.uuid)}))},o=i.getCurrent(),s=o.id,c=o.enabled,l=o.properties,u=o.components,s&&u&&(l.remoteExtension={components:u,id:s,enabled:c})}n.r(t),n.d(t,"WidgetRemoteSettingsController",(function(){return r}));var i=n(21),a=n.n(i);r.$inject=["$rootScope","$timeout","Customer","Utils","Widget"],angular.module("Controllers").controller("WidgetRemoteSettingsController",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/content/rss/:methodKey",{},{getRssContent:{isArray:!1,method:"GET",params:{methodKey:"get"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("RssFactory",e)}()},function(e,t,n){"use strict";function r(e,t){function n(e){if(!angular.isUndefinedOrEmpty(e)){var t={summary:l()(e.summary)||l()(e.description),title:l()(e.title)};if(angular.isDefinedAndFilled(e.link)&&(t.link=e.link),angular.isDefinedAndFilled(e.published_parsed)){var n=e.published_parsed;t.date=Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5])}return angular.forEach(e.links,(function(e){"enclosure"===e.rel&&angular.isDefinedAndFilled(e.type)&&s()(e.type,"image")&&(t.image=e.href)})),t}}var r={};this.getFeed=function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return angular.isUndefinedOrEmpty(i)?e.reject():(a()(r,[i,o])||(r[i]=r[i]||{},r[i][o]=e((function(e){t.getRssContent({url:i},(function(t){var r=[];angular.isDefinedAndFilled(t.entries)&&(r=angular.fromJson(t.entries).slice(0,o));var i=r.map(n);e(i)}))}))),r[i][o])}}n.r(t),n.d(t,"RssService",(function(){return r}));var i=n(4),a=n.n(i),o=n(17),s=n.n(o),c=n(688),l=n.n(c);r.$inject=["$q","RssFactory"],angular.module("Services").service("Rss",r)},function(e,t,n){"use strict";function r(){var e=this;e.init=function(){e.widget.properties.maxItems=o()(e.widget,"properties.maxItems",5)},e.setParentController=function(t){e.parentCtrl=t,e.init()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetRss","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-rss/views/widget-rss.html"}}n.r(t),n.d(t,"WidgetRssDirective",(function(){return i}));var a=n(4),o=n.n(a);angular.module("Widgets").directive("widgetRss",i)},function(e,t){!function(){"use strict";angular.module("Services").service("Share",(function(){this.getShareIcon=function(e){return"mdi-"+e+("email"===e?"":"-box")}}))}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){var r,i,a=this,o=t.absUrl(),s=["google-plus","facebook","twitter","linkedin","viadeo","email"];a.Share=n,a.getShareLink=function(e){var t;switch(e){case"email":t="mailto:?body=";break;case"facebook":t="https://www.facebook.com/sharer/sharer.php?u=";break;case"google-plus":t="https://plus.google.com/share?url=";break;case"linkedin":t="https://www.linkedin.com/shareArticle?mini=true&url=";break;case"twitter":t="https://twitter.com/home?status=";break;case"viadeo":t="http://www.viadeo.com/shareit/share/?url="}if(angular.isDefinedAndFilled(t))return t+o},a.getWidgetClass=function(){var e=[];return a.parentCtrl.getWidgetClass(e),e},a.isWidgetEmpty=function(){return!1},a.isWidgetHidden=function(){return a.parentCtrl.isHidden=!1,a.parentCtrl.isHidden},angular.isUndefined(a.widget.properties.shareOn)&&(a.widget.properties.shareOn=[]),r=e.map(a.widget.properties.shareOn,"id"),i=e.difference(s,r),angular.forEach(i,(function(e){a.widget.properties.shareOn.push({enable:!0,id:e})})),this.setParentController=function(e){a.parentCtrl=e}}t.$inject=["$location","Share"],angular.module("Widgets").directive("widgetShare",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetShare","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-share/views/widget-share.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/onedrive/site/:methodKey"),{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}n.r(t),n.d(t,"SharepointSiteFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("SharepointSiteFactory",r)},function(e,t,n){"use strict";function r(e,t){var n=e.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"});return n}n.r(t),n.d(t,"SharepointSiteService",(function(){return r})),r.$inject=["LumsitesBaseService","SharepointSiteFactory"],angular.module("Services").service("SharepointSite",r)},function(e,t,n){"use strict";function r(e,t,n,r,i){function o(){return o=s()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!angular.isUndefined(t)&&!angular.isUndefinedOrEmpty(t.name)){e.next=2;break}return e.abrupt("return");case 2:return t.enable=!t.enable,e.next=5,d.updateWidget(!0);case 5:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function c(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&n((function(){e.$broadcast("widget-site-list-settings",r.getCurrent().uuid)}))}function u(){return u=s()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.updateWidget(!1);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}var d=this;d.debouncedUpdateWidget=l()(c,i.DEBOUNCE_DELAY),d.toggleField=function(e){return o.apply(this,arguments)},d.updateWidget=c,t.$on("inputLanguage",s()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.updateWidget(!1);case 2:case"end":return e.stop()}}),e)})))),function(){u.apply(this,arguments)}()}n.r(t),n.d(t,"WidgetSharepointSiteListSettingsController",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(71),l=n.n(c);r.$inject=["$rootScope","$scope","$timeout","Widget","WidgetSettingsConstant"],angular.module("Controllers").controller("WidgetSharepointSiteListSettingsController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,m,h){function y(){return g()(w.widget,"properties")}function E(){w.is.loading.sites=!0;var e=y();return l.promiseFilterize({maxResults:e.maxNumber,search:w.searchQuery,onlyFavorites:e.onlyFavorites},w.widgetListCtrl.getListKey()).then((function(){w.widgetListCtrl.updateListItems()})).finally((function(){t((function(){w.is.loading.sites=!1}))}))}function b(){l.initList(w.widgetListCtrl.getListKey(),void 0,[],!0)}function O(){var e=y();w.sharepointSiteBlockClasses=[];var t=g()(e,"style.content.theme");w.sharepointSiteBlockClasses.push("sharepoint-site-block--theme-".concat(t)),e.itemsSeparator&&w.sharepointSiteBlockClasses.push("sharepoint-site-block--has-separator")}function C(){var e=y();w.blockStyle={};var t=e.itemsMargin;return angular.isDefinedAndFilled(t)&&(w.blockStyle.marginBottom="".concat(t,"px")),w.blockStyle}function T(){var e=y();w.lxColorTheme="dark"===g()(e,"style.content.theme")?"white":"grey"}function S(){return w.widgetListCtrl.initialized||b(),E()}function I(){var e=y(),t="style.content.theme",n=g()(e,t,"light");if(v()(e,t,n),e.viewMode="vertical",e.listOrder=e.listOrder||"name",e.listOrderDir=e.listOrderDir||h.ORDER_DIRECTION.ASCENDING,angular.isUndefinedOrEmpty(e.itemsSeparator)&&(e.itemsSeparator=!0),angular.isString(e.maxNumber)){var i=parseInt(e.maxNumber,10);e.maxNumber=angular.isNumber(i)?i:10}e.maxNumber=e.maxNumber||10,function(){var e=y(),t=s.getProperty(r.INSTANCE_PROPERTIES.SHAREPOINT_SITE_FIELDS),n=!1;angular.isUndefinedOrEmpty(e.fields)&&(e.fields=[],n=!0),angular.forEach(t,(function(t){angular.isString(t)&&(t={enable:n,name:t});var r=p()(e.fields,{name:t.name});(n||angular.isUndefinedOrEmpty(r))&&e.fields.push(t)}))}(),function(){var e=y();w.fieldsToDisplay={},angular.forEach(e.fields,(function(e){w.fieldsToDisplay[e.name]=e.enable})),w.fieldsToDisplay}(),C(),O(),T()}function _(){return!1}function A(){return b(),E()}var w=this;w.fieldsToDisplay={},w.is={loading:{sites:!1}},w.searchQuery="",w.SharepointSite=l,w.Utils=f,w.debouncedSearchSite=u()(E,h.DEBOUNCE_DELAY),w.onStatusChange=function(t){e.$apply((function(){w.is.loading.sites="PENDING"===t.status}))},w.openSiteInExternalTab=function(e){var t=e.webUrl;n.open(decodeURIComponent(t),"_blank")},w.reloadContent=A,e.$on("widget-site-list-settings",function(){var e=c()(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.getCurrent().uuid===n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.$watch("vm.widget.properties.style.content.theme",(function(){O(),T()})),e.$watch("vm.widget.properties.itemsSeparator",(function(){O()})),e.$watch("vm.widget.properties.itemsMargin",(function(){C()})),w.init=function(e){w.widgetListCtrl.init(e)},this.setParentController=function(e){w.widgetListCtrl=e,w.widgetListCtrl.widgetListChildCtrl={initList:S,initProperties:I,isWidgetEmpty:_},w.init(!0)}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetSharepointSiteList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-sharepoint-site-list/views/widget-sharepoint-site-list.html"}}n.r(t),n.d(t,"WidgetSharepointSiteListDirective",(function(){return i}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(71),u=n.n(l),d=n(21),p=n.n(d),f=n(4),g=n.n(f),m=n(7),v=n.n(m);r.$inject=["$scope","$timeout","$window","Config","Content","InitialSettings","Instance","SharepointSite","Translation","Utils","Widget","WidgetSettingsConstant"];angular.module("Widgets").directive("widgetSharepointSiteList",i)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,v,h,y,E,b,O){function C(){T.choiceMapping={},angular.forEach(T.question.choices,(function(n,r){var i,a,o=u()(T.widget,"properties.stats.count",0),s=(i=n.identifier,a=u()(T.widget,"properties.stats.answers"),angular.isUndefinedOrEmpty(a)?0:(!0===a[i]&&(a[i]=1),parseInt(a[i],10)||0)),c=s&&o?s/o:0,l=e("number")(100*c,2).replace(new RegExp(O.escapeRegexp(t.NUMBER_FORMATS.DECIMAL_SEP),"g"),".");T.choiceMapping[n.identifier]={participants:s,participationPercent:l,text:n.value};var d=O.getItemColor(r,S);w.push(l),A.push(h.translate(n.value)),I.push(d),_.push(Object(m.c)(d,.75))}))}var T=this,S=a.REPORT_COLORS?a.REPORT_COLORS:o()(a.COLORS,["#FFFFFF","#000000"]),I=[],_=[],A=[],w=[];T.CHART_BAR_SCALES=[0,20,40,60,80,100],T.CHART_TYPES={bar:"bar",doughnut:"doughnut"},T.DIALOG_ID="widget-standalone-question__report--".concat(T.widget.uuid),T.answer={},T.choiceMapping={},T.isAsync=!1,T.isSaving=!1,T.lastComputationDate=void 0,T.question=void 0,T.reportChartType=T.CHART_TYPES.doughnut,T.userAnswered=!1,T.Translation=h,T.UserAccess=E,T.animateBarChart=function(){r((function(){var e=angular.element("#".concat(T.DIALOG_ID)).find(".widget-standalone-question-chart-bar__bar--init");e.removeClass("widget-standalone-question-chart-bar__bar--init")}),100)},T.displayReport=function(){T.updateAnswer=!0},T.getBarStyle=function(e,t){var n=u()(T.choiceMapping,"[".concat(t,"].participationPercent"),0);return{"background-color":O.getItemColor(e,S),height:"".concat(200*n/100,"px"),"margin-top":"".concat(200*(100-n)/100,"px")}},T.getLegendColor=function(e){return{"background-color":O.getItemColor(e,S)}},T.getWidgetClass=function(){var e=[];return T.parentCtrl.getWidgetClass(e),T.isWidgetEmpty()&&e.push("widget--is-empty"),T.userAnswered&&e.push("widget-standalone-question--answered"),e},T.isWidgetEmpty=function(){var e=T.widget.properties.questionSettings;if(angular.isUndefinedOrEmpty(e))return!0;var t=angular.isUndefinedOrEmpty(T.parentCtrl.getWidgetTranslation(e.title))||""===T.parentCtrl.getWidgetTranslation(e.title);if(t)return!0;var n=u()(e,"choices",[]);return c()(n,(function(e){return angular.isUndefinedOrEmpty(T.parentCtrl.getWidgetTranslation(e.value))}))},T.isWidgetHidden=function(){return T.parentCtrl.isHidden=!T.parentCtrl.designerMode()&&T.isWidgetEmpty(),T.parentCtrl.isHidden||!T.UserAccess.canManageInstanceSettings&&!T.widget.properties.isOpen},T.openReport=function(){O.waitForAndExecute("#".concat(T.DIALOG_ID))},T.submitAnswer=function(){if(T.question.isMultiple?g()(T.answer.value,(function(e){return!0===e})):angular.isDefinedAndFilled(T.answer.value)){var e=l.getCurrent();T.isSaving=!0;var t={isMultiple:T.question.isMultiple,type:T.question.getType(),value:T.answer.value};b.updateUserContentWidget(e,T.widget.uuid,{answer:t}),b.save({content:e.id,user:y.getConnected().uid,values:angular.copy(e.userContent.values)},(function(t){f.success(h.translate("WIDGET_TYPE_STANDALONE-QUESTION_ANSWER_SUCCESS")),T.isSaving=!1;var n,r,i=(n=t,r=T.widget.uuid,g()(u()(n,"values.widgets"),(function(e){return e.uuid===r})));if(p()(i,"answer")&&!T.isAsync){if(T.userAnswered){if("community"===e.type)return void s.get({uid:e.id},(function(t){var n=g()(t.templates,{functionalInnerId:e.template.functionalInnerId});t.template=n;var r=d.getElement(t,"widget","uuid",T.widget.uuid);T.widget.properties.stats=u()(r,"properties.stats",T.widget.properties.stats),T.init()}),O.displayServerError);l.get({uid:e.id},(function(e){var t=d.getElement(e,"widget","uuid",T.widget.uuid);T.widget.properties.stats=u()(t,"properties.stats",T.widget.properties.stats)}),O.displayServerError)}else{T.userAnswered=!0;var a=g()(u()(t,"values.widgets"),{uuid:T.widget.uuid});if(angular.isUndefinedOrEmpty(a))return;var o=u()(a,"answer.value");if(!angular.isObject(o)){var c={};c[o]=!0,o=c}var m=u()(T.widget,"properties.stats.answers",{});angular.forEach(o,(function(e,t){var n=e?1:0;p()(m,t)||(m[t]=0),m[t]+=n})),T.widget.properties.stats.answers=m,T.widget.properties.stats.count=u()(T.widget,"properties.stats.count",0),T.widget.properties.stats.count+=1}T.init()}}),(function(e){O.displayServerError(e),T.isSaving=!1}))}else f.error(h.translate("WIDGET_TYPE_STANDALONE-QUESTION_NOT_ANSWERED"))},T.toggleChart=function(e){angular.isDefinedAndFilled(T.CHART_TYPES[e])&&(T.reportChartType=e)},n.$on("widget-standalone-question-settings",(function(e,t){T.widget.uuid===t&&angular.isDefinedAndFilled(T.widget.properties.questionSettings)&&T.init()})),T.init=function(){T.updateAnswer=!1;var e=u()(T.widget,"properties",{});angular.isUndefinedOrEmpty(e.isOpen)&&(e.isOpen=!0),angular.isUndefinedOrEmpty(e.reportInPopin)&&(e.reportInPopin=!1),angular.isDefinedAndFilled(e.questionSettings)&&(T.question=v.buildQuestion(e.questionSettings));var t=b.getCurrentWidget(l.getCurrent(),T.widget.uuid),n=t.answer;T.userAnswered=angular.isDefinedAndFilled(n),T.isAsync=u()(e,"stats.count",0)>100;var r=parseInt(e.lastCompilation,10);r&&(T.lastComputationDate=moment.unix(r)),function(e,t){return e&&e.type===t.getType()&&e.isMultiple===t.isMultiple}(n,T.question)&&(T.answer.value=n.value),angular.isDefinedAndFilled(T.question)&&"choices"===T.question.getType()&&C()},this.setParentController=function(e){T.parentCtrl=e,T.init()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetStandaloneQuestion","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-standalone-question/views/widget-standalone-question.html"}}n.r(t),n.d(t,"WidgetStandaloneQuestionController",(function(){return r})),n.d(t,"WidgetStandaloneQuestionDirective",(function(){return i}));var a=n(279),o=n.n(a),s=n(354),c=n.n(s),l=n(4),u=n.n(l),d=n(356),p=n.n(d),f=n(21),g=n.n(f),m=n(245);r.$inject=["$filter","$locale","$scope","$timeout","Charts","ConfigTheme","Community","Content","ContentTemplate","LxNotificationService","Question","Translation","User","UserAccess","UserContent","Utils"],angular.module("Widgets").directive("widgetStandaloneQuestion",i)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n){var a=this,o=function(){function e(e){void 0===e&&(e={}),this.type=r.choices,this.title=e}return e.prototype.getType=function(){return r[this.type]},e}(),s=function(n){function a(e,t){n.call(this,e),this.choices=[],this.type=r.choices,this.isMultiple=t}return i(a,n),a.prototype.setChoice=function(e){e.identifier||this.getChoice(e.identifier)||(e.identifier=Object(t.b)()),this.choices.push(e)},a.prototype.getChoice=function(t){return e.find(this.choices,(function(e){return t===e.identifier}))},a.prototype.removeChoice=function(t){if(t){var n=e.findIndex(this.choices,(function(e){return e.identifier===t}));if(n>-1)return this.choices.splice(n,1),!0}return!1},a}(o),c=function(){function t(e,t){void 0===t&&(t=[]),this.answers=[],this.count=0,this.answers=t,this.count=this.answers.length,this.type=e}return t.prototype.getAnswerByUserId=function(t){return e.find(this.answers,(function(e){return t&&t===e.userId}))},t.prototype.add=function(e){e&&e.value&&(this.answers.push(e),this.count++)},t}();a.Answers=c,a.typeEnum=r,a.Question=o,a.ChoicesQuestion=s,a.buildQuestion=function(e){var t=e.type===a.typeEnum.open?a.Question:a.ChoicesQuestion,n=new t;return angular.forEach(e,(function(e,t){n.hasOwnProperty(t)&&(n[t]=e)})),n}}n.$inject=["Utils"],angular.module("Services").service("Question",n);var r,i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){e[e.open=0]="open",e[e.choices=1]="choices"}(r||(r={}))}()}.call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){var a,o=this;o.hasStateCount=!1,o.questionSettings={},o.addEmptyChoice=function(){i.getCurrent().properties.questionSettings.setChoice({value:{}})},o.changeQuestionType=function(){var e=i.getCurrent().properties;e.questionSettings=r.buildQuestion(e.questionSettings),e.stats={}},o.updateWidget=function(){n((function(){t.$broadcast("widget-standalone-question-settings",i.getCurrent().uuid)}))},o.updateState=function(e){i.getCurrent().properties.lastCloseState=!e},a=i.getCurrent().properties,o.hasStateCount=e.get(a,"stats.count",0)>0,angular.isDefinedAndFilled(a.questionSettings)?a.questionSettings=r.buildQuestion(a.questionSettings):a.questionSettings=new r.ChoicesQuestion,a.stats=a.stats||{}}t.$inject=["$rootScope","$timeout","Question","Widget"],angular.module("Controllers").controller("WidgetStandAloneQuestionSettingsController",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/stockexchange/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("StockExchangeFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(){var t=e.get(s.stockExchangeValue,"values.currency");angular.isDefinedAndFilled(t)&&(s.currency=s.widget.properties.displayCurrencyCode?t:c[t]);var n=s.widget.properties.currencyReverse?"left":"right";s.curencyPosition="widget-stock-exchange__value--unit-"+n}var s=this,c={AED:"د.إ.‏",AFN:"؋",ALL:"Lek",AMD:"դր.",ARS:"$",AUD:"$",AZN:"ман.",BAM:"KM",BDT:"৳",BGN:"лв.",BHD:"د.ب.‏",BIF:"FBu",BND:"$",BOB:"Bs",BRL:"R$",BWP:"P",BYR:"BYR",BZD:"$",CAD:"$",CDF:"FrCD",CHF:"CHF",CLP:"$",CNY:"CN¥",COP:"$",CRC:"₡",CVE:"CV$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"د.ج.‏",EEK:"kr",EGP:"ج.م.‏",ERN:"Nfk",ETB:"Br",EUR:"€",GBP:"£",GEL:"GEL",GHS:"GH₵",GNF:"FG",GTQ:"Q",HKD:"$",HNL:"L",HRK:"kn",HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"টকা",IQD:"د.ع.‏",IRR:"﷼",ISK:"kr",JMD:"$",JOD:"د.أ.‏",JPY:"￥",KES:"Ksh",KHR:"៛",KMF:"FC",KRW:"₩",KWD:"د.ك.‏",KZT:"тңг.",LBP:"ل.ل.‏",LKR:"SL Re",LTL:"Lt",LVL:"Ls",LYD:"د.ل.‏",MAD:"د.م.‏",MDL:"MDL",MGA:"MGA",MKD:"MKD",MMK:"K",MOP:"MOP$",MUR:"MURs",MXN:"$",MYR:"RM",MZN:"MTn",NAD:"N$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"नेरू",NZD:"$",OMR:"ر.ع.‏",PAB:"B/.",PEN:"S/.",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"₲",QAR:"ر.ق.‏",RON:"RON",RSD:"дин.",RUB:"руб.",RWF:"FR",SAR:"ر.س.‏",SDG:"SDG",SEK:"kr",SGD:"$",SOS:"Ssh",SYP:"ل.س.‏",THB:"฿",TND:"د.ت.‏",TOP:"T$",TRY:"TL",TTD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",USD:"$",UYU:"$",UZS:"UZS",VEF:"Bs.F.",VND:"₫",XAF:"FCFA",XOF:"CFA",YER:"ر.ي.‏",ZAR:"R",ZMK:"ZK"};s.getValueLabel=function(){return s.parentCtrl.getWidgetTranslation(s.widget.properties.label)||s.stockExchangeValue.name.toLowerCase()},s.getWidgetClass=function(){var e=[];return s.parentCtrl.getWidgetClass(e),s.isWidgetEmpty()&&e.push("widget--is-empty"),e},s.isWidgetEmpty=function(){return(angular.isUndefined(s.stockExchangeValue)||!s.stockExchangeValue)&&"basic"!==n.getViewMode()},s.isWidgetHidden=function(){return s.parentCtrl.designerMode()||!angular.isUndefinedOrEmpty(e.get(s.stockExchangeValue,"values"))&&"N/A"!==s.stockExchangeValue.values.current?(s.parentCtrl.isHidden=!1,!1):(s.parentCtrl.isHidden=!0,!0)},t.$on("widget-stock-exchange-settings-currency",(function(e,t){s.widget.uuid===t&&o()})),t.$on("widget-stock-exchange-settings",(function(e,t){s.widget.uuid===t&&s.init()})),s.init=function(){var t=s.widget.properties;angular.isObject(t.decimalSeparator)||(t.decimalSeparator={},t.decimalSeparator[i.getLang("current")]="."),angular.isUndefinedOrEmpty(t.symbol)||r.get({symbol:t.symbol},(function(n){s.stockExchangeValue=angular.copy(n),o(),s.fluctuationClass=function(){var t=e.get(s.stockExchangeValue,"values.change");if(angular.isUndefinedOrEmpty(t))return!1;var n="equal";return e.includes(t,"+")?n="positive":e.includes(t,"-")&&(n="negative"),"widget-stock-exchange__fluctuation--"+n}();var r=t.decimalSeparator,a=i.getLang("current");i.hasTranslation(r,a)&&"."!==s.parentCtrl.getWidgetTranslation(r)&&angular.forEach(s.stockExchangeValue.values,(function(e,t){"date"!==t&&(s.stockExchangeValue.values[t]=e.replace(/\./g,r[a]))}))}),a.displayServerError)},this.setParentController=function(e){s.parentCtrl=e,s.init()}}t.$inject=["$scope","Content","StockExchangeFactory","Translation","Utils"],angular.module("Widgets").directive("widgetStockExchange",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetStockExchange","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-stock-exchange/views/widget-stock-exchange.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n){var r=this;r.decimalSeparators=[".",","],r.updateCurrency=function(){t((function(){e.$broadcast("widget-stock-exchange-settings-currency",n.getCurrent().uuid)}))},r.updateWidget=function(){t((function(){e.$broadcast("widget-stock-exchange-settings",n.getCurrent().uuid)}))}}e.$inject=["$rootScope","$timeout","Widget"],angular.module("Controllers").controller("WidgetStockExchangeSettingsController",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){var c,l=this;l.MainNav=a,l.setListCurrentSub=function(){var n,a;"list"===e.get(l.selectedProperty,"listCurrentSub")&&(n=i.getCurrent().id,a=o.inputLanguage,angular.isUndefined(l.selectedProperty.navSelected)&&(l.selectedProperty.navSelected={}),l.selectedProperty.navSelected[a]={slugFull:l.property,uuid:n},r((function(){t.$broadcast("widget-sub-nav-settings",s.getCurrent().uuid)})))},n.$on("inputLanguage",(function(){l.init()})),l.init=function(){c=o.inputLanguage,l.widget.properties=l.widget.properties||{};var e=l.widget.properties;e[c]=e[c]||{},angular.isDefinedAndFilled(l.property)?(l.widget.properties[c][l.property]=l.widget.properties[c][l.property]||{},l.selectedProperty=l.widget.properties[c][l.property],"__default"===l.property&&(l.selectedProperty.useDefaultSettings=!1,l.selectedProperty.isDefault=!0),delete l.widget.properties.listCurrentSub,delete l.widget.properties.navSelected,delete l.widget.properties.showHidden,delete l.widget.properties.showParent):l.selectedProperty=l.widget.properties,angular.isUndefinedOrEmpty(l.selectedProperty.listCurrentSub)&&(l.selectedProperty.listCurrentSub="pick"),angular.isUndefined(l.selectedProperty.useDefaultSettings)&&(l.selectedProperty.useDefaultSettings=!0),l.navItemContentList=a.findNavItemsById(i.getCurrent().id)},l.init()}t.$inject=["$rootScope","$scope","$timeout","Content","MainNav","Translation","Widget"],angular.module("Widgets").directive("widgetSubNavCustomSettings",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,require:["widgetSubNavCustomSettings","^widget"],restrict:"E",scope:{property:"@",widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-sub-nav/views/partials/widget-sub-nav-custom-settings.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){var c=this;c.isOpen=!1,c.selectedProperty={},c.MainNav=a,c.handleNavItem=function(){c.edit?(angular.isUndefined(c.selectedProperty.navSelected)&&(c.selectedProperty.navSelected={}),c.selectedProperty.navSelected[o.inputLanguage]={uuid:c.item.uuid},r((function(){t.$broadcast("widget-sub-nav-settings",s.getCurrent().uuid)}))):c.item.type!==i.AVAILABLE_CONTENT_TYPES.MENU||o.hasTranslations(c.item.link,!0)?a.openNavItemLink(c.item):c.toggleChildren()},c.isActive=function(t){if(t=t||c.item,c.edit||angular.isUndefinedOrEmpty(n.slug))return!1;var r=e.last(n.slug.split("/")),i=e.last(o.translate(t.slugFull).split("/"));return r===i},c.isSelected=function(){return c.edit&&o.hasTranslation(c.selectedProperty.navSelected,o.inputLanguage)&&o.translate_(c.selectedProperty.navSelected,o.inputLanguage).uuid===c.item.uuid},c.toggleChildren=function(){c.isOpen=!c.isOpen},function(){var t=o.inputLanguage;c.widget.properties=c.widget.properties||{};var n=c.widget.properties;n[t]=n[t]||{},angular.isDefinedAndFilled(c.property)?(n[t][c.property]=n[t][c.property]||{},c.selectedProperty=n[t][c.property]):angular.isDefinedAndFilled(n[t].__default)?c.selectedProperty=n[t].__default:c.selectedProperty=n,c.isOpen=function t(n){if(!angular.isUndefinedOrEmpty(n))return e.find(n,(function(e){return c.isActive(e)||t(e.children)}))}(c.item.children)}()}function n(e){return{bindToController:!0,compile:function(t){return e.compile(t)},controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{edit:"=",item:"=",parent:"=",property:"=",widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-sub-nav/views/widget-sub-nav-item.html"}}n.$inject=["RecursionHelper"],t.$inject=["$rootScope","$stateParams","$timeout","Config","MainNav","Translation","Widget"],angular.module("Widgets").directive("widgetSubNavItem",n)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){function c(){f.mainNavItem=[];var t=function(){var t=e.get(f.selectedProperty.navSelected,d,{});return angular.isDefinedAndFilled(t)||f.parentCtrl.designerMode()?t:e.get(f.selectedProperty.navSelected,o.getLang("fallback"),{})}();if(!angular.isUndefinedOrEmpty(t)){var n=e.get(t,"slugFull","__default");if("__default"!==n){var r=e.includes(n,"/")?"":n,s=e.get(i.getCurrent(),"slug");f.mainNavItem=a.findNavItemBySlug(n),angular.isUndefinedOrEmpty(f.mainNavItem)&&angular.isDefinedAndFilled(r)&&(f.mainNavItem=a.findNavItemBySlug(r+o.translate(s))),angular.isUndefinedOrEmpty(f.mainNavItem)&&(f.mainNavItem=a.findNavItemBySlug(o.translate(s)))}else f.mainNavItem=a.findNavItemById(t.uuid)}}function l(){return angular.extend({isDefault:!0,navSelected:{}},e.pick(f.widget.properties,"listCurrentSub","showHidden","showParent"))}function u(){var t=f.widget.properties||{};if(t.navSelected)f.selectedProperty=function(){var t=l();f.widget.properties=f.widget.properties||{};var n=f.widget.properties,r=e.get(n,"navSelected",{});if(angular.isUndefinedOrEmpty(r))return t;var i=e.omit(r,["uuid","id"]);angular.forEach(i,(function(e,i){r[i]=e,n[i]={__default:angular.extend(l(),{navSelected:{}})},i===d&&(t.navSelected[i]=e)}));var a=r.uuid||r.id;if(angular.isDefinedAndFilled(a)){var o={};o[d]={uuid:a},angular.isObject(n[d])||(n[d]={}),n[d].__default=e.extend(l(),{navSelected:o}),t.navSelected=o}return delete n.listCurrentSub,delete n.showHidden,delete n.showParent,delete n.navSelected,t}()||{};else{var n=e.get(t,"["+d+"]["+p+"]",{}),r=e.get(t,[d]+".__default",{});!angular.isDefinedAndFilled([p,n.listCurrentSub],"every")||n.useDefaultSettings?("list"===r.listCurrentSub&&e.set(r,"navSelected["+d+"].slugFull",p),f.selectedProperty=r||{}):f.selectedProperty=n||{}}}var d,p,f=this;f.selectedProperty={},f.Content=i,f.MainNav=a,f.getWidgetClass=function(){var e=[];return f.parentCtrl.getWidgetClass(e),f.isWidgetEmpty()&&e.push("widget--is-empty"),e},f.isWidgetEmpty=function(){return!a.isCallInProgress()&&(angular.isUndefined(f.mainNavItem)||!f.selectedProperty.showHidden&&!a.hasVisibileChildren(f.mainNavItem)||angular.isDefined(f.mainNavItem)&&angular.isUndefinedOrEmpty(f.mainNavItem.children))},f.isWidgetHidden=function(){var e=!f.parentCtrl.designerMode()&&!f.selectedProperty.noResults&&f.isWidgetEmpty();return f.parentCtrl.isHidden=e,e},t.$on("widget-sub-nav-settings",(function(e,t){f.widget.uuid===t&&f.init()})),t.$on("main-nav-loaded",(function(){f.init()})),f.init=function(){if(!angular.isUndefinedOrEmpty(a.getCurrent())){d=f.parentCtrl.designerMode()?o.inputLanguage:o.getLang("current");var e=f.widget.properties||{};e[d]=o.translate(e)||{__default:{listCurrentSub:"pick",navSelected:{}}},p=r.slug?s.getParentFullSlug(r.slug):void 0,u(),c()}},this.setParentController=function(e){f.parentCtrl=e,f.init()}}t.$inject=["$scope","$timeout","$stateParams","Content","MainNav","Translation","Utils"],angular.module("Widgets").directive("widgetSubNav",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetSubNav","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-sub-nav/views/widget-sub-nav.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){var o=this;o.MainNav=n,o.Translation=r,o.Utils=i,o.Widget=a,function(){o.navItemContentList=n.findNavItemsById(t.getCurrent().id);var s=o.navItemContentList.map((function(e){if(e.slugFull)return i.getParentFullSlug(r.translate(e.slugFull))}));s.push("__default");var c=a.getCurrent();angular.forEach(e.get(c,"properties[Translation.inputLanguage]"),(function(t,n){t.listCurrentSub&&r.hasTranslation(t.navSelected)&&!e.includes(s,n)&&delete c.properties.key}))}()}t.$inject=["Content","MainNav","Translation","Utils","Widget"],angular.module("Controllers").controller("WidgetSubNavSettingsController",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.Content=e,n.UserContent=t,this.setParentController=function(e){n.parentCtrl=e}}e.$inject=["Content","UserContent"],angular.module("Widgets").directive("widgetTasks",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetTasks","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-tasks/views/widget-tasks.html"}}))}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c){function u(){var e=g(["provider"]);return angular.isUndefinedOrEmpty(e)?"lumapps":e}function g(e){var t=c.getCurrent(),n=a()(t,"properties");return t.uuid!==O.uuid&&E(),a()(n,e)}function m(e,t){var n=c.getCurrent(),r=a()(n,"properties");n.uuid!==O.uuid&&E(),d()(r,[e],t),n.properties=r}function v(){var e=g(["community"]);(angular.isUndefinedOrEmpty(e)||-1===s()(b.communityList,["id",e.id]))&&m("community",b.communityList.length>0?b.communityList[0]:{}),e=g(["community"]),angular.isUndefinedOrEmpty(e)||Object(p.f)(e.workspace).then((function(t){t.data.group&&t.data.group.apiId&&(e.officeId=a()(t,"data.group.apiId"),m("community",e),y(!0))}))}function h(){var e=g(["plan"]);angular.isDefinedAndFilled([e],"every")?Object(p.a)(e.id).then((function(e){var t=g(["bucket"]);angular.isDefinedAndFilled(t)&&-1!==s()(e.data.items,["id",t.id])?m("bucket",t):m("bucket",{}),b.bucketsList=e.data.items})).catch((function(){m("bucket",{}),b.bucketsList=[],r.error(i.translate("FRONT.WIDGET_TASKS.SETTINGS.ERROR.FETCH_BUCKETS_ERROR"))})):(m("bucket",{}),m("plan",{}))}function y(e){var t=e?p.c:p.d;t(e?g(["community","officeId"]):null).then((function(t){var n=g(["plan"]);angular.isDefinedAndFilled(n)&&-1!==s()(t.data.items,["id",n.id])?m("plan",n):(m("plan",t.data.items&&t.data.items[0]&&e?t.data.items[0]:{}),m("bucket",{})),b.plansList=t.data.items,h()})).catch((function(){m("plan",{}),m("bucket",{}),b.plansList=[],r.error(i.translate("FRONT.WIDGET_TASKS.SETTINGS.ERROR.USER_RIGHTS_ERROR"))}))}function E(){b.currentLanguage=i.getInputLanguage(),O=c.getCurrent();var r={communityType:"microsoft",instance:n.getCurrentInstanceId()};e.listCommunityByType(r,b.COMMUNITY_LIST_KEY,{items:{communityType:!0,id:!0,instance:!0,slug:!0,title:!0,uid:!0}},b.COMMUNITY_LIST_ENDPOINT).then((function(e){b.communityList=e})).finally((function(){!function(){b.providerList=o.isMicrosoft()?f.MS_PROVIDERS:f.GOOGLE_PROVIDERS;var e=a()(O,"properties");angular.isUndefined(e.isTeamScoped)&&m("isTeamScoped","community"===t.getCurrent().type),angular.isUndefined(e.alreadyDoneDay)&&m("alreadyDoneDay",2),angular.isUndefined(e.viewMode)&&m("viewMode","list")}(),b.toggleProvider(u())}))}var b=this,O={};b.COMMUNITY_LIST_ENDPOINT="listByType",b.COMMUNITY_LIST_KEY="ms-community-list-key",b.Community=e,b.toggleProvider=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u();if(m("provider",e),"planner"===e){var t=g(["isTeamScoped"]);t?v():y(!1)}else m("community",{}),m("plan",{}),m("bucket",{}),m("isTeamScoped",!1)},b.onTeamScopedChange=function(){var e=g(["isTeamScoped"]),t=g(["provider"]);"planner"===t&&(e?v():y(!1))},b.fetchPlannerBuckets=h,b.isBucketEmpty=function(){return l()(g(["bucket"]))},b.isCommunityEmpty=function(){return l()(g(["community"]))},b.isPlanEmpty=function(){return l()(g(["plan"]))},b.selectCommunity=v,b.switchViewMode=function(e){m("viewMode",e)},E()}n.r(t),n.d(t,"WidgetTasksSettingsController",(function(){return r}));var i=n(4),a=n.n(i),o=n(110),s=n.n(o),c=n(27),l=n.n(c),u=n(7),d=n.n(u),p=n(321),f=n(817);r.$inject=["Community","Content","Instance","LxNotificationService","Translation","User","Widget"],angular.module("Controllers").controller("WidgetTasksSettingsController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,c,l,u,d,p,f,g,m,v,h){function y(){var e=C.parentCtrl.getWidgetTranslation(C.widget.properties.content),t=C.parentCtrl.getWidgetTranslation(C.widget.properties.popin),n=v.initHtmlContent(C.widget.uuid,e,".widget-tip__content",t,S);C.htmlContent=n.mainContent,C.popinContent=n.popinContent}function E(){h.isDragDisabled(!h.isDragDisabled()),e.parents(".component-cell").toggleClass("component-cell--hover-disabled",h.isDragDisabled())}var b,O,C=this,T=angular.element("<div/>",{class:"app-filter app-filter--no-transition"}),S=!1;C.activeContent=!1,C.editingContent=!1,C.FROALA_OPTIONS={},C.Translation=f,C.Utils=v,C.disableWidgetForUser=function e(){angular.isDefinedAndFilled(C.widget.properties.lastUuidEdit)&&angular.isDefined(O)&&O.uuid===C.widget.uuid&&(O.params.lastUuidEdit=C.widget.properties.lastUuidEdit);var t="app.front.community"===i.current.name?l.getCurrent():d.getCurrent();if(angular.isUndefinedOrEmpty(t.userContent)&&(t.userContent={userContent:t.id,values:{}}),angular.isUndefined(t.userContent.values.widgets)&&(t.userContent.values.widgets=[]),angular.isUndefinedOrEmpty(O))return t.userContent.values.widgets.push({active:!1,params:{},uuid:C.widget.uuid}),O=m.getUserContentWidget(t,C.widget.uuid),void e();O.active=!1,c.handleTaggingMap("close-tip","tip",{isHomePage:!!angular.isDefined(t)&&t.isHomepage,item:C.widget}),m.save({content:t.id,user:g.getConnected().uid,values:t.userContent.values},(function(){p.success(f.translate("FRONT.TIP.DELETED"))}),(function(e){angular.isDefined(O)&&!O.active&&(O.active=!0),v.displayServerError(e)}))},C.editContent=function(){var t=d.getViewMode();"get"===d.getAction()||"default"!==t&&"simple"!==t||C.editingContent||(e.find(".widget-content__transclude").css("height",e.find(".widget-content__transclude").outerHeight()),E(),C.editingContent=!0,"basic"===t&&T.addClass("app-filter--is-disabled"),T.appendTo(".app-content").bind("click",(function(e){e.stopPropagation(),r.$apply((function(){var e;e=$(".froala"),e.froalaEditor("codeView.isActive")&&e.froalaEditor("codeView.toggle"),a((function(){C.editingContent=!1,y(),T.removeClass("app-filter--is-shown").remove(),E()}))}))})),a((function(){T.addClass("app-filter--is-shown"),e.find(".widget-content__transclude").removeAttr("style")}),100))},C.getWidgetClass=function(){var e=[];return C.parentCtrl.getWidgetClass(e),e.push("widget-editable"),C.isWidgetEmpty()&&e.push("widget--is-empty"),C.editingContent&&(e.push("widget-tip--is-editing"),e.push("widget-editable--is-editing")),e},C.initFroala=function(){C.widget.properties.content=C.widget.properties.content||{},C.widget.properties.content[C.Translation.inputLanguage]=C.widget.properties.content[C.Translation.inputLanguage]||"",o()(C.FroalaService,"widgetUuid",C.widget.uuid)},C.isWidgetEmpty=function(){return!C.editingContent&&(angular.isUndefined(C.widget.properties.content)||!C.parentCtrl.getWidgetTranslation(C.widget.properties.content))},C.isWidgetHidden=function(){return C.parentCtrl.designerMode()||(!C.widget.properties.isDeletable||angular.isUndefinedOrEmpty(O)||C.widget.uuid!==O.uuid||O.active||angular.isDefined(C.widget.properties.lastUuidEdit)&&(angular.isUndefined(O.params)||angular.isUndefined(O.params.lastUuidEdit)||angular.isDefined(O.params.lastUuidEdit)&&O.params.lastUuidEdit!==C.widget.properties.lastUuidEdit))&&!angular.isUndefined(C.widget.properties.content)&&C.parentCtrl.getWidgetTranslation(C.widget.properties.content)?C.parentCtrl.isHidden=!1:C.parentCtrl.isHidden=!0,C.parentCtrl.isHidden},r.$on("inputLanguage",y),r.$on("listenerOnLinks",(function(e){e===C.widget.uuid&&(S=!0)})),this.setParentController=function(e){C.parentCtrl=e,function(){if(v.isDesignerMode()){var e=t.get("FroalaService");C.FroalaService=e;var n=e.getHTMLToolbar();C.FROALA_OPTIONS=e.getOptions(!0,!0,!0,!0,n),C.FROALA_OPTIONS.events["froalaEditor.blur"]=C.parentCtrl.langDetectOnBlur}else C.FroalaService={openContent:v.openContent,openPopin:v.openPopin};b="app.front.community"===i.current.name?l.getCurrent():d.getCurrent(),O=m.getUserContentWidget(b,C.widget.uuid),y()}()}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetTip","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-tip/views/widget-tip.html"}}n.r(t),n.d(t,"WidgetTipController",(function(){return r})),n.d(t,"WidgetTipDirective",(function(){return i}));var a=n(7),o=n.n(a);r.$inject=["$element","$injector","$sce","$scope","$state","$timeout","$window","Analytics","Community","ConfigTheme","Content","LxNotificationService","Translation","User","UserContent","Utils","Widget"],angular.module("Widgets").directive("widgetTip",i)},function(e,t,n){"use strict";n.r(t);var r=n(35);!function(){function e(e,t,n){var i,a=this;a.notifyAgain=!1,a.switchNotification=function(){e((function(){var e=n.getCurrent();e.properties=e.properties||{};var t=e.properties;angular.isDefined(t.lastUuidEdit)&&angular.isUndefined(i)&&(i=t.lastUuidEdit),t.lastUuidEdit=a.notifyAgain?Object(r.b)():i}))}}e.$inject=["$timeout","Utils","Widget"],angular.module("Controllers").controller("WidgetTipSettingsController",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o,s,c){function l(){c.isDragDisabled(!c.isDragDisabled()),e.parents(".component-cell").toggleClass("component-cell--hover-disabled",c.isDragDisabled())}function u(){l(),d.editingContent=!0,"basic"!==i.getViewMode()&&p.appendTo(".app-content"),r((function(){"basic"!==i.getViewMode()&&p.addClass("app-filter--is-shown"),e.find(".widget-title__input").focus()}),100)}var d=this,p=angular.element("<div/>",{class:"app-filter app-filter--no-transition"});d.editingContent=!1,d.Content=i,d.ContentForm=a,d.Translation=s,d.editContentDefaultOrSimple=function(){var e=i.getViewMode();"get"===i.getAction()||d.editingContent||"default"!==e&&"simple"!==e||n.params.contentType===o.CONTENT_TYPES.COMMUNITY||u()},d.editContentBasic=function(){"get"===i.getAction()||"basic"!==i.getViewMode()||d.editingContent||n.params.contentType===o.CONTENT_TYPES.COMMUNITY||u()},d.getWidgetClass=function(){var e=[];return d.parentCtrl.getWidgetClass(e),e.push("widget-editable"),d.isWidgetEmpty()&&e.push("widget--is-empty"),d.editingContent&&(e.push("widget-title--is-editing"),e.push("widget-editable--is-editing")),e},d.isWidgetEmpty=function(){var e=i.getCurrent().title;return!d.editingContent&&(angular.isUndefined(e)||angular.isUndefinedOrEmpty(d.parentCtrl.getWidgetTranslation(e)))},d.isWidgetHidden=function(){return d.parentCtrl.isHidden=!1,d.parentCtrl.isHidden},d.readContent=function(){d.editingContent=!1;var e="basic"!==i.getViewMode();e&&p.removeClass("app-filter--is-shown"),r((function(){e&&p.remove(),l()}))},this.setParentController=function(e){d.parentCtrl=e}}e.$inject=["$element","$scope","$state","$timeout","Content","ContentForm","InitialSettings","Translation","Widget"],angular.module("Widgets").directive("widgetTitle",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetTitle","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-title/views/widget-title.html"}}))}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c){function l(){u.todoItems=e.get(d,"params.todo",[])}var u=this,d={};u.displayCheckedItems=!1,u.newTodo={},u.todoItems=[],u.Translation=a,u.addTodo=function(){var e=r.getCurrent(),n=e.userContent;if(angular.isDefined(u.newTodo)&&a.hasTranslations(u.newTodo,!0)){if(angular.isUndefined(n)&&(n={userContent:e.id,values:{}},e.userContent=n),n.values=n.values||{},n.values.widgets=n.values.widgets||[],angular.isUndefinedOrEmpty(d))return n.values.widgets.push({active:!0,params:{todo:[]},uuid:u.widget.uuid}),d=s.getUserContentWidget(e,u.widget.uuid),l(),void u.addTodo();d.params=d.params||{},d.params.todo=d.params.todo||[],d.params.todo.push({id:Object(t.b)(),isChecked:!1,value:u.newTodo}),l(),s.save({content:e.id,user:o.getConnected().uid,values:n.values}),u.newTodo={}}},u.checkItem=function(){n((function(){var e=r.getCurrent();s.save({content:e.id,user:o.getConnected().uid,values:angular.fastCopy(e.userContent.values)})}))},u.getWidgetClass=function(){var e=[];return u.parentCtrl.getWidgetClass(e),u.isWidgetEmpty()&&e.push("widget--is-empty"),e},u.isWidgetEmpty=function(){return!1},u.isWidgetHidden=function(){return u.parentCtrl.isHidden=!1,!1},u.removeTodo=function(t){i.confirm(a.translate("WIDGET_TYPE_TODO_DELETE"),a.translate("WIDGET_TYPE_TODO_DELETE_DESCRIPTION"),{cancel:a.translate("CANCEL"),ok:a.translate("OK")},(function(n){if(n&&!angular.isUndefinedOrEmpty(d)&&!angular.isUndefinedOrEmpty(e.get(d,"params.todo"))){var i=r.getCurrent();d.params.todo=e.reject(d.params.todo,{id:t.id}),s.save({content:i.id,user:o.getConnected().uid,values:i.userContent.values},l)}}))},u.toggleDisplayCheckedItems=function(){u.displayCheckedItems=!u.displayCheckedItems},u.init=function(){d=s.getUserContentWidget(r.getCurrent(),u.widget.uuid),l()},this.setParentController=function(e){u.parentCtrl=e,u.init()}}n.$inject=["$timeout","Content","LxNotificationService","Translation","User","UserContent","Utils"],angular.module("Widgets").directive("widgetTodo",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetTodo","^widget"],restrict:"E",scope:{widget:"="},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-todo/views/widget-todo.html"}}))}()}.call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){var r=this;r.queryFilter={},r.Translation=n,r.getWidgetClass=function(){var e=[];return r.parentCtrl.getWidgetClass(e),e},r.isWidgetEmpty=function(){return angular.isUndefinedOrEmpty(r.widget.properties.directory)},r.isWidgetHidden=function(){return r.parentCtrl.designerMode()||r.widget.properties.noResults||!r.isWidgetEmpty()?(r.parentCtrl.isHidden=!1,!1):(r.parentCtrl.isHidden=!0,!0)},r.widget.properties=e.get(r.widget,"properties",{}),this.setParentController=function(e){r.parentCtrl=e}}t.$inject=["$scope","Translation"],angular.module("Widgets").directive("widgetUserDirectorySearch",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetUserDirectorySearch","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-user-directory-search/views/widget-user-directory-search.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.filterListKey="userDirectorySearch",n.userDirectories=[],n.Content=t,t.filterize({type:e.AVAILABLE_CONTENT_TYPES.USER_DIRECTORY},void 0,void 0,n.filterListKey)}e.$inject=["Config","Content"],angular.module("Controllers").controller("WidgetUserDirectorySearchSettingsController",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u){function d(){angular.isDefinedAndFilled(g.widget.properties.maxNumber)&&(g.widget.properties.maxNumber=parseInt(g.widget.properties.maxNumber,10))}function p(){switch(g.widget.properties.type){case g.widgetListCtrl.SELECTION_TYPES.list:!function(){if(o.isConnected()){var e={maxResults:parseInt(g.widget.properties.maxNumber,10)||o.maxResults,showHidden:!1,sortOrder:"",status:"enabled"},t=g.widgetListCtrl.getOriginalListKey()+"-"+g.widgetListCtrl.SELECTION_TYPES.list;g.widgetListCtrl.setListKey(t),e.sortOrder="asc"===g.widget.properties.listOrderDir?"":"-",e.sortOrder+=g.widget.properties.listOrder?g.widget.properties.listOrder:"registrationDate",g.widget.properties.feedKey&&(e.feeds=g.widget.properties.feedKey),g.widget.properties.registeredSince&&e.sortOrder.indexOf("registrationDate")>=0&&(e.registeredSince=g.widget.properties.registeredSince),o.cacheFilterize(e,g.widgetListCtrl.updateListItems,g.widgetListCtrl.updateListItems,t,v)}}();break;case g.widgetListCtrl.SELECTION_TYPES.pick:default:!function(){var e=g.widgetListCtrl.getOriginalListKey()+"-"+g.widgetListCtrl.SELECTION_TYPES.pick;if(g.widgetListCtrl.setListKey(e),angular.isUndefinedOrEmpty(g.widget.properties.usersIds)||!o.isConnected())o.displayList(e,v).length=0,g.widgetListCtrl.updateListItems();else{var t={ids:g.widget.properties.usersIds,maxResults:g.widget.properties.usersIds.length};o.cacheFilterize(t,g.widgetListCtrl.updateListItems,g.widgetListCtrl.updateListItems,e,v)}}()}}function f(){g.widget.properties.type===g.widgetListCtrl.SELECTION_TYPES.pick&&"basic"===n.getViewMode()&&"get"!==n.getAction()&&l.waitForAndExecute("#"+m,c)}var g=this,m="widget-user-list-picker-",v={items:{apiProfile:!0,customProfile:!0,email:!0,firstName:!0,gamification:r.hasFeature("gamification"),id:!0,lastName:!0,profilePicture:!0,profilePictureUrl:!0,profileStatus:r.hasFeature("social"),settings:r.hasFeature("social"),uid:!0}};g.init=function(t){var n;m+=g.widget.uuid,r.hasFeature("social")&&(v.items.profileStatus=!0),n=g.widget.properties,angular.isUndefinedOrEmpty(e.get(n,"userDirectory"))||angular.isUndefinedOrEmpty(e.get(n,"displayFields"))||u.get({uid:n.userDirectory.uid},(function(t){if(t){var r=e.map(n.displayFields,"uuid"),i=angular.isDefinedAndFilled(r);n.displayFields=[];var a=t;if(!angular.isUndefinedOrEmpty(e.get(a,"template.components"))){var c=e.map(e.get(o.getConnected(),"subscriptions",[]),"feed");n.displayFields=e.filter(a.template.components,(function(t){return(i?e.includes(r,t.uuid):e.get(t.properties,"displayInList",!1))&&(o.isAdmin()||s.hasSubscription(e.get(t.properties,"seeFeeds",[]),c))}))}}}),(function(){})),g.widgetListCtrl.init(t)},this.setParentController=function(e){g.widgetListCtrl=e,g.widgetListCtrl.widgetListChildCtrl={handleBackwardCompatibility:d,initList:p,onWidgetListClick:f},g.init(!0)}}t.$inject=["$scope","Content","Features","InitialSettings","Translation","User","UserDirectory","UserPicker","Utils","ContentFactory"],angular.module("Widgets").directive("widgetUserList",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetUserList","^widgetList"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-user-list/views/widget-user-list.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){function t(t,n,r,i,a,o,s){function c(t){var n=s.getCurrent(),c=n.properties;angular.isUndefinedOrEmpty(c.displayFields)&&(c.displayFields=[]);var l=!t||angular.isUndefined(c.displayFields);if(t&&(u.userFields=void 0),angular.isDefinedAndFilled(c.userDirectory)){var d=e.map(c.displayFields,"uuid"),p=a.getProperty(r.INSTANCE_PROPERTIES.USER_BLOCK_DEFAULT_FIELD);p=p||"primaryEmail",u.userFields=e.chain(c.userDirectory.template.components).filter((function(t){return t.properties=t.properties||{},e.get(t,"properties.boundMap.text")!==p&&(l&&t.properties.displayInList?(c.displayFields.push(t),t.$enable=!0):t.$enable=e.includes(d,t.uuid),t.widgetType!==i.WIDGET_TYPES.TIP)})).value()}else o.empty(c.displayFields);u.updateWidget()}var l,u=this;u.selectedUserDirectories=void 0,u.userDirectories=i.USER_DIRECTORIES,u.userFields=void 0,u.Utils=o,u.switchFieldState=function(t){var n=s.getCurrent(),r=n.properties,i=e.findIndex(r.displayFields,{uuid:t.uuid});t.$enable&&-1===i?r.displayFields.push(t):r.displayFields.splice(i,1),u.updateWidget()},u.updateFieldList=c,u.updateWidget=function(){n((function(){t.$broadcast("widget-user-list-settings",s.getCurrent().uuid)}))},u.updateUserDirectory=function(e){s.getCurrent().properties.userDirectory=e,s.getCurrent().properties.displayFields=[],c()},l=s.getCurrent(),l.properties=l.properties||{},u.updateFieldList(!0)}t.$inject=["$rootScope","$timeout","Config","InitialSettings","Instance","Utils","Widget"],angular.module("Controllers").controller("WidgetUserListAdvancedSettingsController",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l){var u=this,d="widget-";u.PICKER_ID="widget-user-list-picker-",u.listOrderSelection=["registrationDate","email","firstName","lastName"],u.userList=[],u.Feed=a,u.User=o,u.openUserPicker=function(){c.waitForAndExecute("#"+u.PICKER_ID,s)},u.updateWidget=function(){r((function(){t.$broadcast("widget-user-list-settings",l.getCurrent().uuid)}))},n.$on("user-picker__close-start",(function(t,n){u.PICKER_ID===n&&(l.getCurrent().properties.usersIds=e.map(u.userList,"id")),u.updateWidget()})),function(){var t=i.getCurrent(),r=l.getCurrent();if(angular.isDefinedAndFilled(e.get(t,"id")))d="widget-"+r.uuid+"-"+t.id;else{var a=Object.keys(o._services),s=e.find(a,(function(t){return e.startsWith(t,"widget-"+r.uuid)}));angular.isDefinedAndFilled(s)&&(d=s)}u.PICKER_ID+=r.uuid,r.properties=r.properties||{};var c=r.properties;if(angular.isUndefinedOrEmpty(c.type)&&(c.type="pick"),"pick"===c.type&&angular.isArray(c.usersIds)&&!angular.isUndefinedOrEmpty(c.usersIds))if(d+="-"+c.type,u.isCallInProgress=o.isCallInProgress(d),u.isCallInProgress)var p=n.$watch((function(){return o.isCallInProgress(d)}),(function(e){u.isCallInProgress=e,u.isCallInProgress||(u.userList=o.displayList(d),angular.isFunction(p)&&(p(),p=void 0))}));else u.userList=o.displayList(d)}()}t.$inject=["$rootScope","$scope","$timeout","Content","Feed","User","UserPicker","Utils","Widget"],angular.module("Controllers").controller("WidgetUserListSettingsController",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){var c=this;c.Translation=a,c.getEmbedCode=function(){return n.trustAsHtml(c.parentCtrl.getWidgetTranslation(e.get(c.widget,"properties.embed")))},c.getVideoRatio=function(){var t=c.parentCtrl.getWidgetTranslation(e.get(c.widget,"properties.embed"));if(angular.isUndefinedOrEmpty(t))return{};var n={},r=56.25;return t.replace(/(width|height)=["']([^"']*)["']/gi,(function(e,t,r){n[t]=r})),angular.isDefinedAndFilled(n.width)&&angular.isDefinedAndFilled(n.height)&&(r=n.height/n.width*100),{"padding-bottom":r+"%"}},c.getWidgetClass=function(){var e=[];return c.parentCtrl.getWidgetClass(e),c.isWidgetEmpty()&&e.push("widget--is-empty"),e},c.isWidgetEmpty=function(){var e=c.widget.properties||{};return"embed"===e.source&&angular.isUndefinedOrEmpty(c.parentCtrl.getWidgetTranslation(e.embed))||"drive"===e.source&&(angular.isUndefinedOrEmpty(e.pickedName)||e.error)},c.isWidgetHidden=function(){var e=c.widget.properties||{};return c.parentCtrl.designerMode()||e.noResults||!c.isWidgetEmpty()?(c.parentCtrl.isHidden=!1,!1):(c.parentCtrl.isHidden=!0,!0)},c.init=function(){c.widget.properties=c.widget.properties||{};var e=c.widget.properties;if(e.source=e.source||"embed",angular.isUndefined(e.embed)&&(e.embed={}),angular.isString(e.embed)){var t=e.embed;e.embed={},e.embed[a.inputLanguage]=t}"drive"!==e.source||angular.isUndefinedOrEmpty(e.pickedId)||e.encoded||!o.isGoogle(o.getConnected())||i.get({fileId:e.pickedId},(function(t){angular.isDefinedAndFilled(t.videoMediaMetadata)&&(e.encoded=!0,e.embedUrl=t.embedLink)}),(function(t){s.displayServerError(t),404===t.status&&(e.error=!0)}))},this.setParentController=function(e){c.parentCtrl=e,c.init()}}t.$inject=["$rootScope","$sce","$timeout","DriveFilesFactory","Translation","User","Utils"],angular.module("Widgets").directive("widgetVideo",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetVideo","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-video/views/widget-video.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l){function u(t){var n=l.getCurrent();n.properties=n.properties||{};var r=n.properties;angular.isUndefined(r)||angular.isUndefinedOrEmpty(t)||(n.properties=e.omit(r,["error","embedUrl","encoded","extension","height",t+"Id",t+"Name",t+"Url",t+"Size","thumbnail","url"]),"useFile"===r.titleType&&e.set(n,"title["+o.inputLanguage+"]",void 0),"useFileLink"===r.linkType&&e.set(r,"more.link["+o.inputLanguage+"]",void 0))}function d(e){if(!angular.isUndefined(e)){var t=l.getCurrent();t.properties=t.properties||{};var n=t.properties;return!!angular.isDefined(n[e+"Id"])||(delete n[e+"Id"],delete n[e+"Name"],!1)}}var p=this;p.deleteSelectedVideo=function(e){i.confirm(o.translate("FRONT.VIDEO.CONFIRM_DELETE_TITLE"),o.translate("FRONT.VIDEO.CONFIRM_DELETE_DESCRIPTION"),{cancel:o.translate("CANCEL"),ok:o.translate("OK")},(function(t){t&&(u(e),p.updateWidget())}))},p.drivePickerCallback=function(t,n){if(!angular.isUndefinedOrEmpty(t)&&!angular.isUndefinedOrEmpty(n)&&"video"===t.type){var r=l.getCurrent();r.properties=r.properties||{};var i=r.properties;angular.isDefinedAndFilled(t.id)?(i.url={},i.url[o.inputLanguage]=t.url,i.extension=e.last(t.mimeType.split("/")),i.encoded=!1,i[n+"Id"]=t.id,i[n+"Name"]=t.name,i[n+"Url"]=t.url,i.thumbnail=a.getDrivePreviewUrl(t.id),i[n+"Size"]=c.formatBytes(t.sizeBytes,2),angular.isDefinedAndFilled(t.embedUrl)&&(i.embedUrl=t.embedUrl,i.encoded=!0)):angular.isDefinedAndFilled(t.url)&&(i[n+"Id"]=t.url.split("/").pop()),delete i.error,p.updateWidget()}},p.isFileSelected=d,p.switchSource=function(e){var t=l.getCurrent(),n=t.properties||{};n.source!==e&&(n.source=e)},p.updateWidget=function(){n((function(){t.$broadcast("widget-iframe-settings",l.getCurrent().uuid)}))},function(){var e=l.getCurrent();e.properties=e.properties||{};var t=e.properties;angular.isUndefinedOrEmpty(t.source)&&(t.source="embed"),"drive"===t.source&&d("picked")&&s.isGoogle(s.getConnected())&&r.get({fileId:t.pickedId},(function(e){angular.isDefinedAndFilled(e.videoMediaMetadata)&&!t.encoded&&(t.thumbnail=a.getDrivePreviewUrl(e.id),t.embedUrl=e.embedLink,t.encoded=!0,p.updateWidget()),t.pickedSize=c.formatBytes(e.fileSize,2),t.pickedName=e.title}),(function(t){c.displayServerError(t),404===t.status&&(u("picked"),e.properties.error=!0)}))}()}t.$inject=["$rootScope","$timeout","DriveFilesFactory","LxNotificationService","Media","Translation","User","Utils","Widget"],angular.module("Controllers").controller("WidgetVideoSettingsController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(){var e=this;this.setParentController=function(t){e.parentCtrl=t}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetWall","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-wall/views/widget-wall.html"}}n.r(t),n.d(t,"WidgetWallDirective",(function(){return i})),n.d(t,"WidgetWallController",(function(){return r})),angular.module("Widgets").directive("widgetWall",i)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,v){function h(e,t){var n=v.getCurrent(),r=a()(n,"properties");s()(r,[e],t),n.properties=r}function y(){_=v.getCurrent(),I.userSpacesLoading=!0;var t=a()(_,"properties.provider",null);t&&Object(u.m)({provider:t.name}).then((function(e){var t=e.data;A.hasMore=t.more,A.page=t.page,I.userSpaces=a()(t,"items",[])})).catch((function(t){Object(f.b)(Object(g.h)("FRONT.FETCH_GROUPS_ERROR")),e.err(t)})).finally((function(){I.userSpacesLoading=!1,r((function(){n.$broadcast("widget-chat-settings",_.uuid)}))}))}function E(){_=v.getCurrent(),I.channelsLoading=!0;var t=a()(_,"properties.provider.name",null),i=a()(_,"properties.userSpace.id",null);Object(u.l)({provider:t,spaceId:i}).then((function(e){var t=e.data;w.cursor=t.cursor,w.hasMore=t.more,w.page=t.page,I.channels=a()(t,"items",[])})).catch((function(t){Object(f.b)(Object(g.h)("FRONT.FETCH_CHANNELS_FOR_GROUP_ERROR")),e.err(t)})).finally((function(){I.channelsLoading=!1,r((function(){n.$broadcast("widget-chat-settings",_.uuid)}))}))}function b(){_=v.getCurrent(),I.myChannelsLoading=!0;var t=a()(_,"properties.provider.name",null),i=a()(_,"properties.userSpace.id",null);Object(u.o)({provider:t,spaceId:i}).then((function(e){var t=e.data;D.hasMore=t.more,D.page=t.page,I.myChannels=a()(t,"items",[])})).catch((function(t){Object(f.b)(Object(g.h)("FRONT.FETCH_CHANNELS_FOR_GROUP_ERROR")),e.err(t)})).finally((function(){I.myChannelsLoading=!1,r((function(){n.$broadcast("widget-chat-settings",_.uuid)}))}))}function O(){var e=C(["contentType"]);return angular.isUndefinedOrEmpty(e)?"currentUserGroups":e}function C(e){var t=v.getCurrent(),n=a()(t,"properties");return a()(n,e)}function T(e){var t=C(["viewMode"]);t!==e&&h("viewMode",e)}function S(){I.providersLoading=!0,Object(p.c)().then((function(e){I.providers=a()(e,"data.providers",[])})).catch((function(t){Object(f.b)(Object(g.h)("FRONT.CHAT.FETCH_PROVIDERS_ERROR")),e.err(t)})).finally((function(){I.providersLoading=!1,r((function(){n.$broadcast("widget-wall-settings",_.uuid)})),_.properties.provider&&(h("provider",_.properties.provider),y(),_.properties.userSpace&&("currentUserGroups"===O()?b():E()))}))}var I=this,_={};I.userSpaces={},I.channels=[],I.providersLoading=!1;var A={hasMore:!1,page:void 0};I.userSpacesLoading=!1,I.userSpacesMoreLoading=!1,I.channelsLoading=!1,I.channelsMoreLoading=!1;var w={cursor:void 0,hasMore:!1,page:void 0};I.myChannelsLoading=!1,I.myChannelsMoreLoading=!1;var D={hasMore:!1,page:void 0};I.setAsMainWidget=function(){var e=v.getCurrent();if(e.isMainWidget){var t=c.getElementList(o.getCurrent(),"widget","isMainWidget",!0);angular.forEach(t,(function(t){t.uuid!==e.uuid&&(t.isMainWidget=!1)}))}n.$broadcast("widget-is-main-toggled",e.uuid,e.isMainWidget)},I.toggleContentType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O(),t=_.properties.contentType;t!==e&&(_.properties.channel=null,_.properties.userSpace=null,_.properties.targetedPost=null),h("contentType",e)},I.Config=i,I.switchViewMode=T,I.isGroupEmpty=function(){return l()(C(["userSpace"]))},I.hasFilter=function(e){return!!_.properties.provider&&("fbworkplace"!==_.properties.provider.name||"PROPERTIES"===e)},I.loadNextUserSpaces=function(){var i=t.defer();if(!A.hasMore)return i.resolve([]),i.promise;var o=a()(_,"properties.provider",null);return I.userSpacesMoreLoading=!0,Object(u.m)({page:A.page+1,provider:o}).then((function(e){var t=e.data;A.hasMore=t.more,A.page=t.page,i.resolve(a()(t,"items",[]))})).catch((function(t){Object(f.b)(Object(g.h)("FRONT.FETCH_GROUPS_ERROR")),e.err(t),I.userSpacesMoreLoading=!1})).finally((function(){I.userSpacesMoreLoading=!1,r((function(){n.$broadcast("widget-chat-settings",_.uuid)}))})),i.promise},I.loadNextChannels=function(){var i=t.defer();if(!w.hasMore)return i.resolve([]),i.promise;var o=a()(_,"properties.provider.name",null),s=a()(_,"properties.userSpace.id",null);return I.channelsMoreLoading=!0,Object(u.l)({page:w.page+1,cursor:w.cursor,provider:o,spaceId:s}).then((function(e){var t=e.data;w.cursor=t.cursor,w.hasMore=t.more,w.page=t.page,i.resolve(a()(t,"items",[]))})).catch((function(t){Object(f.b)(Object(g.h)("FRONT.FETCH_GROUPS_ERROR")),e.err(t),I.channelsMoreLoading=!1})).finally((function(){I.channelsMoreLoading=!1,r((function(){n.$broadcast("widget-chat-settings",_.uuid)}))})),i.promise},I.loadMyNextChannels=function(){var i=t.defer();if(!D.hasMore)return i.resolve([]),i.promise;var o=a()(_,"properties.provider",null),s=a()(_,"properties.userSpace.id",null);return I.myChannelsMoreLoading=!0,Object(u.o)({page:D.page+1,provider:o,spaceId:s}).then((function(e){var t=e.data;D.hasMore=t.more,D.page=t.page,i.resolve(a()(t,"items",[]))})).catch((function(t){Object(f.b)(Object(g.h)("FRONT.FETCH_GROUPS_ERROR")),e.err(t)})).finally((function(){I.myChannelsMoreLoading=!1,r((function(){n.$broadcast("widget-chat-settings",_.uuid)}))})),i.promise},I.selectUserSpace=function(){_=v.getCurrent(),I.channels=[],_.properties.channel=null;var e=C(["contentType"]);"currentUserGroups"===e?b():E()},I.selectProvider=function(e){_=v.getCurrent(),I.channels=[],I.userSpaces=[],_.properties.channel=null,_.properties.userSpace=null,_.properties.provider=e,y()},I.getProviderNameFromId=d.b,_=v.getCurrent(),_.properties=_.properties||{},I.toggleContentType(O()),S(),function(){I.availablePostTypes=m.POST_TYPES,I.availableOrderBy=m.ORDER_BY;var e=a()(_,"properties");angular.isUndefinedOrEmpty(e.viewMode)&&T("list"),angular.isUndefinedOrEmpty(e.orderBy)&&(e.orderBy="CREATED"),angular.isUndefinedOrEmpty(e.postType)&&(e.postType="ALL"),angular.isUndefinedOrEmpty(e.listOrderDir)&&(e.listOrderDir="asc"),angular.isUndefinedOrEmpty(e.maxNumber)&&h("maxNumber",10),angular.isUndefinedOrEmpty(e.itemsPerLine)&&(e.itemsPerLine=1),angular.isUndefinedOrEmpty(e.slideshowAutoplay)&&(e.slideshowAutoplay=!0),angular.isUndefinedOrEmpty(e.slideshowInterval)&&(e.slideshowInterval=2e3),s()(_.properties,e)}()}n.r(t),n.d(t,"WidgetWallSettingsController",(function(){return r}));var i=n(4),a=n.n(i),o=n(7),s=n.n(o),c=n(27),l=n.n(c),u=n(95),d=n(168),p=n(520),f=n(36),g=n(5),m=n(818);r.$inject=["$log","$q","$rootScope","$timeout","Config","Content","ContentTemplate","Widget"],angular.module("Controllers").controller("WidgetWallSettingsController",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t){var n=this;t.$on("inputLanguage",(function(t,r){var i=e.get(n.widget,"properties",{});i.inputLang=r.lang})),this.setParentController=function(e){n.parentCtrl=e}}t.$inject=["$scope"],angular.module("Widgets").directive("widgetWeather",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["widgetWeather","^widget"],restrict:"E",scope:{widget:"<"},templateUrl:"/client/front-office/modules/content/modules/widget/modules/widget-weather/views/widget-weather.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n){var r=4,i=7,o=1;this.updateWidget=function(){var s=n.getCurrent(),c=s.properties.maxNumber;c>i?a()(s,["properties","maxNumber"],i):angular.isDefinedAndFilled(c)&&c<o?a()(s,["properties","maxNumber"],o):angular.isUndefinedOrEmpty(c)&&a()(s,["properties","maxNumber"],r),t((function(){e.$broadcast("widget-weather-settings",n.getCurrent().uuid)}))}}n.r(t),n.d(t,"WidgetWeatherSettingsController",(function(){return r}));var i=n(7),a=n.n(i);r.$inject=["$rootScope","$timeout","Widget"],angular.module("Controllers").controller("WidgetWeatherSettingsController",r)},function(e,t,n){"use strict";function r(){}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"/client/front-office/modules/document/views/document-management-menu.html"}}n.r(t),n.d(t,"DocumentManagementMenuController",(function(){return r})),n.d(t,"LsDocumentManagementMenuDirective",(function(){return i})),angular.module("Directives").directive("lsDocumentManagementMenu",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r){var i=this;i.listKey=void 0,i.Favorite=r,i.getClasses=function(){var e=[];return"dark"===i.theme?e.push("favorite-button__btn--theme-dark"):e.push("favorite-button__btn--theme-light"),e},i.toggleFavorite=function(a,o){a=a||angular.noop,o=o||angular.noop;var s=i.entity.markedAsFavorite?"remove":"add",c=n.getCurrent();"DirectoryEntry"===i.kind&&t.handleTaggingMap(s+"-favorite","directory-entry",{directory:e.get(i.entity,"directory"),isHomePage:!!c&&Boolean(c.isHomepage),item:i.entity}),i.entity.markedAsFavorite?r.del(i.entity,i.kind,i.listKey,a,o):r.save(i.entity,i.kind,i.listKey,a,o)},i.listKey="favorite-"+i.entity.uid,i.tooltip=i.tooltip||{},i.tooltip.add=i.tooltip.add||"",i.tooltip.remove=i.tooltip.remove||"",i.tooltipPosition=i.tooltipPosition||"left"}t.$inject=["Analytics","Content","Favorite"],angular.module("Directives").directive("lsFavoriteButton",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{entity:"<lsEntity",kind:"@lsKind",theme:"@?lsTheme",tooltip:"<?lsTooltip",tooltipPosition:"@?lsTooltipPosition"},templateUrl:"/client/front-office/modules/favorites/views/favorite-button.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/favorite/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"having_target"}},list:{isArray:!1,method:"POST",params:{methodKey:"targets"}},save:{isArray:!1,method:"POST",params:{methodKey:"mark"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("FavoriteFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r){var i=t.createLumsitesBaseService(e,{objectIdentifier:"uid"});return i.del=function(t,i,a,o,s){o=o||angular.noop,s=s||angular.noop,e.delete({kind:i,uid:t.uid},(function(){n.info(r.translate("USER_FAVORITES_DELETE")),t.markedAsFavorite=!1}),s,a)},i.save=function(e,a,o,s,c){s=s||angular.noop,c=c||angular.noop,t.proto.prototype.save.call(i,{target:{kind:a,uid:e.uid}},(function(t){n.info(r.translate("USER_FAVORITES_ADD")),e.markedAsFavorite=!0,s(t)}),c,o)},i}n.r(t),n.d(t,"FavoriteService",(function(){return r})),r.$inject=["FavoriteFactory","LumsitesBaseService","LxNotificationService","Translation"],angular.module("Services").service("Favorite",r)},function(e,t){!function(){"use strict";function e(){}angular.module("Directives").directive("feedBlock",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{feed:"=",viewMode:"@?"},templateUrl:"/client/front-office/modules/feed/views/feed-block.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/feed/subscribers/:methodKey",{},{saveSubscription:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("FeedSubscribersFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/feed/user/subscription/:methodKey",{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("FeedUserSubscriptionFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/feed/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},getMulti:{isArray:!1,method:"POST",params:{methodKey:"getMulti"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},search:{isArray:!1,method:"POST",params:{methodKey:"search"}},synchronize:{isArray:!1,method:"POST",params:{methodKey:"synchronize"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("FeedFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c){function u(){var e=[];return angular.forEach(y.FEED_ALL_AND_PUBLIC,(function(t){var n;t===y.PUBLIC.id?(n=y.PUBLIC,angular.isDefinedAndFilled(n)&&(n.name="FEED_NAME_PUBLIC")):n=y.ALL,angular.isDefinedAndFilled(n)&&e.push(n)})),e}function p(e,n,i){if(angular.isUndefinedOrEmpty(T[i])||angular.isDefinedAndFilled(d()(n,"restrictToFeeds")))return[];i=i||"default";var a=T[i]||[],o=angular.fastCopy(d()(n,"exceptFeeds",[]));t.isPublicContentAuthorized()&&r.getInstance().publicContentAuthorized||!angular.isDefinedAndFilled(y.PUBLIC)||o.push(y.PUBLIC.id);var l=m()(o,y.FEED_ALL_AND_PUBLIC);if(l.length===y.FEED_ALL_AND_PUBLIC.length)return[];var u=angular.isDefinedAndFilled(e);return u&&(e=e.toLowerCase()),s()(a,(function(t){return(!u||f()(c.translate(t.name).toLowerCase(),e))&&!f()(o,t.id)}))}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"default",a=y.getFilteredList(i),o=t?e:d()(a,O,[]).concat(d()(a,b,[])).concat(e);C[i]={},a=y.getFilteredList(i),angular.isUndefinedOrEmpty(T[i])&&(T[i]=u()),angular.isDefinedAndFilled(T[i])&&(a[O]=p(n,r,i)),angular.isUndefinedOrEmpty(a[O])&&delete a[O],a[b]=s()(o,(function(e){return!f()(y.FEED_ALL_AND_PUBLIC,e.id)}))}function v(e,t){var n=angular.isDefinedAndFilled(m()(e,y.FEED_ALL_AND_PUBLIC))?[]:e;return angular.isUndefinedOrEmpty(t)?n:a()(n,t)}var y=i.createLumsitesBaseService(n,{autoInit:!1,objectIdentifier:"uid"}),b="",O="",C={},T={};return y.ALL={},y.PUBLIC={},y.FEED_ALL_AND_PUBLIC=[],y.defaultParams={},y.feedKeyToFeed=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:angular.noop,r=arguments.length>2?arguments[2]:void 0;return angular.isUndefinedOrEmpty(t)?(n(),e.reject()):y.getFeedById(t,r).then(n).catch((function(){n()}))},y.feedToFeedKey=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:angular.noop;if(!angular.isUndefinedOrEmpty(d()(e,"id")))return t(e.id),e.id;t()},y.getFeedById=function(t,n){if(angular.isUndefinedOrEmpty(t))return e.reject();var r;if(t===y.ALL.id?r=y.ALL:t===y.PUBLIC.id&&(r=angular.fastCopy(y.PUBLIC),r.name="FEED_NAME_PUBLIC"),angular.isUndefinedOrEmpty(r)&&angular.isDefinedAndFilled(n)){var i=y.getFilteredList(n);i=d()(i,O,[]).concat(d()(i,b,[])),r=l()(i,{id:t})}if(angular.isDefinedAndFilled(r))return e.resolve(angular.fastCopy(r));var a=h()(C,(function(e,t){return e.concat(d()(t,b,[]))}),[]);return r=l()(a,{id:t}),angular.isDefinedAndFilled(r)?e.resolve(r):e((function(e,r){y.get(t,e,r,n,void 0,!1)}))},y.getFilteredList=function(e){return C[e||"default"]},y.getKeyOthers=function(){return b},y.getMulti=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";angular.isUndefinedOrEmpty(t)&&e.resolve([]);var i=n.getMulti({uid:t}).$promise;return i.then((function(e){g(e,!0,void 0,void 0,r)})),i},y.initFeedList=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return angular.isDefinedAndFilled(n)?e.resolve(n):y.search(void 0,t,r)},y.removeFeedIdsInSourceFeedArray=function(e,t){return E()(t,e)},y.removeFeedIdsNotInSourceFeedArray=function(e,t){return f()(e,y.ALL.uid)?t:m()(e,t)},y.search=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=angular.fastCopy(n)||{};return angular.isDefinedAndFilled(a.restrictTo)&&(a.restrictToFeeds=v(a.restrictTo,a.except)),angular.isDefinedAndFilled(a.except)&&(a.exceptFeeds=angular.fastCopy(a.except)),delete a.restrictTo,delete a.except,a.maxResults=angular.isUndefined(a.maxResults)?30:a.maxResults,angular.isUndefinedOrEmpty(t)&&angular.isDefinedAndFilled(a.restrictToFeeds)&&(a.restrictToFeeds=a.restrictToFeeds.splice(0,a.maxResults)),a.query=t,e((function(e,n){y.getMinResults(a,(function(e,n){g(e,n,t,a,r)}),(function(){return 0}),(function(){e(y.getFilteredList(r))}),n,r,"search",i)}))},y.setTechnicalFeeds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.ALL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.PUBLIC;y.ALL=angular.fastCopy(e),y.PUBLIC=angular.fastCopy(t),y.FEED_ALL_AND_PUBLIC=[],angular.isDefinedAndFilled(y.ALL)&&y.FEED_ALL_AND_PUBLIC.push(y.ALL.id),angular.isDefinedAndFilled(y.PUBLIC)&&y.FEED_ALL_AND_PUBLIC.push(y.PUBLIC.id)},y.synchronize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:angular.noop,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:angular.noop;angular.isUndefinedOrEmpty(e)||n.synchronize(e,t,r)},y.reduxReducerName="feed",y.reduxUpdateActionType="feed/update",y.mapStateToRedux=function(){return{ALL:y.ALL,FEED_ALL_AND_PUBLIC:y.FEED_ALL_AND_PUBLIC,PUBLIC:y.PUBLIC}},y.init=function(){b='<i class="mdi mdi-account-multiple"></i> '.concat(c.translate("FEED_GROUP_OTHERS")),O='<i class="mdi mdi-earth"></i> '.concat(c.translate("FEED_GROUP_TECHNICAL")),y.defaultParams={customerId:t.getCustomerId(),instance:r.getCurrentInstanceId()},o.subscribe(y,!0)},y}n.r(t),n.d(t,"FeedService",(function(){return r}));var i=n(279),a=n.n(i),o=n(75),s=n.n(o),c=n(21),l=n.n(c),u=n(4),d=n.n(u),p=n(17),f=n.n(p),g=n(157),m=n.n(g),v=n(223),h=n.n(v),y=n(106),E=n.n(y);r.$inject=["$q","Customer","FeedFactory","Instance","LumsitesBaseService","ReduxStore","Translation"],angular.module("Services").service("Feed",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/media/fsitems/:methodKey",{},{trash:{isArray:!1,method:"POST",params:{methodKey:"delete"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("FsitemsFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r,i){var a=r.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"});return a.defaultParams={},a.getDefaultFieldsToDisplay=function(){var t=n.getProperty(e.INSTANCE_PROPERTIES.FILE_FIELDS);if(t=i.mapEnabledEntries(t),angular.isUndefinedOrEmpty(t))return{};var r={};return angular.forEach(t,(function(e){r[e]=!0})),r},a.putItemsToTrash=function(e,r,i,a,o){var s=[];return angular.forEach(r,(function(e){s.push({kind:"Folder",uid:e.id})})),angular.forEach(e,(function(e){s.push({kind:"Media",uid:e.id})})),t.trash({instance:n.getCurrentInstanceId(),itemIds:s},i,a,o)},a.init=function(){a.defaultParams={instance:n.getCurrentInstanceId()}},a}e.$inject=["Config","FsitemsFactory","Instance","LumsitesBaseService","Utils"],angular.module("Services").service("Fsitems",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/header/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"destroy"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("HeaderFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o){var s,c=a.createLumsitesBaseService(r,{autoInit:!1,objectIdentifier:"uid"}),l=t.defer();return c.defaultParams={},c.is={initialized:!1,initializing:!1},c.isActive=!1,c.getBackgroundImageUrl=function(){if(angular.isUndefinedOrEmpty(e.get(c.getCurrent(),"images")))return{};var t=o.getMediaUrl("/serve/"+c.getCurrent().images[0]);return{"background-image":"url("+t+")"}},c.getDefaultHeader=function(){return s=s||{},s.name=s.name||"default",angular.fastCopy(s)},c.setDefaultHeader=function(e){angular.isUndefinedOrEmpty(e)||(s=angular.fastCopy(e))},c.init=function(){if(c.defaultParams={customer:n.getCustomerId(),instance:i.getCurrentInstanceId()},c.is.initializing)return l.promise;c.is.initializing=!0;var e=i.getInstance();return angular.isDefinedAndFilled(s)?(l.resolve(s),l.promise):(s=e.header,angular.isDefinedAndFilled(s)?l.resolve(s):angular.isUndefinedOrEmpty(e.defaultHeader)?l.resolve():(c.get(e.defaultHeader,(function(e){s=e,l.resolve(s)}),l.resolve),l.promise.finally((function(){c.is.initializing=!1,c.is.initialized=!0}))),l.promise)},c}t.$inject=["$q","Customer","HeaderFactory","Instance","LumsitesBaseService","Utils"],angular.module("Services").service("Header",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a,o){var s=this;s.Community=e,s.Content=t,s.Customer=n,s.Instance=r,s.Settings=i,s.User=a,s.Utils=o}e.$inject=["Community","Content","Customer","Instance","Settings","User","Utils"],angular.module("Controllers").controller("HotkeyController",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/instance/script/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("InstanceScriptFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return t.createLumsitesBaseService(e,{objectIdentifier:"uid"})}e.$inject=["InstanceScriptFactory","LumsitesBaseService"],angular.module("Services").service("InstanceScript",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u,d){var p=this,f=!1,g=[];p.backgroundImage={},p.classes=[],p.fieldsToDisplay=[],p.secondaryField=void 0,p.tooltip={add:l.translate("FRONT.INSTANCE.ADD_TO_MY_SITES"),remove:l.translate("FRONT.INSTANCE.REMOVE_FROM_MY_SITES")},p.Customer=i,p.Features=a,p.Instance=o,p.Metadata=s,p.Translation=l,p.Utils=d,p.getClasses=function(){var t=[];return"dark"===p.theme?t.push("instance-block--theme-dark"):t.push("instance-block--theme-light"),"grid"===p.viewMode?t.push("instance-block--view-mode-grid"):t.push("instance-block--view-mode-list"),"ungroup"===p.viewModeVariant?t.push("instance-block--view-mode-variant-ungroup"):t.push("instance-block--view-mode-variant-group"),angular.isDefinedAndFilled(e.get(p.widgetProperties,"style.content.shadowElevation"))&&"ungroup"===p.viewModeVariant&&t.push("instance-block--z-depth-"+p.widgetProperties.style.content.shadowElevation),p.widgetProperties.itemsSeparator?t.push("instance-block--has-separator"):t.push("instance-block--no-separator"),t.push(g),t},p.getLink=function(){var t=l.translate(e.get(p.instance,"properties.gsite-url","")).toLowerCase();return e.includes(t,"sites.google.com")?t:n.location.origin+d.buildInstanceUrl(p.instance,i.getCustomerSlug())},p.getStyle=function(){if(angular.isUndefinedOrEmpty(p.widgetProperties))return{};var t={};if("list"===p.viewMode){var n=p.widgetProperties.itemsMargin;angular.isDefinedAndFilled(n)&&(t.marginBottom=n+"px","group"===p.viewModeVariant&&(t.paddingBottom=n+"px"))}return"ungroup"===p.viewModeVariant&&(e.assign(t,e.pick(p.widgetProperties.style.content,["padding","paddingTop","paddingBottom","paddingLeft","paddingRight","backgroundColor"])),e.assign(t,e.pick(p.widgetProperties.style.content,["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"])),e.assign(t,e.pick(p.widgetProperties.style.content,["borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"])),e.assign(t,e.pick(p.widgetProperties.style.content,["borderColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"])),"ungroup"===p.viewModeVariant&&e.assign(t,e.pick(p.widgetProperties.style.content,["shadowElevation","shadowOpacity"]))),c.adjustShadow(t)},p.getMetadataFunctionalInnerId=function(e){return""!==e?"instance-block-metadata__metadata--"+e:""},p.redirectToHomepage=function(){n.open(d.buildInstanceUrl(p.instance,i.getCustomerSlug()),"_blank")},t.$on("widget-content-list-theme-update",(function(e,t,n){angular.isUndefinedOrEmpty(n)||(p.theme=n)})),p.init=function(){var t;angular.isUndefinedOrEmpty(p.instance)&&(p.instance={},p.secondaryField=""),t=angular.isUndefinedOrEmpty(p.fields)?o.getProperty(r.INSTANCE_PROPERTIES.INSTANCE_FIELDS):p.fields,p.fieldsToDisplay=[],angular.forEach(t,(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=e;angular.isObject(e)||(t={enable:!0,name:e}),t.enable&&p.fieldsToDisplay.push(t),"metadata"===t.name&&t.enable&&(f=!0)}})),f&&angular.isDefinedAndFilled(p.instance.metadata)&&(p.metadata=[],s.getRefactoredMetadata(!1).then((function(){angular.forEach(p.instance.metadata,(function(e){p.metadata.push(s.getMetadataFromKey(e,!1,!0))})),p.metadataIsVisibleInFront=angular.isDefinedAndFilled(e.find(p.metadata,{isVisibleFront:!0}))}))),p.instance.isTogglable=function(){var t=e.get(p,"instance.uid");if(angular.isUndefinedOrEmpty(t)||!u.isConnected())return!1;var n=[];t===o.getCurrentInstanceId()?n=e.get(o.getInstance(),"isInFavoriteFeedKeys",[]):o.getInstanceById(t,(function(t){n=e.get(t,"isInFavoriteFeedKeys",[])}));var r=u.hasSubscriptions(n);return r&&p.instance.deletableFromFavorite||!r}(),g=s.getMetadataClasses(p.instance.metadata,"instance-block--metadata-")},p.init()}t.$inject=["$scope","$window","Config","Customer","Features","Instance","Metadata","Style","Translation","User","Utils"],angular.module("Directives").directive("instanceBlock",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{fields:"<?",hideFavorite:"<?",instance:"<",theme:"@?",viewMode:"@?",viewModeVariant:"@?",widgetProperties:"=?"},templateUrl:"/client/front-office/modules/instance/views/instance-block.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,d,p,f,g,m,v,h,y,E,b,O,C,T,S,I,_,A,w){var D,L,P=this,N="user-list-dialog";P.classes=[],P.displayMobileSidebar="desk"!==h.breakpoint,P.hasMainNavInheritance=!1,P.isUserListDialogDisplayed=!1,P.ActivePost=i,P.ConfigTheme=c,P.Content=d,P.Customer=p,P.Features=f,P.InitialSettings=m,P.Instance=v,P.Layout=h,P.Lightbox=y,P.OnBoardingTour=C,P.Translation=S,P.Tutorial=I,P.User=_,P.UserDirectory=A,P.hasNannyFeature=f.hasFeature(u.b),P.getAppClass=function(){w.empty(P.classes);var e=d.getCurrent(),t=d.getViewMode();h.isSidebarOpened&&"basic"!==t&&P.classes.push("app-content--is-pushed"),"default"===t?P.classes.push("app-content--designer-mode"):"simple"===t?P.classes.push("app-content--simple-designer-mode"):"basic"===t&&P.classes.push("app-content--basic-designer-mode");var r=v.getInstance();if(angular.isDefinedAndFilled(r)&&(angular.isUndefinedOrEmpty(r.parent)?P.classes.push("app-content--is-main-instance"):P.classes.push("app-content--is-sub-instance")),angular.isDefinedAndFilled(e)){e.isHomepage&&P.classes.push("app-content--is-homepage");var i=a()(e,"properties.class",a()(e,"template.properties.class"));angular.isDefinedAndFilled(i)&&Array.prototype.push.apply(P.classes,w.getCustomClass(i,"app-content--module-"))}else P.isAdminView()&&P.classes.push("app-content--is-admin");return n.is("app.front.search")&&P.classes.push("app-content--module-search"),P.InitialSettings.IS_BETA_ENV&&P.classes.push("app-content--is-beta"),P.classes},P.getAppId=function(){var e=d.getCurrent();return a()(e,"properties.id",a()(e,"template.properties.id"))},P.getMobileSidebarBackground=function(){var e=g.getCurrent(),t=a()(e,"properties.media");if(!angular.isUndefinedOrEmpty(t)){var n=S.translate(O.getMediaContent(e.properties.media[0]));return angular.isDefinedAndFilled(a()(n,"value"))?w.getBackgroundImage(n.value):void 0}},P.isAdminView=function(){return s()(n.current.name,"app.admin")},t.$on("layout-breakpoint",(function(e,t,n){("desk"===t||angular.isUndefinedOrEmpty(n)||"desk"===n)&&(P.displayMobileSidebar=!0)})),t.$on("user-list-dialog__closed",(function(){P.isUserListDialogDisplayed=!1})),t.$on("user-list-dialog__open",(function(t,n){var i=n.params,a=n.title,o=n.serviceName,s=n.methodName,c=n.projection;P.isUserListDialogDisplayed=!0,r((function(){w.waitForAndExecute("#".concat(N),(function(){E.open(N),e.$broadcast("user-list-dialog__filter",i,a,o,s,c)}))}))})),t.$on("user-settings-current-lang",(function(e,t){b.init(),d.setDefaultLang(t)})),L=v.getInstance(),S.initLanguages(L),P.hasMainNavInheritance=P.Features.hasMainNavInheritance(),P.hasMainNavInheritance&&P.Instance.getCurrentInstanceParent(!1).then((function(e){D=e,P.instanceParentLogo=function(){if(angular.isUndefinedOrEmpty(D))return"";var e="",t=S.translate(D.logoUrl);if(angular.isDefinedAndFilled(D.logo)){var n={};angular.forEach(D.logo,(function(e){n[e.lang]=e}));var r=S.translate(n);if(angular.isUndefinedOrEmpty(r))return"";e=angular.isDefinedAndFilled(r.url)?r.url:r.logo,e=w.resizeImage(e)}else e=angular.isDefinedAndFilled(t)?w.resizeImage(t):w.getMediaUrl(m.PUBLIC_PATH_PREFIX+l()(o.DEFAULT_LOGO,"/"));return e}(),P.instanceParentLink=v.getUrl(D),P.instanceParentStyle=T.getInstanceParentStyle()}))}n.r(t),n.d(t,"AppController",(function(){return r}));var i=n(4),a=n.n(i),o=n(107),s=n.n(o),c=n(552),l=n.n(c),u=n(297);r.$inject=["$rootScope","$scope","$state","$timeout","ActivePost","Config","ConfigTheme","Content","Customer","Features","Header","InitialSettings","Instance","Layout","Lightbox","LxDialogService","MainNav","Media","OnBoardingTour","Style","Translation","Tutorial","User","UserDirectory","Utils"],angular.module("Controllers").controller("AppController",r)},function(e,t){!function(){"use strict";function e(e,t,n){var r=this;r.Instance=e,r.currentView=t.current.name,n.$on("$stateChangeSuccess",(function(e,n){r.currentView=t.current.name}))}e.$inject=["Instance","$state","$scope"],angular.module("Controllers").controller("FrontController",e)}()},function(e,t,n){"use strict";function r(e,t,n,r){function i(e){return angular.extend(angular.fastCopy(e),{lastName:(angular.isDefinedAndFilled(e.lastName)?"".concat(e.lastName," - "):"")+e.customer.name})}angular.noop(r);var o,c=this;c.accounts=[],c.Instance=t,c.goToAccountHome=function(t){angular.isDefinedAndFilled([t.slug,a()(t.instance,"slug")],"every")&&(e.location.href="/a/".concat(t.slug,"/").concat(t.instance.slug))},o=n.getAccountChoices(),c.accounts=s()(o||c.accounts||[],i)}n.r(t),n.d(t,"LoginChoiceController",(function(){return r}));var i=n(4),a=n.n(i),o=n(28),s=n.n(o);r.$inject=["$window","Instance","User","resolveInitialSetting"],angular.module("Controllers").controller("LoginChoiceController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,h,y,E){var b=this;b.accountType=void 0,b.buttonDisabled=!1,b.captcha={id:null,response:null,valid:!1},b.hasMoreButton=!1,b.icons={mdiEmailOpenOutline:v.ab,mdiLock:v.ac},b.isAllButtonsVisible=!1,b.loginError={email:void 0,message:void 0},b.externalLoginAllowed=!1,b.form={},b.loginGoogleOnly=!0,b.loginMode="google",b.logout=!1,b.redirectUri=void 0,b.relayState=e.search().RelayState,b.samlRequest=e.search().SAMLRequest,b.values={email:void 0,password:void 0,repassword:void 0},b.Customer=i,b.FormValidation=o,b.Instance=c,b.contains=l.a,b.disableButton=function(){b.buttonDisabled=!0,r((function(){b.buttonDisabled=!1}),1e4)},b.displayActionLinks=function(){return"google"===b.loginMode&&i.isExternalAccounts()||"email"===b.loginMode},b.displayMoreButtons=function(){b.isAllButtonsVisible=!0,angular.forEach(b.samlProviders,(function(e){return e.isVisible=!0}))},b.hideMoreButtons=function(){b.isAllButtonsVisible=!1,angular.forEach(b.samlProviders,(function(e){return e.isVisible=f()(m()(b.loginMethods,"email","saml"))+f()(b.samlProviders)<=3}))},b.openPasswordDialog=function(){E.waitForAndExecute("#forgotten-password")},b.registerForm=function(e){r((function(){b.form.forgottenPasswordForm=e.forgottenPasswordForm}))},b.resetPassword=function(){p.reset({password:b.values.password,repassword:b.values.repassword,token:s()(e.search(),"token")},(function(t){t.status?(h.success(y.translate("LOGIN_PASSWORD_RESET_SUCCESS")),e.search("token",null).replace(),e.search("from","email").replace()):E.displayServerError({data:{error:{message:t.error}}})}),(function(e){E.displayServerError({data:{error:{message:e.data.message}}})}))},b.sendNewPassword=function(){if(!angular.isUndefinedOrEmpty([b.values.email,b.captcha.response],"some")){var e=b.form.forgottenPasswordForm;e.$valid||o.setFormDirty(e),p.newPassword({captcha:b.captcha.response,email:b.values.email},(function(e){e.status?(h.success(y.translate("LOGIN_FORGOTTEN_PASSWORD_EMAIL_SENT")),g.close("forgotten-password")):E.displayServerError({data:{error:{message:e.error||"LOGIN_FORGOTTEN_PASSWORD_UNKNOWN_EMAIL"}}})}),(function(e){E.displayServerError({data:{error:{message:e.data.message}}})}))}},b.switchMode=function(t){e.search("from",t).replace()},t.$watch((function(){return e.search().from}),(function(e){i.isSsoEnabled()?b.loginMode=angular.isDefined(e)?e:"email":b.loginMode=angular.isDefined(e)&&b.externalLoginAllowed?e:"google"})),t.$on("lx-dialog__close-end",(function(e,t){"forgotten-password"===t&&angular.isDefinedAndFilled(b.captcha.response)&&(grecaptcha.reset(b.captcha.id),b.captcha.response=null,b.captcha.valid=!1)})),t.$on("lx-dialog__open-end",(function(e,n){"forgotten-password"===n&&E.loadGoogleCaptcha((function(){E.initGoogleCaptcha(t,b.captcha)}))})),function(){angular.element("#ghost-header").css("display","none"),u.reset(),window.localStorage&&localStorage.clear(),b.externalLoginAllowed=i.isExternalAccounts(),b.loginGoogleOnly=i.getCustomer()&&i.getCustomer().loginGoogleOnly,angular.isDefinedAndFilled(n.r)&&(b.redirectUri=n.r),b.logout=angular.isDefined(e.search().logout),b.accountType=e.search().accountType,b.loginMethods=s()(i.getCustomer(),"loginMethods",["google"]),b.samlProviders=s()(i.getCustomer(),"samlProviders"),"true"===e.search().denied&&h.error(y.translate("LOGIN_NOT_AUTHORIZED_INFO")),angular.isDefinedAndFilled(e.search().error)&&a()(b.loginError,{accountType:b.accountType||"google",email:E.escapeHtmlTags(e.search().email),message:E.escapeHtmlTags(e.search().error)}),b.loginError.logoutUrl=s()(i.getCustomer(),"logout_urls.".concat(b.loginError.accountType),"/logout"),b.isNewLogin=angular.isDefinedAndFilled(d()(b.loginMethods,["microsoft","okta","saml"])),angular.isDefined(n["forgotten-password"])&&r(b.openPasswordDialog);var t="NEED_LOGIN";!b.logout&&b.loginGoogleOnly&&l()(b.loginMethods,"saml")&&(angular.isUndefinedOrEmpty(b.loginError.message)||b.loginError.message===t)?r((function(){var e=angular.element("#samlLoginForm");e&&e.submit()}),0):!b.logout&&b.loginGoogleOnly&&l()(b.loginMethods,"microsoft")&&(angular.isUndefinedOrEmpty(b.loginError.message)||b.loginError.message===t)?r((function(){var e=angular.element("#microsoftLoginForm");e&&e.submit()}),0):b.logout||!b.loginGoogleOnly||!angular.isUndefinedOrEmpty(b.loginError.message)&&b.loginError.message!==t||r((function(){var e=angular.element("#googleLoginForm");e.submit()}),0),b.hasMoreButton=f()(m()(b.loginMethods,"email","saml"))+f()(b.samlProviders)>3,b.hideMoreButtons()}()}n.r(t),n.d(t,"LoginController",(function(){return r}));var i=n(517),a=n.n(i),o=n(4),s=n.n(o),c=n(17),l=n.n(c),u=n(157),d=n.n(u),p=n(749),f=n.n(p),g=n(106),m=n.n(g),v=n(12);r.$inject=["$location","$scope","$stateParams","$timeout","Customer","FormValidation","Instance","LocalStorage","LoginFactory","LxDialogService","LxNotificationService","Translation","Utils"],angular.module("Controllers").controller("LoginController",r)},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/service/login/:key"),{},{checkToken:{isArray:!1,method:"GET",params:{key:"token"}},newPassword:{isArray:!1,method:"POST",params:{key:"forgottenPassword"}},reset:{isArray:!1,method:"POST",params:{key:"reset"}}})}n.r(t),n.d(t,"LoginFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("LoginFactory",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){var o=this;o.isContentLoading=!1,o.mainNav=[],o.mouseEnterActive=!1,o.ConfigTheme=r,o.MainNav=i,o.Style=a,o.enableNav=function(){o.mouseEnterActive&&(o.isContentLoading=!1)},o.setMainNav=function(){var t=i.getCurrent();angular.isDefinedAndFilled(e.get(t,"items"))&&(o.mainNav=t.items.filter((function(e){return angular.isDefinedAndFilled(e)&&!e.hidden}))||[])},t.$on("main-nav-front-state-change-start",(function(){o.isContentLoading=!0,o.mouseEnterActive=!1})),t.$on("main-nav-front-state-change-success",(function(){o.mouseEnterActive=!0})),t.$on("main-nav-loaded",o.setMainNav),t.$on("instance-style-settings",(function(){o.mainNav=[],n(o.setMainNav)})),o.setMainNav()}t.$inject=["$scope","$timeout","ConfigTheme","MainNav","Style"],angular.module("Controllers").controller("MainNavFrontController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,c,l,u,d,p,f,g){function m(e){return v.areChildrenDisplayed=v.hasChildren&&(s.SHOW_SUB_MENU&&"root"!==v.level||h),s.SHOW_SUB_MENU||!v.areChildrenDisplayed||"desk"!==u.breakpoint||angular.isUndefinedOrEmpty(o()(e,"currentTarget"))?(v.displayElementOnTheLeft=!1,v.isPositionChecked=s.SHOW_SUB_MENU?s.SHOW_SUB_MENU:h,v.areChildrenDisplayed):(r((function(){var t=angular.element(e.currentTarget).find(".main-nav__children");if(!angular.isUndefinedOrEmpty(t)){var n=angular.element(i).width(),r=t.offset().left,a=t.width();v.displayElementOnTheLeft=n<r+a,v.isPositionChecked=!0}})),v.areChildrenDisplayed)}var v=this,h=!1;v.areChildrenDisplayed=!1,v.childNavIsOpened=!1,v.classes=[],v.hasChildren=!1,v.isPositionChecked=!1,v.levelNumber=1,v.navItemProperties={level:1,link:void 0,title:void 0},v.styles={icon:{},link:{}},v.isActiveElement=function(){return v.childNavIsOpened=!1,v.isActive=d.isActiveItem(v.navItem),v.isActive&&e.$emit("active-element-found"),function(){g.empty(v.classes),angular.isArray(v.classes)||(v.classes=[]);var e=o()(v.navItem,"properties.class");angular.isDefinedAndFilled(e)&&Array.prototype.push.apply(v.classes,g.getCustomClass(e,"main-nav__child--")),v.isActive&&v.classes.push("main-nav__child--is-active"),d.hasVisibileChildren(v.navItem)&&v.classes.push("main-nav__child--has-children"),v.classes}(),function(){if(g.empty(v.styles.link),g.empty(v.styles.icon),angular.isObject(v.styles.link)&&!angular.isArray(v.styles.link)||(v.styles.link={}),angular.isObject(v.styles.icon)&&!angular.isArray(v.styles.icon)||(v.styles.icon={}),"root"!==v.level)return v.styles;var e=p.getCurrent("global");if(angular.isDefinedAndFilled(o()(e,"properties.mainNav.fontColor"))&&(v.styles.link.color=e.properties.mainNav.fontColor),angular.isDefinedAndFilled(o()(e,"properties.mainNav.fontSize"))&&(v.styles.link.fontSize="".concat(parseInt(e.properties.mainNav.fontSize,10),"px")),angular.isDefinedAndFilled(o()(e,"properties.mainNav.fontWeight")))switch(e.properties.mainNav.fontWeight.toLowerCase()){case"light":v.styles.link.fontWeight=300;break;case"normal":v.styles.link.fontWeight=400;break;case"semibold":v.styles.link.fontWeight=500;break;case"bold":v.styles.link.fontWeight=700}angular.isDefinedAndFilled(o()(e,"properties.mainNav.iconColor"))&&(v.styles.icon.color=e.properties.mainNav.iconColor),angular.isDefinedAndFilled(o()(e,"properties.mainNav.iconSize"))&&(v.styles.icon.fontSize="".concat(parseInt(e.properties.mainNav.iconSize,10),"px")),v.styles}(),v.isActive},v.mouseEnter=function(e){return h=!0,m(e)},v.mouseLeave=function(){return h=!1,m()},v.openNavItemLink=function(e){var t=l.getCurrent();a.handleTaggingMap("open-menu-link","menu",{isHomePage:!!angular.isDefined(t)&&t.isHomepage,item:v.navItem}),d.openNavItemLink(v.navItem,g.shouldOpenInNewWindow(e)),u.closeMobileSidebar()},e.$on("active-element-found",(function(){v.childNavIsOpened=!0})),e.$on("is-main-nav-item-active",v.isActiveElement),r(v.isActiveElement),v.navItemProperties.link=d.getNavItemHref(v.navItem),v.navItemProperties.title=d.getNavItemTitle(v.navItem),"root"===v.level?v.navItemProperties.level=1:v.navItemProperties.level=parseInt(v.level,10)+1,v.navItemProperties,v.hasChildren=d.hasVisibileChildren(v.navItem),m()}function i(e){return{bindToController:!0,compile:function(t){return e.compile(t,(function(e,t,n,r){r.isActiveElement(),r.toggleChild=function(t){t.stopPropagation(),e.vm.childNavIsOpened=!e.vm.childNavIsOpened}}))},controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{level:"@",navItem:"<item"},templateUrl:"/client/front-office/modules/main-nav/views/main-nav-item-front.html"}}n.r(t),n.d(t,"MainNavItemFrontDirective",(function(){return i}));var a=n(4),o=n.n(a);i.$inject=["RecursionHelper"],r.$inject=["$scope","$state","$stateParams","$timeout","$window","Analytics","ConfigInstance","Community","Content","Layout","MainNav","Style","Translation","Utils"],angular.module("Directives").directive("mainNavItemFront",i)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/content/menu/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("MainNavFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v,y,b,T,S,I,_){function A(e,t,n){var r=S.translate(t.slugFull),i=n?e===t.id:e===r;if(i||angular.isUndefinedOrEmpty(t.children))return i;for(var a=0,o=t.children.length;a<o;a++){var s=t.children[a];if(n&&s.id===e||!n&&S.translate(t.slugFull)===e||A(e,s,n))return!0}return i}function w(e){return e===v.CONTENT_TYPES.COMMUNITY?"app.front.community":M}function D(e,t){if(!angular.isUndefinedOrEmpty(e)){var n=t||c.open("","_blank");n.location=e,n.focus()}}function L(e,t){t=t||[],t=angular.isString(t)?[t]:[],!angular.isUndefinedOrEmpty(t)&&d()(H,e)&&angular.forEach(t,(function(t){angular.isUndefinedOrEmpty(s()(Y,"[".concat(t,"].children")))||(Y[t].children=h()(Y[t].children,{uuid:e}),H.splice(H.indexOf(e),1))}))}var P,N,R,j,k,F,U=u.createListKeyService(b,{preSave:function(e){var t;return e.items=(t=angular.copy(e.items),!angular.isArray(t)||angular.isUndefinedOrEmpty(t)||angular.forEach(t,(function(e,n){angular.isUndefinedOrEmpty(e.items)?t.splice(n,1):angular.forEach(e.items,(function(e){delete e.children}))})),t),e.deleted=function(e){return!angular.isArray(e)||angular.isUndefinedOrEmpty(e)?e:h()(e,(function(e){return e.$isNew}))}(angular.fastCopy(e.deleted)),e}}),M="app.front.content-get",x=[],$=[],B=!1,W=!1,G=t.defer(),Y={},H=[];return U.defaultParams={},U.is={initialized:!1,initializing:!1,routing:!1},U.goToState=r.go,U.addDeletedElement=function(e,t){e.deleted=!0,L(e.uuid,t),x.push({$isNew:Boolean(e.$isNew),lang:t,uuid:e.uuid})},U.addModifiedElement=function(e,t){angular.isUndefined(Y[t])&&(Y[t]={children:[]}),e.$isNew&&angular.isUndefinedOrEmpty(e.uuid)&&(e.uuid=Object(C.b)()),L(e.uuid,t),Y[t].children.push(e),H.push(e.uuid)},U.addModifiedElements=function(e){angular.isArray(e)&&angular.forEach(e,(function(e){U.addModifiedElement(e,S.inputLanguage)}))},U.addNewElementToTarget=function(e,t,n){n=n||S.inputLanguage,e.$isNew=!0,e.sortOrder=t,e.hidden=!1,angular.isUndefinedOrEmpty(e.uuid)&&(e.uuid=Object(C.b)()),U.addModifiedElement(e,n),N.children.push(e)},U.clearEditItem=function(){U.setEditedItem()},U.copyElement=function(e,t,n,r){if(r=r||angular.noop,j||t.deleted)return!1;j=!0;var i=d()(f()(n.children,"id"),t.id),a=angular.isUndefined(P),s=n?n.id:void 0,c=n?n.uuid:void 0;e=angular.isDefined(e)?e:angular.isDefinedAndFilled(n.children)?n.children.length:0;var l=angular.isUndefinedOrEmpty([P,s],"every")&&a&&!W,u=angular.isDefinedAndFilled([P,s],"every")&&s===P.id&&!W,p=(l||angular.isDefinedAndFilled(t.parentUuid))&&t.parentUuid===c;return P=void 0,i&&!p?(r(),!1):(t.parentId=s,t.$isNew=W,t.sortOrder=e,u||l||o((function(){U.addModifiedElements(U.updateSortOrder(n.children))})),W=!1,t)},U.findNavItemById=function(e,t){if(t=t||s()(U.getCurrent(),"items",[]),!angular.isUndefinedOrEmpty(t)){for(var n,r=0,i=t.length;r<i&&(t[r].id!==e&&t[r].uuid!==e||(n=t[r]),!angular.isDefinedAndFilled(n));r++)angular.isDefinedAndFilled(t[r].children)&&(n=U.findNavItemById(e,t[r].children));return n}},U.findNavItemBySlug=function(e,t){if(t=t||s()(U.getCurrent(),"items",[]),!angular.isUndefinedOrEmpty(t)){for(var n,r=0,i=t.length;r<i;r++){if(angular.isUndefinedOrEmpty(e)&&t[r].uid===s()(y.getInstance(),"homePage")){n=t[r];break}if(S.translate(t[r].slugFull)===e){n=t[r];break}for(var a in t[r].slugFull)if(t[r].slugFull[a]===e||t[r].slugFull[a].endsWith("/".concat(e))){n=t[r];break}if(angular.isDefinedAndFilled(n))break;angular.isDefinedAndFilled(t[r].children)&&(n=U.findNavItemBySlug(e,t[r].children))}return n}},U.findNavItemsById=function(e,t){var n=[];return function e(t,r){var i=r||(U.getCurrent()||{}).items;angular.forEach(i,(function(r){r.id!==t&&r.uuid!==t||n.push(r),angular.isDefinedAndFilled(r.children)&&angular.isArray(r.children)&&e(t,r.children)}))}(e,t),n},U.getAlreadyPickedContents=function(){return F},U.getContentLink=function(e,t,n){var i=r.href(e,t,n);return decodeURIComponent(i)},U.getCurrentPickerTarget=function(){return N},U.getDeletedElements=function(){return x},U.getEditableContentIds=function(){return $||[]},U.getEditedItem=function(){return R},U.getFormattedElementByLang=function(e){return angular.isUndefinedOrEmpty(e)?[]:l()(U.getFormattedElements(),{lang:e})},U.getFormattedElements=function(){return f()(Y,(function(e,t){return{items:e.children,lang:t}}))},U.getNavItemContentTitle=function(e){if(angular.isDefinedAndFilled(e.menuTitle))return S.translate(e.title)},U.getNavItemHref=function(e,t,n){if(e.type===p.AVAILABLE_CONTENT_TYPES.MENU){if(!S.hasTranslations(e.link,!0))return;return _.replaceVariables(S.translate(e.link))}if(angular.isDefinedAndFilled(n)){var i={instance:n.slug,slug:S.translate(e.slugFull)};return U.getContentLink(t,i,{absolute:!0})}var a=w(e.type),o=S.translate(e.slugFull),s=a===M?o:o.split("/").pop();return r.href(a,{identifier:void 0,slug:s,view:void 0})},U.getNavItemTitle=function(e){return angular.isDefinedAndFilled(e.menuTitle)?angular.isString(e.menuTitle)?e.menuTitle:S.translate(e.menuTitle):S.translate(e.title||"NEW_CONTENT_TITLE_FALLBACK")},U.getOriginalItem=function(){return k},U.goTo=function(e,t,n,a,o,u,d,f){var g,m={identifier:void 0,view:void 0};if(angular.isDefinedAndFilled(o)&&(-1!==o?(m.view="post",m.identifier=o):m.view="posts"),y.getCurrentInstanceId()===n){d=d||!1;var v=U.findNavItemBySlug(i.slug),h=l()(s()(v,"children",[]),{id:t});a=angular.isDefinedAndFilled(i.slug)&&(angular.isDefinedAndFilled(h)||angular.isUndefinedOrEmpty(U.findNavItemById(t)))&&(angular.isUndefinedOrEmpty(u)||u!==p.AVAILABLE_CONTENT_TYPES.COMMUNITY)?"".concat(i.slug,"/").concat(S.translate(a)):S.translate(a),m.slug=a,d?(g=r.href(e,m,{absolute:!0}),D(decodeURIComponent(g),f)):r.go(e,m)}else y.getInstanceById(n,(function(t){m.instance=t.slug,m.slug=S.translate(a);var n=U.getContentLink(e,m,{absolute:!0});d?D(n,f):c.location=n}))},U.hasVisibileChildren=function(e){if(angular.isUndefinedOrEmpty(s()(e,"children"))||e.hideChildren)return!1;var t=l()(e.children,(function(e){return!e.hidden}));return angular.isDefinedAndFilled(t)},U.isActiveItem=function(t){var n=!1,a="app.front.community"===r.current.name;if(angular.isDefinedAndFilled(i.slug)&&!a)n=A(i.slug,t,!1);else{var o=e.get("Content"),c=e.get("Community"),l=a?c.getCurrent():o.getCurrent(),u=s()(l,"uid",s()(l,"id"));n=A(u,t,!0)}return n},U.isItemDragged=function(){return j},U.isItemInEdition=function(){return B},U.onSaveSuccess=function(e){angular.isDefinedAndFilled(e)&&angular.isArray(e)&&U.removeItems(e,f()(U.getDeletedElements(),"uuid")),U.resetElements(),U.init()},U.openNavItemLink=function(e,t){if(e.type===p.AVAILABLE_CONTENT_TYPES.MENU){if(!S.hasTranslations(e.link,!0))return;var n=_.replaceVariables(S.translate(e.link));angular.isUndefined(e.newTab)||e.newTab||t?D(S.translate(n)):c.location.href=n}else if(S.hasTranslations(e.link,!0))D(S.translate(e.link));else{if(U.is.routing)return;U.is.routing=!0;var i=w(e.type),a=S.translate(e.slugFull),o=i===M?a:a.split("/").pop();o=E()(o,"/")?o.substr(1):o;var s={identifier:void 0,slug:o,view:void 0};!angular.isUndefined(e.newTab)&&e.newTab||t?(D(r.href(i,s)),U.is.routing=!1):r.go(i,s).finally((function(){U.is.routing=!1}))}},U.removeItems=function(e,t){if(angular.isArray(e)&&angular.isArray(t))for(var n=e.length-1;n>=0;n--){var r=e[n];if(d()(t,r.uuid)){if(t=O()(t,r.uuid),e.splice(n,1),angular.isUndefinedOrEmpty(t))break}else angular.isDefinedAndFilled(r.children)&&U.removeItems(r.children,t)}},U.resetElements=function(){Y={},H=[],x=[],$=[]},U.restoreElement=function(e){for(var t=0,n=x.length;t<n;++t)if(x[t].uuid===e.uuid)return e.deleted=!1,x.splice(t,1),!0;return!1},U.saveItemInEdition=function(e){var t=R,n=k;delete t.children,t.$modified=!0,angular.extend(n,t),U.addModifiedElement(n,e),U.clearEditItem()},U.setAlreadyPickedContents=function(e){F=e},U.setCurrentPickerTarget=function(e){N=e},U.setDragOrigin=function(e,t){j=!1,W=Boolean(t),P=angular.isUndefinedOrEmpty(s()(e,"parentId"))?void 0:U.findNavItemById(e.parentId)},U.setEditableContentIds=function(e){e=angular.isDefined(e)&&!angular.isArray(e)?[e]:e,$=e},U.setEditedItem=function(e){R=e,B=angular.isDefined(e)},U.setItemIsDragged=function(e){j=e},U.setOriginalItem=function(e){k=e},U.updateSortOrder=function(e){return angular.forEach(e,(function(e,t){e.sortOrder=t})),e},o((function(){angular.element(".main-nav").bind("mouseover",(function(){angular.element(".main-nav--is-content-loading").removeClass("main-nav--is-content-loading")}))})),U.reduxReducerName="mainNav",U.reduxUpdateActionType="mainNav/update",U.mapStateToRedux=function(){var e=m()(U.getCurrent(),["items","lang"]);return{data:e,id:"current",isLoading:!U.is.initialized}},U.initReduxStore=function(){T.subscribe(U)},U.init=function(){var t=y.getInstance();U.defaultParams={customer:g.getCustomerId(),instance:t.uid};var r=e.get("Content"),i=angular.isDefined(r.getAction())&&"get"!==r.getAction()?S.inputLanguage:S.getLang("current"),o=t.defaultLang||S.getLang("fallback");return angular.isDefinedAndFilled(s()(t,"langs"))&&(d()(t.langs,i)||(i=t.defaultLang||a()(t.langs)),d()(t.langs,o)||(o=t.defaultLang||a()(t.langs))),U.is.initializing=!0,U.get({alternativeLang:o,lang:i},(function(){r.createBreadcrumb(),G.resolve()}),G.reject),G.promise.finally((function(){U.is.initialized=!0,U.is.initializing=!1,n.$broadcast("main-nav-loaded")})),G.promise},U}n.r(t),n.d(t,"MainNavService",(function(){return r}));var i=n(51),a=n.n(i),o=n(4),s=n.n(o),c=n(21),l=n.n(c),u=n(17),d=n.n(u),p=n(28),f=n.n(p),g=n(125),m=n.n(g),v=n(227),h=n.n(v),y=n(107),E=n.n(y),b=n(106),O=n.n(b),C=n(35);r.$inject=["$injector","$q","$rootScope","$state","$stateParams","$timeout","$window","BaseService","Config","Customer","InitialSettings","Instance","MainNavFactory","ReduxStore","Translation","Features","Utils"],angular.module("Services").service("MainNav",r)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(303);!function(){function n(n,r,i,a,o,s,c,l,u,d,p,f,g,m){var v,h=this;h.Document=s,h.Media=d,h.MediaConstant=p,h.getMediaIcon=function(){if(h.media.isFolder)return"folder";if("drive"===d.getSource(h.media)&&angular.isDefinedAndFilled(h.media.content)){var t=e.get(h.media.content,"[0].mimeType");if(angular.isDefinedAndFilled(t))return d.getIcon(t);var n=e.get(h.media.content,"[0].ext","");if(angular.isUndefinedOrEmpty(n)){var r=e.get(h.media.content,"[0].name","").split(".");n=e.last(r)}return d.getMediaIconFromExt(n)}if(angular.isDefinedAndFilled(e.get(v,"mimeType")))return d.getIcon(v.mimeType);if(angular.isDefinedAndFilled(e.get(v,"ext")))return d.getMediaIconFromExt(v.ext);var i=e.get(h.media.content,"[0].url","");if(i){var a=new URL(i),o=a.pathname.split(".").pop();return d.getMediaIconFromExt(o)}return"default"},h.getMediaLink=function(){var e=v.downloadUrl||v.url||v.servingUrl;if(!angular.isUndefinedOrEmpty(e))return e},h.openMedia=function(){var n=h.getMediaLink();i.handleTaggingMap("open-media","open-media",{item:h.media,name:d.getMediaName(h.media),url:n});var s=d.getSource(h.media),c=a.getCurrent(f.getListKey());if(angular.isUndefinedOrEmpty(s)&&(s=p.PROVIDERS.lumapps),angular.isDefinedAndFilled(v)&&d.isImage(v.type)&&(s===p.PROVIDERS.lumapps||s===p.PROVIDERS.haussmann))!function(){if(angular.isUndefinedOrEmpty(h.imageList))u.open(h.media);else{var t=e.findIndex(h.imageList,{id:h.media.id});t>-1?u.open(h.imageList,t):u.open(h.media)}}();else if(angular.isDefinedAndFilled(v)&&d.isDocument(v.type)&&(s===p.PROVIDERS.lumapps||s===p.PROVIDERS.haussmann))!function(n,a){var s=o.getCurrent();i.handleTaggingMap("download-media","download-media",{isHomePage:e.get(s,"isHomepage",!1),item:d.getMediaName(h.media)}),n&&a===p.PROVIDERS.haussmann?Object(t.c)(n.id,h.media.uuid):r.open(h.getMediaLink(),"_blank")}(c,s);else if(s===p.PROVIDERS.google||s===p.PROVIDERS.microsoft){var l=e.get(v,"url")||e.get(v,"downloadUrl")||e.get(v,"servingUrl");angular.isDefinedAndFilled(l)&&angular.isString(l)&&r.open(l,"_blank")}else angular.isDefinedAndFilled(v)&&angular.isDefinedAndFilled(n)&&r.open(n,"_blank")},n.$on("user-settings-current-lang",(function(){h.init()})),h.init=function(){h.hasSeparator=!angular.isDefined(h.classes)||e.includes(h.classes,"media-block--has-separator"),h.style=h.style||{},v=d.getMediaContent(h.media,g.inputLanguage,!h.noFallback);var t="block"===h.viewMode?l.MAX_IMAGE_SIZE:void 0;h.mediaImage=s.getCroppedThumbnailFromMedia(h.media,!0,t,g.inputLanguage),h.focusPoint=s.getFocusPointFromMedia(h.media,!1,g.inputLanguage),h.isFromDrive=s.isMediaFromGoogle(h.media)||s.isMediaFromMicrosoft(h.media),h.fieldsToDisplay=h.fieldsToDisplay||c.getDefaultFieldsToDisplay(),function(){if(h.fieldsToDisplay.tags){var t=e.map(h.media.tags,(function(e){return m.keyToTag("tag-admin",e)}));h.tags=e.filter(t,(function(t){return g.hasTranslation(e.get(t,"name"))}))}else h.tags=[]}()},h.init()}n.$inject=["$scope","$window","Analytics","Community","Content","Document","Fsitems","InitialSettings","Lightbox","Media","MediaConstant","ModuleAdmin","Translation","Tag"],angular.module("Directives").directive("mediaBlock",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",replace:!0,restrict:"E",scope:{canManage:"<?lsCanManage",classes:"<?lsClasses",fieldsToDisplay:"<?",shouldLimitSize:"@?",height:"@?",imageList:"<",media:"<",noFallback:"<?",overrides:"<?",reloadFn:"&lsReloadFn",style:"<?lsStyle",theme:"@?",useImgTag:"=?",viewMode:"@?"},templateUrl:"/client/front-office/modules/media/views/media-block.html"}}))}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/media/:methodKey/:actionKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},emptyTrash:{isArray:!1,method:"DELETE",params:{actionKey:"empty",methodKey:"trash"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},saveMulti:{isArray:!1,method:"POST",params:{methodKey:"saveMulti"}},untrash:{isArray:!1,method:"POST",params:{methodKey:"untrash"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("MediaFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v,b){function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(angular.isUndefinedOrEmpty(e))return"";var r=n.getAction();return angular.isDefinedAndFilled(r)&&"get"!==r?p.translate_(e,p.inputLanguage,!1):p.translate_(e,p.getLang("current"),!t)}function C(e){return e&&(e.id||e.uid||e.uuid)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=n.toLowerCase()===c.KIND.DRIVE.toLowerCase();return{ext:e.ext,fileId:e.id,height:e.height,lang:t,mimeType:e.mimeType,name:e.name,servingUrl:e.servingUrl||e.url,size:e.fileSize||e.sizeBytes,type:e.type,url:e.url,uuid:r?Object(y.b)():void 0,value:e.blobKey,width:e.width}}function S(e,t,n,r){if(angular.isUndefinedOrEmpty([e,t],"some"))return{};var a={content:[T(e,t,n)],instance:i.getCurrentInstanceId(),name:{},owner:l()(e,"owner"),parentFolder:r,source:n||"local"};return a.name[t]=e.name,a}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(angular.isUndefinedOrEmpty(e))return{};var r=angular.isDefinedAndFilled(e.croppedContent)?e.croppedContent:e.content,i={};return angular.forEach(r,(function(t){var n=t.downloadUrl,r=t.ext,a=t.fileId,o=t.height,s=t.lang,c=t.mimeType,l=t.name,u=t.servingUrl,d=t.size,p=t.type,f=t.url,g=t.value,m=t.width;i[s]={downloadUrl:n,ext:r,height:o,id:a,mimeType:c,name:l,servingUrl:u,size:d,source:w.getSource(e),type:p,url:f,value:g,width:m}})),angular.isDefinedAndFilled(t)?angular.isDefined(i[t])?i[t]:n&&p.hasTranslations(i)?p.translate(i):{}:i}function _(e){return{id:C(e),object:e}}function A(e,t,n,r){var a=[];return angular.forEach(e,(function(e){a.push({kind:c.KIND.MEDIA,uid:C(e)})})),u.untrash({instance:i.getCurrentInstanceId(),itemIds:a},t,n,r)}var w=o.createLumsitesBaseService(u,{autoInit:!1,fullListResponse:!0,objectIdentifier:"uid"}),D=[];return w.SEARCH_MEDIA_TYPES=[{name:"DOCUMENT",value:t.FILE_TYPES.DOCUMENT},{name:"IMAGE",value:t.FILE_TYPES.IMAGE}],w.defaultParams={},w.imageSizeBreakpoints={l:1920,m:1400,s:800},w.defaultPickerParams={attached:!1,origin:"FRONT.MEDIA_PICKER.FILTER_DIRECTORY.OFFICIAL_FILES",provider:"FRONT.MEDIA_PICKER.PROVIDER_ORIGIN.LUMAPPS",sortOrder:c.SORT_ORDER},w.adjustBackgroundImage=function(e){return angular.isDefinedAndFilled(e.backgroundImage)?a()({},e,{backgroundImage:b.getImageURL(w.getMediaImage(e.backgroundImage,void 0,!1,r.MAX_IMAGE_SIZE))}):e},w.canEditMedia=function(e){if(v.canManageInstanceSettings())return!0;if(angular.isUndefinedOrEmpty(e))return!1;var t=g.getConnected(),n=e.properties;return angular.isDefined(n)&&n.user&&n.user.toString()===t.id.toString()},w.createMediaLink=function(e){if(angular.isUndefinedOrEmpty(l()(e,"content")))return"";var t=w.getMediaContent(e,p.inputLanguage,!0),n=l()(t,"ext"),r="/serve/";r+=l()(t,"value"),r+="/";var i=angular.copy(w.getMediaName(e,!1));return d()(i,n)||(i+=angular.isDefined(n)&&"."!==n.charAt(0)?".":"",i+=angular.isDefined(n)?n:""),r+=encodeURIComponent(i),r},w.downloadSelectedMedia=function(t){e.open(t,"_blank")},w.emptyTrash=function(e,t,n){return u.emptyTrash({instance:i.getCurrentInstanceId()},e,t,n)},w.formatContentForCurrentLang=T,w.formatUploadedFile=S,w.getBackgroundImage=function(e,t,n){var r,i=p.inputLanguage,a=I(e,i,t);if(!angular.isUndefinedOrEmpty(a))return angular.isDefinedAndFilled(w.getSource(a))&&w.getSource(a).toLowerCase()===c.KIND.DRIVE.toLowerCase()&&!p.hasTranslations(e.thumbnail)?r=w.getDrivePreviewUrl(a.id):w.isImage(a.type)?(n=d()(["image/gif","image/svg+xml"],a.mimeType)?-1:n,r=w.getMediaImage(e,a,void 0,n)):w.isDocument(a.type)?angular.isDefined(e.thumbnail)&&(r=b.getMediaUrl(p.translate_(e.thumbnail,i,t))):angular.isDefinedAndFilled(a.url)&&(r=b.getMediaUrl(a.url)),angular.isDefinedAndFilled(r)?b.getBackgroundImage(r,-1):void 0},w.getDrivePreviewUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;if(!angular.isUndefinedOrEmpty(e))return t=parseInt(t,10),"https://drive.google.com/thumbnail?authuser=0&sz=w".concat(t,"&id=").concat(e)},w.getIcon=function(e){if(angular.isUndefinedOrEmpty(e))return"";switch(e.toLowerCase()){case"application/pdf":return"pdf";case"application/vnd.google-apps.audio":case"audio/mpeg":return"audio";case"application/vnd.google-apps.document":return"document";case"application/vnd.google-apps.drawing":return"drawing";case"application/vnd.google-apps.file":return"file";case"application/vnd.google-apps.folder":return"folder";case"application/vnd.google-apps.form":return"form";case"application/vnd.google-apps.photo":case"image/jpg":case"image/jpeg":case"image/gif":case"image/png":return"photo";case"application/vnd.google-apps.presentation":return"slide";case"application/vnd.google-apps.spreadsheet":return"sheet";case"application/vnd.google-apps.video":case"video/avi":case"video/mov":case"video/mp4":case"video/mpeg":case"video/quicktime":return"video";case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":case"application/vnd.ms-word.document.macroenabled.12":case"application/vnd.ms-word.template.macroenabled.12":return"word";case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":case"application/vnd.ms-excel.sheet.macroenabled.12":case"application/vnd.ms-excel.template.macroenabled.12":case"application/vnd.ms-excel.addin.macroenabled.12":case"application/vnd.ms-excel.sheet.binary.macroenabled.12":return"excel";case"application/vnd.ms-powerpoint":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.openxmlformats-officedocument.presentationml.template":case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":case"application/vnd.ms-powerpoint.addin.macroenabled.12":case"application/vnd.ms-powerpoint.presentation.macroenabled.12":case"application/vnd.ms-powerpoint.template.macroenabled.12":case"application/vnd.ms-powerpoint.slideshow.macroenabled.12":return"powerpoint";case"application/x-rar":case"application/zip":return"archive";default:return"default"}},w.getMediaContent=I,w.getMediaDescription=function(e,t){return angular.isUndefinedOrEmpty(e)?"":p.hasTranslation(l()(e,"override.description"),t?void 0:"any")?O(e.override.description,t):O(l()(e,"description",""),t)},w.getMediaFromFile=function(e,n,r,i){var a=S(e,p.inputLanguage,r,i);return angular.isDefinedAndFilled(n)&&(h()(a,"properties.content",n.id),a.customContentType=n.customContentType,isNaN(n.id)?a.status=t.CONTENT_STATUS.TO_VALIDATE.value:a.contentKey=n.id),a},w.getMediaIcon=function(e,t){var n=w.getMediaContent(e,p.inputLanguage,t);return l()(e,"source","").toLowerCase()===c.KIND.DRIVE.toLowerCase()?"mdi-google-drive":l()(e,"kind","").toLowerCase()===c.KIND.FOLDER.toLowerCase()?"mdi-folder":angular.isUndefinedOrEmpty(n)?"mdi-close":w.isImage(n.type)&&angular.isDefined(n.value)?"mdi-image":w.isDocument(n.type)&&angular.isDefined(n.value)?"mdi-file-document-box":"mdi-close"},w.getMediaIconFromExt=function(e){var t="default";if(angular.isUndefinedOrEmpty(e))return t;var n=t;switch(e){case"mp3":case"mid":case"wav":n="audio";break;case"pdf":n="pdf";break;case"bmp":case"png":case"jpg":case"jpeg":case"gif":n="photo";break;case"ppt":case"pptx":n="powerpoint";break;case"xls":case"xlsx":n="excel";break;case"doc":case"docx":n="word";break;case"odt":case"rtf":case"txt":n="sheet";break;case"mp4":case"mov":case"avi":case"mpeg":n="video";break;case"zip":case"rar":n="archive";break;default:n=t}return n},w.getMediaId=C,w.getMediaImage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.translate(w.getMediaContent(e)),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:512,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(angular.isUndefinedOrEmpty(e))return"";if(angular.isString(e))return b.resizeImage(b.getMediaUrl(e),r);if(angular.isUndefinedOrEmpty(t)&&!w.isDocument(l()(s()(t),"type")))return"";if(angular.isString(t))return b.getMediaUrl(t);var a,o=e.thumbnail,c=t.id,u=t.mimeType,f=t.servingUrl,g=t.type,m=t.value,v=t.width;if("drive"===w.getSource(t)&&!p.hasTranslations(o))return w.getDrivePreviewUrl(c);if(w.isImage(g))return r="image/gif"===u||"image/svg+xml"===u||v<r?0:r,angular.isDefinedAndFilled(f)&&n?a=f:angular.isDefinedAndFilled(m)&&(a=b.getMediaUrl(m)),-1===r?a:b.resizeImage(a,r);if(w.isDocument(g)||w.isDocument(e.content[0].type)||d()([E.mediaTypes.GOOGLE.FILE,E.mediaTypes.ONEDRIVE.FILE],w.getType(e))){if(p.hasTranslations(i.thumbnail))return b.getMediaUrl(p.translate(i.thumbnail));if(angular.isDefinedAndFilled(o))return b.getMediaUrl(p.translate(o))}return""},w.getMediaName=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return angular.isUndefinedOrEmpty(e)?"":p.hasTranslation(l()(e,"override.name"),t?void 0:"any")?O(e.override.name,t):O(e.name,t)},w.getSource=function(e){return e.source||e.from},w.getDocPath=function(e){var t=w.getSource(e)||c.PROVIDERS.lumapps,n=e.content[0].fileId||C(e);if(t===c.PROVIDERS.lumapps){var r=e.instance||i.getCurrentInstanceId();t+="/site=".concat(r)}return e.docPath||"provider=".concat(t,"/resource=").concat(n)},w.getType=function(e){return l()(e,"properties.type")},w.getUnassignedMedia=function(){return D},w.isDocument=function(e){return d()(t.FILE_TYPES.DOCUMENT,e)},w.isDocumentMimeType=function(e){return w.isDocument(b.getMimeTypeMediaType(e))},w.isImage=function(e){return d()(t.FILE_TYPES.IMAGE,e)},w.isImageMimeType=function(e){return w.isImage(b.getMimeTypeMediaType(e))},w.mediaToDocument=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.source;if(angular.isDefinedAndFilled(e.provider))return e;var n=s()(e.content)||{},r={createdAt:e.createdAt,id:C(e),instanceId:e.instance,isFolder:!1,isShared:!1,isStarred:!1,isTrashed:e.trashed,kind:"Media",langProps:{default:{data:n.servingUrl,fileName:n.name,mimeType:n.mimeType,size:n.size,thumbnail:"".concat(n.servingUrl,"=s176")}},parentFolderId:e.parentFolderId,provider:t,tags:e.tags,uid:C(e),updatedAt:e.updatedAt};return angular.isDefinedAndFilled(e.title)&&angular.forEach(Object.keys(e.title),(function(t){angular.isUndefined(r.langProps[t])&&(r.langProps[t]={}),r.langProps[t].title=e.title[t]})),angular.isDefinedAndFilled(e.description)&&angular.forEach(Object.keys(e.description),(function(t){angular.isUndefined(r.langProps[t])&&(r.langProps[t]={}),r.langProps[t].description=e.description[t]})),r},w.mediaTypeToName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:angular.noop,n=e.name;return t(n),n},w.nameToMediaType=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:angular.noop,n=f()(w.SEARCH_MEDIA_TYPES,{name:e});return t(n),n},w.isVideo=function(e){return d()(t.FILE_TYPES.VIDEO,e)},w.isVideoMimeType=function(e){return w.isVideo(b.getMimeTypeMediaType(e))},w.transformForMediaClient=function(e,t){return angular.isUndefinedOrEmpty(e)||!t?e:angular.isArray(e)?m()(e,"object"):e.object},w.transformForMediaPicker=function(e,t){return angular.isUndefinedOrEmpty(e)||!t?angular.fastCopy(e):angular.isArray(e)?m()(e,_):_(e)},w.untrash=A,w.setUnassignedMedia=function(e){D=e},w.untrash=A,w.init=function(){w.defaultParams={instance:i.getCurrentInstanceId()},w.imageSizeBreakpoints.l=r.MAX_IMAGE_SIZE},w}n.r(t),n.d(t,"MediaService",(function(){return r}));var i=n(436),a=n.n(i),o=n(51),s=n.n(o),c=n(4),l=n.n(c),u=n(17),d=n.n(u),p=n(21),f=n.n(p),g=n(28),m=n.n(g),v=n(7),h=n.n(v),y=n(35),E=n(145);r.$inject=["$window","Config","Content","InitialSettings","Instance","LumsitesBaseService","MediaConstant","MediaFactory","Translation","User","UserAccess","Utils"],angular.module("Services").service("Media",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/tag/:methodKey",{},{del:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("TagFactory",e)}()},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){function i(e){return p()(Object.keys(a._services),e)}var a=e.createListKeyService(n,{autoInit:!1,objectIdentifier:"uid"});return a.defaultParams={},a.customerKeyToTag=function(e,n){angular.isFunction(n)&&t.getSiblings(!1).then((function(t){for(var r=0,o=t.length;r<o;++r){var s=t[r];if(i(s.id))for(var c=a._services[s.id]._list,l=0,u=c.length;l<u;l++){var d=c[l];if(d.uid===e)return void n(d)}}n()}))},a.getMultiInstanceTags=function(e,t,n){if(angular.isFunction(n))if(!angular.isUndefinedOrEmpty(t)&&angular.isArray(t)){var r=[],o=t.length,s=0,c=function(e){if(s++,r=r.concat(e||[]),s===o)return n(r)};angular.forEach(t,(function(t){i(t)?c(a.getList(void 0,void 0,t)):a.filterize({instance:t,kind:e},c,(function(){c()}),t)}))}else n()},a.keyToTag=function(e,t,n){if(e=e||"default",n=n||angular.noop,!angular.isUndefinedOrEmpty(t)){var r=u()(a._services,"[".concat(e,"]._list"),[]),i=c()(r,{uid:t});return n(i),i}n()},a.saveTag=function(e,n,i,s){n=n||angular.noop,i=i||angular.noop,s=s||"default",a.save(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{instance:t.getCurrentInstanceId()}),(function(e){if(angular.isArray(u()(a._services,"".concat(s,"._list")))){var t=!1;angular.forEach(a._services[s]._list,(function(n,r){n.uid===e.uid&&(t=!0,a._services[s]._list[r]=e)})),t||a._services[s]._list.push(e),n(e)}else n(e)}),i)},a.tagToKey=function(e,t){t=t||angular.noop,t(u()(e,"uid"))},a.init=function(e,n,r,i){r=r||angular.noop,i=i||angular.noop,a.defaultParams={instance:t.getCurrentInstanceId()};var o=angular.fastCopy(a.defaultParams);o.kind=e,a.filterize(o,r,i,n)},a}n.r(t),n.d(t,"TagService",(function(){return i}));var a=n(3),o=n.n(a),s=n(21),c=n.n(s),l=n(4),u=n.n(l),d=n(17),p=n.n(d);i.$inject=["BaseService","Instance","TagFactory"],angular.module("Services").service("Tag",i)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/classroom/courses/:methodKey",{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("ClassroomCoursesFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return t.createLumsitesBaseService(e,{autoInit:!1,objectIdentifier:"uid"})}e.$inject=["ClassroomCoursesFactory","LumsitesBaseService"],angular.module("Services").service("Classroom",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(){var t=this;t.classes=[],t.getClasses=function(){var n=[];return"dark"===e.get(t.properties,"style.content.theme")?n.push("course-block--theme-dark"):n.push("course-block--theme-light"),e.get(t.properties,"itemsSeparator")?n.push("course-block--has-separator"):n.push("course-block--no-separator"),n},t.init=function(){var n,r;t.properties=t.properties||{},angular.isUndefinedOrEmpty(e.get(t.properties,"itemsSeparator"))&&(t.properties.itemsSeparator=!0),n=t.properties.fields,r=angular.isDefinedAndFilled(n)?n:{},t.fieldsToDisplay=[],angular.forEach(r,(function(e){if(!angular.isUndefinedOrEmpty(e)){var n=e;angular.isObject(e)||(n={enable:!0,name:e}),n.enable&&t.fieldsToDisplay.push(n)}}))},t.init()}angular.module("Directives").directive("lsCourseBlock",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{course:"<lsCourse",properties:"<?lsProperties"},templateUrl:"/client/front-office/modules/module/modules/classroom/views/course-block.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,d,p){var f=this,g={endDate:void 0,metadata:{},query:"",startDate:void 0,tags:[]},m={action:"PAGE_READ",customContentType:void 0,customContentTypeTags:[],endDate:void 0,excludeType:[i.CONTENT_TYPES.CUSTOM_LIST],metadata:void 0,sortOrder:void 0,startDate:void 0};f.LIST_KEY="content-list",f.contentFilter=angular.fastCopy(g),f.customContentTypeTags=[],f.filteredMetadata=[],f.ConfigTheme=t,f.Content=n,f.CustomContentType=r,f.Metadata=c,f.ModuleFront=d,f.Translation=p,f.filterContent=function(){var e=angular.fastCopy(m);angular.isDefinedAndFilled(f.contentFilter.startDate)&&angular.isDefinedAndFilled(f.contentFilter.endDate)&&f.contentFilter.startDate>f.contentFilter.endDate?o.warning(p.translate("CONTENT_FILTER_START_DATE_BIGGER_THAN_END_DATE")):(angular.isDefinedAndFilled(f.contentFilter.query)&&(e.query=f.contentFilter.query),angular.isDefinedAndFilled(f.contentFilter.metadata)&&(e.combinedMetadata=[],angular.forEach(f.contentFilter.metadata,(function(t){angular.isArray(t)&&angular.isDefinedAndFilled(t)&&e.combinedMetadata.push({metadata:t})}))),angular.isDefinedAndFilled(f.contentFilter.startDate)&&(e.startDate=moment(f.contentFilter.startDate).format(u.a)),angular.isDefinedAndFilled(f.contentFilter.endDate)&&(e.endDate=moment(f.contentFilter.endDate).format(u.a)),angular.isDefined(f.contentFilter.tags)&&(e.customContentTypeTags=angular.isDefined(f.contentFilter.tags)?f.contentFilter.tags:m.customContentTypeTags),n.filterize(e,void 0,void 0,f.LIST_KEY))},f.hasTipWidget=function(){return angular.isDefinedAndFilled(l()(a()(n.getCurrent(),"template.components"),(function(e){return angular.isDefinedAndFilled(e)&&"widget"===e.type&&p.hasTranslation(a()(e,"properties.content"))})))},function(){var t=n.getCurrent();m.customContentType=t.customContentType,m.customContentTypeTags=t.customContentTypeTags,"asc"===a()(t,"properties.sortOrder","desc")?m.sortOrder=["publicationDate","createdAt"]:m.sortOrder=["-publicationDate","-createdAt"],function(e){r.getItem({uid:e},(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=n.getCurrent();angular.isArray(e.tags)&&angular.isDefinedAndFilled(e.tags)&&angular.forEach(e.tags,(function(e){(angular.isUndefinedOrEmpty(t.customContentTypeTags)||s()(t.customContentTypeTags,e.uuid))&&f.customContentTypeTags.push(e)}))}}));var t=c.getMetadataFilteredByProperty("displayInFilter",!0,c.listByCustomContentTypeId(e));f.filteredMetadata=t.filter((function(e){return angular.isArray(e.items)&&angular.isDefinedAndFilled(e.items)}))}(m.customContentType);var i=e.search(),o=i.filters;angular.isDefinedAndFilled(o)&&function(e){e=angular.isArray(e)?e:[e],angular.forEach(e,(function(e){var t=e.split("_");if(!(angular.isUndefinedOrEmpty(t)||t.length<2)){var n=t[0];if(!angular.isUndefinedOrEmpty(n)&&!angular.isUndefined(f.contentFilter[n])){var r,i=t[1];if("metadata"===n&&angular.isDefinedAndFilled(i)){var o=i.split(",");angular.forEach(o,(function(e){var t=c.getMetadataFromKey(e,!0,!0);angular.isUndefinedOrEmpty(t.parent)||(r=a()(f.contentFilter,"".concat(n,".").concat(t.parent)),angular.isUndefinedOrEmpty(r)?f.contentFilter.metadata[t.parent]=[e]:s()(r,e)||r.push(e))}))}else r=a()(f.contentFilter,n),angular.isArray(r)&&!s()(r,i)?r.push(i):f.contentFilter[n]=i}}}))}(o),f.filterContent()}()}n.r(t),n.d(t,"ContentListController",(function(){return r}));var i=n(4),a=n.n(i),o=n(17),s=n.n(o),c=n(21),l=n.n(c),u=n(305);r.$inject=["$location","ConfigTheme","Content","CustomContentType","InitialSettings","LxNotificationService","Metadata","ModuleFront","Translation"],angular.module("Controllers").controller("ContentListController",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u,d,p,f){var g=this,m=[];g.directory={},g.metadata=[],g.metadataIsVisibleInFront=!1,g.tags=[],g.Directory=i,g.DirectoryEntry=a,g.Metadata=c,g.UserFavorite=d,g.Translation=u,g.User=f,g.Utils=p,g.canManageLocalEntry=function(){return g.directoryEntry.user&&g.manageEntry},g.deleteLocalEntry=function(){s.confirm(u.translate("ADMIN_DIRECTORY_ENTRY_DELETE"),u.translate("ADMIN_DIRECTORY_ENTRY_DELETE_DESCRIPTION"),{cancel:u.translate("CANCEL"),ok:u.translate("OK")},(function(n){n&&o.del(g.directoryEntry.id,(function(){if(s.success(u.translate("ADMIN_DIRECTORY_ENTRY_DELETE_SUCCESS")),angular.isDefined(e.get(t.$parent.vm,"parentCtrl.directoryEntries"))){for(var n=t.$parent.vm.parentCtrl.directoryEntries,i=0;i<n.length;i++)if(n[i].id===g.directoryEntry.id)return void n.splice(i,1)}else for(var o="directory-entry-"+r.getCurrent().externalKey,c=0;c<a.getList(o).length;c++)if(a.getList(o)[c].id===g.directoryEntry.id){a.getList(o).splice(c,1);break}}),(function(e){p.displayServerError(e)}))}))},g.editLocalEntry=function(){a.setCurrent(a.formatServerObjectToClient(angular.copy(g.directoryEntry))),p.waitForAndExecute("#directory-entry-settings")},g.getClasses=function(){var t=[];return angular.isDefinedAndFilled(g.directoryEntry.thumbnail)&&t.push("directory-entry-block--has-thumbnail"),"dark"===g.theme?t.push("directory-entry-block--theme-dark"):t.push("directory-entry-block--theme-light"),"grid"===g.viewMode?t.push("directory-entry-block--view-mode-grid"):t.push("directory-entry-block--view-mode-list"),"ungroup"===g.viewModeVariant?t.push("directory-entry-block--view-mode-variant-ungroup"):t.push("directory-entry-block--view-mode-variant-group"),e.get(g.widgetProperties,"itemsSeparator")?t.push("directory-entry-block--has-separator"):t.push("directory-entry-block--no-separator"),t.push(m),t},g.getMetadataFunctionalInnerId=function(e){if(!angular.isUndefinedOrEmpty(e))return"directory-entry-block-metadata__metadata--"+e},g.getStyle=function(){return angular.isUndefinedOrEmpty(g.widgetProperties)?{}:l.adjustShadow(l.getBlockStyle(g.widgetProperties,g.viewMode,g.viewModeVariant))},t.$on("directory-entry-save-"+g.directoryEntry.id,(function(){n((function(){g.init()}))})),g.init=function(){angular.forEach(i.getLocalDirectories(),(function(t){t.id===g.directoryEntry.directory&&(g.directory=t,angular.isDefinedAndFilled(g.directoryEntry.metadata)&&(angular.forEach(g.directoryEntry.metadata,(function(e){g.metadata.push(c.getMetadataFromKey(e,!1,!0))})),g.metadataIsVisibleInFront=Boolean(e.find(g.metadata,{isVisibleFront:!0}))),angular.isDefinedAndFilled(g.directoryEntry.tags)&&angular.forEach(g.directoryEntry.tags,(function(t){var n=i.getTagByUuid(t,g.directory);angular.isDefinedAndFilled(n)&&!e.includes(g.tags,n)&&g.tags.push(n)})))})),angular.isUndefinedOrEmpty(g.directory)&&i.get({ignore403:!0,uid:g.directoryEntry.directory},(function(e){g.directory=e}),p.displayServerError,void 0,void 0,!1),m=c.getMetadataClasses(g.directoryEntry.metadata,"directory-entry-block--metadata-")},g.init()}t.$inject=["$scope","$timeout","Content","Directory","DirectoryEntry","DirectoryEntryUser","LxNotificationService","Metadata","Style","Translation","UserFavorite","Utils","User"],angular.module("Directives").directive("directoryEntryBlock",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{directoryEntry:"=",manageEntry:"=?",theme:"@?",viewMode:"@?",viewModeVariant:"@?",widgetProperties:"=?"},templateUrl:"/client/front-office/modules/module/modules/directory/views/directory-entry-block.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,o,c,u,p,g,v,b,O,C,T,S,I,_,A,w){function D(e){return angular.isDefinedAndFilled(e)?moment(e,U).format(U):void 0}function L(){return f()(M,"properties.allowProfileUpdate",!1)}function P(){return f()(_.getConnected(),"isSuperAdmin",!1)||F.isDisplayedUserCurrentUser()&&L()}function N(){F.displayedUser=void 0,F.displayedUserEdit=void 0,A.displayedUserId=void 0,A.displayedUserDirectoryId=void 0,w.orgChart=[],F.selectedUserSlackLinks={}}function R(){var e,t;angular.isUndefinedOrEmpty(F.displayedUser)||(angular.isUndefinedOrEmpty(F.displayedUser.apiProfile)&&(F.displayedUser.apiProfile={}),angular.isUndefinedOrEmpty(F.displayedUser.customProfile)&&(F.displayedUser.customProfile={}),angular.isUndefinedOrEmpty(f()(M,"template.components"))||(F.userDetailsComponents=M.template.components.filter((function(e){if(angular.isUndefined(e))return!1;if(e.widgetType===b.WIDGET_TYPES.TIP)return!1;e.$ignored=!1,e.$isInvalid=!1;var t=f()(e,"properties",{});if(angular.isDefinedAndFilled(t)&&t.isBound){var n=f()(t,"boundMap.text",e.uuid);e.value=I.getApiProfileFieldFromMap(n,F.displayedUser),e.$ignored=angular.isDefinedAndFilled(n)&&m()(f()(v,"USER_DIRECTORY_IGNORED_FIELD",[]),n)}else e.value=f()(F.displayedUser.customProfile,e.uuid);if("metadata"===e.type){var r=C.isMultipleMetadata(t.metadataId);null===e.value&&(e.value=void 0),angular.isArray(e.value)&&!r?e.value=d()(e.value):angular.isString(e.value)&&r&&(e.value=[e.value])}return e.$canEdit=function(e){var t=_.getConnected();if(angular.isUndefinedOrEmpty(t))return!1;if(t.isSuperAdmin||F.isDisplayedUserCurrentUser()&&L()&&f()(e,"selfEdit"))return!0;var n=f()(e,"editFeeds");return angular.isDefinedAndFilled(n)&&_.hasSubscriptions(n)}(e.properties),e.$canSee=function(e){var t=f()(e,"boundMap",{});return(!angular.isDefinedAndFilled(t)||!m()(v.USER_DIRECTORY_HIDDEN_FIELD,t.text))&&(!!f()(_.getConnected(),"isSuperAdmin",!1)||!angular.isUndefinedOrEmpty(e)&&(e.editFeeds=e.editFeeds||[],e.seeFeeds=e.seeFeeds||[],_.hasSubscriptions(e.seeFeeds.concat(e.editFeeds))))}(e.properties),e.$canEdit&&(F.canEdit=!0),!0})),F.secondaryField=(e=F.userDetailsComponents,t=O.getProperty(v.INSTANCE_PROPERTIES.USER_BLOCK_DEFAULT_FIELD),t=t||"primaryEmail",l()(e,(function(e){var n=f()(e,"properties",{});return n.isBound&&f()(n,"boundMap.text","")===t})))))}function j(e,n){Object(y.m)({provider:e}).then((function(r){var i=f()(r,"data.items",[]);i.map((function(r){return function(e,n,r){Object(y.e)({provider:e,spaceId:n.id,userId:r}).then((function(e){o.$apply((function(){F.selectedUserSlackLinks[n.name]=f()(e,"data.link",void 0)}))})).catch((function(e){t.debug(e)}))}(e,r,n),r}))})).catch((function(e){t.debug(e)}))}function k(){return F.isCurrentUser(_.getConnected())}var F=this,U="YYYY-MM-DD[T]HH:mm:ss.SSSSSS",M={};F.canEdit=!1,F.displayedUser=void 0,F.displayedUserEdit=void 0,F.orgChart={},F.isOrgChartViewDisplayed=!1,F.userDetailsComponents=[],F.showActivityLink=!1,F.selectedUserSlackLinks={},F.Content=c,F.Instance=O,F.Features=u,F.Metadata=C,F.Translation=T,F.User=_,F.UserDirectory=A,F.UserOrganizationChart=w,F.Utils=I,F.isComponentDisplayed=function(e){return!(angular.isUndefinedOrEmpty(e)||"metadata"===e.type&&C.isMetadataDeleted(e.properties.metadataId))&&(F.editMode?e.$canEdit:(angular.isDefinedAndFilled(e.value)||P()&&e.$canEdit)&&function(e){return e.$canSee&&(!e.$canEdit&&F.editMode||e.$canSee&&!F.editMode)}(e))},F.displayUser=function(e,n){var o=A.getDefaultUserDirectory(_.getConnected()).id;"string"==typeof e&&(e={uid:e}),A.get(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{contentId:o}),(function(r){F.displayedUser=r,function(e){var n=_.getConnected();F.selectedUserSlackLinks={},n&&f()(n,"id")!==e&&Object(y.p)({userId:e}).then((function(t){var n=f()(t,"data.providers",[]);n.map((function(t){return t.name===E.e.SLACK.id&&j(t.name,e),t}))})).catch((function(e){t.debug(e)}))}(r.id),angular.isDefinedAndFilled(r,"apiProfile.id")?F.displayedUserHangout=[{id:r.apiProfile.id,invite_type:"PROFILE"}]:F.displayedUserHangout=[{id:r.email,invite_type:"EMAIL"}],F.editMode=!1,F.canEdit=P(),R(),angular.isUndefinedOrEmpty(n)||!n?function(){var e=f()(M,"properties",{});if(e.displayOrganizationChart)if(u.hasFeature("org_chart"))w.initOrgChart(F.displayedUser);else{var t=w.initLegacyOrgChart(F.displayedUser);t.then((function(e){F.orgChart=e}))}}():A.displayedUserId=e,F.showActivityLink=function(e){if(!u.hasFeature("social"))return!1;var t="app.front.profile"===i.current.name&&a.userIdentifier!==F.displayedUser.id||"app.front.profile"!==i.current.name;"app.front.profile"===i.current.name&&"me"===a.userIdentifier&&k()&&(t=!1);return(e||k())&&t}(f()(r,"settings.social.isActivityVisible"))}))},F.editProfilePicture=function(){S.openSelection("profile-picture")},F.isCurrentUser=function(e){return!angular.isUndefinedOrEmpty([F.displayedUser,e],"some")&&f()(F.displayedUser,"id")===f()(e,"id")},F.isDisplayableOrganizationChart=function(){return f()(M,"properties.displayOrganizationChart",!1)},F.isDisplayedUserCurrentUser=k,F.saveProfile=function(){if(!angular.isUndefinedOrEmpty(F.displayedUserEdit)){var e,t,r=(e=F.displayedUserEdit.userDetailsComponents,t=angular.fastCopy(F.displayedUser),angular.forEach(e,(function(e){var n="inputSelect"===f()(e,"type")&&angular.isUndefined(e.value)?"":e.value;t.customProfile[e.uuid]=n})),t),i=function(){var e=!0;return angular.forEach(f()(F.displayedUserEdit,"userDetailsComponents",[]),(function(t){t.$isInvalid=!1;var n=f()(t,"properties.validationRegex");if(!angular.isUndefinedOrEmpty([n,t.value],"some")&&angular.isString(n))try{var r=n.match(new RegExp("^/(.*?)/([gimy]*)/?$")),i=r?new RegExp(r[1],r[2]):new RegExp(n);if(!i.test(t.value))throw new Error("value or pattern invalid");t.$isInvalid=!1}catch(n){e=!1,t.$isInvalid=!0}})),e}();i?(angular.extend(r,{contentId:M.id,createdAt:D(r.createdAt),firstName:F.displayedUserEdit.firstName,lastName:F.displayedUserEdit.lastName,lastSynchronization:D(r.lastSynchronization),updatedAt:D(r.updatedAt)}),m()(F.displayedUserEdit.profilePicture,"data:image")||(r.profilePicture=F.displayedUserEdit.profilePicture),A.save(r,(function(e){g.success(T.translate("USER_DIRECTORY_EDIT_SUCCESS")),F.displayUser(e.id),n.$broadcast("user-directory__user-save-success",e);var t=_.getConnected();t.id===r.id&&(t.firstName=r.firstName,t.lastName=r.lastName,_.setProfilePicture(r.profilePicture))}),I.displayServerError)):g.error(T.translate("USER_DIRECTORY_EDIT_PATTERN_ERROR"))}},F.toggleEditMode=function(){angular.isUndefinedOrEmpty(F.displayedUser)||(F.editMode=!F.editMode,F.editMode&&(F.displayedUserEdit={firstName:angular.fastCopy(F.displayedUser.firstName),lastName:angular.fastCopy(F.displayedUser.lastName),profilePicture:angular.fastCopy(_.getProfilePicture(F.displayedUser)),secondaryField:angular.fastCopy(F.secondaryField),userDetailsComponents:angular.fastCopy(F.userDetailsComponents)}))},F.toggleOrgChartView=function(){F.isOrgChartViewDisplayed=!F.isOrgChartViewDisplayed},F.uploadProfilePicture=function(e){angular.isUndefinedOrEmpty(f()(e,"blobKey"))||h()(F.displayedUserEdit,"profilePicture",e.blobKey)},F.navigateToSocialProfile=function(e){_.redirectToSocialProfile(e)},F.selectedUserHasOneSlack=function(){return 1===Object.keys(F.selectedUserSlackLinks).length},F.selectedUserHasMultipleSlack=function(){return Object.keys(F.selectedUserSlackLinks).length>1},F.getSelectedUserSlackLinkAt=function(e){if(!(e<0||e>=Object.values(F.selectedUserSlackLinks).length))return Object.values(F.selectedUserSlackLinks)[e]},F.getHangoutUserId=function(){var e,t;return null===(e=F.displayedUserHangout)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id},o.$on("lx-dialog__open-start",(function(e,t){A.USER_DETAILS_DIALOG_ID===t&&F.init()})),o.$on("lx-dialog__close-end",(function(e,t){A.USER_DETAILS_DIALOG_ID===t&&N()})),o.$on("redirect-to-user-profile",(function(){var t=e.search(),n=t.email;angular.isDefinedAndFilled(n)&&F.displayUser(n,!0)})),o.$on("display-user-org-chart",(function(e,t){F.displayUser(t,!0)})),o.$on("$destroy",(function(){p.close(A.USER_DETAILS_DIALOG_ID)})),F.init=function(){O.getSiblings(!1).then((function(){if(M=A.getDefaultUserDirectory(_.getConnected()),A.displayedUserDirectoryId=M.id,angular.isUndefinedOrEmpty(f()(M,"template.components")))return N(),void g.error(T.translate("ERROR_NOT_AUTHORIZED"));F.userId=A.displayedUserId,angular.isUndefinedOrEmpty(F.userId)?N():F.displayUser(F.userId)}))}}function a(e){return{bindToController:!0,controller:i,controllerAs:"vm",restrict:"E",scope:{userId:"<?"},templateUrl:function(){return e.hasFeature("org_chart")?"/client/front-office/modules/module/modules/user-directory/views/partials/user-directory-details-v2.html":"/client/front-office/modules/module/modules/user-directory/views/partials/user-directory-details.html"}}}n.r(t),n.d(t,"UserDetailsDirective",(function(){return a}));var o=n(3),s=n.n(o),c=n(21),l=n.n(c),u=n(51),d=n.n(u),p=n(4),f=n.n(p),g=n(17),m=n.n(g),v=n(7),h=n.n(v),y=n(95),E=n(48);a.$inject=["Features"],i.$inject=["$location","$log","$rootScope","$state","$stateParams","$scope","Content","Features","LxDialogService","LxNotificationService","Config","InitialSettings","Instance","Metadata","Translation","UploaderAction","Utils","User","UserDirectory","UserOrganizationChart"],angular.module("Directives").directive("userDetails",a)},function(e,t){!function(){"use strict";function e(e,t,n,r,i){var a=this,o="user-directory-field-edit",s="user-directory-field-read";a.displayIcon=void 0,a.templateUrl=void 0,a.Metadata=e,a.User=r,a.UserDirectory=t,a.UserDirectoryTools=n,a.Utils=i,a.displayIcon=!!angular.isUndefined(a.displayIcon)||Boolean(a.displayIcon),a.templateUrl=a.editing?o:s}e.$inject=["Metadata","UserDirectory","UserDirectoryTools","User","Utils"],angular.module("Directives").directive("userDirectoryField",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{component:"=",displayIcon:"=?",editing:"="},templateUrl:"/client/front-office/modules/module/modules/user-directory/views/partials/user-directory-field.html"}}))}()},function(e,t,n){"use strict";function r(e,t,n,r){var i=this;i.UserDirectory=t,i.UserOrganizationChart=n,i.Instance=r,i.displayUser=function(){i.orgChartIsLoading()||i.user.id!==t.displayedUserId&&(e.$emit("display-user-org-chart",i.user.id),i.updateOrgChart(!0))},i.hasParentAndChildren=function(){return angular.isDefinedAndFilled(i.parent)&&angular.isDefinedAndFilled(i.user.orgChartProps.children)},i.noChildren=function(){return angular.isUndefinedOrEmpty(i.user.orgChartProps.children)&&i.user.orgChartProps.didRequest},i.isSelfManager=function(){if(angular.isDefinedAndFilled(i.parent))return i.parent.uid===i.user.uid;if(angular.isDefinedAndFilled(i.user.apiProfile.relations)){var e=i.user.apiProfile.relations.find((function(e){return"manager"===e.type}));return e&&e.value===i.user.email}return!1},i.noParent=function(){return angular.isUndefinedOrEmpty(i.parent)&&i.user.orgChartProps.didRequest},i.updateOrgChart=function(e){i.orgChartIsLoading()||(i.user.orgChartProps.isOpen=!!e||!i.user.orgChartProps.isOpen,i.hasParentAndChildren()||i.noChildren()||i.noParent()||n.updateOrgChart(i.user,i.root))},i.orgChartIsLoading=function(){return i.UserOrganizationChart.isCallInProgress()||i.UserDirectory.isCallInProgress()||i.Instance.is.loading.siblings},angular.isUndefinedOrEmpty(i.user.orgChartProps)&&(i.user.orgChartProps={}),angular.isUndefinedOrEmpty(i.user.orgChartProps.isOpen)&&(i.user.orgChartProps.isOpen=angular.isDefinedAndFilled(i.user.orgChartProps.children))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{parent:"<?",root:"<?",user:"="},templateUrl:"/client/front-office/modules/module/modules/user-directory/views/partials/user-directory-org-chart-item.html"}}n.r(t),n.d(t,"OrgChartItemDirective",(function(){return i})),r.$inject=["$scope","UserDirectory","UserOrganizationChart","Instance"],angular.module("Directives").directive("lsOrgChartItem",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r){var i=this;return i.getMetadataName=function(n,r){if(r=r||!1,r)return n;var i=angular.isDefinedAndFilled(n)?t.getMetadataFromKey(n,!1,!0):void 0;return e.get(i,"name")},i.getComponentValue=function(e,t){var a;if(angular.isDefined(t.properties.isBound)&&t.properties.isBound)return a=r.getApiProfileFieldFromMap(t.properties.boundMap.text,e),angular.isString(a)||angular.isNumber(a)?a:void 0;if(!angular.isUndefinedOrEmpty(e.customProfile)){if("metadata"===t.type){a="";var o=e.customProfile[t.uuid];return o=angular.isDefinedAndFilled(o)&&angular.isArray(o)?o:[o],angular.isDefinedAndFilled(o)&&angular.forEach(o,(function(e){var t=i.getMetadataName(e);angular.isDefinedAndFilled(t)&&n.hasTranslations(t)&&(a+=angular.isDefinedAndFilled(a)?", ":"",a+=n.translate(t))})),a}return e.customProfile[t.uuid]}},i}t.$inject=["Metadata","Translation","Utils"],angular.module("Services").service("UserDirectoryTools",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u,d,p,f,g){var m=this;m.ALLOWED_FILE_TYPE=r.FILE_TYPES.IMAGE,m.filterComponents=[],m.filterModel={},m.filterOpen=!1,m.secondaryField={},m.tipWidget={},m.userListComponents=[],m.Content=i,m.Features=o,m.Feed=s,m.Metadata=c,m.ModuleFront=l,m.Translation=u,m.User=d,m.UserDirectory=p,m.UserOrganizationChart=f,m.Utils=g,m.canEditOthersName=function(){return e.get(d.getConnected(),"isSuperAdmin",!1)},m.filterUsers=function(n){var r=d.getConnected(),o={};angular.forEach(m.filterModel,(function(t,n){var r=e.find(m.filterComponents,{uuid:n});if(angular.isDefinedAndFilled(r)){var i=e.get(r,"properties",{}),a=n;i.isBound&&(a=e.get(i,"boundMap.text","")),o[a]=t}else o[n]=t}));var s=i.getCurrent(),c={contentId:s.id,profileCriteria:o};if(angular.isDefinedAndFilled(m.filterModel.feeds)&&(c.feeds=m.filterModel.feeds),angular.isUndefinedOrEmpty([r,c.contentId],"every")&&(c.customerId=a.getCustomerId()),n){c.maxResults=12;var l=t.search().email,u=e.get(s,"properties",{});angular.isDefinedAndFilled(l)?p.setDisplayedUser(l,!0):u.displayUserProfile&&angular.isDefinedAndFilled(r)&&p.setDisplayedUser(r.id)}p.filterize(c)},m.resetFilter=function(){m.filterModel={},m.filterUsers()},m.toggleFilter=function(){m.filterOpen=!m.filterOpen},function(){var r=i.getCurrent();m.tipWidget=e.find(e.get(r,"template.components",[]),{type:"widget"});var a=e.get(r,"properties",{});m.userListComponents=p.getPopoverFields(r,d.getConnected()),m.filterComponents=e.get(i.getCurrent(),"template.components",[]).filter((function(t){return e.get(t,"properties.displayInFilter")})),a.displayFilters&&(m.filterOpen=!0),m.filterModel={};var o=t.search().group;angular.isDefinedAndFilled(o)&&(m.filterModel.feeds=angular.isArray(o)?o:[o]),angular.isDefinedAndFilled([n.customData,m.filterModel.feeds],"some")&&(m.filterOpen=!0,m.filterModel=angular.extend(m.filterModel,n.customData||{})),m.filterUsers(!0)}()}t.$inject=["$location","$stateParams","Config","Content","Customer","Features","Feed","Metadata","ModuleFront","Translation","User","UserDirectory","UserOrganizationChart","Utils"],angular.module("Controllers").controller("UserDirectoryController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r){function i(e){return s()(e,"lastName")}var o=t.createService(r,{objectIdentifier:"uid"});return o.orgChart=[],o.initLegacyOrgChart=function(t){return e((function(e){o.get({content:n.displayedUserDirectoryId,email:a()(t,"email")},(function(n){var r=n;angular.isArray(r.sameLevel)||(r.sameLevel=[]),r.sameLevel.push(t),r.sameLevel=i(r.sameLevel),r.subLevel=i(r.subLevel),e(r)}))}))},o.initOrgChart=function(e){o.orgChart.length=0,o.get({content:n.displayedUserDirectoryId,email:a()(e,"email")},(function(t){var n=angular.fastCopy(e),r=angular.fastCopy(t.manager),a=i(angular.fastCopy(t.sameLevel)),s=i(angular.fastCopy(t.subLevel));n.orgChartProps={didRequest:!0},angular.isDefinedAndFilled(s)&&(n.orgChartProps.children=s),angular.isDefinedAndFilled(a)&&a.unshift(n),angular.isDefinedAndFilled(r)?(r.orgChartProps={},r.orgChartProps.children=angular.isDefinedAndFilled(a)?a:[n],o.orgChart.push(r)):angular.isDefinedAndFilled(a)?o.orgChart.push(a):o.orgChart.push(n)}))},o.updateOrgChart=function(e,t){o.get({content:n.displayedUserDirectoryId,email:a()(e,"email")},(function(n){var r=angular.fastCopy(n.manager),a=i(angular.fastCopy(n.sameLevel)),s=i(angular.fastCopy(n.subLevel));if(e.orgChartProps.didRequest=!0,angular.isDefinedAndFilled(s)&&angular.isUndefinedOrEmpty(e.orgChartProps.children)&&(e.orgChartProps.children=s),angular.isDefinedAndFilled(a)&&t&&angular.forEach(a,(function(e){o.orgChart.push(e)})),angular.isDefinedAndFilled(r)&&t){r.orgChartProps={},r.orgChartProps.children=o.orgChart;var c=[];c.push(r),o.orgChart=c}}))},o}n.r(t),n.d(t,"UserOrganizationChartService",(function(){return r}));var i=n(4),a=n.n(i),o=n(218),s=n.n(o);r.$inject=["$q","BaseService","UserDirectory","UserOrganizationChartFactory"],angular.module("Services").service("UserOrganizationChart",r)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(247),r=n(312);!function(){function n(n,i,a,o,s,c,l,u,d,p,f,g,m){function v(t,n,r,i){var o={};n=n||!1,o.instance=e.get(t,"instanceDetails.slug",e.get(u.getCurrent(),"slug")),n?(o.identifier=t.externalKey,o.slug=e.get(t.parentContentDetails,"slug"),o.view="post"):(o.slug=e.get(t.contentDetails,"slug"),o.view="posts"),r?o["#"]="comments":i&&(o["#"]="edit-community-dialog"),o.slug=f.translate(o.slug),C.link=a.href("app.front.community",o)}function h(t,n){if(f.hasTranslations(t.link))return C.link=f.translate(t.link),void(C.linkTarget="_blank");if(angular.isDefinedAndFilled([t.url,t.instance],"every")&&t.instance!==u.getCurrentInstanceId())u.get({uid:t.instance},(function(r){var i=e.find(r.properties,{key:"gsite-url"}),a=f.translate(t.url)+(n?"#comments":"");angular.isDefinedAndFilled(i)?C.link=i+"?s="+a:C.link=l.SERVER_BASE_URL+m.buildInstanceUrl(r,c.getCustomerSlug())+a}),void 0,"getInstanceId");else{var r={instance:e.get(t,"instanceDetails.slug",e.get(u.getCurrent(),"slug")),slug:f.translate(t.url)};n&&(r["#"]="comments"),C.link=a.href("app.front.content-get",r)}}function y(t){var n,i=t.type,a=d.getNotificationTypes();switch(i){case a.SOCIAL_ADVOCACY_NEW_SHAREABLE_CONTENT:var o=e.get(t,"description.content_type");n=o===r.a.image?"NOTIFICATION.SOCIAL_ADVOCACY.PROGRAMS.NEW_SHAREABLE_IMAGE.DESCRIPTION":"NOTIFICATION.SOCIAL_ADVOCACY.PROGRAMS.NEW_SHAREABLE_CONTENT.DESCRIPTION";break;case a.SOCIAL_ADVOCACY_USER_PROMOTED_AMB:n="NOTIFICATION.SOCIAL_ADVOCACY.PROGRAMS.USER_PROMOTED.AMB.DESCRIPTION";break;case a.SOCIAL_ADVOCACY_USER_PROMOTED_POM:n="NOTIFICATION.SOCIAL_ADVOCACY.PROGRAMS.USER_PROMOTED.POM.DESCRIPTION";break;case a.CONTENT_EXPIRATION:var c=moment.utc(e.get(t,"contentDetails.endDate")).local();i=c.isBefore()?"content_expired":i,n="NOTIFICATION."+i.toUpperCase().replace(/_/g,".")+".DESCRIPTION";break;default:n="NOTIFICATION."+i.toUpperCase().replace(/_/g,".")+".DESCRIPTION"}if(i!==a.CUSTOM||!angular.isDefinedAndFilled(t.parentId)&&t.group){if(angular.isUndefinedOrEmpty(e.get(p,"["+i+"]")))return;if(e.includes([a.CONTENT_LIKE,a.COMMENT_NEW,a.COMMENT_LIKE,a.REPLY_LIKE],i)){var l=e.get(t.contentDetails,"type")===s.AVAILABLE_CONTENT_TYPES.POST;i=l?i+"_post":i}var u=p[i],m=e.get(u,"plurals"),v=1;if(angular.isDefinedAndFilled(m)){v=angular.isDefinedAndFilled(C.notificationGroup.actions)?t.actionCount||1:t.unreadNotificationCount||1;var h=e.includes([a.COMMENT_REPLY,"".concat(a.COMMENT_NEW,"_post"),"".concat(a.CONTENT_LIKE,"_post"),"".concat(a.COMMENT_LIKE,"_post"),"".concat(a.REPLY_LIKE,"_post")],i)&&f.translate(e.get(t,"contentDetails.title"));n="NOTIFICATION."+i.toUpperCase().replace(/_/g,".")+"."+(h?"WITH.TITLE.":"")+(m["count"+v]||m.more)+".DESCRIPTION"}C.description=f.replace(n,e.get(u,"tokens",[]),e.get(u,"getReplacements",angular.noop)(C.notificationGroup,v,g.getUserFullName))}else angular.isDefinedAndFilled(t.title)&&(C.description="<strong>"+f.translate(t.title)+"</strong><br>"),C.description+=f.translate(t.description)}function E(n){if(!angular.isUndefinedOrEmpty(n)){var r=d.getNotificationTypes(),i=e.get(n.contentDetails,"type")===s.AVAILABLE_CONTENT_TYPES.POST;switch(n.type){case r.COMMUNITY_NEW_ACCESS_REQUEST:v(n,i,!1,!0);break;case r.COMMUNITY_NEW_CREDENTIAL:case r.COMMUNITY_EXTENDED_SERVICE_MANAGEMENT:case r.POST_NEW:case r.POST_MERGED:case r.POST_MERGED_MASTER:case r.POST_MERGED_SLAVE:case r.POST_MERGE_PENDING:case r.POST_MODERATION_DECLINE:case r.POST_MODERATION_DELETE:case r.POST_MODERATION_DELETE_SPAMMER:case r.POST_STATUS_UPDATE:case r.POST_REPORT_NEW:case r.POST_UPDATE:v(n,i);break;case r.COMMENT_LIKE:case r.COMMENT_MENTION:case r.COMMENT_NEW:case r.COMMENT_REPLY:case r.POST_MENTION:case r.REPLY_LIKE:i?v(n,i,!0):h(n,!0);break;case r.CONTENT_EXPIRATION:case r.CONTENT_REFUSED:case r.CONTENT_WORKFLOW:C.link=a.href("app.front.content-edit",{instance:e.get(n,"instanceDetails.slug",e.get(u.getCurrent(),"slug")),key:n.externalKey});break;case r.CONTENT_LIKE:i?v(n,i):h(n);break;case r.CONTENT_NEW:case r.CONTENT_UPDATE:case r.CONTENT_VALIDATED:h(n);break;case r.CUSTOM:!angular.isDefinedAndFilled(n.parentId)&&n.group||h(n);break;case r.SOCIAL_ADVOCACY_NEW_SHAREABLE_CONTENT:case r.SOCIAL_ADVOCACY_USER_PROMOTED_AMB:case r.SOCIAL_ADVOCACY_USER_PROMOTED_POM:!function(n){var r={};r.slug=e.get(n,"description.program_slug",{en:"default"}),r.view="feed",r.slug=f.translate(r.slug),C.link=a.href(t.c.legacyId,r),C.linkTarget="_self"}(n)}C.isCustomChild&&n.isReadOnClick&&d.setAsRead(C.notificationGroup,"custom-"+n.parentId)}}function b(t){C.displaySubheader=C.displaySubheader||!1,C.displaySubheader&&(C.subheader="NOTIFICATION_PRIORITY_NAME_"+e.get(t,"priority",0))}var O,C=this;C.KEY_CHILDREN="custom-",C.description="",C.hasUserDirectories=!1,C.isCustomParent=e.get(C.notificationGroup,"notification.group")&&angular.isUndefinedOrEmpty(e.get(C.notificationGroup,"notification.parentId")),C.isDisplayingChildren=!1,C.linkTarget="",C.Notification=d,C.Utils=m,C.closeNotificationGroup=function(e){e.stopPropagation(),d.setAsRead(C.notificationGroup,C.isCustomChild?"custom-"+C.notificationGroup.notification.parentId:void 0,C.displaySubheader)},C.loadMoreChildren=function(e){e.stopPropagation(),d.loadMoreNotifications(C.KEY_CHILDREN)},C.onNotificationGroupClick=function(e){var t=C.notificationGroup.notification,n=d.getNotificationTypes(),r=t.type===n.CUSTOM&&angular.isUndefinedOrEmpty(t.parentId);switch(t.type){case n.SOCIAL_ADVOCACY_NEW_SHAREABLE_CONTENT:case n.SOCIAL_ADVOCACY_USER_PROMOTED_AMB:case n.SOCIAL_ADVOCACY_USER_PROMOTED_POM:d.setAsRead(C.notificationGroup)}r&&t.group?e.stopPropagation():(r&&!t.group||t.instanceId!==u.getCurrentInstanceId())&&(d.setAsRead(C.notificationGroup),o.open(decodeURIComponent(C.link),angular.isUndefinedOrEmpty(C.linkTarget)?"_blank":C.linkTarget),e.stopPropagation(),e.preventDefault())},C.toggleCustomChildren=function(e){if(e.stopPropagation(),!C.isDisplayingChildren&&angular.isUndefinedOrEmpty(d.displayList(C.KEY_CHILDREN))){var t=angular.extend(angular.fastCopy(d.DEFAULT_LIST_PARAMS),{maxResults:5,parentId:C.notificationGroup.notification.uid});d.filterize(t,(function(){n.$broadcast("notifications-loaded")}),m.displayServerError,C.KEY_CHILDREN)}C.isDisplayingChildren=!C.isDisplayingChildren},C.isCustomParent&&i.$on("notifications__child-set-as-read",(function(e,t,n){!function(e,t){angular.isUndefinedOrEmpty(e)||e!==C.notificationGroup.notification.uid||(C.notificationGroup.notification.unreadNotificationCount+=t,C.notificationGroup.notification.unreadNotificationCount<=0?d.setAsRead(C.notificationGroup):y(C.notificationGroup.notification))}(t,n)})),i.$on("notifications__first-set-as-read",(function(e,t){!function(e){angular.isUndefinedOrEmpty(e)||C.notificationGroup.notification.uid===e&&(C.displaySubheader=!0,b(C.notificationGroup.notification))}(t)})),O=C.notificationGroup.notification,angular.isUndefinedOrEmpty(O)||(C.KEY_CHILDREN+=O.uid,b(O),C.hasUserDirectories=angular.isDefinedAndFilled(l.USER_DIRECTORIES),C.hasThumbnail=e.get(p,"["+O.type+"].hasThumbnail",!1),angular.isFunction(C.hasThumbnail)&&(C.hasThumbnail=C.hasThumbnail(C.notificationGroup)),C.icon=d.getIcon(O.type),C.isCustomChild=O.group&&angular.isDefinedAndFilled(O.parentId),y(O),E(O))}function i(e){return{bindToController:!0,compile:function(t){return e.compile(t)},controller:n,controllerAs:"vm",replace:!0,restrict:"E",scope:{displaySubheader:"<?lsDisplaySubheader",from:"@lsFrom",notificationGroup:"=lsNotificationGroup"},templateUrl:"/client/front-office/modules/notification/views/notification-group.html"}}i.$inject=["RecursionHelper"],n.$inject=["$rootScope","$scope","$state","$window","Config","Customer","InitialSettings","Instance","Notification","NotificationSettings","Translation","User","Utils"],angular.module("Directives").directive("lsNotificationGroup",i)}()}.call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";var t={count1:"ONE",count2:"TWO",more:"MORE"},n={comment_like:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"contentDetails.title")]},hasThumbnail:!0,icon:"heart",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_MENTIONS","CONTENT_TITLE"]},comment_like_post:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"parentContentDetails.title"),e.get(t.notification,"title")]},hasThumbnail:!0,icon:"heart",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_MENTIONS","COMMUNITY_NAME","POST_TITLE"]},comment_mention:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:""]},hasThumbnail:!0,icon:"comment-multiple-outline",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_MENTIONS"]},comment_new:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"contentDetails.title")]},hasThumbnail:!0,icon:"comment-multiple-outline",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_COMMENTS","CONTENT_TITLE"]},comment_new_post:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"parentContentDetails.title"),e.get(t.notification,"title")]},hasThumbnail:!0,icon:"comment-multiple-outline",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_COMMENTS","COMMUNITY_TITLE","POST_TITLE"]},comment_reply:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"title")]},hasThumbnail:!0,icon:"comment-multiple-outline",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_REPLIES","POST_TITLE"]},content_expiration:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title"),moment.utc(e.get(t.notification,"contentDetails.endDate")).local().fromNow(!0)]},icon:"timer",tokens:["CONTENT_TITLE","EXPIRATION_DATE"]},content_expired:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title")]},icon:"timer",tokens:["CONTENT_TITLE"]},content_like:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"contentDetails.title")]},hasThumbnail:!0,icon:"heart",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_LIKES","CONTENT_TITLE"]},content_like_post:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"parentContentDetails.title"),e.get(t.notification,"title")]},hasThumbnail:!0,icon:"heart",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_LIKES","COMMUNITY_TITLE","POST_TITLE"]},content_new:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),e.get(t.notification,"contentDetails.title")]},hasThumbnail:!0,icon:"pencil",tokens:["AUTHOR_NAME","CONTENT_TITLE"]},content_refused:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title")]},icon:"close-circle",tokens:["CONTENT_TITLE"]},content_update:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),e.get(t.notification,"contentDetails.title")]},hasThumbnail:!0,icon:"pencil",tokens:["AUTHOR_NAME","CONTENT_TITLE"]},content_validated:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title")]},icon:"check-circle",tokens:["CONTENT_TITLE"]},content_workflow:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title")]},icon:"help-circle",tokens:["CONTENT_TITLE"]},custom:{getReplacements:function(t){return angular.isDefinedAndFilled(e.get(t.notification,"parentId"))?[]:[e.get(t.notification,"unreadNotificationCount"),e.get(t.notification,"groupName")]},hasThumbnail:function(t){return angular.isDefinedAndFilled(e.get(t.notification,"thumbnail"))},icon:"alert-circle-outline",plurals:{count1:"ONE",more:"MORE"},tokens:["NB_UNREAD_NOTIFICATIONS","GROUP_NAME"]},post_moderation_decline:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title")]},icon:"comment-alert",tokens:["POST_TITLE"]},post_moderation_delete:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title"),e.get(t.notification,"actionCount")]},icon:"comment-alert",plurals:{count1:"ONE",more:"MORE"},tokens:["COMMUNITY_NAME","REPORT_COUNT"]},post_moderation_delete_spammer:{getReplacements:function(t){return[e.get(t.notification,"title"),e.get(t.notification,"contentDetails.title")]},icon:"comment-alert",tokens:["POST_TITLE","COMMUNITY_NAME"]},post_report_new:{getReplacements:function(t){return[e.get(t.notification,"contentDetails.title"),e.get(t.notification,"parentContentDetails.title"),e.get(t.notification,"actionCount")]},icon:"comment-alert",tokens:["POST_TITLE","COMMUNITY_NAME","REPORT_COUNT"]},reply_like:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"contentDetails.title")]},hasThumbnail:!0,icon:"heart",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_MENTIONS","CONTENT_TITLE"]},reply_like_post:{getReplacements:function(t,n,r){var i=e.get(e.first(t.actions),"senderDetails");return[r(i),n>1?n-1:"",e.get(t.notification,"parentContentDetails.title"),e.get(t.notification,"title")]},hasThumbnail:!0,icon:"heart",plurals:t,tokens:["AUTHOR_NAME","NB_OTHER_MENTIONS","COMMUNITY_NAME","POST_TITLE"]}};angular.module("Constants").constant("NotificationSettings",n)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/notification/:methodKey",{},{list:{isArray:!1,method:"POST",params:{methodKey:"list"}},send:{isArray:!1,method:"POST",params:{methodKey:"send"}},setAllAsRead:{isArray:!1,method:"DELETE",params:{methodKey:"deleteAll"}},setAsRead:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("NotificationFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){var l=r.createLumsitesBaseService(i,{autoInit:!1,objectIdentifier:"uid"}),u={list:{items:{actions:{senderDetails:{apiProfile:{profilePicture:!0,thumbnail:!0,thumbnailPhotoUrl:!0},firstName:!0,lastName:!0,uid:!0}},digest:!0,notification:{actionCount:!0,contentDetails:{endDate:!0,postStatusDetails:{title:!0},slug:!0,title:!0,type:!0},customerId:!0,description:!0,externalKey:!0,group:!0,groupName:!0,instanceDetails:{slug:!0},instanceId:!0,link:!0,parentContentDetails:{slug:!0,title:!0},parentId:!0,priority:!0,properties:!0,thumbnail:!0,title:!0,type:!0,uid:!0,unreadNotificationCount:!0,updatedAt:!0,url:!0}}}};return l.KEY_UNREAD="unread",l.EXTERNAL_KEY_KIND={content:"Content"},l.MAX_NOTIFICATION_NUMBER=30,l.DEFAULT_LIST_PARAMS={isRead:!1,maxResults:l.MAX_NOTIFICATION_NUMBER,sortOrder:"-priority"},l.is={initialized:!1,initializing:!1},l.unreadNotificationCount=0,l.filterize=function(e,t,n,i,a){return a=a||u.list,r.proto.prototype.filterize.call(l,e,t,n,i,a)},l.getIcon=function(t){return e.get(a[t],"icon","")},l.getNotificationTypes=function(){return n.NOTIFICATION_TYPES||{}},l.hasUnreadNotifications=function(t){var n=e.map(l.displayList(l.KEY_UNREAD),"notification");return!angular.isUndefinedOrEmpty([n,t],"some")&&e.includes(e.map(n,"externalKey"),t)},l.setAllAsRead=function(e){if(o.isConnected()){var t=l.displayList(l.KEY_UNREAD),n={},r=angular.isDefinedAndFilled(e);if(-1!==e&&0!==l.unreadNotificationCount){var a=angular.fastCopy(t);if(r){angular.extend(n,{externalKey:e,externalKeyKind:l.EXTERNAL_KEY_KIND.content});var s=t.filter((function(t){return t.notification.externalKey!==e}));l._services[l.KEY_UNREAD]._list=s}else l._services[l.KEY_UNREAD]._list=[],l.unreadNotificationCount=0;i.setAllAsRead(n,(function(){r&&l.init()}),(function(){l._services[l.KEY_UNREAD]._list=a}))}}},l.setAsRead=function(n,r,a){r=r||l.KEY_UNREAD;var o=l.displayList(r);if(!angular.isUndefinedOrEmpty([o,e.get(n,"digest")],"some")){var s=n.notification,c=e.findIndex(o,(function(e){return e.notification.uid===s.uid}));if(!(c<0)){var u=1;s.type===l.getNotificationTypes().CUSTOM&&(angular.isDefinedAndFilled(s.parentId)?t.$broadcast("notifications__child-set-as-read",s.parentId,-1):u=s.unreadNotificationCount),o.splice(c,1),l.unreadNotificationCount-=u,a&&t.$broadcast("notifications__first-set-as-read",e.get(o[c],"notification.uid")),i.setAsRead({uid:s.uid},angular.noop,(function(){o.splice(c,0,n),l.unreadNotificationCount+=u})),l.unreadNotificationCount<=0&&l.loadMoreNotifications(l.KEY_UNREAD)}}},l.loadMoreNotifications=function(t){l.displayNextPage(t,void 0,(function(){var t=e.get(l._services,l.KEY_UNREAD+"._list",[]);l.unreadNotificationCount=t.length}))},l.init=function(){!o.isConnected()||s.isHeadlessModeOn()||s.isReworkedUIModeOn(c)||(l.is.initializing=!0,l.initializationPromise=l.promiseFilterize(l.DEFAULT_LIST_PARAMS,l.KEY_UNREAD),l.initializationPromise.then((function(){t.$broadcast("notifications-loaded");var n=e.get(l._services,l.KEY_UNREAD+"._list",[]);l.unreadNotificationCount=n.length})).catch(s.displayServerError).finally((function(){l.is.initialized=!0,l.is.initializing=!1})))},l}t.$inject=["$rootScope","InitialSettings","LumsitesBaseService","NotificationFactory","NotificationSettings","User","Utils","Features"],angular.module("Services").service("Notification",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/role/:methodKey",{},{check:{isArray:!1,method:"POST",params:{methodKey:"check"}},delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("RoleFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(t){return angular.forEach(t.authorizations,(function(t){var n={};angular.forEach(o.getRefactoredMetadata(!0),(function(r){n[r.key]=[],angular.forEach(r.items,(function(i){e.includes(t.metadata||[],i.key)&&n[r.key].push(i.key)}))})),t.metadata=n})),t}function u(e){return l(e)}var d=a.createLumsitesBaseService(s,{autoInit:!1,objectIdentifier:"uid",postGet:u,postList:function(e){var t=[];return angular.forEach(e,(function(e){t.push(u(e))})),t},postSave:function(e){return l(e)},preSave:function(e){return function(e){return angular.forEach(e.authorizations,(function(e){var t=[];angular.forEach(e.actions,(function(e){angular.isDefinedAndFilled(e.value)?t.push(e.value):t.push(e)})),e.actions=t;var n=[];angular.forEach(e.feeds,(function(e){angular.isDefinedAndFilled(e.id)?n.push(e.id):n.push(e)})),e.feeds=n;var r=[];angular.forEach(e.metadata,(function(e){angular.isDefinedAndFilled(e)&&(angular.isString(e)?r.push(e):r=r.concat(e))})),e.metadata=r})),e}(angular.fastCopy(e))}}),p=t.defer(),f={};return d.is={initialized:!1,initializing:!1},d.defaultParams={},d.is={loading:{roles:!1}},d.getActionList=function(){return f},d.init=function(){var a=i.getCurrentInstanceId();d.defaultParams={instance:a};var o,s=[];if(d.is.initializing)return p.promise;d.is.initializing=!0;var l={};return angular.forEach(r.AUTHORIZATION_ACTION,(function(e){s=[],angular.forEach(e.values,(function(t){s.push({name:e.name,type:t})})),l[c.translate("ACTION_TYPE_"+e.name)]=s})),f=angular.fastCopy(l),t.all([n.promiseList(),i.getSiblings(!1)]).then((function(t){var n=e.first(t);o=e.filter(n,{instance:a});var r=e.get(i.getInstance(),"parent");if(angular.isDefinedAndFilled(r)){var u=e.filter(n,{heritable:!0,instance:r});o=e.union(o,u)}f={},angular.forEach(o,(function(t){s=[];var n=t.id,r=c.translate(t.name);angular.forEach(["READ","EDIT","PUBLISH","DELETE","ARCHIVE"],(function(e){(t.isWorkflowEnabled||"PUBLISH"!==e)&&s.push({customContentType:n,name:"CUSTOM_CONTENT",type:e})}));var o=e.get(i.instanceKeyToInstanceFromSiblings(t.instance,!0),"name",""),l=r;t.instance!==a&&(l+=" (",l+=angular.isDefinedAndFilled(o)?o:c.translate("ADMIN_INSTANCE_PARENT"),l+=")"),angular.isDefined(f[l])||(f[l]=s)})),f=angular.extend(f,l),p.resolve(f)})).catch(p.reject),p.promise.finally((function(){d.is.initialized=!0,d.is.initializing=!1})),p.promise},d}t.$inject=["$q","CustomContentType","InitialSettings","Instance","LumsitesBaseService","Metadata","RoleFactory","Translation"],angular.module("Services").service("Role",t)}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),n.d(t,"EXTERNAL_TAB",(function(){return r})),n.d(t,"IFRAME_TAB",(function(){return i}));var r={id:"cloudsearch",name:{en:"Cloud Search"},type:"external",url:"https://cloudsearch.google.com/cloudsearch/search?q={query}"},i={height:600,id:"lumapps",name:{en:"LumApps"},noFilter:!0,template:"legacy-search-results_iframe.html",type:"iframe",url:"http://localhost:8888/a/mmb/home?query={query}&user={user}"}},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/community/:methodKey"),{},{searchCommunitiesForSharing:{isArray:!1,method:"POST",params:{methodKey:"searchForSharing"}}})}n.r(t),n.d(t,"CommunitySearchFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("CommunitySearchFactory",r)},function(e,t,n){"use strict";function r(e,t,n,r,i){function s(e){return angular.isDefinedAndFilled(e)?e:"default"}function c(e,t,n,r,i){if(!angular.isUndefinedOrEmpty([e,t,u[t]],"some")&&angular.isFunction(u[t]))return n=n||angular.noop,r=r||angular.noop,g[e]=!0,angular.isDefinedAndFilled(i)&&d._computeProjection(f[e],i),f[e].callId=Object(o.b)(),u[t](f[e],(function(t){t.callId===f[e].callId&&(f[e].more=t.more,f[e].cursor=t.cursor,n(t)),g[e]=!1}),(function(t){r(t),g[e]=!1}))}var l=this,u={communityList:i.searchCommunitiesForSharing},d=n.createService(i),p={callId:"",cursor:void 0,maxResults:5,more:!1},f={default:angular.copy(p)},g={default:!1};return l.query=void 0,l.search=function(e,t,n,r,i,a){return n=n||{},e=s(e),f[e]=angular.fastCopy(p),angular.extend(f[e],n),c(e,t,r,i,a)},l.hasMore=function(e){return a()(f[s(e)],"more",!1)},l.nextPage=function(e,t,n,r){e=s(e),f[e].more&&!g[e]?c(e,t,n,r):r()},angular.isDefinedAndFilled(e.search().q)?l.query=e.search().q:angular.isDefinedAndFilled(t.params.query)&&(l.query=t.params.query),l}n.r(t),n.d(t,"CommunitySearchService",(function(){return r}));n(21),n(75);var i=n(4),a=n.n(i),o=(n(227),n(167),n(35));r.$inject=["$location","$state","BaseService","Community","CommunitySearchFactory"],angular.module("Services").service("CommunitySearch",r)},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/eventstream/querystring/:methodKey"),{},{complete:{isArray:!1,method:"POST",params:{methodKey:"complete"}}})}n.r(t),n.d(t,"LegacySearchAutocompleteFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("LegacySearchAutocompleteFactory",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/search/:methodKey",{},{searchCommunity:{isArray:!1,method:"POST",params:{methodKey:"community"}},searchContent:{isArray:!1,method:"POST",params:{methodKey:"content"}},searchContentAndMedia:{isArray:!1,method:"POST",params:{methodKey:"contentandmedia"}},searchMedia:{isArray:!1,method:"POST",params:{methodKey:"media"}},searchPost:{isArray:!1,method:"POST",params:{methodKey:"post"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("LegacySearchFactory",e)}()},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,s,l,d,f,m,h,b,O,C,T,S,I,_){function A(e){return angular.isDefinedAndFilled(e)?e:"default"}function w(e,t,n,i,a){if(!angular.isUndefinedOrEmpty([e,t,P[t]],"some")&&angular.isFunction(P[t])){n=n||angular.noop,i=i||angular.noop,k[e]=!0,angular.isDefinedAndFilled(a)&&N._computeProjection(j[e],a),j[e].callId=Object(E.b)();var u=function(t){t.callId===j[e].callId&&(j[e].more=t.more,j[e].cursor=t.cursor,angular.isUndefined(F[e])&&(F[e]=[]),angular.isDefinedAndFilled(t.items)&&(F[e]=F[e].concat(t.items)),n(t)),k[e]=!1},d=function(t){i(t),k[e]=!1};if(l.hasFeature("sharepoint-beta-search")&&"sharepointList"===t){var p=j[e],f=p.lang,g=p.cursor,m=p.maxResults,v=p.callId,h=p.searchText,y=c()(p,["lang","cursor","maxResults","callId","searchText"]);return s.search(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mediaProvider:"onedrive",searchText:h,searchRules:"",lang:f,cursor:g,maxResults:m,callId:v},y),u,d)}return P[t](j[e],u,d)}}function D(e,t,n,r,i,a){return n=n||{},e=A(e),F[e]=[],j[e]=angular.fastCopy(R),angular.extend(j[e],n),w(e,t,r,i,a)}var L=this,P={communityList:h.searchCommunity,content:h.searchContent,contentAndMedia:h.searchContentAndMedia,documentList:h.searchMedia,newsList:h.searchContent,pageList:h.searchContent,postList:h.searchPost,sharepointList:s.list,siteList:O.searchDirectoryEntries,userList:C.searchUsers,zendeskList:_.search},N=n.createService(h),R={callId:"",cursor:void 0,maxResults:20,more:!1},j={default:angular.copy(R)},k={default:!1},F={default:[]};return L.query=void 0,L.autocomplete=function(e,t,n){if(l.hasFeature("autocomplete-search")){t=t||angular.noop,n=n||angular.noop;var r=function(e){if(!e)return"";var t=!!e.$modelValue;return t?e.$modelValue:e}(e);f.complete({instance:d.getCurrentInstanceId(),query:r},(function(e){var n=[];angular.isUndefinedOrEmpty(e)&&b.error(T.translate("ERROR_GENERIC")),angular.isDefinedAndFilled(e.items)&&(n=y()(e.items.customer,e.items.user)),t(n)}),n)}},L.filter=D,L.filterTabs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=p()(e,(function(e){return!angular.isDefinedAndFilled(e.requiredFeatures)||l.hasAllRequiredFeatures(e)}));return t?(S.isGoogle(t)||(n=v()(n,{name:m.TABS.drive.id})),S.isMicrosoft(t)||(n=v()(n,{name:m.TABS.sharepoint.id})),n):n},L.getIsLoading=function(e){return k[A(e)]},L.getList=function(e){return F[A(e)]||[]},L.getTabUrl=function(e,t){var n=S.isConnected()?S.getConnected().email:"";if(angular.isUndefinedOrEmpty([e,t],"some"))return"";var r=!1;angular.isDefinedAndFilled(/\?.*=[^&=]*%3F[^&=]*%3D[^&=]*{query}/.exec(e))&&(r=!0);var i=encodeURIComponent(t);return r&&(i=encodeURIComponent(i)),e.replace("{query}",i).replace("{user}",n)},L.hasMore=function(e){return g()(j[A(e)],"more",!1)},L.multiFilter=function(e,t,n,r){!angular.isUndefinedOrEmpty(e)&&angular.isArray(e)&&angular.forEach(e,(function(e){D(e,e,t,n,r)}))},L.nextPage=function(e,t,n,r){e=A(e),j[e].more&&!k[e]&&w(e,t,n,r)},L.openSearchLanding=function(){if(!t.is("app.front.search")){var e,n=d.getProperty(i.INSTANCE_PROPERTIES.SEARCH_TABS);e=angular.isUndefinedOrEmpty(n)?"all":angular.isArray(n)&&angular.isString(n[0])?n[0]:(u()(n,{enable:!0})||{}).name||"all",t.go("app.front.search",{query:L.query,tab:e})}},angular.isDefinedAndFilled(e.search().q)?L.query=e.search().q:angular.isDefinedAndFilled(t.params.query)&&(L.query=t.params.query),L}n.r(t),n.d(t,"LegacySearchService",(function(){return i}));var a=n(3),o=n.n(a),s=n(18),c=n.n(s),l=n(21),u=n.n(l),d=n(75),p=n.n(d),f=n(4),g=n.n(f),m=n(227),v=n.n(m),h=n(167),y=n.n(h),E=n(35);i.$inject=["$location","$state","BaseService","Config","Community","DocumentFactory","Features","Instance","LegacySearchAutocompleteFactory","LegacySearchConstant","LegacySearchFactory","LxNotificationService","SearchDirectoryEntriesFactory","SearchUserFactory","Translation","User","Utils","ZendeskFactory"],angular.module("Services").service("LegacySearch",i)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/search/directory/:methodKey",{},{searchDirectoryEntries:{isArray:!1,method:"POST",params:{methodKey:"entry"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("SearchDirectoryEntriesFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){var a=this;a.postFields=e.without(r.getProperty(t.INSTANCE_PROPERTIES.POST_FIELDS),"comments"),a.LegacySearch=i,a.onInfiniteScroll=function(e){if(e||"main"===a.context)return i.nextPage(a.key,a.method)},a.openLink=function(e){n.goTo(e)}}t.$inject=["Config","Content","Instance","LegacySearch"],angular.module("Directives").directive("lsSearchResultsBlock",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{context:"@lsContext",key:"@lsKey",method:"@?lsMethod"},templateUrl:"/client/front-office/modules/search/views/search-results-block.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o,s,c,u,p,g,v,y,b,C,S,_,w,j,k,F,U,M,x,$,B,W,G,Y,H,K,V){function z(e){angular.isUndefinedOrEmpty(h()(g.getCustomer(),"domain"))||y.isSearchInProgress||(angular.isDefined(h()(y._services,[J.KEY_DRIVE,"_list"]))&&(y._services[J.KEY_DRIVE]._list=[]),y.search({fullText:(_.query||"").replace(/'/g,"\\'"),maxResults:e},void 0,H.displayServerError,J.KEY_DRIVE))}function q(e){j.search(_.query,{maxResults:e},void 0,H.displayServerError,J.KEY_LUMWORK)}function X(e){return e!==w.TABS.users.id?"CONTENT_FILTER_SEARCH":"FILTER"}function Q(){var e,t=r.params.tab;angular.isDefinedAndFilled(t)&&(e=d()(J.availableTabs,(function(e){return e.id===t})));var n=E()(T()(J.availableTabs,"id"),w.TABS.all.id)?i({},w.TABS.all):f()(J.availableTabs);return e||n}function Z(){(b.hasFeature("zendesk")&&Object(N.u)(S.getProperty("searchTabs"),w.TABS.zendesk.id)||h()(J.currentTab,"id")===w.TABS.zendesk.id)&&K.initTags()}var J=this,ee=[c.AVAILABLE_CONTENT_TYPES.PAGE,c.AVAILABLE_CONTENT_TYPES.NEWS,c.AVAILABLE_CONTENT_TYPES.CUSTOM,c.AVAILABLE_CONTENT_TYPES.CUSTOM_LIST],te=[w.TABS.drive.id,w.TABS.lumwork.id],ne={currentInstance:S.getCurrentInstanceId(),currentInstanceId:S.getCurrentInstanceId(),customer:g.getCustomerId(),lang:angular.isDefinedAndFilled(S.getInstance().langs)?S.getInstance().langs:W.getLang("current")},re={LUMAPPS:P.b,ZENDESK:P.a};J.KEY_DRIVE="search-drive",J.KEY_LUMWORK="search-lumwork",J.TOMORROW=moment().locale(W.getLang("current")).add(1,"days").toDate(),J.availableTabs=[],J.currentTab={},J.customContentTypes=[],J.customContentTypeMetaData=[],J.customContentTypeTags=[],J.hasCustomContentTypes=!1,J.mediaTypes=[],J.instancesSiblings=[],J.queryFilter={},J.Community=s,J.Config=c,J.CustomContentType=p,J.Directory=v,J.Drive=y,J.Header=C,J.Instance=S,J.LumworkDocument=j,J.Media=F,J.Metadata=M,J.LegacySearch=_,J.LegacySearchConstant=w,J.Translation=W,J.User=G,J.UserConstant=Y,J.Utils=H,J.Zendesk=K,J.ZendeskConstant=V,J.clearFilters=function(){angular.isUndefined(J.queryFilter.filters)||J.queryFilter.filters.type===V.RESULT_TYPE_ARTICLE&&(J.queryFilter.filters=I()(J.queryFilter.filters,["assignee","assigneeDetails","updatedAfterDate","updatedBeforeDate","tags","status","ticket_type"]))},J.displayFilter=function(){return J.currentTab.id!==w.TABS.all.id&&angular.isUndefined(J.currentTab.filter)||angular.isDefined(J.currentTab.filter)&&!0===J.currentTab.filter},J.fetchAll=function(){var e={query:_.query,type:ee};J.filterExec("content","content",e),J.fetchSidebarResults(J.availableTabs)},J.fetchSidebarResults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];angular.forEach(e,(function(e){e.id!==w.TABS.content.id&&J.searchFilter(e)}));var t=T()(e,"id");E()(t,w.TABS.drive.id)&&z(4),E()(t,w.TABS.lumwork.id)&&q(4)},J.filterExec=function(e,t,n,r){if(!_.getIsLoading(e)){r=r||angular.noop,n=n||{query:_.query};var i=angular.fastCopy(ne);angular.isDefinedAndFilled(n.instance)&&(i=I()(i,["currentInstance","currentInstanceId"])),_.filter(e,t,angular.extend(i,n),r,H.displayServerError,w.PROJECTIONS[t])}},J.filterMainTabs=function(e){return!E()([w.TABS.content.id,w.TABS.all.id],e.id)&&!E()([w.TAB_TYPES.EXTERNAL,w.TAB_TYPES.IFRAME],e.type)},J.getAttr=H.getAttr,J.getMDIName=N.k,J.initTabs=function(e){var t=e.customTabs,n=void 0===t?{}:t,r=e.tabKey,i=void 0===r?"name":r,a=e.tabs,o=void 0===a?[]:a,s=T()(o,i),c=angular.isDefinedAndFilled(s)?s:w.DEFAULT_TAB_NAMES,l=[];return angular.forEach(c,(function(e){if(E()([w.TABS.all.id,w.TABS.community.id,w.TABS.post.id,w.TABS.users.id,w.TABS.zendesk.id],e))l.push(w.TABS[e]);else if(e===w.TABS.content.id)l.push(angular.extend(w.TABS[e],{extParams:{type:ee}}));else if(e===w.TABS.media.id)l.push(w.TABS[e]);else if(e===w.TABS.directory.id&&angular.isDefinedAndFilled(v.getList()))l.push(w.TABS[e]);else if(e===w.TABS.drive.id)l.push(angular.extend(w.TABS[e],{initCb:z}));else if(e===w.TABS.lumwork.id)l.push(angular.extend(w.TABS[e],{initCb:q}));else if(e===w.TABS.sharepoint.id){var t=d()(o,{id:e}),r=h()(t,"docPath",w.TABS[e].defaultDocPath);l.push(angular.extend(w.TABS[e],{extParams:{docPath:r,searchTypes:U.DOCUMENT_TYPES.allExceptFolders}}))}else if(n[e]){var i=n[e];i.id=e,te.push(i.id),i.type===w.TAB_TYPES.IFRAME&&(i.noFilter=!0,i.template="legacy-search-results_iframe.html"),l.push(i)}})),l},J.isCustomTab=function(e){return E()(te,e)},J.matchAttr=H.matchAttr,J.nextDrivePage=function(e){!angular.isUndefinedOrEmpty(e)&&angular.isArray(e)&&y._services[J.KEY_DRIVE]._list.concat(e)},J.onInstanceChange=function(){var e,n,r;n=[],r=!1,angular.isDefinedAndFilled(h()(J.queryFilter,"instance"))?(n=[J.queryFilter.instance],e=t((function(e,t){S.getSiblings(!1).then((function(t){var i=h()(d()(t,(function(e){return angular.isUndefinedOrEmpty(e.parent)})),"id");angular.isDefinedAndFilled(i)&&!E()(n,i)&&(n.push(i),r=!0),e(n)})).catch(t)}))):e=t((function(e,t){S.getSiblingsIds().then(e).catch(t)})),e.then((function(e){p.groupByInstances(e,!1,r,(function(e){J.customContentTypes=e,J.hasCustomContentTypes=angular.isDefinedAndFilled(J.customContentTypes)}),void 0,!1)}))},J.searchFilter=function(e,t,n){e=e||J.currentTab,t=t||angular.noop;var r=h()(e,"id"),i=r===w.TABS.sharepoint.id?"searchText":"query",a={};a[i]=_.query,(n||e.extParams)&&angular.extend(a,n||e.extParams),r===w.TABS.post.id&&(a.maxResults=4),r===w.TABS.community.id&&(a.maxResults=4),J.currentTab.id===w.TABS.all.id&&(a.maxResults=4,r===w.TABS.zendesk.id&&(a.ignore403=!0,a.filters={type:[V.RESULT_TYPE_ARTICLE,V.RESULT_TYPE_TICKET]})),function(e){if(angular.isDefined(J.queryFilter.startDate)&&(e.startDate=moment(J.queryFilter.startDate).startOf("day").utc().format(re.LUMAPPS)),angular.isDefined(J.queryFilter.endDate)&&(e.endDate=moment(J.queryFilter.endDate).endOf("day").utc().format(re.LUMAPPS)),e.startDate&&e.endDate&&J.queryFilter.startDate>J.queryFilter.endDate)return k.warning(W.translate("CONTENT_FILTER_START_DATE_BIGGER_THAN_END_DATE")),!1;if(angular.forEach(J.queryFilter,(function(t,n){angular.isUndefinedOrEmpty(t)?e[n]=void 0:!J.queryFilter.hasOwnProperty(n)||t instanceof Date||(e[n]=t)})),angular.isDefinedAndFilled(J.queryFilter.orMetadata)&&(e.orMetadata=m()(D()(J.queryFilter.orMetadata))),J.currentTab.id===w.TABS.zendesk.id){if(e.ignore403=!0,angular.isDefinedAndFilled(J.queryFilter.filters)){e.filters.assignee=T()(J.queryFilter.filters.assigneeDetails,"email");var t=J.queryFilter.filters.updatedBeforeDate,n=J.queryFilter.filters.updatedAfterDate;angular.isDefinedAndFilled(t)&&(e.filters.updatedBeforeDate=moment(t).format(re.ZENDESK)),angular.isDefinedAndFilled(n)&&(e.filters.updatedAfterDate=moment(n).format(re.ZENDESK))}angular.isUndefinedOrEmpty(h()(J.queryFilter,"filters.type"))&&A()(e,"filters.type",[V.RESULT_TYPE_ARTICLE,V.RESULT_TYPE_TICKET])}return angular.isDefinedAndFilled(h()(J.sortBy,"value"))&&(e.sortOrder="".concat(J.sortBy.isAscending?"":"-").concat(J.sortBy.value)),!0}(a)&&J.filterExec(e.id,e.method,angular.fastCopy(a),t)},J.setSortBy=function(e,t,n,r){J.sortBy=e?{isAscending:angular.isDefined(r)?r:h()(J.sortBy,"isAscending",!1),value:e}:void 0},J.switchTab=function(e){var t;if(t=O()(e)?angular.fastCopy(w.TABS.all):angular.isObject(e)?e:d()(J.availableTabs,{id:e.toString()}),!angular.isUndefinedOrEmpty(t)&&J.currentTab.id!==t.id)if(t.type===w.TAB_TYPES.EXTERNAL&&angular.isDefinedAndFilled(t.url))a.open(_.getTabUrl(t.url,_.query),"_blank");else{J.currentTab=t;var n=J.currentTab.id;if(n===w.TABS.zendesk.id?J.queryFilter={filters:{assignee:[]}}:(J.FILTER_BUTTON_KEY=X(n),J.queryFilter=i({},w.DEFAULT_QUERY_FILTER)),J.IS_NATIVE_REWORK)return Object(N.n)({uid:n})&&(x.store.dispatch(Object(R.o)(n)),J.updateSearch()),void r.go("app.front.search",{tab:n},{notify:!1});r.go("app.front.search",{tab:n})}},J.updateCustomContentTypeTagsAndMetaData=function(){p.getCustomContentTypesTags(J.queryFilter.customContentType).then((function(e){J.customContentTypeTags=e})),function(){J.customContentTypeMetaData.length=0;var e=M.listByCustomContentTypeId(J.queryFilter.customContentType);J.customContentTypeMetaData=M.getMetadataFilteredByProperty("displayInFilter",!0,e)}()},J.updateSearch=function(){angular.isUndefinedOrEmpty(J.currentTab)||(angular.isDefined(J.currentTab.method)?J.searchFilter(J.currentTab,J.currentTab.initCb,J.currentTab.extParams):angular.isDefined(J.currentTab.initCb)&&angular.isFunction(J.currentTab.initCb)?J.currentTab.initCb():J.fetchAll())},J.getQuery=function(){return Object(L.a)(J.LegacySearch.query)},n.$watch((function(){return _.query}),(function(e,t){e!==t&&(J.IS_CLOUDSEARCH||J.IS_NATIVE_REWORK||(r.go("app.front.search",{query:_.query},{notify:!1}),J.updateSearch()))}),!0),function(){var t=h()(S.getInstance(),"publicContentAuthorized",!1);if(J.IS_CLOUDSEARCH=G.isConnected()&&!G.isExternal()&&b.hasFeature("cloudsearch")&&!t,J.IS_NATIVE_REWORK=!J.IS_CLOUDSEARCH&&b.hasFeature("elasticsearch-ps"),J.IS_LEGACY_NATIVE=!J.IS_CLOUDSEARCH&&!J.IS_NATIVE_REWORK,u.setCurrent(void 0),B.setCurrent(void 0),angular.isDefined(e.search().q)?_.query=e.search().q:angular.isDefined(r.params.query)&&(_.query=r.params.query),o.handleTaggingMap("search",void 0,{query:_.query}),!J.IS_CLOUDSEARCH){if(J.IS_NATIVE_REWORK){var n=Object(N.m)($.SOURCES),a=n.customTabs,s=n.tabs;return J.availableTabs=J.initTabs({customTabs:a,tabKey:"id",tabs:Object(N.i)(s)}),J.currentTab=Q(),J.FILTER_BUTTON_KEY=X(J.currentTab.id),void Z()}S.getSiblings(!1).then((function(e){J.instancesSiblings=e,p.groupByInstances(S.getSiblingsIds(!0),!1,!1,(function(e){J.customContentTypes=e,J.hasCustomContentTypes=angular.isDefinedAndFilled(J.customContentTypes)}),void 0,!0)})),J.queryFilter=i({},w.DEFAULT_QUERY_FILTER),J.SORT_BY_TYPES=T()(w.SORT_ORDER_TYPES,(function(e){var t=e.label,n=e.value;return{label:W.translate(t),value:n}}));var d,f,g=G.getAuthorProjection();angular.extend(w.PROJECTIONS.content.items,{authorDetails:g,writerDetails:g}),J.availableTabs=angular.fastCopy(J.initTabs({customTabs:S.getProperty(c.INSTANCE_PROPERTIES.CUSTOM_SEARCH_TABS),tabs:(d=S.getProperty(c.INSTANCE_PROPERTIES.SEARCH_TABS),f={},angular.isArray(d)?angular.forEach(d,(function(e){angular.isString(e)?f[e]={enable:!0,name:e}:angular.isObject(e)&&e.enable&&angular.isDefinedAndFilled(e.name)&&(f[e.name]=angular.fastCopy(e))})):f=l()(d,{enable:!0}),_.filterTabs(f,G.getConnected()))})),J.currentTab=Q(),J.FILTER_BUTTON_KEY=X(J.currentTab.id),J.updateSearch(),S.getSiblingsIds().then((function(e){p.groupByInstances(e,!1,!1,(function(e){J.customContentTypes=e,J.hasCustomContentTypes=angular.isDefinedAndFilled(J.customContentTypes)}),void 0,!0)})),Z()}}()}n.r(t),n.d(t,"SearchResultsController",(function(){return a}));var o=n(3),s=n.n(o),c=n(75),l=n.n(c),u=n(21),d=n.n(u),p=n(51),f=n.n(p),g=n(260),m=n.n(g),v=n(4),h=n.n(v),y=n(17),E=n.n(y),b=n(410),O=n.n(b),C=n(28),T=n.n(C),S=n(130),I=n.n(S),_=n(7),A=n.n(_),w=n(99),D=n.n(w),L=n(803),P=n(305),N=n(84),R=n(159);a.$inject=["$location","$q","$scope","$state","$window","Analytics","Community","Config","Content","CustomContentType","Customer","Directory","Drive","Features","Header","Instance","LegacySearch","LegacySearchConstant","LumworkDocument","LxNotificationService","Media","MediaConstant","Metadata","ReduxStore","Search","Template","Translation","User","UserConstant","Utils","Zendesk","ZendeskConstant"],angular.module("Controllers").controller("SearchResultsController",a)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/user/:methodKey",{},{searchUsers:{isArray:!1,method:"GET",params:{methodKey:"search"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("SearchUserFactory",e)}()},function(e,t,n){"use strict";function r(e,t){function n(){return n=s()(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!angular.isDefinedAndFilled(r.SOURCES)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.store.dispatch(Object(c.t)({params:n}));case 4:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}var r={hasResults:!1,is:{loading:!1},reduxReducerName:"search",reduxUpdateActionType:"search/update",sortBy:void 0,initTabs:function(e){return n.apply(this,arguments)},mapStateToRedux:function(){return{}},mapReduxToAngular:function(e){var n=e.currentDataSourceUid,i=e.currentError,a=e.currentSearchType,o=e.currentSortOrder,s=e.dataSources,c=e.isLoading,l=e.results;r.currentDataSourceUid=n,r.is.loading=c,r.hasResults=l[a]&&l[a].length>0,r.SOURCES=s,r.sortBy=o,angular.isUndefinedOrEmpty(i)||t.displayServerError(i)},init:function(){e.subscribe(r,!0)}};return r}n.r(t),n.d(t,"SearchService",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(159);r.$inject=["ReduxStore","Utils"],angular.module("Services").service("Search",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){var s=this;s.isSoscialAdvocacyEnabled=!1,s.Header=n,s.SocialAdvocacy=r,s.slug=t.slug,s.view=t.view,s.getMarginTop=function(){return o.getMarginTop(n,a,i)},e.$on("$stateChangeSuccess",(function(){s.slug=t.slug,s.view=t.view})),s.isSoscialAdvocacyEnabled=r.isEnabled()}n.r(t),n.d(t,"SocialAdvocacyController",(function(){return r})),r.$inject=["$scope","$stateParams","Header","SocialAdvocacy","Layout","Features","Utils"],angular.module("Controllers").controller("SocialAdvocacyController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,u){function d(){return d=c()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.dialogSettings.files.isOpen=!0,u.waitForAndExecute("#".concat(f.dialogSettings.files.key),n);case 2:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(){return p=c()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.dialogSettings.images.isOpen=!0,u.waitForAndExecute("#".concat(f.dialogSettings.images.key),n);case 2:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var f=this;f.Config=r,f.openFilePicker=function(){return d.apply(this,arguments)},f.openMediaPicker=function(){return p.apply(this,arguments)},f.onQuickUpload=function(e){f.onPickFromLocal({files:e})},t.$on("lx-dialog__close-end",(function(e,t){t===f.dialogSettings.links.key&&(f.dialogSettings.links.isOpen=!1,a.current=void 0)})),t.$on("abstract-picker__close-end",(function(e,t){t===f.dialogSettings.images.key?f.dialogSettings.images.isOpen=!1:t===f.dialogSettings.files.key&&(f.dialogSettings.files.isOpen=!1)}))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{content:"=?lsContent",dialogSettings:"=lsDialogSettings",richTextConnector:"=?lsRichTextConnector",theme:"=?lsTheme",type:"=lsCurrentType",urlCallback:"<?lsUrlCallback",hasToPickFromLocal:"=?lsHasToPickFromLocal",onPickFromLocal:"&lsOnPickFromLocal"},templateUrl:"/client/front-office/modules/social/attachments/views/attachments-controls.html"}}n.r(t),n.d(t,"AttachmentsControlsController",(function(){return r})),n.d(t,"AttachmentsControlsDirective",(function(){return i}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s);r.$inject=["$rootScope","$scope","AbstractPicker","Config","Features","LsTextEditor","LxNotificationService","Upload","Utils"],angular.module("Directives").directive("lsAttachmentsControls",i)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.r(t);var i=n(3),a=n.n(i),o=n(334);!function(){function e(e,t,n,i){var s=this;s.Utils=i,s.getEmbedCode=o.a,s.getVideoRatio=function(e){var t=Object(o.a)(e.videoId,Object(o.c)(e.url));if(!angular.isUndefinedOrEmpty(t)){var n={},r=56.25;return t.replace(/(width|height)=["']([^"']*)["']/gi,(function(e,t,r){n[t]=r})),angular.isDefined(n.width)&&angular.isDefined(n.height)&&(r=n.height/n.width*100),{"padding-bottom":"".concat(r,"%")}}},s.getVideoUrlWebsiteName=o.c,s.nextImage=function(e){s.links[e].thumbnailIndex++,s.links[e].thumbnailIndex===s.links[e].images.length&&(s.links[e].thumbnailIndex=0)},s.links=s.links.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{videoId:e.videoId?e.videoId:Object(o.b)(e.url,Object(o.c)(e.url))||null})}))}e.$inject=["$rootScope","LxNotificationService","Translation","Utils"],angular.module("Directives").directive("attachmentsLinks",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{editing:"=",links:"="},templateUrl:"/client/front-office/modules/social/attachments/views/attachments-links.html"}}))}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,g,m,v,h,y){function E(){A.content.files=[],A.content.images=[],A.attachments=[],A.content.links=[],A.type=void 0}function b(e,t){return angular.isUndefinedOrEmpty(e)?[]:(n=t?angular.isArray(e)?e:[e]:angular.isArray(e)?[c()(e)]:[e],n);var n}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(f.c)(e.url);A.type=n.ATTACHMENT_TYPE.LINK,A.content.links=[{description:e.description,images:e.images||[],lang:y.getLang("current"),thumbnailIndex:0,title:e.title,url:e.url}],angular.isDefinedAndFilled(t)&&(A.content.links[0].videoId=Object(f.b)(e.url,t))}function C(){A.type=void 0;var e=A.multi||A.attachments.length?A.attachments:[A.attachments],t=e.every((function(e){return e.content[0]&&e.content[0].type===n.ATTACHMENT_TYPE.IMAGE&&"svg"!==e.content[0].ext&&(e.source===v.PROVIDERS.lumapps||e.source===v.PROVIDERS.haussmann)}))?n.ATTACHMENT_TYPE.IMAGE:n.ATTACHMENT_TYPE.FILE;t===n.ATTACHMENT_TYPE.IMAGE?(A.content.images=b(e,A.multi),A.content.files=[],angular.isDefinedAndFilled(A.content.images)&&(A.type=n.ATTACHMENT_TYPE.IMAGE)):(A.content.files=b(e,A.multi),A.content.images=[],angular.isDefinedAndFilled([A.content.driveFiles,A.content.nonDriveFiles],"some")&&(A.content.driveFiles=b(A.content.driveFiles,A.multi),A.content.nonDriveFiles=b(A.content.nonDriveFiles,A.multi),A.content.files=p()(A.content.driveFiles,A.content.nonDriveFiles)),angular.isDefinedAndFilled(A.content.files)&&(A.type=n.ATTACHMENT_TYPE.FILE,A.content.files=b(A.content.files,A.multi)))}var T,S,I,_,A=this;A.form={},A.isCrawlerCallError=!1,A.isCrawlerCallInProgress=!1,A.linkInput=void 0,A.activeIndex=void 0,A.attachments=[].concat(o()(null!==(T=A.content.files)&&void 0!==T?T:[]),o()(null!==(S=A.content.images)&&void 0!==S?S:[])),A.Config=n,A.Document=i,A.FormValidation=s,A.MediaConstant=v,A.Post=h,A.confirmClearAttachments=function(){m.confirm(y.translate("ATTACHMENTS_DELETE"),y.translate("ATTACHMENTS_DELETE_DESCRIPTION"),{cancel:y.translate("CANCEL"),ok:y.translate("OK")},(function(e){e&&E()}))},A.convertMediaIntoThumbnails=function(e){if(angular.isUndefinedOrEmpty(e))return[];var t=angular.isArray(e)?e:[e];return t.map((function(e){return{url:i.getCroppedThumbnailFromMedia(e,!0,null,null),focusPoint:i.getFocusPointFromMedia(e,!0,null)}}))},A.onCloseMosaic=function(){A.activeIndex=null},A.openMosaic=function(t){e.$apply((function(){A.activeIndex=t}))},A.admin&&(e.$on("attachments__get-preview",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.linkInput;A.isCrawlerCallInProgress=!0,e.$emit("attachments__preview-loading-update",A.isCrawlerCallInProgress),r.urlinfo({url:n},(function(t){O(t),A.isCrawlerCallError=!1,A.isCrawlerCallInProgress=!1,e.$emit("attachments__preview-loading-update",A.isCrawlerCallInProgress)}),(function(){E(),A.isCrawlerCallError=!0,A.isCrawlerCallInProgress=!1,m.error(y.translate("FRONT.POST_DIALOG.CRAWLER_ERROR")),e.$emit("attachments__preview-loading-update",A.isCrawlerCallInProgress)}))})),e.$on("attachments__paste-drop-files-end",(function(){e.$apply((function(){var e,t;A.attachments=[].concat(o()(null!==(e=A.content.files)&&void 0!==e?e:[]),o()(null!==(t=A.content.images)&&void 0!==t?t:[])),C()}))})),e.$on("attachments__remove-all",E),e.$on("lx-dialog__close-end",(function(e,t){t===A.dialogSettings.links.key&&(A.linkInput=void 0)})),e.$on("lx-dialog__open-start",(function(e,t){A.dialogSettings.links.key===t&&angular.isDefinedAndFilled(u()(A.content,"links"))&&(A.linkInput=A.content.links[0].url)})),e.$on("abstract-picker__open-end",(function(e,t){(t===A.dialogSettings.images.key&&A.type!==n.ATTACHMENT_TYPE.IMAGE||t===A.dialogSettings.files.key&&A.type!==n.ATTACHMENT_TYPE.FILE)&&E()})),e.$on("abstract-picker__open-start",(function(e,t){A.multi||(t===A.dialogSettings.images.key?A.content.images=angular.isDefinedAndFilled(A.content.images)?c()(A.content.images):[]:t===A.dialogSettings.files.key&&(A.content.files=angular.isDefinedAndFilled(A.content.files)?c()(A.content.files):[]))})),e.$on("abstract-picker__close-end",C)),I=angular.isDefinedAndFilled(A.content.files),_=(A.content.images||[]).some((function(e){return e.source!==v.PROVIDERS.lumapps})),A.admin=A.admin||!1,A.content.files=I||_?p()([],A.content.files,A.content.images||[]):[],A.content.images=I||_?[]:p()([],A.content.images),A.content.links=A.content.links||[],A.attachments=p()([],A.content.files,A.content.images),A.driveOnly=A.driveOnly||!1,A.dialogSettings=A.admin?A.dialogSettings:{},A.multi=A.multi||!1}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{admin:"=?lsAdmin",content:"=lsContent",context:"@lsContext",dialogSettings:"=?lsDialogSettings",driveOnly:"=?lsDriveOnly",multi:"=?lsMulti",theme:"=?lsTheme",type:"=lsCurrentType"},templateUrl:"/client/front-office/modules/social/attachments/views/attachments.html"}}n.r(t),n.d(t,"AttachmentsController",(function(){return r})),n.d(t,"AttachmentsDirective",(function(){return i}));var a=n(19),o=n.n(a),s=n(51),c=n.n(s),l=n(4),u=n.n(l),d=n(167),p=n.n(d),f=n(334);r.$inject=["$scope","$timeout","Config","CrawlerFactory","Document","Features","FormValidation","LsTextEditor","LsTextEditorMarkdown","LxDialogService","LxNotificationService","MediaConstant","Post","Translation"],angular.module("Directives").directive("lsAttachments",i)},function(e,t){!function(){"use strict";function e(e,t,n,r){var i=this;i.link=!angular.isUndefined(i.link)&&i.link,i.target=angular.isUndefined(i.target)?"_self":i.target,i.Content=e,i.Instance=n,i.Service=i.content.type===t.CONTENT_TYPES.POST?r:e}e.$inject=["Content","InitialSettings","Instance","Post"],angular.module("Directives").directive("commentButton",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{content:"<",isExtended:"<?",link:"<?",target:"<?",theme:"@?"},templateUrl:"/client/front-office/modules/social/views/comment-button.html"}}))}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,c){function l(){if(d=r.getFollowing(p.entity.id,p.kind),angular.isUndefinedOrEmpty(d)&&angular.isDefinedAndFilled(p.entity.subscription)&&(d=r.addFollowing(p.entity.id,p.kind,p.entity.subscription)),angular.isDefinedAndFilled(d))p.isFollowed=!0,p.isNotified=o()(d.subscription,"notify",!1),p.isFeedSubscription=o()(d.subscription,"type")===r.SUBSCRIPTION_TYPES.FEED_CONTENT;else if("USER"===p.kind){var e={instanceKey:t.getCurrentInstanceId(),status:"LIVE"};e["user"===p.kind.toLowerCase()?"followingUserKey":"followingContentKey"]=p.entity.id,r.get(e,(function(e){d=r.addFollowing(p.entity.id,p.kind,e),p.isNotified=e.notify,p.isFollowed=!0,p.isFeedSubscription=e.type===r.SUBSCRIPTION_TYPES.FEED_CONTENT}),void 0,p.listKey,void 0,p.kind)}}var u,d,p=this,f=[];p.isFeedSubscription=!1,p.isFollowed=!1,p.isNotified=!1,p.Interest=n,p.SocialSubscription=r,p.toggleNotificationStatus=function(){if(p.kind===r.FOLLOWING_TYPES.interest){var e=angular.fastCopy(f);f=[];var t=!p.isNotified;angular.forEach(e,(function(e){angular.isObject(e)&&(e.notify=t,n.save(e,(function(e){f.push(e),p.isNotified=t}),void 0))}))}else{var i=angular.fastCopy(d.subscription||d);if(angular.isUndefinedOrEmpty(i))return;i.type===r.SUBSCRIPTION_TYPES.FEED_CONTENT&&(i.type=r.SUBSCRIPTION_TYPES.USER_CONTENT,delete i.followerFeedKey,delete i.uid,delete i.id,i.followerUserKey=o()(a.getConnected(),"uid")),i.notify=!i.notify,r.save(i,(function(e){r.addFollowing(d.entityId,d.type,i),p.isNotified=!p.isNotified,p.isFeedSubscription=!1,d.subscription=e}),void 0,p.listKey)}},p.toggleSubscriptionStatus=function(){var e,t,i;p.kind===r.FOLLOWING_TYPES.interest?function(){if(p.isFollowed){if(angular.isUndefinedOrEmpty(f))return;try{angular.forEach(f,(function(e){n.unsubscribe(e,(function(){p.isFollowed=!1,f=[]}),void 0)}))}catch(e){}}else angular.forEach(p.params.customContentTypes,(function(e){try{n.subscribe(e,p.params.customContentTypeTags,p.params.orMetadata,(function(e){p.isFollowed=!0,f.push(e)}),void 0)}catch(e){}}))}():(e=r.getFollowing(p.entity.id,p.kind),t=o()(e,"subscription"),i=o()(e,"entityId"),angular.isDefinedAndFilled(t)?r.unfollow(t.id,i,p.kind,(function(){d=void 0,p.isFollowed=!1,p.isNotified=!1,p.isFeedSubscription=!1}),void 0,p.listKey):!angular.isUndefinedOrEmpty(t)&&r.isFollowing(t.id,p.kind)||r.follow(p.entity.id,p.kind,a.getConnected().uid,o()(p.entity,"properties.followAndNotify",!1),(function(e){d=r.isFollowing(p.entity.id,p.kind),p.isFollowed=!0,p.isNotified=e.notify,p.isFeedSubscription=e.type===r.SUBSCRIPTION_TYPES.FEED_CONTENT}),void 0,p.listKey))},p.kind===r.FOLLOWING_TYPES.interest&&(e.$watch((function(){return p.params}),(function(e,t){e!==t&&p.init()})),e.$watch((function(){return p.canSubscribe}),(function(e,t){e===t||e||p.init()}))),(null===(u=p.kind)||void 0===u?void 0:u.toLowerCase())===r.FOLLOWING_TYPES.user&&e.$watch((function(){var e;return null===(e=p.entity)||void 0===e?void 0:e.id}),(function(e,t){e!==t&&(p.isNotified=!1,p.isFollowed=!1,p.isFeedSubscription=!1,p.init())})),p.init=function(){p.entity=p.entity||{},p.kind=p.kind||r.FOLLOWING_TYPES.content,p.canSubscribe=!angular.isDefined(p.canSubscribe)||p.canSubscribe,p.textFollow=p.textFollow||i.translate("GLOBAL.FOLLOW"),p.textFollowed=p.textFollowed||i.translate("GLOBAL.FOLLOWED"),p.listKey="follow-".concat(Object(s.b)()),!angular.isUndefinedOrEmpty([p.entity,p.params],"every")&&p.canSubscribe?p.kind===r.FOLLOWING_TYPES.interest?function(){function e(e){p.findingSubscription=!1,p.isFollowed=angular.isDefinedAndFilled(e),p.isNotified=Boolean(o()(e,"notify",!1)),r(e)}function t(){p.findingSubscription=!1}function r(e){f.push(e)}p.findingSubscription=!0,f=[],angular.forEach(p.params.customContentTypes,(function(i,a){n.findSubscription(i,p.params.customContentTypeTags,p.params.orMetadata,0===a?e:r,0===a?t:void 0)}))}():l():p.isFollowed=!1},p.init()}function i(){return{bindings:{canSubscribe:"<?lsCanSubscribe",entity:"=?lsEntity",kind:"@?lsKind",params:"<?lsParams",size:"@?lsSize",textFollow:"@?lsTextFollow",textFollowed:"@?lsTextFollowed",viewMode:"@?lsViewMode"},controller:r,controllerAs:"vm",templateUrl:"/client/front-office/modules/social/views/follow-button.html"}}n.r(t),n.d(t,"followButtonComponent",(function(){return i})),n.d(t,"FollowButtonController",(function(){return r}));var a=n(4),o=n.n(a),s=n(35);r.$inject=["$scope","Instance","Interest","SocialSubscription","Translation","User","Utils"],angular.module("Directives").component("lsFollowButton",i())},function(e,t){!function(){"use strict";function e(e){this.Utils=e}e.$inject=["Utils"],angular.module("Directives").directive("lsInterestBlock",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{interest:"<lsInterest"},templateUrl:"/client/front-office/modules/social/views/interest-block.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/content/interest/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},find:{isArray:!1,method:"POST",params:{methodKey:"find"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("InterestFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t,n){function r(e){return angular.isDefinedAndFilled(s.get(e))}function i(e,t){angular.isUndefinedOrEmpty(e)||(t=t||o.computeSubscriptionKey(e.customContentType,e.customContentTypeTags,e.orMetadata),r(t)&&(s.remove(e.id),s.remove(t)))}function a(e){if(!angular.isUndefinedOrEmpty(e)){var t=o.computeSubscriptionKey(e.customContentType,e.customContentTypeTags,e.orMetadata);i(e,t),s.put(e.id,e),s.put(t,e)}}var o=n.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"}),s=e("subscriptionCache");return o.computeSubscriptionKey=function(e,t,n){return btoa(e+(t||"").toString()+(n||"").toString())},o.filterize=function(e,t,r,i,o){return n.proto.prototype.filterize.call(this,e,(function(e){angular.forEach(e||[],a),t(e)}),r,i,o)},o.findSubscription=function(e,n,r,i,s){if(i=i||angular.noop,s=s||angular.noop,angular.isUndefinedOrEmpty(e))s();else{var c=o.getSubscription(e,n,r);angular.isDefinedAndFilled(c)?i(c):t.find({customContentType:e,customContentTypeTags:n,orMetadata:r},(function(e){a(e),i(e)}),(function(e){404!==e.status?s(e):i(void 0)}))}},o.get=function(e,t,r,i,o){return t=t||angular.noop,n.proto.prototype.get.call(this,e,(function(e){a(e),t(e)}),r,i,o)},o.getSubscription=function(e,t,n){var i=o.computeSubscriptionKey(e,t,n);if(r(i))return s.get(i)},o.isSubscribedTo=function(e,t,n){return angular.isDefinedAndFilled(o.getSubscription(e,t,n))},o.subscribe=function(e,t,n,r,i,s){if(r=r||angular.noop,i=i||angular.noop,!angular.isUndefinedOrEmpty(e)){var c={customContentType:e,customContentTypeTags:t,orMetadata:n};o.save(c,(function(e){a(e),r(e)}),i,s)}},o.unsubscribe=function(e,t,n,r){t=t||angular.noop,n=n||angular.noop,angular.isUndefinedOrEmpty(e)||o.del(e.uid,(function(){i(e),t()}),n,r)},o}e.$inject=["$cacheFactory","InterestFactory","LumsitesBaseService"],angular.module("Services").service("Interest",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u){var d,p=this,f={items:{firstName:!0,lastName:!0,uid:!0}},g=!1;p.isTogglingInProgress=!1,p.KEY_LATEST_LIKES="content-latest-likes-",p.LIKE_BUTTON_ID="like-button-".concat(Object(l.b)()),p.DROPDOWN_ID="likers-list-".concat(Object(l.b)()),p.User=u,p.closeDropdown=function(e){0!==p.content.likes&&("dropdown"===e&&(g=!1),"source"!==e||g||t.cancel(d),t((function(){"source"===e&&g||i.close(p.DROPDOWN_ID)}),500))},p.debouncedToggleLikeStatus=o()((function(){p.isTogglingInProgress||(p.isTogglingInProgress=!0,s.toggleLike(p.content,p.kind,(function(e,t,n){!function(e,t,n){if(angular.isUndefinedOrEmpty(t))p.isTogglingInProgress=!1;else{n=n||!1;var r=u.displayList(p.KEY_LATEST_LIKES),i=c()(u.displayList(p.KEY_LATEST_LIKES),{uid:t.id});n&&r.length<10&&-1===i?r.push(t):!n&&i>-1&&r.splice(i,1),p.isTogglingInProgress=!1}}(0,t,Boolean(n))}),(function(){p.isTogglingInProgress=!1})),r.hasFeature("advanced_community")&&"post"===p.content.type&&e.$broadcast("post__update",p.content))}),200),p.getLatestLikes=function(){0!==p.content.likes&&(u.cacheFilterize(angular.extend(angular.fastCopy(p.reactedEntityFilter),{action:"PAGE_READ",maxResults:10,showHidden:!1,status:"enabled"}),void 0,void 0,p.KEY_LATEST_LIKES,f),d=t((function(){i.open(p.DROPDOWN_ID,{target:"#".concat(p.LIKE_BUTTON_ID)})}),500))},p.isOnDropdown=function(){g=!0},p.openLikesDialog=function(){e.$broadcast("user-list-dialog__open",{params:p.reactedEntityFilter,title:a.translate("USER_LIST_LIKES")})},p.kind=p.kind||"Content",p.theme=p.theme||"light",angular.isUndefined(p.content.likes)&&(p.content.likes=0),angular.isUndefinedOrEmpty(p.content.uid)&&angular.isDefinedAndFilled(p.content.id)&&(p.content.uid=p.content.id),p.content.liked=!angular.isUndefined(p.content.liked)&&p.content.liked,p.reactedEntityFilter={reactedEntityKey:p.content.uid,reactedEntityKind:n.isComment(p.content)?"comment":p.content.type},p.KEY_LATEST_LIKES="content-latest-likes-".concat(p.content.uid)}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{content:"<lsContent",isExtended:"<?lsIsExtended",kind:"@?lsKind",theme:"@?lsTheme"},templateUrl:"/client/front-office/modules/social/views/like-button.html"}}n.r(t),n.d(t,"LikeButtonDirective",(function(){return i}));var a=n(71),o=n.n(a),s=n(110),c=n.n(s),l=n(35);r.$inject=["$rootScope","$timeout","Comment","Features","LxDropdownService","Translation","Reaction","User"],angular.module("Directives").directive("lsLikeButton",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(e){e.liked=!0,e.likes=Math.max(parseInt(e.likes,10)+1,0)}function s(e){e.liked=!1,e.likes=Math.max(parseInt(e.likes,10)-1,0)}var c=this;return c.getByKind=function(t,n){return angular.isUndefinedOrEmpty([e.get(t,"reactions"),n],"some")?[]:t.reactions.filter((function(e){return e.kind===n}))},c.like=function(a,c,l,u){if(l=l||angular.noop,u=u||angular.noop,angular.isUndefinedOrEmpty([e.get(a,"uid"),c],"some")||a.liked)u();else{var d=n.isComment(a)?r:i,p=e.pick(c,"firstName","lastName","uid");o(a),d.like({uid:a.uid},(function(e){t.handleTaggingMap("like","content",{content:a}),l(e,p,!0)}),(function(e){s(a),u(e)}))}},c.toggleLike=function(t,n,r,i){r=r||angular.noop,i=i||angular.noop;var o=a.getConnected();angular.isUndefinedOrEmpty(o)?i():(angular.isUndefinedOrEmpty(t.uid)&&angular.isDefinedAndFilled(t.id)&&(t.uid=t.id),e.get(t,"liked",!1)?c.unlike(t,o,r,i):c.like(t,o,r,i))},c.unlike=function(a,c,l,u){if(l=l||angular.noop,u=u||angular.noop,angular.isUndefinedOrEmpty([e.get(a,"uid"),c],"some")||!1===e.get(a,"liked",!1))u();else{var d=n.isComment(a)?r:i,p=e.pick(c,"firstName","lastName","uid");s(a),d.unlike({uid:a.uid},(function(e){t.handleTaggingMap("unlike","content",{content:a}),l(e,p)}),(function(e){o(a),u(e)}))}},c}t.$inject=["Analytics","Comment","CommentFactory","ContentFactory","User"],angular.module("Services").service("Reaction",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n,r){}e.$inject=["Content","InitialSettings","Instance","Post"],angular.module("Directives").directive("sharePostButton",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{content:"<",disabled:"<?",isExtended:"<?",link:"<?",target:"<?",theme:"@?"},templateUrl:"/client/front-office/modules/social/views/share-post-button.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/social/activity/:methodKey",{},{list:{isArray:!1,method:"GET",params:{methodKey:"history"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("SocialActivityHistoryFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"})}e.$inject=["LumsitesBaseService","SocialActivityHistoryFactory"],angular.module("Services").service("SocialActivityHistory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/social/activity/:methodKey",{},{list:{isArray:!1,method:"POST",params:{methodKey:"list",ignore403:!0}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("SocialActivityFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"})}e.$inject=["LumsitesBaseService","SocialActivityFactory"],angular.module("Services").service("SocialActivity",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/social/subscription/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("SocialSubscriptionFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o){var s=i.createLumsitesBaseService(o,{autoInit:!1,objectIdentifier:"uid"}),c="followerUserKey",l={content:"followingContentKey",search:"followingSearchQuery",user:"followingUserKey"},u=e("followingCache");return s.FOLLOWING_TYPES={content:"content",interest:"interest",search:"search",user:"user"},s.SUBSCRIPTION_TYPES={FEED_CONTENT:"FEED_CONTENT",USER_CONTENT:"USER_CONTENT"},s.is={following:{}},s.addFollowing=function(e,t,n){if(!angular.isUndefinedOrEmpty([t,e,a()(n,"id")],"some")){var r={entityId:e,subscription:n,type:t},i="".concat(e).concat(t).toLowerCase();return s.isFollowing(n.id,t)&&u.remove(i),u.put(i,r),r}},s.follow=function(e,n,i,a,o,u,d){if(o=o||angular.noop,u=u||angular.noop,!angular.isUndefinedOrEmpty([n,e,i],"some")&&!s.is.following[d]){s.is.following[d]=!0;var p={id:e},f=function(t){s.addFollowing(e,n,t),s.is.following[d]=!1,o(t)},g=function(e){s.is.following[d]=!1,u(e)},m=n.toLowerCase();if(m===s.FOLLOWING_TYPES.content||m===s.FOLLOWING_TYPES.user){var v;switch(m){case s.FOLLOWING_TYPES.content:v=t.get("ContentFactory");break;case s.FOLLOWING_TYPES.user:v=t.get("UserFactory")}if(angular.isUndefinedOrEmpty(v))return;v.follow(p,{notify:a},f,g)}else p.instanceKey=r.getCurrentInstanceId(),p[c]=i,p[l[m]]=e,s.save(p,f,g,d)}},s.get=function(e,t,n,r,o,c){return angular.isDefinedAndFilled([c,a()(e,"instanceKey")],"every")&&c.toLowerCase()===s.FOLLOWING_TYPES.user.toLowerCase()&&delete e.instanceKey,i.proto.prototype.get.call(this,e,t,n,r,o)},s.getFollowing=function(e,t){if(!angular.isUndefinedOrEmpty([e,t],"some"))return u.get("".concat(e).concat(t).toLowerCase())},s.isFollowing=function(e,t){return u.get("".concat(e).concat(t).toLowerCase())},s.unfollow=function(e,r,i,a,o,c){if(a=a||angular.noop,o=o||angular.noop,!angular.isUndefinedOrEmpty([e,r,i],"some")){var l,d,p={id:r};switch(i.toLowerCase()){case s.FOLLOWING_TYPES.content:l=t.get("ContentFactory"),d="unfollow";break;case s.FOLLOWING_TYPES.user:l=t.get("UserFactory"),d="unfollow";break;default:l=s,d="del",p=e}l[d](p,(function(){i.toLowerCase()===s.FOLLOWING_TYPES.user.toLowerCase()&&n.$broadcast("user-unfollow-success",{userId:r}),function(e,t){!angular.isUndefinedOrEmpty([t,e],"some")&&s.isFollowing(e,t)&&u.remove("".concat(e).concat(t).toLowerCase())}(r,i),a()}),o,c)}},s}n.r(t),n.d(t,"SocialSubscriptionService",(function(){return r}));var i=n(4),a=n.n(i);r.$inject=["$cacheFactory","$injector","$rootScope","Instance","LumsitesBaseService","SocialSubscriptionFactory"],angular.module("Services").service("SocialSubscription",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){var c=this;c.isOpened=!1,c.toggle=function(){c.isOpened=!c.isOpened},c.toggleShowOff=function(){if(!angular.isUndefinedOrEmpty(e.get(c.achievement,"userRewardId"))){var n=o.getConnected(),l=i.getCurrent(),u=e.get(n,"gamification.userRewardId")===c.achievement.userRewardId?"removeShowOff":"setShowOff";a[u](c.achievement.userRewardId,(function(i){c.achievement.showedOff=!c.achievement.showedOff,"removeShowOff"===u?(e.set(n,"gamification.userRewardId",void 0),e.set(n,"gamification.badge",void 0),l.uid===n.uid&&(e.set(l,"gamification.userRewardId",void 0),e.set(l,"gamification.badge",void 0))):(e.set(n,"gamification.userRewardId",c.achievement.userRewardId),e.set(n,"gamification.badge",c.achievement.image),l.uid===n.uid&&(e.set(l,"gamification.userRewardId",c.achievement.userRewardId),e.set(l,"gamification.badge",c.achievement.image)),t.$broadcast("gamification-badge-showed-off",c.achievement.userRewardId)),r((function(){t.$broadcast("gamification-status-redraw","gamification-status-user-"+i.userId)}))}),s.displayServerError)}},c.toggleVisibility=function(){if(!angular.isUndefinedOrEmpty(e.get(c.achievement,"userRewardId"))){var t=c.achievement.visible?"hide":"display";a[t](c.achievement.userRewardId,(function(){c.achievement.visible=!c.achievement.visible}),s.displayServerError)}},n.$on("gamification-badge-showed-off",(function(e,t){c.achievement.showedOff=t===c.achievement.userRewardId})),c.achievement.visible=!!angular.isUndefinedOrEmpty(c.achievement.visible)||c.achievement.visible}t.$inject=["$rootScope","$scope","$timeout","SocialProfile","UserReward","User","Utils"],angular.module("Directives").directive("lsSocialProfileAchievement",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{achievement:"<"},templateUrl:"/client/front-office/modules/social/profile/views/social-profile-achievement.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o){function s(){u.isConnectedUser?(l.Service=n,n.mine(angular.extend(d[u.isConnectedUser],u.achievements),void 0,o.displayServerError,l.LIST_KEY,p[u.isConnectedUser])):(l.Service=a,a.filterize(d[u.isConnectedUser],void 0,o.displayServerError,l.LIST_KEY,p[u.isConnectedUser]))}var c,l=this,u=t.$parent.vm,d={false:{lang:i.getLang("current"),maxResults:30},true:{lang:i.getLang("current"),maxResults:30}},p={false:{items:{description:!0,goals:!0,image:!0,instanceId:!0,title:!0,uid:!0}},true:{items:{available:!0,completed:!0,description:!0,displayed:!0,goals:{completed:!0,description:!0,inProgress:!0,kind:!0,nbCompleted:!0,nbCompletion:!0,points:!0,targetAction:!0,uid:!0},goalsNumber:!0,hidden:!0,image:!0,inProgress:!0,instanceId:!0,personal:!0,points:!0,replayable:!0,showedOff:!0,status:!0,title:!0,uid:!0,userRewardId:!0,visible:!0}}};l.LIST_KEY="all-achievements",l.achievements=[],l.Quest=n,l.SocialProfile=r,l.UserReward=a,l.Service=void 0,l.filterAchievements=s,l.debouncedFilterAchievements=e.debounce(s,300),t.$watchCollection((function(){return u.achievements}),(function(e,t){e!==t&&l.debouncedFilterAchievements()})),c=r.getCurrent(),angular.isDefined(c)&&(d[u.isConnectedUser].targetUserId=c.uid),l.filterAchievements()}t.$inject=["$scope","Quest","SocialProfile","Translation","UserReward","Utils"],angular.module("Controllers").controller("SocialProfileAchievementsController",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o){function s(){angular.isObject(l)&&(n.cancel(l),l=void 0),angular.isObject(u)&&(n.cancel(u),u=void 0)}function c(t){o.hasFeature("social")&&(t&&a.empty(r._services[d.LIST_KEY]._list),r.filterize(f,(function(i){if(t)r._services[d.LIST_KEY]._list=i||[];else{var a=(i||[]).filter((function(t){return!e.find(r.displayList(d.LIST_KEY),{id:t.id})}));angular.isDefinedAndFilled(a)&&(r._services[d.LIST_KEY]._list=a.concat(r._services[d.LIST_KEY]._list)),angular.isDefined(u)&&(l=n(c.bind(d,!1),1e4))}}),(function(){angular.isDefined(u)&&(l=n(c.bind(d,!1),1e4))}),"prepend-activities"))}var l,u,d=this,p=t.$parent.vm,f={maxResults:5};d.LIST_KEY="all-activities",d.SocialActivity=r,t.$on("scope-toggle",(function(){s(),p.init()})),t.$on("$destroy",s),p.init=function(){o.hasFeature("social")&&(i.addGlobalParams(f),r.filterize(f,(function(){n(c.bind(d,!1),1e4)}),a.displayServerError,d.LIST_KEY),u=n(s,6e5))},p.init()}t.$inject=["$scope","$timeout","SocialActivity","SocialProfile","Utils","Features"],angular.module("Controllers").controller("SocialProfileActivitiesController",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.actionTypeDescription=void 0,n.activityDate=void 0,n.activityDetails=void 0,n.contentTypeDescription=void 0,n.Config=e,n.Translation=t,function(){angular.isDefinedAndFilled(n.action.items)&&(n.activityDetails=n.action.items[0]),moment().diff(moment(n.activityDetails.createdAt),"days")<2?n.activityDate=moment.utc(n.activityDetails.createdAt).local().fromNow():n.activityDate=moment.utc(n.activityDetails.createdAt).local().format("LL");var e="GROUPED_ACTIVITY_ACTION_TYPE_"+n.actionType.toUpperCase();n.action.count>1&&(e+="_PLURAL"),n.actionTypeDescription=e,angular.isDefinedAndFilled(n.contentType)&&(n.contentTypeDescription="GROUPED_ACTIVITY_CONTENT_TYPE_"+n.contentType.toUpperCase()),n.hasContentLink="post"===n.contentType}()}e.$inject=["Config","Translation"],angular.module("Directives").directive("socialProfileActivityAction",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{action:"=",actionType:"@",contentType:"@?"},templateUrl:"/client/front-office/modules/social/profile/views/social-profile-activity-action.html"}}))}()},function(e,t,n){(function(e){!function(){"use strict";function t(t){var n=this;n.action=void 0,n.actionType=void 0,n.contentType=void 0,n.keepStyle=!0,n.postFields={attachments:!0,comments:!1,content:!0,dates:!0,metadata:!0,title:!0},n.truncate=void 0,n.Config=t,n.activity.create.count>0?(n.action=n.activity.create,n.actionType="create",n.contentType=n.activity.contentDetails.type):n.activity.update.count>0?(n.action=n.activity.update,n.actionType="update",n.contentType=n.activity.contentDetails.type):n.activity.comment.count>0?(n.action=n.activity.comment,n.actionType="comment",n.contentType=n.activity.contentDetails.type,n.activity.contentDetails.latestComments=[],angular.forEach(e.get(n.activity,"comment.items",[]),(function(e){angular.isUndefinedOrEmpty(e.commentDetails)||n.activity.contentDetails.latestComments.unshift(e.commentDetails)}))):n.activity.like.count>0?(n.action=n.activity.like,n.actionType="like",n.contentType=n.activity.contentDetails.type):n.activity.profile.count>0&&(n.action=n.activity.profile,n.actionType="profile")}t.$inject=["Config"],angular.module("Directives").directive("socialProfileActivity",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{activity:"<",displayInstance:"<?"},templateUrl:"/client/front-office/modules/social/profile/views/social-profile-activity.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n,r){function i(){var e=angular.copy(o);n.addGlobalParams(e),t.filterize(e,void 0,void 0,a.listKey)}var a=this,o=(e.$parent.vm,{maxResults:5,userId:n.getCurrent().id});a.listKey="social-profile-history",a.SocialActivity=t,e.$on("scope-toggle",i),r.hasFeature("social")&&i()}e.$inject=["$scope","SocialActivity","SocialProfile","Features"],angular.module("Controllers").controller("SocialProfileHistoryController",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r){e.$parent.vm;this.Notification=n,this.clearNotifications=function(){t.confirm(r.translate("ALERT_NOTIFICATION_CLOSE_ALL"),r.translate("ALERT_NOTIFICATION_CLOSE_ALL_DESCRIPTION"),{cancel:r.translate("CANCEL"),ok:r.translate("OK")},(function(e){e&&n.setAllAsRead()}))}}e.$inject=["$scope","LxNotificationService","Notification","Translation"],angular.module("Controllers").controller("SocialProfileNotificationsController",e)}()},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,a){var s=this;s.contentFields=["title"],s.following=void 0,s.followingType=void 0,s.isContentSubscription=!1,s.isInterestSubscription=!1,s.isUserSubscription=!1,s.SocialSubscription=r,s.unsubscribe=function(){n.confirm(i.translate("PROFILE_SUBSCRIPTION_DELETE"),i.translate("PROFILE_SUBSCRIPTION_DELETE_DESCRIPTION"),{cancel:i.translate("CANCEL"),ok:i.translate("OK")},(function(e){e&&(s.isInterestSubscription?t.unsubscribe(s.subscription,(function(){n.success(i.translate("PROFILE_SUBSCRIPTION_DELETE_SUCCESS"))}),a.displayServerError,s.listKey):r.unfollow(s.subscription.uid,s.subscription["following"+o()(s.followingType)+"Key"],s.followingType,(function(){n.success(i.translate("PROFILE_SUBSCRIPTION_DELETE_SUCCESS")),a.reject(r.displayList(s.listKey),{uid:s.subscription.uid})}),a.displayServerError,s.listKey))}))},function(){if(angular.isUndefinedOrEmpty(s.subscription.type))"interests"===s.listKey?s.isInterestSubscription=!0:s.isUserSubscription=!0;else{s.isContentSubscription=!0;var t=s.subscription.type.split("_"),n=r.FOLLOWING_TYPES[e.last(t).toLowerCase()];if(angular.isDefinedAndFilled(n)){var i="following"+o()(n)+"Details";angular.isDefinedAndFilled(s.subscription[i])&&(s.following=s.subscription[i],s.followingType=n)}}}()}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{listKey:"@",subscription:"=",userFields:"="},templateUrl:"/client/front-office/modules/social/profile/views/social-profile-subscription.html"}}n.d(t,"SocialProfileSubscriptionController",(function(){return r})),n.d(t,"SocialProfileSubscriptionDirective",(function(){return i}));var a=n(257),o=n.n(a);r.$inject=["Interest","LxNotificationService","SocialSubscription","Translation","Utils"],angular.module("Directives").directive("socialProfileSubscription",i)}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o){function s(){n.quickFilter(c.currentTabKey,c.currentTabKey)}var c=this;c.currentTabKey=void 0,c.tabs=n.quickApiConfig,c.tabsAvailable=void 0,c.SocialSubscription=r,c.UserFollower=i,c.UserFollowing=o,c.switchTab=function(e){angular.isUndefinedOrEmpty(c.tabs[e])||(c.currentTabKey=e,angular.isUndefinedOrEmpty(c.tabs[c.currentTabKey].filtered[c.currentTabKey])&&s())},e.$on("scope-toggle",s),c.tabsAvailable=a()(Object.keys(c.tabs),Object.keys(c.tabs)),t.subscriptionType=t.subscriptionType||c.tabsAvailable.communities,c.currentTabKey=c.tabsAvailable[t.subscriptionType],s()}n.r(t),n.d(t,"SocialProfileSubscriptionsController",(function(){return r}));var i=n(259),a=n.n(i);r.$inject=["$scope","$stateParams","SocialProfile","SocialSubscription","UserFollower","UserFollowing"],angular.module("Controllers").controller("SocialProfileSubscriptionsController",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/social/user/:methodKey",{},{save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("SocialProfileUserFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e.createLumsitesBaseService(t,{autoInit:!1})}e.$inject=["LumsitesBaseService","SocialProfileUserFactory"],angular.module("Services").service("SocialProfileUser",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,a,s,l,d,p,f,g,m,v,h,y,E,b,O,C){function T(){_.isConnectedUser&&(_.editingStatus=!h.hasTranslation(o()(m.getCurrent(),"profileStatus")))}function S(e){angular.isDefinedAndFilled(_.VIEWS[e.name])&&(_.currentView=e.name)}function I(){p.getSiblings(!1).then((function(){_.fields=E.getPopoverFields(E.getMainUserDirectory(),y.getConnected())}))}var _=this;_.VIEWS={activities:{enabled:!0,icon:"message-outline",name:"activities"},history:{enabled:!0,icon:"history",name:"history"},subscriptions:{enabled:!0,icon:"bookmark-outline",name:"subscriptions"},notifications:{enabled:!1,icon:"bell-outline",name:"notifications"},achievements:{enabled:l.hasFeature("gamification"),icon:"trophy-award",name:"achievements"}},_.achievements={available:!1,completed:!0,inProgress:!0},_.currentView=void 0,_.customerScope=!1,_.editingStatus=!1,_.isConnectedUser=!1,_.isSocialActivated=!1,_.hasNativeIntegrations=!1,_.navItems=void 0,_.profile=void 0,_.Header=d,_.SocialProfile=m,_.SocialProfileUser=v,_.Translation=h,_.User=y,_.Utils=C,_.getMarginTop=function(){return C.getMarginTop(d,l,g)},_.editStatus=function(){_.isConnectedUser&&(_.editingStatus=!0)},_.logout=function(){f.reset(),a.location.href="/logout"},_.switchScope=function(){m.isInstanceScope=!_.customerScope,t.$broadcast("scope-toggle")},_.switchView=function(e){angular.isUndefinedOrEmpty(_.VIEWS[e.name])||_.currentView===e.name||(n.go("app.front.profile",{subscriptionType:e.name===_.VIEWS.subscriptions.name?"communities":void 0,userIdentifier:m.getCurrent().id,view:e.name},{notify:!1}),S(e))},_.updateStatus=function(){v.save({profileStatus:m.getCurrent().profileStatus},T)},t.$on("instances-siblings-list-updated",(function(){I()})),t.$on("user-unfollow-success",(function(e,t){m.removeFollowing(t.userId)})),function(){I(),_.profile=m.getCurrent(),_.isConnectedUser=_.profile.id===y.getConnected().uid,_.isSocialActivated=l.hasFeature("social"),_.hasNativeIntegrations=l.hasFeature("slack")||l.hasFeature("workplace"),_.canViewActivities=_.isSocialActivated&&(_.isConnectedUser||_.profile.settings.social.isActivityVisible),s.setCurrent(void 0);var t=[];if(_.canViewActivities&&(_.isConnectedUser?(_.navItems=u()(_.VIEWS),t=_.VIEWS.activities):(_.navItems=[_.VIEWS.history,_.VIEWS.achievements],t=_.VIEWS.history)),angular.isDefinedAndFilled(_.VIEWS[r.view])&&c()(_.navItems,_.VIEWS[r.view])?S(_.VIEWS[r.view]):S(t),angular.isDefined(i.d.map((function(e){return r[e]})),"some"))if(_.isConnectedUser){var n=0;i.d.forEach((function(e,t){if(r[e])switch(e){case"socialProfiles":n=O.canAccessSocialAdvocacyBasicFeatures()?t:n;break;case"nativeIntegrations":n=_.hasNativeIntegrations?t:n;break;default:n=t}})),b.openUserSettings(n)}else i.d.forEach((function(t){e.search(t,void 0)}));var a=e.search();a.details&&y.redirectToUserDirectoryProfile(_.profile),_.secondaryField=y.getSecondaryField(_.profile.apiProfile),T()}()}n.r(t),n.d(t,"SocialProfileController",(function(){return r}));var i=n(208),a=n(4),o=n.n(a),s=n(17),c=n.n(s),l=n(99),u=n.n(l);r.$inject=["$location","$scope","$state","$stateParams","$window","Content","Features","Header","Instance","LocalStorage","Layout","SocialProfile","SocialProfileUser","Translation","User","UserDirectory","UserSettings","SocialAdvocacy","Utils"],angular.module("Controllers").controller("SocialProfileController",r)},function(e,t,n){(function(e){!function(){function t(t,n,r,i,a,o,s,c){var l,u=this;return u.isInstanceScope=!0,u.quickApiConfig={communities:{api:a,filtered:{},query:{followingContentType:[]}},content:{api:a,filtered:{},query:{followingContentType:[]}},following:{api:c,filtered:{},sidebarLimit:7},interests:{api:r,filtered:{},query:{}},followers:{api:s,filtered:{},sidebarLimit:7}},u.addGlobalParams=function(e,t){var r=u.getCurrent().id;t=t||"instanceId",e[t]=u.isInstanceScope?n.getCurrentInstanceId():void 0,r!==o.getConnected().uid&&(e.userKey=r)},u.getCurrent=function(){return l},u.quickFilter=function(e,t,n,r){if(!angular.isUndefinedOrEmpty(u.quickApiConfig[e])){n=n||angular.noop,r=r||angular.noop,t=t||"default";var i=u.quickApiConfig[e],a={};u.addGlobalParams(a,"instanceKey"),angular.isDefined(i.query)&&angular.extend(a,i.query),i.api.filterize(a,n,r,t),i.filtered[t]=!0}},u.removeFollowing=function(t){var n=u.quickApiConfig.following.api.displayList("following"),r=e.findIndex(n,{uid:t});r>-1&&n.splice(r,1)},u.setCurrent=function(e){l=e},u.init=function(){u.quickApiConfig.communities.query.followingContentType=[t.CONTENT_TYPES.COMMUNITY],u.quickApiConfig.content.query.followingContentType=[t.CONTENT_TYPES.PAGE,t.CONTENT_TYPES.CUSTOM_LIST,t.CONTENT_TYPES.NEWS_LIST,t.CONTENT_TYPES.NEWS,t.CONTENT_TYPES.CUSTOM,t.CONTENT_TYPES.DIRECTORY]},u}t.$inject=["InitialSettings","Instance","Interest","ReduxStore","SocialSubscription","User","UserFollower","UserFollowing"],angular.module("Services").service("SocialProfile",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/style/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("StyleFactory",e)}()},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o,s,c,u){function p(e){return e.reduce((function(t,n){return n===d()(e)}))}function g(e){if(angular.isUndefinedOrEmpty(I))e();else{var t=f()(I.properties,"colors",[]);m()(t,"transparent")||t.unshift("transparent"),e()}}function v(e,t){if(angular.isUndefinedOrEmpty(I)){var n=a.getInstance(),r=f()(S,"id"),i=f()(n,"style",{});return angular.isUndefinedOrEmpty([i,r],"every")?(w.setCurrent(w.getEmptyGlobalStyle(),w.types.instance),void e()):angular.isUndefinedOrEmpty(r)||r===i?void w.get(i,(function(t){I=angular.fastCopy(t),g(e)}),t,w.types.instance):(w.get(r,(function(t){I=angular.fastCopy(t),g(e)}),t,w.types.instance),void w.get(i,void 0,t,w.types.instance))}g(e)}function y(e){if(!angular.isUndefinedOrEmpty(e)){var t=a.getInstance(),n=f()(t,"style",{});angular.forEach(e,(function(e){e.properties=e.properties||{},e.properties.mainNav=e.properties.mainNav||{},e.properties.top=e.properties.top||{},e.properties.search=e.properties.search||{},e.type===w.types.instance?(w._services[w.types.instance]._list.push(angular.fastCopy(e)),e.instance===t.uid&&(S=e),angular.isUndefinedOrEmpty(e.instance)&&w._services[w.types.customer]._list.push(angular.fastCopy(e)),n===e.uid&&(I=angular.fastCopy(e),w.setCurrent(I,w.types.instance)),A===e.uid&&(_=angular.fastCopy(e))):e.type===w.types.widget&&w._services[w.types.widget]._list.push(angular.fastCopy(e))}))}}function b(e,t){return t?function(e){return p([e.wrapper.borderBottomWidth,e.wrapper.borderLeftWidth,e.wrapper.borderRightWidth,e.wrapper.borderTopWidth])||delete e.wrapper.borderWidth,p([e.wrapper.borderBottomColor,e.wrapper.borderLeftColor,e.wrapper.borderRightColor,e.wrapper.borderTopColor])||delete e.wrapper.borderColor,p([e.wrapper.borderBottomLeftRadius,e.wrapper.borderBottomRightRadius,e.wrapper.borderTopLeftRadius,e.wrapper.borderTopRightRadius])||delete e.wrapper.borderRadius,p([e.wrapper.marginBottom,e.wrapper.marginLeft,e.wrapper.marginRight,e.wrapper.marginTop])||delete e.wrapper.margin,p([e.wrapper.paddingBottom,e.wrapper.paddingLeft,e.wrapper.paddingRight,e.wrapper.paddingTop])||delete e.wrapper.padding,e}(angular.merge({},e,e.hover||{})):e}function C(){return I}function T(){return _}var S,I,_,A,w=o.createLumsitesBaseService(u,{autoInit:!1,fullListResponse:!0,objectIdentifier:"uid",preSave:function(e){return angular.isUndefinedOrEmpty(e.properties.main)||(delete e.properties.main.marginLeft,delete e.properties.main.marginRight,delete e.properties.main.marginTop,delete e.properties.main.marginBottom,delete e.properties.main.margin),e}}),D={id:!0,instance:!0,isDefault:!0,name:!0,properties:!0,stylesheets:!0,type:!0,uuid:!0};return w.defaultParams={},w.types={customer:"globalCustomer",instance:"global",parent:"parent",widget:"widget"},w.reduxReducerName="style",w.reduxUpdateActionType="style/update",w.mapStateToRedux=function(){var e=C(),t=T(),n={global:e};angular.isDefinedAndFilled(t)&&(n.parent=t);var r={};return n&&(n.global&&(Object.assign(r,{global:i({},n.global)}),n.global.properties&&(Object.assign(r.global,{properties:i({},n.global.properties)}),n.global.properties.top&&Object.assign(r.global.properties,n.global.properties.top),n.global.properties.mainNav&&Object.assign(r.global.properties,n.global.properties.mainNav))),n.parent&&(Object.assign(r,{parent:i({},n.parent),child:n.global}),n.parent.properties&&(Object.assign(r.parent,{properties:i({},n.parent.properties)}),n.parent.properties.top&&Object.assign(r.parent.properties,n.parent.properties.top),n.parent.properties.mainNav&&Object.assign(r.parent.properties,n.parent.properties.mainNav)))),r},w.adjustFooterStyle=function(e,t,n,r){var i=angular.extend(angular.fastCopy(b(e,t)[n]))||{};return r?w.adjustShadow(s.adjustBackgroundImage(i)):i},w.adjustShadow=function(e){return l()({},E()(e,["shadowElevation","shadowOpacity"]),{boxShadow:w.getShadow(e.shadowElevation,e.shadowOpacity,e.defaultShadowElevation)})},w.adjustSpacings=function(t){return"desk"===e.get("Layout").breakpoint?t||{}:E()(t,["marginLeft","marginRight","paddingLeft","paddingRight"])},w.adjustStyle=function(e,t){return w.adjustShadow(t?s.adjustBackgroundImage(e):e)},w.getEmptyGlobalStyle=function(){var e=["transparent"].concat(angular.fastCopy(n.COLORS)||[]);return{customer:r.getCustomerId(),properties:{accent:n.COLORS_ACCENT,colors:e,mainNav:{},primary:n.COLORS_PRIMARY,search:{},top:{}},type:w.types.instance}},w.getInstanceDefaultStyle=function(){return S},w.getInstanceGlobalStyle=C,w.getInstanceParentStyle=T,w.getBlockStyle=function(e,t,n){var r={};if("list"===t){var i=e.itemsMargin;angular.isDefinedAndFilled(i)&&(r.marginBottom="".concat(i,"px"),"group"===n&&(r.paddingBottom="".concat(i,"px"))),e.itemsSeparator||(r.border="none")}return"cascade"!==t&&"ungroup"!==n||(e.isBackwardedStyle||l()(r,O()(e.style.content,["padding","paddingTop","paddingBottom","paddingLeft","paddingRight"])),l()(r,O()(e.style.content,["backgroundColor","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"])),"ungroup"===n&&l()(r,O()(e.style.content,["shadowElevation","shadowOpacity"]))),r},w.getShadow=function(e,t,n){t=angular.isDefined(t)?t:14;var r=(t/100).toFixed(2);switch(e=angular.isDefinedAndFilled(e)?e:n,e){case 0:return"none";case 1:return"0 2px 4px rgba(0,0,0,".concat(r,")");case 2:return"0 4px 8px rgba(0,0,0,".concat(r,")");case 3:return"0 8px 16px rgba(0,0,0,".concat(r,")");case 4:return"0 16px 32px rgba(0,0,0,".concat(r,")");case 5:return"0 32px 64px rgba(0,0,0,".concat(r,")");case null:case void 0:default:return""}},w.getWidgetContentStyle=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=["fullHeight"],r=t?E.a:O.a;return"cascade"!==e.viewMode&&"ungroup"!==e.viewModeVariant&&t||(n=n.concat(["backgroundColor","backgroundImage","backgroundPosition","shadowElevation","shadowOpacity","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"]),e.isBackwardedStyle||(n=n.concat("padding","paddingTop","paddingBottom","paddingLeft","paddingRight","backgroundColor"))),w.adjustShadow(s.adjustBackgroundImage(r(f()(e,"style.content"),n)))},w.isCustomer=function(e,t){return!w.isInstance(e,t)},w.isInstance=function(e,t){if(angular.isObject(e))return Boolean(e.instance);var n=w.displayList(t);if(angular.isArray(n)){var r=h()(n,{id:e});return!angular.isUndefinedOrEmpty(r)&&angular.isDefinedAndFilled(r.instance)}return!1},w.init=function(e,n,i){A=i,n=n||!1;var o=a.getInstance();return angular.isUndefinedOrEmpty(o)?t.reject("Instance is empty"):(w.defaultParams={customer:r.getCustomerId(),instance:o.uid},w.initList(w.types.instance),w.initList(w.types.customer),w.initList(w.types.widget),c.subscribe(w),angular.isUndefinedOrEmpty(e)||n?t((function(e,t){w.getAllPages({getAll:!0,instance:a.getCurrentInstanceId(),maxResults:30},y,(function(){v(e,t)}),t,a.getCurrentInstanceId(),D)})):function(e){return y(e),t((function(e,t){v(e,t)}))}(e))},w}n.r(t),n.d(t,"StyleService",(function(){return a}));var o=n(3),s=n.n(o),c=n(436),l=n.n(c),u=n(51),d=n.n(u),p=n(4),f=n.n(p),g=n(17),m=n.n(g),v=n(21),h=n.n(v),y=n(130),E=n.n(y),b=n(125),O=n.n(b);a.$inject=["$injector","$q","ConfigTheme","Customer","Instance","LumsitesBaseService","Media","ReduxStore","StyleFactory"],angular.module("Services").service("Style",a)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o){function s(e,n){var r={properties:{marginTop:0,isCollapsible:!1,style:{content:{paddingBottom:16,paddingTop:16},global:{borderBottomWidth:1}}},type:"widget",uuid:Object(t.b)(),widgetType:i.WIDGET_TYPES.TITLE},a={components:[{isMainWidget:!0,properties:{customContentType:[{id:e}],maxNumber:30,noResults:!0,type:"list",isCollapsible:!1},type:"widget",uuid:Object(t.b)(),widgetType:i.WIDGET_TYPES.CONTENT_LIST}],type:"cell",uuid:Object(t.b)(),width:n?8:12},o={components:[{properties:{isCollapsible:!1,linkedToLocalWidget:!0,style:{content:{paddingBottom:24,paddingTop:24},global:{borderBottomWidth:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,paddingLeft:24,paddingRight:24}}},type:"widget",uuid:Object(t.b)(),widgetType:i.WIDGET_TYPES.CONTENT_FILTER}],type:"cell",uuid:Object(t.b)(),width:4},s=n?[a,o]:[a];return{components:[{cells:[{components:[r,{cells:s,type:"row",uuid:Object(t.b)()}],properties:{paddingBottom:12,paddingLeft:24,paddingRight:24,paddingTop:0,plain:!0},type:"cell",uuid:Object(t.b)(),width:12}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1}}function c(e){var n={properties:{isCollapsible:!1,marginTop:0,style:{content:{paddingBottom:16,paddingTop:16},global:{borderBottomWidth:1}}},type:"widget",uuid:Object(t.b)(),widgetType:i.WIDGET_TYPES.TITLE},r={components:[{isMainWidget:!0,properties:{isCollapsible:!1,maxNumber:30,type:"all",viewMode:"vertical"},type:"widget",uuid:Object(t.b)(),widgetType:i.WIDGET_TYPES.DIRECTORY_ENTRY}],type:"cell",uuid:Object(t.b)(),width:e?8:12},a={components:[{properties:{isCollapsible:!1,linkedToLocalWidget:!0,style:{content:{paddingBottom:24,paddingTop:24},global:{borderBottomWidth:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,paddingLeft:24,paddingRight:24}}},type:"widget",uuid:Object(t.b)(),widgetType:i.WIDGET_TYPES.CONTENT_FILTER}],type:"cell",uuid:Object(t.b)(),width:4},o=e?[r,a]:[r];return{components:[{cells:[{components:[n,{cells:o,type:"row",uuid:Object(t.b)()}],properties:{paddingBottom:12,paddingLeft:24,paddingRight:24,paddingTop:0,plain:!0},type:"cell",uuid:Object(t.b)(),width:12}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1}}var l=this;l.createBaseTemplate=function(e,r,a){var o;if("content"===e){switch(r){case i.CONTENT_TYPES.CUSTOM_LIST:o=s(a,!0);break;case i.CONTENT_TYPES.DIRECTORY:o=c(!0);break;default:o={components:[{cells:[{components:[],type:"cell",uuid:Object(t.b)(),width:12}],type:"row",uuid:Object(t.b)()}],fixedLayout:!1,fixedWidgets:!1,properties:{}}}o.customContentType=a}else"community"===e&&(o=n.getDefaultPageTemplate(r));return o},l.reworkContentListTemplate=function(n){if(!angular.isDefinedAndFilled(n)||n.type===i.CONTENT_TYPES.CUSTOM_LIST&&!angular.isUndefinedOrEmpty(n.properties)&&(n.properties.showFilter||n.properties.contentFields)){var o=e.get(n,"template.components[0]");n.template=s(n.customContentType,n.properties.showFilter),angular.isDefinedAndFilled(e.get(o,"properties.content"))&&n.template.components.unshift({cells:[{components:[o],type:"cell",uuid:Object(t.b)(),width:12}],type:"row",uuid:Object(t.b)()});var c=r.getElement(n,"widget","widgetType","content-list");c.properties=angular.extend(c.properties,{customContentTypeTags:n.customContentTypeTags,fields:n.properties.contentFields,fullExcerpt:n.properties.fullExcerpt,listOrderDir:n.properties.sortOrder,maxNumber:n.properties.maxNumber,perLine:n.properties.perLine,truncate:n.properties.truncate,viewMode:n.properties.viewMode}),angular.isDefinedAndFilled(n.properties.metadata)&&(angular.forEach(n.properties.metadata,(function(e,t){var r=a.getMetadataFromKey(t,!1,!0);angular.isDefined(r)&&angular.isDefinedAndFilled(r.id)&&!r.multiple&&(n.properties.metadata[t]=e[0])})),c.properties.metadata=n.properties.metadata),delete n.properties.showFilter,delete n.properties.contentFields}},l.reworkDirectoryTemplate=function(n,o){if(n.type===i.CONTENT_TYPES.DIRECTORY){o=angular.isDefinedAndFilled(o)?o:{};var s=r.getElement(n,"widget","widgetType",i.WIDGET_TYPES.DIRECTORY_ENTRY);if(angular.isUndefinedOrEmpty(s)){var l=angular.isDefined(n.template)&&angular.isDefinedAndFilled(n.template.components)?n.template.components[0]:void 0;n.template=c(o.showFilter),angular.isDefinedAndFilled(e.get(l,"properties.content"))&&n.template.components.unshift({cells:[{components:[l],type:"cell",uuid:Object(t.b)(),width:12}],type:"row",uuid:Object(t.b)()});var u=r.getElement(n,"widget","widgetType",i.WIDGET_TYPES.DIRECTORY_ENTRY);u.properties=angular.extend(u.properties,{listOrder:o.listOrder,listOrderDir:o.listOrderDir,maxNumber:o.maxNumber,perLine:o.perLine,viewMode:o.viewMode}),angular.isDefinedAndFilled(n.properties.metadata)&&(angular.forEach(n.properties.metadata,(function(e,t){var r=a.getMetadataFromKey(t,!1,!0);angular.isDefined(r)&&angular.isDefinedAndFilled(r.id)&&!r.multiple&&(n.properties.metadata[t]=e[0])})),u.properties.metadata=n.properties.metadata)}}}}n.$inject=["CommunityTemplate","ContentTemplate","InitialSettings","Metadata","Utils"],angular.module("Services").service("TemplateBuilder",n)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p){var g={},v={};return g.canDeleteContents=function(e){var t=i.getCurrent();if(!p.isConnected()||angular.isUndefinedOrEmpty([e,t],"every"))return!1;if(p.getConnected().isSuperAdmin||p.isInstanceAdmin())return!0;e=e||[t];var n=!0;return angular.forEach(e,(function(e){n=n&&g.isUserAllowed("CUSTOM_CONTENT_DELETE",{checkContent:!0,content:e,customContentTypeId:e.customContentType})})),n},g.canEditContent=function(e){if(e=e||i.getCurrent(),angular.isUndefinedOrEmpty(e)||!p.isConnected())return!1;var t=f()(e,"type","").toUpperCase();return p.getConnected().isSuperAdmin||p.isInstanceAdmin()||g.isEditor(e)||t!==c.CONTENT_TYPES.COMMUNITY&&g.isUserAllowed("".concat(t,"_EDIT"))},g.canManageInstanceSettings=function(){return p.isConnected()&&(f()(p.getConnected(),"isSuperAdmin",!1)||p.isInstanceAdmin())},g.canViewCommunityAnalytics=function(){return o.hasFeature("extended-lumapps-analytics")&&e.is("app.front.community")&&(t.isEditableBy(p.getConnected())||g.isUserAllowed("ANALYTICS_READ"))},g.checkIfMetadataIsAllowed=function(e){return function(t){var n=function(e){if(angular.isDefined(v[e]))return v[e];v[e]=[];for(var t=g.getRoles(),n=0,r=t.length;n<r;n++){var i=t[n];if(!angular.isUndefinedOrEmpty(i))for(var a=0,o=i.authorizations.length;a<o;a++){var s=i.authorizations[a];if(!angular.isUndefinedOrEmpty(s)){for(var c=!1,l=0,u=s.actions.length;l<u;l++){var d=s.actions[l];if(f()(d,"customContentType")===e){c=!0;break}}if(c&&(v[e]=v[e].concat(s.metadata),angular.isUndefinedOrEmpty(s.metadata)))return v[e]=[],v[e]}}}return v[e]}(e);return!(angular.isDefinedAndFilled(e)&&!g.canManageInstanceSettings())||(angular.isUndefinedOrEmpty(n)||m()(n,t.id))}},g.getFeedsForAction=function(e,t){if(!p.isConnected()||angular.isUndefinedOrEmpty(e))return[];var n=p.getConnected();if(!n.isSuperAdmin&&!p.isInstanceAdmin()){for(var r=g.getRoles(),i=[],o=0,s=r.length;o<s;o++)for(var c=r[o],l=0,u=c.authorizations.length;l<u;l++)for(var d=c.authorizations[l],m=0,v=d.actions.length;m<v;m++){var h=d.actions[m],y="".concat(h.name,"_").concat(h.type),E=f()(t,"customContentTypeId",h.customContentType);if(y===e&&h.customContentType===E){if(!angular.isDefinedAndFilled(d.feeds))return;i.push.apply(i,a()(d.feeds))}}return i}},g.getRoles=function(){return c.USER_ROLES||[]},g.hasRightToManageModules=function(){return g.isUserAllowed("DIRECTORY_EDIT")||g.isUserAllowed("TUTORIAL_EDIT")||g.isUserAllowed("USER_DIRECTORY_EDIT")},g.hasRightToManageCommunities=function(){return m()(r.AVAILABLE_MODULES,"community")&&o.hasFeature("community")&&(g.isUserAllowed("COMMUNITY_EDIT")||g.isUserAllowed("COMMUNITY_CREATE")||g.isUserAllowed("COMMUNITY_DELETE"))},g.isEditor=function(e){if(e=e||i.getCurrent(),angular.isUndefinedOrEmpty(f()(e,"editors"))||!p.isConnected())return!1;var t=l()(p.getConnected().subscriptions,(function(t){return m()(e.editors,t)}));return angular.isDefinedAndFilled(t)},g.isUserAllowed=function(e,t){if(angular.isString(e)&&(m()(e,"GAMIFICATION")&&!o.hasFeature("gamification")||m()(e,"ANALYTICS_READ")&&!o.hasOneOfFeatures(["analytics","extended-lumapps-analytics"])||m()(e,"SOCIAL_ADVOCACY")&&!o.hasFeature("social-advocacy")))return!1;if(!p.isConnected())return!1;var n,r=p.getConnected();if(t=t||{},t.checkContent=t.checkContent||!1,t.ignoreAdmins=!!angular.isUndefined(t.ignoreAdmins)||t.ignoreAdmins,t.ignoreAdmins&&(r.isSuperAdmin||p.isInstanceAdmin()))return!0;if(angular.isArray(e)&&(t.arrayMethodName=t.arrayMethodName||"some",m()(["every","some"],t.arrayMethodName)&&angular.isFunction(e[t.arrayMethodName])))return e[t.arrayMethodName]((function(e){return g.isUserAllowed(e,t)}));if(t.checkContent&&(n=angular.isDefinedAndFilled(t.content)?t.content:i.getCurrent(),angular.isDefinedAndFilled(n))){var a="";if(m()(e,"READ")?a="feedKeys":m()(e,"EDIT")?a="editors":m()(e,"PUBLISH")?a="publishers":m()(e,"ARCHIVE")?a="archivers":m()(e,"DELETE")&&(a="deleters"),angular.isDefinedAndFilled(n[a])){var c=l()(r.subscriptions,(function(e){return m()(n[a],e.feed)}));if(angular.isDefinedAndFilled(c))return!0}}for(var u=d()(h()(g.getRoles(),"authorizations")),v="MENU_DROP"===e,y=0,E=u.length;y<E;y++)for(var b=u[y],O=0,C=b.actions.length;O<C;O++){var T=b.actions[O],S="".concat(T.name,"_").concat(T.type).toUpperCase();if(S===e)if(v){if(!angular.isDefinedAndFilled(t.uuid))return!0;if(m()(b.navigationUuids,t.uuid))return!0}else{if(!m()(e,"CUSTOM_CONTENT"))return!0;var I=angular.isDefinedAndFilled(t.customContentTypeId)&&T.customContentType===t.customContentTypeId,_=t.checkContent&&angular.isDefinedAndFilled(f()(n,"customContentType"))&&T.customContentType===n.customContentType;if(I||_){if(angular.isDefinedAndFilled(b.feeds)&&angular.isDefinedAndFilled(s()(f()(n,"feedKeys"),b.feeds)))continue;var A=!0===b.canEditOnlyOwnContent&&(r.email===f()(n,"author")||angular.isUndefined(f()(n,"author"))),w=!b.canEditOnlyOwnContent||angular.isUndefined(n);if(A||w)return!0}}}return!1},g.SocialAdvocacy=u,g.statusActionAvailable=function(e,r,a){if(a=Boolean(a),!p.isConnected()||angular.isUndefinedOrEmpty(e)||angular.isUndefinedOrEmpty(r))return!1;var o=p.getConnected(),s=o.isSuperAdmin||p.isInstanceAdmin(),l=i.isWorkflowEnabled(e),u=a?e.status:f()(e,"lastRevision.status",e.status),d=[c.CONTENT_TYPES.COMMUNITY,c.CONTENT_TYPES.CUSTOM_LIST,c.CONTENT_TYPES.DIRECTORY],v=!m()(d,e.type);if(!v)return e.type===c.CONTENT_TYPES.COMMUNITY&&r===n.CONTENT_STATUS.LIVE.value?t.isEditableBy(o,e):(u===n.CONTENT_STATUS.DRAFT.value||u===n.CONTENT_STATUS.LIVE.value)&&r===n.CONTENT_STATUS.LIVE.value;if(angular.isUndefinedOrEmpty(e.id))return r===n.CONTENT_STATUS.DRAFT.value||r===n.CONTENT_STATUS.LIVE.value&&!l;var h={checkContent:!0,content:e,customContentTypeId:e.customContentType};switch(r){case n.CONTENT_STATUS.DRAFT.value:switch(u){case n.CONTENT_STATUS.TO_VALIDATE.value:return!!l&&(s||g.isUserAllowed("CUSTOM_CONTENT_PUBLISH",h));case n.CONTENT_STATUS.LIVE.value:return!!s||(l?g.isUserAllowed("CUSTOM_CONTENT_PUBLISH",h):g.isUserAllowed("CUSTOM_CONTENT_EDIT",h));default:return!1}case n.CONTENT_STATUS.TO_VALIDATE.value:if(!l)return!1;if("REFUSED"===f()(e,"lastRevision.newStatus"))return!1;switch(u){case n.CONTENT_STATUS.DRAFT.value:return s||g.isUserAllowed("CUSTOM_CONTENT_EDIT",h);default:return!1}case n.CONTENT_STATUS.LIVE.value:if(l)switch(u){case n.CONTENT_STATUS.DRAFT.value:return!1;case n.CONTENT_STATUS.TO_VALIDATE.value:return s||g.isUserAllowed("CUSTOM_CONTENT_PUBLISH",h);case n.CONTENT_STATUS.LIVE.value:return s;default:return!1}else switch(u){case n.CONTENT_STATUS.DRAFT.value:case n.CONTENT_STATUS.LIVE.value:return s||g.isUserAllowed("CUSTOM_CONTENT_EDIT",h);default:return!1}case n.CONTENT_STATUS.ARCHIVE.value:switch(u){case n.CONTENT_STATUS.ARCHIVE.value:return!1;default:return!!s||g.isUserAllowed("CUSTOM_CONTENT_ARCHIVE",h)}case n.CONTENT_STATUS.UNARCHIVE.value:switch(u){case n.CONTENT_STATUS.ARCHIVE.value:return!!s||g.isUserAllowed("CUSTOM_CONTENT_ARCHIVE",h);default:return!1}default:return!1}},g}n.r(t),n.d(t,"UserAccessService",(function(){return r}));var i=n(19),a=n.n(i),o=n(279),s=n.n(o),c=n(21),l=n.n(c),u=n(260),d=n.n(u),p=n(4),f=n.n(p),g=n(17),m=n.n(g),v=n(28),h=n.n(v);r.$inject=["$state","Community","Config","ConfigInstance","Content","Features","InitialSettings","SocialAdvocacy","User"],angular.module("Services").service("UserAccess",r)},function(e,t){!function(){"use strict";function e(e){return e("/service/user/:key",{},{getConnected:{isArray:!1,method:"POST",params:{key:"getConnected"}},getCustomerAdminToken:{isArray:!1,method:"POST",params:{key:"customerToken"}},refreshToken:{isArray:!1,method:"POST",params:{key:"token"}}})}e.$inject=["$resource"],angular.module("Factories").factory("UserAuthFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o){function s(){n.getSiblings(!1).then((function(){l.popoverFields=o.getPopoverFields(o.getMainUserDirectory(),i.getConnected())}))}var c,l=this,u=!1;l.DROPDOWN_ID="extended-user-block-".concat(Object(a.b)()),l.USER_BLOCK_ID="user-block-".concat(Object(a.b)()),l.popoverFields=void 0,l.closeDropdown=function(e){"dropdown"===e&&(u=!1),"source"!==e||u||t.cancel(c),t((function(){"source"===e&&u||r.close(l.DROPDOWN_ID)}),500)},l.isOnDropdown=function(){u=!0},l.openDropdown=function(){c=t((function(){r.open(l.DROPDOWN_ID,{target:"#".concat(l.USER_BLOCK_ID)})}),500)},e.$on("instances-siblings-list-updated",(function(){s()})),s(),l.theme=l.theme||"light",l.viewMode=l.viewMode||"basic",l.displaySecondaryField=!!angular.isUndefined(l.displaySecondaryField)||l.displaySecondaryField}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{bullet:"@?lsBullet",displaySecondaryField:"<?lsDisplaySecondaryField",fields:"=?lsFields",isAdmin:"<?lsIsAdmin",size:"@?lsSize",theme:"@?lsTheme",user:"=lsUser",viewMode:"@?lsViewMode"},templateUrl:"/client/front-office/modules/user/views/user-block-wrapper.html"}}n.r(t),n.d(t,"UserBlockWrapperDirective",(function(){return i}));var a=n(35);r.$inject=["$scope","$timeout","Instance","LxDropdownService","User","UserDirectory"],angular.module("Directives").directive("lsUserBlockWrapper",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u,d,p){function f(){if(!angular.isUndefinedOrEmpty(m.fields)){var t=e.get(n.getCurrent(),"type");p.empty(m.userFields);var r=l.getSecondaryFieldName(t);angular.forEach(m.fields,(function(t){e.get(t.properties,"boundMap.text")!==r&&m.userFields.push({icon:t.properties.icon,uuid:t.uuid,value:d.getComponentValue({apiProfile:e.get(m.user,"apiProfile",{}),customProfile:e.get(m.user,"customProfile",{})},t)})}))}}function g(t,n){e.get(n,"id")===m.user.id&&(m.secondaryField=void 0,m.user=n,m.init())}var m=this;m.HAS_DIRECTORY=!1,m.backgroundImage={},m.classes=[],m.hasGamification=!1,m.hasReports=!1,m.secondaryField=void 0,m.showModerationDetails=!1,m.userFields=[],m.Features=a,m.Translation=c,m.User=l,m.UserDirectory=u,m.Utils=p,m.getClasses=function(){return p.empty(m.classes),angular.isDefinedAndFilled(m.theme)?m.classes.push("user-block--theme-"+m.theme):m.classes.push("user-block--theme-light"),angular.isDefinedAndFilled(m.viewMode)?m.classes.push("user-block--view-mode-"+m.viewMode):m.classes.push("user-block--view-mode-basic"),angular.isDefinedAndFilled(m.size)?m.classes.push("user-block--size-"+m.size):"thumbnail"===m.viewMode?m.classes.push("user-block--size-m"):"extended"===m.viewMode?m.classes.push("user-block--size-l"):m.classes.push("user-block--size-m"),angular.isDefinedAndFilled(m.userFields)&&m.classes.push("user-block--has-advanced-fields"),m.classes},t.$watch((function(){return m.fields}),(function(){f()}),!0),t.$on("widget-content-list-theme-update",(function(e,t,n){angular.isUndefinedOrEmpty(n)||(m.theme=n)})),t.$on("user-directory__user-save-success",g),t.$on("user-block__reset",g),m.init=function(){m.HAS_DIRECTORY=angular.isDefinedAndFilled([o.USER_DIRECTORIES,o.PARENT_USER_DIRECTORIES],"some")||angular.isDefinedAndFilled(i.getExternalDirectory()),m.displaySecondaryField=!!angular.isUndefined(m.displaySecondaryField)||m.displaySecondaryField,m.hasGamification=a.hasFeature("gamification");var t=e.get(n.getCurrent(),"type");if(angular.isUndefinedOrEmpty(m.user))m.user={},m.user.firstName=c.translate("UNKNOWN_USER"),m.user.lastName="",m.secondaryField="";else if(m.backgroundImage=p.getBackgroundImage(l.getProfilePicture(m.user),80,!1),angular.isUndefinedOrEmpty(m.secondaryField)&&angular.isDefinedAndFilled(m.user)){var s=l.getApiProfile(m.user);m.secondaryField=l.getSecondaryField(s,t)}t===o.CONTENT_TYPES.COMMUNITY&&(m.showModerationDetails=r.isEditableBy(l.getConnected(),r.getCurrent())),f()},m.init()}t.$inject=["$scope","Content","Community","Customer","Features","InitialSettings","Instance","Translation","User","UserDirectory","UserDirectoryTools","Utils"],angular.module("Directives").directive("userBlock",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e){e.$emit("user-block-loaded")},replace:!0,restrict:"E",scope:{bullet:"@?",displaySecondaryField:"<?displaySecondaryField",fields:"<?",isAdmin:"<?",noLink:"<?",secondaryField:"@?",size:"@?",theme:"@?",user:"<",viewMode:"@?"},templateUrl:"/client/front-office/modules/user/views/user-block.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/usercontent/:methodKey",{},{save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("UserContentFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){var r=t.createService(n);return r.getCurrentWidget=function(t,n){if(!angular.isUndefinedOrEmpty(t)){var i=function(t){return e.set(t,"userContent.values.widgets",e.get(t,"userContent.values.widgets",[])),t.userContent.values.widgets}(t),a=r.getUserContentWidget(t,n);return angular.isDefinedAndFilled(a)||(a={uuid:n},i.push(a)),a}},r.getUserContentWidget=function(t,n){if(!angular.isUndefinedOrEmpty(e.get(t,"userContent.values.widgets")))return e.find(t.userContent.values.widgets,{uuid:n})},r.updateUserContentWidget=function(e,t,n){var i=r.getUserContentWidget(e,t);angular.isUndefinedOrEmpty(i)||angular.extend(i,n||{})},r}t.$inject=["BaseService","UserContentFactory"],angular.module("Services").service("UserContent",t)}()}).call(this,n(38))},function(e,t){function n(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/user/directory/:methodKey"),{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},search:{isArray:!1,method:"POST",params:{methodKey:"search"}}})}n.$inject=["$resource","Config"],angular.module("Factories").factory("UserDirectoryFactory",n)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v){function y(t){if(!angular.isUndefinedOrEmpty(t))return m()(e.AVAILABLE_API_PROFILE_FIELD,{name:t})}var O=c.createLumsitesBaseService(g,{autoInit:!1,objectIdentifier:"uid"});return O.USER_DETAILS_DIALOG_ID="user-directory-details",O.displayedUserId=void 0,O.displayedUserDirectoryId=void 0,O.createDefaultUserDirectoryFields=function(t){if(!angular.isUndefinedOrEmpty(t)){t.template=t.template||{};var i=t.template;if(angular.isUndefined(i.components)&&(t.template.components=[]),a=t,angular.isUndefinedOrEmpty(a.uid)&&angular.isUndefinedOrEmpty(m()(l()(a,"template.components"),(function(e){return"widget"!==e.type})))&&n.isGoogleCustomer()&&!angular.isUndefined(e.USER_DIRECTORY_INIT_FIELD)){var a,o=angular.isDefinedAndFilled(r.ALL)?[r.ALL.id]:void 0;angular.forEach(e.USER_DIRECTORY_INIT_FIELD,(function(e,t){var n={};n[p.inputLanguage]=p.translate(e.name);var r={properties:{availableValues:[{}],boundMap:y(e.name),displayInList:e.listDisplay||!1,editFeeds:[],icon:e.icon,index:t,isBound:!0,seeFeeds:o},title:n,type:"inputText",uuid:Object(b.b)(),value:{}};i.components.push(r)}))}}},O.getMainUserDirectory=function(e){if(angular.isDefinedAndFilled(n.getExternalDirectory()))return{};var t=[r.PUBLIC.id];angular.isDefinedAndFilled(e)&&(t=h()(e.subscriptions,"feed"));var c=a()(i.USER_DIRECTORIES,(function(e){return d()(e.feedKeys,r.ALL.id)||O.hasSubscription(e.feedKeys,t)}));if(angular.isUndefinedOrEmpty(c)){var u=m()(o.getSiblings(!0),{id:l()(o.getInstance(),"parent")});if(angular.isUndefinedOrEmpty([u,i.PARENT_USER_DIRECTORIES],"some"))return{};var p=a()(i.PARENT_USER_DIRECTORIES,(function(e){return d()(e.feedKeys,r.ALL.id)||O.hasSubscription(e.feedKeys,t)}));return angular.isUndefinedOrEmpty(p)?{}:m()(p,{id:u.defaultUserDirectory})||s()(p)}return m()(c,{id:o.getInstance().defaultUserDirectory})||s()(c)},O.getDefaultUserDirectory=function(e){var n=t.getCurrent();return"user_directory"===l()(n,"type")?n:O.getMainUserDirectory(e)},O.getPopoverFields=function(e,t){var n=l()(e,"template.components");if(!angular.isUndefinedOrEmpty(n)){var i=[r.PUBLIC.id];return angular.isDefinedAndFilled(t)&&(i=h()(t.subscriptions,"feed")),a()(n,(function(e){return"widget"!==e.type&&angular.isDefinedAndFilled(e.properties)&&Boolean(e.properties.displayInList)&&O.hasSubscription(e.properties.seeFeeds,i)}))}},O.hasSubscription=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return angular.isDefinedAndFilled(f()(e,t))},O.metadataModelToSelection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.a,n=arguments.length>2?arguments[2]:void 0,r=n.properties,i=void 0===r?{}:r,o=i.isBound,s=void 0!==o&&o,c=i.metadataId;if(s&&angular.isDefined(c)){var l=u.getRefactoredMetadata(!0),d=a()(l,{key:c}),f=!1;angular.forEach(d,(function(n){angular.forEach(n.items,(function(n){e&&p.translate(n.flatName).toLowerCase()===e.toLowerCase()&&(t(n),f=!0)}))})),f||t()}else u.metadataKeysToMetadata(e,t)},O.metadataSelectionToModel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n?e.flatName&&t(p.translate(e.flatName)):u.metadataToMetadataKeys(e,t)},O.setDisplayedUser=function(e,t){O.displayedUserId=t?{email:e}:e,v.waitForAndExecute("#".concat(O.USER_DETAILS_DIALOG_ID))},O}n.r(t),n.d(t,"UserDirectoryService",(function(){return r}));var i=n(75),a=n.n(i),o=n(51),s=n.n(o),c=n(4),l=n.n(c),u=n(17),d=n.n(u),p=n(157),f=n.n(p),g=n(21),m=n.n(g),v=n(28),h=n.n(v),y=n(33),E=n.n(y),b=n(35);r.$inject=["Config","Content","Customer","Feed","InitialSettings","Instance","LumsitesBaseService","Metadata","Translation","UserDirectoryFactory","Utils"],angular.module("Services").service("UserDirectory",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/user/favorite/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"destroy"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"add"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("UserFavoriteFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){var l=i.createLumsitesBaseService(c,{objectIdentifier:"uid",postSave:function(t){var n=s.getConnected(),r=e.get(n,"hiddenDirectoryFavorites",[]).indexOf(t.id);return r>=0?n.hiddenDirectoryFavorites.splice(r,1):e.includes(n.directoryFavorites,t.id)||(angular.isUndefined(n.directoryFavorites)&&(n.directoryFavorites=[]),n.directoryFavorites.push(t.id)),t}});return l.defaultParams={},l.isFavorite=function(t){var n=s.getConnected();if(angular.isUndefinedOrEmpty([t,n],"some"))return!1;var r=!1,i=e.map(n.subscriptions,"feed");return angular.isDefinedAndFilled(e.intersection(t.isInFavoriteFeedKeys||[],i))&&(r=!0),r&&!e.includes(n.hiddenDirectoryFavorites,t.id)||e.includes(n.directoryFavorites,t.id)},l.toggleFavorite=function(r,c,u,d,p){u=u||angular.noop,d=d||angular.noop,p=p||r.directory;var f=l.isFavorite(r),g=f?"remove":"add";t.handleTaggingMap(g+"-favorite","directory-entry",{directory:r.directory,isHomePage:!!n.getCurrent()&&Boolean(n.getCurrent().isHomepage),item:r}),f?function(t,n,r,a){var o=s.getConnected();n=n||angular.noop,r=r||angular.noop,i.proto.prototype.del.call(l,t,(function(){var r=e.get(o,"directoryFavorites",[]).indexOf(t);r>=0?o.directoryFavorites.splice(r,1):e.includes(o.hiddenDirectoryFavorites,t)||o.hiddenDirectoryFavorites.push(t),n(t)}),r,a)}(r.id,(function(){a.info(o.translate("USER_FAVORITES_DELETE"))}),d,p):l.save({uid:r.id},u,d,p)},l.init=function(){l.defaultParams={instance:r.getCurrentInstanceId(),lang:o.getLang("current")}},l}t.$inject=["Analytics","Content","Instance","LumsitesBaseService","LxNotificationService","Translation","User","UserFavoriteFactory"],angular.module("Services").service("UserFavorite",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){function r(t,n){if(angular.isUndefinedOrEmpty(t)||angular.isUndefinedOrEmpty(n))return!1;var r=e.map(t,"feed");return e.includes(r,n)}function i(t,r){var i=n.displayList(t);if(angular.isUndefinedOrEmpty(i))e.set(i,"[0]",r);else{for(var a=0,o=i.length;a<o;++a){var s=i[a];if(r.isRemoved){if(s.email===r.email)return void i.splice(a,1)}else if(s.id===r.id)return void(s=angular.fastCopy(r))}r.isRemoved||i.push(r)}}var a=this,o=[],s=[],c={};a.add=function(t,n,a){a=a||"default",angular.isArray(t.subscriptions)||(t.subscriptions=[]),r(t.subscriptions,n)||(e.includes(o,t.email)||o.push(t.email),s=e.without(s,t.email),t.isRemoved=!1,i(a,t))},a.hasSubscription=function(e){var t=n.getConnected();return!(angular.isUndefined(t)||angular.isUndefinedOrEmpty(t.subscriptions)||angular.isUndefinedOrEmpty(e))&&r(t.subscriptions,e)},a.isLoading=function(e){return e=e||"default",c[e]},a.remove=function(t,n){n=n||"default",t.isRemoved=!0,o=e.without(o,t.email),e.includes(s,t.email)||s.push(t.email),i(n,t)},a.save=function(e,n,r,i){return function(e,n,r,i){return r=r||angular.noop,i=i||angular.noop,c[n]=!0,t.saveSubscription(e,(function(e){o=[],s=[],r(e),c[n]=!1}),(function(e){i(e),c[n]=!1})).$promise}({addedUsers:o,feed:n,removedUsers:s},e,r,i)}}t.$inject=["FeedSubscribersFactory","User"],angular.module("Services").service("UserFeedSubscriptions",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/social/subscription/:target/list",{},{list:{isArray:!1,method:"GET",params:{target:"follower"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("UserFollowerFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"})}e.$inject=["LumsitesBaseService","UserFollowerFactory"],angular.module("Services").service("UserFollower",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/social/subscription/:target/list",{},{list:{isArray:!1,method:"GET",params:{target:"following"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("UserFollowingFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"})}e.$inject=["LumsitesBaseService","UserFollowingFactory"],angular.module("Services").service("UserFollowing",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r,i){var a=this,o={action:"PAGE_READ",instance:n.getCurrentInstanceId(),showHidden:!1,status:"enabled"},s={params:o,projection:void 0};a.USER_LIST_DIALOG_ID="user-list-dialog",a.USER_LIST_KEY="user-list-dialog-list-key",a.methodName=void 0,a.service={},a.title="",a.userFilterQuery=void 0,a.filterUsers=function(){r.proto.prototype.filterize.call(a.service,angular.extend({query:a.userFilterQuery},s.params),void 0,void 0,a.USER_LIST_KEY,s.projection,a.methodName)},t.$on("lx-dialog__scroll-end",(function(e,t){a.USER_LIST_DIALOG_ID===t&&a.service.nextPage(void 0,void 0,a.USER_LIST_KEY,a.methodName)})),t.$on("user-list-dialog__filter",(function(t,n,r,c,l,u){c=c||"User",a.methodName=l,a.title=r||i.translate("USER_LIST"),a.service=e.get(c),a.userFilterQuery=void 0,s={params:"User"===c?angular.extend(angular.fastCopy(o),n):n,projection:u},a.filterUsers()}))}e.$inject=["$injector","$scope","Instance","LumsitesBaseService","Translation"],angular.module("Directives").directive("lsUserListDialog",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",restrict:"E",templateUrl:"/client/front-office/modules/user/views/user-list-dialog.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/user/organizationchart/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("UserOrganizationChartFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/user/settings/:methodKey",{},{save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("UserSettingsFactory",e)}()},function(e,t,n){"use strict";n.r(t);var r=n(208);!function(){function e(e,t,n,i){function a(e){n.waitForAndExecute("#user-settings-dialog",void 0,void 0,void 0,void 0,{activeTabIndex:e||0})}var o=e.createLumsitesBaseService(t,{objectIdentifier:"id"});return o.defaultParams={},o.openUserSettings=a,i.$on(r.b,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(t)})),o.init=function(){o.defaultParams={maxResults:25}},o}e.$inject=["LumsitesBaseService","UserSettingsFactory","Utils","$rootScope"],angular.module("Services").service("UserSettings",e)}()},function(e,t){!function(){"use strict";angular.module("Constants").constant("UserConstant",{LIST_KEY:{ZENDESK_ASSIGNEE:"zendesk-assignee"},PROJECTION:{AUTHOR_PROJECTION:{apiProfile:!0,customProfile:!0,email:!0,firstName:!0,fullName:!0,gamification:!0,id:!0,lastName:!0,primaryEmail:!0,profilePicture:!0,profilePictureUrl:!0,profileStatus:!0,properties:{followAndNotify:!0},subscription:!0,uid:!0},LIST_SIMPLE:{items:{email:!0,firstName:!0,lastName:!0}}}})}()},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/user/:methodKey"),{},{accountChoices:{isArray:!1,method:"GET",params:{methodKey:"accountChoices"},url:"".concat(t.APPLICATION_HOST,"/account/list")},deleteMulti:{isArray:!1,method:"POST",params:{methodKey:"deleteMulti"}},follow:{isArray:!1,method:"POST",params:{methodKey:"follow"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/user/:id/:methodKey")},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},getConnected:{isArray:!1,method:"GET",params:{methodKey:"getConnected"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},search:{isArray:!1,method:"GET",params:{methodKey:"search"}},unfollow:{isArray:!1,method:"DELETE",params:{methodKey:"unfollow"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/user/:id/:methodKey")}})}n.r(t),n.d(t,"UserFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("UserFactory",r)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t);var a=n(3),o=n.n(a),s=n(71),c=n.n(s),l=n(51),u=n.n(l),d=n(4),p=n.n(d),f=n(17),g=n.n(f),m=n(157),v=n.n(m),h=n(28),y=n.n(h),E=n(7),b=n.n(E),O=(n(218),n(35));!function(){function e(e,t,n,r,a,o,s,l,d,f,m,h,E,C,T,S,I,_,A,w){function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;L=e,h.put("user",L),angular.isUndefinedOrEmpty(t)||(N.setToken(t),angular.extend(L,{token:t})),window.CONNECTED_USER=L}var L,P,N=E.createLumsitesBaseService(A,{autoInit:!1,maxResults:30,objectIdentifier:"id"}),R=["post_merged","post_merged_master","post_merged_slave","post_merge_pending"],j={isGuest:!0,uid:Object(O.b)()},k=[];N.connectedUserDeferred=n.defer(),N.error={},N.defaultPickerParams={showHidden:!0};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.getConnected();return p()(e,"loginProvider",void 0)};return N.reduxReducerName="user",N.reduxUpdateActionType="user/update",N.mapStateToRedux=function(){return{connectedUser:i({},L,{token:P}),initialized:!0}},N.mapReduxToAngular=function(e){var t=e.connectedUser,n=e.token,r=e.initialized;r&&D(i({},t),n)},N.debouncedFilterize=c()(N.filterize,500),N.getAccountChoices=function(){return k||[]},N.getAccountType=function(e){return e=e||N.getConnected()||{},e.accountType},N.getAllStatus=function(){return o.USER_STATUS||[]},N.getApiProfile=function(e){return angular.isUndefinedOrEmpty(e)&&(e=L),angular.isDefined(p()(e,"apiProfile"))?e.apiProfile:e},N.getAuthorProjection=function(){var e=angular.fastCopy(_.PROJECTION.AUTHOR_PROJECTION),t=m.getProperty(o.INSTANCE_PROPERTIES.USER_BLOCK_DEFAULT_FIELD)||"primaryEmail";return t=t.replace(/([a-zA-Z0-9_-]+).*/g,"$1"),e[t]=!0,e},N.getAvatarUrl=function(e){return"/serve/profilepicture/".concat(s.getCustomerId(),"/").concat(e)},N.getConnected=function(){return L||{}},N.getMailToLink=function(e){if(!angular.isUndefinedOrEmpty(e)){var t;if(N.isGoogle(N.getConnected()))t="https://mail.google.com/mail?view=cm&tf=0&to=".concat(e.email);else if(N.isMicrosoft(N.getConnected())){var n=angular.isDefinedAndFilled(e.apiProfile)?e.apiProfile.primaryEmail:e.email;t="https://outlook.office365.com/owa/?path=/mail/action/compose&to=".concat(n)}else t="mailto:".concat(e.email);return t}},N.getProfilePicture=function(e){return e=e||N.getConnected(),e=angular.isDefinedAndFilled(e.apiProfile)?e:{apiProfile:e},angular.isDefinedAndFilled(e.profilePicture)?w.resizeImage(e.profilePicture):angular.isDefinedAndFilled(p()(e.apiProfile,"profilePicture"))?w.resizeImage(e.apiProfile.profilePicture):function(e){return angular.isUndefinedOrEmpty(e)?f.DEFAULT_AVATAR:g()(e.thumbnailPhotoUrl,"/public/")?e.thumbnailPhotoUrl:angular.isDefined(e.thumbnail)&&angular.isDefinedAndFilled([e.thumbnail.mimeType,e.thumbnail.photoData],"every")?"data:".concat(e.thumbnail.mimeType,";base64,").concat(e.thumbnail.photoData.replace(/_/g,"/").replace(/-/g,"+")):f.DEFAULT_AVATAR}(e.apiProfile)},N.getSecondaryField=function(e,t){if(!angular.isUndefinedOrEmpty(e)){var n=N.getSecondaryFieldName(t);if(!angular.isUndefinedOrEmpty(n))return w.getApiProfileFieldFromMap(n,{apiProfile:e})}},N.getSecondaryFieldName=function(e){var t,n;return e===p()(o.AVAILABLE_CONTENT_TYPES,"USER_DIRECTORY")?(t=m.getProperty(o.INSTANCE_PROPERTIES.USER_BLOCK_USER_DIRECTORY_FIELD),n=angular.isUndefined(t)?"organizations[primary=true]/title":t):(t=m.getProperty(o.INSTANCE_PROPERTIES.USER_BLOCK_DEFAULT_FIELD),n=angular.isUndefined(t)?"primaryEmail":t),n},N.getToken=function(){return P},N.getUserFullName=function(e){if(e=e||L,angular.isUndefinedOrEmpty(e))return"";if(angular.isUndefinedOrEmpty([e.firstName,e.lastName],"some")&&angular.isUndefinedOrEmpty(p()(e.apiProfile,"name")))return e.firstName||e.lastName;var t=[];t.push(angular.isDefinedAndFilled([e.firstName,e.lastName],"every")?e.firstName:p()(e.apiProfile,"name.givenName")),t.push(angular.isDefinedAndFilled([e.firstName,e.lastName],"every")?e.lastName:p()(e.apiProfile,"name.familyName"));var n=g()(f.REVERTED_FULLNAME_LANGS,S.getLang("current"));return angular.isDefinedAndFilled(e.fullName)&&!n&&"None None"!==e.fullName?e.fullName:(n&&t.reverse(),t.join(" "))},N.hasSubscriptions=function(e){return!angular.isUndefinedOrEmpty(e)&&(e=angular.isArray(e)?e:[e],t=angular.isDefinedAndFilled(p()(N.getConnected(),"subscriptions"))?y()(N.getConnected().subscriptions,"feed"):[d.PUBLIC.id],angular.isDefinedAndFilled(v()(t,e)));var t},N.initUserLangsAndNotifications=function(){var n=N.getConnected();!function(){var n=t.search().lang;angular.isDefinedAndFilled(n)?S.setLang("current",n):angular.isDefinedAndFilled(L)&&(angular.isDefinedAndFilled(L.lang)&&S.setLang("current",L.lang),angular.isDefinedAndFilled(L.langs)&&S.setLang("preferred",u()(L.langs)));var r=e.get("Content");r.setDefaultLang(S.getLang("current"));var i=e.get("Community");i.setDefaultLang(S.getLang("current"))}(),angular.isDefinedAndFilled(n)&&!N.isGuest()&&b()(n,"settings.notificationPreferences.notificationTypeStatus",function(){var e=p()(N.getConnected(),"settings.notificationPreferences");if(angular.isUndefinedOrEmpty(e))return[];var t=e.notificationTypeStatus||[];return t=t.filter((function(e){var t=e.kind.toLowerCase(),n=p()(C,t);return!g()(R,t)&&angular.isDefinedAndFilled(n)&&(angular.isUndefinedOrEmpty(n.requiredFeatures)||l.hasAllRequiredFeatures(n))})),t}())},N.isAdmin=function(){return p()(N.getConnected(),"isSuperAdmin",!1)||N.isInstanceAdmin()},N.isConnected=function(){return angular.isDefinedAndFilled(p()(N.getConnected(),"uid"))&&!N.isGuest()},N.isConnectedAs=function(){return p()(N.getConnected(),"isConnectedAs",!1)},N.isExternal=function(e){return e=e||N.getConnected()||{},"external"===e.accountType},N.isDesigner=function(e){return e=e||N.getConnected()||{},Boolean(e.isDesigner)},N.isGod=function(e){return e=e||N.getConnected()||{},Boolean(e.isGod)},N.isGoogle=function(e){return e=e||N.getConnected()||{},"google"===e.accountType},N.isGuest=function(e){return e=e||N.getConnected()||{},Boolean(e.isGuest)},N.isLoggedWithGoogle=function(e){return"google"===F(e)},N.isLoggedWithMicrosoft=function(e){return"microsoft"===F(e)},N.isInstanceAdmin=function(){return N.isConnected()&&g()(p()(N.getConnected(),"instancesSuperAdmin",[]),m.getCurrentInstanceId())},N.isMicrosoft=function(e){return e=e||N.getConnected()||{},"microsoft"===e.accountType},N.isOkta=function(e){return e=e||N.getConnected()||{},"okta"===e.accountType},N.isPasswordEditable=function(e){return e=e||N.getConnected()||{},N.isExternal(e)||N.isGoogle(e)&&s.isSsoEnabled()},N.listAccountChoices=function(){var e=A.accountChoices({callId:Object(O.b)(),fields:void 0}).$promise;return e.then((function(e){k=e.items})),e},N.redirectToProfile=function(t){if(!angular.isUndefinedOrEmpty(t)){var n=e.get("UserDirectory"),r=angular.isDefinedAndFilled(p()(t,"email"));if(angular.isDefinedAndFilled(s.getExternalDirectory())&&r){var i=t.email.split("@"),o=i[0],c=i[1],l=s.getExternalDirectory().replace("{username}",o).replace("{domain}",c).replace("{primaryEmail}",t.email);a.open(l,"blank_")}else m.getSiblings(!1).then((function(){n.setDisplayedUser(t.id)}))}},N.redirectToSocialProfile=function(e){e=e||N.getConnected(),angular.isUndefinedOrEmpty(e.id)||r.go("app.front.profile",{userIdentifier:e.id===N.getConnected().id?"me":e.id})},N.redirectToUserDirectoryProfile=function(t){t=t||N.getConnected();var n=[f.USER_DIRECTORIES,f.PARENT_USER_DIRECTORIES];if(!angular.isUndefinedOrEmpty(t)){var r=angular.isDefinedAndFilled(p()(t,"email"));if(angular.isDefinedAndFilled(s.getExternalDirectory())&&r){var i=t.email.split("@"),o=i[0],c=i[1],l=s.getExternalDirectory().replace("{username}",o).replace("{domain}",c).replace("{primaryEmail}",t.email);a.open(l,"blank_")}else angular.isDefinedAndFilled(t)&&angular.isDefinedAndFilled(n,"some")&&(r?e.get("UserDirectory").setDisplayedUser(t.email,!0):e.get("UserDirectory").setDisplayedUser(t.id,!1))}},N.refreshToken=function(e,t){e=e||angular.noop,t=t||angular.noop,I.refreshToken({customerId:s.getCustomerId()},(function(n){N.setConnectedUser(L,p()(n,"token")),angular.isUndefinedOrEmpty(P)?t(S.translate("INVALID_TOKEN_ERROR")):e(P)}),(function(e){N.setToken(void 0),t(e)}))},N.setConnectedUser=D,N.setProfilePicture=function(e){angular.isUndefinedOrEmpty([e,L],"some")||(L.profilePicture=e)},N.setToken=function(e){if(angular.isUndefinedOrEmpty(e))return h.remove("token"),void(P=void 0);P=e,h.put("token",P,void 0,!0)},N.init=function(e){return e&&angular.isUndefined(t.search().token)&&I.getCustomerAdminToken().$promise.then((function(e){N.setToken(e.token),N.connectedUserDeferred.resolve()})).catch(N.connectedUserDeferred.reject),angular.isUndefinedOrEmpty(N.getConnected())&&N.setConnectedUser(j,void 0),N.connectedUserDeferred.resolve(N.getConnected()),T.subscribe(N,!0),N.connectedUserDeferred.promise},N}e.$inject=["$injector","$location","$q","$state","$window","Config","Customer","Features","Feed","InitialSettings","Instance","LocalStorage","LumsitesBaseService","NotificationSettings","ReduxStore","Translation","UserAuthFactory","UserConstant","UserFactory","Utils"],angular.module("Services").service("User",e)}()},function(e,t,n){"use strict";function r(e,t){var n,r,i=this;i.ZendeskConstant=t,n=moment.utc(i.item.updatedAt).local(),r=moment().utc().local(),r.diff(n,"hours")>24?i.formattedDate=n.format(e.translate("SIMPLE_DATE_FORMAT_COMPLETE")):i.formattedDate=n.fromNow(),i.labelText=o()(i.item.type)+(i.item.type===t.RESULT_TYPE_TICKET?" #".concat(i.item.id):"")}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{item:"<lsItem"},templateUrl:"/client/front-office/modules/zendesk/views/zendesk-block.html"}}n.r(t),n.d(t,"LsZendeskBlockDirective",(function(){return i})),n.d(t,"ZendeskBlockController",(function(){return r}));var a=n(257),o=n.n(a);r.$inject=["Translation","ZendeskConstant"],angular.module("Directives").directive("lsZendeskBlock",i)},function(e,t){!function(){"use strict";var e="article",t="ticket",n={LIST_KEY:{TAGS:"zendesk-tags"},RESULT_TYPE_ARTICLE:e,RESULT_TYPE_TICKET:t,RESULT_TYPES:[{key:"FRONT.ZENDESK.TYPE.ARTICLE",value:e},{key:"FRONT.ZENDESK.TYPE.TICKET",value:t}],TICKET_STATUSES:[{key:"FRONT.ZENDESK.TICKET_STATUS.CLOSED",value:"closed"},{key:"FRONT.ZENDESK.TICKET_STATUS.HOLD",value:"hold"},{key:"FRONT.ZENDESK.TICKET_STATUS.NEW",value:"new"},{key:"FRONT.ZENDESK.TICKET_STATUS.OPEN",value:"open"},{key:"FRONT.ZENDESK.TICKET_STATUS.PENDING",value:"pending"},{key:"FRONT.ZENDESK.TICKET_STATUS.SOLVED",value:"solved"}],TICKET_TYPES:[{key:"FRONT.ZENDESK.TICKET_TYPE.INCIDENT",value:"incident"},{key:"FRONT.ZENDESK.TICKET_TYPE.PROBLEM",value:"problem"},{key:"FRONT.ZENDESK.TICKET_TYPE.QUESTION",value:"question"},{key:"FRONT.ZENDESK.TICKET_TYPE.TASK",value:"task"}]};angular.module("Constants").constant("ZendeskConstant",n)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/zendesk/:methodKey",{},{list:{isArray:!1,method:"GET",params:{methodKey:"list"}},search:{isArray:!1,method:"POST",params:{methodKey:"search"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("ZendeskFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n){var r=e.createLumsitesBaseService(n,{autoInit:!1,objectIdentifier:"id"});return r.debouncedFilterize=a()(r.filterize,500),r.initTags=function(){r.filterize({ignore403:!0,type:"tag"},void 0,void 0,t.LIST_KEY.TAGS)},r}n.r(t),n.d(t,"ZendeskService",(function(){return r}));var i=n(71),a=n.n(i);r.$inject=["LumsitesBaseService","ZendeskConstant","ZendeskFactory"],angular.module("Services").service("Zendesk",r)},function(e,t,n){function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}var a={"./abstract-picker/js/abstract-picker_directive.js":2306,"./abstract-picker/js/abstract-picker_service.js":2307,"./abstract-picker/js/picker_directive.js":2308,"./accordion-box/js/accordion-box_directive.js":2309,"./analytics/js/analytics-indicators_factory.js":2310,"./analytics/js/analytics-indicators_service.js":2311,"./analytics/js/analytics_service.js":2312,"./badge/js/badge_directive.js":2313,"./cascading-grid/js/cascading-grid_directive.js":2314,"./chart/js/chart_directive.js":2315,"./chart/js/chart_service.js":2316,"./class-selector/js/class-selector_directive.js":2317,"./color-bubble/js/color-bubble_directive.js":2318,"./color-injector/js/color-injector_directive.js":2319,"./color-picker/js/color-picker_directive.js":2320,"./communities/templates/js/community-templates_factory.js":2321,"./communities/templates/js/community-templates_service.js":2322,"./communities/wizard/js/community-builder_controller.js":2323,"./communities/wizard/js/community-wizard-builder_controller.js":2324,"./communities/wizard/js/community-wizard_configuration.js":2325,"./constants/advanced-settings_constants.js":550,"./constants/initial-settings_constants.js":141,"./content-picker/js/content-picker_directive.js":2326,"./content-picker/js/content-picker_service.js":2327,"./content/js/content-template_service.js":2328,"./custom-content-type/js/custom-content-type-tag_factory.js":2329,"./custom-content-type/js/custom-content-type_factory.js":2330,"./custom-content-type/js/custom-content-type_service.js":2331,"./customer/js/customer_factory.js":2332,"./customer/js/customer_service.js":2333,"./customer/js/hook_constant.js":2334,"./customer/js/hook_factory.js":2335,"./customer/js/hook_service.js":2336,"./data-table/data-table_service.js":2337,"./date-picker/js/date-picker_directive.js":2338,"./date-picker/js/date-picker_service.js":2339,"./default-dialog/js/default-dialog_directive.js":2340,"./directives/misc_directives.js":2341,"./directory-entry-picker/js/directory-entry-picker_directive.js":2342,"./directory-entry-picker/js/directory-entry-picker_service.js":2343,"./drag-and-drop/js/drag-and-drop_directive.js":2344,"./drive-picker/drive-picker-builder_service.js":2345,"./drive-picker/drive-picker_directive.js":2346,"./drive-picker/drive-picker_service.js":2347,"./dropzone/js/dropzone_directive.js":2348,"./editable-media/js/editable-media_directive.js":2349,"./end-user-translation/end-user-translation_service.js":2350,"./fab/js/fab_directive.js":2351,"./factories/ExceptionHandler.js":2352,"./featured-image/js/featured-image_service.js":2353,"./features/js/features_service.js":2354,"./feed-selector/js/feed-selector_directive.js":2355,"./feed-type/js/feed-type_factory.js":2356,"./feed-type/js/feed-type_service.js":2357,"./filters/date_filters.js":2358,"./filters/misc_filters.js":2359,"./floating-toolbar/js/floating-toolbar_directive.js":2360,"./folder/js/folder-block_directive.js":2361,"./folder/js/folder_factory.js":2362,"./folder/js/folder_service.js":2363,"./form-validation/js/form-validation_service.js":2364,"./froala-loader/froala-loader_service.js":2365,"./gallery/js/gallery_directive.js":2366,"./gamification-status/js/gamification-status_directive.js":2367,"./gamification/goals/js/goal-actions_constant.js":2368,"./gamification/leaderboards/js/leaderboard-kinds_constant.js":2369,"./gamification/leaderboards/js/leaderboard_factory.js":2370,"./gamification/leaderboards/js/leaderboard_service.js":2371,"./gamification/quests/js/quest_factory.js":2372,"./gamification/quests/js/quest_service.js":2373,"./gamification/user-rewards/js/user-reward_factory.js":2374,"./gamification/user-rewards/js/user-reward_service.js":2375,"./i18n-chip/js/i18n-chip_directive.js":2376,"./icon-picker/js/icon-picker_directive.js":2377,"./infinite-scroll/js/infinite-scroll_directive.js":2378,"./input-language/js/input-language_directive.js":2379,"./instance-picker/js/instance-picker_directive.js":2380,"./instance-picker/js/instance-picker_service.js":2381,"./instance-siblings-selector/js/instance-siblings-selector_directive.js":2382,"./instance/js/instance_constant.js":2383,"./instance/js/instance_factory.js":2384,"./instance/js/instance_service.js":2385,"./language-selector/js/language-selector_directive.js":2386,"./layout/common/js/layout_service.js":2387,"./layout/modules/admin/js/admin-item-actions_directive.js":2388,"./layout/modules/admin/js/admin-nav-accordion_directive.js":2389,"./layout/modules/admin/js/admin-section-header_directive.js":2390,"./layout/modules/footer/js/footer_controller.js":2391,"./layout/modules/header/common/js/header-settings_controller.js":2392,"./layout/modules/header/common/js/header_controller.js":2393,"./layout/modules/header/modules/bookmarked-apps/js/bookmarked-apps_controller.js":2397,"./layout/modules/header/modules/customizable-layout/js/customizable-layout_controller.js":2398,"./layout/modules/header/modules/directory-favorites/js/directory-favorites_controller.js":2399,"./layout/modules/header/modules/instance-favorites/js/instance-favorites_controller.js":2400,"./layout/modules/header/modules/notifications/js/notifications_controller.js":2401,"./layout/modules/header/modules/search-engine/js/search-engine_controller.js":2402,"./layout/modules/header/modules/user-settings/js/user-settings_controller.js":2403,"./lightbox/js/lightbox_directive.js":2404,"./lightbox/js/lightbox_service.js":2405,"./list-dialog/js/list-dialog_directive.js":2406,"./loader/js/loader_directive.js":2407,"./lumsites-service/js/lumsites-base-service.js":2408,"./lumwork/js/lumwork-document_factory.js":2409,"./lumwork/js/lumwork-document_service.js":2410,"./lumwork/js/lumwork-space_factory.js":2411,"./lumwork/js/lumwork-space_service.js":2412,"./machine-learning/js/machine-learning_factory.js":2413,"./machine-learning/js/machine-learning_service.js":2414,"./media-manager/js/media-manager_directive.js":2415,"./media-picker/js/document_factory.js":2416,"./media-picker/js/document_service.js":2417,"./media-picker/js/media-picker-detail_controller.js":2418,"./media-picker/js/media-picker-filter_controller.js":2419,"./media-picker/js/media-picker_controller.js":2420,"./metadata-selector/js/metadata-selector_directive.js":2421,"./metadata/js/metadata_factory.js":2422,"./metadata/js/metadata_service.js":2423,"./module/common/js/module-admin_service.js":2424,"./module/common/js/module-front_service.js":2425,"./module/modules/directory/js/directory-entry-admin_controller.js":2426,"./module/modules/directory/js/directory-entry-user_factory.js":2427,"./module/modules/directory/js/directory-entry-user_service.js":2428,"./module/modules/directory/js/directory-entry_factory.js":2429,"./module/modules/directory/js/directory-entry_service.js":2430,"./module/modules/directory/js/directory_factory.js":2431,"./module/modules/directory/js/directory_service.js":2432,"./module/modules/on-boarding-tour/js/on-boarding-tour_directive.js":2433,"./module/modules/on-boarding-tour/js/on-boarding-tour_service.js":2434,"./module/modules/tutorial/js/tutorial_directive.js":2435,"./module/modules/tutorial/js/tutorial_factory.js":2436,"./module/modules/tutorial/js/tutorial_service.js":2437,"./monitoring/js/monitoring_factory.js":2438,"./monitoring/js/monitoring_service.js":2439,"./navigation-manager/js/navigation-manager_directive.js":2440,"./navigation-manager/js/navigation-manager_service.js":2441,"./navigation-picker/js/navigation-picker_directive.js":2442,"./navigation-picker/js/navigation-picker_service.js":2443,"./no-results/js/no-results_directive.js":2444,"./redux-store/redux-store-constants.js":133,"./redux-store/redux-store-service.js":3013,"./reusable-media-picker/js/reusable-media-picker_directive.js":2445,"./reusable-media-picker/js/reusable-media-picker_service.js":2446,"./rich-text/js/ls-rich-text-editor_directive.js":2447,"./rich-text/js/ls-rich-text_directive.js":2448,"./rich-text/js/ls-text-editor-markdown_service.js":2449,"./rich-text/js/ls-text-editor_service.js":2450,"./search-filter/js/search-filter_directive.js":2451,"./search-filter/js/search-highlight_filter.js":2452,"./services/local-storage_service.js":2453,"./services/perfs_service.js":2454,"./services/settings_factory.js":2455,"./services/settings_service.js":2456,"./services/utils_service.js":919,"./settings-list/js/settings-list_directive.js":2457,"./settings-option/js/settings-option_directive.js":2458,"./sharepoint-site/js/sharepoint-site-block_directive.js":2459,"./slideshow/js/slideshow_directive.js":2460,"./social-advocacy/js/social-advocacy_factory.js":2461,"./social-advocacy/js/social-advocacy_service.js":2462,"./spammer-details/js/spammer-details_directive.js":2463,"./stepper-dialog/js/stepper-dialog_directive.js":2464,"./stepper-dialog/js/stepper-dialog_service.js":2465,"./stepper/js/step-nav_directive.js":2466,"./stepper/js/step_directive.js":2467,"./stepper/js/stepper_directive.js":2468,"./sticky-element/js/sticky-element_directive.js":2469,"./template/js/template_factory.js":2470,"./template/js/template_service.js":2471,"./thumbnail/js/thumbnail.js":2472,"./time-picker/js/time-picker_directive.js":2473,"./translate/gtranslate_service.js":2474,"./translate/translate_factory.js":2475,"./translation/js/translation_service.js":2476,"./ui-language/js/ui-language_directive.js":2477,"./upload/js/upload_factory.js":2478,"./upload/js/upload_service.js":2479,"./uploader/js/uploader-action_service.js":2480,"./uploader/js/uploader_directive.js":2481,"./user-picker/js/user-picker_directive.js":2482,"./user-picker/js/user-picker_service.js":2483};r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=2305},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,o,c,u,p,g,v,y,b,C,S,_,w,D){function L(){E()(Y.allowedProviders,"community")?Y.providerService="CommunityDocumentProvider":Y.providerService=Y.providerService||"DocumentProvider";var e=angular.isDefinedAndFilled(Y.providerService)?Y.providerService:void 0;return Y.objectService.getPickerListRequestFilters(Y.currentFilter,Y.current.objectPathMap,Y.showFoldersOnly,e)}function P(){Y.currentObjectList.length=0}function N(e){var t=[];angular.forEach(e,(function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{kind:Y.objectService.getObjectKind(e,Y.currentFilter)}))})),Y.currentObjectList=t}function R(e){angular.extend(e,function(){var e=Y.searchParameters,t=e.query,n=e.type,r=Y.currentFilter.sortOrder,i=[];angular.isDefinedAndFilled(r)&&i.push.apply(i,f()(Y.objectService.getMandatorySortOrders()).concat([r]));var a=I()(n,Y.allowedTypes),o={searchTags:Y.searchParameters.tags,searchText:t,sortOrder:i};return Y.showFoldersOnly||(o.searchTypes=a),o}())}function j(e){return k.apply(this,arguments)}function k(){return k=l()(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.objectService.promiseFilterize(t,Y.SELECTION_LIST_KEY).then(N,S.displayServerError);case 2:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function F(){if(angular.isUndefinedOrEmpty(Y.ngModel))return Y.ngModel=Y.multiple?[]:void 0,void(W=void 0);W=angular.fastCopy(Y.ngModel),angular.isDefined(Y.ngModel)&&!angular.isArray(Y.ngModel)&&Y.multiple&&(Y.ngModel=[Y.ngModel])}function U(){angular.isUndefinedOrEmpty(Y.allowedTypes)||(Y.allowedTypesForUploader=[],E()(Y.allowedTypes,"IMAGE")&&(Y.allowedTypesForUploader=Y.allowedTypesForUploader.concat(g.FILE_TYPES.IMAGE)),E()(Y.allowedTypes,"OTHER")&&(Y.allowedTypesForUploader=Y.allowedTypesForUploader.concat(g.FILE_TYPES.OTHER,g.FILE_TYPES.DOCUMENT))),Y.initFilterAndOrder(),F(),Y.is.admin=h()(C.getConnected(),"isSuperAdmin",!1)||C.isInstanceAdmin(),angular.extend(Y.current,{instanceId:y.getCurrentInstanceId(),lang:D.inputLanguage}),Y.SELECTION_LIST_KEY="".concat(Y.objectType,"-picker-selection-").concat(Y.pickerId),Y.multiple=Boolean(Y.multiple),Y.embedded=Boolean(Y.embedded)}function M(){return x.apply(this,arguments)}function x(){return x=l()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return t=e.sent,R(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function $(){return $=l()(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y.resetDetailObject(),t&&Y.resetPath(),P(),e.t0=j,e.next=6,M();case 6:return e.t1=e.sent,e.next=9,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function B(e){return Y.searchParameters={},angular.isDefinedAndFilled(e)&&Y.current.objectPathMap.push(angular.fastCopy(e)),Y.executeFilter()}var W,G,Y=this,H=["footer"],K={Media:"Document"},V=["actions","detail","filter","list","grid","sidebar","header","selection"];Y.CONTROLLER_NAME="",Y.DYNAMIC_OBJECT_TEMPLATE_PATH="",Y.SELECTION_LIST_KEY="",Y.currentObjectList=[],Y.currentFilter={},Y.allowedTypesForUploader=[],Y.current={instanceId:"",lang:"",objectPathMap:[],path:{},sortOrder:{}},Y.is={admin:!1,open:!1,selectionShown:!1,sidebarShown:!1,viewList:"desk"===b.breakpoint},Y.objectService={},Y.objectServicePath={},Y.searchParameters={},Y.selectedDetailObject={},Y.templatesToCache={},Y.Config=g,Y.Instance=y,Y.Translation=D,Y.Utils=S,Y.actionSelectionShow=function(e){Y.resetDetailObject(),Y.is.selectionShown=angular.isDefined(e)?e:!Y.is.selectionShown},Y.actionSidebarShow=function(e){Y.is.sidebarShown=angular.isDefined(e)?e:!Y.is.sidebarShown},Y.closeAbstractPicker=function(e){"cancel"===e?(Y.ngModel=angular.fastCopy(W),p.close(Y.pickerId,!1)):p.close(Y.pickerId,!0)},Y.debouncedChangeSearchParameters=m()((function(e){return Y.searchParameters=e,delete Y.currentFilter.sortOrder,Y.executeFilter()}),500),Y.executeFilter=function(e){return $.apply(this,arguments)},Y.initFilterAndOrder=function(){angular.isDefinedAndFilled(Y.objectService.defaultPickerParams)&&(Y.currentFilter=angular.fastCopy(Y.objectService.defaultPickerParams)),angular.isDefinedAndFilled(Y.filterView)&&angular.extend(Y.currentFilter,Y.filterView)},Y.isDetailEmpty=function(){return angular.isUndefinedOrEmpty(Y.selectedDetailObject)||Y.is.selectionShown},Y.isDisplayedInDetail=function(e){return!angular.isUndefinedOrEmpty(Y.selectedDetailObject)&&e===Y.selectedDetailObject},Y.isFilterEmpty=function(e){return!!angular.isUndefinedOrEmpty(e)||T()(e,angular.isDefinedAndFilled)},Y.isSelected=function(e){return!angular.isUndefinedOrEmpty(Y.ngModel)&&(Y.multiple?angular.isDefinedAndFilled(O()(Y.ngModel,{id:e.id})):Y.ngModel.id===e.id)},Y.loadNextPage=function(){Y.objectService.nextPage(N,S.displayServerError,Y.SELECTION_LIST_KEY)},Y.navigatePath=B,Y.navigateToParentPath=function(){return Y.current.objectPathMap.splice(-1,1),B()},Y.removeFromSelection=function(e){angular.isUndefinedOrEmpty(e)||(Y.multiple?Y.ngModel=A()(Y.ngModel,O()(Y.ngModel,{id:e.id})):Y.ngModel=void 0)},Y.resetDetailObject=function(){Y.selectedDetailObject=void 0},Y.resetPath=function(){Y.current.objectPathMap=[]},Y.resetPicker=function(){F(),Y.actionSidebarShow("desk"===b.breakpoint),Y.actionSelectionShow(!1),Y.initFilterAndOrder()},Y.submitList=function(){u((function(){p.close(Y.pickerId,!0)}))},Y.toggleDetail=function(e){u((function(){Y.selectedDetailObject=e,Y.selectedDetailObject&&angular.isDefinedAndFilled(Y.selectedDetailObject.override)||(Y.selectedDetailObject.override={description:{},name:{},thumbnail:{}})}))},Y.toggleListView=function(){Y.is.viewList=!Y.is.viewList},Y.toggleSelection=function(e){if(!Y.embedded)if(Y.isSelected(e))Y.removeFromSelection(e);else{var t=angular.fastCopy(e);Y.multiple?Y.maxSelect&&Y.ngModel.length===Number(Y.maxSelect)?Y.ngModel[Y.ngModel.length-1]=t:Y.ngModel.push(t):Y.multiple||(Y.ngModel=t)}},Y.toggleSortOrder=function(e){return angular.isUndefinedOrEmpty(e)?Promise.resolve():(Y.currentFilter.sortOrder=angular.isUndefinedOrEmpty(Y.currentFilter.sortOrder)||e!==Y.currentFilter.sortOrder?e:"-".concat(e),Y.executeFilter())},Y.CONTROLLER_NAME="".concat(Y.objectType,"PickerController"),Y.DYNAMIC_OBJECT_TEMPLATE_PATH="/client/common/modules/".concat(Y.objectType.toLowerCase(),"-picker/views/partials/"),G=K[Y.objectType],angular.isDefinedAndFilled(G)?Y.objectService=n.get(G):Y.objectService=n.get("".concat(Y.objectType,"Picker")),angular.isDefinedAndFilled(Y.objectTypePath)&&(Y.objectServicePath=n.get(Y.objectTypePath)),U(),angular.forEach(H,(function(e){Y.templatesToCache[e]="".concat("/client/common/modules/abstract-picker/views/partials/","abstract-picker-").concat(e,".html")})),angular.forEach(V,(function(e){var t="".concat(Y.DYNAMIC_OBJECT_TEMPLATE_PATH+Y.objectType.toLowerCase(),"-picker-").concat(e,".html");Y.templatesToCache[e]=t}))}function a(){return{bindToController:!0,controller:i,controllerAs:"vm",link:function(e,t){e.vm.embedded||(t.appendTo("body"),e.$on("$destroy",(function(){t.remove()})))},restrict:"E",scope:{allowEmptySelection:"<?lsAllowEmptySelection",allowFolderPick:"<?lsAllowFolderPick",allowedProviders:"<?lsAllowedProviders",allowedTypes:"<?lsAllowedTypes",embedded:"<?lsEmbedded",filterView:"<?lsFilterView",hasTemplateSidebar:"<?lsHasSidebar",maxSelect:"@?lsMaxSelect",multiple:"<?lsMultiple",language:"@?lsLanguage",ngModel:"=?",objectType:"@lsType",objectTypePath:"@lsTypePath",pickerId:"@lsPickerId",providerService:"@?lsProviderService",showFoldersOnly:"<?lsShowFoldersOnly",title:"@lsTitle",widgetUuid:"@lsWidgetUuid"},templateUrl:"/client/common/modules/abstract-picker/views/abstract-picker.html",transclude:!0}}n.r(t),n.d(t,"AbstractPickerDirective",(function(){return a}));var o=n(6),s=n.n(o),c=n(10),l=n.n(c),u=n(3),d=n.n(u),p=n(19),f=n.n(p),g=n(71),m=n.n(g),v=n(4),h=n.n(v),y=n(17),E=n.n(y),b=n(21),O=n.n(b),C=n(217),T=n.n(C),S=n(167),I=n.n(S),_=n(106),A=n.n(_);i.$inject=["$element","$http","$injector","$q","$rootScope","$scope","$templateCache","$timeout","AbstractPicker","Config","Feed","Instance","Layout","User","Utils","Metadata","Tag","Translation"],angular.module("Directives").directive("lsAbstractPicker",a)},function(e,t,n){"use strict";function r(e,t,n){this.close=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];angular.isUndefinedOrEmpty(n)||(e.$broadcast("abstract-picker__close-start",n,r),angular.element("body").css({overflow:"visible"}),angular.element("#".concat(n)).removeClass("abstract-picker--is-shown"),t((function(){e.$broadcast("abstract-picker__close-end",n)}),50))},this.open=function(r,i){angular.isUndefinedOrEmpty(r)||(n.register(),e.$broadcast("abstract-picker__open-start",r),angular.element("#".concat(r)).css("z-index",n.getDepth()).addClass("abstract-picker--is-shown"),t((function(){e.$broadcast("abstract-picker__open-end",r)}),50),i||angular.element("body").css({overflow:"hidden"}))}}n.r(t),n.d(t,"AbstractPickerService",(function(){return r})),r.$inject=["$rootScope","$timeout","LxDepthService"],angular.module("Services").service("AbstractPicker",r)},function(e,t,n){"use strict";function r(e,t,n,r,i){var a=this,o=[];t.$on("abstract-picker__open-start",(function(e,t){t===a.pickerId&&(a.isMediaModel=!!angular.isUndefinedOrEmpty(a.isMediaModel)||a.isMediaModel,a.editionModel=i.transformForMediaPicker(a.ngModel,a.isMediaModel))})),t.$on("abstract-picker__close-start",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t===a.pickerId&&n&&(a.ngModel=i.transformForMediaClient(a.editionModel,a.isMediaModel))})),t.$on("$destroy",(function(){angular.forEach(o,(function(e){e()})),o=[]}))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{allowEmptySelection:"<?lsAllowEmptySelection",allowFolderPick:"<?lsAllowFolderPick",allowToUpdateEmpty:"<?lsAllowToUpdateEmpty",allowedProviders:"<?lsAllowedProviders",allowedTypes:"<?lsAllowedTypes",customActions:"<?lsCustomActions",embedded:"<?lsEmbedded",filterActions:"=?lsFilterActions",filterView:"<?lsFilterView",forcedCustomContentTypes:"=?lsForcedCustomContentTypes",forcedTypes:"=?lsForcedTypes",hasTemplateSidebar:"<?lsHasSidebar",hideInstanceSelector:"=?lsHideInstanceSelector",isMediaModel:"<?lsIsMediaModel",kind:"@?lsKind",maxSelect:"<?lsMaxSelect",mediaList:"=?lsMediaList",multiple:"<?lsMultiple",language:"@?lsLanguage",ngModel:"=?",objectType:"@lsType",objectTypePath:"@?lsTypePath",paginateSelection:"<?lsPaginateSelection",pickIds:"<?lsPickIds",pickerId:"@?lsPickerId",providerService:"@?lsProviderService",showFoldersOnly:"=?lsShowFoldersOnly",showHidden:"<lsShowHidden",title:"@?lsTitle",viewMode:"@?lsViewMode",widgetUuid:"@?lsWidgetUuid"},templateUrl:"/client/common/modules/abstract-picker/views/picker.html",transclude:!0}}n.r(t),n.d(t,"PickerDirective",(function(){return i}));n(17);r.$inject=["$rootScope","$scope","Config","Features","Media"],angular.module("Directives").directive("lsPicker",i)},function(e,t){!function(){"use strict";function e(e,t,n){var r,i=this;i.closeAccordion=function(){e.when(r).then((function(){i.closed=!0,t.find(".accordion-box-content").velocity("slideUp",{complete:function(){angular.isFunction(i.toggleCallback)&&i.toggleCallback(),angular.isFunction(i.closeCallback)&&i.closeCallback()},duration:400,easing:"easeOutQuint"})}))},i.openAccordion=function(){r=e.defer(),i.closed=!1,t.find(".accordion-box-content").velocity("slideDown",{complete:function(){r.resolve(),r=void 0,angular.isFunction(i.toggleCallback)&&i.toggleCallback(),angular.isFunction(i.openCallback)&&i.openCallback()},duration:400,easing:"easeOutQuint"})},i.toggle=function(){i.closed=!i.closed},n.$watch((function(){return i.closed}),(function(e,t){e!==t&&(e?i.closeAccordion():i.openAccordion())})),i.closed=i.closed||!1,i.isToggleDisabled=i.isToggleDisabled||!1,i.isToggleHidden=i.isToggleHidden||!1}function t(){var e=this;e.parentCtrl={},this.setParentController=function(t){e.parentCtrl=t}}function n(e){var t=this;t.parentCtrl={},this.setParentController=function(n){t.parentCtrl=n;var r=Boolean(t.parentCtrl.closed);r&&e.hide()}}n.$inject=["$element"],e.$inject=["$q","$element","$scope"],angular.module("Directives").directive("accordionBox",(function(){return{bindToController:!0,controller:e,controllerAs:"accordionBox",link:function(e,t,n){angular.isDefined(n.scrollable)&&t.find(n.scrollableTarget).css({maxHeight:n.scrollableHeight,overflow:"auto"})},replace:!0,restrict:"E",scope:{closeCallback:"&?",closed:"=?",icon:"@?",isToggleDisabled:"<?",isToggleHidden:"<?",ngDisabled:"=?",openCallback:"&?",toggleCallback:"&?",type:"@?"},templateUrl:"/client/common/modules/accordion-box/views/accordion-box.html",transclude:!0}})),angular.module("Directives").directive("accordionBoxHeader",(function(){return{bindToController:!0,controller:t,controllerAs:"accordionBoxHeader",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["accordionBoxHeader","^accordionBox"],restrict:"E",templateUrl:"/client/common/modules/accordion-box/views/accordion-box-header.html",transclude:!0}})),angular.module("Directives").directive("accordionBoxContent",(function(){return{bindToController:!0,controller:n,controllerAs:"accordionBoxContent",link:function(e,t,n,r){r[0].setParentController(r[1])},replace:!0,require:["accordionBoxContent","^accordionBox"],restrict:"E",templateUrl:"/client/common/modules/accordion-box/views/accordion-box-content.html",transclude:!0}}))}()},function(e,t,n){"use strict";function r(e,t){var n="".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/analyticsv2");return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/analyticsv2/:methodKey"),{},{communityIndicators:{isArray:!1,method:"POST",params:{methodKey:"get_indicators_community"},url:"".concat(n,"/:methodKey")},deleteFilter:{isArray:!1,method:"DELETE",params:{actionKey:"delete",methodKey:"filter"},url:"".concat(n,"/:methodKey/:actionKey")},getFiltersValues:{isArray:!1,method:"POST",params:{actionKey:"list",methodKey:"value"},url:"".concat(n,"/filter/:methodKey/:actionKey")},listFilters:{isArray:!1,method:"GET",params:{actionKey:"list",methodKey:"filter"},url:"".concat(n,"/:methodKey/:actionKey")},platformIndicators:{isArray:!1,method:"POST",params:{methodKey:"get_indicators_platform"},url:"".concat(n,"/:methodKey")},saveFilters:{isArray:!1,method:"POST",params:{actionKey:"save",methodKey:"filter"},url:"".concat(n,"/:methodKey/:actionKey")}})}n.r(t),n.d(t,"AnalyticsIndicatorsFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("AnalyticsIndicatorsFactory",r)},function(e,t,n){"use strict";function r(e,t){var n=this;n.deleteFilter=function(e){return t.deleteFilter({uid:e}).$promise},n.getFilters=function(){return e((function(e,n){t.listFilters((function(t){e(t.filters)}),n)}))},n.saveFilters=function(e){return t.saveFilters({filters:e}).$promise}}n.r(t),n.d(t,"AnalyticsIndicatorsService",(function(){return r})),r.$inject=["$q","AnalyticsIndicatorsFactory"],angular.module("Services").service("AnalyticsIndicators",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,m,v,h,y){var E=this,b="LumAppsGTM",O={},C=n.defer();E.handleTaggingMap=function(){},E.sendGTMEvent=function(t){return n((function(c){C.promise.then((function(){var v,h=u.getInstance()||{},y={},E=[];if("app.front.content-edit"===t||"app.front.content-get"===t){v=i.getCurrent()||{},y.lumapps_content_internal_type=v.type,y.lumapps_content_type_id=v.customContentType,y.lumapps_content_type_name=m.translate(s()(v,"customContentTypeDetails.name"),void 0,h.defaultLang,!1,!0),angular.isUndefinedOrEmpty(y.lumapps_content_type_name)&&(y.lumapps_content_type_name=void 0),y.lumapps_content_publication_date=v.publicationDate,angular.isUndefinedOrEmpty(y.lumapps_content_publication_date)&&(y.lumapps_content_publication_date=void 0);var C=a()(f()(v.metadata))||[];y.lumapps_content_metadata_ids=C.join(";"),angular.isDefinedAndFilled(y.lumapps_content_metadata_ids)?(y.lumapps_content_metadata="",angular.forEach(C,(function(e){var t=p.getMetadataFromKey(e,!1,!0),n=m.translate(s()(t,"name"),void 0,h.defaultLang,!1,!0);angular.isDefinedAndFilled(n)&&(y.lumapps_content_metadata+=angular.isDefinedAndFilled(y.lumapps_content_metadata)?";":"",y.lumapps_content_metadata+=n)}))):(y.lumapps_content_metadata_ids=void 0,y.lumapps_content_metadata=void 0);var T=v.customContentTypeTags||[];y.lumapps_content_tags_ids=T.join(";"),angular.isDefinedAndFilled(y.lumapps_content_tags_ids)?(y.lumapps_content_tags="",angular.forEach(T,(function(e){var t=n((function(t){o.getCustomContentTypesTags(v.customContentType).then((function(n){var r=o.getTagByUuid(e,n),i=m.translate(s()(r,"name"),void 0,h.defaultLang,!1,!0);angular.isDefinedAndFilled(i)&&(y.lumapps_content_tags+=angular.isDefinedAndFilled(y.lumapps_content_tags)?";":"",y.lumapps_content_tags+=i),t()})).catch(t)}));E.push(t)}))):(y.lumapps_content_tags_ids=void 0,y.lumapps_content_tags=void 0),y.lumapps_content_likes=v.likes||0,y.lumapps_content_comments=v.comments||0}else y.lumapps_content_internal_type=void 0,y.lumapps_content_type_id=void 0,y.lumapps_content_type_name=void 0,y.lumapps_content_publication_date=void 0,y.lumapps_content_metadata_ids=void 0,y.lumapps_content_metadata=void 0,y.lumapps_content_tags_ids=void 0,y.lumapps_content_tags=void 0,y.lumapps_content_likes=void 0,y.lumapps_content_comments=void 0,"app.front.community"===t&&(v=l()(e.path,"/post/")?g.getCurrent():r.getCurrent());angular.isDefinedAndFilled(v)?(y.lumapps_content_id=v.uid||v.id,y.lumapps_content_internal_type=v.type,y.lumapps_content_title=m.translate(v.title,void 0,h.defaultLang,!1,!0),angular.isUndefinedOrEmpty(y.lumapps_content_title)&&(y.lumapps_content_title=void 0),y.lumapps_content_slug=m.translate(v.slug,void 0,h.defaultLang,!1,!0),angular.isUndefinedOrEmpty(y.lumapps_content_slug)&&(y.lumapps_content_slug=void 0),y.lumapps_content_is_homepage=d()(v.isHomepage||!1)):(y.lumapps_content_id=void 0,y.lumapps_content_internal_type=void 0,y.lumapps_content_title=void 0,y.lumapps_content_slug=void 0,y.lumapps_content_is_homepage=void 0),y.lumapps_route=e.path(),n.all(E).then((function(){angular.extend(y,O),dataLayer.push({attributes:y,event:b}),angular.isDefinedAndFilled(s()(h,"googleTagManager"))&&"undefined"!=typeof dataLayerCustom&&dataLayerCustom.push({attributes:y,event:b}),c()}))}))}))},E.init=function(){try{var e=c.getCustomer()||{},n=u.getInstance()||{};O={lumapps_customer_id:c.getCustomerId(),lumapps_customer_name:e.name,lumapps_site_default_lang:n.defaultLang,lumapps_site_ga:n.googleAnalytics,lumapps_site_id:u.getCurrentInstanceId(),lumapps_site_name:n.name,lumapps_site_slug:u.getCurrentInstanceSlug()},angular.isUndefinedOrEmpty(O.lumapps_site_default_lang)&&(O.lumapps_site_default_lang=void 0),angular.isUndefinedOrEmpty(O.lumapps_site_ga)&&(O.lumapps_site_ga=void 0),angular.isUndefinedOrEmpty(O.lumapps_site_name)&&(O.lumapps_site_name=void 0);var r=v.getConnected(),i=h.getDefaultUserDirectory(r);angular.isDefinedAndFilled(i)&&angular.forEach(s()(i,"template.components",[]),(function(e){angular.isUndefinedOrEmpty(s()(e,"properties.analyticsCode"))||(O["lumapps_user_dir_".concat(e.properties.analyticsCode)]=y.getApiProfileFieldFromMap(s()(e.properties,"boundMap.text",e.uuid),r))})),O.lumapps_user_is_admin=d()(r.isSuperAdmin||v.isInstanceAdmin()),O.lumapps_user_unique_id=r.uid||r.id,O.lumapps_user_primary_language=r.lang,angular.isUndefinedOrEmpty(O.lumapps_user_primary_language)&&(O.lumapps_user_primary_language=void 0),O.lumapps_user_secondary_language=(r.langs||[]).join(";"),angular.isUndefinedOrEmpty(O.lumapps_user_secondary_language)&&(O.lumapps_user_secondary_language=void 0),C.resolve()}catch(e){t.error(e),C.reject()}}}n.r(t),n.d(t,"AnalyticsService",(function(){return r}));var i=n(260),a=n.n(i),o=n(4),s=n.n(o),c=n(17),l=n.n(c),u=n(234),d=n.n(u),p=n(99),f=n.n(p);r.$inject=["$location","$log","$q","Community","Content","CustomContentType","Customer","Instance","Metadata","Post","Translation","User","UserDirectory","Utils"],angular.module("Services").service("Analytics",r)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(245);!function(){function n(n,r,i){function a(){var e=Math.abs((o.text||o.image||o.icon||"").hashCode());return o.colors[e%o.colors.length]||o.colors[0]}var o=this,s=["hexagon"];n.$on("badge-redraw",(function(e,t){(o.id===t||angular.isUndefinedOrEmpty(t))&&o.init()})),o.init=function(){o.allowCustomColor=!!angular.isUndefinedOrEmpty(o.allowCustomColor)||o.allowCustomColor,o.colors=o.colors||e.get(i.getCurrent("global"),"properties.colors")||r.COLORS,o.colors=e.without(o.colors,"transparent"),o.primaryColor=o.backgroundColor||a(),o.allowCustomColor||e.includes(o.colors,o.primaryColor)||(o.primaryColor=a()),o.secondaryColor=o.borderColor||Object(t.e)(-.2,o.primaryColor),o.thirdColor=o.fontColor||Object(t.a)(o.primaryColor),o.maxLength=angular.isUndefined(o.maxLength)?1:o.maxLength,o.size=angular.isDefinedAndFilled(o.size)?parseInt(o.size,10):140,o.shape=e.includes(s,o.shape)?o.shape:s[0]},o.init()}n.$inject=["$scope","ConfigTheme","Style"],angular.module("Directives").directive("lsBadge",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",replace:!0,restrict:"E",scope:{allowCustomColor:"<?lsAllowCustomColor",backgroundColor:"@?lsBackgroundColor",borderColor:"@?lsBorderColor",colors:"<?lsColors",fontColor:"@?lsFontColor",icon:"@?lsIcon",id:"@?lsId",image:"@?lsImage",imageOnly:"<?lsImageOnly",maxLength:"<?lsMaxLength",shape:"@?shape",size:"<?lsSize",text:"@?lsText"},templateUrl:"/client/common/modules/badge/views/badge.html",transclude:!0}}))}()}.call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(e,n,r){var i=n?0:function(){for(var e=0,n=0,r=0;r<u.columns.length;r++){if(c>u.columns.length-1&&"desk"!==a.breakpoint){n=u.columns.length-1;break}d[r]=d[r]||t.find(".ls-cascading-grid__column").eq(r);var i=d[r].outerHeight();(0===r||i<e)&&(e=i,n=r)}return n}();c=e,l=r,n?u.columns[0].unshift(u.source[e]):u.columns[i].push(u.source[e])}function s(){for(var e=0;e<u.columnCount;e++)u.columns[e]=[]}var c,l,u=this,d=[];u.columns=[],u.postTypes=i.POST_TYPES,u.getFlexItem=function(e){return Math.floor(12/u.columnCount+(12%u.columnCount>e?1:0))},n.$on("post-block-loaded",(function(e,t){var n=c+1;r((function(){angular.isDefinedAndFilled(u.source[c])&&t===u.source[c].uid&&n<u.source.length&&l&&o(n,!1,!0)}))})),n.$watchCollection((function(){return u.source}),(function(t,n){if(t.length!==n.length||!angular.isDefinedAndFilled(t))if(angular.isUndefinedOrEmpty(t))s();else if(t.length-n.length==1){for(var r=-1,i=0;i<t.length;i++){var a=e.find(n,{uid:t[i].uid});if(!a){r=i;break}}if(r>-1){var c=0===r;o(r,c,!1)}}else if(n.length-t.length==1){for(var l,d=0;d<n.length;d++){var p=e.find(t,{uid:n[d].uid});if(!p){l=n[d];break}}angular.isDefinedAndFilled(l)&&function(e){for(var t=0;t<u.columns.length;t++)if(u.columns[t].indexOf(e)>-1){u.columns[t].splice(u.columns[t].indexOf(e),1);break}}(l)}else t.length-n.length>1&&o(n.length,!1,!0)})),n.$watch((function(){return u.columnCount}),(function(e,t){e!==t&&(u.columns=[],d=[],s())}))}t.$inject=["$element","$scope","$timeout","InitialSettings","Layout"],angular.module("Directives").directive("lsCascadingGrid",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{columnCount:"@?lsColumnCount",isCommunityContext:"<?",source:"<lsSource",isLoading:"<lsIsLoading",widgetProperties:"<?lsWidgetProperties"},templateUrl:"/client/common/modules/cascading-grid/views/cascading-grid.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,r,i,a){function s(){if(angular.isUndefinedOrEmpty(m.chartData))return{};var e,t,n={datasets:[],labels:[]},r=[],o=[];angular.forEach(m.chartData,(function(e){n.labels.push(e.label),r.push(e.values)})),angular.isObject(r[0])&&(e=r,t=[],angular.forEach(e,(function(e){t=t.concat(u()(Object.keys(e),t))})),angular.forEach(e,(function(n,r){Object.keys(n).length!==t.length&&angular.forEach(t,(function(t){e[r][t]=n[t]||0}))})),r=e);var s=angular.isObject(r[0])?Object.keys(r[0]).length:r.length;return angular.isObject(r[0])?(o=Object.keys(r[0]),C=!(!angular.isDefinedAndFilled(m.chartDatasetLabels)||m.chartDatasetLabels.length!==s)):angular.isDefinedAndFilled(m.chartDatasetLabels)&&m.chartDatasetLabels.length===s&&angular.forEach(m.chartDatasetLabels,(function(e,t){n.labels[t]=a.translate(e)})),angular.isDefinedAndFilled(m.chartColors)&&m.chartColors.length===s?(E.backgroundColor=m.chartColors,E.hoverBackgroundColor=[],angular.forEach(m.chartColors,(function(e){E.hoverBackgroundColor.push(i.getHoverColor(e))}))):E=i.getChartItemsColors(s),g()(["bar","line"],m.chartType)?angular.forEach(o,(function(e,t){n.datasets.push({backgroundColor:E.backgroundColor[t],borderColor:E.backgroundColor[t],data:y()(r,e),fill:!1,hoverBackgroundColor:E.hoverBackgroundColor[t],label:C?a.translate(m.chartDatasetLabels[t]):""})})):g()(["pie","doughnut"],m.chartType)&&n.datasets.push({backgroundColor:E.backgroundColor,data:r,hoverBackgroundColor:E.hoverBackgroundColor}),n}function l(){var n=e.find("canvas")[0].getContext("2d");return t((function(e){f.then((function(t){var r=t.default;d||(d=new r(n,{data:O,options:m.chartOptions,plugins:h,type:m.chartType}),m.is.initialized=!0),e(d)}))}))}var d,f,m=this,h=[],E={backgroundColor:[],hoverBackgroundColor:[]},O={},C=!1;m.is={initialized:!1},m.isChartVisible=function(){return!!g()(["line","bar"],m.chartType)||v()(p()(O,"datasets[0].data"),(function(e){return angular.isDefinedAndFilled(e)&&e>0}))},r.$watch("vm.chartData",function(){var e=c()(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!angular.isUndefinedOrEmpty(m.chartData)&&n!==m.chartData){e.next=2;break}return e.abrupt("return");case 2:return O=m.preformatted?m.chartData:s(),e.next=5,l();case 5:r=e.sent,r.chart.config.data=O,r.update();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=Promise.resolve().then(n.t.bind(null,736,7)),m.chartOptions=m.chartOptions||angular.fastCopy(i.chartOptions),angular.isUndefinedOrEmpty([m.chartData,m.chartType],"some")||(O=m.preformatted?m.chartData:s(),angular.isUndefinedOrEmpty(p()(m.chartOptions,"legend.display"))&&b()(m.chartOptions,"legend.display",!1),C=!(!m.chartOptions.legend.display||angular.isUndefinedOrEmpty(m.chartDatasetLabels)),l())}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"AE",scope:{chartColors:"<?lsChartColors",chartData:"=lsChartData",chartDatasetLabels:"=?lsChartDatasetLabels",chartOptions:"<?lsChartOptions",chartType:"@lsChartType",preformatted:"<?lsPreformatted"},templateUrl:"/client/common/modules/chart/views/chart.html"}}n.r(t),n.d(t,"ChartController",(function(){return r})),n.d(t,"ChartDirective",(function(){return i}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(279),u=n.n(l),d=n(4),p=n.n(d),f=n(17),g=n.n(f),m=n(21),v=n.n(m),h=n(28),y=n.n(h),E=n(7),b=n.n(E);r.$inject=["$element","$q","$scope","Charts","Translation"],angular.module("Directives").directive("lsChart",i)},function(e,t,n){"use strict";function r(e){var t=this;t.chartOptions={animation:{animateRotate:!0,animateScale:!1,currentStep:50,duration:750,easing:"easeOutQuad",numSteps:50},borderWidth:10,defaultColor:"#fff",legend:{display:!1},maintainAspectRatio:!0,percentageInnerCutout:50,responsive:!0,scaleFontColor:"rgba(0,0,0,0.54)",scaleFontFamily:"'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleLineColor:"rgba(0,0,0,0.38)",segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:8,tooltips:{backgroundColor:"#616161",bodyAlign:"top",bodySpacing:2,callbacks:{label:function(e,t){var n=t.datasets[0].tooltipData[e.index],r=t.labels[e.index];return"".concat(r," ").concat(parseFloat(n))}},caretSize:0,cornerRadius:0,footerFontSize:10,mode:"single",titleColor:"#fff",titleFontFamily:"'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",titleFontSize:10,titleFontStyle:"normal",titleSpacing:0}},t.getChartItemsColors=function(n,r){r=angular.isNumber(r)?r:.7;for(var i={backgroundColor:[],hoverBackgroundColor:[]},a=0;a<n;++a){var o=e.getItemColor(a);i.backgroundColor.push(o),i.hoverBackgroundColor.push(t.getHoverColor(o,r))}return i},t.getHoverColor=function(e,t){if(!angular.isUndefinedOrEmpty(e))return Object(i.c)(e,t)},t.getPieData=function(e,n,r,i){if(!angular.isUndefinedOrEmpty(e)&&!angular.isUndefinedOrEmpty(n)&&n.length===e.length){var a=e.length;if(angular.isUndefinedOrEmpty(r)||r.length!==a||r.length!==i.length){var o=t.getChartItemsColors(a);r=o.backgroundColor,i=o.hoverBackgroundColor}return{datasets:[{backgroundColor:r,data:e,hoverBackgroundColor:i,hoverBorderWidth:0}],labels:n}}}}n.r(t),n.d(t,"ChartService",(function(){return r}));var i=n(245);r.$inject=["Utils"],angular.module("Services").service("Charts",r)},function(e,t,n){(function(e){!function(){"use strict";function t(){var t=this;t.itemClasses=[],t.setProperties=function(){var n=e.get(t.model,"properties.class");t.itemClasses=[],angular.isDefinedAndFilled(n)&&angular.isString(n)&&(t.itemClasses=n.replace(/\s+/g,"").split(","))},t.updateProperties=function(){var n=e.get(t.model,"properties",{});n.class=(t.itemClasses||[]).join(", "),angular.isFunction(t.ngChange)&&t.ngChange()}}angular.module("Directives").directive("lsClassSelector",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{availableChoices:"=lsAvailableChoices",disabled:"=?ngDisabled",help:"@?lsHelp",label:"@?lsLabel",model:"=lsModel",ngChange:"&?lsChange"},templateUrl:"/client/common/modules/class-selector/views/class-selector.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t){function n(){var e=Math.abs((r.image||r.icon||r.text||"").hashCode());return r.colors[e%r.colors.length]||r.colors[0]}var r=this;r.colors=r.colors||t.COLORS_WIDGET,r.colors=e.without(r.colors,"transparent"),r.color=r.color||n(),r.allowCustomColor||e.includes(r.colors,r.color)||(r.color=n()),r.maxLength=angular.isUndefined(r.maxLength)?1:r.maxLength,r.size=r.size||"m",r.type=r.type||"round"}t.$inject=["ConfigTheme"],angular.module("Directives").directive("lsColorBubble",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{allowCustomColor:"<?lsAllowCustomColor",color:"<?lsColor",colors:"<?lsColors",icon:"@?lsIcon",maxLength:"<?lsMaxLength",size:"@?lsSize",text:"@?lsText",type:"@?lsType"},templateUrl:"/client/common/modules/color-bubble/views/color-bubble.html",transclude:!0}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i){var a=this,o=["primary","accent"];a.isInvalidColor=!1,a.Style=n,a.addColor=function(){return angular.isDefinedAndFilled(a.newColor)&&6===a.newColor.length&&"#"!==a.newColor.charAt(0)&&(a.newColor="#"+a.newColor),i.isHexadecimal(a.newColor)?e.includes(a.colors,a.newColor)?(a.isInvalidColor=!0,void t.error(r.translate("ERROR_COLOR_ALREADY_EXISTS"))):(a.colors.unshift(a.newColor),a.isInvalidColor=!1,void(a.newColor=void 0)):(a.isInvalidColor=!0,void t.error(r.translate("ERROR_COLOR_BAD_FORMAT")))},a.defineAs=function(t,r){if(e.includes(o,r)){n.getCurrent("global").properties=n.getCurrent("global").properties||{};var i=n.getCurrent("global").properties;angular.forEach(o,(function(e){i[e]===t&&(i[e]=void 0)})),i[r]=t}},a.removeColor=function(t){a.colors=e.without(a.colors,t)},!angular.isUndefinedOrEmpty(a.colors)&&angular.isArray(a.colors)?a.colors=e.uniq(a.colors.filter((function(e){return"transparent"===e||i.isHexadecimal(e)}))):a.colors=[]}t.$inject=["LxNotificationService","Style","Translation","Utils"],angular.module("Directives").directive("lsColorInjector",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{colors:"=lsColors"},templateUrl:"/client/common/modules/color-injector/views/color-injector.html"}}))}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t){var n=this;n.Style=t,n.onChange=function(){n.ngChange()},n.colors=n.colors||angular.fastCopy(e.uniq(t.getCurrent("global").properties.colors)),e.includes(n.colors,"transparent")||n.colors.unshift("transparent"),n.ngChange=n.ngChange||angular.noop,n.allowClear=!!angular.isUndefined(n.allowClear)||n.allowClear,n.allowTransparent=!!angular.isUndefined(n.allowTransparent)||n.allowTransparent,n.allowTransparent||(n.colors=n.colors.filter((function(e){return angular.isDefinedAndFilled(e)&&"transparent"!==e.toLowerCase()})))}t.$inject=["Style"],angular.module("Directives").directive("lsColorPicker",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{allowClear:"<?lsAllowClear",allowTransparent:"<?lsAllowTransparent",colors:"<?lsColors",disabled:"<?ngDisabled",label:"@?lsLabel",model:"=ngModel",ngChange:"&?"},templateUrl:"/client/common/modules/color-picker/views/color-picker.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/communitytemplate/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CommunityTemplatesFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u,d){function p(t){if(!angular.isUndefinedOrEmpty(t)){var n=["authorDetails","createdAt","endDateInput","key","startDateInput","template","updatedAt","updatedByDetails","userContent","weather"];angular.forEach(t,(function(r,i){e.includes(n,i)||angular.isString(i)&&"$"===i.charAt(0)||angular.isObject(r)&&"widget"===r.type&&!0===r.isGlobal?delete t[i]:(angular.isObject(r)&&angular.isDefinedAndFilled(r)&&("cell"===e.get(r,"type")&&!0===e.get(r,"properties.sticky")&&delete r.properties.plain,p(r)),(angular.isUndefinedOrEmpty(r)||!1===r)&&delete t[i])}))}}function f(e){return g.originalCommunityTemplate=angular.fastCopy(e),e}var g=l.createLumsitesBaseService(i,{autoInit:!1,objectIdentifier:"uid",postGet:function(e){return e.privacy===r.privacyTypes.descriptionOnly&&(e.privacy=r.privacyTypes.readOnly,e.descriptionOnly=!0),f(e)},postSave:f}),m={customerId:void 0,descriptionOnly:!1,instanceId:void 0,name:"",postStatuses:[],postTypes:a.DEFAULT_POST_TYPES,privacy:r.privacyTypes.restricted,tagsDetails:[],templates:[],uid:void 0};return g.defaultParams={},g.originalCommunityTemplate=void 0,g.checkName=function(t){return!!angular.isUndefinedOrEmpty(e.get(t,"name"))||!t.name.$pristine&&t.name.$invalid},g.checkCommunityTemplate=function(){var e=g.getCurrent();return!angular.isUndefinedOrEmpty(e)&&(!angular.isUndefinedOrEmpty(e.name)||(u.error(d.translate("ERROR_NAME_MANDATORY")),!1))},g.createNew=function(){g.setCurrent(angular.fastCopy(m));var e=g.getCurrent();e.customerId=s.getCustomerId(),e.instanceId=c.getCurrentInstanceId()},g.hasChanges=function(){var e=g.getCurrent(),r=angular.fastCopy(e,void 0,!0);if(angular.isDefinedAndFilled(r)){p(r);var i=angular.fastCopy(g.originalCommunityTemplate,void 0,!0);p(i);var a=angular.equals(i,r);return!a&&t.search().debug&&(console.group("Community template changes"),n.debug("Original community template:",i,g.originalCommunityTemplate),n.debug("Current community template:",r,e),console.groupEnd()),!a}return!1},g.isEditable=function(e){return e=e||g.getCurrent(),angular.isDefinedAndFilled(e)&&e.instanceId===c.getCurrentInstanceId()},g.isEditableForContent=function(e,t){return t=t||g.getCurrent(),angular.isDefinedAndFilled(e)&&("template"!==e.type||"create"===o.getAction()||"template"===e.type&&(angular.isUndefinedOrEmpty(t)||g.isEditable(t)))},g.init=function(){g.defaultParams={instanceId:c.getCurrentInstanceId()}},g}t.$inject=["$location","$log","Community","CommunityTemplatesFactory","CommunityWizardConfiguration","Content","Customer","Instance","LumsitesBaseService","LxNotificationService","Translation"],angular.module("Services").service("CommunityTemplates",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v,y,b,C,S,_,P,N,R,j,k,F,U,M,x,$,B,W,G,Y){function H(){return _.hasFeature("advanced_community")||(fe.privacy=void 0),ve.adminSelectionType===ve.selectionTypes.user?fe.editors=[]:ve.adminSelectionType===ve.selectionTypes.feed&&(fe.adminKeys=[]),ve.showOptions.useChat||(fe.hasChat=!1,ve.chatUserSpace=void 0,fe.chatUserSpace=void 0,ve.chatProvider=void 0,fe.chatProvider=void 0),fe.showOptions.calendar||(fe.createCalendar=!1,fe.calendarId=""),fe.showOptions.media?(fe.createDrive=ve.driveType===ve.driveTypeChoices.createDrive,fe.createTeamDrive=ve.driveType===ve.driveTypeChoices.createTeamDrive,(fe.createDrive||fe.createTeamDrive)&&ve.clearSelectedDriveFolder()):(fe.createDrive=!1,fe.createTeamDrive=!1,ve.clearSelectedDriveFolder()),delete fe.showOptions,h()(fe.postTypes,u.availablePostTypes.IDEA.value)||angular.isUndefined(fe.postStatuses)||delete fe.postStatuses,delete fe.tags,fe}function K(e){var t=u.getCurrent(x.getListKey());fe.calendarId="",t.calendarId="",fe.createCalendar=!!e&&fe.createCalendar,t.createCalendar=!!e&&t.createCalendar,fe.hasCalendarId=!1,t.hasCalendarId=!1,ve.calendarId=""}function V(e){var t=angular.fastCopy(e.editors||[]);return angular.forEach(e.publishers,(function(e){h()(t,e)||t.push(e)})),t}function z(e){var t=angular.fastCopy(e.adminsDetails||[]),n=T()(t,"id");return angular.forEach(e.usersDetails,(function(e){h()(n,e.id)||t.push(e)})),t}function q(e){var t=z(e),n=T()(he,"id");return f()(t,(function(e){return!h()(n,e.id)}))}function X(e){var t=V(e);return f()(t,(function(e){return!h()(ye,e)}))}function Q(e){var t=z(e),n=T()(t,"id");return f()(he,(function(e){return!h()(n,e.id)}))}function Z(e){var t=V(e);return f()(ye,(function(e){return!h()(t,e)}))}function J(e){return O()(ve.availableCalendars,{id:e})}function ee(){if(_.hasFeature("advanced_community")){ve.availableCalendars.length=0,ve.isCalendarListLoading=!0;var e={maxResults:50};angular.isDefinedAndFilled(ve.calendarSearchText)&&(e.query=ve.calendarSearchText),o.filterize(e,(function(e){var t;angular.isArray(e)&&(t=ve.availableCalendars).push.apply(t,l()(e));ve.isCalendarListLoading=!1}))}}function te(e){var t=C.getMediaContentByLang(e,!0);return function(e){var t=C.getMediaContentByLang(e,!0);return angular.isDefinedAndFilled(m()(t,"title"))}(e)?m()(t,"title"):m()(t,"name")}function ne(e){return e=e||fe,e.privacy!==u.privacyTypes.open}function re(e){var t=ve.Community.privacyTypes.open;return me!==t&&e.privacy===t||me===t&&e.privacy!==t}function ie(){_.hasFeature("advanced_community")&&(ve.availableChatProviders.length=0,c.listProviders().then((function(e){angular.isDefinedAndFilled(e,"providers")&&angular.isArray(e.providers)&&angular.forEach(e.providers,(function(e){angular.isDefinedAndFilled(e,"name")&&ve.availableChatProviders.push({id:e.name,name:Object(D.b)(e.name)})}))}),Y.displayServerError)),angular.isDefinedAndFilled(m()(fe,"chat"))&&angular.isDefinedAndFilled(m()(fe.chat,"chatProvider"))&&(ve.chatProvider=fe.chat.chatProvider)}function ae(){_.hasFeature("advanced_community")&&angular.isDefinedAndFilled(fe,"chat")&&angular.isDefinedAndFilled(fe.chat,"chatProvider")&&(ve.availableChatUserSpaces.length=0,c.listUserSpaces({maxResults:30,provider:fe.chat.chatProvider}).then((function(e){angular.isDefinedAndFilled(e,"page")?ve.chatUserSpacePage=e.page:ve.chatUserSpacePage=1,angular.isDefinedAndFilled(e,"more")?ve.chatUserSpaceHasMore=e.more:ve.chatUserSpaceHasMore=!1,angular.isDefinedAndFilled(e,"cursor")?ve.chatUserSpaceCursor=e.cursor:ve.chatUserSpaceCursor=void 0,angular.isDefinedAndFilled(e,"items")&&angular.isArray(e.items)&&angular.forEach(e.items,(function(e){angular.isDefinedAndFilled(e,"name")&&ve.availableChatUserSpaces.push(e)}))}),Y.displayServerError)),angular.isDefinedAndFilled(m()(fe,"chat"))&&angular.isDefinedAndFilled(m()(fe.chat,"chatId"))&&(ve.chatUserSpace=fe.chat.chatId)}function oe(){var e;angular.isDefinedAndFilled(m()(fe,"chat"))&&angular.isDefinedAndFilled(m()(fe.chat,"chanId"))?(ve.chatChannelMode=L.a.SELECT.id,e=fe.chat.chanId,c.getChannelById(ve.chatProvider,ve.chatUserSpace,e).then((function(e){e&&e.channel&&e.channel.name&&(ve.chatChannelName=e.channel.name,ve.chatChannelNameValid=!0,ve.chatChannelNameError=void 0)}))):(ve.chatChannelMode=L.a.CREATE.id,ve.chatChannelName=void 0,ve.chatChannelNameValid=!1,ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY")}function se(){ve.exceptList.publishers=[],ve.restrictEnableFollowList=void 0,ne()&&(ve.exceptList.publishers=P.FEED_ALL_AND_PUBLIC,ve.restrictEnableFollowList=fe.publishers||[])}function ce(e){return!angular.isUndefinedOrEmpty(e)&&angular.isDefinedAndFilled(E()(P.FEED_ALL_AND_PUBLIC,e))}function le(){var e=ve.showOptions.calendar||ve.showOptions.media;(ne()||e)&&ce(I()(fe.publishers,fe.editors))&&(fe.publishers=A()(fe.publishers,P.ALL.id,P.PUBLIC.id),fe.editors=A()(fe.editors,P.ALL.id,P.PUBLIC.id))}function ue(){var e=u.getCurrent(x.getListKey())||{};e.privacy===u.privacyTypes.readOnly&&e.descriptionOnly?(e.privacy=u.privacyTypes.descriptionOnly,delete e.descriptionOnly):e.privacy===u.privacyTypes.descriptionOnly&&(e.privacy=u.privacyTypes.readOnly,e.descriptionOnly=!0)}function de(){ve.chatChannelTimeout&&(clearTimeout(ve.chatChannelTimeout),ve.chatChannelTimeout=void 0)}function pe(e){if(!ve.chatChannelName)return ve.chatChannelNameValid=!1,void(ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY");ve.chatChannelNameValid=void 0,ve.chatChannelNameError=void 0,de(),ve.chatChannelTimeout=setTimeout((function(){ve.chatChannelTimeout=void 0,ve.chatChannelMode===L.a.SELECT.id?Oe(ve.chatChannelName):Ce(ve.chatChannelName)}),e)}var fe,ge,me,ve=n,he=[],ye=[];ve.ALLOWED_PROVIDERS=[M.PROVIDERS.microsoft,M.PROVIDERS.google],ve.FOLDER_PICKER_ID="community-folder-picker",ve.allowAdvancedMode=!1,ve.allowGoogleOptions=!1,ve.allowMicrosoftOptions=!1,ve.allowEveryOneButMicrosoft=!1,ve.availableCalendars=[],ve.calendarSearchText="",ve.calendarId=void 0,ve.driveType=void 0,ve.driveTypeChoices={createDrive:"create-drive",createTeamDrive:"create-team-drive",selectDrive:"select-drive"},ve.availableChatProviders=[],ve.chatProvider=void 0,ve.availableChatUserSpaces=[],ve.chatUserSpaceHasMore=!1,ve.chatUserSpaceCursor=void 0,ve.chatUserSpacePage=1,ve.userSpacesMoreLoading=!1,ve.chatUserSpace=void 0,ve.chatChannelModes=L.a,ve.chatChannelMode=void 0,ve.chatChannelName=void 0,ve.chatChannelNameValid=void 0,ve.chatChannelNameError=void 0,ve.chatChannelNameChecking=!1,ve.chatChannelTimeout=void 0,ve.exceptList={editors:P.FEED_ALL_AND_PUBLIC,publishers:[]},ve.isAdvancedModeDisplayed=!1,ve.isCalendarListLoading=!1,ve.isOneDriveCommunity=!1,ve.maxUsersToDisplay=5,ve.otherCalendar={id:Object(w.b)(),summary:$.translate("FRONT.CALENDAR.OTHER_CALENDAR")},ve.subscribedFeedKeys=[],ve.selectionTypes={feed:"feed-selector",user:"user-picker"},ve.thumbnailUploaderId="community-image-uploader",ve.WIDGET_TYPES=j.WIDGET_TYPES,ve.showOptions={calendar:!1,dashboard:!1,media:!1,post:!1,useChat:!1},ve.isNew=!1,ve.Calendar=o,ve.Community=u,ve.CommunityForm=p,ve.CommunityRequest=g,ve.CommunityWizardConfiguration=y,ve.Config=b,ve.DrivePicker=S,ve.Features=_,ve.Feed=P,ve.FormValidation=N,ve.Instance=k,ve.ModuleAdmin=x,ve.Translation=$,ve.User=W,ve.Utils=Y,ve.contains=h.a,ve.Chat=c;var Ee=d()(ee,300),be=function(){return W.isGoogle()||W.isLoggedWithGoogle()},Oe=function(){var e=s()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return ve.chatChannelNameValid=!1,ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY",e.abrupt("return");case 4:n=!1,ve.chatChannelNameError=void 0,fe.chat.chatName=void 0,fe.chat.chanId=void 0,ve.chatChannelNameChecking=!0,c.getChannelByName(ve.chatProvider,ve.chatUserSpace,t).then((function(e){e&&e.channel&&e.channel.id?(n=!0,fe.chat.chanId=e.channel.id,fe.chat.chatName=void 0):ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.NOTFOUND"})).catch((function(e){console.log(e),ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.NOTFOUND"})).finally((function(){ve.chatChannelNameValid=n,ve.chatChannelNameChecking=!1}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=s()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return ve.chatChannelNameValid=!1,ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY",e.abrupt("return");case 4:n=!1,fe.chat.chatName=void 0,fe.chat.chanId=void 0,ve.chatChannelNameChecking=!0,ve.chatChannelNameError=void 0,c.getChannelByName(ve.chatProvider,ve.chatUserSpace,t).then((function(e){e&&e.channel&&e.channel.id?ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.ALREADY.EXISTS":(fe.chat.chatName=t,n=!0)})).catch((function(e){fe.chat.chatName=t,n=!0})).finally((function(){ve.chatChannelNameValid=n,ve.chatChannelNameChecking=!1}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();ve.addGoogleGroup=function(){angular.isDefinedAndFilled(ve.tempGoogleGroup)&&!h()(fe.groups,ve.tempGoogleGroup)&&fe.groups.push(ve.tempGoogleGroup),ve.tempGoogleGroup=void 0},ve.calendarModelToSelection=function(e,t){var n;angular.isDefinedAndFilled(e)&&(t=t||angular.noop,n=e===ve.otherCalendar.id?angular.fastCopy(ve.otherCalendar):J(e),angular.isUndefined(n)&&angular.isDefinedAndFilled(fe.calendarId)&&(n=angular.fastCopy(ve.otherCalendar)),t(n))},ve.calendarSelectionToModel=function(e,t){angular.isDefinedAndFilled(m()(e,"id"))&&(t=t||angular.noop,fe.calendarId=e.id===ve.otherCalendar.id?void 0:e.id,t(e.id))},ve.canEditAdvancedOptions=function(){return angular.isUndefinedOrEmpty(fe.communityType)||"email"===fe.communityType||"google"===fe.communityType&&be()},ve.canEditCalendar=function(){return be()},ve.canEditDrive=function(){return be()&&!ve.showOptions.securedMedia},ve.canEditSecuredMedia=function(){return!ve.showOptions.media&&ve.isNew&&fe.privacy===u.privacyTypes.restricted},ve.canEditChat=function(){return _.hasFeature("slack")||_.hasFeature("workplace")},ve.clearSelectedDriveFolder=function(){var e=u.getCurrent(x.getListKey());fe.driveFolder={},e.driveFolder={},fe.hasDriveFolder=!1,e.hasDriveFolder=!1,ve.driveFolder=void 0},ve.createCalendarToggled=function(){var e=u.getCurrent(x.getListKey());e.createCalendar&&K(!0)},ve.deleteThumbnail=function(){fe.thumbnail=void 0},ve.editTemplate=function(e){u.editTemplate(u.getCurrent().id,e)},ve.editThumbnail=function(){B.openSelection(ve.thumbnailUploaderId)},ve.filterCalendars=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ve.calendarSearchText=e,Ee()},ve.getNextCalendars=function(){var t=e.defer();return o.hasMore()?(ve.isCalendarListLoading=!0,o.nextPage((function(e){if(angular.isArray(e)){var n=f()(e,(function(e){var t=e.id;return!O()(ve.availableCalendars,{id:t})}));t.resolve(n)}ve.isCalendarListLoading=!1}),(function(){t.resolve([]),ve.isCalendarListLoading=!1})),t.promise):(t.resolve([]),t.promise)},ve.getTooltipLabel=function(){return fe.privacy===u.privacyTypes.open?"ADMIN.COMMUNITY.SECURE_STORAGE.TOOLTIP_OPEN_COMMUNITY":fe.privacy!==u.privacyTypes.restricted||ve.isNew?fe.privacy===u.privacyTypes.restricted&&ve.isNew&&ve.showOptions.media?"ADMIN.COMMUNITY.SECURE_STORAGE.TOOLTIP":void 0:"ADMIN.COMMUNITY.SECURE_STORAGE.TOOLTIP_EDITION_MODE"},ve.getTooltipLabelForVisibilityOptions=function(){if(ve.showOptions.securedMedia)return ve.isNew?"ADMIN.COMMUNITY.SECURE_STORAGE.TOOLTIP_FOR_GOOGLE_VISIBILITY_OPTIONS_DURING_CREATION":"ADMIN.COMMUNITY.SECURE_STORAGE.VISIBILITY_OPTIONS_LABEL_DURING_EDITION"},ve.handleTagzChange=function(e){angular.isDefined(e)&&(ve.tagz=l()(e))},ve.hasMediaSecuredFeature=function(){return ve.hasSecurityAtCommunityLevelFeature()||!ve.isNew&&ve.showOptions.securedMedia},ve.hasSecurityAtCommunityLevelFeature=function(){return ve.Features.hasFeature("security-at-community-level")},ve.informationStepValidator=function(){return!ne()||!ce(ve.subscribedFeedKeys)||$.translate("FRONT.COMMUNITY.ERROR_ALL_PUBLIC_FEED")},ve.initFeedGroups=function(){se(),le()},ve.isCompleteMode=function(){return p.getDisplayMode(x.getListKey())===p.DISPLAY_MODE.complete},ve.isGoogleUser=be,ve.openMediaPicker=function(){Y.waitForAndExecute("#".concat(ve.FOLDER_PICKER_ID),i)},ve.openUserPicker=function(e){angular.isUndefinedOrEmpty(e)||Y.waitForAndExecute("#".concat(e),G)},ve.optionsStepValidator=function(){return angular.isArray(fe.postTypes)&&0!==fe.postTypes.length?!ve.showOptions.useChat||fe.chat.chatProvider&&fe.chat.chatId&&ve.chatChannelNameValid?(le(),!0):$.translate("FRONT.COMMUNITY.CHAT_OPTIONS_NOT_VALID"):$.translate("FRONT.COMMUNITY.POST_TYPES_EMPTY")},ve.permissionsStepValidator=function(){var e=ve.adminSelectionType===ve.selectionTypes.feed;return e&&angular.isUndefinedOrEmpty(fe.editors)?$.translate("FRONT.COMMUNITY.ERROR_EDITOR_FEED"):!ne()||!ce(I()(fe.publishers,fe.editors))||$.translate("FRONT.COMMUNITY.ERROR_ALL_PUBLIC_FEED")},ve.removeGoogleGroup=function(e){angular.isUndefinedOrEmpty(e)||(fe.groups=A()(fe.groups,e))},ve.save=function(){return e((function(e,n){var i,a,o=u.getCurrent(x.getListKey()),s=o.subscribedFeedKeys||[];angular.isDefinedAndFilled(ve.subscribedFeedKeys)&&(s.push.apply(s,l()(ve.subscribedFeedKeys)),Y.equals(s,o.subscribedFeedKeys)||(o.subscribedFeedKeys=s)),i=u.getCurrent(x.getListKey()),a=T()(u.availableViews,"id"),angular.isUndefinedOrEmpty(i.templates)&&(i.templates=[]),angular.forEach(a,(function(e){var t=O()(i.templates,{functionalInnerId:e});if(!angular.isDefinedAndFilled(t)){var n=v.getDefaultPageTemplate(e);n.functionalInnerId=e,i.templates.push(n)}})),ue();var c=angular.fastCopy(fe.adminsDetails),d=angular.fastCopy(fe.usersDetails);fe.adminsDetails=[],fe.usersDetails=[],fe.showOptions=ve.showOptions,fe.tagz=ve.tagz,p.saveContent((function(n){if(ve.activeTabIndex=0,x.updateList(n),U.success($.translate("ADMIN.COMMUNITIES.SAVED")),F.close(ve.dialogId),function(e){var t=X(e),n=Z(e);return u.isOutlookCommunity(e)&&(ge!==e.calendarId||re(e)||angular.isDefinedAndFilled(q(e))||angular.isDefinedAndFilled(Q(e))||angular.isDefinedAndFilled(t)||angular.isDefinedAndFilled(n))}(n)){var r=q(n),i=Q(n),a=X(n),o=Z(n);(ge!==n.calendarId||re(n))&&(r=z(n),a=V(n),i=[],o=[]),F.open(ve.dialogIdMsShare,{addedGroupIds:a,addedUsers:r,calendar:J(n.calendarId)||{summary:$.translate(n.title)},privacy:re(n)?n.privacy:void 0,removedGroupIds:o,removedUsers:i})}t.$broadcast("admin-community-save-success",n.id),ve.subscribedFeedKeys=[],e()}),(function(e){angular.isDefinedAndFilled(s)&&angular.isDefinedAndFilled(ve.subscribedFeedKeys)&&(s.splice(s.length-ve.subscribedFeedKeys.length,ve.subscribedFeedKeys.length),Y.equals(s,o.subscribedFeedKeys)||(o.subscribedFeedKeys=s)),r((function(){angular.isDefinedAndFilled(ve.form.moduleCommunity)&&N.setFormDirty(ve.form.moduleCommunity)})),n(Y.getServerError(e))}),x.getListKey()),r((function(){fe.adminsDetails=c,fe.usersDetails=d,ue()}))}))},ve.setDashboard=function(e){e&&(ve.showOptions.dashboard=e),fe.properties.hasDashboard=ve.showOptions.dashboard},ve.setChat=function(){var e,t;fe.useChat=ve.showOptions.useChat,fe.chat={chanId:void 0,chatName:void 0,chatId:void 0,chatProvider:void 0},e=!0,t=u.getCurrent(x.getListKey()),fe.chatProvider=void 0,t.chatProvider=void 0,fe.useChat=!!e&&fe.useChat,t.useChat=!!e&&t.useChat,fe.hasChat=!1,t.hasChat=!1,ve.chatProvider=void 0,ve.chatUserSpace=void 0,ve.chatChannelName=void 0,ve.chatChannelNameValid=void 0,ve.chatChannelNameError=void 0,ie()},ve.setMediaSecured=function(){ve.hasSecurityAtCommunityLevelFeature()&&ve.showOptions.securedMedia?U.confirm($.translate("ADMIN.COMMUNITY.SECURE_STORAGE.MODAL.TITLE"),$.translate("ADMIN.COMMUNITY.SECURE_STORAGE.MODAL.DESCRIPTION"),{cancel:$.translate("CANCEL"),ok:$.translate("ADMIN.COMMUNITY.SECURE_STORAGE.MODAL.BTN_ENABLE")},(function(e){ve.showOptions.securedMedia=!!e,fe.securedRepository=!!e,e&&(ve.showOptions.media=!1,ve.toggleGoogleFeature("createDrive"),fe.privacy=u.privacyTypes.restricted)})):fe.securedRepository=!1},ve.setThumbnail=function(e){fe.thumbnail=e.blobKey},ve.setUserRadioButtons=function(){ve.adminSelectionType=angular.isDefinedAndFilled(fe.editors)?ve.selectionTypes.feed:ve.selectionTypes.user},ve.toggleGoogleFeature=function(e){if(fe[e]=!fe[e],ve.allowAdvancedMode=!ve.isOneDriveCommunity&&(fe.createDrive||fe.createCalendar),"createCalendar"===e)ve.showOptions.calendar?ee():K();else if("createDrive"===e&&!ve.showOptions.media){ve.clearSelectedDriveFolder();var t=u.getCurrent(x.getListKey());fe.createDrive=!1,t.createDrive=!1,fe.createTeamDrive=!1,t.createTeamDrive=!1}se()},ve.chatProviderModelToSelection=function(e,t){if(angular.isDefinedAndFilled(e)){t=t||angular.noop;var n=O()(ve.availableChatProviders,{id:e});t(n)}},ve.chatProviderSelectionToModel=function(e,t){angular.isDefinedAndFilled(e)&&(t=t||angular.noop,fe.chatProvider=e.id,t(e.id))},ve.chatProviderChange=function(){fe.chat={chanId:void 0,chatName:void 0,chatId:void 0,chatProvider:ve.chatProvider},ve.chatUserSpace=void 0,ve.chatChannelName=void 0,ve.chatChannelNameValid=!1,ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY",fe.chatProvider=ve.chatProvider,ae()},ve.chatUserSpaceModelToSelection=function(e,t){if(angular.isDefinedAndFilled(e)){t=t||angular.noop;var n=O()(ve.availableChatUserSpaces,{id:e});t(n)}},ve.chatUserSpaceSelectionToModel=function(e,t){angular.isDefinedAndFilled(m()(e,"id"))?(t=t||angular.noop,fe.chatUserSpace=e.id,t(e.id)):fe.chatUserSpace=void 0},ve.chatUserSpaceChange=function(){angular.isDefinedAndFilled(ve.chatUserSpace)?fe.chat={chatName:void 0,chanId:void 0,chatId:ve.chatUserSpace,chatProvider:ve.chatProvider}:fe.chat={chatName:void 0,chanId:void 0,chatId:void 0,chatProvider:ve.chatProvider}},ve.getNextChatUserSpacesList=function(){var t=e.defer();return ve.chatUserSpaceHasMore?angular.isDefinedAndFilled(fe,"chat")&&angular.isDefinedAndFilled(fe.chat,"chatProvider")?(ve.userSpacesMoreLoading=!0,c.listUserSpaces({maxResults:30,page:ve.chatUserSpacePage+1,provider:fe.chat.chatProvider}).then((function(e){if(angular.isDefinedAndFilled(e,"page")?ve.chatUserSpacePage=e.page:ve.chatUserSpacePage=1,angular.isDefinedAndFilled(e,"more")?ve.chatUserSpaceHasMore=e.more:ve.chatUserSpaceHasMore=!1,angular.isDefinedAndFilled(e,"cursor")?ve.chatUserSpaceCursor=e.cursor:ve.chatUserSpaceCursor=void 0,!angular.isDefinedAndFilled(e,"items"))return t.promise;t.resolve(m()(e,"items",[]))}),Y.displayServerError).finally((function(){ve.userSpacesMoreLoading=!1})),t.promise):t.promise:(t.resolve([]),t.promise)},ve.chatChannelModeChange=function(){if(!ve.chatChannelName)return ve.chatChannelNameValid=!1,void(ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY");pe(0)},ve.chatChannelNameChange=function(){if(!ve.chatChannelName)return ve.chatChannelNameValid=!1,void(ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY");de();var e=Object(D.a)(ve.chatProvider,ve.chatChannelName);e?pe(1500):(ve.chatChannelNameValid=!1,ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.NAME.INVALID")},ve.chatChannelNameLeaved=function(){if(de(),!ve.chatChannelName)return ve.chatChannelNameValid=!1,void(ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.EMPTY");Object(D.a)(ve.chatProvider,ve.chatChannelName)?pe(0):(ve.chatChannelNameValid=!1,ve.chatChannelNameError="ADMIN.COMMUNITY.CHAT.CHANNEL.NAME.INVALID")},ve.chatChannelNameIsValid=function(){return!0===ve.chatChannelNameValid},ve.chatChannelNameHasError=function(){return!1===ve.chatChannelNameValid},ve.registerWatchers=function(e){e.$on("lx-dialog__close-start",(function(e,t){t===ve.dialogId&&(fe=void 0,ve.calendarId=void 0,ve.driveFolder=void 0,ve.chatProvider=void 0,ve.chatUserSpace=void 0,ve.chatChannelName=void 0,ve.chatChannelNameValid=!1,ve.chatChannelNameError=void 0,ue())})),e.$on("lx-dialog__close-end",(function(e,t){t===ve.dialogId&&(ve.activeTabIndex=0,ve.subscribedFeedKeys=[])})),e.$on("user-picker__close-end",(function(e,t,n){var r=u.getCurrent(x.getListKey());angular.isUndefined(n)||(t===ve.userPickerId?r.usersDetails=n.slice(0,ve.maxUsersToDisplay):t===ve.adminUserPickerId&&(r.adminsDetails=n.slice(0,ve.maxUsersToDisplay)))})),e.$on("abstract-picker__close-end",(function(e,t){if(t===ve.FOLDER_PICKER_ID&&!angular.isUndefinedOrEmpty(ve.driveFolder)){var n=ve.driveFolder.docPath,r="GOOGLE_TEAMDRIVE"===ve.driveFolder.properties.type?"drive#teamDrive":"drive#folder";fe.driveFolder={docPath:n,kind:r,name:te(ve.driveFolder)}}})),e.$on("$destroy",u.unregisterPreSaveMethod.bind(this,H))},ve.init=function(){var e=x.getListKey();fe=u.getCurrent(e),fe.properties=fe.properties||{},he=z(fe),ye=V(fe),ge=fe.calendarId,me=fe.privacy,ve.calendarId=fe.calendarId,ve.tagz=fe.tagz||[],angular.isDefinedAndFilled(m()(fe,"chat"))&&(ve.chatProvider=fe.chat.chatProvider,ve.chatUserSpace=fe.chat.chatId),ve.showOptions.dashboard=Boolean(fe.properties.hasDashboard),ve.hasDashboardInitially=ve.showOptions.dashboard,ve.showOptions.calendar=angular.isDefinedAndFilled(fe.calendarId),ve.showOptions.useChat=Boolean(fe.useChat),ve.isNew=!fe.uid,angular.isUndefined(fe.postTypes)&&(fe.postTypes=u.defaultPostTypes),fe.publishers=A()(fe.publishers,fe.communityFeedKey),fe.properties=fe.properties||{},fe.properties.categories=fe.properties.categories||[],fe.groups=fe.groups||[],angular.isArray(fe.tagsDetails)||(fe.tagsDetails=[]),_.hasFeature("advanced_community")&&(fe.privacy=fe.privacy||u.privacyTypes.restricted,ue()),se(),ve.isOneDriveCommunity=u.isOneDriveCommunity(fe),ve.allowAdvancedMode=_.hasFeature("advanced_community")&&(fe.hasCalendarId||fe.hasDriveFolder)&&!ve.isOneDriveCommunity,ve.isAdvancedModeDisplayed=angular.isDefinedAndFilled(fe.groups),ve.adminUserPickerId="module-community-admin-user-picker-".concat(fe.id),ve.listKeyCommunityRequest="community-requests-".concat(fe.id),ve.userPickerId="module-community-user-picker-".concat(fe.id),_.hasFeature("advanced_community")&&u.isReadOnly(fe)&&g.filterize({communityId:fe.id,maxResults:10,requestStatus:g.STATUS_TYPES.PENDING},void 0,void 0,ve.listKeyCommunityRequest),ve.showOptions.calendar&&(ee(),function(){if(angular.isDefinedAndFilled(m()(fe,"calendarId"))){var e=J(fe.calendarId);ve.calendarId=angular.isDefinedAndFilled(e)?fe.calendarId:ve.otherCalendar.id}}()),function(){if(_.hasFeature("advanced_community")){var e=W.getConnected();ve.allowGoogleOptions=W.isGoogle(e)||W.isLoggedWithGoogle(e),ve.allowMicrosoftOptions=W.isMicrosoft(e)||W.isLoggedWithMicrosoft(e),ve.allowEveryOneButMicrosoft=!W.isMicrosoft(e),ve.showOptions.media=fe.hasDriveFolder,ve.showOptions.securedMedia=fe.securedRepository,ve.showOptions.calendar=fe.hasCalendarId,ve.showOptions.calendar&&(fe.createCalendar=!1),fe.hasDriveFolder?(fe.createDrive=!1,fe.createTeamDrive=!1,ve.driveType=ve.driveTypeChoices.selectDrive):ve.driveType=ve.driveTypeChoices.createDrive}else ve.allowGoogleOptions=!1,ve.allowMicrosoftOptions=!1,ve.showOptions.securedMedia=!1,ve.showOptions.media=!1,ve.showOptions.calendar=!1}(),_.hasFeature("advanced_community")&&fe.hasChat?(ve.showOptions.useChat=!0,fe.useChat=ve.showOptions.useChat,angular.isDefinedAndFilled(fe.chat)&&(ie(),ae(),oe())):(ve.showOptions.useChat=!1,ve.chatProvider=void 0,ve.chatUserSpace=void 0,ve.chatChannelMode=L.a.CREATE.id,ve.chatChannelName=void 0,ve.chatChannelNameValid=!1,ve.chatChannelNameError=void 0),ve.setUserRadioButtons(),u.registerPreSaveMethod(H)}}n.r(t),n.d(t,"CommunityBuilderController",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(19),l=n.n(c),u=n(71),d=n.n(u),p=n(75),f=n.n(p),g=n(4),m=n.n(g),v=n(17),h=n.n(v),y=n(157),E=n.n(y),b=n(21),O=n.n(b),C=n(28),T=n.n(C),S=n(167),I=n.n(S),_=n(106),A=n.n(_),w=n(35),D=n(168),L=n(235);r.$inject=["$q","$rootScope","$scope","$timeout","AbstractPicker","Calendar","Chat","Community","CommunityForm","CommunityRequest","CommunityTemplate","CommunityWizardConfiguration","Config","Document","DrivePicker","Features","Feed","FormValidation","IdentityProvidersConstant","InitialSettings","Instance","LxDialogService","LxNotificationService","MediaConstant","ModuleAdmin","Translation","UploaderAction","User","UserPicker","Utils"],angular.module("Controllers").controller("CommunityBuilderController",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o){var s=this;e("CommunityBuilderController",{$scope:s}),s.dialogId=i.dialogKeys.communityWizard,s.dialogIdMsShare=i.dialogKeys.communityMsShare,s.steps={type:"type",options:"options",permissions:"rights",information:"general"},s.communityTypes=r.COMMUNITY_TYPES,s.currentType=void 0,s.nextStepReady=Boolean(s.currentType),s.changePresetOption=function(e){if(e!==s.currentType){angular.forEach(r.OPTION_ELEMENTS,(function(e){s.showOptions[e]=!1})),s.currentType=e;var t=angular.fastCopy(r.OPTION_PRESET[s.currentType]);n.getCurrent(i.getListKey()).postTypes=t.postTypes,angular.forEach(t.options,(function(e){if(angular.isDefined(s.showOptions[e])){var t="set".concat(a()(e));s.hasOwnProperty(t)&&angular.isFunction(s[t])?s[t](!0):(s.showOptions[e]=!0,"media"===e&&s.toggleGoogleFeature("createDrive"))}})),s.nextStepReady=Boolean(s.currentType)}},s.initChild=function(){o.isGoogle()||o.isMicrosoft()||delete s.communityTypes.collaborate;var e=n.getCurrent("communities-admin");angular.isUndefinedOrEmpty(e)||(angular.isDefinedAndFilled(e.fromTemplate)&&(s.nextStepReady=!0,s.currentType="template"),s.init(),s.registerWatchers(t))},s.stepValidator=function(e){return e===s.steps.options?s.optionsStepValidator():e===s.steps.permissions?s.permissionsStepValidator():e!==s.steps.information||s.informationStepValidator()},t.$on("lx-dialog__open-start",(function(e,t){t===s.dialogId&&s.initChild()})),t.$on("lx-dialog__close-end",(function(e,t){t===s.dialogId&&(s.nextStepReady=!1,s.currentType=void 0)}))}n.r(t),n.d(t,"CommunityWizardBuilderController",(function(){return r}));var i=n(257),a=n.n(i);r.$inject=["$controller","$scope","Community","CommunityWizardConfiguration","ModuleAdmin","User"],angular.module("Controllers").controller("CommunityWizardBuilderController",r)},function(e,t){!function(){"use strict";angular.module("Constants").constant("CommunityWizardConfiguration",{COMMUNITY_TYPES:{share:"share",ideas:"ideas",questions:"questions",collaborate:"collaborate"},DEFAULT_POST_TYPES:["EVENT","DEFAULT"],DRIVE_TYPE_CHOICES:{create:"create",createTeam:"createTeam",select:"select"},OPTION_ELEMENTS:{calendar:"calendar",dashboard:"dashboard",securedMedia:"securedMedia",media:"media",post:"post"},OPTION_PRESET:{collaborate:{options:["post","media","calendar"],postTypes:["EVENT","DEFAULT"]},ideas:{options:["dashboard","post"],postTypes:["IDEA"]},questions:{options:["dashboard","post"],postTypes:["QUESTION"]},share:{options:["post"],postTypes:["DEFAULT"]}},POST_TYPES:["IDEA","EVENT","QUESTION","DEFAULT"]})}()},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,m,h){function E(e){return angular.isUndefinedOrEmpty(e)?[]:C()([r.AVAILABLE_CONTENT_TYPES.PAGE,r.AVAILABLE_CONTENT_TYPES.NEWS],e)}function O(e){var t=[r.AVAILABLE_CONTENT_TYPES.PAGE,r.AVAILABLE_CONTENT_TYPES.NEWS,r.AVAILABLE_CONTENT_TYPES.CUSTOM],n=angular.isDefinedAndFilled(C()(e,t));A.filterOptionsVisibility=_()(A.filter,(function(e,t){return!(!n&&"title"!==t)}))}function T(){return I.apply(this,arguments)}function I(){return I=c()(o.a.mark((function e(){var n,a,s,c,u,d,p,g,m,v,y,C;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A.filterActions,a=[],s=S()(A.filter.customContentType,"id"),p=angular.fastCopy(A.filter.instance),angular.isDefined(A.filter.startDate)&&(d=moment(A.filter.startDate).format(D)),angular.isDefined(A.filter.endDate)&&(u=moment(A.filter.endDate).format(D)),angular.isDefinedAndFilled(A.forcedTypes)&&(A.filter.contentType=A.forcedTypes),angular.isDefinedAndFilled(A.forcedCustomContentTypes)&&(s=A.forcedCustomContentTypes),angular.isUndefinedOrEmpty(A.filter.contentType)?(a=w()(A.CONTENT_TYPE_CHOICES,[r.AVAILABLE_CONTENT_TYPES.NEWS,r.AVAILABLE_CONTENT_TYPES.PAGE]),s=[]):b()(A.filter.contentType,r.AVAILABLE_CONTENT_TYPES.CUSTOM)?(a.push(r.AVAILABLE_CONTENT_TYPES.NEWS),a.push(r.AVAILABLE_CONTENT_TYPES.PAGE)):s=[],g=[],angular.forEach(A.filter.metadata,(function(e){angular.isArray(e)&&angular.isDefinedAndFilled(e)&&g.push({metadata:e})})),A.updateCustomContentTypeList(p),O(A.filter.contentType),m=E(s),!b()(n,"COMMUNITY_READ")&&b()(A.filter.contentType,r.AVAILABLE_CONTENT_TYPES.COMMUNITY)&&n.push("COMMUNITY_READ"),angular.isUndefinedOrEmpty(p)&&(p=void 0,c=l.getCurrentInstanceId()),v=angular.isDefinedAndFilled(A.filter.title)?[]:["-publicationDate"],e.next=19,P.filterize({action:n,author:A.filter.author,combinedMetadata:g,currentInstanceId:c,customContentType:s,customContentTypeTags:A.filter.tags,endDate:u,instanceId:p,query:A.filter.title,sortOrder:v,startDate:d,status:[r.CONTENT_STATUS.LIVE.value],type:w()(A.filter.contentType,m,a)},void 0,h.displayServerError,A.LIBRARY_LIST_KEY).$promise;case 19:y=e.sent,A.filterByInputLanguage&&!angular.isUndefinedOrEmpty(y.items)&&(C=y.items.filter((function(e){return f.inputLanguage in e.slug})),i.initList(A.LIBRARY_LIST_KEY,null,C,!1,void 0),t((function(){return i.displayList(A.LIBRARY_LIST_KEY)})));case 21:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}var A=this,D="YYYY-MM-DDT00:00:00.000000",P=angular.isDefined(A.forcedTypes)&&1===A.forcedTypes.length&&g()(A.forcedTypes)===r.AVAILABLE_CONTENT_TYPES.COMMUNITY?n:i;A.CONTENT_TYPE_CHOICES=[r.AVAILABLE_CONTENT_TYPES.COMMUNITY,r.AVAILABLE_CONTENT_TYPES.CUSTOM,r.AVAILABLE_CONTENT_TYPES.CUSTOM_LIST,r.AVAILABLE_CONTENT_TYPES.DIRECTORY,r.AVAILABLE_CONTENT_TYPES.USER_DIRECTORY],A.LIBRARY_LIST_KEY="content-picker",A.SELECTION_LIST_KEY="content-picker-selection-",A.VIEW_MODES={library:"library",organize:"organize"},A.contentTypeMetadata=[],A.customContentTypes={},A.customContentTypesTags={},A.customContentTypesTagsLength=0,A.filter={},A.filterOptionsVisibility={},A.isOpen=!1,A.showFilter=!0,A.tmpList=[],A.viewMode=A.VIEW_MODES.organize,A.Content=P,A.CustomContentType=a,A.Instance=l,A.Metadata=d,A.Translation=f,A.User=m,A.Utils=h;var N=u()(T,500);A.closeFilter=function(){A.showFilter=!1},A.closePicker=function(){s.close(A.pickerId)},A.isSelected=function(e){return A.multi?angular.isDefinedAndFilled(p()(A.tmpList,{id:e.id})):e.id===A.tmpList.id},A.openFilter=function(){A.showFilter=!0},A.submitList=function(){A.multi?"object"===A.kind?A.ngModel=angular.fastCopy(A.tmpList):"id"===A.kind&&(A.ngModel=S()(A.tmpList,"id")):"object"===A.kind?A.ngModel=angular.fastCopy(A.tmpList):"id"===A.kind&&(A.ngModel=A.tmpList.id),t(A.closePicker)},A.switchViewMode=function(e){angular.isDefinedAndFilled(A.VIEW_MODES[e])&&(A.viewMode=e)},A.tagToUuid=function(e,t){angular.isFunction(t)&&angular.isDefinedAndFilled(e.uuid)&&t(e.uuid)},A.toggleDetails=function(e){angular.isUndefinedOrEmpty(e)||(e===A.selectedItem?A.selectedItem=void 0:A.selectedItem=e)},A.toggleSelection=function(e){angular.isUndefinedOrEmpty(e)||(A.multi?A.isSelected(e)?h.reject(A.tmpList,{id:e.id}):A.tmpList.push(e):A.tmpList=e)},A.updateCustomContentTypeList=function(e){var t=!1,n=angular.fastCopy(e),r=l.getSiblings(!0),i=y()(p()(r,(function(e){return angular.isUndefinedOrEmpty(e.parent)})),"id");angular.isDefinedAndFilled(i)&&!b()(e,i)&&(n.push(i),t=!0),a.groupByInstances(n,!1,t,(function(e){A.customContentTypes=e}))},A.updateMetadata=function(){var e;angular.isArray(A.filter.customContentType)&&(A.contentTypeMetadata=(e=S()(A.filter.customContentType,"id"),angular.isUndefinedOrEmpty(e)?{}:d.listByCustomContentTypeIds(e)),a.getTagsForHeaderSelect(A.filter.customContentType,(function(e){A.customContentTypesTags=e||{},A.customContentTypesTagsLength=v()(L()(A.customContentTypesTags)).length})))},A.uuidToTag=function(e,t){if(angular.isFunction(t)&&!angular.isUndefinedOrEmpty([e,A.customContentTypesTags],"some")){var n=p()(v()(L()(A.customContentTypesTags)),{uuid:e});angular.isDefinedAndFilled(n)?t(n):t()}},e.$watch("vm.filter",(function(e,t){e!==t&&N()}),!0),e.$on("content-picker__close-end",(function(e,t){A.pickerId===t&&(A.isOpen=!1,A.init())})),e.$on("content-picker__open-start",(function(e,t){A.pickerId===t&&(A.isOpen=!0,angular.isUndefinedOrEmpty([A.viewMode,A.VIEW_MODES[A.viewMode]],"some")&&(A.viewMode=angular.isDefinedAndFilled(A.ngModel)?A.VIEW_MODES.organize:A.VIEW_MODES.library),A.ngModel=A.ngModel||[],A.tmpList=A.multi?[]:{},angular.isUndefinedOrEmpty(A.ngModel)||(A.multi?P.filterize({ids:"object"===A.kind?S()(A.ngModel,"id"):A.ngModel,lang:f.inputLanguage,queryType:"getContentByIds",status:[r.CONTENT_STATUS.LIVE.value]},(function(e){A.tmpList=e}),h.displayServerError,A.SELECTION_LIST_KEY):"object"===A.kind?P.get(A.ngModel.id,(function(e){A.tmpList=e}),void 0,A.SELECTION_LIST_KEY):"id"===A.kind&&P.get(A.ngModel,(function(e){A.tmpList=e}),void 0,A.SELECTION_LIST_KEY)),T())})),e.$on("instances-siblings-list-updated",(function(){A.updateCustomContentTypeList(A.filter.instance)})),A.init=function(){A.SELECTION_LIST_KEY+=A.pickerId,A.title=A.title||"GLOBAL.CONTENTS",A.filterActions=A.filterActions||["PAGE_READ"],A.selectedItem=void 0,A.tmpList=void 0,A.filter={author:void 0,contentType:[],customContentType:[],endDate:void 0,instance:[l.getCurrentInstanceId()],metadata:[],startDate:void 0,tags:[],title:void 0}},A.init()}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t){t.appendTo("body"),e.$on("$destroy",(function(){t.remove()}))},restrict:"E",scope:{filterActions:"=?lsFilterActions",filterByInputLanguage:"=?lsFilterByInputLanguage",forcedCustomContentTypes:"=lsForcedCustomContentTypes",forcedTypes:"=lsForcedTypes",hideInstanceSelector:"=lsHideInstanceSelector",kind:"@lsKind",multi:"=lsMulti",ngModel:"=",pickerId:"@lsPickerId",title:"@?lsTitle",viewMode:"@lsViewMode"},templateUrl:"/client/common/modules/content-picker/views/content-picker.html"}}n.r(t),n.d(t,"LsContentPickerDirective",(function(){return i}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(71),u=n.n(l),d=n(21),p=n.n(d),f=n(51),g=n.n(f),m=n(260),v=n.n(m),h=n(4),y=n.n(h),E=n(17),b=n.n(E),O=n(157),C=n.n(O),T=n(28),S=n.n(T),I=n(224),_=n.n(I),A=n(167),w=n.n(A),D=n(99),L=n.n(D);r.$inject=["$scope","$timeout","Community","Config","Content","CustomContentType","ContentPicker","Instance","Metadata","Translation","User","Utils"],angular.module("Directives").directive("lsContentPicker",i)},function(e,t){!function(){"use strict";function e(e,t,n){this.close=function(n){angular.isUndefinedOrEmpty(n)||(e.$broadcast("content-picker__close-start",n),angular.element("body").css({overflow:"visible"}),angular.element("#"+n).removeClass("item-picker--is-shown"),t((function(){e.$broadcast("content-picker__close-end",n)}),600))},this.open=function(r){angular.isUndefinedOrEmpty(r)||(n.register(),e.$broadcast("content-picker__open-start",r),angular.element("body").css({overflow:"hidden"}),t((function(){angular.element("#"+r).css("z-index",n.getDepth()).addClass("item-picker--is-shown")})),t((function(){e.$broadcast("content-picker__open-end",r)}),600))}}e.$inject=["$rootScope","$timeout","LxDepthService"],angular.module("Services").service("ContentPicker",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t){function n(t,n){return angular.isDefinedAndFilled(n)&&(angular.isArray(n)&&e.includes(n,t)||n===t)}function r(e,t){return angular.isDefinedAndFilled(e[t.attr])&&e[t.attr]===t.value||angular.isDefinedAndFilled(t.updateElement)}function i(e,t,n,r,i){var a,o="cell"===t?"cells":"components",s=i.removeItems?angular.copy(n[o][r]):e;return angular.isDefinedAndFilled(i.updateElement)&&i.updateElement(s),i.multiple?u[t].push(s):(a=s,function(e,t,n){d={index:n,item:e,parent:t}}(a,n,r)),i.removeItems&&n[o].splice(r,1),a}function a(t,n){var r;if(angular.isDefined(e.get(t,"template.components")))for(var i=0,a=t.template.components.length;i<a&&(r=c.parseRow(t.template.components[i],n,t.template,i),!angular.isDefinedAndFilled(r));i++);return r}function o(e,t,a,o){var s;if(t.updateUserLayout){for(var c,u=0,d=a.components.length;u<d;u++)if(u+1<=d-1&&a.components[u].uuid===e.uuid){c=a.components[u+1].uuid;break}l.push({cellUuid:a.uuid,isHiddenByUser:!(!angular.isDefinedAndFilled(e.properties)||!e.properties.isHiddenByUser)&&e.properties.isHiddenByUser,nextUuid:c,widgetUuid:e.uuid})}else n("widget",t.type)&&r(e,t)&&(s=i(e,"widget",a,o,t));return s}function s(e,t,a,l){var u;if(angular.isDefined(e.components)){if(n("cell",t.type)&&r(e,t)&&(u=i(e,"cell",a,l,t),angular.isDefinedAndFilled(u)))return u;if(angular.isArray(e.components))for(var d=0,p=e.components.length;d<p;d++)if(!angular.isUndefinedOrEmpty(e.components[d]))if(angular.isDefinedAndFilled(e.components[d].type)&&"cell"===e.components[d].type){if(u=s(e.components[d],t,e,d),angular.isDefinedAndFilled(u))break}else if(angular.isDefinedAndFilled(e.components[d].type)&&"row"===e.components[d].type){if(u=c.parseRow(e.components[d],t,e,d),angular.isDefinedAndFilled(u))break}else if(u=o(e.components[d],t,e,d),angular.isDefinedAndFilled(u))break}return u}var c=this,l=[],u={cell:[],row:[],widget:[]},d={};c.applyUserContent=function(t){angular.isUndefinedOrEmpty(e.get(t,"userContent.values"))||t.isCustomizableLayout&&angular.isDefinedAndFilled(t.userContent.values.customLayout)&&angular.forEach(t.userContent.values.customLayout,(function(e){var n=c.getElement(t,"widget","uuid",e.widgetUuid,!0);angular.isDefinedAndFilled(n)&&function(e,t,n){var r=c.getElement(e,"cell","uuid",t.cellUuid);if(angular.isDefined(r)&&angular.isDefined(r.components))if(t.isHiddenByUser&&(n.properties=n.properties||{},n.properties.isHiddenByUser=!0),angular.isUndefinedOrEmpty(t.nextUuid))r.components.push(n);else for(var i=0;i<r.components.length;i++){if(r.components[i].uuid===t.nextUuid){r.components.splice(i,0,n);break}if(i+1===r.components.length){r.components.push(n);break}}}(t,e,n)}))},c.getElementContext=function(e,t,n,r){return d={},a(e,{attr:n,type:t,value:r}),d},c.getElement=function(e,t,n,r,i){return a(e,{attr:n,removeItems:i,type:t,value:r})},c.getElementList=function(e,t,n,r,i){return u={cell:[],row:[],widget:[]},a(e,{attr:n,multiple:!0,removeItems:angular.isDefinedAndFilled(i)&&i,type:t,value:r}),angular.isString(t)?u.widget:u},c.resetUserTemplate=function(n,r,i){angular.isDefinedAndFilled(e.get(n.userContent,"values.customLayout"))&&(delete n.userContent.values.customLayout,t.save({content:n.id,user:r.id,values:n.userContent.values},i))},c.saveUserTemplate=function(e,n,r,i){e.isCustomizableLayout&&(l=[],a(e,{updateUserLayout:!0}),angular.isUndefinedOrEmpty(e.userContent)&&(e.userContent={content:e.id,values:{}}),e.userContent.values.customLayout=l,t.save({content:e.id,user:n.id,values:angular.copy(e.userContent.values)},r,i))},c.parseRow=function(e,t,a,o){var c;if(angular.isDefinedAndFilled(e.cells)){if(n("row",t.type)&&r(e,t)&&(c=i(e,"row",a,o,t),angular.isDefinedAndFilled(c)))return c;for(var l=0,u=e.cells.length;l<u&&(c=s(e.cells[l],t,e,l),!angular.isDefinedAndFilled(c));l++);}return c},c.parseCell=s}t.$inject=["UserContent"],angular.module("Services").service("ContentTemplate",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/customcontenttype/tag/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CustomContentTypeTagFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/customcontenttype/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},getMulti:{isArray:!1,method:"GET",params:{methodKey:"getMulti"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},listInherited:{isArray:!1,method:"GET",params:{methodKey:"list"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/customcontenttype/children/:methodKey"},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("CustomContentTypeFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c,l,u,d){function p(t,n,r){var i={},o=c.instanceKeyToInstanceFromSiblings(t.instance,!0);if(!angular.isArray(t.tags)||angular.isUndefinedOrEmpty(t.tags)||angular.isUndefinedOrEmpty(o))return i;var s=e.includes([a.AVAILABLE_CONTENT_TYPES.PAGE,a.AVAILABLE_CONTENT_TYPES.NEWS],t.functionalInnerId);if((angular.isUndefinedOrEmpty(n)||e.includes(n,o.id)||!s)&&(angular.isUndefinedOrEmpty(r)||angular.isDefinedAndFilled(e.intersection(r,e.map(t.tags,"uuid"))))){var l=u.translate(t.name)+" - "+o.name;i[l]=angular.isDefinedAndFilled(r)?e.filter(t.tags,(function(t){return e.includes(r,t.uuid)})):t.tags}return i}var f=l.createLumsitesBaseService(o,{autoInit:!1,fullListResponse:!0,objectIdentifier:"uid",postList:function(e){return angular.isUndefinedOrEmpty(e)?[]:(angular.forEach(e,(function(e){switch(e.functionalInnerId){case a.AVAILABLE_CONTENT_TYPES.PAGE:e.sortOrder=1;break;case a.AVAILABLE_CONTENT_TYPES.NEWS:e.sortOrder=2;break;default:e.sortOrder=3}})),e.sort((function(e,t){if(e.sortOrder<t.sortOrder)return-1;if(e.sortOrder>t.sortOrder)return 1;var n=u.translate(e.name).toLocaleLowerCase(),r=u.translate(t.name).toLocaleLowerCase();return n.localeCompare(r)})))},postSave:function(t){t.endDateDelta=Number(t.endDateDelta)||0;var n=e.findIndex(m,{uid:t.uid});return-1===n?m.push(t):m[n]=t,t}}),g=r.defer(),m=[];return f.CURRENT_INSTANCE_CCT_LIST_KEY="main",f.MAX_INSTANCE_SIBLINGS=30,f.defaultParams={},f.is={initialized:!1,initializing:!1},f.tagsCallback={},f.customContentTypeToId=function(e,t){if(t=t||angular.noop,!angular.isUndefinedOrEmpty(e))return t(e.id),e.id},f.getFunctionalInnerId=function(t){if(angular.isUndefinedOrEmpty(t))return a.AVAILABLE_CONTENT_TYPES.CUSTOM;var n=t.functionalInnerId,r=[a.AVAILABLE_CONTENT_TYPES.PAGE,a.AVAILABLE_CONTENT_TYPES.NEWS];return angular.isDefinedAndFilled(n)&&e.includes(r,n)?n:a.AVAILABLE_CONTENT_TYPES.CUSTOM},f.getCustomContentTypesTags=function(t){return r((function(n,r){f.getItem(t,(function(t){n(e.get(t,"tags"))}),r,void 0,!1)}))},f.getItem=function(t,n,r,i,a){f.promiseList().then((function(){if(n=n||angular.noop,r=r||angular.noop,a=!!angular.isUndefined(a)||a,angular.isUndefinedOrEmpty(t))r();else{if(f._current=f._current||{},angular.isString(t)&&(t={uid:t}),angular.isDefinedAndFilled(t.uid)&&angular.isDefinedAndFilled(m)){var o=e.find(m,{uid:t.uid});if(angular.isDefinedAndFilled(o))return void(a?f.setItem(o,n,i):n(o))}f.get(t,(function(e){m.push(e),a?f.setItem(e,n,i):n(e)}),r,i)}}))},f.getItems=function(e){return angular.isUndefinedOrEmpty(e)?r.resolve([]):o.getMulti({uids:e}).$promise.then((function(e){return e.items}))},f.getTagByUuid=function(t,n){if(!angular.isUndefinedOrEmpty(n)&&angular.isArray(n)&&!angular.isUndefinedOrEmpty(t))return e.find(n,{uuid:t})},f.getTagsForHeaderSelect=function(e,n,i,a,o,s){!angular.isUndefinedOrEmpty(e)&&angular.isArray(e)?f.promiseList().then((function(){i=i||angular.noop;var c=[],l={},u=[],d=function(e){e.heritable&&c.push(e.uid),l=angular.merge(p(e,a,o),l)};angular.forEach(e,(function(e){if(!angular.isUndefinedOrEmpty(e)){var t=r.defer();u.push(t.promise),angular.isString(e)?f.getItem(e,(function(e){d(e),t.resolve()}),(function(e){i(e),t.resolve()}),s,!1):(d(e),t.resolve())}})),r.all(u).then((function(){if(angular.isUndefinedOrEmpty(c))n(l);else{var e=[];angular.forEach(c,(function(n){var i=r((function(e,i){(function(e,n){if(angular.isUndefinedOrEmpty(e))return r.reject();var i=[];return r((function(r,a){f.getAllPages({instanceIds:angular.isDefinedAndFilled(n)?n.slice(0,f.MAX_INSTANCE_SIBLINGS-1):void 0,parentId:e},(function(e){i=i.concat(e)}),(function(){r(i)}),a,"listInherited-".concat(e,"-").concat((n||[]).join("_"),"-").concat(Object(t.b)()),void 0,!1,"listInherited")}))})(n,a).then((function(t){angular.isUndefinedOrEmpty(t)||angular.forEach(t,(function(e){l=angular.merge(p(e,a,o),l)})),e()})).catch(i)}));e.push(i)})),r.all(e).then((function(){n(l)})).catch(i)}})).catch(i)})):n({})},f.groupByInstances=function(n,r,i,a,o,s){if(angular.isUndefinedOrEmpty(n))a({});else{var l=u.translate("CUSTOM_CONTENT_TYPE_SELECT_HERITABLE"),d=angular.isArray(n)?n.length:0,p=0,g={};a=a||angular.noop;var m=function(){p===d&&(angular.forEach(g,(function(e,t){angular.isUndefinedOrEmpty(e)&&delete g[t]})),a(g))},v=function(t){if(p++,angular.isArray(t)&&!angular.isUndefinedOrEmpty(t)){var n,a=t[0].instance;if(n=angular.isDefinedAndFilled(o)?e.find(o,{id:a}):c.instanceKeyToInstanceFromSiblings(a,!0),angular.isObject(n)&&!angular.isUndefinedOrEmpty(n)){var s=n.name,u=angular.isDefined(g[l])?e.map(g[l],"id"):[];r||i&&!angular.isDefinedAndFilled(n.parent)||(g[s]=[]),angular.forEach(t,(function(t){t.heritable||r||!angular.isUndefinedOrEmpty(t.parentCustomContentType)||i&&!angular.isDefinedAndFilled(n.parent)?(angular.isUndefined(g[l])&&(g[l]=[]),!e.includes(u,t.id)&&t.heritable&&(g[l].push(t),u.push(t.id))):g[s].push(t)})),m()}else m()}else m()};1===d?f.filterize({instance:e.first(n)},v,void 0,Object(t.b)()):s?(d=1,f.promiseList().then((function(t){var n=e.filter(t,{heritable:!0});v(n)}))):angular.forEach(n,(function(e){f.filterize({instance:e},v,void 0,Object(t.b)())}))}},f.listForInstance=function(e){return f.promiseFilterize({instance:e},"cct-"+e)},f.promiseList=function(){return g.promise},f.setItem=function(e,t,n){n=n||"default",t=t||angular.noop,f.setCurrent(e,n);var r=f.tagsCallback[n];angular.isDefinedAndFilled(r)&&(angular.forEach(r,(function(t){f.uuidToTag(t.data,t.cb,n,e)})),f.tagsCallback[n]=[]),t(e)},f.tagToUuid=function(e,t){if(t=t||angular.noop,!angular.isUndefinedOrEmpty(e))return t(e.uuid),e.uuid},f.uuidToTag=function(e,t,n){if(!angular.isUndefinedOrEmpty(e)){if(t=t||angular.noop,angular.isDefinedAndFilled(n)){var r=f.getTagByUuid(e,n);return t(r),r}var i=s.get({uuid:e}).$promise;return i.then(t),i}},f.init=function(){var e=c.getCurrentInstanceId();return f.defaultParams={instance:e,maxResults:100},n.get("User").isConnected()?(f.is.initializing||f.is.initialized||(m=[],f.is.initializing=!0,f.getAllPages({includeInstanceSiblings:!1,instance:e},(function(e){angular.forEach(e,(function(e){m.push(e),f.displayList(f.CURRENT_INSTANCE_CCT_LIST_KEY).push(e)}))}),(function(){i.$broadcast("custom-content-type-list-updated"),g.resolve(f.displayList(f.CURRENT_INSTANCE_CCT_LIST_KEY)),f.is.initialized=!0,f.is.initializing=!1}),(function(e){g.reject(e),f.is.initialized=!0,f.is.initializing=!1}),void 0)),g.promise):(g.reject(),g.promise)},f}n.$inject=["$injector","$q","$rootScope","Config","CustomContentTypeFactory","CustomContentTypeTagFactory","Instance","LumsitesBaseService","Translation","Utils"],angular.module("Services").service("CustomContentType",n)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/customer/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}},registrationLink:{isArray:!1,method:"GET",params:{methodKey:"registrationLink"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"},url:t.APPLICATION_HOST_PROCESS+"/_ah/api/lumsites/v1/customer/:methodKey"},status:{isArray:!1,method:"GET",params:{methodKey:"status"}}})}function t(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/customer/properties/:methodKey",{},{save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}t.$inject=["$resource","Config"],e.$inject=["$resource","Config"],angular.module("Factories").factory("CustomerFactory",e),angular.module("Factories").factory("CustomerPropertiesFactory",t)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,l,u,d,p){var f,g=i.createPaginatedService(l),m={configurations:[],excludedFeatures:[],externalAccounts:!0,features:[],googleCustomer:!1,hasGoogleSso:!1,loginGoogleOnly:!1,loginMethods:["google","email"],logout_urls:{email:"/logout",google:"https://accounts.google.com/logout"},overrides:[],properties:{},ssoEnabled:!1,themes:[]},v=n.defer(),h={error:"LOADING.CUSTOMER_STATUS_ERROR",status:!1};return g.defaultParams={},g.is={initialized:!1,initializing:!1},g.objectIdentifier="uid",g.reduxReducerName="customer",g.reduxUpdateActionType="customer/update",g.mapStateToRedux=function(){var e=g.getProperty(o.INSTANCE_PROPERTIES.AVAILABLE_LANGS),t=a()(f,"features",[]),n=a()(f,"isReseller",[]),r=a()(f,"excludedFeatures",[]),i=a()(f,"enabledFeatures",[]),s=a()(f,"id"),c=a()(f,"slug",{}),l=a()(f,"hasTermsAndConditions",!1),u=a()(f,"useBookmarks",!1);return{availableLanguages:e,excludedFeatures:r,features:t,enabledFeatures:i,hasTermsAndConditions:l,id:s,isReseller:n,slug:c,useBookmarks:u}},g.generateRegistrationLink=function(e,t,n){return t=t||angular.noop,n=n||angular.noop,l.registrationLink({kind:e},(function(e){angular.isDefinedAndFilled(e.url)&&(e.url=location.origin+e.url),t(e)}),n)},g.getAllStatus=function(){return o.CUSTOMER_STATUS},g.getAllLicenseTypes=function(){return o.CUSTOMER_LICENSE_TYPES},g.getConfigurations=function(){return g.getCustomer().configurations},g.getCustomer=function(e){return e=e||!1,e?g.is.initializing?v.promise:n.resolve(f||{}):f||{}},g.getCustomerId=function(){return g.getCustomer().id},g.getCustomerSlug=function(e){var n=g.getCustomer();if(angular.isDefinedAndFilled(a()(n,"slug")))return e?{isDomain:!1,slug:n.slug}:n.slug;var r=!s()(t.url(),"/a/"),i=r?t.host():(t.path().split("/")||["","a","",""])[2];return e?{isDomain:r,slug:i}:i},g.getDomain=function(){return g.getCustomer().domain},g.getError=function(){return h.error||""},g.getExternalDirectory=function(){return g.getCustomer().externalDirectory},g.getOverrides=function(){return g.getCustomer().overrides},g.getAdminProperty=function(e,t,n){var i=a()(r.OPTIONS,"".concat(p.toUpperSnakeCase(e),".default"),t);return p.getAdminProperty(e,g.getCustomer(),i,t,n)},g.getProperty=function(e){var t=p.getProperty(e,g.getCustomer());return angular.isDefined(t)?t:p.getConfigProperty(e)},g.getStatus=function(){return h.status||!1},g.getThemes=function(){return g.getCustomer().themes},g.getUserProfilePicture=function(){return g.getCustomer().userProfilePicture},g.initEmptyCustomer=function(e){var n=angular.fastCopy(m);n.googleCustomer=Boolean(e),angular.isDefinedAndFilled(t.search().token)&&delete n.googleCustomer,g.setCustomer(n),h={error:void 0,status:!0}},g.initStatus=function(e){return n((function(t,n){l.status({callId:Object(c.b)(),customerId:g.getCustomerId(),token:e}).$promise.then((function(e){h={error:e.error,status:e.status},t(h)})).catch(n)}))},g.isExternalAccounts=function(){return g.getCustomer().externalAccounts},g.isGoogleCustomer=function(){return a()(g.getCustomer(),"googleCustomer",!1)},g.isPublicContentAuthorized=function(){return g.getCustomer().publicContentAuthorized},g.isReseller=function(){return g.getCustomer().isReseller},g.isSsoEnabled=function(){var e=g.getCustomer();return e.ssoEnabled&&e.googleCustomer},g.setCustomer=function(t){f=t,window.CUSTOMER_ID=t.id,d.put("customer-".concat(f.slug),f),d.put("customer-".concat(f.uid),f),e.get("Feed").setTechnicalFeeds(f.feedAll,f.feedPublic)},g.init=function(){u.subscribe(g)},g}n.r(t),n.d(t,"CustomerService",(function(){return r}));var i=n(4),a=n.n(i),o=n(17),s=n.n(o),c=n(35);r.$inject=["$injector","$location","$q","AdvancedSettingsConstant","BaseService","Config","CustomerFactory","ReduxStore","LocalStorage","Utils"],angular.module("Services").service("Customer",r)},function(e,t){!function(){"use strict";angular.module("Constants").constant("HookConstant",{FAMILIES:["notification"],PROJECTION:{ADMIN:{},USER_SETTINGS:{description:!0,name:!0,uid:!0}},STATUS:{ARCHIVE:"ARCHIVE",DELETED:"DELETED",DRAFT:"DRAFT",LIVE:"LIVE",PENDING:"PENDING",REFUSED:"REFUSED"}})}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/webhook/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},disable:{isArray:!1,method:"POST",params:{methodKey:"disable"}},enable:{isArray:!1,method:"POST",params:{methodKey:"enable"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},test:{isArray:!1,method:"POST",params:{methodKey:"test"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("HookFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r){var i=r.createLumsitesBaseService(n,{autoInit:!1,objectIdentifier:"uid"});return i.defaultParams={},i.disable=function(t,r,i){return angular.isUndefinedOrEmpty(t)?e.reject():(r=r||angular.noop,i=i||angular.noop,n.disable({uid:t},r,i))},i.enable=function(t,r,i){return angular.isUndefinedOrEmpty(t)?e.reject():(r=r||angular.noop,i=i||angular.noop,n.enable({uid:t},r,i))},i.test=function(t,r,i){return angular.isUndefinedOrEmpty(t)?e.reject():(r=r||angular.noop,i=i||angular.noop,n.test({uid:t},r,i))},i.init=function(){i.defaultParams={customerId:t.getCustomerId(),maxResults:30}},i}e.$inject=["$q","Customer","HookFactory","LumsitesBaseService"],angular.module("Services").service("Hook",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t){function n(){return angular.isFunction(i)?i():i}var r,i,a=this,o=[];a.areAllItemsSelected=function(){return a.hasSelectedItems()&&a.getTableLength()===o.length},a.destroy=function(){i=void 0,r=void 0,o=[]},a.getFirstSelectedItem=function(){if(a.hasSelectedItems()){var t=o[0];return e.find(n(),(function(e){return e[r]===t}))}},a.getNonSelectedItems=function(t){if(!a.hasSelectedItems())return t?e.map(n(),r):angular.fastCopy(n());var i=[];return angular.forEach(n(),(function(e){a.isSelected(e)||i.push(t?e[r]:e)})),i},a.getSelectedItems=function(e){if(e)return o;var t=[];return angular.forEach(n(),(function(e){a.isSelected(e[r])&&t.push(e)})),t},a.getSelectedItemsNumber=function(){return(o||[]).length},a.getTableLength=function(){return angular.isArray(n())?n().length:0},a.hasSelectedItems=function(){return angular.isDefinedAndFilled(o)},a.init=function(e,t){i=e,r=t,o=[]},a.isSelected=function(t){return e.includes(o,t[r])},a.refresh=function(e){t.arrayRefresh(n(),angular.fastCopy(e)),a.resetSelectedItems()},a.resetSelectedItems=function(){t.empty(o)},a.toggleAllItems=function(){a.areAllItemsSelected()?a.resetSelectedItems():o=e.map(n(),r)},a.toggleItem=function(e){var t=o.indexOf(e[r]);-1===t?o.push(e[r]):o.splice(t,1)}}t.$inject=["Utils"],angular.module("Services").service("DataTable",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r){function i(){angular.isUndefined(o)&&(o=moment(angular.copy(c.$viewValue))),l.days.length=0,l.emptyFirstDays.length=0,l.emptyLastDays.length=0;for(var e=angular.copy(o).date(0),t=angular.copy(o).date(1),n=t.clone().endOf("month"),r=n.date(),i=0===t.day()?6:t.day()-1;i>0;i--)l.emptyFirstDays.push({});for(var a=0;a<r;a++){var s=angular.copy(e.add(1,"days"));if(s.isSelected=angular.isDefined(c.$viewValue)&&s.isSame(c.$viewValue,"day"),s.isToday=s.isSame(moment(),"day"),angular.isDefined(l.minDate)){var u=angular.isString(l.minDate)?new Date(l.minDate):l.minDate;s.toDate()<u&&(s.isDisabled=!0)}if(angular.isDefined(l.maxDate)){var d=angular.isString(l.maxDate)?new Date(l.maxDate):l.maxDate;s.toDate()>d&&(s.isDisabled=!0)}l.days.push(s)}for(var p=7-(0===n.day()?7:n.day());p>0;p--)l.emptyLastDays.push({})}var o,s,c,l=this;l.days=[],l.daysOfWeek=[],l.emptyFirstDays=[],l.emptyLastDays=[],l.hasInput=!1,l.icons={mdiChevronLeft:a.E,mdiChevronRight:a.F},l.id=r.generateUUID(),l.years=[],l.yearSelection=!1,l.displayYearSelection=function(){l.yearSelection=!0,t((function(){var e=angular.element(".lumx-dialog__content"),n=angular.element(".ls-date-picker__year--is-active");t((function(){e.scrollTop(n.position().top-e.outerHeight()/2+n.outerHeight()/2-92)}))}))},l.getDayFormatted=function(){var e=moment(c.$viewValue).format("llll").replace(moment(c.$viewValue).format("LT"),"").trim().replace(moment(c.$viewValue).format("YYYY"),"").trim(),t=e.slice(-1);return","===t&&(e=e.slice(0,-1)),e},l.getMonthFormatted=function(){return o.format("MMMM YYYY")},l.getYearFormatted=function(){return moment(c.$viewValue).format("YYYY")},l.hideYearSelection=function(){l.yearSelection=!1,t((function(){var e=angular.element(".lumx-dialog__content");e.scrollTop(0)}))},l.isYearActive=function(e){return e.toString()===moment(c.$viewValue).format("YYYY")},l.nextMonth=function(){o=o.add(1,"month"),i()},l.openDatePicker=function(){n.open(l.id)},l.previousMonth=function(){o=o.subtract(1,"month"),i()},l.selectDay=function(e){e.isDisabled||(c.$setViewValue(e.toDate()),o=angular.copy(e),angular.isDefined(l.cb)&&l.cb({newDate:c.$viewValue}),angular.isDefined(s)&&l.inputFormat&&(s.$setViewValue(angular.copy(e).format(l.inputFormat)),s.$render()),i())},l.selectYear=function(e){l.yearSelection=!1,o=o.year(e),i()},l.setInputModelController=function(e){s=e},l.setModelController=function(e){c=e},e.$on("lx-dialog__open-start",(function(e,t){t===l.id&&i()})),function(){moment.locale(l.locale),l.daysOfWeek.push(moment.weekdaysMin(1)),l.daysOfWeek.push(moment.weekdaysMin(2)),l.daysOfWeek.push(moment.weekdaysMin(3)),l.daysOfWeek.push(moment.weekdaysMin(4)),l.daysOfWeek.push(moment.weekdaysMin(5)),l.daysOfWeek.push(moment.weekdaysMin(6)),l.daysOfWeek.push(moment.weekdaysMin(7));for(var e=moment().year()-100;e<=moment().year()+100;e++)l.years.push(e)}()}function i(e){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(t,n,r,i,a){r.$observe("id",(function(e){i[0].id=e})),i[0].setModelController(i[1]),a(t,(function(t){t.length>0&&(i[0].hasInput=!0,e((function(){var e=n.find(".ls-date-picker__input input").data("$ngModelController");i[0].setInputModelController(e)})))}))},replace:!0,require:["lsDatePicker","ngModel"],restrict:"E",scope:{cb:"&?lsCallback",inputFormat:"@?lsInputFormat",locale:"@lsLocale",maxDate:"=?lsMaxDate",minDate:"=?lsMinDate"},templateUrl:"/client/common/modules/date-picker/views/date-picker.html",transclude:!0}}n.r(t),n.d(t,"LsDatePickerDirective",(function(){return i}));var a=n(12);i.$inject=["$timeout"],r.$inject=["$scope","$timeout","LsDatePickerService","LxUtilsService"],angular.module("Directives").directive("lsDatePicker",i)},function(e,t,n){"use strict";function r(e){this.close=function(t){e.close(t)},this.open=function(t){e.open(t)}}n.r(t),n.d(t,"LsDatePickerService",(function(){return r})),r.$inject=["LxDialogService"],angular.module("Services").service("LsDatePickerService",r)},function(e,t){!function(){"use strict";function e(e){var t=this;e.$on("lx-dialog__scroll-end",(function(e,n){t.dialogId===n&&angular.isDefined(t.onscrollend)&&angular.isFunction(t.onscrollend)&&t.onscrollend()})),t.autoClose=!!angular.isUndefined(t.autoClose)||t.autoClose,t.displayCancelButton=!!angular.isUndefined(t.displayCancelButton)||t.displayCancelButton,t.displayConfirmButton=!!angular.isUndefined(t.displayConfirmButton)||t.displayConfirmButton,t.inputLanguage=t.inputLanguage||!1}e.$inject=["$scope"],angular.module("Directives").directive("lsDefaultDialog",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{autoClose:"=?lsAutoClose",cancelLabel:"@?lsCancelLabel",confirmLabel:"@?lsConfirmLabel",dialogId:"@lsDialogId",dialogTitle:"@?lsDialogTitle",displayCancelButton:"=?lsDisplayCancelButton",displayConfirmButton:"=?lsDisplayConfirmButton",displayDeleteButton:"=?lsDisplayDeleteButton",inputLanguage:"=?lsInputLanguage",isCancelDisabled:"<?lsIsCancelDisabled",isConfirmDisabled:"<?lsIsConfirmDisabled",isDeleteDisabled:"<?lsIsDeleteDisabled",isDisabled:"=?lsIsDisabled",isLoading:"=?lsIsLoading",oncancel:"&?lsOnCancel",onconfirm:"&?lsOnConfirm",ondelete:"&?lsOnDelete",onscrollend:"&?lsOnScrollEnd",size:"@?lsSize"},templateUrl:"/client/common/modules/default-dialog/views/default-dialog.html",transclude:!0}}))}()},function(e,t,n){"use strict";function r(e,t){return{link:function(n,r){var i=t(r.attr("dynamic-controller"))(n),a=r.attr("dynamic-controller-as");i+=angular.isDefinedAndFilled(a)?" as ".concat(a):"",r.removeAttr("dynamic-controller"),r.attr("ng-controller",i),e(r)(n)},priority:550,restrict:"A",terminal:!0}}function i(){return{link:function(e,t){t.replaceWith(t.children())},require:"ngInclude",restrict:"A"}}function a(){return function(e,t,n){t.bind("keydown keypress",(function(t){13===t.which&&(e.$apply((function(){e.$eval(n.ngEnter)})),t.preventDefault())}))}}function o(){return{link:function(e,t,n,r){r.$parsers.unshift((function(e){return parseInt(e,10)}))},require:"ngModel"}}function s(){return function(e,t){t.on("click",(function(e){e.preventDefault()}))}}function c(){return function(e,t,n){t.on(n.stopPropagation,(function(e){e.stopPropagation()}))}}n.r(t),n.d(t,"DynamicControllerDirective",(function(){return r})),n.d(t,"IncludeReplaceDirective",(function(){return i})),n.d(t,"NgEnterDirective",(function(){return a})),n.d(t,"ParseIntegerDirective",(function(){return o})),n.d(t,"PreventDirective",(function(){return s})),n.d(t,"StopPropagationDirective",(function(){return c})),r.$inject=["$compile","$parse"],angular.module("Directives").directive("dynamicController",r).directive("includeReplace",i).directive("ngEnter",a).directive("parseInteger",o).directive("prevent",s).directive("stopPropagation",c).directive("ngTouchend",(function(){return{link:function(e,t,n){if("ontouchstart"in window){var r=-1;t.bind("touchend",(function(t){(-1===r||Math.abs(r-t.originalEvent.changedTouches[0].clientY)<10)&&e.$eval(n.ngTouchend)})),t.bind("touchstart",(function(e){r=e.originalEvent.touches[0].clientY}))}},restrict:"A"}}))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(){i.filterize({currentInstance:o.getCurrentInstanceId(),directory:u.filter.directory,instance:u.filter.instance},void 0,c.displayServerError,u.LIBRARY_LIST_KEY)}var u=this;u.LIBRARY_LIST_KEY="directory-entry-picker",u.SELECTION_LIST_KEY="directory-entry-picker-selection-"+u.pickerId,u.VIEW_MODES={library:"library",organize:"organize"},u.directories={},u.filter={currentInstance:void 0,directory:[],instance:[]},u.isOpen=!1,u.showFilter=!0,u.viewMode=u.VIEW_MODES.organize,u.Directory=r,u.DirectoryEntry=i,u.Translation=s,u.Utils=c;var d,p=e.debounce(l,500);u.closeFilter=function(){u.showFilter=!1},u.closePicker=function(){a.close(u.pickerId)},u.displayDirectorySelector=function(){return angular.isDefinedAndFilled(u.filter.instance)&&angular.isDefinedAndFilled(u.directories)},u.idToDirectory=function(t,n){if(angular.isFunction(n)&&!angular.isUndefinedOrEmpty(t)){for(var r in u.directories)if(u.directories.hasOwnProperty(r)){var i=e.find(u.directories[r],{id:t});if(angular.isDefinedAndFilled(i))return void n(i)}n()}},u.isSelected=function(t){return!angular.isUndefinedOrEmpty([t,u.tmpList],"some")&&angular.isDefinedAndFilled(e.find(u.tmpList,{id:t.id}))},u.openFilter=function(){u.showFilter=!0},u.submitList=function(){u.ngModel=angular.fastCopy(u.tmpList),n((function(){u.closePicker()}))},u.switchViewMode=function(e){angular.isDefinedAndFilled(u.VIEW_MODES[e])&&(u.viewMode=e)},u.toggleDetails=function(e){e===u.selectedItem?u.selectedItem=void 0:u.selectedItem=e},u.toggleSelection=function(t){if(u.isSelected(t)){var n=e.findIndex(u.tmpList,{id:t.id});n>-1&&u.tmpList.splice(n,1)}else u.tmpList.push(t)},u.updateDirectoryList=function(t){r.getMultiInstanceDirectories(t,(function(t,n){u.filter.directory=e.intersection(angular.fastCopy(u.filter.directory),n),u.directories=t}))},t.$watch((function(){return u.filter}),(function(e,t){e!==t&&p()}),!0),t.$on("directory-entry__close-end",(function(e,t){u.pickerId===t&&(u.isOpen=!1,u.selectedItem=void 0,u.tmpList=void 0)})),t.$on("directory-entry__open-start",(function(t,n){u.pickerId===n&&(u.isOpen=!0,u.tmpList=[],angular.isDefinedAndFilled(u.ngModel)&&i.filterize({ids:e.map(u.ngModel,"id"),instance:o.getCurrentInstanceId(),queryType:"getDirectoryEntriesByIds"},(function(e){u.tmpList=e}),c.displayServerError,u.SELECTION_LIST_KEY))})),d=o.getCurrentInstanceId(),u.filter.currentInstance=d,u.filter.instance.push(d),l(),angular.isArray(u.filter.instance)&&angular.isDefinedAndFilled(u.filter.instance)&&u.updateDirectoryList(u.filter.instance)}t.$inject=["$scope","$timeout","Directory","DirectoryEntry","DirectoryEntryPicker","Instance","Translation","Utils"],angular.module("Directives").directive("lsDirectoryEntryPicker",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t){t.appendTo("body"),e.$on("$destroy",(function(){t.remove()}))},restrict:"E",scope:{ngModel:"=",pickerId:"@lsPickerId"},templateUrl:"/client/common/modules/directory-entry-picker/views/directory-entry-picker.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n){this.close=function(n){e.$broadcast("directory-entry-picker__close-start",n),angular.element("body").css({overflow:"visible"}),angular.element("#"+n).removeClass("item-picker--is-shown"),t((function(){e.$broadcast("directory-entry__close-end",n)}),600)},this.open=function(r){n.register(),e.$broadcast("directory-entry__open-start",r),angular.element("body").css({overflow:"hidden"}),t((function(){angular.element("#"+r).css("z-index",n.getDepth()).addClass("item-picker--is-shown")})),t((function(){e.$broadcast("directory-entry__open-end",r)}),600)}}e.$inject=["$rootScope","$timeout","LxDepthService"],angular.module("Services").service("DirectoryEntryPicker",e)}()},function(e,t,n){"use strict";function r(e,t){function n(){angular.isFunction(i.ngChange)&&i.ngChange()}var r,i=this,a=[];i.DRAG_AND_DROP_ADD_DIALOG_ID="drag-and-drop-add-dialog-",i.availableAddableItems=[],i.canAddItem=!1,i.addSelectedItems=function(){Array.prototype.push.apply(i.ngModel,a),e.close(i.DRAG_AND_DROP_ADD_DIALOG_ID),n()},i.deleteItem=function(e){i.ngModel.splice(e,1),n()},i.isAddableItemSelected=function(e){return o()(a,e)},i.moveItem=function(e){e>r?i.ngModel.splice(e+1,1):i.ngModel.splice(e,1),n()},i.openAddDialog=function(){t.waitForAndExecute("#".concat(i.DRAG_AND_DROP_ADD_DIALOG_ID)),a=[],i.filter="",i.canAddItem&&(i.availableAddableItems=[],angular.forEach(i.choice,(function(e,t){e.unique&&o()(i.ngModel,t)||(angular.extend(e,{id:t}),i.availableAddableItems.push(e))})))},i.toogleAddableItem=function(e){var t=a.indexOf(e);-1===t?a.push(e):a.splice(t,1)},i.updateIndex=function(e,t){return r=e,t},function(){i.canAddItem=angular.isDefinedAndFilled(i.choice);var e="dragAndDrop-".concat(Object(s.b)());angular.isUndefinedOrEmpty(i.type)&&(i.type=e),i.canAddItem&&(i.DRAG_AND_DROP_ADD_DIALOG_ID+=e)}()}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{choice:"<lsChoice",disabled:"<?lsDisabled",label:"@?lsLabel",ngChange:"&?",ngModel:"=",translationPrefix:"@?lsTranslationPrefix",type:"@?lsType"},templateUrl:"/client/common/modules/drag-and-drop/views/drag-and-drop.html",transclude:!0}}n.r(t),n.d(t,"DragAndDropDirective",(function(){return i}));var a=n(17),o=n.n(a),s=n(35);r.$inject=["LxDialogService","Utils"],angular.module("Directives").directive("lsDragAndDrop",i)},function(e,t,n){"use strict";function r(e,t,n,r){function i(e,t,n){e.push(angular.extend(angular.fastCopy(n)||{},t))}function o(e,t,n,r){return{includeFolders:t,mimeTypes:r,selectFolder:n,viewId:e}}function s(t){var n=[];return Array.prototype.push.apply(n,a()(t,(function(t){return n=t,r=new(n.viewType||e.google.picker.DocsView)(n.viewId),angular.isDefinedAndFilled(n)?(angular.forEach(n,(function(e,t){c.hasOwnProperty(t)&&c[t](r,e)})),r):r;var n,r}))),n}var c={includeFolders:function(e,t){e.setIncludeFolders(t)},mimeTypes:function(e,t){e.setMimeTypes(t)},parent:function(e,t){e.setParent(t)},selectFolder:function(e,t){e.setSelectFolderEnabled(t)},shared:function(e,t){e.setOwnedByMe(!t)},starred:function(e,t){e.setStarred(t)},teamDrives:function(e,t){e.setEnableTeamDrives(t)}};return this.createPicker=function(a,c,l){var u,d,p=(u=c.viewMode,"video"===u?e.google.picker.ViewId.DOCS_VIDEOS:e.google.picker.ViewId.DOCS),f=(d=c.showType,"folder"===d),g=function(e){if(e)return"drawio"===e?"application/vnd.jgraph.mxfile.realtime,application/vnd.jgraph.mxfile":"application/vnd.google-apps."+e}(c.showType),m=function(t,r,a,s,c){var l,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=arguments.length>6?arguments[6]:void 0,p="full"===r,f=[];return(angular.isUndefinedOrEmpty(r)||p)&&(l=o(t,s,c,a),i(f,{shared:!1},l),n.hasFeature("team_drive")&&u&&i(f,{teamDrives:u},l),i(f,{shared:!0},l),i(f,{viewId:e.google.picker.ViewId.RECENTLY_PICKED})),("uploader"===r||p)&&i(f,{parent:d,viewType:e.google.picker.DocsUploadView}),f}(p,c.type,g,c.includeFolders,f,c.teamDrives,c.destination),v=s(m);return function(i,a,o,s){s=s||{};var c=n.hasFeature("team_drive"),l=c&&"folder"===s.showType,u=(new e.google.picker.PickerBuilder).enableFeature(s.selectMultiple?e.google.picker.Feature.MULTISELECT_ENABLED:void 0).enableFeature(c?e.google.picker.Feature.SUPPORT_TEAM_DRIVES:void 0).enableFeature(l?e.google.picker.Feature.wx:void 0).setLocale(r.getLang("current","drive")).setOAuthToken(i).setDeveloperKey(t.DEVELOPER_KEY).setCallback(o);return angular.forEach(a,(function(e){u.addView(e)})),u.build()}(a,v,l,c)},this}n.r(t),n.d(t,"DrivePickerBuilderService",(function(){return r}));var i=n(28),a=n.n(i);r.$inject=["$window","Config","Features","Translation"],angular.module("Services").service("DrivePickerBuilder",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){function s(e){angular.isUndefined(e)||e.error?a.error(o.translate("ERROR_GENERIC")):u.createPicker(e.access_token)}function c(t){angular.isUndefined(u.callback)||"loaded"===t.action||(t[e.google.picker.Response.ACTION]===e.google.picker.Action.PICKED?"uploader"===u.type||Boolean(u.selectMultiple)?u.callback()(t[e.google.picker.Response.DOCUMENTS],t.action):u.callback()(t[e.google.picker.Response.DOCUMENTS][0],t.action):u.callback()(void 0,t.action))}function l(e){var t=angular.element("[drive-picker]");e?(t.removeAttr("disabled"),t.css("pointer-events","auto"),t.removeClass(d)):(t.attr("disabled","disabled"),t.css("pointer-events","none"),t.addClass(d))}var u=this,d="dropdown-link--is-header";u.authorize=function(){e.gapi.auth.authorize({client_id:t.DRIVE.clientId,immediate:!1,scope:t.DRIVE.scope},s)},u.createPicker=function(e){var t,n={destination:u.destination,includeFolders:u.includeFolders,selectMultiple:u.selectMultiple,showType:u.showType,teamDrives:u.teamDrives,type:u.type,viewMode:u.viewMode},a=i.createPicker(e,n,c);!function(e){e.setVisible(!0)}(a),t=!1,r.isPicking=t};var p=document.createElement("script");p.setAttribute("src","https://apis.google.com/js/api.js"),p.onload=function(){gapi.load("auth"),gapi.load("picker"),r.alwaysFetchToken=!0,u.includeFolders=!angular.isUndefined(u.includeFolders)&&u.includeFolders,n.isGoogleCustomer()&&(l(!1),r.getToken((function(){l(!0)}),(function(){r.alwaysFetchToken=!1,l(!0)})))},document.body.appendChild(p)}function i(e,t){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(n,r,i,a){r.on("click",(function(n){n.preventDefault(),e.isGoogleCustomer()?(t.isPicking=!0,t.getToken((function(e,t){t?a.createPicker(e):a.authorize()}),a.authorize)):a.authorize()}))},restrict:"AE",scope:{callback:"&?",destination:"@?",includeFolders:"=?",selectMultiple:"=?",showType:"@?",teamDrives:"<?",type:"@?",viewMode:"@?"}}}n.r(t),n.d(t,"DrivePickerController",(function(){return r})),n.d(t,"DrivePickerDirective",(function(){return i})),i.$inject=["Customer","DrivePicker"],r.$inject=["$window","Config","Customer","DrivePicker","DrivePickerBuilder","LxNotificationService","Translation"],angular.module("Directives").directive("drivePicker",i)},function(e,t){!function(){"use strict";function e(e){var t,n,r,i=this;return i.alwaysFetchToken=!0,i.isPicking=!1,i.isTokenLoading=!1,i.getToken=function(a,o){if(a=a||angular.noop,o=o||angular.noop,!i.isTokenLoading){i.isTokenLoading=!0;var s=Math.floor((Date.now()-t)/1e3)>=r;(angular.isUndefined([t,r,n],"some")||s)&&i.alwaysFetchToken?function(i,a){i=i||angular.noop,a=a||angular.noop,e.getToken(void 0,(function(e){n=e.accessToken,t=Date.now(),r=.95*e.expiresIn,i(n)}),a)}((function(e){i.isTokenLoading=!1,a(e)}),(function(e){i.isTokenLoading=!1,o(e)})):(i.isTokenLoading=!1,a(n,i.alwaysFetchToken))}},i.setIsPicking=function(e){i.isPicking=Boolean(e)},i}e.$inject=["DriveFactory"],angular.module("Services").service("DrivePicker",e)}()},function(e,t,n){"use strict";function r(e,t,n){function r(e){angular.isUndefinedOrEmpty(e)||(e.preventDefault(),e.stopPropagation())}function i(e){r(e),m.isPlaceholderPlaced||(f.addClass(m.dropZonePlaceholderClass),m.isPlaceholderPlaced=!0)}function a(e){e&&r(e),m.isPlaceholderPlaced&&(f.removeClass(m.dropZonePlaceholderClass),m.isPlaceholderPlaced=!1)}function s(e){t.cancel(g),i(e)}function l(e){g=t((function(){a(e)}),250)}function d(t){r(t);var i=c()(t,"originalEvent.dataTransfer.files",[]);0!==i.length&&(angular.isDefinedAndFilled(m.uploaderSelector)?function(e){var t,n=angular.element("".concat(m.uploaderSelector,' input[type="file"]'));if(angular.isDefinedAndFilled(m.allowedFileTypes)){var r=new ClipboardEvent("").clipboardData||new DataTransfer;angular.forEach(e,(function(e){p()(m.allowedFileTypes,(function(t){return u()(e.type,t)}))&&r.items.add(e)})),t=r.files}else t=e;t.length>0&&(o()(n).files=t,n.triggerHandler("change")),a()}(i):e.$apply((function(){n.uploadMultiple(t.originalEvent.dataTransfer.files,{},(function(e){m.dropZoneCallback&&m.dropZoneCallback()(e),a(t)}),void 0,m.uuid)})))}var f,g,m=this;m.isPlaceholderPlaced=!1,m.setElement=function(e){f=e,f.on("dragenter",i),f.on("dragend",a),f.on("dragexit",a),f.on("dragover",s),f.on("dragleave",l),f.on("drop",d)},e.$on("$destroy",(function(){f.off("dragenter",i),f.off("dragend",a),f.off("dragexit",a),f.off("dragover",s),f.off("dragleave",l),f.off("drop",d)}))}function i(){return{bindToController:!0,controller:r,link:function(e,t,n,r){r.setElement(angular.element(n.lsDropZoneSelector||t))},scope:{allowedFileTypes:"<?lsAllowedFileTypes",dropZoneCallback:"&?lsDropZoneCallback",dropZonePlaceholderClass:"@?lsDropZonePlaceholderClass",dropZoneSelector:"@?lsDropZoneSelector",uploaderSelector:"@?lsUploaderSelector"}}}n.r(t),n.d(t,"DropZoneDirective",(function(){return i})),n.d(t,"DropZoneDirectiveController",(function(){return r}));var a=n(51),o=n.n(a),s=n(4),c=n.n(s),l=n(17),u=n.n(l),d=n(217),p=n.n(d);r.$inject=["$scope","$timeout","Upload"],angular.module("Directives").directive("lsDropZone",i)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c,l,u,d,p){var f=this,g=["url","media"];f.showMediaPicker=!1,f.tempNgModel={},f.Media=s,f.MediaConstant=c,f.Utils=p,f.delete=function(){f.allowDelete&&!f.ngDisabled&&o.confirm(l.translate("EDITABLE_MEDIA_DELETE_CONFIRM"),l.translate("EDITABLE_MEDIA_DELETE_CONFIRM_DESCRIPTION"),{cancel:l.translate("CANCEL"),ok:l.translate("OK")},(function(e){e&&(f.ngModel=void 0,angular.isFunction(f.ngChange)&&f.ngChange())}))},f.edit=function(){f.allowEdit&&!f.ngDisabled&&(f.simple?d.openSelection(f.id):f.openMediaPicker())},f.openMediaPicker=function(){f.simple||f.ngDisabled||(f.showMediaPicker=!0,p.waitForAndExecute("#".concat(f.id),i))},f.upload=function(t){f.ngDisabled||(angular.isDefinedAndFilled(e.get(t,"blobKey"))&&(f.ngModel=t.blobKey),angular.isDefinedAndFilled(e.get(t,"url"))&&(f.ngModel=t.url),angular.isFunction(f.ngChange)&&f.ngChange())},n.$on("abstract-picker__close-end",(function(e,t){t===f.id&&(r((function(){f.showMediaPicker=!1})),angular.isFunction(f.ngChange)&&f.ngChange())})),n.$on("abstract-picker__close-end",(function(e,t){t===f.id&&(f.ngModel="media"===f.format?f.tempNgModel:s.getMediaImage(f.tempNgModel,void 0,!0,-1),angular.isFunction(f.ngChange)&&f.ngChange())})),f.allowDelete=!!angular.isUndefined(f.allowDelete)||f.allowDelete,f.allowEdit=!!angular.isUndefined(f.allowEdit)||f.allowEdit,f.id=f.id||Object(t.b)(),f.uploaderLabel=f.uploaderLabel||l.translate("PICK_MEDIA"),f.uploaderIcon=f.uploaderIcon||"cloud-upload",f.showPreview=!!angular.isUndefined(f.showPreview)||f.showPreview,e.includes(g,f.format)||(f.format=f.simple?"url":"media"),f.format=f.simple||"url"===f.format?f.format:"url"}n.$inject=["$scope","$timeout","AbstractPicker","Features","LxNotificationService","Media","MediaConstant","Translation","Upload","UploaderAction","Utils"],angular.module("Directives").directive("lsEditableMedia",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",replace:!0,restrict:"E",scope:{allowDelete:"<?lsAllowDelete",allowEdit:"<?lsAllowEdit",allowedFilesTypes:"@?lsAllowedFilesTypes",barLabel:"@?lsBarLabel",format:"@?lsFormat",id:"@?lsId",ngChange:"&?",ngDisabled:"<?",ngModel:"=?",showPreview:"<?lsShowPreview",simple:"<?lsSimple",size:"<?lsSize",uploaderIcon:"@?lsUploaderIcon",uploaderLabel:"@?lsUploaderLabel"},templateUrl:"/client/common/modules/editable-media/views/editable-media.html",transclude:!0}}))}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,a,o){var c=this;return c.BROWSER_LANGUAGE="en",c.INPUT_LANGUAGE="",c.PROPERTIES_TO_TRANSLATE=["title","properties.content","properties.more.label"],c.WIDGET_TYPES=["intro","html","title"],c.getBrowserLanguage=function(){return navigator.language.split("_")[0].split("-")[0]||"en"},c.getTranslatableWidgets=function(){return c.WIDGET_TYPES.reduce((function(e,r){return[].concat(l()(e),l()(n.getElementList(t.getCurrent(),"widget","widgetType",r)))}),[])},c.handleWidgetTranslation=function(e){var n=e?c.translateProperty:c.rollbackPropertyTranslation;n(t.getCurrent(),"title");var r=c.getTranslatableWidgets();if(r.length>0){var i=!0,a=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value,d="html"===u.widgetType,p=!0,f=!1,g=void 0;try{for(var m,v=c.PROPERTIES_TO_TRANSLATE[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var h=m.value,y=d&&h.lastIndexOf(".content")>-1;n(u,h,y)}}catch(e){f=!0,g=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw g}}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}},c.isFeatureEnabled=function(){return r.hasFeature("translation-end-user")&&c.getTranslatableWidgets().length>0},c.rollbackPropertyTranslation=function(t,n,r){var a=d()(t,n,{}),o=Object.keys(a).find((function(e){return e.indexOf("original-")>-1}));if(a&&o){var c=o.substring(9),l=i({},a,s()({},c,a[o]));delete l[o],f()(t,n,l),r&&e.$broadcast("content_refresh")}},c.translateProperty=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=d()(t,n,{}),u=o.getLangIdForContent(l),p=l[u],g=c.BROWSER_LANGUAGE;p&&a.translate(p,g,void 0,(function(a){var o,c=a.contentText,d=i({},l,(o={},s()(o,"original-".concat(u),p),s()(o,u,c),o));f()(t,n,d),r&&e.$broadcast("content_refresh")}),void 0,r)},c.init=function(){c.BROWSER_LANGUAGE=c.getBrowserLanguage(),c.INPUT_LANGUAGE=o.inputLanguage},c.init(),c}n.r(t);var o=n(3),s=n.n(o),c=n(19),l=n.n(c),u=n(4),d=n.n(u),p=n(7),f=n.n(p);a.$inject=["$rootScope","Content","ContentTemplate","Features","GTranslate","Translation"],angular.module("Services").service("EndUserTranslation",a)},function(e,t,n){"use strict";function r(e){var t=this;t.isOpen=!1,t.Layout=e,t.toggleState=function(){t.triggerOnClick&&!t.isOpen&&(t.isOpen=!t.isOpen)}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{direction:"@?lsDirection",triggerOnClick:"=?lsTriggerOnClick"},templateUrl:"/client/common/modules/fab/views/fab.html",transclude:!0}}function a(){return{replace:!0,require:"^lsFab",restrict:"E",templateUrl:"/client/common/modules/fab/views/fab-trigger.html",transclude:!0}}function o(){return{link:function(e,t,n,r){e.parentCtrl=r},replace:!0,require:"^lsFab",restrict:"E",templateUrl:"/client/common/modules/fab/views/fab-actions.html",transclude:!0}}n.r(t),n.d(t,"LsFabDirective",(function(){return i})),n.d(t,"LsFabTriggerDirective",(function(){return a})),n.d(t,"LsFabActionsDirective",(function(){return o})),r.$inject=["Layout"],angular.module("Directives").directive("lsFab",i).directive("lsFabTrigger",a).directive("lsFabActions",o)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35),r=n(33),i=n.n(r),a=n(85),o=n.n(a);!function(){function n(n,r,a){var s,c,l=window.onerror||i.a,u=angular.isDefinedAndFilled([a.APP_ID,a.ERROR_REPORT_API_KEY],"every");if(u){s=new window.StackdriverErrorReporter;var d={key:a.ERROR_REPORT_API_KEY,projectId:a.APP_ID};s.start(d);var p=window.onerror||i.a;window.onerror=function(e,t,n,r,i){if(i&&!o()(i,c))return p(e,t,n,r,i),void(c=i);l(e,t,n,r,i)}}return function(i,a){var o=Object(t.b)();if(r.error("Error #"+o,i,a),u){if(s.config=s.config||{},s.config.context=s.config.context||{},s.config.context.id=o,angular.isUndefinedOrEmpty(e.get(s,"config.context.user"))){var c=n.get("User").getConnected();angular.isDefinedAndFilled(c)&&(s.config.context.user=c.email+"<"+c.uid+">")}try{s.report(i)}catch(e){r.error(e)}return o}}}n.$inject=["$injector","$log","InitialSettings"],angular.module("Factories").factory("$exceptionHandler",n)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,c){var l=this;l.MEDIA_PICKER_ID="media-picker-content-thumbnail",l.Config=n,l.Content=r,l.Utils=c,l.addContentThumbnail=function(e){angular.isUndefinedOrEmpty(e)||(r.getCurrent().thumbnail=e.blobKey)},l.deleteContentThumbnail=function(){r.getCurrent().mediaThumbnail=void 0,r.getCurrent().thumbnail=void 0,e.$broadcast("delete-content-thumbnail",r.getCurrent().id)},l.openMediaPicker=function(){c.waitForAndExecute("#".concat(l.MEDIA_PICKER_ID),t)},e.$on("abstract-picker__close-end",(function(e,t){var n,i;t===l.MEDIA_PICKER_ID&&(n=r.getCurrent(),i=o.getMediaContent(n.mediaThumbnail,s.inputLanguage,!0),n.thumbnail=a()(i,"value"))}))}n.r(t),n.d(t,"FeaturedImage",(function(){return r}));var i=n(4),a=n.n(i);r.$inject=["$rootScope","AbstractPicker","Config","Content","Features","Media","Translation","Utils"],angular.module("Services").service("FeaturedImage",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p){function g(){return i.FEATURES||{}}var v,y=this;y.reduxReducerName="feature",y.reduxUpdateActionType="".concat(y.reduxReducerName,"/update"),y.applyFeaturesStatus=function(e){angular.isArray(e.features)||(e.features=[]),angular.isArray(e.excludedFeatures)||(e.excludedFeatures=[]),angular.forEach(e.featuresStatus,(function(t,n){var r=d()(e.features,n),i=d()(e.excludedFeatures,n);switch(t){case"disabled":i||e.excludedFeatures.push(n),r&&(e.features=h()(e.features,n));break;case"enabled":r||e.features.push(n),i&&(e.excludedFeatures=h()(e.excludedFeatures,n));break;default:r&&(e.features=h()(e.features,n)),i&&(e.excludedFeatures=h()(e.excludedFeatures,n))}}))},y.getAll=g,y.getAvailableForCustomer=function(e){return s()(y.getAll(),(function(t){return t.enabledCustomer||t.enabledTrustedCustomer&&e.trustedTester}))},y.hasAllRequiredFeatures=function(e){return!!angular.isUndefinedOrEmpty(e.requiredFeatures)||e.requiredFeatures.every(y.hasFeature)},y.hasOneOfFeatures=function(e){return!angular.isUndefinedOrEmpty(e)&&e.some((function(e){return y.hasFeature(e)}))},y.hasFeature=function(e,t){if(angular.isUndefinedOrEmpty([y.getAll(),e],"some"))return!1;var r=l()(y.getAll(),e,{});return!angular.isUndefinedOrEmpty(r)&&(t=t||n.getCustomer(),!!d()(t.features,r.token)||!d()(t.excludedFeatures,r.token)&&r.enabledByDefault)},y.hasMainNavInheritance=function(){return angular.isUndefined(v)&&(v=y.hasFeature("main-nav-inheritance")&&angular.isDefinedAndFilled(l()(o.getInstance(),"parent"))),v},y.initFeaturesStatus=function(e){e.featuresStatus={};var t=y.getAll();angular.forEach(t,(function(t,n){var r="default";angular.isArray(e.features)&&d()(e.features,n)?r="enabled":angular.isArray(e.excludedFeatures)&&d()(e.excludedFeatures,n)&&(r="disabled"),e.featuresStatus[n]=r}))},y.mapStateToRedux=function(){var e=g();return{entities:e}},y.init=function(){var n,o;y.hasFeature("gamification")&&angular.isDefinedAndFilled(i.EVENTS)&&angular.forEach(i.EVENTS,(function(e){r.ONLINE[a()(e)]=e})),c.subscribe(y),function(){var t=e.get("ConfigInstance"),n=!1;t.AVAILABLE_WIDGETS=t.AVAILABLE_WIDGETS||[];var r=f()(t.AVAILABLE_WIDGETS,"type");angular.forEach(p,(function(e){e.relatedFeatureNames=e.relatedFeatureNames||[];var i=e.relatedFeatureNames.every((function(e){return y.hasFeature(e)}));i&&!d()(r,e.options.type)&&(t.AVAILABLE_WIDGETS.push(u.create(e.options)),n=!0)})),n&&(t.AVAILABLE_WIDGETS=m()(t.AVAILABLE_WIDGETS,"type"),u.resetAvailableWidgets())}(),n=y.hasFeature("microsoft"),o=y.hasFeature("okta"),(n||o)&&(n&&t.ACCOUNT_TYPES.push({name:void 0,value:"microsoft"}),o&&t.ACCOUNT_TYPES.push({name:void 0,value:"okta"}))}}n.r(t),n.d(t,"FeaturesService",(function(){return r}));var i=n(405),a=n.n(i),o=n(75),s=n.n(o),c=n(4),l=n.n(c),u=n(17),d=n.n(u),p=n(28),f=n.n(p),g=n(218),m=n.n(g),v=n(106),h=n.n(v);r.$inject=["$injector","Config","Customer","GoalActions","InitialSettings","Instance","ReduxStore","Widget","WidgetConstant"],angular.module("Services").service("Features",r)},function(e,t,n){"use strict";function r(e,t,n,r){function i(){return c()(l.params,{except:angular.fastCopy(l.except),hasGroup:l.googleGroupsOnly?Boolean(l.googleGroupsOnly):void 0,restrictTo:angular.fastCopy(l.restrictTo)})}function a(e,t){l.is.loading=!0,l.isEmptyFeedOthers=!1,l.isEmpty=!1,s=angular.fastCopy(e),n.search(e,i(),t).then((function(e){l.isEmpty=angular.isUndefinedOrEmpty(e),l.isEmptyFeedOthers=angular.isUndefinedOrEmpty(e[n.getKeyOthers()])})).finally((function(){l.is.loading=!1,l.is.initialized=!0}))}var s,l=this;l.RESTRICT_LIST_KEY="feed-list-",l.is={initialized:!1,loading:!1},l.isEmpty=!1,l.isEmptyFeedOthers=!1,l.Feed=n,l.Utils=r;var p=o()((function(e,t){r.equals(e,t)||(l.ngModel=n.removeFeedIdsInSourceFeedArray(e,l.ngModel),a(s,l.listKey))}),500),f=o()((function(e,t){r.equals(e,t)||angular.isUndefinedOrEmpty([e,t],"every")||(l.ngModel=n.removeFeedIdsNotInSourceFeedArray(e,l.ngModel),a(s,l.listKey))}),500);l.debouncedFilterFeeds=o()(a,250),l.get=u.a,l.loadNextFeed=function(){return l.infiniteScroll&&l.Feed.hasMore(l.listKey)?(l.is.loading=!0,n.search(s,i(),l.listKey,!0).finally((function(){l.is.loading=!1}))):Promise.resolve()},t.$watch("vm.restrictTo",f,!0),t.$watch("vm.except",p,!0),l.is.initialized=!1,l.is.loading=!0,l.listKey=l.listKey||"".concat(l.RESTRICT_LIST_KEY).concat(Object(d.b)()),void 0===l.infiniteScroll&&(l.infiniteScroll=!0),n.initFeedList(i(),l.listKey).then((function(){l.is.initialized=!0})).finally((function(){l.is.loading=!1}))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",restrict:"E",scope:{except:"<?lsExcept",googleGroupsOnly:"<?lsGoogleGroupsOnly",infiniteScroll:"<?lsInfiniteScroll",listKey:"<?lsListKey",ngChange:"&?",ngDisabled:"=?",ngModel:"=",restrictTo:"<?lsRestrictTo",selectError:"&lsError",selectPlaceholder:"@lsPlaceholder",single:"<?lsSingle"},templateUrl:"/client/common/modules/feed-selector/views/feed-selector.html"}}n.r(t),n.d(t,"LsFeedSelectorDirective",(function(){return i}));var a=n(71),o=n.n(a),s=n(517),c=n.n(s),l=n(4),u=n.n(l),d=n(35);r.$inject=["$q","$scope","Feed","Utils"],angular.module("Directives").directive("lsFeedSelector",i)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/feedtype/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("FeedTypeFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r){var i=r.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid",postSave:function(e){return i.formatObjectForClient(angular.fastCopy(e))},preSave:function(e){var t=angular.fastCopy(e),n={id:t.map,text:t.map};return t.map=n,t}});return i.defaultParams={},i.formatObjectForClient=function(e){return angular.isUndefinedOrEmpty(e.map)||angular.isString(e.map)||(angular.isString(e.map.text)?e.map=e.map.text:e.map=void 0),e},i.init=function(){i.defaultParams={customer:e.getCustomerId(),instance:n.getCurrentInstanceId()}},i}e.$inject=["Customer","FeedTypeFactory","Instance","LumsitesBaseService"],angular.module("Services").service("FeedType",e)}()},function(e,t,n){"use strict";function r(){return function(e,t){if(angular.isUndefinedOrEmpty(e))return"";var n=s(e);return n.isValid()?n.format(t):""}}function i(){return function(e,t,n){if(angular.isUndefinedOrEmpty(e))return"";e=s(e);var r=moment(e);if(!r.isValid())return"";var i=moment(n);return angular.isDefinedAndFilled(n)&&i.isValid()?r.from(i,t):r.fromNow(t)}}function a(){return function(e){return moment.isMoment(e)?e.local():void 0}}function o(){return function(e){return moment.utc(e)}}n.r(t),n.d(t,"DateFormatFilter",(function(){return r})),n.d(t,"FromNowFilter",(function(){return i})),n.d(t,"LocalTimeFilter",(function(){return a})),n.d(t,"UTCTimeFilter",(function(){return o}));var s=function(e){return!isNaN(parseFloat(e))&&isFinite(e)?moment(parseInt(e,10)):moment(e)};angular.module("Filters").filter("dateFormat",r),angular.module("Filters").filter("fromNow",i),angular.module("Filters").filter("localTime",a),angular.module("Filters").filter("utcTime",o)},function(e,t,n){"use strict";function r(){return function(e){return e.replace(/^[-]{2,} /,"")}}function i(){return function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}}function a(e){return function(t){return angular.isUndefinedOrEmpty(t)?t:e.escapeHtmlTags(t,"script")}}function o(e){return function(t){return angular.isUndefinedOrEmpty(t)?t:e.escapeHtmlTags(t)}}function s(e,t){return function(n,r,i,a,o,s,c){if(angular.isUndefinedOrEmpty(r)||angular.isUndefinedOrEmpty(i))return n;if(r=angular.isArray(r)?r:[r],!angular.isArray(i)){var l=angular.copy(i);i=[];for(var u=0,d=r.length;u<d;u++)i[u]=l}c=angular.isUndefined(c)||"AND"!==c&&"OR"!==c?"AND":c;var p=[];return angular.forEach(n,(function(n){for(var l="OR"!==c,u=0,d=r.length;u<d;u++){var f=r[u];if(angular.isDefinedAndFilled(f)&&angular.isString(f)){var g=angular.isString(i[u])&&!o?i[u].toLowerCase():i[u];if(g=t.removeAccentFromString(g),angular.isDefined(g)){var m=angular.copy(n[f]),v=angular.isDefined(s)&&angular.isString(s)?s+m:m;if(m=s&&angular.isDefined(v)&&angular.isString(v)?e.translate(v.toUpperCase()):m,m=angular.isString(m)&&!o?m.toLowerCase():m,m=t.removeAccentFromString(m),angular.isDefined(m)){var h=o?"g":"gi",y=void 0;try{y=new RegExp(g,h)}catch(e){}l="OR"===c?a||!angular.isString(m)||angular.isUndefinedOrEmpty(m)||angular.isUndefined(y)?m===g:m.match(y):a||!angular.isString(m)||angular.isUndefinedOrEmpty(m)||angular.isUndefined(y)?l&&m===g:l&&m.match(y)}if(!l&&"AND"===c||l&&"OR"===c)break}}}l&&p.push(n)})),p}}function c(){return function(e){return angular.isUndefinedOrEmpty(e)?e:_()(L()(e).replace(/_id$/,"").replace(/_/g," ").trim())}}function l(){return function(e){return angular.isUndefinedOrEmpty(e)?e:e.replace(/\n/g,"<br>")}}function u(){return function(e,t){angular.isUndefined(e)&&(e=[]),t=parseInt(t,10);for(var n=0;n<t;n++)e.push(n);return e}}function d(){return function(e,t,n){return(e||[]).slice(t,n)}}function p(e,t){return function(n,r,i,a){return angular.isUndefinedOrEmpty(r)||angular.isDefined(a)&&!a?n:N()(n,(function(n){if(angular.isUndefined(n)||angular.isUndefinedOrEmpty(n[r]))return"";var a=angular.copy(n[r]),o=angular.isDefined(i)&&angular.isString(i)?i+a:a;return a=i?e.translate(o):a,t.removeAccentFromString(a)}))}}function f(){return function(e,t){return angular.isUndefinedOrEmpty(e)||!angular.isString(e)?e||"":e.replace(/\{\{/,t?"":"&lbrace;&lbrace;").replace(/\}\}/,t?"":"&rbrace;&rbrace;")}}function g(e){return function(t,n,r,i){return angular.isUndefinedOrEmpty(t)?t||"":e.stripTags(t,n,r,i)}}function m(e){return function(t,n){return angular.isUndefinedOrEmpty(t)||angular.isDefined(n)&&!n?t||"":e.stripMarkdown(t)}}function v(){return function(e,t,n,r){if(angular.isDefinedAndFilled(e)){if(0===parseInt(t,10))return e;if(t=t||200,n=angular.isDefined(n)?n:"...",r=!!angular.isUndefined(r)||r,e.length<=t)return e;var i=e.substr(0,t).replace(/\n/g," ");return i=r?i.substr(0,i.lastIndexOf(" ")):i,i+n}return""}}function h(e){return function(t){return angular.isString(t)&&angular.isDefinedAndFilled(t)?e.trustAsHtml(t):t}}function y(e){return function(t){return e.trustAsResourceUrl(t)}}function E(){return function(e){return e.slice().reverse()}}function b(e,t){return function(n,r){return angular.isUndefinedOrEmpty(r)?n:(r=t.removeAccentFromString(r.toLowerCase()),n.reduce((function(n,i){var a=i.isGlobal?i.widgetType:i.type,o=i.isGlobal&&w()(i,"properties.global.title")?t.removeAccentFromString(e.translate(i.properties.global.title).toLowerCase()):void 0,s="WIDGET_TAGS_".concat(a.toUpperCase()),c=e.translate(s),l=c===s?void 0:c.toLowerCase().split(","),u="WIDGET_TYPE_".concat(a.toUpperCase()),d=e.translate(u),p=d===u?void 0:t.removeAccentFromString(d.toLowerCase()),f=l&&l.some((function(e){return t.removeAccentFromString(e).indexOf(r)>-1})),g=p&&p.indexOf(r)>-1,m=o&&o.indexOf(r)>-1;return f||g||m?[].concat(S()(n),[i]):S()(n)}),[]))}}function O(){return function(e){return angular.isDefinedAndFilled(e)?e.trim():e}}function C(){return function(e,t){return j()(e,angular.isDefinedAndFilled(t)?function(e){return angular.isObject(e)?e[t]:e}:void 0)}}n.r(t),n.d(t,"CleanupLevelFilter",(function(){return r})),n.d(t,"DecodeHTMLEntitiesFilter",(function(){return i})),n.d(t,"EscapeScriptFilter",(function(){return a})),n.d(t,"EscapeTagsFilter",(function(){return o})),n.d(t,"FilterObjectByFilter",(function(){return s})),n.d(t,"HumanizeFilter",(function(){return c})),n.d(t,"NewLineToBrFilter",(function(){return l})),n.d(t,"RangeFilter",(function(){return u})),n.d(t,"Reverse",(function(){return E})),n.d(t,"SafeAngularFilter",(function(){return f})),n.d(t,"SliceFilter",(function(){return d})),n.d(t,"SortLatinFilter",(function(){return p})),n.d(t,"StripMarkdownFilter",(function(){return m})),n.d(t,"StripTagsFilter",(function(){return g})),n.d(t,"Trim",(function(){return O})),n.d(t,"TruncateFilter",(function(){return v})),n.d(t,"TrustFilter",(function(){return h})),n.d(t,"TrustSrcFilter",(function(){return y})),n.d(t,"UniqueFilter",(function(){return C}));var T=n(19),S=n.n(T),I=n(257),_=n.n(I),A=n(4),w=n.n(A),D=n(355),L=n.n(D),P=n(218),N=n.n(P),R=n(672),j=n.n(R);b.$inject=["Translation","Utils"],y.$inject=["$sce"],h.$inject=["$sce"],m.$inject=["LsTextEditorMarkdown"],g.$inject=["Utils"],p.$inject=["Translation","Utils"],s.$inject=["Translation","Utils"],o.$inject=["Utils"],a.$inject=["Utils"],angular.module("Filters").filter("capitalize",(function(){return function(e){return _()(e)}})),angular.module("Filters").filter("cleanupLevel",r),angular.module("Filters").filter("decodeHTMLEntities",i),angular.module("Filters").filter("escapeScript",a),angular.module("Filters").filter("escapeTags",o),angular.module("Filters").filter("filterObjectBy",s),angular.module("Filters").filter("humanize",c),angular.module("Filters").filter("nl2br",l),angular.module("Filters").filter("range",u),angular.module("Filters").filter("slice",d),angular.module("Filters").filter("sortLatin",p),angular.module("Filters").filter("safeAngular",f),angular.module("Filters").filter("stripTags",g),angular.module("Filters").filter("stripMarkdown",m),angular.module("Filters").filter("truncate",v),angular.module("Filters").filter("trust",h),angular.module("Filters").filter("trustSrc",y),angular.module("Filters").filter("reverse",E),angular.module("Filters").filter("searchWidget",b),angular.module("Filters").filter("trim",O),angular.module("Filters").filter("unique",C)},function(e,t){!function(){"use strict";function e(e,t){var n,r=this;r.collapsed=!1,r.ConfigTheme=t,r.collapse=function(){angular.isNumber(r.collapsable)&&(0!==r.collapsable?n=e((function(){r.collapsed=!0}),1e3*r.collapsable):r.collapsed=!0)},r.expand=function(){r.collapsed=!1,e.cancel(n)},r.theme=r.theme||"dark",r.collapsable=angular.isUndefined(r.collapsable)?2:r.collapsable,r.collapsable=!0===r.collapsable?2:r.collapsable,r.collapse()}e.$inject=["$timeout","ConfigTheme"],angular.module("Directives").directive("lsFloatingToolbar",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{buttons:"<lsButtons",collapsable:"<?lsCollapsable",theme:"@?lsTheme"},templateUrl:"/client/common/modules/floating-toolbar/views/floating-toolbar.html"}}))}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){function c(){var e=[];return"dark"===l.theme?e.push("folder-block--theme-dark"):e.push("folder-block--theme-light"),e}var l=this;l.Document=n,l.Folder=r,angular.isUndefinedOrEmpty(l.classes)&&(l.classes=c(),t.$watch("vm.theme",(function(){l.classes=c()}))),l.fieldsToDisplay=l.fieldsToDisplay||i.getDefaultFieldsToDisplay(),l.onClick=l.onClick||angular.noop,l.style=l.style||{},l.theme=l.theme||"light",l.fieldsToDisplay.tags?l.tags=e.map(l.folder.tags,(function(t){var n=a.keyToTag(s.LIST_KEY_MEDIA_TAGS,t);if(o.hasTranslation(e.get(n,"name")))return n})):l.tags=[]}t.$inject=["$scope","Document","Folder","Fsitems","Tag","Translation","WidgetFileListConstant"],angular.module("Directives").directive("lsFolderBlock",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{canManage:"<?lsCanManage",classes:"<?lsClasses",fieldsToDisplay:"<?lsFieldsToDisplay",folder:"<lsFolder",onClick:"&?lsOnClick",reloadFn:"&lsReloadFn",style:"<?lsStyle",theme:"@?lsTheme"},templateUrl:"/client/common/modules/folder/views/folder-block.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/media/folder/:methodKey",{},{folder:{isArray:!1,method:"POST",params:{methodKey:"save"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},move:{isArray:!1,method:"POST",params:{methodKey:"move"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("FolderFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){var o=i.createLumsitesBaseService(n,{autoInit:!1,objectIdentifier:"uid"});return o.defaultPickerParams={sortOrder:"name"},o.createFolder=function(e,i,o,s){return!angular.isUndefinedOrEmpty(e)&&n.folder({customer:t.getCustomerId(),description:e.description,instance:r.getCurrentInstanceId(),lang:a.inputLanguage,name:e.name,parentFolder:e.parentFolder},i,o,s)},o.getFolderIcon=function(t){return angular.isDefinedAndFilled(e.get(t,"hasChild"))?"mdi-folder-multi":"mdi-folder"},o.moveFolder=function(e,r,i,o,s){return!angular.isUndefinedOrEmpty(e)&&!angular.isUndefinedOrEmpty(r)&&n.move({customer:t.getCustomerId(),destinationFolderId:r,itemId:e,lang:a.inputLanguage},i,o,s)},o.updateFolder=function(e,i,o,s){if(angular.isUndefinedOrEmpty(e))return!1;var c=e.name;return angular.isString(c)&&(c={},c[a.inputLanguage]=e.name),n.folder({customer:t.getCustomerId(),instance:r.getCurrentInstanceId(),isShared:e.isShared,lang:a.inputLanguage,name:c,parentFolder:e.parentFolder,uid:e.uid},i,o,s)},o}t.$inject=["Customer","FolderFactory","Instance","LumsitesBaseService","Translation"],angular.module("Services").service("Folder",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e){var t=this;t.isElementMatch=function(e,t){var n=!1;return e&&t&&(n=e.$pristine&&t.$pristine||e.$modelValue===t.$modelValue),n},t.isEmailValid=function(t){return!angular.isUndefined(t)&&(t.$pristine||e.isEmailValid(t.$modelValue))},t.isFormElementUrl=function(t){return!angular.isUndefined(t)&&(!!t.$pristine||angular.isDefined(t.$modelValue)&&e.findUrlsInString(t.$modelValue).length>=0)},t.isFormElementValid=function(e){return angular.isDefined(e)&&(e.$pristine||e.$valid)},t.isInputValid=function(e){return e&&(e.$pristine||e.$valid)},t.isPhoneValid=function(e){return!!angular.isUndefined(e)||(e.$pristine||/^\+?[0-9][0-9 ]*$/.test(e.$modelValue))},t.setFormDirty=function(e){angular.isUndefined(e)||(angular.forEach(e,(function(e,t){"$"!==t.charAt(0)&&angular.isFunction(e.$setDirty)&&e.$setDirty()})),e.$setSubmitted(!0))}}e.$inject=["Utils"],angular.module("Services").service("FormValidation",e)}()},function(e,t,n){"use strict";function r(e,t,n,r){this.getFroala=function(){return Object(i.loadFroala)(e,t,n,r)}}n.r(t),n.d(t,"FroalaLoaderService",(function(){return r}));var i=n(425);r.$inject=["$injector","$ocLazyLoad","Translation","Utils"],angular.module("Services").service("FroalaLoader",r)},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.Utils=t,e((function(e){e.length>0&&(n.hasTranscluded=!0)}))}e.$inject=["$transclude","Utils"],angular.module("Directives").directive("lsGallery",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",restrict:"E",scope:{mediaList:"=lsMediaList",size:"@?lsSize",theme:"@?lsTheme"},templateUrl:"/client/common/modules/gallery/views/gallery.html",transclude:!0}}))}()},function(e,t,n){"use strict";n.r(t);var r=n(35);!function(){function e(e,t,n,i,a){function o(){if(angular.isDefinedAndFilled(s.wantedBadgeSize)&&angular.isNumber(s.wantedBadgeSize))s.badgeSize=s.wantedBadgeSize;else switch(s.size){case"s":s.badgeSize=32;break;case"l":s.badgeSize=65;break;case"m":default:s.badgeSize=50}}var s=this;s.badgeSize=55,e.$on("gamification-status-redraw",(function(t,n){(s.id===n||angular.isUndefinedOrEmpty(n))&&(s.init(),e.$broadcast("badge-redraw",s.id+"_badge"))})),e.$watch((function(){return s.size}),(function(){o(),e.$broadcast("badge-redraw",s.id+"_badge")}),!0),s.init=function(){s.size=s.size||"m","s"!==s.size&&"m"!==s.size&&"l"!==s.size&&(s.size="m"),s.defaultBadge=!!angular.isUndefinedOrEmpty(s.defaultBadge)||s.defaultBadge,s.defaultPoints=!!angular.isUndefinedOrEmpty(s.defaultPoints)||s.defaultPoints,s.defaultRank=!!angular.isUndefinedOrEmpty(s.defaultRank)||s.defaultRank,s.showBadge=!!angular.isUndefinedOrEmpty(s.showBadge)||s.showBadge,o(),s.allTime=!!angular.isUndefinedOrEmpty(s.allTime)||s.allTime,s.showOtherPoints=!!angular.isUndefinedOrEmpty(s.showOtherPoints)||s.showOtherPoints,!1===s.profile?s.profile={}:angular.isUndefinedOrEmpty(s.profile)&&(s.profile=t.getCurrent()),s.profile=s.profile||{},s.profile.uid=s.profile.uid||Object(r.b)(),s.profile.gamification=s.profile.gamification||{},s.profile.gamification.badge=s.badge||s.profile.gamification.badge,angular.isUndefinedOrEmpty(s.profile.gamification.badge)&&(s.profile.gamification.badge={title:{}},s.profile.gamification.badge.title[n.getLang("current")]=i.getUserFullName(s.profile)),s.profile.gamification.points=s.points||s.profile.gamification.points||{};var e=0;if(angular.isNumber(s.profile.gamification.points)&&(e=s.profile.gamification.points,s.profile.gamification.points={}),angular.isUndefinedOrEmpty(s.profile.gamification.points)&&s.defaultPoints){var a,c=s.allTime?"allTime":"season";s.showOtherPoints&&(a=s.allTime?"season":"allTime"),s.profile.gamification.points[c]=e,angular.isDefinedAndFilled(a)&&(s.profile.gamification.points[a]=0)}s.profile.gamification.rank=s.points||s.profile.gamification.rank||(s.defaultRank?{allTime:0}:{})},s.init()}e.$inject=["$scope","SocialProfile","Translation","User","Utils"],angular.module("Directives").directive("lsGamificationStatus",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{allTime:"<?lsAllTime",badge:"<?lsBadge",defaultBadge:"<?lsDefaultBadge",defaultPoints:"<?lsDefaultPoints",defaultRank:"<?lsDefaultRank",id:"@?lsId",lightView:"<?lsLightView",points:"<?lsPoints",profile:"<?lsProfile",rank:"<?lsRank",showBadge:"<?lsShowBadge",showOtherPoints:"<?lsShowOtherPoints",size:"@?lsSize",wantedBadgeSize:"<?lsBadgeSize"},templateUrl:"/client/common/modules/gamification-status/views/gamification-status.html",transclude:!0}}))}()},function(e,t){!function(){"use strict";angular.module("Constants").constant("GoalActions",{ONLINE:{},TRIVIA:{open:"OPEN",multipleChoicesUnique:"MULTIPLE_CHOICES_UNIQUE",multipleChoicesMultiple:"MULTIPLE_CHOICES_MULTIPLE"}})}()},function(e,t){!function(){"use strict";angular.module("Constants").constant("LeaderboardKinds",{community:"Content",content:"Content",customer:"Customer",instance:"Instance",platform:"Customer",site:"Instance"})}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/leaderboard/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/leaderboard/:methodKey/:uid"},getByScope:{isArray:!1,method:"GET",params:{methodKey:"getByScope"}},list:{isArray:!1,method:"POST",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("LeaderboardFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s){var c=o.createLumsitesBaseService(a,{autoInit:!1,objectIdentifier:"uid"});return c.defaultParams={},c.get=function(r,i,o,s,l){if(i=i||angular.noop,o=o||angular.noop,s=c._getListKey(s),angular.isUndefined(c._services[s]))return n.reject();var u,d=c._services[s];if(angular.isString(r)||angular.isDefinedAndFilled(e.get(r,"uid"))){var p=function(e){c.setCurrent(e,s),i(e)};return u=d._get(r,p,o,l),angular.isObject(u)&&angular.isDefinedAndFilled(u.$promise)?u.$promise:(p(u),n.resolve(u))}if(u=e.find(d._list,"content"===r.scope?{scope:r.scope,scopeId:r.scopeId}:{scope:r.scope}),angular.isDefinedAndFilled(u))return d.postGet&&(u=d.postGet(u)),c.setCurrent(u,s),i(c.getCurrent(s)),n.resolve(c.getCurrent(s));var f=d._prepareParams(r,l),g=f[d.objectIdentifier]||"new";return angular.isDefinedAndFilled(d._lastCallId[g])?n.reject():(d._lastCallId[g]=Object(t.b)(),a.getByScope(f,(function(e){d.postGet&&(e=d.postGet(e)),c.setCurrent(e,s),i(c.getCurrent(s)),delete d._lastCallId[g]}),(function(e){o(e),delete d._lastCallId[g]})).$promise)},c.nextCompetitors=function(e,r,i,o,s){if(r=r||angular.noop,i=i||angular.noop,o=c._getListKey(o),angular.isUndefined(c._services[o]))return n.reject();var l,u,d=c._services[o],p=c.getCurrent(o);if(angular.isUndefinedOrEmpty(p)||!p.more)return n.reject();var f=angular.fastCopy(p.entries);if(angular.isDefinedAndFilled(p.leaderboard)){if(l=d._prepareParams({cursor:p.cursor,uid:p.leaderboard.uid},s),u=l[d.objectIdentifier]||"new",angular.isDefinedAndFilled(d._lastCallId[u]))return n.reject();d._lastCallId[u]=Object(t.b)(),l.callId=d._lastCallId[u],l=angular.extend(l,e);var g=function(){delete d._lastCallId[u];var e=c.getCurrent(o);e.entries=f.concat(e.entries),r(e)};return p=d._get(l,g,(function(e){delete d._lastCallId[u],i(e)}),s),angular.isObject(p)&&angular.isDefinedAndFilled(p.$promise)?p.$promise:(g(),n.resolve(p))}return e=angular.extend(e,{cursor:p.cursor}),l=d._prepareParams(e,s),u=l[d.objectIdentifier]||"new",angular.isDefinedAndFilled(d._lastCallId[u])?n.reject():(d._lastCallId[u]=Object(t.b)(),l.callId=d._lastCallId[u],a.getByScope(l,(function(e){d.postGet&&(e=d.postGet(e));var t=c.getCurrent(o);t.entries=f.concat(e.entries),t.cursor=e.cursor,t.more=e.more,r(t),delete d._lastCallId[u]}),(function(e){i(e),delete d._lastCallId[u]})).$promise)},c.init=function(){c.defaultParams={customerId:r.getCustomerId(),instanceId:i.getCurrentInstanceId()}},c}n.$inject=["$q","Customer","Instance","LeaderboardFactory","LumsitesBaseService","Utils"],angular.module("Services").service("Leaderboard",n)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/quest/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/quest/:methodKey/:uid"},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/quest/:methodKey/:uid"},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},mine:{isArray:!1,method:"POST",params:{methodKey:"mine"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},start:{isArray:!1,method:"POST",params:{methodKey:"validate"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/quest/:methodKey/:uid"},startMulti:{isArray:!1,method:"POST",params:{methodKey:"validateMulti"}},stop:{isArray:!1,method:"POST",params:{methodKey:"end"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/quest/:methodKey/:uid"},stopMulti:{isArray:!1,method:"POST",params:{methodKey:"endMulti"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("QuestFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s){function c(e,r,i,a){if(a._lastListCallId=Object(t.b)(),!a._more)return n.reject();var s={callId:a._lastListCallId,cursor:angular.isDefinedAndFilled(a._cursor)?a._cursor.replace("mine§",""):void 0,maxResults:a.maxResults,more:a._more};return a._firstRun=!1,e=e||{},angular.extend(s,e),o.mine(s,(function(e){e.callId===a._lastListCallId&&(angular.isDefined(e.items)&&(a.prependOnList&&angular.isArray(e.items)&&e.items.reverse(),a.postList&&(e.items=a.postList(e.items,a._list))),a._more=e.more,a._cursor="mine§"+e.cursor,a._lastListCallId=void 0,a._lastRefreshDate=Date.now(),angular.isDefined(e.items)&&(a.prependOnList&&angular.isArray(e.items)?a._list=e.items.concat(a._list):a._list=a._list.concat(e.items)),a.deduplicate(),r(a._list))}),(function(e){a._lastListCallId=void 0,a._more=!1,i(e)}))}function l(t){if(t=t||[],t=angular.isArray(t)?t:[t],d.is.loading||angular.isUndefinedOrEmpty(t))return n.reject();d.is.loading=!0,d.is.starting=!0;var r=o.startMulti(void 0,{uid:e.map(t,"uid")}).$promise;return r.then((function(n){angular.forEach(n.uid,(function(n){var r=e.find(t,{uid:n});if(angular.isUndefinedOrEmpty(r.startAt))r.status="LIVE";else{var i=moment(r.startAt);r.status=i.isSameOrBefore(moment())?"LIVE":"PENDING"}}))})).catch(s.displayServerError).finally((function(){d.is.loading=!1,d.is.starting=!1})),r}function u(t){if(t=t||[],t=angular.isArray(t)?t:[t],d.is.loading||angular.isUndefinedOrEmpty(t))return n.reject();d.is.loading=!0,d.is.stopping=!0;var r=o.stopMulti(void 0,{uid:e.map(t,"uid")}).$promise;return r.then((function(n){angular.forEach(n.uid,(function(n){var r=e.find(t,{uid:n});r.status="ARCHIVE"}))})).catch(s.displayServerError).finally((function(){d.is.loading=!1,d.is.stopping=!1})),r}var d=a.createLumsitesBaseService(o,{autoInit:!1,objectIdentifier:"uid"});return d.defaultParams={},d.is={loading:!1,starting:!1,stopping:!1},d.displayNextPage=function(t){if(t=d._getListKey(t),angular.isUndefined(d._services[t]))return n.reject();var r=d._services[t];return e.startsWith(r._cursor,"mine§")?!r._more||r._isCallInProgress()?n.reject():c(void 0,void 0,void 0,r):this.nextPage(void 0,void 0,t)},d.end=u,d.getQuestId=function(){return e.get(this.getCurrent(),"uid")},d.mine=function(e,t,r,i,a){if(t=t||angular.noop,r=r||angular.noop,i=d._getListKey(i),angular.isUndefined(d._services[i]))return n.reject();var o=d._services[i],s=o._prepareParams(e,a);return o._list=[],o._more=!0,o._cursor=void 0,o._params=s,c(s,t,r,o)},d.start=l,d.stop=u,d.validate=l,d.init=function(){d.defaultParams={customerId:r.getCustomerId(),instanceId:i.getCurrentInstanceId()}},d}n.$inject=["$q","Customer","Instance","LumsitesBaseService","QuestFactory","Utils"],angular.module("Services").service("Quest",n)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/userreward/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/userreward/:methodKey/:uid"},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},display:{isArray:!1,method:"POST",params:{methodKey:"display"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/userreward/:methodKey/:uid"},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},hide:{isArray:!1,method:"POST",params:{methodKey:"hide"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/userreward/:methodKey/:uid"},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},removeShowOff:{isArray:!1,method:"DELETE",params:{methodKey:"showOff"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/userreward/:methodKey/:uid"},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},saveMulti:{isArray:!1,method:"POST",params:{methodKey:"saveMulti"}},setShowOff:{isArray:!1,method:"POST",params:{methodKey:"showOff"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/gamification/userreward/:methodKey/:uid"}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("UserRewardFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t,n,r){var i=n.createLumsitesBaseService(r,{autoInit:!1,objectIdentifier:"uid"});return i.defaultParams={},i.display=function(t,n,i){return n=n||angular.noop,i=i||angular.noop,angular.isUndefinedOrEmpty(t)?(i(),e.reject()):r.display({uid:t},void 0,n,i).$promise},i.hide=function(t,n,i){return n=n||angular.noop,i=i||angular.noop,angular.isUndefinedOrEmpty(t)?(i(),e.reject()):r.hide({uid:t},void 0,n,i).$promise},i.removeShowOff=function(t,n,i){return n=n||angular.noop,i=i||angular.noop,angular.isUndefinedOrEmpty(t)?(i(),e.reject()):r.removeShowOff({uid:t},void 0,n,i).$promise},i.setShowOff=function(t,n,i){return n=n||angular.noop,i=i||angular.noop,angular.isUndefinedOrEmpty(t)?(i(),e.reject()):r.setShowOff({uid:t},void 0,n,i).$promise},i.init=function(){i.defaultParams={customerId:t.getCustomerId()}},i}e.$inject=["$q","Customer","LumsitesBaseService","UserRewardFactory"],angular.module("Services").service("UserReward",e)}()},function(e,t,n){"use strict";n.r(t);var r=n(35);!function(){function e(e,t,n,i){var a=this;a.pendingChip=void 0,a.currentIndex=void 0,a.editingChip=void 0,a.originChip=void 0,a.dialogId="i18n-chip-editor-".concat(Object(r.b)()),a.Translation=n,a.create=function(){var e=angular.isFunction(a.builder)?a.builder():{};a.attr?e[a.attr][n.inputLanguage]=a.pendingChip:e[n.inputLanguage]=a.pendingChip,a.ngModel.push(e),a.pendingChip=void 0,a.currentIndex=void 0},a.onKeyPress=function(e){a.pendingChip&&13===e.which&&a.create()},a.openEditor=function(e,n){e=a.attr?e[a.attr]:e,a.originChip=e,a.editingChip=angular.copy(e),a.currentIndex=n,t.open(a.dialogId)},a.remove=function(){angular.isNumber(a.currentIndex)&&angular.isDefinedAndFilled(a.ngModel)&&(a.ngModel.splice(a.currentIndex,1),t.close(a.dialogId))},a.save=function(){angular.extend(a.originChip,a.editingChip),t.close(a.dialogId)},e.$on("lx-dialog__close-end",(function(e,t){a.dialogId===t&&(a.editingChip=void 0,a.originChip=void 0)})),angular.isUndefined(a.ngModel)&&(a.ngModel=[])}e.$inject=["$scope","LxDialogService","Translation","Utils"],angular.module("Directives").directive("lsI18nChip",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",restrict:"E",scope:{attr:"@?lsAttr",builder:"&?lsBuilder",ngModel:"=",placeholder:"@?lsPlaceholder"},templateUrl:"/client/common/modules/i18n-chip/views/i18n-chip.html"}}))}()},function(e,t,n){"use strict";function r(){var e=this;e.AVAILABLE_ICONS=["account","account-box-outline","account-card-details","account-card-details-outline","account-circle","account-edit","account-multiple","account-network","account-star","account-search","airballoon","airplane","alarm","album","alert-circle-outline","alert-outline","alphabetical","apps","arrow-expand-all","arrow-down-drop-circle","arrow-down-drop-circle-outline","arrow-left","arrow-left-drop-circle","arrow-left-drop-circle-outline","arrow-right","arrow-right-drop-circle","arrow-right-drop-circle-outline","attachment","bank","basket","beer","bell","bell-outline","bike","blinds","blur","book","book-open","book-multiple","book-open-variant","bookmark","bookmark-outline","bookmark-plus","bowling","briefcase","briefcase-outline","brightness-2","broom","bullhorn","bus","cake-variant","calculator","calendar","calendar-clock","calendar-question","calendar-text","call-merge","camcorder","camera","camera-burst","car","cards","cart","cash","cash-multiple","cellphone-android","chart-areaspline","chart-bar","chart-line","checkbox-blank","checkbox-blank-circle","checkbox-blank-circle-outline","checkbox-marked-outline","chevron-down","chevron-left","chevron-right","chevron-up","city","clipboard-outline","clipboard-text","clock","clock-outline","cloud","code-greater-than","code-less-than","coffee","comment","comment-question-outline","comment-search","comment-search-outline","comment-text-outline","compass","console","content-paste","cow","credit-card","crosshairs-gps","death-star","death-star-variant","dna","duck","earth","email","emoticon","facebook","facebook-box","factory","ferry","file","file-document-box","file-tree","filmstrip","fingerprint","fire","fish","flag","flag-checkered","flash","flower","folder","folder-google-drive","folder-star","food","food-apple","food-variant","format-paint","gamepad-variant","gas-station","glass-cocktail","gift","github-circle","github-face","google","google-circles","google-circles-extended","google-drive","google-maps","google-plus","hanger","headphones","headset","heart","help-circle","help-circle-outline","home","hospital","hotel","image-area","image-filter","image-filter-drama","image-filter-none","instagram","key","lan","laptop","leaf","lightbulb","link","linkedin","linkedin-box","link-variant","linux","lock","looks","loupe","magnify","magnify-minus","magnify-plus","at","map","map-marker","marker-check","math-compass","menu","message","microphone","minus","minus-box","minus-box-outline","motorbike","multiplication","navigation","needle","new-box","newspaper","numeric-0-box","numeric-0-box-outline","numeric-1-box","numeric-1-box-outline","numeric-2-box","numeric-2-box-outline","numeric-3-box","numeric-3-box-outline","numeric-4-box","numeric-4-box-outline","numeric-5-box","numeric-5-box-outline","numeric-6-box","numeric-6-box-outline","numeric-7-box","numeric-7-box-outline","numeric-8-box","numeric-8-box-outline","numeric-9-box","numeric-9-box-outline","open-in-new","package-variant","palette","pencil","phone","pin","pine-tree","play","play-circle-outline","plus","plus-box","plus-box-outline","presentation","printer","puzzle","puzzle-outline","rocket","rss","rss-box","run","school","script","seal","send","settings","signal","silverware-variant","snowflake","snowman","speaker","star","subway","swim","tag","tent","terrain","tooltip-account","traffic-light","train","tram","trophy","trophy-variant","truck","tshirt-crew","twitter","twitter-box","walk","wallet","watch","weather-partly-cloudy","web","wrench","youtube"],e.onChange=function(){e.ngChange()},e.ngChange=e.ngChange||angular.noop,e.allowClear=!!angular.isUndefined(e.allowClear)||e.allowClear,"youtube-play"===e.ngModel&&(e.ngModel="youtube")}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",restrict:"E",scope:{allowClear:"=?lsAllowClear",label:"@?lsLabel",ngChange:"&?",ngDisabled:"=?",ngModel:"="},templateUrl:"/client/common/modules/icon-picker/views/icon-picker.html"}}n.r(t),n.d(t,"LsIconPickerDirective",(function(){return i})),angular.module("Directives").directive("lsIconPicker",i)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o){return{link:function(o,s,c){function l(e){e=e||!1,h=!1;var t=c.lsInfiniteScroll.replace("lsInfiniteScrollFromButton",String(e));!angular.isDefined(o.$root)||"$apply"!==o.$root.$$phase&&"$digest"!==o.$root.$$phase?o.$apply(t):o.$eval(t),i((function(){h=!0}),500)}function u(){angular.isDefinedAndFilled(c.lsInfiniteScrollTarget)?i((function(){p.bind("scroll",y),p.bind("mousewheel",E)})):(v.bind("scroll",y),v.bind("mousewheel",E)),i((function(){if(o.displayButton){angular.element("#load-more-"+g).remove();var e=s;angular.isString(o.displayButton)&&(e=s.find(o.displayButton)),e.append(n(m)(o))}}))}function d(){angular.isDefinedAndFilled(c.lsInfiniteScrollTarget)?(p.unbind("scroll",y),p.unbind("mousewheel",E)):(v.unbind("scroll",y),v.unbind("mousewheel",E)),o.displayButton&&i((function(){angular.element("#load-more-"+g).remove()}))}var p,f=angular.element(r),g=Object(t.b)(),m="";m+='<div class="infinite-scroll-button" id="load-more-'+g+'" ng-show="more">',m+='  <a ng-click="nextPage(true)">',m+="    <span>{{ 'LOAD_NEXT_PAGE' | trans }}</span>",m+='    <lx-icon lx-id="arrow-down-drop-circle-outline"></lx-icon>',m+="  </a>",m+="</div>","true"===c.lsInfiniteScrollTarget?p=s:"parent"===c.lsInfiniteScrollTarget||"<"===c.lsInfiniteScrollTarget?p=s.parent():e.startsWith(c.lsInfiniteScrollTarget,"<")?p=s.parents(e.trim(c.lsInfiniteScrollTarget.replace("<",""))):angular.isDefinedAndFilled(c.lsInfiniteScrollTarget)&&(p=angular.element(c.lsInfiniteScrollTarget));var v=angular.element(a),h=!0;o.displayButton=!1,o.more=!1,o.offset=void 0,o.percentage=90;var y=e.debounce((function(){if(h){var e=angular.isDefined(o.percentage)?o.percentage:90;e=angular.isNumber(e)?e:parseInt(e,10);var t=angular.isDefined(o.offset)?o.offset:void 0;t=angular.isNumber(t)||angular.isUndefined(t)?t:parseInt(t,10);var n=!angular.isNumber(o.offset),r=!1;if(angular.isDefinedAndFilled(c.lsInfiniteScrollTarget)){var i=p[0];r=n?i.offsetHeight+i.scrollTop>=i.scrollHeight*e/100:i.scrollHeight-i.scrollTop-i.offsetHeight<=t}else r=n?v.scrollTop()/(f.height()-v.height())*100>=e:f.height()-v.height()-v.scrollTop()<=t;r&&l()}}),100),E=e.debounce((function(){if(h){var e=!1;if(angular.isDefinedAndFilled(c.lsInfiniteScrollTarget)){var t=p[0];e=t.offsetHeight+t.scrollTop>=100*t.scrollHeight/100}else e=f.height()===v.height()||v.scrollTop()/(f.height()-v.height())*100==100;e&&l()}}),150);o.nextPage=function(e){o.more&&l(e)},o.$on("$destroy",d),c.$observe("lsInfiniteScrollDisplayButton",(function(){var e=o.displayButton;if(angular.isUndefined(c.lsInfiniteScrollDisplayButton))o.displayButton=!1;else{var t=o.$eval(c.lsInfiniteScrollDisplayButton);o.displayButton=t}o.displayButton!==e&&(d(),u())})),c.$observe("lsInfiniteScrollMore",(function(){var e=o.more;if(angular.isUndefined(c.lsInfiniteScrollMore))o.more=!0;else{var t=o.$eval(c.lsInfiniteScrollMore);o.more=angular.isDefined(t)&&(!0===t||!1!==t&&0!==t)}o.more&&!e?u():o.more||d()})),c.$observe("lsInfiniteScrollOffset",(function(){o.offset=parseInt(c.lsInfiniteScrollOffset,10)})),c.$observe("lsInfiniteScrollPercentage",(function(){o.percentage=parseInt(c.lsInfiniteScrollPercentage,10)})),u()}}}n.$inject=["$compile","$document","$timeout","$window","Utils"],angular.module("Directives").directive("lsInfiniteScroll",n)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i){var a=this;a.Instance=r,a.Translation=i,a.selectLanguage=function(t){i[a.languageType]!==t&&(i[a.languageType]=t,e.$broadcast(a.languageType,{identifier:a.identifier,lang:i[a.languageType]}))},a.color=a.color||"dark",a.emphasis=a.emphasis||"medium",a.fullLang=!!angular.isUndefined(a.fullLang)||a.fullLang,a.languageType=a.isCustomer?i.CUSTOMER_LANGUAGE_TYPE:i.INSTANCE_LANGUAGE_TYPE,a.position=a.position||"right",a.type=a.type||"button",a.languageChoices=a.isCustomer?n.getProperty(t.INSTANCE_PROPERTIES.AVAILABLE_LANGS):r.getInstance().langs}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"E",scope:{color:"@?",emphasis:"@?",fullLang:"<?",identifier:"@?",isCustomer:"<?",position:"@?",type:"@?"},templateUrl:"/client/common/modules/input-language/views/input-language.html"}}n.r(t),n.d(t,"InputLanguageDirective",(function(){return i})),r.$inject=["$rootScope","Config","Customer","Instance","Translation"],angular.module("Directives").directive("inputLanguage",i)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s){function c(){var e={name:d.filter.name,showHidden:!1};i.filterize(e)}function l(){d.filter={name:void 0}}function u(){a.close(d.pickerId,d.tmpInstanceList)}var d=this,p=0;d.SELECTION_LIST_KEY="instance-picker-selection-",d.VIEW_MODES={library:"library",organize:"organize"},d.filter={},d.isFilterDisplayed=!0,d.isOpen=!1,d.instanceIds=[],d.viewMode=d.VIEW_MODES.organize,d.Config=r,d.Translation=o,d.Instance=i,d.Utils=s;var f=e.debounce(c,500);d.closeFilter=function(){d.isFilterDisplayed=!1},d.closeInstancePicker=u,d.getThumbnail=function(e){return s.getBackgroundImage(angular.isDefinedAndFilled(e.logo)?e.logo[0].url:"",80,!1)},d.getListNextPage=function(){i.filterize({ids:d.instanceIds.slice(p,angular.isNumber(30)?p+30:void 0),maxResults:angular.isNumber(30)?30:d.instanceIds.length},(function(e){d.tmpInstanceList=d.tmpInstanceList.concat(e.items||e)}),void 0,d.SELECTION_LIST_KEY),p+=30},d.isSelected=function(e){return d.instanceIds.indexOf(e.id)>-1},d.openFilter=function(){d.isFilterDisplayed=!0},d.submitInstanceList=function(){d.ngModel=angular.fastCopy(d.tmpInstanceList),n(u)},d.switchViewMode=function(e){angular.isDefinedAndFilled(d.VIEW_MODES[e])&&(d.viewMode=e)},d.toggleInstanceDetails=function(e){e===d.selectInstance?d.selectedInstance=void 0:d.selectedInstance=e},d.toggleInstanceSelection=function(t){if(!angular.isUndefinedOrEmpty(t)){var n=e.findIndex(d.tmpInstanceList,{id:t.id});n>-1?(d.instanceIds.splice(d.instanceIds.indexOf(t.id),1),d.tmpInstanceList.splice(n,1)):(d.tmpInstanceList.push(t),d.instanceIds.push(t.id))}},t.$watch((function(){return d.filter}),(function(e,t){e!==t&&f()}),!0),t.$on("instance-picker__close-end",(function(e,t){d.pickerId===t&&(d.isOpen=!1,l(),d.selectedInstance=void 0,d.tmpInstanceList=void 0)})),t.$on("instance-picker__open-start",(function(t,n){d.pickerId===n&&(d.isOpen=!0,d.ngModel=d.ngModel||[],d.isOpen=!0,d.tmpInstanceList=[],angular.isDefinedAndFilled(d.ngModel)&&(d.instanceIds=e.map(d.ngModel,"id"),d.getListNextPage()))})),d.SELECTION_LIST_KEY+=d.pickerId,l(),c()}t.$inject=["$scope","$timeout","Config","Instance","InstancePicker","Translation","Utils"],angular.module("Directives").directive("lsInstancePicker",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t){t.appendTo("body"),e.$on("$destroy",(function(){t.remove()}))},restrict:"E",scope:{ngModel:"=",pickerId:"@lsPickerId"},templateUrl:"/client/common/modules/instance-picker/views/instance-picker.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n){this.close=function(n,r){angular.isUndefinedOrEmpty(n)||(e.$broadcast("instance-picker__close-start",n,r),angular.element("body").css({overflow:"visible"}),t((function(){e.$broadcast("instance-picker__close-end")}),600))},this.open=function(r){angular.isUndefinedOrEmpty(r)||(n.register(),e.$broadcast("instance-picker__open-start",r),angular.element("body").css({overflow:"hidden"}),t((function(){angular.element("#"+r).css("z-index",n.getDepth())})),t((function(){e.$broadcast("instance-picker__open-end",r)}),600))}}e.$inject=["$rootScope","$timeout","LxDepthService"],angular.module("Services").service("InstancePicker",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r){var i=this,a=0;i.instancesSiblings=[],i.Instance=n,i.Translation=r;var o=e.debounce((function(){angular.isFunction(i.selectCallback)&&i.selectCallback()(i.ngModel)}),a);i.resetModel=function(){i.ngModel=[n.getCurrentInstanceId()],i.updateModel(),t.$emit("reset-instance-siblings-selector")},i.updateModel=function(){o()},function(){if(n.getSiblings(!1).then((function(e){i.instancesSiblings=e})),angular.isDefinedAndFilled(i.debounce)){var e=parseInt(i.debounce,10);a=angular.isNumber(e)?e:a}}()}t.$inject=["$scope","Instance","Translation"],angular.module("Directives").directive("lsInstanceSiblingsSelector",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{debounce:"@lsDebounce",hideLoader:"<lsHideLoader",max:"<?lsMax",ngModel:"=",selectCallback:"&lsChange",selectError:"&lsError",selectPlaceholder:"@lsPlaceholder"},templateUrl:"/client/common/modules/instance-siblings-selector/views/instance-siblings-selector.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";n.r(t),n.d(t,"InstanceConstant",(function(){return r}));var r={PROJECTION:{ADMIN_LIST:{items:{createdAt:!0,createdBy:!0,id:!0,isDefaultInstance:!0,name:!0,slug:!0,uid:!0}},EMPTY_PARENT:{items:{id:!0,name:!0,title:!0,uid:!0}},STREAM_LIST:{items:{createdAt:!0,createdBy:!0,id:!0,isDefaultInstance:!0,name:!0,parent:!0,slug:!0,uid:!0}},MOBILE_SETTINGS_LIST:{items:{id:!0,uid:!0,name:!0}}}};angular.module("Constants").constant("InstanceConstant",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/instance/:methodKey",{},{copy:{isArray:!1,method:"POST",params:{methodKey:"copy"}},delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"POST",params:{methodKey:"search"}},listSiblings:{isArray:!1,method:"GET",params:{methodKey:"list"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/instance/siblings/:methodKey"},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("InstanceFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v,E,b){var O,C=g.createLumsitesBaseService(u,{autoInit:!1,objectIdentifier:"uid",postSave:function(e){return C.formatObjectForClient(angular.fastCopy(e))},preSave:function(e){return C.formatObjectForServer(angular.fastCopy(e))}}),T=n.defer(),S=[];return C.currentAction="create",C.defaultParams={},C.is={initialized:!1,initializing:!1,loading:{siblings:!1}},C.copy=function(e,t,n){t=t||angular.noop,n=n||angular.noop,u.copy(e,t,n)},C.displayParentlessInstances=function(e,t){var n=C.displayList(e);if(!angular.isArray(n))return[];var r=[];return angular.forEach(n,(function(e){t!==e.id&&angular.isUndefinedOrEmpty(e.parent)&&r.push(e)})),r},C.formatObjectForClient=function(e){var t={};return angular.forEach(e.logo,(function(e){t[e.lang]=e.logo})),e.logo=t,angular.isUndefinedOrEmpty(e.menuType)&&(e.menuType="horizontal"),e},C.formatObjectForServer=function(e){var t=[];return angular.forEach(e.logo,(function(e,n){t.push({lang:n,logo:e})})),e.logo=t,e},C.getAdminProperty=function(e,t,n){var r=o.getAdminProperty(e,t);return b.getAdminProperty(e,C.getInstance(),r,t,n)},C.getAllCustomerInstances=function(e){var t={maxResults:999};return n((function(n){C.filterize(angular.extend(t,e.params),n,b.displayServerError,e.listKey,e.projection)}))},C.getCurrentInstanceId=function(){return d()(C.getInstance(),"uid",d()(c,"INSTANCE.uid"))},C.getCurrentInstanceLangs=function(){var e=C.getInstance();return angular.isArray(d()(e,"langs"))?e.langs:[]},C.getCurrentInstanceParent=function(e){e=!angular.isDefined(e)||e;var t=e?C.getCurrent().parent:C.getInstance().parent;return n((function(n,r){C.getSiblings().then((function(i){if(angular.isUndefinedOrEmpty([i,t],"some"))r();else{var a=s()(i,{instance:t});if(angular.isDefinedAndFilled(a))n(a);else{var o=C.get({uid:t},void 0,void 0,t,e).$promise;o.then(n).catch(r)}}})).catch(r)}))},C.getCurrentInstanceSlug=function(){var e=C.getInstance();if(angular.isDefinedAndFilled(d()(e,"slug")))return e.slug;var n=!f()(t.url(),"/a/"),r=t.path().split("/")||(n?["","",""]:["","a","",""]),i=n?r[1]:r[3];if("gsite"===i&&angular.isDefinedAndFilled(t.search().parent)){var a=decodeURIComponent(t.search().parent).split("/");return a.length<6?i:(a=a[5],a=l()(a.split("?")),l()(a.split("#")))}return i},C.getInstance=function(){return O||{}},C.getInstanceById=function(e,t,n){t=t||angular.noop,n=n||angular.noop,C.getSiblings(!1).then((function(r){var i=s()(r,{id:e});angular.isDefinedAndFilled(i)?t(i):u.get({uid:e},t,n)}))},C.getLogo=function(e){var t=C.getInstance();if(angular.isUndefinedOrEmpty(t))return"";var n="",r=E.translate(t.logoUrl);if(angular.isDefinedAndFilled(t.logo)){var a={};angular.forEach(t.logo,(function(e){a[e.lang]=e}));var o=E.translate(a);angular.isDefinedAndFilled(o)&&(n=angular.isDefinedAndFilled(o.logo)?o.logo:o.url,n=b.resizeImage(n,e))}else n=angular.isDefinedAndFilled(r)?b.resizeImage(r,e):b.getMediaUrl(c.PUBLIC_PATH_PREFIX+h()(i.DEFAULT_LOGO,"/"));return n},C.getProperty=function(e){var t=b.getProperty(e,C.getInstance());return angular.isDefined(t)?t:o.getProperty(e)},C.getSiblings=function(e){return e?S||[]:n((function(e,t){T.promise.then((function(){e(S||[])})).catch(t)}))},C.getSiblingsIds=function(e){return e?m()(S,"id")||[]:n((function(e,t){C.getSiblings(!1).then((function(t){e(m()(t,"id")||[])})).catch(t)}))},C.getUrl=function(e){e=e||C.getCurrent();var t=d()(e,"slug");if(angular.isUndefinedOrEmpty(t))return"";var n="",r=o.getCustomerSlug();return angular.isDefinedAndFilled(r)&&(n="/a/".concat(o.getCustomerSlug())),n+="/".concat(t),n},C.hasChildren=function(e){return angular.isDefinedAndFilled(s()(C.displayList()||[],{parent:e}))},C.instanceKeyToInstance=function(e,t,n){if(n=n||angular.noop,!angular.isUndefinedOrEmpty(e)){var r=s()(C.displayList(t),{id:e});return angular.isDefinedAndFilled(r)&&n(r),r}},C.instanceKeyToInstanceFromSiblings=function(e,t,n){var r;return!0===t||n?(r=s()(C.getSiblings(!0),{id:e}),angular.isFunction(t)&&t(r),r):angular.isFunction(t)&&!angular.isUndefinedOrEmpty(e)?C.getSiblings(!1).then((function(n){angular.isArray(n)?(r=s()(n,{id:e}),t(r)):t()})).catch(t):void 0},C.instanceToInstanceKey=function(e,t){angular.isDefinedAndFilled(e.id)&&t(e.id)},C.isDefaultInstanceSelected=function(e){return e=e||[],angular.isDefinedAndFilled(s()(e,{isDefaultInstance:!0}))},C.isInstanceSiblingsModelOutdated=function(e){var t=angular.isDefinedAndFilled(e)&&1===e.length&&e[0]===C.getCurrentInstanceId(),n=C.getSiblings(!0).length<=1,r=angular.isDefinedAndFilled(e);return!t&&n&&r},C.setInstance=function(t){var n=void 0===O;if(O=t,n&&Object(y.b)(C.mapStateToRedux()),angular.isDefinedAndFilled(d()(O,"head")))try{O.head=decodeURIComponent(O.head)}catch(e){}var i=o.getCustomerId();return p.put("instance-".concat(i,"-").concat(O.slug),O),p.put("instance-".concat(i,"-").concat(O.uid),O),C.is.loading.siblings?T.promise:(S=[O],e.get("User").isConnected()?(C.is.loading.siblings=!0,u.listSiblings({fields:"items(defaultUserDirectory,id,instance,isInFavoriteFeedKeys,logo,logoUrl,name,parent,slug,style,uid)",instanceId:C.getCurrentInstanceId()}).$promise.then(T.resolve).catch(T.reject),T.promise.then((function(e){S=e.items,r.$broadcast("instances-siblings-list-updated")})).finally((function(){C.is.loading.siblings=!1})),T.promise):T.resolve(S))},C.reduxReducerName="instance",C.reduxUpdateActionType="instance/update",C.mapStateToRedux=function(){var e=C.getCurrentInstanceId(),t=C.getInstance();return{entities:a()({},e,t),id:e,logo:C.getLogo(),parent:t.parent,slug:t.slug}},C.initReduxStore=function(){v.subscribe(C,!0)},C}n.r(t),n.d(t,"InstanceService",(function(){return r}));var i=n(3),a=n.n(i),o=n(21),s=n.n(o),c=n(51),l=n.n(c),u=n(4),d=n.n(u),p=n(17),f=n.n(p),g=n(28),m=n.n(g),v=n(552),h=n.n(v),y=n(819);r.$inject=["$injector","$location","$q","$rootScope","Config","Customer","InitialSettings","InstanceFactory","LocalStorage","LumsitesBaseService","ReduxStore","Translation","Utils"],angular.module("Services").service("Instance",r)},function(e,t){!function(){"use strict";function e(e,t,n,r){var i=this;i.Instance=t,i.getLanguage=function(){return n.getLang("current")},i.selectLanguage=function(t){angular.isUndefinedOrEmpty(t)||(e.location.href=r.updateUrlParameter(e.location.href,"lang",t))}}e.$inject=["$window","Instance","Translation","Utils"],angular.module("Directives").directive("lsLanguageSelector",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"/client/common/modules/language-selector/views/language-selector.html"}}))}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,l,u,d,p,f){function g(){var e=h.outerWidth();return e<=480?"palm":e>480&&e<=1023?"lap":"desk"}var m,v=this,h=angular.element(c);v.breakpoint=void 0,v.fromState={},v.isCustomizationLocked=!0,v.isLinearLoaderShown=!1,v.isMobileSidebarOpened=!1,v.isScrolling=!1,v.isSidebarOpened=!1,v.closeMobileSidebar=function(){v.isMobileSidebarOpened=!1},v.closeSidebar=function(){v.isSidebarOpened=!1},v.computeIsScrolling=function(){h.scrollTop()>0?v.isScrolling||(v.isScrolling=!0):v.isScrolling&&(v.isScrolling=!1)},v.getHeadTitle=function(){var e=p.getInstance().name||"",t=d.getCurrent();if(angular.isUndefinedOrEmpty(t))return e;var n=l.getCurrent();return angular.isDefinedAndFilled(n)&&t.type===s()(u,"AVAILABLE_CONTENT_TYPES.POST")&&f.hasTranslations(n.title)?"".concat(e," - ").concat(f.translate(n.title)):"template"===t.type&&f.hasTranslations(s()(t.template,"name"))?"".concat(e," - ").concat(f.translate(t.template.name)):f.hasTranslations(t.title)?"".concat(e," - ").concat(f.translate(t.title)):e},v.openMobileSidebar=function(){v.isMobileSidebarOpened=!0},v.openSidebar=function(){v.isSidebarOpened=!0},v.scrollToAnchor=function(){var t=r.hash();angular.isUndefinedOrEmpty(t)||(v.anchorLinkInterval=n((function(r){var i=angular.element("#".concat(t)),a=angular.isDefinedAndFilled(i);a&&e(t),(99===r||a)&&angular.isDefinedAndFilled(v.anchorLinkInterval)&&(n.cancel(v.anchorLinkInterval),delete v.anchorLinkInterval,e.yOffset=void 0)}),100,100))},v.stateChangeStart=function(e,t,n,r){v.fromState=r,r.name&&(v.isLinearLoaderShown=!0)},v.stateChangeSuccess=function(e,t,n,r){r.name&&(v.isLinearLoaderShown=!1),v.isSidebarOpened=s()(o.current,"data.designer",!1),v.updateCustomizationLockState(!0),angular.element("html, body").scrollTop(0),v.scrollToAnchor()},v.toggleMobileSidebar=function(){v.isMobileSidebarOpened=!v.isMobileSidebarOpened},v.toggleSidebar=function(){v.isSidebarOpened=!v.isSidebarOpened},v.updateCustomizationLockState=function(e){v.isCustomizationLocked=angular.isDefined(e)?e:!v.isCustomizationLocked},h.bind("scroll load",(function(){i.$apply((function(){v.computeIsScrolling()}))})),h.bind("resize",a()((function(){var e=g();e!==v.breakpoint&&i.$apply((function(){var t=v.breakpoint;v.breakpoint=e,i.$broadcast("layout-breakpoint",v.breakpoint,t)}))}),250)),function(){v.breakpoint=g(),m=angular.element("<div></div>",{class:"app-progress"});var e=t('<lx-progress lx-variant="circular"></lx-progress>')(i.$new());m.append(e)}()}n.r(t),n.d(t,"LayoutService",(function(){return r}));var i=n(71),a=n.n(i),o=n(4),s=n.n(o);r.$inject=["$anchorScroll","$compile","$interval","$location","$rootScope","$state","$window","Community","Config","Content","Instance","Translation"],angular.module("Services").service("Layout",r)},function(e,t){!function(){"use strict";function e(){}angular.module("Directives").directive("adminItemActions",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{actions:"=",item:"=",viewMode:"@"},templateUrl:"/client/common/modules/layout/modules/admin/views/admin-item-actions.html"}}))}()},function(e,t,n){"use strict";angular.module("Directives").directive("adminNavAccordion",(function(){return{restrict:"A",scope:{},controller:["$scope","$element",function(e,t){var n=!1;this.init=function(t){e.opened=!!(angular.isUndefined(t)||angular.isDefined(t)&&!t)},this.open=function(){e.opened=!0},this.close=function(){n||(e.opened=!1)},this.toggle=function(){e.opened=!e.opened},e.$watch("opened",(function(e,r){e!==r&&e&&(n=!0,t.next().velocity("slideDown",{duration:400,easing:"easeOutQuint",complete:function(){n=!1}})),e===r||e||t.next().velocity("slideUp",{duration:400,easing:"easeOutQuint"}),e!==r||e||r||t.next().hide(),e?(t.removeClass("admin-nav__link--accordion-close"),t.addClass("admin-nav__link--accordion-open")):(t.removeClass("admin-nav__link--accordion-open"),t.addClass("admin-nav__link--accordion-close"))}))}],link:function(e,t,n,r){r.init(n.closed),t.bind("click",(function(){e.$apply((function(){r.toggle()}))})),n.$observe("closed",(function(){e.$eval(n.closed)?r.close():r.open()}))}}}))},function(e,t){!function(){"use strict";function e(){}angular.module("Directives").directive("adminSectionHeader",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"/client/common/modules/layout/modules/admin/views/admin-section-header.html",transclude:{actions:"?adminSectionHeaderActions",filter:"?adminSectionHeaderFilter",title:"adminSectionHeaderTitle"}}}))}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(105);!function(){function n(n,r,i,a,o){var s=this,c=!1;s.Analytics=r,s.Style=i,s.Translation=a,s.Utils=o,n.$on("add-scope-info",(function(e,r){"footer"!==r||c||t.ENABLE_ANGULAR_DEBUG_INFO||(o.addScopeInfo(r,n,!1,!1),c=!0)})),function(){var r=e.get(t.SCOPE_INFO,"footer");if(!c&&!t.ENABLE_ANGULAR_DEBUG_INFO&&angular.isDefinedAndFilled(r)){var i=angular.isString(r)?r:"footer";o.addScopeInfo(i,n,!1,!1),c=!0}}()}n.$inject=["$scope","Analytics","Style","Translation","Utils"],angular.module("Controllers").controller("FooterController",n)}()}.call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c,l,u,d,p,f,g,m,v){var h,y=this;y.isInitialPicking=!1,y.isInstanceStyle=!1,y.Config=o,y.ConfigTheme=s,y.Content=c,y.Header=u,y.MediaConstant=f,y.Translation=g,y.getMediaStyles=function(e){return{"background-image":"url("+v.resizeImage(e.content[0].value)+")","background-size":"cover",height:"80px"}},y.initMediaClass=function(t){var n=e.get(u.getCurrent(),"properties",{});u.getCurrent().properties=n;var r=n.mediaClass||{};u.getCurrent().properties.mediaClass=r,angular.isDefinedAndFilled(r[t])?y.mediaClass[t]=r[t].split(", "):y.mediaClass[t]=[]},y.isDefaultHeader=function(){var e=u.getCurrent();return"default"===e.name||e.id===u.getDefaultHeader().id},y.manageSlideshowMedia=function(){i((function(){v.waitForAndExecute("#media-picker-header",a)}))},y.overrideHeader=function(){if(y.isDefaultHeader()&&!y.isInstanceStyle){var n=angular.fastCopy(u.getCurrent()||{});n=e.omit(n,["createdAt","id","uid","updatedAt","updatedBy"]),angular.extend(n,{author:m.getConnected().email,instance:d.getCurrentInstanceId(),name:Object(t.b)()}),u.setCurrent(n)}},y.reloadHeader=function(e){e=e||!1,n.$broadcast("template__reload-header",e)},y.revertToDefault=function(){y.isDefaultHeader()||p.confirm(g.translate("HEADER_SLIDESHOW_REVERT_CONFIRM"),g.translate("HEADER_SLIDESHOW_REVERT_CONFIRM_DESCRIPTION"),{cancel:g.translate("CANCEL"),ok:g.translate("OK")},(function(e){e&&(u.setCurrent(u.getDefaultHeader()),n.$broadcast("header-init"))}))},y.updateMediaClass=function(e){u.getCurrent().properties.mediaClass[e]=(y.mediaClass[e]||[]).join(", ")},h=c.getCurrent().id,y.mediaClass={},y.isInstanceStyle="app.front.instance-style"===r.current.name,y.mediaPickerUuid=!y.isInstanceStyle&&angular.isDefinedAndFilled(h)?"media-picker-header-"+h:"media-picker-header"}n.$inject=["$rootScope","$state","$timeout","AbstractPicker","Config","ConfigTheme","Content","Features","Header","Instance","LxNotificationService","MediaConstant","Translation","User","Utils"],angular.module("Controllers").controller("HeaderSettingsController",n)}()}.call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,g,m,v,h,y,E,b,O,C,T,S,I,_,A,w,D,L,P,N,R,j,k,F){function U(){var e="translateX(".concat(100*Y.activeIndex*-1,"%)");angular.element(".header-slideshow__images").css({"moz-transform":e,"ms-transform":e,"o-transform":e,transform:e,"webkit-transform":e})}function M(){angular.isDefinedAndFilled(G)&&t.cancel(G),G=void 0}function x(){if(angular.isUndefined(Y.userCanContributeInACommunity)&&b.hasFeature("community")&&R.isConnected()){m.filterize({action:"COMMUNITY_PUBLISH",instanceId:[T.getCurrentInstanceId()],maxResults:1,status:[v.CONTENT_STATUS.LIVE.value]},(function(e){Y.userCanContributeInACommunity=angular.isDefinedAndFilled(e)}),(function(){Y.userCanContributeInACommunity=!1}),"header-create-post-visibility","items(id)")}}function $(e){var t,n=[],r=Y.Header.getCurrent().properties;return angular.isDefinedAndFilled(a()(r,"mediaClass"))&&angular.isDefinedAndFilled(r.mediaClass[e])&&(t=r.mediaClass[e].split(",")),angular.isDefinedAndFilled(t)&&angular.forEach(t,(function(e){n.push("slide--".concat(e.trim()))})),n}function B(e){Y.activeIndex=e,U()}function W(e){!angular.isUndefined(e)&&e||M(),Y.activeIndex+1===a()(Y.Header.getCurrent(),"properties.media.length",0)?Y.activeIndex=0:Y.activeIndex++,U()}var G,Y=this,H=["app.front.instance-style","app.front.profile","app.front.search"],K=!1;Y.MAIN_NAV_TYPES=p.c,Y.activeIndex=0,Y.headerStyle=void 0,Y.userCanContributeInACommunity=void 0,Y.newPostDialogId="community-new-post-dialog",Y.Config=v,Y.ConfigTheme=h,Y.Content=y,Y.Features=b,Y.Header=O,Y.Instance=T,Y.Layout=S,Y.LegacySearch=I,Y.Notification=w,Y.SocialAdvocacy=L,Y.Style=P,Y.Translation=N,Y.User=R,Y.UserAccess=j,Y.currentView=o.current.name,Y.currentParams=o.params,i.$on("$stateChangeSuccess",(function(e,t){Y.currentView=o.current.name,Y.currentParams=o.params})),Y.addNewPost=function(){var e=m.getCurrent();r.$broadcast("create-new-post__open",void 0,e)},Y.canCustomizeLayout=function(){return a()(y.getCurrent(),"isCustomizableLayout",!1)&&"get"===y.getAction()&&R.isConnected()},Y.getHeaderTopClasses=function(){return Y.Features.hasMainNavInheritance(),"dark"===a()(Y.headerStyle,"properties.top.theme")?"header-top--theme-dark":"header-top--theme-light"},Y.getMediaClass=$,Y.getMediaDescription=function(e){return angular.isDefined(a()(e,"override.description"))&&angular.isDefinedAndFilled(Y.Translation.translate(e.override.description))?Y.Translation.translate(e.override.description):""},Y.getMediaImage=function(e){var t=function(e){return Y.Translation.translate(_.getMediaContent(e))}(e);return angular.isDefinedAndFilled(a()(t,"servingUrl"))?{"background-image":"url(".concat(k.resizeImage(t.servingUrl,C.MAX_IMAGE_SIZE),")"),height:O.getCurrent().height}:{}},Y.getMediaName=function(e){return angular.isDefinedAndFilled(a()(e,"override.name"))&&angular.isDefinedAndFilled(Y.Translation.translate(e.override.name))?Y.Translation.translate(e.override.name):""},Y.getSlideContentClass=function(e,t){var n=[];return Y.activeIndex===t&&n.push("header-slideshow__content--is-active"),n.push($(e)),n},Y.getSlideshowStyle=function(){var e=Y.Header.getCurrent().properties.style;return angular.isDefinedAndFilled(e)?"header-slideshow__container--".concat(e):""},Y.goToHome=function(){a()(y.getCurrent(),"isHomepage")&&location.reload();var e="";0===n.path().indexOf("/a/")&&(e="/a/".concat(E.getCustomerSlug())),e+="/".concat(Y.Instance.getInstance().slug),n.path(e)},Y.goToSlide=B,Y.initializeMetrics=function(){A.is.initialized||(u.lumappsPerformances.firstPainting=Date.now(),A.init())},Y.isReworkedUIModeOn=function(){return k.isReworkedUIModeOn(b)},Y.nextSlide=W,Y.isHeadlessModeOn=k.isHeadlessModeOn,Y.previousSlide=function(){M(),Y.activeIndex--,U()},Y.checkCreatePostRightsInContext=function(){var e=a()(y.getCurrent(),"type");return e!==C.CONTENT_TYPES.COMMUNITY||m.isWriteable()},Y.getHeaderHeight=k.getHeaderHeight,Y.unregisterNewPostOpen=r.$on("create-new-post__open",(function(e,t,n){n||k.waitForAndExecute("#".concat(Y.newPostDialogId))})),i.$on("$destroy",(function(){angular.isDefined(Y.unregisterNewPostOpen)&&angular.isFunction(Y.unregisterNewPostOpen)&&(Y.unregisterNewPostOpen(),delete Y.unregisterNewPostOpen)})),i.$on("$stateChangeStart",(function(){K=!1})),i.$on("$stateChangeSuccess",(function(e,t){if(K)K=!1;else{var n=a()(y.getCurrent(),"headerDetails");l()(H,t.name)||angular.isUndefinedOrEmpty(n)?O.setCurrent(O.getDefaultHeader()):O.setCurrent(n),Y.init()}})),i.$on("cancel-header-autoplay",M),i.$on("instance-style-settings",(function(){Y.init()})),i.$on("header-init",(function(){Y.init()})),i.$on("abstract-picker__close-end",(function(e,t){"media-picker-header"===t&&Y.init()})),i.$on("template__get-header",(function(){K=!0,Y.init()})),i.$on("template__reload-header",(function(e,t){if(t=!!angular.isUndefined(t)||t,M(),t){var n=y.getCurrent();angular.isDefinedAndFilled(a()(n,"headerDetails.media"))||angular.isDefinedAndFilled(a()(n,"headerDetails.images"))?O.setCurrent(n.headerDetails):O.setCurrent(O.getDefaultHeader())}Y.init()})),e.bind("click",(function(e){"get"!==Y.Content.getAction()&&l()(["default","simple"],Y.Content.getViewMode())&&i.$apply((function(){D.resetRow(),g.resetCell(),F.resetWidget(),O.isActive=!0,r.$broadcast("designer-component__set","header")}))})),Y.init=function(){var e=O.getCurrent()||{},n=O.getDefaultHeader();Y.Features.hasMainNavInheritance()?Y.headerStyle=P.getInstanceParentStyle():Y.headerStyle=Y.Style.getCurrent("global"),Y.currentMainNavStyle=Y.Style.getCurrent("global"),M(),function(e,t){if(angular.isUndefined(e.height)&&(e.height=t&&s()(t,"height")?t.height:270),angular.isUndefined(e.properties)&&(e.properties={}),angular.isUndefined(a()(e,"properties.wrapperHeight"))&&(e.properties.wrapperHeight=a()(t,"properties.wrapperHeight",170)),angular.isUndefined(a()(e,"properties.layoutPosition"))){var n=b.hasMainNavInheritance()?24:-50;e.properties.layoutPosition=a()(t,"properties.layoutPosition",n)}angular.isUndefined(a()(e,"properties.media"))&&(e.properties.media=[]),angular.isUndefined(a()(e,"properties.mediaClass"))&&(e.properties.mediaClass={}),e.properties.interval=Math.floor(e.properties.interval)||5}(e,n),(angular.isDefined(y.getCurrent())||"app.front.404"===o.current.name)&&(a()(e,"properties.autoplay",!1)&&!Object(f.n)()&&(G=t((function(){W(!0)}),1e3*e.properties.interval)),Y.activeIndex+1>e.properties.media.length&&B(0));var r=a()(e,"properties.random",!1)&&!Object(f.n)();Y.medias=r?d()(e.properties.media):e.properties.media,c(x,1e3)}}n.r(t),n.d(t,"HeaderController",(function(){return r}));var i=n(4),a=n.n(i),o=n(356),s=n.n(o),c=n(17),l=n.n(c),u=n(1140),d=n.n(u),p=n(137),f=n(31);r.$inject=["$element","$interval","$location","$rootScope","$scope","$state","$timeout","$window","Cell","Community","Config","ConfigTheme","Content","Customer","Features","Header","InitialSettings","Instance","Layout","LegacySearch","Media","Monitoring","Notification","Row","SocialAdvocacy","Style","Translation","User","UserAccess","Utils","Widget"],angular.module("Controllers").controller("HeaderController",r)},function(e,t,n){var r=n(530),i=n(1064);e.exports=function(e){return i(r(e))}},function(e,t){var n=Math.floor,r=Math.random;e.exports=function(e,t){return e+n(r()*(t-e+1))}},function(e,t,n){var r=n(1064),i=n(99);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e,t,n){var r,i,o=this;o.bookmarks=[],o.ConfigInstance=e,o.User=t,o.Utils=n,i=t.getAccountType(),(r=o.bookmarks).push.apply(r,a()(s()(o.ConfigInstance.BOOKMARKED_APPS,(function(e){return!e.restrictTo||e.restrictTo.includes(i)}))))}n.r(t),n.d(t,"BookmarkedAppsController",(function(){return r}));var i=n(19),a=n.n(i),o=n(75),s=n.n(o);r.$inject=["ConfigInstance","User","Utils"],angular.module("Controllers").controller("BookmarkedAppsController",r)},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a){this.Layout=n,this.resetUserTemplate=function(){r.confirm(i.translate("CONTENT_SETTINGS_IS_CUSTOMIZABLE_LAYOUT_RESET"),i.translate("CONTENT_SETTINGS_IS_CUSTOMIZABLE_LAYOUT_RESET_DESCRIPTION"),{cancel:i.translate("CANCEL"),ok:i.translate("OK")},(function(n){n&&t.resetUserTemplate(e.getCurrent(),a.getConnected(),(function(){location.reload()}))}))}}e.$inject=["Content","ContentTemplate","Layout","LxNotificationService","Translation","User"],angular.module("Controllers").controller("CustomizableLayoutController",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,c,l,u,d){function p(){f.isWaiting=!1,angular.forEach(o.displayList(),(function(e){e.favorites&&s.filterize({directory:e.id,lang:l.getLang("current"),maxResults:10,sortOrder:"name",userFavoritesOnly:!0},void 0,void 0,e.id,g)}))}var f=this,g={items:{deletableFromFavorite:!0,directory:!0,id:!0,link:!0,markedAsFavorite:!0,name:!0,order:!0,thumbnail:!0,uid:!0}};f.isWaiting=!0,f.Directory=o,f.DirectoryEntry=s,f.Translation=l,f.Utils=d,f.buildLink=function(t){var n={instance:t.instanceSlug,slug:l.translate(t.slug)};return e.href("app.front.content-get",n,{absolute:!0})},f.directoryEntryLink=function(e,t){var r=s.getEntryValueByType(e,t,"url");if(angular.isDefinedAndFilled(r)){var i=l.translate(r);n.open((0===i.indexOf("http")?"":"http://")+i,"_blank")}},f.displayDirectory=function(e){return angular.isDefined(e)&&e.favorites&&(c.getCurrentInstanceId()===e.instance||e.inherited)&&u.isConnected()},f.getDirectoryType=function(e){return angular.isUndefinedOrEmpty(a()(e,"type"))?"":"directory-favorites__directory--".concat(e.type)},f.openDirectoryEntries=function(e){r.handleTaggingMap("open-header-directory","directory",{isHomePage:!!angular.isDefined(i.getCurrent())&&i.getCurrent().isHomepage,item:e})},u.isConnected()?t(p,1e3):f.isWaiting=!1}n.r(t),n.d(t,"DirectoryFavoritesController",(function(){return r}));var i=n(4),a=n.n(i);r.$inject=["$state","$timeout","$window","Analytics","Content","Directory","DirectoryEntry","Instance","Translation","User","Utils"],angular.module("Controllers").controller("DirectoryFavoritesController",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o){var s=this;s.LIST_KEY="favorite-instance-header";var c={items:{id:!0,name:!0,properties:!0,slug:!0,title:!0}};s.Instance=r,s.Translation=i,s.displayFavorites=function(){return a.isConnected()&&angular.isDefinedAndFilled(r.displayList(s.LIST_KEY))},s.redirectToHomepage=function(r){var a,s=i.translate(e.get(r,"properties.gsite-url","")).toLowerCase();a=e.includes(s,"sites.google.com")?s:o.buildInstanceUrl(r,n.getCustomerSlug()),t.open(a,"_blank")},a.isConnected()&&r.filterize({maxResults:10,sortOrder:"name",userFavoritesOnly:!0},void 0,void 0,s.LIST_KEY,c)}t.$inject=["$window","Customer","Instance","Translation","User","Utils"],angular.module("Controllers").controller("InstanceFavoritesController",t)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c,l,u){var d=this;d.Features=r,d.LxDialogService=i,d.Notification=o,d.NotificationSettings=s,d.UserSettings=l,d.Utils=u,d.clearNotifications=function(){0!==o.unreadNotificationCount&&a.confirm(c.translate("ALERT_NOTIFICATION_CLOSE_ALL"),c.translate("ALERT_NOTIFICATION_CLOSE_ALL_DESCRIPTION"),{cancel:c.translate("CANCEL"),ok:c.translate("OK")},(function(e){e&&o.setAllAsRead()}))},d.shouldDisplaySubheader=function(t,n){if(angular.isUndefinedOrEmpty(t))return!1;var r=e.get(t,"notification.priority",0),i=o.displayList(o.KEY_UNREAD);return 0===n&&0!==r||0!==n&&r!==e.get(i[n-1],"notification.priority")},d.trackNotificationsOpen=function(){t.handleTaggingMap("open-notifications","notifications",{isHomePage:e.get(n.getCurrent(),"isHomepage",!1)})},d.getNotificationWidth=function(){return Math.min(400,window.screen.width-48)}}t.$inject=["Analytics","Content","Features","LxDialogService","LxNotificationService","Notification","NotificationSettings","Translation","UserSettings","Utils"],angular.module("Controllers").controller("NotificationsController",t)}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t,n,r){var i=this;i.autocompleteIcon=void 0,i.query=n.query,i.LegacySearch=n,i.autocomplete=function(e){angular.isDefinedAndFilled(e)?i.autocompleteIcon=void 0:i.autocompleteIcon="clock";for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.autocomplete.apply(this,[e].concat(r))},i.handleResultSelection=function(e){var t=e.query;angular.isUndefinedOrEmpty(t)||(n.query=t,n.openSearchLanding())},i.submitSearchForm=function(){(i.isAutocompleteEnabled||i.IS_NATIVE_REWORK&&angular.isDefinedAndFilled(i.query))&&(n.query=i.query),n.openSearchLanding()},e.$watch((function(){return n.query}),(function(e,t){e!==t&&(i.query=e)})),i.isCloudSearchEnabled=t.hasFeature("cloudsearch")&&r.isConnected(),i.IS_NATIVE_REWORK=!i.isCloudSearchEnabled&&t.hasFeature("elasticsearch-ps"),i.isAutocompleteEnabled=!i.isCloudSearchEnabled&&!i.IS_NATIVE_REWORK&&t.hasFeature("autocomplete-search")&&r.isConnected()}n.r(t),n.d(t,"SearchEngineController",(function(){return r})),r.$inject=["$scope","Features","LegacySearch","User"],angular.module("Controllers").controller("SearchEngineController",r)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(208);!function(){function n(n,r,i,a,o,s,c,l,u,d,p,f,g,m,v,h,y,E,b,O,C,T,S){function I(){w.enableNotifications=!e.get(w.currentUser,"settings.notificationPreferences.vacationMode",!1);var t="settings.notificationPreferences.emailSummaryEnabled";e.set(w.currentUser,t,e.get(w.currentUser,t,!1)),R={altLang:e.first(e.get(w.currentUser,"langs",[])),mainLang:w.currentUser.lang},function(){var t=e.get(w.currentUser,"settings.notificationPreferences.notificationTypeStatus");if(!angular.isUndefinedOrEmpty(t)){var n=Object.keys(e.omit(e.first(t),"kind"));angular.forEach(n,(function(n){var r=e.filter(t,(function(t){return!0===e.get(t,n)}));e.set(w.selectedCount,n,r.length),e.set(w.allSelected,n,0!==r.length)}))}}(),w.notificationsPreferences=angular.fastCopy(e.get(w.currentUser,"settings.notificationPreferences")),angular.isUndefinedOrEmpty(w.notificationsPreferences)||(angular.forEach(P,(function(t){e.set(w.formattedTime,t,moment.utc(e.get(w.notificationsPreferences,t)||"09:00:00.000000",N).utcOffset(L).format(D))})),angular.forEach(w.notificationsPreferences.notificationTypeStatus,(function(e){angular.isUndefinedOrEmpty(e.hooks)||(angular.forEach(e.hooks,(function(t){e["hook-"+t.hook]=t.notify})),delete e.hooks)})))}function _(){return p.hasFeature("slack")||p.hasFeature("workplace")}var A,w=this,D=moment().locale(b.getLang("current")).localeData().longDateFormat("LT"),L=moment().utcOffset(),P=["timeSlot.endAt","timeSlot.startAt","emailSummaryTime"],N="HH:mm:ss.000001",R={};w.HOOK_LIST_KEY="user-settings-hook-list",w.USER_SETTINGS_DIALOG_ID="user-settings-dialog",w.formattedTime={emailSummary:"",timeSlot:{endAt:"",startAt:""}},w.notificationsPreferences={},w.selectedCount={},w.allSelected={},w.userModel={},w.Config=l,w.ConfigInstance=u,w.Customer=d,w.Features=p,w.FormValidation=f,w.Hook=g,w.User=O,w.UserSettings=C,w.Utils=T,w.SocialAdvocacy=S,w.getLoginUrl=function(){return"/login?r="+c.location.pathname},w.hasNativeIntegrations=_,w.logout=function(){h.reset(),window.localStorage&&window.localStorage.clear(),c.location.href="/logout"},w.redirectToProfile=function(){p.hasFeature("social")?O.redirectToSocialProfile():O.redirectToProfile(w.User.getConnected())},w.registerSettingsForm=function(t){s((function(){angular.isDefinedAndFilled(e.get(t,"userSettingsForm"))&&(A=t.userSettingsForm)}))},w.saveProfile=function(r,i,a){var o;r=r||A,a=a||angular.noop;var l=!1,u=w.currentUser.lang,d=w.currentUser.langs;if(angular.isDefinedAndFilled(e.get(r,"password"))&&(r.$invalid&&(l=!0,o="USER_PROFILE_FORM_INVALID"),O.isPasswordEditable()&&!f.isElementMatch(r.password,r.rePassword)&&(l=!0,o="USER_PROFILE_PASSWORD_DO_NOT_MATCH"),l))return f.setFormDirty(r),void E.error(b.translate(o));if(angular.isDefinedAndFilled(d)){if(angular.isUndefinedOrEmpty(u))return E.error(b.translate("USER_PROFILE_MISSING_LANGUAGE")),void a();if(angular.isDefinedAndFilled(d[0])&&u===d[0])return E.error(b.translate("USER_PROFILE_SAME_LANGUAGES")),void a()}var p=[];(angular.isDefinedAndFilled(d)||angular.isObject(d))&&(angular.isObject(d)&&angular.isDefinedAndFilled(d[0])?p.push(d[0]):angular.isArray(d)?p.concat(d):angular.isString(d)&&p.push(d)),function(){if(!angular.isUndefinedOrEmpty(w.notificationsPreferences)){var t=e.get(w.currentUser,"settings.notificationPreferences");angular.isUndefined(t)&&(e.set(w.currentUser,"settings.notificationPreferences",{}),t=w.currentUser.settings.notificationPreferences),angular.forEach(P,(function(n){angular.isDefinedAndFilled(e.get(w.formattedTime,n))&&e.set(t,n,moment(e.get(w.formattedTime,n),D).utc().format(N))}));var n=angular.fastCopy(w.notificationsPreferences.notificationTypeStatus);angular.forEach(n,(function(t){var r=Object.keys(t);if(e.includes(r.join(" "),"hook-")){var i=e.find(n,{kind:t.kind});angular.isUndefined(i)&&(n.push({kind:t.kind}),i=e.last(n)),i.hooks=[],angular.forEach(t,(function(t,n){e.startsWith(n,"hook-")&&i.hooks.push({hook:n.replace("hook-",""),notify:t})}))}})),angular.extend(t,{emailSummaryEnabled:w.notificationsPreferences.emailSummaryEnabled,notificationTypeStatus:n,timeSlotEnabled:w.notificationsPreferences.timeSlotEnabled,vacationMode:!w.enableNotifications})}}(),C.save({alternateEmail:w.currentUser.alternateEmail,currentPassword:w.userModel.currentPassword,lang:u,langs:p,password:w.userModel.password,rePassword:w.userModel.rePassword,settings:w.currentUser.settings,showTutorial:!1},(function(){w.userModel={},O.setConnectedUser(w.currentUser),O.initUserLangsAndNotifications(),E.success(b.translate("USER_PROFILE_SAVE_SUCCESS")),angular.isFunction(i)?i():(y.close(w.USER_SETTINGS_DIALOG_ID),(R.mainLang!==u||angular.isDefinedAndFilled(d)&&R.altLang!==d[0])&&(t.d.forEach((function(e){n.search(e,void 0)})),s((function(){return c.location.reload()}),0,!1)))}),(function(e){T.displayServerError(e),a()}))},w.selectFallbackLanguage=function(e){angular.isUndefinedOrEmpty(e)||(b.setLang("preferred",e),b.initLanguages(v.getInstance()))},w.selectMainLanguage=function(e){angular.isUndefinedOrEmpty(e)||b.getLang("current")===e||(b.setLang("current",e),b.initLanguages(v.getInstance()),r.$broadcast("user-settings-current-lang",e))},w.swapLangs=function(){var e=w.currentUser.lang;w.currentUser.lang=w.currentUser.langs[0],w.currentUser.langs[0]=e,w.selectMainLanguage(w.currentUser.lang),w.selectFallbackLanguage(w.currentUser.langs[0])},w.toggleColumnSelection=function(e,t){angular.isUndefinedOrEmpty(t)||angular.forEach(w.notificationsPreferences.notificationTypeStatus,(function(n){void 0!==n[t]&&(n[t]=e),w.updateSelectedCount(e,t)}))},w.updateSelectedCount=function(e,t){e?w.selectedCount[t]++:w.selectedCount[t]>0&&w.selectedCount[t]--,w.allSelected[t]=0!==w.selectedCount[t]},w.getTranslationKeyForKind=function(e){return"NOTIFICATION.TYPE.".concat(e.replace(/_/g,"."),".DESCRIPTION")},i.$on("lx-dialog__open-start",(function(t,n,r){n===w.USER_SETTINGS_DIALOG_ID&&(w.activeTabIndex=e.get(r,"activeTabIndex",0),p.hasFeature("webhooks")&&g.filterize({family:m.FAMILIES.NOTIFICATION,status:m.STATUS.LIVE},void 0,void 0,w.HOOK_LIST_KEY,m.PROJECTION.USER_SETTINGS))})),i.$on("lx-dialog__close-end",(function(e,r){r===w.USER_SETTINGS_DIALOG_ID&&(w.currentUser=angular.fastCopy(O.getConnected()),I(),t.d.forEach((function(e){n.search(e,void 0)})))})),i.$watch("vm.activeTabIndex",(function(e){p.hasFeature("social")&&!a.is("app.front.profile")||t.d.forEach((function(t,r){switch(t){case"socialProfiles":n.search(t,r===e&&S.canAccessSocialAdvocacyBasicFeatures()||void 0);break;case"nativeIntegrations":n.search(t,r===e&&_()||void 0);break;default:n.search(t,r===e||void 0)}}))})),w.currentUser=angular.fastCopy(O.getConnected()),angular.isDefined(o["user-profile"])&&s((function(){T.waitForAndExecute("#"+w.USER_SETTINGS_DIALOG_ID)})),w.hasForcedCustomNotifs=p.hasFeature("force_custom_notifications"),I()}n.$inject=["$location","$rootScope","$scope","$state","$stateParams","$timeout","$window","Config","ConfigInstance","Customer","Features","FormValidation","Hook","HookConstant","Instance","LocalStorage","LxDialogService","LxNotificationService","Translation","User","UserSettings","Utils","SocialAdvocacy"],angular.module("Controllers").controller("UserSettingsController",n)}()}.call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(e){var t="translate3d("+100*e*-1+"%, 0, 0)";return{"moz-transform":t,"ms-transform":t,"o-transform":t,transform:t,"webkit-transform":t}}function u(){g.$LIGHTBOX.removeClass("lightbox--first-image lightbox--last-image"),0===m&&g.$LIGHTBOX.addClass("lightbox--first-image"),m===g.imgSources.length-1&&g.$LIGHTBOX.addClass("lightbox--last-image")}function d(){g.$LIGHTBOX_WRAPPER.css(l(m+1)),m++,u()}function p(){g.$LIGHTBOX_WRAPPER.css(l(m-1)),m--,u()}function f(e){switch(e.which){case 37:m>0&&p();break;case 39:m<g.imgSources.length-1&&d();break;default:return}e.preventDefault()}var g=this,m=0;g.$LIGHTBOX=void 0,g.$LIGHTBOX_WRAPPER=void 0,g.$LIGHTBOX_PREV=void 0,g.$LIGHTBOX_NEXT=void 0,g.unregisterLightboxOpen=n.$on("ls-lightbox__open",(function(e,t,n){angular.isArray(t)||(t=[t]),g.init(t,n)})),g.unregisterLightboxClose=n.$on("ls-lightbox__close",(function(){g.$LIGHTBOX.removeClass("lightbox--is-shown"),t.unbind("keydown",f),g.$LIGHTBOX.unbind("click",a.close)})),r.$on("$destroy",(function(){angular.isDefined(g.unregisterLightboxOpen)&&angular.isFunction(g.unregisterLightboxOpen)&&(g.unregisterLightboxOpen(),delete g.unregisterLightboxOpen),angular.isDefined(g.unregisterLightboxClose)&&angular.isFunction(g.unregisterLightboxClose)&&(g.unregisterLightboxClose(),delete g.unregisterLightboxClose)})),g.init=function(n,r){m=r||0,o.register(),function(t){g.imgSources=e.map(t,(function(e){var t=s.getMediaContent(e,c.inputLanguage,!0);return angular.isString(e)?e:s.getMediaImage(e,t,!0,i.MAX_IMAGE_SIZE)}))}(n),g.$LIGHTBOX.bind("click",a.close),1!==g.imgSources.length&&(t.bind("keydown",f),g.$LIGHTBOX_PREV.bind("click",(function(e){e.preventDefault(),e.stopPropagation(),p()})),g.$LIGHTBOX_NEXT.bind("click",(function(e){e.preventDefault(),e.stopPropagation(),d()}))),u(),g.$LIGHTBOX_WRAPPER.css(l(m)),g.$LIGHTBOX.css("z-index",o.getDepth()).addClass("lightbox--is-shown")}}t.$inject=["$document","$rootScope","$scope","InitialSettings","Lightbox","LxDepthService","Media","Translation"],angular.module("Directives").directive("lsLightbox",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t){e.vm.$LIGHTBOX=t,e.vm.$LIGHTBOX_WRAPPER=t.find(".lightbox__wrapper"),e.vm.$LIGHTBOX_PREV=t.find(".lightbox__nav--prev"),e.vm.$LIGHTBOX_NEXT=t.find(".lightbox__nav--next")},replace:!0,restrict:"E",scope:{},templateUrl:"/client/common/modules/lightbox/views/lightbox.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.isOpen=!1,n.close=function(){n.isOpen&&(n.isOpen=!1,t.waitForAndExecute(".lightbox",(function(){e.$broadcast("ls-lightbox__close")})))},n.open=function(r,i){angular.isUndefinedOrEmpty(r)||(n.isOpen=!0,t.waitForAndExecute(".lightbox",(function(){e.$broadcast("ls-lightbox__open",r,i)})))}}e.$inject=["$rootScope","Utils"],angular.module("Services").service("Lightbox",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o){function s(){var t=e.reject(l.originalItems,(function(t){return e.includes(l.currentItemsNames,t.name)}));angular.isDefinedAndFilled([l.query,l.serviceSettings.searchFilterName],"every")?l.service.defaultParams[l.serviceSettings.searchFilterName]=l.query:angular.isDefinedAndFilled(l.serviceSettings.searchFilterName)&&(l.service.defaultParams[l.serviceSettings.searchFilterName]=void 0),l.service.filterize(l.serviceSettings.defaultParams,(function(r){if(!angular.isUndefinedOrEmpty(r)){var i=l.service._services[l.LIST_KEY];angular.forEach(l.currentItems,(function(e){o.reject(l.service.displayList(l.LIST_KEY),{name:e.name})})),angular.forEach(l.service.displayList(l.LIST_KEY),(function(e){o.reject(t,{name:e.name})}));var a=e.map(l.selectedRows,"id");angular.forEach(l.service.displayList(l.LIST_KEY),(function(t){if(e.includes(a,t.id)){var r=e.find(l.selectedRows,{id:t.id});n.$broadcast("lx-data-table__unselect",l.LIST_ITEMS_DATA_TABLE_ID,r),n.$broadcast("lx-data-table__select",l.LIST_ITEMS_DATA_TABLE_ID,t)}})),i._list=i._list.concat(t)}}),void 0,l.LIST_KEY)}function c(e,t,n){l.LIST_ITEMS_DATA_TABLE_ID===t&&(l.selectedRows=n)}var l=this;l.LIST_ITEMS_DATA_TABLE_ID="list-items-data-table",l.LIST_KEY="list-items-dialog",l.query="",l.service={},l.LxDialogService=a,l.addItems=function(){l.onAdd(l.selectedRows),a.close(l.dialogId)},l.debouncedListItems=e.debounce(s,500),r.$on("lx-data-table__selected",c),r.$on("lx-data-table__unselected",c),r.$on("lx-dialog__open-start",(function(e,t){t===l.dialogId&&l.init()})),r.$on("lx-dialog__close-end",(function(e,t){t===l.dialogId&&i.unselectAll(l.LIST_ITEMS_DATA_TABLE_ID)})),l.init=function(){l.currentItems=l.currentItems||[],l.onAdd=l.onAdd||angular.noop,l.originalItems=l.originalItems||[],l.service=t.get(l.serviceSettings.name),l.isSearchEnabled=l.isSearchEnabled||!1,l.selectedRows=[],l.originalItemsNames=e.map(l.originalItems,"name"),l.currentItemsNames=e.map(l.currentItems,"name"),s()}}t.$inject=["$injector","$rootScope","$scope","LxDataTableService","LxDialogService","Utils"],angular.module("Directives").directive("lsListDialog",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{currentItems:"<?lsCurrentItems",dialogId:"@lsDialogId",dialogTitle:"@?lsDialogTitle",isSearchEnabled:"<?lsIsSearchEnabled",onAdd:"<?lsOnAdd",originalItems:"<?lsOriginalItems",serviceSettings:"<lsServiceSettings"},templateUrl:"/client/common/modules/list-dialog/views/list-dialog.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(){var e=this;e.type=e.type||"circular"}angular.module("Directives").directive("loader",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{hasBackground:"<?",listKey:"@?",method:"@?",noResults:"<?",service:"<?",theme:"@?",type:"@?"},templateUrl:"/client/common/modules/loader/views/loader.html"}}))}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){var o=function(e,t){a.ListKeyService.call(this,e,t);var n=this;r.$on("translation:setLang",(function(e,t){angular.isDefined(n.defaultParams)&&(n.defaultParams.lang=t)}))},s={};return o.prototype=Object.create(a.ListKeyService.prototype),o.prototype.cacheFilterize=function(n,r,a,o,s,c){r=r||angular.noop;var l,u=e.get(t.get("Layout"),"fromState");if(c||(l=this.getList(void 0,void 0,o,s)),e.get(i,"current.data.designer",!1)||e.get(u,"data.designer",!1)||e.includes(u.name,"app.admin")||angular.isUndefinedOrEmpty(l))return this.filterize(n,r,a,o,s);angular.isDefined(l)&&r(l)},o.prototype.computeProjection=a.SimpleService.prototype._computeProjection.bind(a.SimpleService.prototype),o.prototype.displayList=function(e,t){return this.getList(void 0,void 0,e,t)},o.prototype.displayAttributeFromList=function(e,t){return e=e||"default",angular.isArray(s[e])?s[e].length=0:s[e]=[],angular.forEach(this.displayList(e),(function(n){s[e].push(n[t])})),s[e]},o.prototype.displayNextPage=function(e,t,n){return this.nextPage(n,void 0,e,t)},o.prototype.getMinResults=function(t,n,r,i,a,o,s,c){var l=this;r=r||function(n){var r=e.get(n,"length",0);return r>=(t.originalMaxResults||t.maxResults)},i=i||angular.noop,a=a||angular.noop;var u=c?"nextPage":"filterize",d=function(u){if(n(u.splice(0,t.maxResults),!c),e.get(l,"_services["+l._getListKey(o)+"]._more",!1)){var d=r(u);if(d<=0)i();else{var p=angular.extend(angular.fastCopy(t),{maxResults:d,originalMaxResults:c?t.maxResults:t.originalMaxResults});l.getMinResults(p,n,r,i,a,o,s,!0)}}else i()};c?l[u](d,a,o,s):l[u](t,d,a,o,void 0,s)},o.prototype.getAllPages=function(t,n,r,i,a,o,s,c){var l=this;n=n||angular.noop,r=r||angular.noop,i=i||angular.noop;var u=s?"nextPage":"filterize",d=function(s,u){n(e.get(u,"items",[]),s),e.get(l,"_services["+l._getListKey(a)+"]._more")?l.getAllPages(t,n,r,i,a,o,!0,c):r(s)};s?l[u](d,i,a,c):l[u](t,d,i,a,o,c)},o.prototype.promiseFilterize=function(e,t,r,i){var a=this;return n((function(n,o){a.filterize(e,n,o,t,r,i)}))},o.prototype.promiseGet=function(e,t,r,i){var a=this;return n((function(n,o){a.get(e,n,o,t,r,i)}))},{createLumsitesBaseService:function(e,t){return new o(e,t)},proto:o}}t.$inject=["$injector","$q","$rootScope","$state","BaseService"],angular.module("Services").service("LumsitesBaseService",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/lumwork/document/:methodKey",{},{search:{isArray:!1,method:"GET",params:{methodKey:"search"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("LumworkDocumentFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r){var i=t.createLumsitesBaseService(n,{autoInit:!1,objectIdentifier:"id"}),a={maxResults:30,offset:0};return i.isSearchLoading=!1,i.openLumworkDocument=function(t){var n=function(e){if(!angular.isUndefinedOrEmpty([e,e.id,e.spaceId,e.version],"some"))return"".concat("https://work.lumapps.com/"+e.spaceId,"/").concat(e.id,"/?idVersion=").concat(e.version)}(t);angular.isDefined(n)&&e.open(n,"_blank")},i.search=function(e,t,o,s,c){if(!angular.isUndefinedOrEmpty(e)&&!i.isSearchLoading){o=o||angular.noop,s=s||angular.noop;var l=angular.extend(angular.fastCopy(a),t,{searchPattern:e});i.isSearchLoading=!0,n.search(l,(function(e){i.isSearchLoading=!1,e.items=e.items||[],i._services[c]._more=e.more,r.arrayRefresh(i._services[c]._list,e.items),o(e)}),(function(e){i.isSearchLoading=!1,s(e)}),c)}},i}n.r(t),n.d(t,"LumworkDocumentService",(function(){return r})),r.$inject=["$window","LumsitesBaseService","LumworkDocumentFactory","Utils"],angular.module("Services").service("LumworkDocument",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/lumwork/space/:methodKey",{},{get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("LumworkSpaceFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){var r=t.createLumsitesBaseService(n);return r.getPictureUrl=function(t){if(!angular.isUndefinedOrEmpty(e.get(t,"pictureUrl")))return"https://work.lumapps.com/"+t.pictureUrl},r}t.$inject=["LumsitesBaseService","LumworkSpaceFactory"],angular.module("Services").service("LumworkSpace",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/mlearning/:methodKey/:type",{},{detectLang:{isArray:!1,method:"POST",params:{methodKey:"language",type:"detect"}},suggestTags:{isArray:!1,method:"POST",params:{methodKey:"prediction",type:"tags"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("MachineLearningFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s){function c(n,s,c,l,p,f,g,m){angular.isUndefinedOrEmpty(n)||(s=s||o.inputLanguage,l=l||angular.noop,p=p||o.translate("DETECTED_LANG_MISMATCH"),f=f||"DETECTED_LANG_MISMATCH_DESC",g=g||o.translate("YES"),m=m||o.translate("NO"),u.isDetectingLang=!0,d.detectLang=Object(t.b)(),a.detectLang(void 0,{callId:d.detectLang,text:n}).$promise.then((function(t){if(d.detectLang===e.get(t,"callId")&&!angular.isUndefinedOrEmpty(e.get(t,"lang"))&&e.includes(r.getInstance().langs,t.lang)){if(t.lang===s)return u.isDetectingLang=!1,void l(t.lang);if(angular.isFunction(c)){var n=o.translate("LANG_"+s.toUpperCase())||s,a=o.translate("LANG_"+t.lang.toUpperCase())||t.lang;a=a.toLowerCase(),i.confirm(p,o.replace(f,["DETECTED_LANG","CURRENT_LANG","DETECTED_LANG"],[a,n,a]),{cancel:m,ok:g},(function(e){u.isDetectingLang=!1,c(t.lang,e)}))}else u.isDetectingLang=!1}else u.isDetectingLang=!1})))}var l,u={},d={detectLang:void 0};return u.DETECT_LANG_ON_BLUR=!0,u.isDetectingLang=!1,u.detectLang=function(e,t,r,i,a,o,s,d,p){u.isDetectingLang||angular.isUndefinedOrEmpty(e)||(angular.isDefined(l)&&(n.cancel(l),l=void 0),p?c(e,t,r,i):l=n((function(){c(e,t,r,i)}),5e3))},u}n.$inject=["$timeout","Instance","LxNotificationService","MachineLearningFactory","Translation","Utils"],angular.module("Services").service("MachineLearning",n)}()}.call(this,n(38))},function(e,t,n){"use strict";n.r(t);var r=n(35);!function(){function e(e,t,n,i,a){var o=this;o.mediaPickerId=Object(r.b)(),o.Config=t,o.MediaConstant=i,o.Utils=a,o.openMediaPicker=function(){a.waitForAndExecute("#".concat(o.mediaPickerId),e)}}e.$inject=["AbstractPicker","Config","Features","MediaConstant","Utils"],angular.module("Directives").directive("lsMediaManager",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",restrict:"E",scope:{multi:"=?lsMulti",ngModel:"="},templateUrl:"/client/common/modules/media-manager/views/media-manager.html"}}))}()},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/document/:methodKey"),{},{createFolder:{isArray:!1,method:"POST",params:{methodKey:"save"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/document/folder/:methodKey")},createUpload:{isArray:!1,method:"POST",params:{methodKey:"get"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/document/uploadUrl/:methodKey")},emptyTrash:{isArray:!1,method:"POST",params:{methodKey:"empty"},url:"".concat(t.APPLICATION_HOST,"/_ah/api/lumsites/v1/document/trash/:methodKey")},get:{isArray:!1,method:"POST",params:{methodKey:"get"}},getMulti:{isArray:!1,method:"POST",params:{methodKey:"getMulti"}},getPermissions:{isArray:!1,method:"POST",params:{methodKey:"getPermissions"}},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},search:{isArray:!1,method:"POST",params:{methodKey:"search"}},preview:{isArray:!1,method:"GET",params:{methodKey:"preview"}},restore:{isArray:!1,method:"POST",params:{methodKey:"restore"}},trash:{isArray:!1,method:"POST",params:{methodKey:"trash"}},update:{isArray:!1,method:"POST",params:{methodKey:"update"}}})}n.r(t),n.d(t,"DocumentFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("DocumentFactory",r)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,s,l,d,f){function m(e){var t=s.getSource(e),n=t&&t.toLowerCase()===l.PROVIDERS.google;return n}function h(e){var t=s.getSource(e),n=t&&t.toLowerCase()===l.PROVIDERS.microsoft;return n}function E(){return E=c()(o.a.mark((function t(n,r,i){var a,s,c,u,d,p,f,g,m,h=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:"DocumentProvider",s=e.get(a),c=n.categoryId,u=n.providerId,t.next=5,s.getProviderCategory(u,c);case 5:return d=t.sent,p=0===r.length?d.rootPath:v()(r).docPath,f=d.properties,g={docPath:p,searchParameters:f},m=i?l.DOCUMENT_TYPES.folders:[],angular.isDefinedAndFilled(m)&&(g.searchTypes=m),t.abrupt("return",g);case 12:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}var O=a.createLumsitesBaseService(i,{autoInit:!1,objectIdentifier:"uid"});return O.defaultParams={},O.createFolder=function(e){var n=e.names,r=e.parentPath,a=e.listKey,o=e.shared,s=void 0!==o&&o;if(angular.isUndefinedOrEmpty(n))return t.reject();var c=t.defer(),l=n[d.inputLanguage];return i.createFolder({name:l,parentPath:r,shared:s},c.resolve,c.reject,a),c.promise},O.download=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.inputLanguage,i=O.getMediaContentByLang(e,t,r);if(!angular.isUndefinedOrEmpty(i)||!angular.isUndefinedOrEmpty([i.downloadUrl,i.url],"some")){var a=i.downloadUrl||i.url;n.open(a,"_blank")}},O.emptyTrash=function(e,n){var r=t.defer();return i.emptyTrash({docPath:e},r.resolve,r.reject,n),r.promise},O.fetchPreview=function(e,n){var r=t.defer();return i.preview({docPath:e},r.resolve,r.reject,n),r.promise},O.getBackgroundImage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=O.getMediaContentByLang(e,t,r),o=O.getThumbnail(a,i,r);if(angular.isDefinedAndFilled(o))return f.getBackgroundImage(o,n)},O.getCroppedThumbnailFromContent=function(e,t,n,r,i){if(t)return e.fileId?s.getDrivePreviewUrl(e.fileId):void 0;var a=O.getProperty(e,i,"servingUrl",r)||O.getProperty(e,i,"url",r),o=["image/gif","image/svg+xml"].includes(e.mimeType)?-1:n;return f.resizeImage(a,o)},O.getCroppedThumbnailFromMedia=function(e,t,n,r,i){var a=O.getMediaContentByLang(e,t,r),o=O.isMediaFromGoogle(e),c=s.isImage(a.type);if(!o&&!c)return"";var l=O.getCroppedThumbnailFromContent(a,o,n,r,i);return l||(l=function(e,t){return angular.isObject(e.thumbnail)?e.thumbnail[t]||"":e.thumbnail}(e,r)),l},O.getCroppedThumbnailFromRootContent=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a="";return e.mediaThumbnail&&(a=O.getCroppedThumbnailFromMedia(e.mediaThumbnail,t,n,r,i)),!a&&e.thumbnail&&(a=-1!==n?f.resizeImage(e.thumbnail,n):e.thumbnail),a},O.getDescription=function(e,t,n){return O.getProperty(e,t,"description",n)},O.getFocusPointFromMedia=function(e,t,n){if(e){var r=O.getMediaContentByLang(e,t,n);return r.focalPoint||void 0}},O.getMandatorySortOrders=function(){return["-isFolder"]},O.getMediaContentByLang=function(e,t,n,i,a){if(angular.isUndefinedOrEmpty(e))return{};n=n||d.inputLanguage,t=Boolean(t);var o=e[a]||(e.hasCroppedContent?e.croppedContent:e.content),s=(t?angular.fastCopy(p()(o)):{})||{},c=angular.fastCopy(y()(o,{lang:n}));if(angular.isDefinedAndFilled(c)&&(s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},s,{},c)),!i){var l=d.translate_(e.name,n,t);angular.isDefinedAndFilled(l)&&(s.name=l);var f=d.translate_(e.description,n,t);angular.isDefinedAndFilled(f)&&(s.description=f);var m=d.translate_(e.thumbnail,n,t);angular.isDefinedAndFilled(m)&&(s.thumbnail=m)}return"ONEDRIVE_SITE"===g()(e,"properties.type")&&(s.name=e.properties.displayName),s.owner=s.owner||g()(p()(e.content||[]),"owner"),s},O.getMediaIcon=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(angular.isUndefinedOrEmpty(e))return"";var r=O.getMediaContentByLang(e,t,n),i=g()(e,"properties.type");if("ONEDRIVE_SITE"===i)return"mdi-web";if("ONEDRIVE_DRIVE"===i)return"mdi-onedrive";if("GOOGLE_TEAMDRIVE"===i)return"mdi-google-drive";if(e.isFolder)return"mdi-folder";var a=angular.isUndefinedOrEmpty([g()(r,"mimeType"),g()(r,"mimeType")],"every");if(a)return"mdi-close";var o=r.mimeType,c=r.type;return s.isImageMimeType(o)||s.isImage(c)?"mdi-image":s.isVideoMimeType(o)||s.isVideo(c)?"mdi-video":(s.isDocumentMimeType(o)||s.isDocument(c),"mdi-file-document-box")},O.getMulti=function(e){return angular.isUndefinedOrEmpty(e)?t.resolve([]):i.getMulti({docPaths:e}).$promise},O.getName=function(e,t,n){return O.getProperty(e,t,"name",n)},O.getObjectId=function(e){if(!angular.isUndefinedOrEmpty(e)){if(b()(g()(e,"type",""),"ONEDRIVE_"))return e.uid;var t=O.getMediaContentByLang(e,!0);return g()(t,"fileId")}},O.getObjectKind=function(e,t){var n=t.providerId,r=l.KIND.MEDIA;return e.isFolder?r=l.KIND.FOLDER:n!==l.PROVIDERS.google&&n!==l.PROVIDERS.microsoft||(r=l.KIND.DRIVE),r},O.getPermissions=function(e){var n=e.docPath,r=e.searchParameters,a=e.listKey,o=t.defer();return i.getPermissions({docPath:n,searchParameters:r},o.resolve,o.reject,a),o.promise},O.getPickerListRequestFilters=function(e,t,n){return E.apply(this,arguments)},O.getProperty=function(e,t,n,r){return angular.isUndefinedOrEmpty(e)?"":angular.isDefinedAndFilled(t)&&d.hasTranslations(t[n])?d.translate_(t[n],r,!0):d.translate_(e[n],r,!0)},O.getThumbnail=function(e,t,n){return O.getProperty(e,t,"thumbnail",n)},O.isMediaFromGoogle=m,O.isMediaFromMicrosoft=h,O.getMediaCrossOriginSetting=function(e){if(m(e)||h(e))return"anonymous"},O.removeCrop=function(e,t){if(angular.isDefinedAndFilled(e.croppedContent))for(var n=0,r=e.croppedContent.length;n<r;n++)if(e.croppedContent[n].lang===t){e.croppedContent.splice(n,1);break}},O.restore=function(e,n){var r=t.defer();return i.restore({docPath:e},r.resolve,r.reject,n),r.promise},O.trash=function(e,n){var r=t.defer();return i.trash({docPath:e},r.resolve,r.reject,n),r.promise},O.update=function(e){return i.update(e).$promise},O.init=function(){O.defaultParams={lang:d.getLang("current")}},O}n.r(t),n.d(t,"DocumentService",(function(){return i}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(3),u=n.n(l),d=n(51),p=n.n(d),f=n(4),g=n.n(f),m=n(142),v=n.n(m),h=n(21),y=n.n(h),E=n(107),b=n.n(E);i.$inject=["$injector","$q","$window","DocumentFactory","LumsitesBaseService","Media","MediaConstant","Translation","Utils"],angular.module("Services").service("Document",i)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,s,l,d,f,m,h,E,O,C,T,S,I,_,A,w){function D(e,n){if(angular.isUndefined(e)||R.is.saving.document)return t.reject();R.is.saving.document=!0;var r=angular.fastCopy(e);if(N.currentFilter.providerId!==T.PROVIDERS.lumapps){var i=p()(r.content);i.name=R.contentForEdition.name,r.content=[i]}return l.update(r).then((function(){O.success(I.translate("FRONT.MEDIA_PICKER.".concat(n.toUpperCase(),"_SAVE_SUCCESS"))),N.executeFilter()})).catch(w.displayServerError).finally((function(){R.is.saving.document=!1}))}function L(e){return new Promise((function(t){e.toBlob((function(e){_.uploadMultiple([e],void 0,(function(e){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{name:R.selectedMediaContent&&R.selectedMediaContent.name||e.name}))}))}))}))}function P(){return P=c()(o.a.mark((function e(t,n,r){var i,a,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=angular.fastCopy(R.selectedMedia),a=I.inputLanguage,!r){e.next=15;break}return e.next=5,L(r);case 5:s=e.sent,i.croppedContent=i.croppedContent||[],l.removeCrop(i,a),c=p()(C.formatUploadedFile(s,a).content),c.focalPoint=t,c.cropInfo=n,i.croppedContent.push(c),i.hasCroppedContent=!0,e.next=16;break;case 15:l.removeCrop(i,a);case 16:i.content=i.content||[{}],i.content[0].focalPoint=t,i.content[0].cropInfo=n;try{l.update(i).then((function(){O.success(I.translate("MEDIA_PICKER_SAVE_SUCCESS")),N.executeFilter()}))}catch(e){w.displayServerError(e)}R.onCropperClose();case 21:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}var N,R=this;R.ACTION_DROPDOWN_ID="media-picker-detail-action-dropdown",R.ACTION_DROPDOWN_TARGET="media-picker-detail-action-dropdown-target",R.DROPDOWN_LINK="detail-dropdown-link",R.DROPDOWN_MOVE="detail-dropdown-move",R.FROALA_OPTIONS={},R.TAG_LIST_KEY="detail-tag-",R.contentForEdition={},R.is={cropperOpened:!1,menuShown:!1,saving:{document:!1}},R.selectedDropdown=void 0,R.selectedFolder={},R.selectedFolderContent={},R.selectedMedia={},R.selectedMediaContent={},R.userCanEdit=!1,R.Config=a,R.Content=s,R.Folder=f,R.Instance=m,R.Lightbox=h,R.Media=C,R.MediaConstant=T,R.Tag=S,R.Upload=_,R.Utils=w,R.addSelectedMediaContent=function(e){if(!angular.isUndefinedOrEmpty(R.selectedMediaContent)&&!N.is.selectionShown){angular.isUndefined(R.selectedMedia.content)&&(R.selectedMedia.content=[]),l.removeCrop(R.selectedMedia,I.inputLanguage);var t={fileId:R.selectedMediaContent.fileId,height:e.height,lang:I.inputLanguage,mimeType:e.mimeType,name:e.name,owner:{email:A.getConnected().email,fullName:A.getUserFullName()},servingUrl:e.url,size:e.fileSize,type:e.type,url:e.url,value:e.blobKey,width:e.width},n=y()(R.selectedMedia.content,{lang:I.inputLanguage});angular.isDefinedAndFilled(n)?angular.extend(n,t):R.selectedMedia.content.push(t),R.updateMediaContent()}},R.addSelectedMediaThumbnail=function(e){angular.isUndefinedOrEmpty(R.selectedMediaContent)||(N.is.selectionShown?b()(R.selectedMedia,["override","thumbnail",I.inputLanguage],e.blobKey):C.isImage(R.selectedMediaContent.type)?R.addSelectedMediaContent(e):b()(R.selectedMedia,["thumbnail",I.inputLanguage],e.blobKey),R.updateMediaContent())},R.canEditMedia=function(){return C.canEditMedia(R.selectedMedia)},R.closeActionDropdown=function(){E.close(R.ACTION_DROPDOWN_ID)},R.deleteSelectedMediaThumbnail=function(){C.isImage(R.selectedMediaContent.type)||(N.is.selectionShown?delete R.selectedMedia.override.thumbnail[I.inputLanguage]:delete R.selectedMedia.thumbnail[I.inputLanguage],R.updateMediaContent())},R.hasBackgroundImage=function(e,t){return angular.isDefinedAndFilled(l.getBackgroundImage(R.selectedMedia,e,void 0,t,N.is.selectionShown?R.selectedMedia.override:void 0))},R.onCropperClose=function(){R.is.cropperOpened=!1},R.onCropperConfirm=function(e,t,n){return P.apply(this,arguments)},R.openCropper=function(){R.is.cropperOpened=!0},R.openSelectedMediaUploader=function(e){i((function(){angular.element('ls-uploader[ls-uuid="edit-selected-media-'.concat(e,'"]')).find(".uploader__placeholder").click()}))},R.saveSelectedFolder=function(){return D(R.selectedFolder,"folder")},R.saveSelectedMedia=function(){return D(R.selectedMedia,"media")},R.toggleMenu=function(){R.is.menuShown=!R.is.menuShown},R.updateMediaContent=function(){angular.isDefinedAndFilled(R.selectedMedia)&&angular.isArray(R.selectedMedia.content)?(R.selectedMediaContent=l.getMediaContentByLang(R.selectedMedia,!0,I.inputLanguage,!1,"content"),N.currentFilter.providerId===T.PROVIDERS.lumapps?R.contentForEdition=R.selectedMedia:(R.contentForEdition=y()(R.selectedMedia.content,{lang:I.inputLanguage}),angular.isUndefined(R.contentForEdition)&&(R.selectedMedia.content.push({lang:I.inputLanguage}),R.contentForEdition=y()(R.selectedMedia.content,{lang:I.inputLanguage})))):angular.isDefinedAndFilled(R.selectedFolder)&&angular.isArray(R.selectedFolder.content)&&(R.selectedFolderContent=l.getMediaContentByLang(R.selectedFolder,!0,I.inputLanguage),N.currentFilter.providerId===T.PROVIDERS.lumapps?R.contentForEdition=R.selectedFolder:(R.contentForEdition=y()(R.selectedFolder.content,{lang:I.inputLanguage}),angular.isUndefined(R.contentForEdition)&&(R.selectedFolder.content.push({lang:I.inputLanguage,name:R.selectedFolderContent.name}),R.contentForEdition=y()(R.selectedFolder.content,{lang:I.inputLanguage}))))},n.$on("inputLanguage",(function(){angular.isUndefinedOrEmpty(R.selectedMedia)||R.updateMediaContent()})),n.$watch("vm.selectedDetailObject",(function(e,t){e!==t&&(angular.isDefinedAndFilled(e)?function(e){if(!angular.isUndefinedOrEmpty(e)){var t=g()(e,"kind",T.KIND.MEDIA);R.is.menuShown=!1,v()([T.KIND.MEDIA,T.KIND.DRIVE],t)?(R.selectedItemType=T.KIND.MEDIA,R.selectedMedia=e,R.updateMediaContent(),R.isMediaEditable=N.is.admin||R.canEditMedia()):t===T.KIND.FOLDER&&(R.isFolderEditable=N.is.admin||N.currentFilter.categoryId===T.CATEGORIES.mine,R.selectedItemType=T.KIND.FOLDER,R.selectedFolder=e,R.updateMediaContent())}}(e):(R.selectedMedia=void 0,R.selectedMediaContent=void 0,R.selectedFolder=void 0),R.userCanEdit=A.isAdmin()||N.currentFilter.providerId!==T.PROVIDERS.lumapps||N.currentFilter.categoryId===T.CATEGORIES.mine)}),!0),N=n.$parent.$parent.vm,d.getFroala().then((function(){try{R.FroalaService=e.get("FroalaService"),R.FROALA_OPTIONS=R.FroalaService.getOptions(!0,!0,!1,!1,[])}catch(e){}})),R.mediaTags=S.getList(void 0,void 0,N.current.instanceId),angular.isDefinedAndFilled(R.mediaTags)||S.filterize({instance:N.current.instanceId,kind:a.TAG_TYPE.MEDIA,maxResults:100},(function(e){R.mediaTags=e}),w.displayServerError,N.current.instanceId)}n.r(t),n.d(t,"MediaPickerDetailController",(function(){return i}));var a=n(6),o=n.n(a),s=n(10),c=n.n(s),l=n(3),u=n.n(l),d=n(51),p=n.n(d),f=n(4),g=n.n(f),m=n(17),v=n.n(m),h=n(21),y=n.n(h),E=n(7),b=n.n(E);i.$inject=["$injector","$q","$scope","$timeout","Config","Content","Document","FroalaLoader","Folder","Instance","Lightbox","LxDropdownService","LxNotificationService","Media","MediaConstant","Tag","Translation","Upload","User","Utils"],angular.module("Controllers").controller("MediaPickerDetailController",i)},function(e,t){!function(){"use strict";function e(e,t,n,r,i,a){function o(){angular.forEach(l.AVAILABLE_MEDIA_TYPES,(function(e){delete e.checked})),angular.forEach(l.mediaTags,(function(e){delete e.checked})),l.filter={query:void 0,tags:[],type:[]}}function s(){c.debouncedChangeSearchParameters(l.filter)}var c,l=this;l.DROPDOWN_ID="media-picker-filter-dropdown",l.DROPDOWN_TARGET="media-picker-filter-dropdown-target",l.TAG_LIST_KEY="",l.AVAILABLE_MEDIA_TYPES=[{value:"IMAGE"},{value:"OTHER"}],l.filter={},l.hasMainFilterToBeOpen=!1,l.searchFilterClosed={main:!0,secondary:!0},l.Tag=i,l.Instance=n,l.Utils=a,l.actionFilterShow=function(){r.open(l.DROPDOWN_ID,"#"+l.DROPDOWN_TARGET)},l.closeDropdown=function(e){angular.isDefinedAndFilled(e)&&e.stopPropagation(),r.close(l.DROPDOWN_ID)},l.onFilterChange=s,l.onMediaTypeFilterChange=function(e){var t=l.filter.type;e.checked?t.push(e.value):t.splice(t.indexOf(e.value),1)},l.onMediaTagFilterChange=function(e){var t=l.filter.tags;e.checked?t.push(e.uid):t.splice(t.indexOf(e.uid),1),s()},l.resetFilters=function(){o(),s()},l.selectionToFileType=function(e,n){var r;n=n||angular.noop,"IMAGE"===e?r=t.FILE_TYPES.IMAGE:"DOCUMENT"===e&&(r=t.FILE_TYPES.DOCUMENT),n(r)},e.$watch("vm.searchParameters",(function(e){angular.isUndefinedOrEmpty(e)&&o()}),!0),c=e.$parent.$parent.vm,l.TAG_LIST_KEY="filter-tag-"+c.current.instanceId,i.filterize({instance:c.current.instanceId,kind:t.TAG_TYPE.MEDIA,maxResults:100},(function(e){l.mediaTags=e}),a.displayServerError,l.TAG_LIST_KEY),l.filter={query:void 0,tags:[],type:[]}}e.$inject=["$scope","Config","Instance","LxDropdownService","Tag","Utils"],angular.module("Controllers").controller("MediaPickerFilterController",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p,g,v,y,O,C){function T(){return de.currentFilter.categoryId}function S(){return de.currentFilter.providerId}function I(){return pe.getProvider(S())}function _(){return pe.getProviderCategory(S(),T())}function A(){return w.apply(this,arguments)}function w(){return w=s()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(de.current.objectPathMap.length>0)){e.next=2;break}return e.abrupt("return",h()(de.current.objectPathMap).docPath);case 2:return e.next=4,_();case 4:return t=e.sent,n=t.rootPath,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function D(){return L.apply(this,arguments)}function L(){return L=s()(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,n=f()(t,"properties",{}),e.next=6,A();case 6:return r=e.sent,e.abrupt("return",i.getPermissions({docPath:r,searchParameters:n}));case 8:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function P(){return N.apply(this,arguments)}function N(){return N=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(de.current.objectPathMap.length>0)){e.next=2;break}return e.abrupt("return",f()(h()(de.current.objectPathMap),"docPath"));case 2:return e.next=4,_();case 4:return t=e.sent,e.abrupt("return",t.rootPath);case 6:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function R(){if(0===fe.enabledDocumentsProviders.length)throw new Error("No enabled documents providers");return d()(fe.enabledDocumentsProviders)}function j(e){return d()(e.categories)}function k(){return F.apply(this,arguments)}function F(){return F=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,fe.canManage=f()(t,"canManage",!1);case 4:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function U(){return M.apply(this,arguments)}function M(){return M=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,fe.canPick=f()(t,"canPick",!1);case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function x(){return $.apply(this,arguments)}function $(){return $=s()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,n=f()(t,"id"),fe.isTrash="TRASH"===n;case 5:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function B(){return W.apply(this,arguments)}function W(){return W=s()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,n=f()(t,"sortOrder"),angular.isDefinedAndFilled(n)?de.currentFilter.sortOrder=angular.fastCopy(n[0]):delete de.currentFilter.sortOrder;case 5:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function G(){var e=S();fe.enabledDocumentsProviders.map((function(t){t.id===e&&(t.unavailable=!0)})),"local"!==e&&fe.changeProviderAndCategory({id:"local"},{id:"MINE"})}function Y(){return H.apply(this,arguments)}function H(){return H=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:t=e.sent,t.unavailable?G():n.$apply((function(){fe.isWriterOnCurrentFolder=t.isWriter}));case 4:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function K(e,t,n,r,a,o){angular.isUndefinedOrEmpty([e,t],"every")||u.confirm(v.translate(n),v.translate(r),{cancel:v.translate("CANCEL"),ok:v.translate("OK")},(function(n){if(n){var r=E()(e,"docPath").concat(E()(t,"docPath"));angular.forEach(r,(function(e){i.trash(e,de.pickerId).then((function(){return u.success(v.translate(a)),o()}),C.displayServerError)}))}}))}function V(){return de.executeFilter()}function z(){fe.isWriterOnCurrentFolder=!1}function q(){de.searchParameters={}}function X(){return Q.apply(this,arguments)}function Q(){return Q=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.getList();case 2:t=e.sent,angular.isDefinedAndFilled(de.allowedProviders)&&(t=l()(t,(function(e){return m()(de.allowedProviders,e.id)}))),fe.enabledDocumentsProviders=angular.fastCopy(t);case 5:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function Z(e){return J.apply(this,arguments)}function J(){return J=s()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,!angular.isUndefinedOrEmpty(n)){e.next=3;break}return e.abrupt("return");case 3:return de.currentFilter.providerId=n,e.next=6,pe.getProviderCategories(n);case 6:de.currentProviderCategories=e.sent;case 7:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return te=s()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,de.currentFilter.categoryId=n,e.next=4,B();case 4:return e.next=6,x();case 6:return e.next=8,U();case 8:return e.next=10,k();case 10:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return re=s()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R(),n=j(t),de.resetPath(),e.next=5,Z(t);case 5:return e.next=7,ee(n);case 7:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ie(){return ae.apply(this,arguments)}function ae(){return ae=s()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(!angular.isUndefinedOrEmpty(de.currentFilter.providerId)){e.next=7;break}return e.next=5,ne();case 5:e.next=9;break;case 7:return e.next=9,ee({id:de.currentFilter.categoryId});case 9:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function oe(){return oe=s()(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.unavailable){e.next=2;break}return e.abrupt("return");case 2:return de.initFilterAndOrder(),q(),e.next=6,Z(t);case 6:return e.next=8,ee(n);case 8:z(),de.executeFilter(!0).then(Y);case 10:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function se(){return se=s()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return t=e.sent,e.t0=f.a,e.next=6,_();case 6:return e.t1=e.sent,n=(0,e.t0)(e.t1,"properties.shared",!1),e.abrupt("return",{parentPath:t,shared:n});case 9:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ce(){return ce=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fe.is.saving.document){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return fe.is.saving.document=!0,de.current.objectPathMap.length>0&&(t=h()(de.current.objectPathMap),fe.newFolder.parentFolder=de.objectService.getMediaContentByLang(t,!0,"default").docPath),e.t0=i,e.t1=de.pickerId,e.t2=fe.newFolder.name,e.next=9,P();case 9:return e.t3=e.sent,e.t4=f.a,e.next=13,_();case 13:return e.t5=e.sent,e.t6=(0,e.t4)(e.t5,"properties.shared",!1),e.t7={listKey:e.t1,names:e.t2,parentPath:e.t3,shared:e.t6},e.t8=function(){return fe.cancelFolder(),c.close(fe.FOLDER_DIALOG_ID),u.success(v.translate("FRONT.MEDIA_PICKER.FOLDER_CREATE_SUCCESS")),V().then((function(){r((function(){fe.is.saving.document=!1}),500)}))},e.t9=function(e){C.displayServerError(e),fe.is.saving.document=!1},e.abrupt("return",e.t0.createFolder.call(e.t0,e.t7).then(e.t8,e.t9));case 19:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function le(){return le=s()(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de.currentFilter.providerId!==fe.MediaConstant.PROVIDERS.microsoft){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I();case 4:if(n=e.sent,r=n.sortableFields,m()(r,t)){e.next=8;break}return e.abrupt("return",Promise.resolve());case 8:return e.abrupt("return",de.toggleSortOrder(t));case 9:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function ue(){return ue=s()(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return de=n.$parent.vm,r.next=3,Object(b.loadFroala)(e,t,v,C);case 3:case"end":return r.stop()}}),r)}))),ue.apply(this,arguments)}var de,pe,fe=this;pe=m()(n.vm.allowedProviders,"community")?e.get("CommunityDocumentProvider"):e.get(n.vm.providerService||"DocumentProvider");var ge=["ONEDRIVE_SITE"];fe.FOLDER_DIALOG_ID="folder-dialog",fe.canManage=!1,fe.canPick=!1,fe.enabledDocumentsProviders=[],fe.icons={COMMUNITY_COMMUNITY:"google-circles-extended",DRIVE:"google-drive",DRIVE_MINE:"google-drive",DRIVE_RECENT:"clock",DRIVE_SHARED:"account-multiple",DRIVE_STARRED:"star",DRIVE_TEAM:"account-box",LOCAL_LIBRARY:"folder",LOCAL_MINE:"account",LOCAL_TRASH:"delete",ONEDRIVE:"onedrive",ONEDRIVE_MINE:"onedrive",ONEDRIVE_SITES:"sitemap"},fe.is={saving:{document:!1}},fe.isTrash=!1,fe.isWriterOnCurrentFolder=!1,fe.itemActions={primary:[{action:function(e){i.download(e,!0)},icon:"download",label:v.translate("FRONT.MEDIA_PICKER.DOWNLOAD"),visibility:function(e){var t=f()(e,"properties.drillable",!0);return!fe.isTrash&&!t}},{action:function(e){fe.restoreMedia(e)},icon:"restore",label:v.translate("RESTORE"),visibility:function(){return fe.isTrash}},{action:function(e){fe.deleteMedia(e)},icon:"delete",label:v.translate("GLOBAL.DELETE"),visibility:function(){return fe.isTrash}}],secondary:[{action:function(e){de.toggleDetail(e)},icon:"information-outline",label:v.translate("GLOBAL.MORE_DETAILS"),visibility:function(){return angular.isUndefinedOrEmpty(de.selectedDetailObject)}},{action:function(e){fe.getMediaLink(e)},icon:"link",label:v.translate("FRONT.MEDIA_PICKER.GET_LINK"),visibility:function(e){var t=f()(e,"kind",g.KIND.MEDIA);return!fe.isTrash&&(t===g.KIND.MEDIA||t===g.KIND.DRIVE&&!e.isFolder)}},{action:function(e){fe.trashMedia(e)},icon:"delete",label:v.translate("FRONT.MEDIA_PICKER.TRASH"),visibility:function(e){var t=f()(e,"kind",g.KIND.MEDIA);return!de.is.selectionShown&&!fe.isTrash&&fe.userCanEdit()&&m()([g.KIND.MEDIA,g.KIND.FOLDER,g.KIND.DRIVE],t)}}]},fe.newFolder={},fe.Document=i,fe.MediaConstant=g,fe.Translation=v,fe.Upload=y,fe.User=O,fe.Utils=C,fe.cancelFolder=function(){fe.newFolder={}},fe.changeProviderAndCategory=function(e,t){return oe.apply(this,arguments)},fe.deleteMedia=function(e){angular.isUndefinedOrEmpty(f()(e,"id"))||u.confirm(v.translate("MEDIA_PICKER_DELETE"),v.translate("MEDIA_PICKER_DELETE_DESCRIPTION"),{cancel:v.translate("CANCEL"),ok:v.translate("OK")},(function(t){t&&p.del(e.id,(function(){de.executeFilter(),u.success(v.translate("MEDIA_PICKER_DELETE_SUCCESS"))}),C.displayServerError,de.pickerId)}))},fe.emptyTrash=function(){O.isAdmin()&&u.confirm(v.translate("FRONT.MEDIA_PICKER.TRASH_EMPTY"),v.translate("FRONT.MEDIA_PICKER.TRASH_EMPTY_DESCRIPTION"),{cancel:v.translate("CANCEL"),ok:v.translate("OK")},function(){var e=s()(a.a.mark((function e(t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_();case 4:n=e.sent,o=n.rootPath,i.emptyTrash(o,de.pickerId).then((function(){u.success(v.translate("FRONT.MEDIA_PICKER.TRASH_EMPTY_SUCCESS")),r((function(){V()}),200)}),C.displayServerError);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},fe.finishFileUpload=function(){return y.setProgressValue(0),de.currentFilter.sortOrder="local"===de.currentFilter.providerId||"drive"===de.currentFilter.providerId?"-createdAt":void 0,de.searchParameters={},de.executeFilter()},fe.getCurrentFolderName=function(){return de.current.objectPathMap.length>0?h()(de.current.objectPathMap).name:angular.isDefinedAndFilled(de.currentFilter.providerId)&&angular.isDefinedAndFilled(de.currentFilter.categoryId)?"FRONT.WIDGET_FILE_LIST.SETTINGS.FOLDER.".concat(de.currentFilter.providerId.toUpperCase(),".").concat(de.currentFilter.categoryId.toUpperCase()):void 0},fe.getMediaLink=function(e){var t=i.getMediaContentByLang(e,!0);c.alert({buttons:{ok:v.translate("GLOBAL.CLOSE")},text:'<span style="word-break: break-all">'.concat(t.downloadUrl,"</span>"),title:v.translate("FRONT.MEDIA_PICKER.MEDIA_LINK")})},fe.getSortOrder=function(e){return de.currentFilter.sortOrder===e?"asc":de.currentFilter.sortOrder==="-".concat(e)?"desc":""},fe.getUploadedFiles=function(){return y.files},fe.getUploadUrlRequestParameters=function(){return se.apply(this,arguments)},fe.hasThumbnail=function(e){if(e.properties&&e.properties.type){var t=e.properties.type;return["GOOGLE_FILE","LUMDRIVE_FILE","ONEDRIVE_FILE"].includes(t)}return!0},fe.isNavigable=function(e){return e.properties.drillable},fe.isSelectable=function(e){return!(!fe.canPick||de.embedded||m()(ge,e.properties.type))&&(angular.isDefinedAndFilled(de.allowFolderPick)&&de.allowFolderPick&&fe.isNavigable(e)||(angular.isUndefinedOrEmpty(de.allowFolderPick)||!de.allowFolderPick)&&!fe.isNavigable(e))},fe.navigatePath=function(e){return z(),de.navigatePath(e).then(Y)},fe.navigateToParentFolder=function(){return z(),de.navigateToParentPath().then(Y)},fe.onMediaClick=function(e){fe.isSelectable(e)&&fe.toggleMediaSelection(e),"desk"!==o.breakpoint&&fe.onMediaDblClick(e)},fe.onMediaDblClick=function(e){fe.isNavigable(e)&&fe.navigatePath(e)},fe.openFolderDialog=function(){return C.waitForAndExecute("#".concat(fe.FOLDER_DIALOG_ID))},fe.openMediaUploader=function(){r((function(){angular.element("#".concat(de.pickerId," .media-picker-uploader")).find(".uploader__placeholder").click()}))},fe.restoreMedia=function(e){angular.isUndefinedOrEmpty(e)||u.confirm(v.translate("FRONT.MEDIA_PICKER.RESTORE"),v.translate("FRONT.MEDIA_PICKER.RESTORE_DESCRIPTION"),{cancel:v.translate("CANCEL"),ok:v.translate("OK")},(function(t){t&&i.restore(e.docPath,de.pickerId).then((function(){de.executeFilter(),u.success(v.translate("FRONT.MEDIA_PICKER.RESTORE_SUCCESS"))})).catch(C.displayServerError)}))},fe.saveFolder=function(){return ce.apply(this,arguments)},fe.toggleMediaSelection=function(e){var t={categoryId:T(),id:e.id,object:e,providerId:S()};de.toggleSelection(t)},fe.toggleSortOrder=function(e){return le.apply(this,arguments)},fe.trashMedia=function(e){var t=f()(e,"kind",g.KIND.MEDIA);t===g.KIND.FOLDER?K(void 0,[e],"FRONT.MEDIA_PICKER.TRASH_FOLDER","FRONT.MEDIA_PICKER.TRASH_FOLDER_DESCRIPTION","FRONT.MEDIA_PICKER.TRASH_FOLDER_SUCCESS",(function(){de.executeFilter()})):K([e],void 0,"FRONT.MEDIA_PICKER.TRASH_MEDIA","FRONT.MEDIA_PICKER.TRASH_MEDIA_DESCRIPTION","FRONT.MEDIA_PICKER.TRASH_MEDIA_SUCCESS",(function(){de.removeFromSelection(e),de.executeFilter()}))},fe.userCanEdit=function(){return O.isAdmin()||de.currentFilter.providerId!==g.PROVIDERS.lumapps||de.currentFilter.categoryId===g.CATEGORIES.mine},n.$on("abstract-picker__open-end",function(){var e=s()(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de.pickerId===n){e.next=2;break}return e.abrupt("return");case 2:return de.is.open=!0,de.resetPicker(),e.next=6,ie();case 6:return e.next=8,k();case 8:return e.next=10,de.executeFilter();case 10:return e.next=12,Y();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),n.$on("abstract-picker__close-end",(function(e,t){de.pickerId===t&&(de.is.open=!1)})),function(){ue.apply(this,arguments)}()}n.r(t),n.d(t,"MediaPickerController",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(75),l=n.n(c),u=n(51),d=n.n(u),p=n(4),f=n.n(p),g=n(17),m=n.n(g),v=n(142),h=n.n(v),y=n(28),E=n.n(y),b=n(425);r.$inject=["$injector","$ocLazyLoad","$scope","$timeout","Document","Layout","LxDialogService","LxNotificationService","Media","MediaConstant","Translation","Upload","User","Utils"],angular.module("Controllers").controller("MediaPickerController",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(t,a){var o=a?a.trim().toLowerCase():null;if(angular.isUndefinedOrEmpty(t))return[];l.metaMap[t]=angular.fastCopy(n.getFilteredMetadata(t,!0));var s=i.checkIfMetadataIsAllowed(l.contentType),c=0;return l.metaMap[t]=l.metaMap[t].filter((function(t){if(c>=100)return!1;var n=r.translate(e.get(t,"name")).toLowerCase(),i=r.translate(e.get(t,"path")).toLowerCase(),a=s(t)&&(!o||e.includes(n,o)||e.includes(i,o));return a&&c++,a})),l.metaMap[t]}function s(e){!angular.isUndefinedOrEmpty(e)&&angular.isArray(e)&&angular.forEach(e,(function(e){l.filter(e.key)}))}function c(t){angular.isUndefinedOrEmpty(l.model)&&(l.model={}),angular.forEach(t,(function(t){var n=t.key,r=angular.isArray(l.model[n]),i=Boolean(t.multiple)||Boolean(l.multiple);i?r||(l.model[n]=angular.isDefinedAndFilled(l.model[n])?[l.model[n]]:[]):r&&(l.model[n]=e.first(l.model[n]))}))}var l=this;l.metaMap={},l.Metadata=n,l.Utils=a,l.filter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n.filterAllMetadata(e,t).then((function(){o(e,t)}))},l.getMetadataClass=function(e){return angular.isUndefinedOrEmpty(e)?"":"metadata-selector--"+e},t.$watch("vm.metadataList",(function(e,t){angular.isDefinedAndFilled(e)&&e!==t&&(c(e),s(e))}),!0),c(l.metadataList),s(l.metadataList)}t.$inject=["$scope","Metadata","Translation","UserAccess","Utils"],angular.module("Directives").directive("metadataSelector",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{contentType:"@?",lsChange:"&?",metadataList:"=",model:"=",multiple:"=?lsMultiple",ngDisabled:"=?ngDisabled"},templateUrl:"/client/common/modules/metadata-selector/views/metadata-selector.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/metadata/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},listAvailable:{isArray:!1,method:"POST",params:{methodKey:"list"},url:t.APPLICATION_HOST+"/_ah/api/lumsites/v1/instance/metadata/:methodKey"},save:{isArray:!1,method:"POST",params:{methodKey:"save"}},saveMulti:{isArray:!1,method:"POST",params:{methodKey:"saveMulti"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("MetadataFactory",e)}()},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,s,l,d,f,m){function h(e,t){if(!angular.isArray(e))return[];var n=[];return angular.forEach(e,(function(r){if(r.parent===t){var i=r.id||r.uid;n.push(i),n=n.concat(h(e,i))}})),n}function E(e,t,n){n=n||!0;var r=[];return n&&r.push(t),r.concat(h(e,t))}function O(e,t){if(!angular.isUndefinedOrEmpty(e))for(var n=E(e,t),r=e.length;r--;){var i=e[r].id||e[r].uid;g()(n,i)&&e.splice(r,1)}}function C(e,t,n){var r,i=b()(e,(function(e){var i=angular.isUndefined(n)||!n||e.isVisibleFront;if(e.key===t&&i)return!0;var a=b()(e.items,(function(i){var a=angular.isUndefined(n)||!n||e.isVisibleFront;return!(i.key!==t||!a)&&(r=i,r.isVisibleFront=e.isVisibleFront,!0)}));return angular.isDefinedAndFilled(a)}));return r||i||{name:""}}function T(e,t){angular.isUndefinedOrEmpty(t)||angular.forEach(t,(function(t){e.push(t),angular.isDefinedAndFilled(t.items)&&T(e,t.items)}))}function S(e,t){var n=e.metadata;angular.isArray(e.metadata)||(n=[],angular.forEach(e.metadata,(function(e){angular.isUndefinedOrEmpty(e)||(e=angular.isArray(e)?e:[e],n=n.concat(e))})));var r={};angular.forEach(t,(function(e){r[e.key]=[],angular.forEach(e.items,(function(t){!angular.isUndefinedOrEmpty(t)&&g()(u()(n),t.key)&&(e.multiple?r[e.key].push(t.key):r[e.key]=t.key)}))})),e.metadata=r}function I(e,t,n,r){angular.forEach(e,(function(e){e.depth=t,e.name=function(e,t){for(var n="",r=angular.fastCopy(e),i=1;i<t;i++)n+="--";return angular.forEach(r,(function(e,t){r[t]="".concat(n," ").concat(e)})),r}(e.name,t),e.path=angular.isDefined(r)&&angular.isDefinedAndFilled(r.path)?angular.fastCopy(r.path):{},t>1&&angular.isDefinedAndFilled(r)&&angular.forEach(r.flatName,(function(t,n){angular.isUndefined(e.path[n])?e.path[n]=t:e.path[n]+=" > ".concat(t)})),angular.isUndefinedOrEmpty(n)?n=e.id:e.topParent=n,angular.isDefinedAndFilled(e.items)&&I(e.items,t+1,n,e),0===t&&(n=void 0)}))}function _(){var e=w.getList(w.AVAILABLE_METADATA_LIST_KEY);angular.isUndefinedOrEmpty(N)?N=[]:m.empty(N);var n=[],r={};angular.forEach(angular.fastCopy(e),(function(e){var t={customContentTypes:e.customContentTypes,depth:0,description:e.description,displayInFilter:e.displayInFilter,flatName:e.name,functionalInnerId:e.functionalInnerId,heritable:e.heritable,id:e.id,instance:e.instance,isVisibleFront:e.isVisibleFront,items:[],key:e.id,multiple:e.multiple,name:e.name,parent:e.parent,values:e.values};r[t.id]=t,n.push(t),angular.isUndefinedOrEmpty(t.parent)&&N.push(t)})),angular.forEach(n,(function(e){angular.isDefinedAndFilled(e.parent)&&angular.isDefinedAndFilled(r[e.parent])&&r[e.parent].items.push(e)})),I(N,0),angular.forEach(N,(function(e){var t=angular.fastCopy(e.items);e.items=[],T(e.items,t)})),t.$broadcast("metadata-refactored")}function A(e,t,n){t=t||angular.noop,n=n||angular.noop,l.listAvailable({cursor:e,fields:void 0,instance:a.getCurrentInstanceId(),maxResults:9999,withInheritance:!0}).$promise.then((function(e){angular.forEach(e.items,(function(e){w.getList(w.AVAILABLE_METADATA_LIST_KEY).push(e)})),e.more?A(e.cursor,t,n):(w.refactor(),t(w.getList(w.AVAILABLE_METADATA_LIST_KEY)))})).catch(t)}var w=s.createLumsitesBaseService(l,{autoInit:!1,objectIdentifier:"uid"});w._delMetadata=w.del,w._saveMetadata=w.save,w._saveMulti=w.saveMulti;var D={},L={},P=e.defer(),N=[];return w.AVAILABLE_METADATA_LIST_KEY="available",w.defaultParams={},w.is={initialized:!1,initializing:!1},w.del=function(e,t,n,r){return t=t||angular.noop,n=n||angular.noop,l.delete(e,(function(n){O(w.getList(void 0,void 0,r),e.uid),w.getAvailableMetadata(!1).then((function(r){O(r,e.uid),w.refactor(),t(n)}))}),n,r)},w.filterAllMetadata=function(t,n){n=(n||"").toLowerCase();var r=[];return e((function(e,i){w.getRefactoredMetadata(!1).then((function(i){angular.forEach(i,(function(e){e.key===t&&(r=e.items)})),D[t]=c()(r,(function(e){var t=(d.translate(e.name)||"").toLowerCase(),r=(d.translate(e.path)||"").toLowerCase();return g()(t,n)||g()(r,n)})),e(D[t])})).catch(i)}))},w.formatMetadataForClient=function(t,n){return angular.isUndefinedOrEmpty(p()(t,"metadata"))?e.resolve(t):n?(S(t,w.getRefactoredMetadata(!0)),e.resolve(t)):e((function(e,n){w.getRefactoredMetadata(!1).then((function(n){S(t,n),e(t)})).catch(n)}))},w.formatMetadataForServer=function(e){var t=[];angular.forEach(e.metadata,(function(e){angular.isUndefinedOrEmpty(e)||(angular.isString(e)?t.push(e):angular.isArray(e)&&(t=t.concat(e)))})),e.metadata=t},w.getAvailableMetadata=function(t){return t?w.getList(w.AVAILABLE_METADATA_LIST_KEY)||[]:e((function(e,t){w.is.initializing&&angular.isDefined(P.promise)?P.promise.then((function(t){e(t||[])})).catch(t):e(w.getList(w.AVAILABLE_METADATA_LIST_KEY)||[])}))},w.getAvailableMetadataFromKey=function(e,t,n){var r=w.getMetadataFromKey(e,!1,!0);if(!angular.isUndefinedOrEmpty(r)){var i=w.getMetadataFromKey(r.topParent,!1,!0);if(!angular.isUndefinedOrEmpty(i)&&i.isVisibleFront){if(t){var a="<span>".concat(d.translate(r.flatName),"</span>");return n?a:" <span>-</span> ".concat(a)}return r}}},w.getFilteredMetadata=function(t,n){return n?p()(D,t,[]):e((function(e,n){w.is.initializing&&angular.isDefined(P.promise)?P.promise.then((function(){e(p()(D,t,[]))})).catch(n):e(p()(D,t,[]))}))},w.getMetadataClasses=function(e,t){var n,r=[];return t=t||"",angular.forEach(e,(function(e){angular.isArray(e)?angular.forEach(e,(function(e){n=w.getMetadataFromKey(e,!1,!0),angular.isDefined(n)&&angular.isDefinedAndFilled(n.functionalInnerId)&&r.push(t+n.functionalInnerId)})):(n=w.getMetadataFromKey(e,!1,!0),angular.isDefined(n)&&angular.isDefinedAndFilled(n.functionalInnerId)&&r.push(t+n.functionalInnerId))})),r},w.getMetadataFilteredByProperty=function(e,t,n){var r=[];return angular.forEach(n,(function(n){angular.isDefined(n[e])&&n[e]===t&&r.push(n)})),r},w.getMetadataFromKey=function(t,n,r){return r?C(w.getRefactoredMetadata(!0),t,n):e((function(e,r){w.getRefactoredMetadata(!1).then((function(r){e(C(r,t,n))})).catch(r)}))},w.getMetadataKey=function(e){var t=[];return angular.forEach(w.getRefactoredMetadata(!0),(function(n){n.functionalInnerId===e&&t.push(n.key),angular.forEach(n.items,(function(n){n.functionalInnerId===e&&t.push(n.key)}))})),t},w.getParentRefactoredMetadata=function(e){return b()(w.getRefactoredMetadata(!0),{id:e})},w.getRefactoredMetadata=function(t){return t?N||[]:e((function(e,t){angular.isDefined(P.promise)&&P.promise.then((function(){e(N||[])})).catch(t)}))},w.isDisplayableMetadata=function(e){return m.isDefinedAndFilled(e)&&(y()(e)&&w.getMetadataFromKey(w.getMetadataFromKey(e[0],!1,!0).topParent,!1,!0).isVisibleFront||!y()(e)&&w.getMetadataFromKey(w.getMetadataFromKey(e,!1,!0).topParent,!1,!0).isVisibleFront)},w.isMetadataDeleted=function(e){return angular.isUndefinedOrEmpty(p()(w.getMetadataFromKey(e,!1,!0),"name"))},w.isMultipleMetadata=function(e){var t=w.getParentRefactoredMetadata(e);return p()(t,"multiple",!1)},w.listByCustomContentTypeId=function(e,t){var r=w.getRefactoredMetadata(!0);if(angular.isUndefinedOrEmpty(e))return r;if(angular.isUndefinedOrEmpty(L[e])){angular.isUndefined(L[e])&&(L[e]=[]);var i=n.displayList("ids-".concat(a.getCurrentInstanceId()));angular.forEach(r,(function(n){if(!angular.isDefinedAndFilled(n.customContentTypes)||g()(n.customContentTypes,e)||!angular.isUndefinedOrEmpty(t)&&g()(n.customContentTypes,t)){var o=!function(e,t){return!angular.isUndefinedOrEmpty(e)&&angular.isDefinedAndFilled(v()(t,e))}(n.customContentTypes,i),s=(angular.isUndefined(n.customContentTypes)||angular.isArray(n.customContentTypes))&&o;(function(e,t,n){var r;return n=n||[],angular.isDefinedAndFilled(e.parent)&&(r=b()(n,{id:e.parent})),angular.isUndefinedOrEmpty(e.instance)||e.instance===t.id||e.heritable&&e.instance===t.parent||angular.isDefinedAndFilled(r)&&r.heritable&&r.instance===t.parent})(n,a.getInstance(),r)&&s&&L[e].push(n)}}))}return L[e]},w.listByCustomContentTypeIds=function(e){if(!angular.isArray(e)||angular.isUndefinedOrEmpty(e))return[];var t=[],n={};return angular.forEach(e,(function(e){var r=w.listByCustomContentTypeId(e);angular.forEach(r,(function(e){n[e.id]||(n[e.id]=!0,t.push(e))}))})),t},w.metadataKeysToMetadata=function(e,t){if(t=t||angular.noop,angular.isUndefinedOrEmpty(e))t();else{var n=[];w.getRefactoredMetadata(!1).then((function(r){angular.forEach(r,(function(r){r.key===e&&(t(r),n.push(r)),angular.isDefinedAndFilled(r.items)&&angular.forEach(r.items,(function(r){r.key===e&&(t(r),n.push(r))}))}))}))}},w.metadataToMetadataKeys=function(e,t){t=t||angular.noop;var n=p()(e,"key");return t(n),n},w.refactor=function(){_(),angular.forEach(w.getRefactoredMetadata(!0),(function(e){D[e.key]=e.items})),L={}},w.save=function(e,t,n,i,a){return n=n||angular.noop,i=i||angular.noop,w._saveMetadata(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{sortOrder:t}),(function(e){var t=!1;w.getAvailableMetadata(!1).then((function(r){for(var i=0,a=r.length;i<a;i++)if(r[i].id===e.key){r[i]=angular.fastCopy(e),t=!0;break}t||r.push(e),w.refactor(),n(e)}))}),i,a)},w.saveMulti=function(e,t,n){return t=t||angular.noop,n=n||angular.noop,l.saveMulti(void 0,e,(function(e){w.getAvailableMetadata(!1).then((function(n){for(var r=0,i=n.length;r<i;r++)for(var a=0,o=e.length;a<o;a++)if(n[r].id===e[a].id){n[r]=angular.fastCopy(e[a]);break}w.refactor(),t(e)}))}),n)},w.setOrder=function(e,t,n){if(!angular.isUndefinedOrEmpty([e,t],"some")){var r=w.displayList(n),i=r.findIndex((function(n,r){return n.id===e.id&&r!==t}));i>=0&&r.splice(i,1);var a=r.findIndex((function(t){return t.id===e.id}));w.save(e,a,void 0,m.displayServerError,n)}},w.init=function(){return w.defaultParams={customerId:i.getCustomerId()},f.isConnected()?(w.is.initializing||(w.is.initializing=!0,w.initList(w.AVAILABLE_METADATA_LIST_KEY,{},[],!0,void 0),A(void 0,P.resolve,P.reject),P.promise.finally((function(){w.is.initialized=!0,w.is.initializing=!1}))),P.promise):(P.resolve(),P.promise)},w}n.r(t),n.d(t,"MetadataService",(function(){return i}));var a=n(3),o=n.n(a),s=n(75),c=n.n(s),l=n(260),u=n.n(l),d=n(4),p=n.n(d),f=n(17),g=n.n(f),m=n(157),v=n.n(m),h=n(82),y=n.n(h),E=n(21),b=n.n(E);i.$inject=["$q","$rootScope","CustomContentType","Customer","Instance","LumsitesBaseService","MetadataFactory","Translation","User","Utils"],angular.module("Services").service("Metadata",i)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,f,g,m,v,h,y,E,b,O,C){function T(e){e=e||c;var t=e.getCurrent(I),n=t.template,r=l()(s()(n,"components"),{widgetType:g.WIDGET_TYPES.TIP});_=angular.isDefinedAndFilled(r)?r:{properties:{content:void 0},title:void 0,type:"widget",uuid:Object(p.b)(),widgetType:g.WIDGET_TYPES.TIP}}var S,I,_,A={},w=!1;return A.editedCommunity=void 0,A.isAdding={community:!1},A.isEditing={community:!1},A.dialogKeys={community:"module-community-admin-dialog",communityWizard:"community-wizard-dialog-identifier",directory:"module-directory-admin-dialog",tutorial:"module-tutorial-admin-dialog",userDirectory:"module-user-directory-admin-dialog"},A.shouldDisplayWarning=!1,A.reduxReducerName="admin",A.reduxUpdateActionType="community-dialog/update",A.mapReduxToAngular=function(e){var t,n,r,i=e.communities;A.isAdding.community=null==i||null===(t=i.creationWizard)||void 0===t?void 0:t.isDialogOpen,A.isEditing.community=null==i||null===(n=i.creationWizard)||void 0===n?void 0:n.isEditionOpen,A.editedCommunity=void 0,A.shouldDisplayWarning=null==i||null===(r=i.creationWizard)||void 0===r?void 0:r.shouldDisplayWarning},A.mapStateToRedux=function(){return{editedCommunity:A.editedCommunity,isDialogOpen:A.isAdding.community,isEditionOpen:A.isEditing.community,shouldDisplayWarning:A.shouldDisplayWarning,template:A.selectedCommunityTemplate,community:t.getCurrent()}},A.add=function(n,r,a){var o;if(!angular.isUndefinedOrEmpty(n))switch(a=a||{},n){case g.CONTENT_TYPES.COMMUNITY:!function(e,n){I=e,t.setCurrent(A.generateNewCommunityObject(n),e),b.isMicrosoft()&&f.hasFeature("microsoft")?(A.isAdding.community=!0,A.selectedCommunityTemplate=n):C.waitForAndExecute("#".concat(A.dialogKeys.communityWizard))}(r,a.template);break;case g.CONTENT_TYPES.CUSTOM_LIST:o=a.customContentType,angular.isUndefinedOrEmpty(o)||e.go("app.front.content-create",{customContentType:o,type:g.CONTENT_TYPES.CUSTOM_LIST});break;case g.CONTENT_TYPES.DIRECTORY:e.go("app.front.content-create-without-custom-type",{type:g.CONTENT_TYPES.DIRECTORY});break;case g.CONTENT_TYPES.TUTORIAL:!function(e){I=e;var t={};t[y.inputLanguage]=Object(p.b)();var n=u.getCustomerId(),r=m.getCurrentInstanceId();c.setCurrent({author:b.getConnected().email,customer:n,instance:r,slug:t,type:g.CONTENT_TYPES.TUTORIAL},I),E.setCurrent({customer:n,instance:r}),C.waitForAndExecute("#".concat(A.dialogKeys.tutorial))}(r);break;case g.CONTENT_TYPES.USER_DIRECTORY:!function(e){I=e,c.setCurrent({author:b.getConnected().email,customer:u.getCustomerId(),instance:m.getCurrentInstanceId(),type:i.AVAILABLE_CONTENT_TYPES.USER_DIRECTORY},I),T(),O.createDefaultUserDirectoryFields(c.getCurrent(I)),C.waitForAndExecute("#".concat(A.dialogKeys.userDirectory))}(r)}},A.addTip=function(e){e=e||c,e.getCurrent(I).template=e.getCurrent(I).template||{};var t=e.getCurrent(I),n=t.template,r=l()(s()(n,"components"),{widgetType:g.WIDGET_TYPES.TIP});angular.isDefinedAndFilled(r)?r=_:(angular.isUndefined(n.components)&&(e.getCurrent(I).template.components=[]),angular.isDefined(_)&&n.components.push(_))},A.classesAreAvailable=function(){return angular.isDefinedAndFilled(o.AVAILABLE_MODULE_CLASSES)},A.edit=function(r,i,a){var o,l;if(!angular.isUndefinedOrEmpty(s()(r,"type")))switch(a=a||{},r.type){case g.CONTENT_TYPES.COMMUNITY:!function(e,r,i){A.isEditing.community||angular.isUndefinedOrEmpty(s()(e,"uid"))||(I=r,n.setDisplayMode(I,i),t.get({uid:e.uid},(function(e){t.setCurrent(angular.fastCopy(e),I),"microsoft"===e.communityType||"email"===e.communityType&&b.isMicrosoft()?(A.shouldDisplayWarning=!b.isMicrosoft(),A.editedCommunity=t.getCurrent(),A.isEditing.community=!A.shouldDisplayWarning):"google"!==e.communityType||b.isGoogle()?C.waitForAndExecute("#module-community-admin-dialog"):v.confirm(y.translate("ADMIN.COMMUNITY.EDITION_WARNING.LIMITED_ACCESS_TITLE"),y.translate("ADMIN.COMMUNITY.EDITION_WARNING.LIMITED_ACCESS_DETAILS.GOOGLE"),{cancel:y.translate("CANCEL"),ok:y.translate("GLOBAL.CONTINUE")},(function(e){e&&C.waitForAndExecute("#module-community-admin-dialog")}))}),(function(e){C.displayServerError(e)})))}(r,i,a.mode);break;case g.CONTENT_TYPES.CUSTOM_LIST:l=r,angular.isUndefinedOrEmpty(s()(l,"id"))||e.go("app.front.content-edit",{key:l.id});break;case g.CONTENT_TYPES.DIRECTORY:o=r,angular.isUndefinedOrEmpty(s()(o,"id"))||e.go("app.front.content-edit",{key:o.id});break;case g.CONTENT_TYPES.TUTORIAL:!function(e,t){I=t,c.setCurrent(angular.fastCopy(e),I),E.get({uid:c.getCurrent(I).externalKey},(function(e){E.setCurrent(e),C.waitForAndExecute("#".concat(A.dialogKeys.tutorial))}),C.displayServerError)}(r,i);break;case g.CONTENT_TYPES.USER_DIRECTORY:!function(e,t){angular.isUndefinedOrEmpty(s()(e,"id"))||(I=t,e.isDefaultUserDirectory=m.getInstance().defaultUserDirectory===e.id,c.setCurrent(angular.fastCopy(e),I),T(),O.createDefaultUserDirectoryFields(c.getCurrent(I)),C.waitForAndExecute("#".concat(A.dialogKeys.userDirectory)))}(r,i)}},A.emptyContent=function(){I=void 0,_=void 0,S=void 0,w=!1},A.generateNewCommunityObject=function(e){var n=b.getConnected();e=e||{};var i={components:[{properties:{},title:{},type:"widget",uuid:Object(p.b)(),widgetType:g.WIDGET_TYPES.INTRO}]};return{adminKeys:[n.id],adminsDetails:[n],author:n.email,calendarId:void 0,chatProvider:void 0,customer:u.getCustomerId(),descriptionOnly:e.descriptionOnly||!1,driveFolder:{},fromTemplate:e.uid,groups:[],hasCalendarId:!1,hasDriveFolder:!1,instance:m.getCurrentInstanceId(),postStatuses:e.postStatuses||[],postTypes:e.postTypes||r.DEFAULT_POST_TYPES,privacy:e.privacy||t.privacyTypes.restricted,tagsDetails:e.tagsDetails||[],template:l()(e.templates||[],{functionalInnerId:"posts"})||i,templates:e.templates||[],type:g.CONTENT_TYPES.COMMUNITY,useChat:!1,userKeys:[],users:[]}},A.getListKey=function(){return I},A.getTip=function(){return _},A.initFroala=function(){var e="properties.content[".concat(y.inputLang,"]");angular.isUndefined(s()(_,e))&&d()(_,e,"")},A.setListKey=function(e){I=e},A.switchNotification=function(){w=!w;var e=_.properties.lastUuidEdit;angular.isDefined(e)&&angular.isUndefined(S)&&(S=e),_.properties.lastUuidEdit=w?Object(p.b)():S},A.updateList=function(e,n){if(!angular.isUndefinedOrEmpty(e)){var r=n===g.CONTENT_TYPES.COMMUNITY?t.displayList(I):c.displayList(I);if(angular.isArray(r)){var i=a()(r,{uid:e.uid});i>-1?angular.extend(r[i],e):r.push(e)}}},A.init=function(){h.subscribe(A)},A.init(),A}n.r(t),n.d(t,"ModuleAdminService",(function(){return r}));var i=n(110),a=n.n(i),o=n(4),s=n.n(o),c=n(21),l=n.n(c),u=n(7),d=n.n(u),p=n(35);r.$inject=["$state","Community","CommunityForm","CommunityWizardConfiguration","Config","ConfigTheme","Content","Customer","Features","InitialSettings","Instance","LxNotificationService","ReduxStore","Translation","Tutorial","User","UserDirectory","Utils"],angular.module("Services").service("ModuleAdmin",r)},function(e,t){!function(){"use strict";angular.module("Services").service("ModuleFront",(function(){var e={getModuleClass:function(e){return angular.isDefinedAndFilled(e)?"module--"+e:""}};return e}))}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,f,g,m,v,h,y,E,b){var O,C,T=this,S="directory-entry-";T.ENTRY_DIALOG_ID="directory-entry-settings",T.UPLOAD_ID="directory-entry-image-uploader",T.form={},T.isOutsideAdmin=void 0,T.isUploading=!1,T.Config=r,T.ConfigTheme=i,T.Directory=o,T.DirectoryEntry=c,T.FormValidation=f,T.Metadata=v,T.Translation=h,T.Utils=b,T.deleteThumbnail=function(){C.thumbnail=void 0},T.editThumbnail=function(){y.openSelection(T.UPLOAD_ID)},T.isFieldValid=function(e,t){t=Boolean(t);var n=T.form.directoryEntrySettings||{};if(angular.isUndefinedOrEmpty(n[e.uuid]))return!1;var r=e.properties||{},i=Boolean(r.mandatory);if(!i)return!0;var a=n[e.uuid].$pristine;if(a&&!t)return!0;var o=C.values[e.uuid];switch(e.type){case"inputSelect":return angular.isDefinedAndFilled(o);case"inputText":default:return h.hasTranslations(o)}},T.saveEntry=function(){var n,r,i,v,y=T.form.directoryEntrySettings||{};if(y.$invalid||!h.hasTranslations(y.name)||(n=l()(O,"template.components",{}),!angular.isUndefinedOrEmpty(n)&&!a()(n,(function(e){return T.isFieldValid(e,!0)}))))return angular.isDefinedAndFilled(y)&&f.setFormDirty(y),void m.error(h.translate("ERROR_MANDATORY_FIELDS"));r=C,i=r.link,v={},d()(i).forEach((function(e){var t=i[e].split("&");d()(t).forEach((function(e){t[e]=Object(p.a)(t[e])})),v[e]=t.join("&")})),C.link=v,T.isOutsideAdmin?u.save(C,(function(n){n.uid=n.uid||n.id,o.getCurrent().favorites&&angular.isUndefinedOrEmpty(C.id)&&!E.isFavorite(n)&&(E.toggleFavorite(n),n.markedAsFavorite=!0),n=c.updateEntryStatus(n);var r=l()(t.$parent,"vm.parentCtrl.directoryEntries")||c.displayList(S);if(!angular.isUndefined(r)){var i=s()(r,{id:n.id});-1===i?r.push(n):angular.extend(r[i],n),e.$broadcast("directory-entry-save-".concat(n.id)),m.success(h.translate("ADMIN_DIRECTORY_ENTRY_SAVE_SUCCESS")),g.close(T.ENTRY_DIALOG_ID)}}),b.displayServerError):c.save(C,(function(){m.success(h.translate("ADMIN_DIRECTORY_ENTRY_SAVE_SUCCESS")),g.close(T.ENTRY_DIALOG_ID)}),b.displayServerError)},T.setUploadThumbnail=function(e){e&&(C.thumbnail=e.blobKey)},t.$on("inputLanguage",(function(){angular.isDefined(T.form.directoryEntrySettings)&&T.form.directoryEntrySettings.$setPristine()})),t.$on("lx-dialog__open-start",(function(e,t){T.ENTRY_DIALOG_ID===t&&T.init()})),T.init=function(){O=o.getCurrent(),C=c.getCurrent(),angular.isUndefinedOrEmpty([O,C],"some")||(T.isOutsideAdmin=angular.isDefinedAndFilled(n.slug),S+=O.id)},T.init()}n.r(t),n.d(t,"DirectoryEntryAdminController",(function(){return r}));var i=n(354),a=n.n(i),o=n(110),s=n.n(o),c=n(4),l=n.n(c),u=n(140),d=n.n(u),p=n(737);r.$inject=["$rootScope","$scope","$stateParams","Config","ConfigTheme","Directory","DirectoryEntry","DirectoryEntryUser","FormValidation","LxDialogService","LxNotificationService","Metadata","Translation","UploaderAction","UserFavorite","Utils"],angular.module("Controllers").controller("DirectoryEntryAdminController",r)},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/directory/entry/user/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("DirectoryEntryUserFactory",e)}()},function(e,t){!function(){"use strict";function e(e,t,n){var r=n.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid",preSave:function(t){return e.formatClientObjectForServer(angular.fastCopy(t))}});return r.defaultParams={},r.init=function(){r.defaultParams={maxResults:10}},r}e.$inject=["DirectoryEntry","DirectoryEntryUserFactory","LumsitesBaseService"],angular.module("Services").service("DirectoryEntryUser",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/directory/entry/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"POST",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("DirectoryEntryFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(4),r=n.n(t),i=n(136);!function(){function t(t,n,a,o,s,c,l,u,d,p,f,g,m,v){function h(t){if(angular.isUndefinedOrEmpty(t.metadata))return t.metadata={},E.updateEntryStatus(t);var n={};return angular.forEach(d.getRefactoredMetadata(!0),(function(r){n[r.key]=[];var i=e.filter(r.items,(function(e){return-1!==t.metadata.indexOf(e.key)}));n[r.key]=e.map(i,"key")})),t.metadata=n,E.updateEntryStatus(t)}function y(e,t){if(!p.hasTranslations(t.link))return null;var n=p.translate(t.link),r=o.getCurrent();if(angular.isDefined(r)){var a=p.translate(r.slug);if(a===n)return{action:"reload",href:void 0,url:void 0}}if(Object(i.b)(n)){var s=Object(i.a)(n)?"":"http://",c=v.parseUrlPattern(s+n);return{action:"open",href:c,url:c}}return{action:"go",href:n,params:{slug:n},url:"app.front.content-get"}}var E=l.createLumsitesBaseService(c,{autoInit:!1,objectIdentifier:"uid",postGet:h,postList:function(t){return angular.isUndefinedOrEmpty(t)?[]:e.map(e.compact(t),(function(e){return E.updateEntryStatus(e)}))},preSave:function(e){return E.formatClientObjectForServer(angular.fastCopy(e))}});return E.addLocalEntry=function(){a.handleTaggingMap("add-directory-entry","entry",{isHomePage:e.get(o.getCurrent(),"isHomepage",!1)}),E.setCurrent({directory:s.getCurrent().id,metadata:{},values:{}}),u.open("directory-entry-settings")},E.formatClientObjectForServer=function(t){if(angular.isUndefinedOrEmpty(t.metadata))return angular.extend(t,{metadata:[]});var n=[],r=e.filter(t.metadata,angular.isDefinedAndFilled);return angular.forEach(r,(function(e){angular.isString(e)?n.push(e):angular.isArray(e)&&(n=n.concat(e))})),angular.extend(t,{metadata:n})},E.formatServerObjectToClient=h,E.getEntryValueByType=function(t,n,r){if(!angular.isUndefined([e.get(t,"template.components"),n.values],"some")){var i=e.find(t.template.components,{type:r});if(!angular.isUndefinedOrEmpty(i))return n.values[i.uuid]}},E.openEntry=function(e,r,i){var s=o.getCurrent();a.handleTaggingMap("open-directory-entry","directory-entry",{directory:e,isFavorite:g.isFavorite(r),isHomePage:!!angular.isDefined(s)&&s.isHomepage,item:r}),i&&i.preventDefault();var c=y(0,r);c&&c.action&&("open"===c.action?n.open(c.url,"_blank"):"go"===c.action?t.go(c.url,c.params):"reload"===c.action&&t.reload())},E.getLinkEntry=function(e,t){return r()(y(0,t),"href")},E.updateEntryStatus=function(e){if(angular.isUndefined(e)||!f.isConnected())return e;e.isTogglable=!0,e.isUserFavorite=g.isFavorite(e);var t=s.getById(e.directory);return angular.isDefinedAndFilled(t)&&!t.favorites&&(e.isTogglable=!1),angular.isUndefinedOrEmpty(e.isInFavoriteFeedKeys)||angular.forEach(e.isInFavoriteFeedKeys,(function(t){m.hasSubscription(t)?(e.isTogglable=e.deletableFromFavorite,e.isMandatoryFavorite=!0):e.isMandatoryFavorite=!1})),e},E}t.$inject=["$state","$window","Analytics","Content","Directory","DirectoryEntryFactory","LumsitesBaseService","LxDialogService","Metadata","Translation","User","UserFavorite","UserFeedSubscriptions","Utils"],angular.module("Services").service("DirectoryEntry",t)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/directory/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("DirectoryFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i){var o=i.createLumsitesBaseService(t,{autoInit:!1,objectIdentifier:"uid"}),c=[];return o.defaultParams={},o.directoryToId=function(e,t){t=t||angular.noop;var n=d()(e,"id");return t(n),n},o.getById=function(e){return a()(c,{id:e})},o.getLocalDirectories=function(){return c},o.getMultiInstanceDirectories=function(e,t,n){if(angular.isArray(e)){n=n||!1,t=t||angular.noop;var i=n?[]:{},a=e.length,s=0,c=[],u=function(e){s++,e=e||[],i=i||[],r.getSiblings(!1).then((function(){if(angular.isDefinedAndFilled(e))if(c=c.concat(f()(e,"id")),n)i=i.concat(e);else{var o=r.instanceKeyToInstanceFromSiblings(l()(e).instance,!0);o&&(i[o.name]=e)}s>=a&&t(i,c)}))};angular.isUndefinedOrEmpty(e)?u():angular.forEach(e,(function(e){var t,n=(t=e,r.getCurrentInstanceId()===t?"default":t);n in o._services?u(o._services[n]._list):o.filterize({instance:e},u,void 0,n)}))}},o.getTagByUuid=function(e,t){if(!angular.isUndefinedOrEmpty([e,d()(t,"tags")],"some"))return a()(t.tags,{uuid:e})},o.idToDirectory=function(e,t){if(t=t||angular.noop,!angular.isUndefinedOrEmpty(e)){var n=o.getList(),r=a()(n,{id:e});return t(r),r}t()},o.tagToUuid=function(e,t){t=t||angular.noop;var n=d()(e,"uuid");return t(n),n},o.updateLocalList=function(t,n){var r=s()(c,{id:d()(t,"id")});r>-1?c[r]=t:(angular.isDefinedAndFilled(n)&&c.push({contentId:n.id,id:n.externalKey,instanceId:t.instance,properties:n.properties,slug:n.slug,type:t.type,uid:n.externalKey}),e.$broadcast("directory-list-updated"))},o.uuidToTag=function(e,t,n){if(t=t||angular.noop,!angular.isUndefinedOrEmpty(e)){angular.isUndefined(n)&&angular.isDefined(o.getCurrent())&&(n=o.getCurrent().tags);var r=a()(n,{uuid:e});return t(r),r}t()},o.init=function(){o.defaultParams={instance:r.getCurrentInstanceId(),maxResults:10},angular.isUndefinedOrEmpty(o.getCurrent())&&(c=angular.fastCopy(n.DIRECTORIES),o.initList("default",void 0,angular.fastCopy(c)))},o}n.r(t),n.d(t,"DirectoryService",(function(){return r}));var i=n(21),a=n.n(i),o=n(110),s=n.n(o),c=n(51),l=n.n(c),u=n(4),d=n.n(u),p=n(28),f=n.n(p);r.$inject=["$rootScope","DirectoryFactory","InitialSettings","Instance","LumsitesBaseService"],angular.module("Services").service("Directory",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,d,f,m){function v(e){e.disabled?w.nextTour():a((function(){w.showTour(e).then((function(){return w.nextTour()}))}),e.delay||1)}function h(e){w.shouldBackGroundDisplay=!0;var t=e||0;D={bottom:t+s.innerHeight,left:0,right:0+angular.element("body").innerWidth(),top:t}}function y(e,t,n){var r=!1;if(w.currentBubble.inFixedDialog){var i=e.closest(".dialog"),a=e.closest(".dialog__content");r=i.length>0&&a.length>0&&a[0].clientHeight>i[0].clientHeight}var o={height:r?D.bottom-t.top-85+2*n.vertical:t.height+2*n.vertical,left:t.left-n.horizontal,position:"absolute",top:t.top-n.vertical,width:t.width+2*n.horizontal};w.overlaysStyle={bottom:{height:r?D.bottom-(D.bottom-t.top-85):D.bottom-(t.top+t.height),left:0,top:r?D.bottom-85:t.top+t.height+n.vertical,width:"100%"},left:{height:o.height,left:0,top:o.top,width:o.left},over:o,right:{height:o.height,right:0,top:o.top,width:D.right-o.left-o.width},top:{height:t.top-n.vertical,top:0,width:"100%"}}}function E(e,t){return u()(["left","right"],e.location)&&u()(["top","bottom"],t)?(e.arrow="center",e.align="center"):u()(["top","bottom"],e.location)&&u()(["left","right"],t)&&(e.arrow="middle",e.align="middle"),e.location=t,e}function b(e,t){var n;switch(e.location){case"right":case"left":n="left"===e.location?"right":"left",e=u()(t,n)?u()(t,"top")?E(e,"center"):E(e,"top"):E(e,n);break;case"top":case"bottom":n="top"===e.location?"bottom":"top",e=u()(t,n)?u()(t,"left")?E(e,"center"):E(e,"left"):E(e,n)}return e}function O(e,t){var n,r=angular.fastCopy(e.align);if("center"!==e.align&&"middle"!==e.align){switch(e.align){case"top":n="bottom";break;case"left":n="right";break;case"beginning":n="end";break;case"bottom":n="top";break;case"right":n="left";break;case"end":n="beginning"}u()(t,"".concat(e.arrow,"-center"))||u()(t,"".concat(e.arrow,"-middle"))?u()(t,"".concat(e.arrow,"-").concat(n))||(e.align=n):e.align="center"}else"center"!==e.align&&"middle"!==e.align||(u()(t,"".concat(e.arrow,"-left"))||u()(t,"".concat(e.arrow,"-top"))||u()(t,"".concat(e.arrow,"-beginning"))?u()(t,"".concat(e.arrow,"-right"))||u()(t,"".concat(e.arrow,"-bottom"))||u()(t,"".concat(e.arrow,"-end"))||(e.align="end"):e.align="beginning");if(r===e.align){var i;e.align="center";var a="left"===e.location||"right"===e.location?"middle":"center";if("center"!==e.arrow&&"middle"!==e.arrow){switch(e.arrow){case"left":i="right";break;case"top":i="bottom";break;case"bottom":i="top";break;default:i="left"}u()(t,"".concat(a,"-").concat(e.align))?u()(t,"".concat(i,"-").concat(e.align))||(e.arrow=i):e.arrow=a}else"center"===e.arrow?u()(t,"left-".concat(e.align))?u()(t,"right-".concat(e.align))||(e.arrow="right"):e.arrow="left":"middle"===e.arrow&&(u()(t,"top-".concat(e.align))?u()(t,"bottom-".concat(e.align))||(e.arrow="bottom"):e.arrow="top")}return e}function C(e,t,n,r,i){for(var a=!0,o=0,s=[];a&&o<Object.keys(d.placements.alignements).length+Object.keys(d.placements.locations).length;){a=!1;var c="".concat(n.arrow,"-").concat(n.align);u()(s,c)||(s.push(c),r=d.calculateArrowPosition(t,e,n,r,i)),e.css(r),(r.left+e.outerWidth()>D.right||r.left<D.left||r.top<D.top||r.top+e.outerHeight()>D.bottom)&&(a=!0,w.currentBubble.placement=O(n,s)),o++}return r}function T(e,t,n,r){var i=function(){var e=w.currentBubble.placement||{};if(e.location=angular.isUndefinedOrEmpty(e.location)?"right":e.location,e.align=angular.isUndefinedOrEmpty(e.align)?"middle":e.align,angular.isDefinedAndFilled(e.arrow))return e;switch(e.location){case"left":case"right":e.arrow="top";break;case"top":case"bottom":e.arrow="left"}return e}(),a={};if(".header-content"===n||angular.isUndefined(t)&&0===t.length)a.top="".concat(30,"px"),a.left="50%",a.transform="translateX(-50%)";else for(var o=!0,s=0,c=[];o&&s<Object.keys(d.placements.locations).length;)o=!1,u()(c,i.location)||(c.push(i.location),e.css(d.calculateBubblePosition(t,r,e,i,a)),("right"===i.location&&a.left+e.outerWidth()>D.right||"left"===i.location&&a.left<D.left||"top"===i.location&&a.top<D.top||"center"===i.location&&a.top<t.offset().top||"bottom"===i.location&&a.top+e.outerHeight()>D.bottom)&&(o=!0,w.currentBubble.placement=b(i,c)),o||(a=C(e,t,i,a,r))),s++;e.css(a),w.isBubbleReady=!0}function S(e){if(angular.isUndefinedOrEmpty(w.currentBubble))e.resolve();else{var t=angular.element(".tour-bubble"),n=angular.isDefined(w.currentBubble.position)?w.currentBubble.position:".header-content",r=angular.isDefinedAndFilled(w.currentBubble.highlightPadding)?w.currentBubble.highlightPadding:{horizontal:8,vertical:8};m.waitForAndExecute(n,(function(e){var i=w.currentBubble.inFixedDialog?300:0;e=e.first(),angular.element("body").addClass("app-content--tutorial-mode"),a((function(){w.currentBubble.focus&&".header-content"!==n?function(e,t,n){var r=0;w.areOverlaysDisplayable=!0;var i={height:t.outerHeight(),left:t.offset().left,top:t.offset().top,width:t.outerWidth()};if(w.currentBubble.forceScroll){var a=angular.isDefinedAndFilled(w.currentBubble.offsetMarginForScroll)?w.currentBubble.offsetMarginForScroll:l.HEADER_FRONT_OFFSET+20;r=i.top-a,angular.element("html").animate({scrollTop:r},500,(function(){h(r),y(t,i,n)}))}else h(r),y(t,i,n)}(0,e,r):h(),T(t,e,n,r)}),i)}),!1,300,20).then(angular.noop,w.hideTour)}}function I(){p()(w.bubbles,(function(e,t){return e.then((function(){return function(e){return _=n.defer(),w.areOverlaysDisplayable=!1,w.currentBubble=e,angular.isUndefinedOrEmpty([w.currentBubble,c()(w.currentBubble,"id")],"some")?(_.resolve(),_.promise):(w.bubbleIndex=w.currentBubble.index||w.bubbles.indexOf(w.currentBubble),m.waitForAndExecute(".tour-overlay",(function(){return S(_)})),_.promise)}(t).then((function(){return w.isBubbleReady=!1,angular.isFunction(t.action)&&!A?t.action():n.resolve()}))}))}),n.resolve()).then((function(){return w.hideTour()}))}var _,A,w=this,D={};return w.areOverlaysDisplayable=!1,w.bubbles=void 0,w.currentBubble=void 0,w.currentTour=void 0,w.index=0,w.isBubbleReady=!1,w.overlaysStyle={},w.shouldBackGroundDisplay=!1,w.tourLength=void 0,w.clickOnOver=function(e){return e.preventDefault(),e.stopPropagation(),!1},w.getDescription=function(){var e="".concat(w.currentTour.uid,"_CONTENT");return w.bubbles.length>1&&(e+="_".concat(w.bubbleIndex+1)),f.translate(e)},w.getTitle=function(){var e="".concat(w.currentTour.uid,"_TITLE");return w.bubbles.length>1&&(e+="_".concat(w.bubbleIndex+1)),f.translate(e)},w.hideTour=function(t){if(angular.isDefinedAndFilled(t)){if(angular.isDefinedAndFilled(t.keyCode)&&27!==t.keyCode)return;A=!0}w.currentTour=void 0,w.bubbles=void 0,w.currentBubble=void 0,w.shouldBackGroundDisplay=!1,e.find("body").removeClass("app-content--tutorial-mode"),angular.element(document).off("keydown",w.hideTour),d.tourPromise.resolve()},w.nextBubble=function(){_.resolve()},w.nextTour=function(){angular.isUndefinedOrEmpty(w.toursList)||(w.index++,w.index<w.toursList.length&&v(w.toursList[w.index]))},w.showTour=function(e){return A=!1,d.tourPromise=n.defer(),angular.element(document).on("keydown",w.hideTour),i.hideTours&&!i.forceTours&&d.tourPromise.resolve(),w.currentTour=e,angular.isUndefinedOrEmpty(w.currentTour)||angular.isFunction(w.currentTour.condition)&&!w.currentTour.condition()?(d.tourPromise.resolve(),d.tourPromise.promise):(w.tourLength=d.getTourLength(w.currentTour)||w.currentTour.bubbles.length,w.tourLength=new Array(w.tourLength),n.when(g()(w.currentTour,"pre")).then((function(){var e,t;e=[],t=[],angular.forEach(w.currentTour.bubbles,(function(r,i){var a=n.defer();angular.isUndefinedOrEmpty(r.condition)?(t[i]=r,a.resolve()):n.when(r.condition()).then((function(e){e&&(t[i]=r),a.resolve()})),e.push(a.promise)})),n.all(e).then((function(){w.bubbles=o()(t),I()})),d.onTourSave(w.currentTour)})),d.tourPromise.promise)},r.$on("start-tour",(function(e,n){return function(e){var n=d.getTour(e,Boolean(t.search().forceTours));angular.isUndefinedOrEmpty(n)||v(n)}(n)})),w.toursList=d.availableTours,angular.isDefinedAndFilled(w.toursList)&&v(w.toursList[w.index]),w}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",restrict:"E",scope:{},templateUrl:"/client/common/modules/module/modules/on-boarding-tour/views/on-boarding-tour.html"}}n.r(t),n.d(t,"OnBoardingTourController",(function(){return r})),n.d(t,"OnBoardingTourDirective",(function(){return i}));var a=n(174),o=n.n(a),s=n(4),c=n.n(s),l=n(17),u=n.n(l),d=n(223),p=n.n(d),f=n(820),g=n.n(f);r.$inject=["$document","$location","$q","$scope","$stateParams","$timeout","$window","ConfigTheme","OnBoardingTour","Translation","Utils"],angular.module("Directives").directive("onBoardingTour",i)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u){function p(e,t){var n=l()(e,"tutorials.ON_BOARDING_TOURS");return angular.isDefinedAndFilled(n)&&d()(n,t)}var m=this,v="beginning",h="bottom",y="center",E="end",b="left",O="middle",C="right",T="top",S={brigitte1:{bubbles:[{action:void 0,focus:!0,highlightPadding:{horizontal:24,vertical:16},id:"FRONT.TOUR.SEARCH_RESULTS_1",index:0,placement:{align:v,arrow:T,location:C},position:".cloudsearch-results__wrapper"},{focus:!0,highlightPadding:{horizontal:24,vertical:16},id:"FRONT.TOUR.SEARCH_RESULTS_2",index:1,placement:{align:v,location:h},position:".cloudsearch-results-inline-filters"}],condition:function(){return i.hasFeature("elasticsearch-ps")&&n.tab===g.TAB_ALL.uid},disabled:!1,parent:void 0,pre:function(){return u.waitForAndExecute(".cloudsearch-results__wrapper .cloudsearch-result-block")},siblings:[],state:"app.front.search",uid:"FRONT.TOUR.SEARCH_RESULTS"},brigitte2:{bubbles:[{action:void 0,focus:!0,highlightPadding:{horizontal:24,vertical:16},id:"FRONT.TOUR.SEARCH_FILTERS_1",index:0,placement:{align:v,location:h},position:".cloudsearch-results-inline-filters"}],condition:function(){return i.hasFeature("elasticsearch-ps")&&n.tab!==g.TAB_ALL.uid},disabled:!1,parent:void 0,pre:function(){return u.waitForAndExecute(".cloudsearch-results .cloudsearch-results-inline-filters .cloudsearch-results-inline-filters__list-item")},siblings:[],state:"app.front.search",uid:"FRONT.TOUR.SEARCH_FILTERS"},brigitte3:{bubbles:[{action:void 0,focus:!0,highlightPadding:{horizontal:24,vertical:16},id:"FRONT.TOUR.SEARCH_SORT_ORDERS_1",index:0,placement:{align:v,location:h},position:".cloudsearch-results-inline-filters__sort-by"}],condition:function(){return i.hasFeature("elasticsearch-ps")&&n.tab!==g.TAB_ALL.uid},disabled:!1,parent:void 0,pre:function(){return u.waitForAndExecute(".cloudsearch-results .cloudsearch-results-inline-filters .cloudsearch-results-inline-filters__sort-by")},siblings:[],state:"app.front.search",uid:"FRONT.TOUR.SEARCH_SORT_ORDERS"}};return m.availableTours=void 0,m.placements={alignements:{beginning:v,bottom:h,center:y,end:E,left:b,middle:O,right:C,top:T},locations:{bottom:h,center:y,left:b,right:C,top:T}},m.tourPromise=void 0,m.calculateArrowPosition=function(e,t,n,r,i){var a=e.offset().left,o=e.offset().top;switch(n.location){case"top":case"bottom":switch(n.arrow){case"right":r.left=a-t.outerWidth()+20+i.horizontal;break;case"center":r.left=a-t.outerWidth()/2+10-i.horizontal/2;break;default:r.left=a+i.horizontal}break;default:case"right":case"left":switch(n.arrow){case"bottom":r.top=o-t.outerHeight()+20+i.vertical;break;case"middle":r.top=o-t.outerHeight()/2+10-i.vertical/2;break;default:r.top=o-i.vertical}}switch(n.location){case"top":case"bottom":switch(n.align){case"left":case"beginning":break;case"right":case"end":r.left+=e.outerWidth()-20;break;default:case"middle":case"center":r.left+=e.outerWidth()/2-10}break;default:case"right":case"left":switch(n.align){case"top":case"beginning":break;case"bottom":case"end":r.top+=e.outerHeight()-20;break;default:case"middle":case"center":r.top+=e.outerHeight()/2-10}}return r},m.calculateBubblePosition=function(e,t,n,r,i){var a=e.offset().left,o=e.offset().top;switch(r.location){case"left":i.left=a-n.outerWidth()-t.horizontal-5-8;break;case"top":i.top=o-n.outerHeight()-t.vertical-5-8;break;case"bottom":i.top=o+e.outerHeight()+t.vertical+5+8;break;case"center":i.top=30,i.left="50%",i.transform="translateX(-50%)";break;default:i.left=a+e.outerWidth()+t.horizontal+5+8}return i},m.getTour=function(e,t){var n=s()(S,{uid:e});if(!angular.isUndefinedOrEmpty(n)){var r=o.getConnected();if((!angular.isUndefinedOrEmpty(r)||t)&&(t||!p(r,n.uid)))return n}},m.getTourLength=function(e){if(!angular.isUndefinedOrEmpty(e)){var t=e.bubbles.length;return angular.forEach(l()(e,"siblings",[]),(function(e){var n=s()(S,{uid:e});t+=n.bubbles.length})),t}},m.onTourSave=function(e,t){var n=o.getConnected();if(!angular.isUndefinedOrEmpty([l()(e,"uid"),n],"some")&&!p(n,e.uid)){t=t||angular.noop;var r={instance:"ON_BOARDING_TOURS",tutorialId:e.uid};c.save({tutorials:r,settings:n.settings},(function(n){angular.isUndefinedOrEmpty(n)||(o.setConnectedUser(n),o.initUserLangsAndNotifications(),angular.isDefinedAndFilled(e.parent)&&m.onTourSave(s()(S,{uid:e.parent})),t())}),(function(){angular.element("body").removeClass("app-content--tutorial-mode"),m.availableTours=void 0}))}},m.setAvailability=function(e){var t=o.getConnected();if(!angular.isUndefinedOrEmpty(t)&&!p(t,e)){var n=s()(S,{uid:e});if(angular.isDefinedAndFilled(n)){var r=l()(m,"availableTours",[]);r.push(n),m.availableTours=r}}},t.$on("$stateChangeStart",(function(){angular.isUndefinedOrEmpty(m.tourPromise)||m.tourPromise.resolve()})),t.$on("$stateChangeSuccess",(function(e,t){m.availableTours=void 0,r((function(){return m.init(t)}))})),t.$on("data-source-change",(function(){m.availableTours=void 0,r((function(){return m.init({name:"app.front.search"})}))})),m.init=function(t){if(!angular.isUndefinedOrEmpty(S)){var n=angular.isDefinedAndFilled(t.name)?t.name:"app.front";!function(t){var n=o.getConnected();if(!angular.isUndefinedOrEmpty(n)&&!o.isGuest()){var r=0,i=[],s=[];angular.forEach(S,(function(a){if(!p(n,a.uid)&&!a.externalCondition&&t.indexOf(a.state)>-1){var o=e.defer();i.push(o.promise);var c=angular.fastCopy(r);r++,e.when(f()(a,"condition")).then((function(e){!1!==e&&(s[c]=a),o.resolve()}))}})),e.all(i).then((function(){angular.isDefinedAndFilled(s)&&(m.availableTours=angular.isArray(m.availableTours)?m.availableTours.concat(m.availableTours,a()(s)):a()(s))}))}}(n)}},m}n.r(t),n.d(t,"OnBoardingTourService",(function(){return r}));var i=n(174),a=n.n(i),o=n(21),s=n.n(o),c=n(4),l=n.n(c),u=n(356),d=n.n(u),p=n(820),f=n.n(p),g=n(61);r.$inject=["$q","$rootScope","$stateParams","$timeout","Features","User","UserSettings","Utils"],angular.module("Services").service("OnBoardingTour",r)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c){function l(e){if(f.isDisplayed){var t=angular.isDefined(e.keyCode)?e.keyCode:e.which;switch(t){case 37:case 65:case 81:f.hasPrevious&&f.goToSlide(f.currentSlideIndex-1);break;case 39:case 68:f.hasNext&&f.goToSlide(f.currentSlideIndex+1)}}}function u(e){i.$apply(l.bind(f,e))}function d(){f.hasNext=f.currentSlideIndex<f.slides.length-1&&!f.isSaving,f.hasNext,f.hasPrevious=f.currentSlideIndex>0&&f.slides.length>0&&!f.isSaving,f.hasPrevious}var p,f=this,g={content:{backgroundColor:"transparent",paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0},footer:{},global:{borderRadius:0,boxShadow:0},header:{}};f.currentSlideIndex=0,f.hasNext=!1,f.hasPrevious=!1,f.htmlWidgets=[],f.isDisplayed=!1,f.isSaving=!1,f.slides=[],f.tutorialClass="",f.Translation=s,f.Utils=c,f.closeTutorial=function(){n.find(".app-content").removeClass("app-content--tutorial-mode"),n.find("body").removeClass("no-scroll"),f.isSaving||(f.isSaving=!0,a((function(){n.unbind("keydown"),r.hide(),f.isDisplayed=!1,f.postCloseCallback()()}),500),f.preCloseCallback()(p,(function(){f.isSaving=!1})))},f.goToSlide=function(e){if(!(f.isSaving||e>f.slides.length||e<0)){f.currentSlideIndex=e;var t=r.find(".tutorial-slides");t.removeClass().addClass("tutorial-slides").addClass("tutorial-slides--left-"+f.currentSlideIndex),d()}},f.reset=function(e){angular.isUndefinedOrEmpty(e)||(f.currentSlideIndex=0,f.slides=e.slides||[],angular.forEach(f.slides,(function(e){f.htmlWidgets.push({properties:{class:"tutorial-slides__description",content:s.translate(e.text),style:g},style:g,uuid:Object(t.b)(),widgetType:o.WIDGET_TYPES.HTML})})),f.isSaving=!1,f.isDisplayed=!0,d())},i.$watch("vm.tutorialInfo",(function(t,n){f.isDisplayed=!1,angular.isUndefinedOrEmpty(e.get(t,"slides"))||e.get(n,"id")===t.id||f.init(t)})),f.init=function(t){angular.isUndefinedOrEmpty(t)||(p=t.id,f.tutorialClass=e.get(t,"properties.class",""),f.reset(t),r.show(),n.bind("keydown",u),n.find(".app-content").addClass("app-content--tutorial-mode"),n.find("body").addClass("no-scroll"))}}n.$inject=["$document","$element","$scope","$timeout","InitialSettings","Translation","Utils"],angular.module("Directives").directive("tutorial",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",restrict:"E",scope:{postCloseCallback:"&",preCloseCallback:"&",tutorialInfo:"="},templateUrl:"/client/common/modules/module/modules/tutorial/views/tutorial.html"}}))}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/tutorial/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("TutorialFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){function r(e,t,n){var r=[];return angular.forEach(t,(function(t){if(n[t.id]){if(t.displayAgainTime){var a=e(Object(i.a)(t.displayAgainTime)),o=e(Object(i.a)(n[t.id]));a.isAfter(o)&&r.push(t.id)}}else r.push(t.id)})),r}n.d(t,"getTutorialToDisplay",(function(){return r}));var i=n(539);!function(){function t(t,n,i,a,o,s,c,l,u){function d(e){var t=l.getConnected(),i=n.getCurrentInstanceId(),a={};angular.isDefinedAndFilled(t.tutorials)&&(a=t.tutorials[i]||{});var o=r(moment,e,a);p.tutorialIterator=function(e){var t=0;return{hasNext:function(){return t<e.length},next:function(){var n;return n=t<e.length?{done:!1,value:e[t++]}:{done:!0},n}}}(o),p.displayNextTutorial()}var p=i.createLumsitesBaseService(c,{autoInit:!1,objectIdentifier:"uid"});return p.currentTutorial=void 0,p.defaultParams={},p.tutorialIterator=void 0,p.displayNextTutorial=function(){var e=p.tutorialIterator.next();e.done?p.currentTutorial=void 0:p.get(e.value,(function(e){angular.isUndefinedOrEmpty(e.slides)?p.displayNextTutorial():p.currentTutorial=e}),(function(){a.error(s.translate("TUTORIAL_DISPLAY_ERROR_INVALID_TUTORIAL"))}))},p.onTutorialSave=function(e,t){if(!angular.isUndefinedOrEmpty(e)){t=t||angular.noop;var r=l.getConnected(),i={instance:n.getCurrentInstanceId(),tutorialId:e};u.save({tutorials:i,settings:r.settings},t,(function(){a.error(s.translate("TUTORIAL_DISPLAY_ERROR_UNABLE_TO_SAVE_SETTINGS"))}))}},p.openTutorial=function(t){if(!angular.isUndefinedOrEmpty(t)){var n=e.find(p.getList(),{functionalInnerId:t});angular.isUndefinedOrEmpty(n)||(p.currentTutorial=n)}},p.init=function(){var r=n.getCurrentInstanceId();p.defaultParams={customer:t.getCustomerId(),instance:r},l.isConnected()&&p.filterize({instance:r},(function(t){angular.isUndefinedOrEmpty(t)||(angular.isDefinedAndFilled(e.get(o.tourPromise,"promise"))?o.tourPromise.promise.then((function(){d(t)})):d(t))}))},p}t.$inject=["Customer","Instance","LumsitesBaseService","LxNotificationService","OnBoardingTour","Translation","TutorialFactory","User","UserSettings"],angular.module("Services").service("Tutorial",t)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/misc/:methodKey",{},{write:{isArray:!1,method:"POST",params:{methodKey:"metric"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("MonitoringFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(105);!function(){function n(n,r,i,a,o,s,c,l,u){var d={},p={},f={"initial-load/first-paint":12e4,"initial-load/html-load":6e4,"initial-load/loader-hidden":18e4},g="YYYY-MM-DD[T]HH:mm:ss.SSSSSSSSSZ";return d.DEFAULT_METRICS={firstPaint:"lumappsPerformances.firstPainting",htmlLoad:"performance.timing.responseEnd"},d.OTHER_METRICS={loaderHidden:"lumappsPerformances.loaderHidding"},d.is={initialized:!1,initializing:!1},d.write=function(r,a,o,c,d){if(!u.isConnected())return i.reject("User not connected");var m,v=e.includes(s.API_HOST,"localhost")&&"lumsites-dev"===s.APP_ID;if(n.search().debug||n.search().safe||v&&!t.ALLOW_METRIC_IN_LOCAL)return i.resolve();if(angular.isUndefinedOrEmpty([r,a],"some"))return i.reject("No path or value");if(o=o||Date.now(),c=c||p,d=d||"GAUGE",angular.isObject(a))m=(a.type||"").toUpperCase();else if("boolean"==typeof a)m="BOOL";else if(Number(a)==a)m=a%1==0?"INT64":"DOUBLE";else{if(!angular.isString(a))return i.reject("Undeterminable type of the value");m="STRING"}var h,y=f[r];switch(angular.isDefinedAndFilled(y)&&e.includes(["DOUBLE","MONEY","INT64"],m)&&(a=Math.min(a,y)),m){case"BOOL":h=Boolean(a);break;case"DOUBLE":h=Number(a);break;case"DISTRIBUTION":h=a;break;case"MONEY":h=Number(a);break;case"INT64":case"STRING":h=String(a);break;default:return i.reject("Unknown value type")}a={},a[m.toLowerCase()+"Value"]=h;var E={endTime:void 0,startTime:void 0};if(angular.isString(o))E.startTime=o,E.endTime=o;else if(angular.isDate(o)||angular.isNumber(o)){var b=moment(o).format(g);E.startTime=b,E.endTime=b}else{if(!angular.isObject(o))return i.reject("time is invalid");if(angular.isString(o.start))E.startTime=o.start;else{if(!angular.isDate(o.start))return i.reject("time.start is neither a string nor a date");E.startTime=moment(o.start).format(g)}if(angular.isString(o.end))E.endTime=o.end;else{if(!angular.isDate(o.end))return i.reject("time.end is neither a string nor a date");E.endTime=moment(o.end).format(g)}}return l.write({interval:E,kind:d,labels:c,path:r+(v?"_local":"")+"_new",value:a,valueType:m}).$promise},d.init=function(){var t=o.getCustomer(),i=c.getInstance();if(p={customer:e.get(t,"id","Unknown ID")+" - "+e.get(t,"domain","Unknown domain"),instance:e.get(i,"id","Unknown ID")+" - "+e.get(i,"name","Unknown name")},!d.is.initialized&&!d.is.initializing){d.is.initializing=!0;var s=angular.isDefined(n.search().perfs);a.lumappsPerformances=a.lumappsPerformances||{};var l=a.lumappsPerformances;if(angular.isDefined(e.get(a,"performance.timing"))){var u=a.performance.timing,f=u.navigationStart;l.htmlLoad=u.responseEnd-f,l.domComputing=u.domInteractive-u.responseEnd,l.domReady=u.domInteractive-f,angular.isDefined(l.firstPainting)&&angular.isUndefined(l.firstPaint)&&(l.firstPaint=l.firstPainting-f),s&&(console.group("Performance indicators"),r.debug("Navigation started",f,"Request started",u.fetchStart,"Response receiving",u.responseStart,"Response received",u.responseEnd),r.debug("HTML loading",l.htmlLoad),r.debug(""),r.debug("DOM loading",u.domLoading,"DOM loaded",u.domInteractive,"DOM computing",l.domComputing,"DOM ready",l.domReady),r.debug(""),r.debug("Body interpreting",l.bodyInterpreting,"Body interpretation",l.bodyInterpretation,"Body end",l.bodyEnd,"Body interpreted",l.bodyInterpreted),r.debug(""),r.debug("Angular Bootstraping",l.angularBootstraping,"Angular Bootstrap",l.angularBootstrap),r.debug("Angular Running",l.angularRunning,"Angular Run",l.angularRun),angular.isDefined(l.firstPainting)&&r.debug("First painting",l.firstPainting,"First paint",l.firstPaint),console.groupEnd("Performance indicators"))}angular.isDefinedAndFilled(l),d.is.initializing=!1,d.is.initialized=!0}},d}n.$inject=["$location","$log","$q","$window","Customer","InitialSettings","Instance","MonitoringFactory","User"],angular.module("Services").service("Monitoring",n)}()}.call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i,a,o,s,c,l,u){function d(){var t=o.getFormattedElementByLang(c.inputLanguage);angular.isDefinedAndFilled(t)&&angular.isUndefinedOrEmpty(e.get(f.ngModel,"items"))?f.menuItems.children=t.items:(f.isLoading=!0,o.get({action:"MENU_DROP",lang:c.inputLanguage},(function(t){if(f.menuItems.children.length=0,angular.isArray(t.items)&&(angular.forEach(t.items,(function(e){e.editable=!1})),f.menuItems.children=t.items,angular.isDefinedAndFilled(e.get(f.ngModel,"deleted")))){var n=e.map(f.ngModel.deleted,"uuid");angular.forEach(f.menuItems.children,(function(t){e.includes(n,t.uuid)&&o.addDeletedElement(t,t.lang)}))}!function(){if(angular.isArray(e.get(f.ngModel,"items")))for(var t=0,n=f.ngModel.items.length;t<n;++t){var r=f.ngModel.items[t];if(angular.isArray(r.items)&&r.lang===c.inputLanguage){angular.forEach(r.items,(function(t){if(t.$modified||t.$isNew){var n,r=t.parentUuid||t.parentId,i=angular.isDefinedAndFilled(r)?o.findNavItemById(r,f.menuItems.children):f.menuItems;i.children=i.children||[],n=t.$isNew?t.sortOrder:e.findIndex(i.children,{uuid:t.uuid}),angular.isDefinedAndFilled(i.children)?i.children.splice(n,t.$isNew?0:1,t):i.children.push(t),o.updateSortOrder(i.children),o.addModifiedElement(t,c.inputLanguage)}}));break}}}(),f.isLoading=!1}),(function(){f.isLoading=!1}),f.LIST_KEY))}function p(){var t;f.newContents=(t=angular.isArray(f.copyList)?f.copyList:[f.copyList],angular.forEach(t,(function(e){e.editable=!0,e.mode="picker"})),t),o.setEditableContentIds(e.map(f.newContents,"id")),d()}var f=this;f.INPUT_LANG_KEY=Object(t.b)(),f.LIST_KEY="navigation-manager-menu-items",f.isDisabled=!1,f.isLoading=!1,f.isOpen=!1,f.menuItems={children:[]},f.newContents=[],f.MainNav=o,f.Translation=c,f.UserAccess=l,f.Utils=u,f.cancelEdit=function(){o.clearEditItem()},f.closeManager=function(){o.clearEditItem(),o.resetElements(),s.close(f.managerId)},f.deleteElement=function(){o.addDeletedElement(o.getOriginalItem(),c.inputLanguage),o.clearEditItem()},f.onDropError=function(){a.warning(c.translate("ADMIN.MAIN_NAV.ERROR_NOT_UNIQUE"))},f.save=function(){f.isOpen=!1,f.ngModel=angular.fastCopy({customerId:r.getCustomerId(),deleted:o.getDeletedElements(),instanceId:i.getCurrentInstanceId(),items:o.getFormattedElements()}),o.clearEditItem(),s.close(f.managerId)},n.$on("inputLanguage",(function(e,t){f.INPUT_LANG_KEY===t.identifier&&d()})),n.$on("navigation-picker__close-end",(function(e,t){f.managerId===t&&(f.isOpen=!1,f.init())})),n.$on("navigation-picker__open-start",(function(e,t){f.managerId===t&&(f.isOpen=!0,p())})),f.init=function(){f.newContents.length=0,o.clearEditItem(),f.menuItems.children.length=0}}n.$inject=["$scope","Customer","Instance","LxNotificationService","MainNav","NavigationManager","Translation","UserAccess","Utils"],angular.module("Directives").directive("lsNavigationManager",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",link:function(e,t){t.appendTo("body"),e.$on("$destroy",(function(){t.remove()}))},restrict:"E",scope:{copyList:"=lsCopyList",managerId:"@lsManagerId",ngModel:"=ngModel"},templateUrl:"/client/common/modules/navigation-manager/views/navigation-manager.html"}}))}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n){this.close=function(n){angular.isUndefinedOrEmpty(n)||(e.$broadcast("navigation-picker__close-start",n),angular.element("body").css({overflow:"visible"}),angular.element("#"+n).removeClass("item-picker--is-shown"),t((function(){e.$broadcast("navigation-picker__close-end",n)}),600))},this.open=function(r){angular.isUndefinedOrEmpty(r)||(n.register(),e.$broadcast("navigation-picker__open-start",r),angular.element("body").css({overflow:"hidden"}),t((function(){var t=angular.element("#"+r);t&&(t.css("z-index",n.getDepth()).addClass("item-picker--is-shown"),e.$broadcast("navigation-picker__open-end",r))}),600))}}e.$inject=["$rootScope","$timeout","LxDepthService"],angular.module("Services").service("NavigationManager",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a){function o(){s.isLoading=!0,r.get({action:"MENU_EDIT",lang:a.inputLanguage},(function(t){s.isLoading=!1,angular.isArray(t.items)&&(angular.forEach(t.items,(function(e){e.editable=!1})),s.menuItems.children=t.items),function(){if(angular.isArray(e.get(s.ngModel,"items")))for(var t=0,n=s.ngModel.items.length;t<n;++t){var i=s.ngModel.items[t];if(angular.isArray(i.items)&&i.lang===a.inputLanguage){angular.forEach(i.items,(function(t){if(t.$modified||t.$isNew){var n,i=angular.isDefinedAndFilled(t.parentId)?r.findNavItemById(t.parentId,s.menuItems.children):s.menuItems;n=t.$isNew?t.sortOrder:e.findIndex(i.children,{uuid:t.uuid}),angular.isArray(e.get(i,"children"))&&(i.children.splice(n,t.$isNew?0:1,t),r.updateSortOrder(i.children),r.addModifiedElement(t,a.inputLanguage))}}));break}}}()}),(function(){s.isLoading=!1}),s.LIST_KEY)}var s=this;s.LIST_KEY="navigation-picker-menu-items",s.isLoading=!1,s.isOpen=!1,s.menuItems={children:[]},s.pickedItems=[],s.MainNav=r,s.Translation=a,s.cancelEdit=function(){r.clearEditItem()},s.closePicker=function(){i.close(s.pickerId)},s.dropErrorCallback=function(){n.warning(a.translate("ADMIN.MAIN_NAV.ERROR_NOT_UNIQUE"))},s.save=function(){s.ngModel=angular.fastCopy(s.pickedItems),r.clearEditItem(),r.resetElements(),s.closePicker()},t.$on("inputLanguage",(function(){o()})),t.$on("navigation-picker__close-end",(function(e,t){s.pickerId===t&&(s.isOpen=!1,s.init())})),t.$on("navigation-picker__open-start",(function(e,t){s.pickerId===t&&(s.isOpen=!0,s.isOpen=!0,s.pickedItems=s.ngModel||[],o())})),s.init=function(){r.clearEditItem(),s.menuItems.children.length=0},s.init()}t.$inject=["$scope","LxNotificationService","MainNav","NavigationPicker","Translation"],angular.module("Directives").directive("lsNavigationPicker",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",link:function(e,t){t.appendTo("body"),e.$on("$destroy",(function(){t.remove()}))},restrict:"E",scope:{ngModel:"=ngModel",pickerId:"@lsPickerId"},templateUrl:"/client/common/modules/navigation-picker/views/navigation-picker.html"}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t,n){this.close=function(n){angular.isUndefinedOrEmpty(n)||(e.$broadcast("navigation-picker__close-start",n),angular.element("body").css({overflow:"visible"}),angular.element("#"+n).removeClass("item-picker--is-shown"),t((function(){e.$broadcast("navigation-picker__close-end",n)}),600))},this.open=function(r){angular.isUndefinedOrEmpty(r)||(e.$broadcast("navigation-picker__open-start",r),n.register(),angular.element("body").css({overflow:"hidden"}),t((function(){angular.element("#"+r).css("z-index",n.getDepth()).addClass("item-picker--is-shown")})),t((function(){e.$broadcast("navigation-picker__open-end",r)}),600))}}e.$inject=["$rootScope","$timeout","LxDepthService"],angular.module("Services").service("NavigationPicker",e)}()},function(e,t){!function(){"use strict";function e(e){var t=this;t.classes=[],t.hasBackground&&t.classes.push("no-results--has-background"),t.text=t.text||e.translate("NO_RESULTS")}e.$inject=["Translation"],angular.module("Directives").directive("noResults",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{hasBackground:"<?",text:"@?"},templateUrl:"/client/common/modules/no-results/views/no-results.html"}}))}()},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,o,l,u){var d=this;d.id=Object(c.b)(),d.options={},d.isOpen=!1,d.Config=i,d.MediaConstant=o,d.Utils=l,d.open=function(t,i,a){d.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allowFolderPick:!1,allowedFileTypes:o.DOCUMENT_TYPES.imagesAndFolders,allowedProviders:[o.PROVIDERS.lumapps],isMediaModel:!0,multi:!1,showFoldersOnly:!1},a),angular.isDefinedAndFilled(t)&&(t=angular.isArray(t)?t:[t]);var c=angular.isArray(t)?Array.from(t):t;d.value=c,d.isOpen=!0;var u=e.$on("abstract-picker__close-end",(function(e,t){t===d.id&&(u(),d.value!==c&&i(d.value),d.isOpen=!1)}));l.waitForAndExecute("#".concat(d.id),n)},u.set(d)}function a(){return{bindToController:!0,controller:i,controllerAs:"reusableMediaPicker",restrict:"E",templateUrl:"/client/common/modules/reusable-media-picker/views/reusable-media-picker.html"}}n.r(t),n.d(t,"ReusableMediaPickerController",(function(){return i})),n.d(t,"ReusableMediaPickerDirective",(function(){return a}));var o=n(3),s=n.n(o),c=n(35);i.$inject=["$rootScope","$scope","AbstractPicker","Config","Features","MediaConstant","Utils","ReusableMediaPicker"],angular.module("Directives").directive("reusableMediaPicker",a)},function(e,t,n){"use strict";function r(){var e=this;e.mediaPicker=void 0,e.open=function(t,n,r){if(angular.isUndefined(e.mediaPicker))throw new TypeError("No media picker set. Make sure <reusable-media-picker /> is present in the DOM somewhere.");e.mediaPicker.open(t,n,r)},e.set=function(t){e.mediaPicker=t}}n.r(t),n.d(t,"ReusableMediaPickerService",(function(){return r})),angular.module("Services").service("ReusableMediaPicker",r)},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,a,s,l,p,f,g,m,v){function h(e){var t=_.parseContentAsText(e),n=function(e){return e.filter((function(e){for(var n=!1,r=f.label(e),i=f.encode(e);c()(t,r);)t=t.replace(r,i),n=!0;return n}))};return _.userMentioned=n(_.userMentioned),_.feedMentioned=n(_.feedMentioned),_.inlineImages=n(_.inlineImages),_.render(t),_.parseTextAsContent(t)}function y(e){var t;t=(e||"").toString(),e=angular.isString(t)?t.replace(/&amp;/g,"&"):t;var n=function(t){return t.filter((function(t){for(var n=!1,r=f.encode(t),i=f.label(t);c()(e,r);)e=e.replace(r,i),n=!0;return n}))};_.userMentioned=n(_.userMentioned),_.feedMentioned=n(_.feedMentioned),_.inlineImages=n(_.inlineImages);for(var r=f.encodedMentionPattern.exec(e);null!==r;)r.index===f.encodedMentionPattern.lastIndex&&f.encodedMentionPattern.lastIndex++,e=e.replace(r[0],r[1]),r=f.encodedMentionPattern.exec(e);return _.tempModel=e,e}function E(){_.dropDownOpen&&p.close(_.dropDownIdentifier),_.dropDownOpen=!1}function b(e){if(!c()(F,e.keyCode))if(_.moved)_.moved=!1;else if(_.textAreaElement[0].selectionStart===_.textAreaElement[0].selectionEnd){var t=_.textAreaElement.val();x(t);var n=_.pattern.exec(t.substr(0,_.textAreaElement[0].selectionStart));n?_.search(n):_.cancelSelection()}}function O(){_.dropDownOpen&&!angular.isUndefinedOrEmpty(_.choices)&&_.select(_.choices[_.activeChoiceIndex])}function C(){_.cancelSelection(),_.ngModel=h(I.$viewValue),_.isLoading=!1}function T(e){if(_.markdown){var t=o()(_.textAreaElement),n=t.selectionStart!==t.selectionEnd;n||e.newLine||g.selectCloseElement(t),e.prefixLine?(g.selectLine(t),g.prefixLine(t,e)):e.newLine&&!n||!g.isWrapped(t,e)?g.wrap(t,e):g.unWrap(t,e),x(t.value),_.autogrow()}}var S,I,_=this,A=66,w=40,D=13,L=27,P=73,N=37,R=39,j=9,k=38,F=[L],U=f.defaultIdentifierChar,M=n[0].createElement("textarea");_.activeChoiceIndex=0,_.choices=[],_.dropDownIdentifier=Object(d.b)(),_.beaconIdentifier="b-".concat(Object(d.b)()),_.dropDownOpen=!1,_.isLoading=!1,_.moved=!1,_.pattern=new RegExp("(?:\\s|^)([".concat(U.join("|"),"])(\\S+)$")),_.renderTarget=r.find(".ls-rich-text-editor__view"),_.searching=void 0,_.tempModel="",_.textAreaElement=r.find(".ls-rich-text-editor__textarea"),_.LsTextEditor=f,_.User=m,_.actionSelected={bold:!1,bulletList:!1,image:!1,italic:!1,link:!1},_.currentMode=f.availableModes.write,_.editorSettings=angular.fastCopy({displayStyleButton:!0,displayViewSwitch:!0}),_.LsTextEditorMarkdown=g;var x=e.debounce((function(e){a.$safeApply((function(){I.$setViewValue(e)}))}),300);_.autogrow=function(){_.textAreaElement[0].style.height=0;var e=getComputedStyle(_.textAreaElement[0]);"border-box"===e.boxSizing&&(_.textAreaElement[0].style.height="".concat(_.textAreaElement[0].scrollHeight,"px"))},_.cancelSelection=function(){_.choices.length=0,_.searching=void 0,_.activeChoiceIndex=0,E()},_.displayNextSearches=function(){var e=angular.fastCopy(m.displayList(f.MENTION_EDITOR_LIST_LEY));m.nextPage((function(t){var n=t.slice(e.length);Array.prototype.push.apply(_.choices,n)}),v.displayServerError,f.MENTION_EDITOR_LIST_LEY)},_.getCurrentMode=function(){return _.currentMode},_.parseContentAsText=function(e){try{return M.textContent=e,M.innerHTML}finally{M.textContent=void 0}},_.parseTextAsContent=function(e){try{return M.innerHTML=e,M.textContent}finally{M.innerHTML=void 0}},_.render=function(e){e=(e||I.$modelValue||"").toString();var t=!0,n=!1,r=void 0;try{for(var a,o=u()([],_.userMentioned,_.feedMentioned,_.inlineImages)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value,c=f.encode(s),l=f.highlight(s);e=e.replace(new RegExp(c.replace(/([![\]()])/g,"\\$1"),"g"),l)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return _.renderElement(i("escapeScript")(e)),e},_.renderElement=function(e,n){n=!!angular.isUndefined(n)||n,_.renderTarget.html(i("safeAngular")(e,n)),n&&t(_.renderTarget)(s)},_.search=function(e){_.searching=e,_.isLoading=!0;var t=_.searching.index+1,n="".concat(I.$viewValue.substr(0,t),'<span class="dd-beacon" id="').concat(_.beaconIdentifier,'">').concat(I.$viewValue.substr(t),"</span>");_.render(n),function(){if(angular.isFunction(S)&&(S(),S=void 0),!_.dropDownOpen){var e=angular.element("#".concat(_.beaconIdentifier));angular.isDefinedAndFilled(e)&&(S=l((function(){p.open(_.dropDownIdentifier,"#".concat(_.beaconIdentifier)),_.dropDownOpen=!0}),250))}}(),f.search(e[2],(function(t){_.isLoading=!1;var n,r,i,a=(n=t,r=e[2],i=n.slice(0),angular.forEach(_.specialMentions,(function(e,t){angular.forEach(e,(function(e){0===e.indexOf(r)&&i.unshift({id:t,name:e.charAt(0).toUpperCase()+e.slice(1),type:"feed"})}))})),i);angular.isDefinedAndFilled(a)?(_.choices=a,_.activeChoiceIndex=0):C()}),C)},_.select=function(e){E(),angular.isDefinedAndFilled(e.type)&&"feed"===e.type?_.feedMentioned.push(e):_.userMentioned.push(e),I.$setViewValue(f.replace(e,_.searching,I.$viewValue,_.searching[1])),_.cancelSelection(),I.$render()},_.switchMode=function(e){angular.isDefined(f.availableModes[e])&&(_.currentMode=e)},_.triggerAction=function(e,t){if(!angular.isUndefinedOrEmpty(_.actionSelected[e])){var n=t||g.MARKDOWN_CONFIG[e];"image"===e&&(_.inlineImages.push(n),n.value="".concat(f.label(n),"\n")),_.actionSelected[e]=!_.actionSelected[e],_.textAreaElement.focus(),T(n)}},_.changeHeading=function(e){_.textAreaElement.focus(),g.MARKDOWN_CONFIG[e]&&(a.$broadcast("ls-rich-text-editor__movement",{prefixMode:e}),T(g.MARKDOWN_CONFIG[e]))},_.textAreaElement.on(["keyup","click","focus"].join(" "),b),s.$on("ls-rich-text-editor__focus",(function(){_.textAreaElement.focus()})),_.textAreaElement.on("input",(function(){_.autogrow(),a.$broadcast("ls-rich-text-editor__movement",{prefixMode:g.getCurrentPrefixMode(o()(_.textAreaElement))})})),_.textAreaElement.on("mouseup",(function(){a.$broadcast("ls-rich-text-editor__movement",{prefixMode:g.getCurrentPrefixMode(o()(_.textAreaElement))}),setTimeout((function(){a.$safeApply()}),0)})),_.textAreaElement.on("keyup",(function(e){_.searching||e.keyCode!==w&&e.keyCode!==k&&e.keyCode!==N&&e.keyCode!==R||a.$broadcast("ls-rich-text-editor__movement",{prefixMode:g.getCurrentPrefixMode(o()(_.textAreaElement))})})),_.textAreaElement.on("keydown",(function(e){if(_.searching){switch(e.keyCode){case j:case D:O();break;case k:_.dropDownOpen&&!angular.isUndefinedOrEmpty(_.choices)&&(_.activeChoiceIndex-=1,_.activeChoiceIndex<0&&(_.activeChoiceIndex=_.choices.length-1));break;case w:_.dropDownOpen&&!angular.isUndefinedOrEmpty(_.choices)&&(_.activeChoiceIndex+=1,_.activeChoiceIndex>=_.choices.length&&(_.activeChoiceIndex=0));break;default:return void(_.dropDownOpen&&c()(F,e.keyCode)&&E())}_.moved=!0,e.stopPropagation(),e.preventDefault(),a.$safeApply()}else switch(e.keyCode){case A:(e.ctrlKey||e.metaKey)&&T(g.MARKDOWN_CONFIG.bold);break;case P:(e.ctrlKey||e.metaKey)&&T(g.MARKDOWN_CONFIG.italic);break;case D:(e.ctrlKey||e.metaKey)&&angular.isFunction(_.submit)&&(b(e),_.submit(e));break;default:c()(F,e.keyCode)&&!_.preventCancelOnEscape&&(_.cancel(e),l((function(){_.textAreaElement.blur()}),1))}})),this.init=function(e){angular.extend(_.editorSettings,_.editorOption),angular.isDefined(_.externalControls)&&(_.externalControl=_.externalControls,_.externalControl.triggerAction=_.triggerAction,_.externalControl.changeHeading=_.changeHeading,_.externalControl.switchMode=_.switchMode,_.externalControl.getCurrentMode=_.getCurrentMode,_.externalControl.textAreaElement=_.textAreaElement),E(),_.markdown=Boolean(_.markdown),I=e,I.$parsers.push(h),I.$formatters.push(y),I.$render=function(){_.textAreaElement.val(I.$viewValue||""),_.render(),l(_.autogrow)},l(_.autogrow,500),_.userMentioned=_.userMentioned||[],_.feedMentioned=_.feedMentioned||[],_.inlineImages=_.inlineImages||[]}}function i(){return{bindToController:!0,controller:r,controllerAs:"$editor",link:function(e,t,n,r){r[1].init(r[0])},require:["ngModel","lsRichTextEditor"],restrict:"AE",scope:{cancel:"&?",editorOption:"=?",externalControls:"=?",feedMentioned:"=?",inlineImages:"=?",markdown:"=?",ngFocus:"&?",ngModel:"=",placeholder:"@",specialMentions:"=?",submit:"&?",userMentioned:"=?",preventCancelOnEscape:"=?"},templateUrl:"/client/common/modules/rich-text/views/ls-rich-text-editor.html"}}n.d(t,"RichTextEditorController",(function(){return r})),n.d(t,"RichTextEditorDirective",(function(){return i}));var a=n(51),o=n.n(a),s=n(17),c=n.n(s),l=n(167),u=n.n(l),d=n(35);r.$inject=["$compile","$document","$element","$filter","$rootScope","$scope","$timeout","LxDropdownService","LsTextEditor","LsTextEditorMarkdown","User","Utils"],angular.module("Directives").directive("lsRichTextEditor",i)}.call(this,n(38))},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,a,s,u,d){function p(e){return r("emoji")(e)}function f(e,n){e&&(e.html(r("safeAngular")(n,!0)),t(e.contents())(i))}var g,m=this,v={blockquote:!0,br:!1,code:!1,codespan:!1,del:!0,em:!1,heading:!0,hr:!1,html:!0,image:!1,link:!1,list:!1,listitem:!0,paragraph:!0,strong:!1,table:!0,tablecell:!0,tablerow:!0},h=[],y=[];m.html="",m.translationLoading=!1,m.isTranslated=!1,m.isTranslatable=!1,m.isTranslationVisible=!1,m.GTranslate=a,i.$watch("vm.text",(function(e,t){t!==e&&m.init()})),i.$watch("vm.theme",(function(e,t){t!==e&&m.init()})),m.getClasses=function(){var e=[];return"dark"===m.theme?e.push("ls-rich-text--theme-dark"):e.push("ls-rich-text--theme-light"),e},m.translate=function(){m.translationLoading=!0,a.translate(m.html,u.getLang("current"),void 0,(function(e){f(n.find("#ls-rich-text-translated"),e.contentText),m.translationLoading=!1,m.isTranslated=!0,m.isTranslationVisible=!0}),(function(e){m.translationLoading=!1,d.displayServerError(e)}))},m.switchTranslationVisibility=function(){m.isTranslationVisible=!m.isTranslationVisible},m.init=function(){if(m.allowTranslation=!angular.isDefined(m.allowTranslation)||m.allowTranslation,m.markdown=Boolean(m.markdown),g=m.markdown?e:o.a,m.markdown){var t=new e.Renderer,E=new e.Renderer;angular.forEach(v,(function(n,r){n&&(E[r]=function(n,i,a){return t[r](p(n),i,a,"heading"===r?new e.Slugger:null)})})),E.link=function(e,t,n){return angular.isDefinedAndFilled(t)?'<a target="_blank" href="'.concat(e,'" title="').concat(t,'">').concat(n,"</a>"):'<a target="_blank" href="'.concat(e,'">').concat(n,"</a>")},m.html=g(m.text,{breaks:!0,renderer:E,sanitize:!m.allowHtml,smartypants:!0});m.html=d.replaceTokens(m.html,!1,{"&amp;gt;":"&gt;","&amp;lt;":"&lt;"})}else m.html=r("nl2br")(p(m.text));angular.forEach(m.userMentioned,(function(e){i[s.scopeUserVarPrefix+e.id]=e,y.push(e.id)})),angular.forEach(m.feedMentioned,(function(e){i[s.scopeFeedVarPrefix+e.name.toLowerCase()+e.id]=e,h.push(e.id)})),function(){for(var e=s.encodedMentionPattern.exec(m.html);null!==e;){e.index===s.encodedMentionPattern.lastIndex&&s.encodedMentionPattern.lastIndex++;var t="";c()(y,e[2])?t=s.encodeToDirective(e[2],m.theme):c()(h,e[2])&&(t=s.encodeToDirective(e[2],m.theme,s.scopeFeedVarPrefix+e[1])),m.html=m.html.replace(e[0],t),e=s.encodedMentionPattern.exec(m.html)}}(),f(n.find("#ls-rich-text-origin"),d.escapeHtmlTags(Object(l.e)(m.html),"script")),m.isTranslatable=m.allowTranslation&&m.html.length<a.MAX_CHAR_TO_TRANSLATE&&m.textLang&&u.getLang("current")!==m.textLang},m.init()}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",replace:!0,restrict:"AE",scope:{allowHtml:"<?lsAllowHtml",allowTranslation:"<?",feedMentioned:"=?",markdown:"=?",showLess:"<?",showMore:"<?",text:"=",textLang:"@?lang",theme:"@?",userMentioned:"=?"},templateUrl:"/client/common/modules/rich-text/views/ls-rich-text.html"}}n.d(t,"LsRichTextController",(function(){return r})),n.d(t,"LsRichTextDirective",(function(){return i}));var a=n(369),o=n.n(a),s=n(17),c=n.n(s),l=n(35);r.$inject=["$compile","$element","$filter","$scope","GTranslate","LsTextEditor","Translation","Utils"],angular.module("Directives").directive("lsRichText",i)}.call(this,n(846))},function(e,t,n){"use strict";n.r(t);var r=n(19),i=n.n(r),a=n(51),o=n.n(a),s=n(17),c=n.n(s);angular.module("Services").service("LsTextEditorMarkdown",(function(){function e(e){var t=e.value.split(a);return{end:t[1]?t[1].length:t[0].length,endVal:t[1],start:angular.isString(t[0])?t[0].length:0,startVal:t[0]}}function t(e){return e.value.substring(e.selectionStart,e.selectionEnd)}function n(e,t,n,r){n=angular.isNumber(n)?n:e.selectionStart,r=angular.isNumber(r)?r:e.selectionEnd,e.value=e.value.substring(0,n)+t+e.value.substring(r,e.value.length)}var r=this,a="{$VALUE}",s="^#+ (.*)$",l="insert",u="wrap";r.MARKDOWN_CONFIG={"FRONT.TEXT_EDITOR.HEADINGS.HEADING1":{action:l,prefixLine:!0,value:"# ".concat(a)},"FRONT.TEXT_EDITOR.HEADINGS.HEADING2":{action:l,prefixLine:!0,value:"## ".concat(a)},"FRONT.TEXT_EDITOR.HEADINGS.NORMAL_TEXT":{action:l,prefixLine:!0,value:"".concat(a)},bold:{action:u,value:"**".concat(a,"**")},bulletList:{action:l,newLine:!0,value:"- ".concat(a)},image:{action:l,avoidSplitParagraph:!0,newLine:!0},italic:{action:u,value:"_".concat(a,"_")},link:{action:u,value:"[".concat(a,"](url)")}},r.MARKUP_ACTIONS={bold:"bold",bulletList:"bulletList",image:"image",italic:"italic",link:"link"},r.formatLink=function(e,t){if(r.hasSelectedText(t)&&!angular.isUndefinedOrEmpty(t)){var n=o()(t.textAreaElement);e=e||r.getWrappedLink(n);var i=angular.fastCopy(r.MARKDOWN_CONFIG.link);i.value=i.value.replace("url",e),t.triggerAction("link",i)}},r.getWrappedLink=function(e){var n=t(e);n=n.replace(/([.*+?^=!:${}()|[\]\\/\\])/g,"\\$1");var r=new RegExp("\\[".concat(n,"\\]\\(([^ \n]*)\\)")),i=r.exec(e.value);if(angular.isDefinedAndFilled(i)&&angular.isString(i[1]))return i[1]},r.hasSelectedText=function(e){if(angular.isUndefinedOrEmpty(e))return!1;var t=o()(e.textAreaElement);return t.selectionStart!==t.selectionEnd},r.isSelectionLinkWrapped=function(e){var t=o()(e.textAreaElement),n=r.getWrappedLink(t),i=angular.fastCopy(r.MARKDOWN_CONFIG.link);return i.value=i.value.replace("url",n),r.isWrapped(t,i)},r.isWrapped=function(n,r){if(r.prefixLine&&function(e){var n=t(e);if(angular.isUndefinedOrEmpty(n))return!1;var r=new RegExp(s,"gm"),i=r.exec(n);return!(!angular.isDefinedAndFilled(i)||!angular.isString(i[1]))}(n)||angular.isString(function(e,n){var r=t(e);if(!angular.isUndefinedOrEmpty(r)){var i=new RegExp("^".concat(n.value.replace(/[-*]/g,"\\$&").replace(a,"(.*)"),"$"),"gm"),o=i.exec(r);return angular.isDefinedAndFilled(o)&&angular.isString(o[1])?o[1]:void 0}}(n,r)))return!0;var i=e(r);return n.value.substr(n.selectionStart-i.start,i.start)===i.startVal&&n.value.substr(n.selectionEnd,i.end)===i.endVal},r.selectCloseElement=function(e){for(var t=["\r\n","\r","\n"," "];!c()(t,e.value[e.selectionStart-1])&&e.selectionStart>0;)e.selectionStart--;for(;!c()(t,e.value[e.selectionEnd])&&e.selectionEnd<e.value.length;)e.selectionEnd++},r.selectLine=function(e){for(var t=["\n"];!c()(t,e.value[e.selectionStart-1])&&e.selectionStart>0;)e.selectionStart--;for(;!c()(t,e.value[e.selectionEnd])&&e.selectionEnd<e.value.length;)e.selectionEnd++},r.stripMarkdown=function(e,t){t=t||{},t.stripListLeaders=!!angular.isUndefined(t.stripListLeaders)||t.stripListLeaders,t.gfm=!!angular.isUndefined(t.gfm)||t.gfm;var n=e;try{t.stripListLeaders&&(n=n.replace(/^([\s\t]*)([*\-+]|\d\.)\s+/gm,"$1")),t.gfm&&(n=n.replace(/\n={2,}/g,"\n"),n=n.replace(/~~/g,""),n=n.replace(/`{3}.*\n/g,"")),n=n.replace(/<(.*?)>/g,"$1"),n=n.replace(/^[=-]{2,}\s*$/g,""),n=n.replace(/\[\^.+?\](: .*?$)?/g,""),n=n.replace(/\s{0,2}\[.*?\]: .*?$/g,""),n=n.replace(/!\[.*?\][[(].*?[\])]/g,""),n=n.replace(/\[(.*?)\][[(].*?[\])]/g,"$1"),n=n.replace(/>/g,""),n=n.replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,""),n=n.replace(/#{1,6}\s*([^#]*)\s*(#{1,6})?/gm,"$1"),n=n.replace(/([*_]{1,3})(.*?)\1/g,"$2"),n=n.replace(/(`{3,})(.*?)\1/gm,"$2"),n=n.replace(/^-{3,}\s*$/g,""),n=n.replace(/`(.+?)`/g,"$1"),n=n.replace(/\n{2,}/g,"\n\n")}catch(t){return e}return n},r.unWrap=function(r,i){var a=r.selectionStart,o=r.selectionEnd,s=e(i),c=t(r),l=s.startVal.replace(/[-*]/g,"\\$&"),u=s.endVal.replace(/[-*]/g,"\\$&"),d=new RegExp("^".concat(l,"(.*)").concat(u,"$"),"gm"),p=c.replace(d,"$1");"\n"===p&&(p=""),n(r,p,a,o),r.selectionStart=a,r.selectionEnd=a+p.length},r.wrap=function(i,o){var s,c=o.value===r.MARKDOWN_CONFIG.bulletList.value,l=i.selectionStart,u=i.selectionEnd,d=e(o),p=t(i),f=angular.isDefinedAndFilled(p)?p.split("\n"):[];angular.isDefinedAndFilled(p)&&!o.avoidSplitParagraph?(s="",angular.forEach(f,(function(e,t){s+=o.value.replace(a,e),t<f.length-1&&(s+="\n")}))):s=o.value.replace(a,"");var g="\n"===i.value.substr(i.selectionStart-1,1),m=s;if(o.newLine&&angular.isDefinedAndFilled(i.value)&&i.value!==p&&!g&&(m="\n".concat(m),d.start+=1,d.end+=1),o.avoidSplitParagraph){u=l;var v=0===l||"\n"===i.value[l-1];if(!v){var h=i.value.indexOf("\n",l);l=-1===h?i.value.length:h+1,u=l}}if(n(i,m,l,u),o.avoidSplitParagraph)i.selectionStart=l,i.selectionEnd=u;else if(s!==d.startVal+d.endVal||o.newLine){i.selectionEnd=u+(f.length||1)*d.end+(f.length||1)*d.end;var y=o.value.replace(a,"");i.selectionStart=c&&s===y?i.selectionEnd:l}else i.selectionStart=l+d.start,i.selectionEnd=i.selectionStart},r.prefixLine=function(r,i){var o,c=r.selectionStart,l=e(i),u=t(r),d=angular.isDefinedAndFilled(u)?u.split("\n"):[];angular.isDefinedAndFilled(u)?(o="",angular.forEach(d,(function(e,t){var n=new RegExp(s,"gm"),r=n.exec(e),c=r?r[1]:e;e.length>0&&(o+=i.value.replace(a,c)),t<d.length-1&&(o+="\n")}))):o=i.value.replace(a,"");var p="\n"===r.value.substr(r.selectionStart-1,1),f=o;i.newLine&&angular.isDefinedAndFilled(r.value)&&r.value!==u&&!p&&(f="\n".concat(f),l.start+=1,l.end+=1),n(r,f,r.selectionStart,r.selectionEnd),r.selectionStart=c+l.startVal.length,r.selectionEnd=r.selectionStart},r.getCurrentPrefixMode=function(e){for(var n=Object.keys(r.MARKDOWN_CONFIG).filter((function(e){return r.MARKDOWN_CONFIG[e].prefixLine})),o=t(e),s=o.split("\n"),c=s.reduce((function(t,s){var c=o[t.length-1]?t[t.length-1].lineIndex+t[t.length-1].content.length+1:e.selectionStart,l=function(e,t){var n=e.value.slice(0,t).lastIndexOf("\n")+1,r=e.value.indexOf("\n",n)>-1?e.value.indexOf("\n",n):e.value.length;return e.value.slice(n,r)}(e,c);return[].concat(i()(t),[{content:s,lineIndex:c,prefix:n.find((function(e){var t=l.match(new RegExp("^".concat(r.MARKDOWN_CONFIG[e].value.replace(a,"(.*)"),"$")));return Boolean(t)}))}])}),[]),l=c[0].prefix,u=1;u<c.length;u++){var d=c[u];if(d.prefix!==l)return null}return l}}))},function(e,t,n){"use strict";function r(e,t,n,r){var i,o,c=this,u={items:{apiProfile:{primaryEmail:!0,profilePicture:!0,thumbnail:!0,thumbnailPhotoUrl:!0},firstName:!0,id:!0,lastName:!0}};c.MENTION_EDITOR_LIST_LEY="mention-search",c.defaultIdentifierChar=["@","+"],c.encodedMentionPattern=/@\[(?:feed:)?([^:\]]+):(\d+)]/g,c.imagePattern=/!\[([^\]]*?)]\(([^)]+?)\)/g,c.availableModes={preview:"preview",write:"write"},c.currentTextarea=void 0,c.mentionAllKeywords=[],c.scopeFeedVarPrefix="feed",c.scopeUserVarPrefix="user",c.encode=function(e){return"image"===e.type?"![".concat(e.imageName,"](").concat(e.url,")"):"feed"===e.type?"@[feed:".concat(e.name,":").concat(e.id,"]"):"@[".concat(e.firstName,"-").concat(e.lastName,":").concat(e.id,"]")},c.encodeToDirective=function(e,t,n){return t=t||"light",n=n||c.scopeUserVarPrefix,n===c.scopeUserVarPrefix?'<ls-user-block-wrapper ls-view-mode="name" ls-theme="'.concat(t,'" ls-user="').concat(n).concat(e,'"></ls-user-block-wrapper>'):'<feed-block feed="'.concat(n).concat(e,'" view-mode="name"></feed-block>')},c.externalLinkTrigger=function(e){var n=t.MARKDOWN_CONFIG.link;n.value=n.value.replace("url",e),c.currentTextarea.triggerAction("link",n)},c.getFeedMentionedFromFeedKeys=function(e,t){var n,r=[];return angular.forEach(t,(function(t){var i=new RegExp("@\\[(?:feed:)([^:\\]]+):".concat(t,"\\]"),"g");n=i.exec(e),null!==n&&(e=e.replace(n[0],n[1]),r.push({id:t,name:n[1].charAt(0).toUpperCase()+n[1].slice(1),type:"feed"}))})),r},c.highlight=function(e){return'<span class="ls-rich-text-editor__highlight">'.concat(c.label(e),"</span>")},c.label=function(e){return"image"===e.type?"🖼️ ".concat(e.imageName):"feed"===e.type?e.name:r.getUserFullName(e)},c.replace=function(e,t,n,r){return"".concat(n.substr(0,t.index+t[0].indexOf(r))+c.label(e)," ").concat(n.substr(t.index+t[0].length))},c.search=function(t,n,i){n=n||angular.noop,i=i||angular.noop,r.filterize({instance:e.getCurrentInstanceId(),maxResults:10,query:t,queryFields:["fullName","partialSearch","emails"],showHidden:!1,status:"enabled"},n,i,c.MENTION_EDITOR_LIST_LEY,u)},c.mentionAllKeywords=(i=l()(a()(s()(n.getTranslationsTable(),(function(t,n){return d()(e.getInstance().langs,n)})),"ALL")),o=i.map((function(e){return e.toLowerCase()})),f()(o,(function(e){return-e})).reverse())}n.r(t);var i=n(28),a=n.n(i),o=n(75),s=n.n(o),c=n(174),l=n.n(c),u=n(17),d=n.n(u),p=n(218),f=n.n(p);r.$inject=["Instance","LsTextEditorMarkdown","Translation","User"],angular.module("Services").service("LsTextEditor",r)},function(e,t,n){"use strict";function r(e,t,n,r,i,o){function s(){r.close(f.dropdownId)}function c(t){f.autocompleteList=t,f.autocompleteList.length>0?r.open(f.dropdownId,e):s(),f.isLoading=!1}function l(e){i.error(e),f.isLoading=!1}function u(e,t){return(e||angular.isUndefined(e)&&f.searchOnFocus)&&!g?t?(f.isLoading=!0,f.autocomplete()(e,c,l)):d(e,c,l):(d.clear(),s()),g=!1,e}var d,p,f=this,g=!1;f.activeChoiceIndex=-1,f.dropdownId=o.generateUUID(),f.icons={mdiClose:a.L,mdiMagnify:a.cc},f.blurInput=function(){angular.isDefined(f.closed)&&f.closed&&!p.val()&&e.velocity({width:40},{duration:400,easing:"easeOutQuint",queue:!1}),p.val()||n((function(){f.modelController.$setViewValue(void 0)}),500)},f.clearInput=function(){f.modelController.$setViewValue(void 0),f.modelController.$render();var e=f.searchOnFocus;f.searchOnFocus=!1,p.focus(),f.searchOnFocus=e},f.focusInput=function(){f.searchOnFocus&&u(f.modelController.$viewValue,!0)},f.getClass=function(){var e=[];return!angular.isUndefined(f.closed)&&f.closed||e.push("search-filter--opened-mode"),angular.isDefined(f.closed)&&f.closed&&e.push("search-filter--closed-mode"),p.val()&&e.push("search-filter--has-clear-button"),angular.isDefined(f.color)&&e.push("search-filter--".concat(f.color)),angular.isDefined(f.theme)&&f.theme?e.push("search-filter--theme-".concat(f.theme)):e.push("search-filter--theme-light"),angular.isFunction(f.autocomplete)&&e.push("search-filter--autocomplete"),r.isOpen(f.dropdownId)&&e.push("search-filter--is-open"),e},f.keyEvent=function(e){angular.isFunction(f.autocomplete)&&(r.isOpen(f.dropdownId)||(f.activeChoiceIndex=-1),13===e.keyCode?(f.autocompleteList&&-1!==f.activeChoiceIndex&&f.selectItem(f.autocompleteList[f.activeChoiceIndex]),f.activeChoiceIndex>-1&&e.preventDefault()):38===e.keyCode?(f.autocompleteList.length>0&&(f.activeChoiceIndex-=1,f.activeChoiceIndex<0&&(f.activeChoiceIndex=f.autocompleteList.length-1)),e.preventDefault()):40===e.keyCode&&(f.autocompleteList.length>0&&(f.activeChoiceIndex+=1,f.activeChoiceIndex>=f.autocompleteList.length&&(f.activeChoiceIndex=0)),e.preventDefault()),t.$apply())},f.openInput=function(){angular.isDefined(f.closed)&&f.closed?e.velocity({width:angular.isDefined(f.width)?parseInt(f.width,10):240},{complete:function(){p.focus()},duration:400,easing:"easeOutQuint",queue:!1}):p.focus()},f.selectItem=function(e){g=!0,s(),f.modelController.$setViewValue(e),f.modelController.$render(),angular.isFunction(f.onSelect)&&f.onSelect(e)},f.setInput=function(e){p=e},f.setModel=function(e){var t=this;f.modelController=e,angular.isFunction(f.autocomplete)&&angular.isFunction(f.autocomplete())&&(d=function(e,t,n){var r,i,a,o,s,c=arguments,l=this;t=t||500;var u=function c(){var l=Date.now()-s;l<t&&l>=0?o=setTimeout(c,t-l):(o=null,n||(a=e.apply(i,r),o||(i=r=null)))},d=function(){i=l,r=c,s=Date.now();var d=n&&!o;return o||(o=setTimeout(u,t)),d&&(a=e.apply(i,r),i=r=null),a};return d.clear=function(){clearTimeout(o),o=i=r=null},d}((function(){f.isLoading=!0;var e=f.modelController.$viewValue;f.autocomplete().apply(t,[e,c,l])}),500),f.modelController.$parsers.push(u))}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r,i){var a;n.$observe("lxWidth",(function(n){angular.isDefined(e.vm.closed)&&e.vm.closed&&t.find(".search-filter__container").css("width",n)})),i((function(){a=t.find("input"),r.setInput(a),r.setModel(a.data("$ngModelController")),a.on("focus",r.focusInput),a.on("blur",r.blurInput),a.on("keydown",r.keyEvent)})),e.$on("$destroy",(function(){a.off()})),angular.isDefined(e.vm.onInit)&&e.vm.onInit()(e.vm.dropdownId)},replace:!0,restrict:"E",scope:{autocomplete:"&?lsAutocomplete",closed:"=?lsClosed",icon:"@?lsIcon",onInit:"&?lsOnInit",onSelect:"=?lsOnSelect",searchOnFocus:"=?lsSearchOnFocus",theme:"@?lsTheme",width:"@?lsWidth"},templateUrl:"/client/common/modules/search-filter/views/search-filter.html",transclude:!0}}n.r(t),n.d(t,"LsSearchFilterDirective",(function(){return i}));var a=n(12);r.$inject=["$element","$scope","$timeout","LxDropdownService","LxNotificationService","LxUtilsService"],angular.module("Directives").directive("lsSearchFilter",i)},function(e,t,n){"use strict";function r(e){return function(t,n,r){var i="";return r&&(i+='<i class="mdi mdi-'.concat(r,'"></i>')),i+=n&&t?t.replace(new RegExp(n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):t,e.trustAsHtml(i)}}n.r(t),n.d(t,"LsSearchHighlightFilter",(function(){return r})),r.$inject=["$sce"],angular.module("Filters").directive("lsSearchHighlight",r)},function(e,t,n){(function(e){!function(){"use strict";function e(e,t,n){function r(e,t){}var i=this;return i.delete=r,i.get=function(e,t){},i.put=function(e,t,n,r){},i.remove=r,i.reset=function(){},i}e.$inject=["$localStorage","$location","$sessionStorage"],angular.module("Services").service("LocalStorage",e)}()}).call(this,n(38))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){function r(t){var r=angular.isUndefinedOrEmpty(t)?i.calls:i.calls[t];r=e.map(r,(function(e,t){return{calls:e.calls,name:t}})),r=e.sortBy(r,"calls").reverse(),n.debug(e.map(r,(function(e){return e.name+" = "+e.calls})))}var i=this,a={};return i.calls={},i.cancelDisplayCalls=function(e){t.cancel(a[e])},i.displayCalls=function(e,n){(angular.isUndefined(n)||0===n)&&r(e),n*=1e3,a[e]=t((function(){r(e)}),n)},i.registerCall=function(t,r,a,o){if(angular.isUndefinedOrEmpty([t,r],"some"))return 0;a=angular.isDefined(a)?Array.prototype.slice.call(a,1):[],o=!angular.isUndefined(o)&&o,angular.isUndefined(i.calls[t])&&(i.calls[t]={});var s=angular.isFunction(r)?function(t){var n=t.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,""),r=e.get(/^function\s+([\w$]+)\s*\(/.exec(n),1,""),i=n.slice(n.indexOf("(")+1,n.indexOf(")")).match(/([^\s,]+)/g);return angular.isUndefinedOrEmpty(i)&&(i=[]),{name:r,parameters:i}}(r):{name:r,parameters:[]},c={};angular.forEach(s.parameters,(function(t,n){c[t]=e.get(a,n)}));var l=angular.isUndefinedOrEmpty(c)?"":angular.toJson(c),u=s.name+"("+l+")";return angular.isUndefinedOrEmpty(i.calls[t][u])&&(i.calls[t][u]={calls:0,name:s.name,parameters:c}),i.calls[t][u].calls++,o&&n.debug(u,i.calls[t][u].calls),i.calls[t][u].calls},i}t.$inject=["$interval","$log"],angular.module("Services").service("Perfs",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/service/:key",{},{init:{isArray:!1,method:"GET",params:{key:"init"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("SettingsFactory",e)}()},function(e,t,n){"use strict";n.r(t),function(e){function r(t,n,r,i,o,c,u,p,g,v,y,b,C,S,_,w,L,N,j,F,M,$,W,Y,K,z,re,ie,ae,oe,se,ce,le,ue,de,pe,fe,ge,me,ve,he,ye,Ee,be,Oe,Ce,Te,Se,Ie,_e,Ae,we,De,Le,Pe,Ne,Re){function je(){nt.hasClass("finishing")||(nt.addClass("finishing"),angular.element("html").removeClass("loading"),qe.is.error||qe.message(Ie.translate("LOADING.FINISHING_SETUP")))}function ke(e){angular.isUndefinedOrEmpty(rt)||(ze=g((function(t){rt.fadeOut(at,(function(){if(!angular.isUndefinedOrEmpty(rt)){rt.html(r("safeAngular")(e)),rt.fadeIn(at);v((function(){t(e,-200)}),-200)}}))})),ze.then((function(){if(angular.isDefinedAndFilled(ct)){var e=ct.shift();ke(e)}else qe.is.initialized&&je();ze=void 0})))}function Fe(e){qe.hideFirstLoader(e),qe.hideTicker(),st&&(st=!1,b.lumappsPerformances.loaderHidding=Date.now(),b.lumappsPerformances.loaderHidden=b.lumappsPerformances.loaderHidding-b.performance.timing.navigationStart,b.lumappsPerformances.loaderDisplayed=b.lumappsPerformances.loaderHidding-b.lumappsPerformances.firstPainting,angular.isDefined(u.search().perfs)&&p.debug("Loader hidding",b.lumappsPerformances.loaderHidding,b.lumappsPerformances.loaderHidden,b.lumappsPerformances.loaderDisplayed))}function Ue(e,t){(angular.isUndefinedOrEmpty(ct)||t)&&je(),qe.is.initializing=!1,qe.is.initialized=!0,e(Ae.getConnected())}function Me(){nt.remove(),it.style.remove(),localStorage.removeItem(window.refreshTimeoutLocalStorageId),console.log("deleting strikes since we have shown the page")}function xe(){var e=se.getInstance();if(!angular.isUndefinedOrEmpty(e)&&function(){var e="false"===Object(J.a)("hasAcceptedCookies");if(Ae.isConnected()){var t=Ae.getConnected();return e=e||"false"===Object(J.a)("hasAcceptedCookies.".concat(t.id)),!(e&&t.settings&&!1===t.settings.hasAcceptedCookies)}return!e}()){if(Ae.isConnectedAs())return window.ga=angular.noop,void(window.dataLayer={push:angular.noop});if(angular.isDefinedAndFilled(e.googleTagManager)&&!oe.IS_BETA_ENV&&function(e,t){window[e]=window[e]||[],window[e].push({event:"gtm.js","gtm.start":(new Date).getTime()});var n=document.getElementsByTagName("script"),r=s()(n,1),i=r[0],a=document.createElement("script"),o="dataLayer"===e?"":"&l=".concat(e);a.src="https://www.googletagmanager.com/gtm.js?id=".concat(t).concat(o),angular.element(i.parentNode).append(a,i)}("dataLayerCustom",e.googleTagManager),angular.isFunction(ga)){var t={};if(Ae.isConnected()){var n=Ae.getConnected();angular.isDefinedAndFilled([n.uid,n.id],"some")&&(t.userId=n.uid||n.id)}angular.isDefinedAndFilled(e.googleAnalytics)&&!oe.IS_BETA_ENV&&ga("create",e.googleAnalytics,"auto",void 0,t),ga("create",_ANALYTICS_TAG,"auto","lumsites",t)}}}function $e(e){var t=angular.isDefined(u.search().safe);if(!t){var n=m()(e,{kind:"root"}),r=document.getElementById("theme-stylesheet")||E()(it.style);angular.forEach(n,(function(e){r=Pe.injectStylesheet(e.url,"instance-stylesheet-".concat(e.kind),r)}));var i=m()(e,{kind:"custom"});angular.forEach(i,(function(e){r=Pe.injectStylesheet(e.url,"instance-stylesheet-".concat(e.kind),r)}))}}function Be(e){var t,n={};if(Ae.isConnected()){var r=Ae.getConnected();angular.isDefinedAndFilled(r.lang)&&(t=r.lang,n[r.lang]=!0),angular.isDefinedAndFilled(r.langs)&&(t=t||E()(r.langs),angular.forEach(r.langs,(function(e){n[e]=!0})))}var i=angular.isDefinedAndFilled(navigator.languages)?navigator.languages[0]:navigator.language;angular.isDefinedAndFilled(i)&&(i=i.toLowerCase().replace(/-/g,"_"),i=I()(ne.SUPPORTED_LANGS,i)&&I()(ne.DEFAULT_CONTRIBUTION_LANGS,i)?i:i.split("_")[0],t=t||i,n[i]=!0);var a=u.search().lang;angular.isDefinedAndFilled(a)&&(t=t||a,n[a]=!0),t=t||Ie.DEFAULT_LANG;var o,s=Object.keys(n);if(I()(s,t)||t===Ie.DEFAULT_LANG||s.push(t),s=B()(s,Ie.DEFAULT_LANG),angular.isDefinedAndFilled(e.langs)){var c=e.langs;if(angular.isDefined(e.defaultLang)&&!I()(c,e.defaultLang)&&c.push(e.defaultLang),c=A()(s,c),c=B()(c,Ie.DEFAULT_LANG),angular.isUndefinedOrEmpty(c)){var l=e.defaultLang||E()(e.langs);angular.isDefinedAndFilled(l)&&(s.push(l),t=t===l?t:l)}}Ie.allLangs=s;var d="lang-script-front-office-en";angular.isDefinedAndFilled(t)&&t!==Ie.DEFAULT_LANG&&(o="lang-script-front-office-".concat(t),Pe.injectScript("langs/angular-i18n/angular-locale_".concat(t,".js"),o,"body",d,!1),d=o);var p=Ie.getLang("current");return(angular.isUndefinedOrEmpty(p)||p!==t)&&Ie.setLang("current",t),g((function(t){var n=[];angular.forEach(Ie.allLangs,(function(t){var r=e.theme;if(angular.isDefinedAndFilled(r)&&"default"!==r&&(o="lang-theme-".concat(r,"-").concat(t),n.push(Pe.injectScript("specifics/".concat(r,"/langs/").concat(r,"_").concat(t,".min.js"),o,"body",d,!0)),d=o),t!==Ie.DEFAULT_LANG){o="lang-script-front-office-".concat(t),n.push(Pe.injectScript("langs/front-office_".concat(t,".min.js"),o,"body",d,!0)),d=o;var i=Ie.momentLangs[t]||t;o="lang-moment-".concat(t),n.push(Pe.injectScript("langs/moment/locale/".concat(i,".js"),o,"body",d,!0)),d=o}})),g.all(n).finally(t)}))}function We(e){e=e||Je,e!==Je&&Xe.addClass(e).removeClass(Je)}function Ge(e,t,n,r){(r||angular.isUndefinedOrEmpty(n.user))&&t(),Ae.setConnectedUser(n.user,n.token),angular.isDefinedAndFilled(n.customer)&&F.setCustomer(n.customer),We("default"),Ae.listAccountChoices().then((function(){Ue(e,!0)})).catch((function(e){t({cause:"user.listAccountChoices",error:e})}))}function Ye(e,t,n,r){Ae.setConnectedUser(n.user,n.token),Ae.init(!0).then((function(){var i=g.resolve();r?F.initEmptyCustomer(angular.isUndefined(u.search().token)):(F.setCustomer(n.customer),i=F.initStatus(u.search().token)),i.then((function(){oe.FEATURES=n.features,Y.initFeaturesStatus(F.getCustomer()),Ue(e,!0)})).catch((function(e){t({cause:"customer.init_status",error:e})}))})).catch(t)}function He(){var e,t,n;Y.init(),Object(te.b)()||(e=Y.getAll(),t=T()(e,"community.token"),n=T()(e,"social.token"),ge.community_new_access_request={getReplacements:function(e,t){return[t,1===t?"ACCESS_REQUEST":"ACCESS_REQUESTS",T()(e.notification,"contentDetails.title")]},icon:"account-alert",requiredFeatures:[t],tokens:["NB_REQUESTS","ACCESS_REQUESTS","COMMUNITY_TITLE"]},ge.community_extended_service_management={getReplacements:function(e){return[T()(e.notification,"title"),T()(e.notification,"description")]},icon:"pencil",requiredFeatures:[t],tokens:["COMMUNITY_TITLE","COMMUNITY_DESC"]},ge.community_new_credential={getReplacements:function(e){return[T()(e.notification,"contentDetails.title")]},icon:"account-key",requiredFeatures:[t],tokens:["COMMUNITY_TITLE"]},ge.post_mention={getReplacements:function(e){var t=T()(E()(e.actions),"senderDetails");return[Ae.getUserFullName(t)]},hasThumbnail:!0,icon:"comment-text-outline",requiredFeatures:[t],tokens:["AUTHOR_NAME"]},ge.post_merge_pending={icon:"help-network",requiredFeatures:[t]},ge.post_merged={getReplacements:function(e){return[T()(e.notification,"parentContentDetails.title")]},icon:"source-merge",requiredFeatures:[t],tokens:["COMMUNITY_TITLE"]},ge.post_merged_master={icon:"source-merge",requiredFeatures:[t]},ge.post_merged_slave={icon:"source-merge",requiredFeatures:[t]},ge.post_new={getReplacements:function(e){var t=T()(E()(e.actions),"senderDetails");return[Ae.getUserFullName(t),T()(e.notification,"parentContentDetails.title")]},hasThumbnail:!0,icon:"comment-text-outline",requiredFeatures:[t,n],tokens:["AUTHOR_NAME","COMMUNITY_TITLE"]},ge.post_status_update={getReplacements:function(e){return[T()(e.notification,"contentDetails.postStatusDetails.title")]},icon:"autorenew",requiredFeatures:[t],tokens:["STATUS_NAME"]},ge.post_update={getReplacements:function(e){var t=T()(E()(e.actions),"senderDetails");return[Ae.getUserFullName(t),T()(e.notification,"parentContentDetails.title")]},hasThumbnail:!0,icon:"comment-text-outline",requiredFeatures:[t,n],tokens:["AUTHOR_NAME","COMMUNITY_TITLE"]},ge.social_advocacy_new_shareable_content={tokens:["CONTENT_TITLE","PROGRAM_NAME"],getReplacements:function(e){var t=T()(e,"notification.description.content_title",{}),n=T()(e,"notification.description.program_title",{en:Ie.translate("ADMIN.FEATURES.SOCIAL_ADVOCACY.NAME")});return[Ie.translate(t),Ie.translate(n)]},icon:"bullhorn",requiredFeatures:[n]},ge.social_advocacy_user_promoted_amb={icon:"bullhorn",tokens:["PROGRAM_NAME"],getReplacements:function(e){var t=T()(e,"notification.description.program_title",{en:Ie.translate("ADMIN.FEATURES.SOCIAL_ADVOCACY.NAME")});return[Ie.translate(t)]},requiredFeatures:[n]},ge.social_advocacy_user_promoted_pom={icon:"bullhorn",tokens:["PROGRAM_NAME"],getReplacements:function(e){var t=T()(e,"notification.description.program_title",{en:Ie.translate("ADMIN.FEATURES.SOCIAL_ADVOCACY.NAME")});return[Ie.translate(t)]},requiredFeatures:[n]},Ae.initUserLangsAndNotifications(),le.init())}function Ke(e,n,r,i){var s;(i&&n(),Object(X.b)(r),Object(Q.b)(r),Object(Z.b)(r),Ae.setConnectedUser(r.user||{},r.token),F.setCustomer(r.customer||{}),se.setInstance(r.instance||{}),ie.setDefaultHeader(r.header||{}),angular.isDefinedAndFilled(r.globalWidgets))&&(s=oe.GLOBAL_WIDGETS).push.apply(s,a()(r.globalWidgets));if(angular.isDefinedAndFilled(r.content)){N._postGet(r.content,!0),N.setCurrent(r.content||{});var c=T()(r.content,"headerDetails");angular.isDefinedAndFilled(c)&&ie.setCurrent(c),qe.is.firstContentLoader=!0}Ae.init(!1);var l=se.getInstance()||{};We(l.theme),Te.init(r.styles||{},!1,r.parentStyle).then((function(){var e=Te.getCurrent(Te.types.instance);angular.isDefinedAndFilled(e)?$e(e.stylesheets):angular.isDefinedAndFilled(l.customStylesheet)&&$e([{kind:"custom",url:l.customStylesheet}]),ie.init()})).catch((function(e){n({cause:"styles.init",error:e})}));var p=x()(r,["instance","customer","header","styles","token","user"]);if(angular.isUndefinedOrEmpty(p))n({cause:"settings.none",error:"No initial settings received"});else{!function(e){angular.forEach(oe,(function(t,n){var r=d()(n.toLowerCase()),i=n.toLowerCase(),a=T()(e,r,T()(e,n,T()(e,i)));angular.isDefined(a)&&(oe[n]=a),delete e[r],delete e[n],delete e[i]})),delete e.$promise,delete e.$resolved}(p),L.AVAILABLE_CONTENT_TYPES=oe.CONTENT_TYPES,moment.locale(Ie.getLang("current","moment")),Pe.isSafeModeEnabled()||!T()(u.search(),"hotjar",!1)&&"sites.lumapps.com"!==oe.API_HOST||function(e,t){window.hj=window.hj||function(){(window.hj.q=window.hj.q||[]).push(arguments)},window._hjSettings={hjid:e,hjsv:t};var n=document.head,r=document.createElement("script");r.async=!0,r.src="//static.hotjar.com/c/hotjar-".concat(window._hjSettings.hjid,".js?sv=").concat(window._hjSettings.hjsv),n.appendChild(r)}(164740,5),Array.prototype.push.apply(Re,[{options:{icon:"view-list",type:WIDGET_TYPES.AWESOME_TABLE},relatedFeatureNames:["awesome-table-widget"]},{options:{icon:"message",isMicrosoft:!0,type:WIDGET_TYPES.CHANNEL_LIST},relatedFeatureNames:["channel-list-widget","microsoft"]},{options:{icon:"chart-bar",isMicrosoft:!0,type:WIDGET_TYPES.CHART},relatedFeatureNames:["chart-widget","microsoft"]},{options:{icon:"chat-processing",type:WIDGET_TYPES.CHAT},relatedFeatureNames:["chat-widget"]},{options:{icon:"school",type:WIDGET_TYPES.CLASSROOM}},{options:{icon:"bulletin-board",type:WIDGET_TYPES.COMMUNITY_LIST},relatedFeatureNames:["community"]},{options:{icon:"delve",isMicrosoft:!0,type:WIDGET_TYPES.DELVE},relatedFeatureNames:["delve-widget","microsoft"]},{options:{icon:"sitemap",googleSync:!0,type:WIDGET_TYPES.DRAWIO},relatedFeatureNames:["drawio-widget"]},{options:{icon:"file-cloud",type:WIDGET_TYPES.DRIVE_FILE_PREVIEW},relatedFeatureNames:["drive-file-preview-widget"]},{options:{icon:"file-multiple",type:WIDGET_TYPES.FILE_LIST},relatedFeatureNames:["file-list-widget"]},{options:{icon:"trophy",type:WIDGET_TYPES.LEADERBOARD},relatedFeatureNames:["gamification"]},{options:{icon:"checkbox-multiple-blank",type:WIDGET_TYPES.INSTANCE_LIST},relatedFeatureNames:["instance-list-widget"]},{options:{icon:"heart",type:WIDGET_TYPES.META_SOCIAL},relatedFeatureNames:["social"]},{options:{icon:"message-outline",type:WIDGET_TYPES.COMMUNITY_POST_LIST},relatedFeatureNames:["community"]},{options:{icon:"sitemap",type:WIDGET_TYPES.PROCESS_MAKER},relatedFeatureNames:["process-maker"]},{options:{icon:"chart-line",type:WIDGET_TYPES.STOCK_EXCHANGE},relatedFeatureNames:["stock-widget"]},{options:{icon:"wall",type:WIDGET_TYPES.WALL},relatedFeatureNames:["wall-widget"]},{options:{icon:"weather-partly-cloudy",type:WIDGET_TYPES.WEATHER},relatedFeatureNames:["weather-widget"]}]);var f=[];f.push(Be(l)),g.all(f).then((function(){!function(e,t){t=t||Je;var n=angular.isDefinedAndFilled(e)?Pe.resizeImage(Ie.translate(e),192):"".concat(oe.PUBLIC_PATH_PREFIX,"specifics/").concat(t,"/img/favicon.png");n+=I()(n,"?")?"&":"?";var r=document.head,i=document.createElement("link");i.rel="icon",i.id="dynamic-favicon",i.href=n;var a=document.getElementById("default-icon");angular.isDefined(a)&&r.removeChild(a),r.appendChild(i);var o=document.createElement("link");o.rel="apple-touch-icon-precomposed apple-touch-icon",o.id="dynamic-mobile-icon",o.href=n;var s=document.getElementById("default-mobile-icon");angular.isDefined(s)&&r.removeChild(s),r.appendChild(o)}(l.favicon,l.theme);var r=o.get("ConfigTheme");t.yOffset=r.HEADER_FRONT_OFFSET;var i,a,s,c,d=l.scripts||[];angular.isDefinedAndFilled(l.customScripts)&&d.push(l.customScripts),i=d,a=angular.isDefined(u.search().safe),angular.isUndefinedOrEmpty(i)||a||angular.forEach(i,(function(e,t){if(!angular.isUndefinedOrEmpty(T()(e,"url"))){var n=0===t?"instance-script-dumb":"instance-script-".concat(t-1),r=e.url;r+=I()(r,"?")?"&":"?",Pe.injectScript(r,"instance-script-".concat(t),"body",n,!1)}})),He(),(s=[],c=g((function(e){ye.init();var t=[];t.push(de.init()),t.push(j.init()),o.get("UserSettings").init(),ae.init(),De.init(),Ce.init(),z.init(),K.init(),Se.init(),N.initService(),Ne.init(),Ne.initReduxStore(),M.init(),$.init(),re.init(),ue.init(),W.init(),_.initService(),w.init(),me.init(),S.init(),fe.init(),ve.init(),Le.init(),ce.init(),F.init(),Ie.init(),se.initReduxStore(),g.all(t).then((function(){C.init()})),he.init(),le.initReduxStore(),Oe.init(),Ee.init(),e()})),s.push(c),g.all(s)).then((function(){xe(),Ue(e,!0)})).catch((function(e){n({cause:"services.init",error:e})}))})).catch((function(e){n({cause:"instance.configure",error:e})}))}}function Ve(e,t,n,r){if(r?F.initEmptyCustomer():angular.isDefinedAndFilled(n.customer)&&F.setCustomer(n.customer),angular.isDefinedAndFilled(n.instance)){se.setInstance(n.instance||{});var a=se.getInstance(),o=[];return o.push(Be(a)),We(a.theme),T()(Te,"defaultParams.instance")!==a.id&&Te.init(n.styles||{},!1,n.parentStyle).then((function(){var e=Te.getCurrent(Te.types.instance);angular.isDefinedAndFilled(e)?($e(e.stylesheets),function(e){if(e=e||{},angular.isUndefinedOrEmpty(e))return g.resolve();var t=e.primary||Ze,n=Object(ee.b)(t);n="".concat(n.red,", ").concat(n.green,", ").concat(n.blue);var r=Object(ee.d)(t,-10),a=Object(ee.d)(t,-20),o=e.accent||Qe,s=Object(ee.b)(o);s="".concat(s.red,", ").concat(s.green,", ").concat(s.blue);var c=Object(ee.d)(o,-10),l=Object(ee.d)(o,-20);i.get("".concat(oe.PUBLIC_PATH_PREFIX,"statics/custom-color.css")).then((function(e){var i=T()(e,"data");if(!angular.isUndefinedOrEmpty(i)){i=i.replace(/%PRIMARY%/g,t),i=i.replace(/%PRIMARY_RGB%/g,n),i=i.replace(/%PRIMARY_D1%/g,r),i=i.replace(/%PRIMARY_D2%/g,a),i=i.replace(/%SECONDARY%/g,o),i=i.replace(/%SECONDARY_RGB%/g,s),i=i.replace(/%SECONDARY_D1%/g,c),i=i.replace(/%SECONDARY_D2%/g,l);var u=document.head,d=document.createElement("style");d.type="text/css",d.id="custom-css-for-instance",d.styleSheet?d.styleSheet.cssText=i:d.appendChild(document.createTextNode(i)),u.appendChild(d)}}))}(e.properties)):angular.isDefinedAndFilled(a.customStylesheet)&&$e([{kind:"custom",url:a.customStylesheet}]),ie.init()})).catch((function(e){t({cause:"styles.init",error:e})})),void g.all(o).finally((function(){Ue(e,!0)}))}Ue(e,!0)}var ze,qe=this,Xe=angular.element("body"),Qe="#4CAF50",Ze="#2196F3",Je="default",et=angular.element("#error-svg"),tt=angular.element("#loading-animation"),nt=angular.element("#first-loader-container"),rt=angular.element("#messages-ticker"),it={style:angular.element("#first-loader-style")},at=100,ot=angular.element("#welcome-message"),st=!0,ct=[];return qe.initializationPromise=void 0,qe.is={error:!1,firstContentLoader:!1,initialized:!1,initializing:!1},qe.executionQueue=[],qe.endLoading=function(e){qe.is.error||Fe(true)},qe.execute=function(e){var t=g.defer();return qe.executionQueue.push({cb:e,deferred:t}),t.promise},qe.handleError=function(e){if(p.error(e),qe.is.error=!0,nt.css("background-color","#FAFAFA"),tt.hide(),et.show(),nt.addClass("error"),je(),angular.isObject(e))if(angular.isUndefinedOrEmpty(e.cause)&&angular.isUndefinedOrEmpty(e.error))qe.message(Ie.translate("LOADING.ERROR.UNEXPECTED"));else{qe.message(Ie.translate("LOADING.ERROR.".concat(G()(e.cause).toUpperCase())));var t=n(e.error,e.cause);angular.isDefinedAndFilled(t)&&qe.welcome("".concat(Ie.translate("GLOBAL.ERROR")," #").concat(t))}else qe.message(Ie.translate(e))},qe.hideFirstLoader=function(e){e?Me():nt.fadeOut(400,Me)},qe.hideTicker=function(){angular.isDefinedAndFilled(rt)&&(rt.remove(),rt=void 0)},qe.message=function(e,t){e=e||"",e=Ie.translate(e),angular.isUndefinedOrEmpty(rt)||(t||!angular.isDefinedAndFilled(ct)&&!angular.isObject(ze)?ke(e):ct.push(e))},qe.setup=function(e){return clearTimeout(window.refreshTimeoutID),qe.is.initializing||(qe.is.initializing=!0,qe.initializationPromise=g((function(t,n){var r=angular.noop;switch(e){case"adminCustomer":r=Ye;break;case"login":r=Ve;break;case"accountChoice":r=Ge;break;case"app":r=Ke;break;default:n()}var i=function(){200===window.initRequest.status?r(t,n,window.initRequest.responseJson||JSON.parse(window.initRequest.responseText)):r(t,n,window.initRequest.responseJson||JSON.parse(window.initRequest.responseText),!0)};4===window.initRequest.readyState?i():window.initRequest.addEventListener("load",i)})).then((function(){"app"===e&&(_e.init(),pe.init(),angular.forEach(qe.executionQueue,(function(e){!angular.isUndefinedOrEmpty(e)&&angular.isFunction(e.cb)&&e.deferred.resolve(e.cb())})))})).catch(qe.handleError)),qe.initializationPromise},qe.welcome=function(e){var t=angular.isUndefinedOrEmpty(e);if(e=e||T()(Ae.getConnected(),"fullName"),!angular.isUndefinedOrEmpty([ot,e],"some")){var n=t?Ie.replace("LOADING.WELCOME","USER_FULL_NAME",e):Ie.translate(e);ot.html(r("safeAngular")(n)),ot.fadeIn(at)}},nt.removeClass("starting"),e.all=f.a,e.allKeys=P.a,e.any=H.a,e.compose=O.a,e.contains=I.a,e.extendOwn=l.a,e.findWhere=h.a,e.indexBy=D.a,e.mapObject=k.a,e.matcher=U.a,e.object=q.a,e.pairs=V.a,e.pluck=R.a,e.where=m.a,qe}n.d(t,"SettingsService",(function(){return r}));var i=n(19),a=n.n(i),o=n(8),s=n.n(o),c=n(436),l=n.n(c),u=n(405),d=n.n(u),p=n(354),f=n.n(p),g=n(75),m=n.n(g),v=n(21),h=n.n(v),y=n(51),E=n.n(y),b=n(1143),O=n.n(b),C=n(4),T=n.n(C),S=n(17),I=n.n(S),_=n(157),A=n.n(_),w=(n(207),n(87)),D=n.n(w),L=n(140),P=n.n(L),N=n(28),R=n.n(N),j=n(224),k=n.n(j),F=n(1144),U=n.n(F),M=n(130),x=n.n(M),$=n(227),B=n.n($),W=n(355),G=n.n(W),Y=n(217),H=n.n(Y),K=n(404),V=n.n(K),z=n(259),q=n.n(z),X=n(838),Q=n(837),Z=n(821),J=n(926),ee=n(245),te=n(439),ne=n(105);r.$inject=["$anchorScroll","$exceptionHandler","$filter","$http","$injector","$interval","$location","$log","$q","$timeout","$timezone","$window","Analytics","Comment","Community","CommunityTemplates","Config","Content","CustomContentType","Customer","Directory","DirectoryEntryUser","Document","Features","Feed","FeedType","Fsitems","Header","Hook","InitialSettings","Instance","Leaderboard","MainNav","Media","Metadata","Monitoring","Notification","NotificationSettings","Post","Quest","ReduxStore","Role","Search","SettingsFactory","SocialAdvocacy","SocialProfile","Style","Template","Translation","Tutorial","User","UserDirectory","UserFavorite","UserReward","Utils","Widget","WidgetConstant"],angular.module("Services").service("Settings",r)}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.init=function(){n.button=n.button||t.translate("GLOBAL.ADD"),n.icon=n.icon||"file",n.text=n.text||t.translate("GLOBAL.NOTHING_SELECTED"),angular.isObject(n.button)||(n.button={empty:n.button,filled:n.button}),angular.isObject(n.action)||(n.action={empty:n.action,filled:n.action})},n.init()}e.$inject=["$scope","Translation"],angular.module("Directives").directive("lsSettingsList",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{action:"<lsAction",button:"<?lsButton",icon:"<?lsIcon",length:"<lsLength",text:"@?lsText",title:"@lsTitle"},templateUrl:"/client/common/modules/settings-list/views/settings-list.html",transclude:!0}}))}()},function(e,t,n){"use strict";n.r(t);var r=n(35);!function(){function e(e){var t=this;t.id=t.id||Object(r.b)(),t.theme=t.theme||"light"}e.$inject=["Utils"],angular.module("Directives").directive("lsSettingsOption",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{fullWidth:"<?lsFullWidth",help:"@?lsHelp",id:"@?lsId",label:"@lsLabel",ngChange:"&?",ngDisabled:"<?",ngModel:"=",theme:"@?lsTheme",toggleDisabled:"<?lsToggleDisabled"},templateUrl:"/client/common/modules/settings-option/views/settings-option.html",transclude:!0}}))}()},function(e,t){function n(e,t,n,r){function i(){var e=[];return"dark"===a.theme?e.push("sharepoint-site-block--theme-dark"):e.push("sharepoint-site-block--theme-light"),e}var a=this;!function(){angular.isUndefinedOrEmpty(a.classes)&&(a.classes=i(),e.$watch("vm.theme",(function(){a.classes=i()})));var n=r.getProperty(t.INSTANCE_PROPERTIES.SHAREPOINT_SITE_FIELDS);a.fieldsToDisplay=a.fieldsToDisplay||n,a.onClick=a.onClick||angular.noop,a.style=a.style||{},a.theme=a.theme||"light"}()}n.$inject=["$scope","Config","Fsitems","Instance"],angular.module("Directives").directive("lsSharepointSiteBlock",(function(){return{bindToController:!0,controller:n,controllerAs:"vm",replace:!0,restrict:"E",scope:{classes:"<?lsClasses",favorites:"<?lsFavorites",fieldsToDisplay:"<?lsFieldsToDisplay",onClick:"&?lsOnClick",reloadFn:"&lsReloadFn",site:"<lsSite",style:"<?lsStyle",theme:"@?lsTheme"},templateUrl:"/client/common/modules/sharepoint-site/views/sharepoint-site-block.html"}}))},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r){function i(){var n=t.find(".slideshow").width(),r=t.find(".slideshow__slide:last-child");o.displayPrevious=o.activeIndex>1,angular.isUndefinedOrEmpty(r)?o.displayNext=!0:o.activeIndex<o.mediaList.length?o.displayNext=n<=e.get(r.position(),"left",0)+s+r.width():o.displayNext=!1}function a(){s=-1*e.get(t.find(".slideshow__slide:nth-child("+o.activeIndex+")").position(),"left",0),t.find(".slideshow__wrapper").css({"-moz-transform":"translate3d("+s+"px, 0, 0)","-ms-transform":"translate3d("+s+"px, 0, 0)","-o-transform":"translate3d("+s+"px, 0, 0)","-webkit-transform":"translate3d("+s+"px, 0, 0)",transform:"translate3d("+s+"px, 0, 0)"}),i()}var o=this,s=0;o.activeIndex=1,o.next=function(){o.activeIndex!==o.mediaList.length&&(o.activeIndex++,a())},o.previous=function(){1!==o.activeIndex&&(o.activeIndex--,a())},n.$watch("vm.mediaList",(function(e,t){e!==t&&i()})),o.fieldsToDisplay={description:!1,name:!1,tags:!1,thumbnail:!0},angular.isUndefinedOrEmpty(o.mediaList)||1===o.mediaList.length||(i(),angular.element(r).bind("resize",i))}t.$inject=["$element","$scope","$window"],angular.module("Directives").directive("lsSlideshow",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{mediaList:"=lsMediaList"},templateUrl:"/client/common/modules/slideshow/views/slideshow.html"}}))}()}).call(this,n(38))},function(e,t,n){"use strict";function r(e,t){return e("".concat(t.APPLICATION_HOST,"/sa/user/:methodKey"),{},{getUser:{method:"GET",params:{methodKey:"me"}}})}n.r(t),n.d(t,"SocialAdvocacyFactory",(function(){return r})),r.$inject=["$resource","Config"],angular.module("Factories").factory("SocialAdvocacyFactory",r)},function(e,t,n){"use strict";function r(e,t,n,r){var i=t.createLumsitesBaseService(n);i.SA_FEATURE_NAME=c.f,i.ROLES=c.d,i.PERMISSIONS=c.b,i.connectedUserDeferred=e.defer();var o=function(e){return function(){return e(r.store.getState())}};return i.isEnabled=o(l.r),i.shouldGetUser=o(l.t),i.isAdmin=o(l.o),i.isAmbassador=o(l.p),i.isProgramManager=o(l.q),i.canAccessAllSharesData=o(l.a),i.canAccessSocialAdvocacyBasicFeatures=o(l.b),i.canManageShareableContents=o(l.e),i.canManageSocialAdvocacyAmbassadors=o(l.f),i.canManageSocialAdvocacyProgramManagers=o(l.g),i.canManageSocialAdvocacyTopics=o(l.h),i.canManagePlatformSocialNetworks=o(l.d),i.canShareShareableContents=o(l.i),i.canManagePlaftormPrograms=o(l.c),i.init=function(){var e=s()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isEnabled()||!i.shouldGetUser()){e.next=10;break}return e.prev=1,e.next=4,r.store.dispatch(Object(l.n)());case 4:t=e.sent,t&&t.permissions&&t.permissions.includes(c.b.CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES)&&r.store.dispatch(Object(u.k)()),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:i.connectedUserDeferred.resolve();case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),i}n.r(t),n.d(t,"SocialAdvocacyService",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(96),l=n(111),u=n(254);r.$inject=["$q","LumsitesBaseService","SocialAdvocacyFactory","ReduxStore"],angular.module("Services").service("SocialAdvocacy",r)},function(e,t,n){(function(e){!function(){"use strict";function t(t,n){function r(t){if(!angular.isUndefinedOrEmpty(t)){var n=e.get(e.first(t),"spammerInfo",{});i.nbReported=n.nbReported,i.hasReports=i.nbReported>0,i.lastReportDate=moment.utc(n.lastReportDate).local().fromNow(),i.spammer.spammerInfo=n}}var i=this,a="spammer-details-";i.lastReportDate=void 0,i.nbReported=0,function(){var e=t.getCurrent();if(!angular.isUndefinedOrEmpty(e)){var o=i.spammer.uid;a+=o;var s={communityId:e.uid,maxResults:1,spammerId:o};n.getReportList(s,n.PROJECTION.reportSpammer,a).then(r)}}()}t.$inject=["Community","Post"],angular.module("Directives").directive("lsSpammerDetails",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",replace:!0,restrict:"E",scope:{hasReports:"=lsHasReports",spammer:"=lsSpammer"},templateUrl:"/client/common/modules/spammer-details/views/spammer-details.html",transclude:!0}}))}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.StepperDialog=t,e.$on("lx-dialog__scroll-end",(function(e,t){n.dialogId===t&&angular.isFunction(n.onscrollend)&&n.onscrollend()})),e.$on("lx-dialog__open-start",(function(e,r){n.dialogId===r&&(t.activeStep=0,t.isStep.first=!0,t.isStep.last=!1,t.isStep.loading=!1)})),e.$on("ls-stepper__step",(function(e,r,i,a,o){r===n.dialogId&&(t.activeStep=i,t.isStep.first=a,t.isStep.last=o)})),e.$on("ls-stepper__step-loading",(function(e,r,i){r===n.dialogId&&t.activeStep===i&&(t.isStep.loading=!0)})),e.$on("ls-stepper__step-loaded",(function(e,r,i){r===n.dialogId&&t.activeStep===i&&(t.isStep.loading=!1)})),n.autoClose=!!angular.isUndefined(n.autoClose)||n.autoClose,n.displayCancelButton=!!angular.isUndefined(n.displayCancelButton)||n.displayCancelButton,n.displayConfirmButton=!!angular.isUndefined(n.displayConfirmButton)||n.displayConfirmButton,n.inputLanguage=n.inputLanguage||!1,n.lsLayout=angular.isUndefined(n.lsLayout)?"horizontal":n.lsLayout}e.$inject=["$scope","StepperDialog"],angular.module("Directives").directive("lsStepperDialog",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{autoClose:"=?lsAutoClose",backLabel:"@?lsBackLabel",cancelLabel:"@?lsCancelLabel",confirmLabel:"@?lsConfirmLabel",continueLabel:"@?lsContinueLabel",deleteLabel:"@?lsDeleteLabel",dialogId:"@lsDialogId",dialogTitle:"@?lsDialogTitle",displayCancelButton:"=?lsDisplayCancelButton",displayConfirmButton:"=?lsDisplayConfirmButton",displayDeleteButton:"=?lsDisplayDeleteButton",inputLanguage:"=?lsInputLanguage",isDisabled:"=?lsIsDisabled",isLoading:"=?lsIsLoading",lsIsLinear:"<?",lsLabels:"=?",lsLayout:"@?",oncancel:"&?lsOnCancel",onconfirm:"&?lsOnConfirm",ondelete:"&?lsOnDelete",onscrollend:"&?lsOnScrollEnd",save:"&?lsSave",size:"@?",stepSave:"<?lsStepSave"},templateUrl:"/client/common/modules/stepper-dialog/views/stepper-dialog.html",transclude:!0}}))}()},function(e,t){!function(){"use strict";function e(e,t,n){var r,i={};return i.activeStep=0,i.isStep={first:!0,last:!1,loading:!1},i.cancel=function(){e.$broadcast("ls-stepper__cancel",r)},i.close=function(e){t.close(r,e)},i.nextStep=function(){e.$broadcast("ls-stepper__submit-step",r,i.activeStep)},i.open=function(e){r=e,n.waitForAndExecute("#"+r)},i.previousStep=function(){e.$broadcast("ls-stepper__previous-step",r,i.activeStep)},e.$on("lx-dialog__close-end",(function(e,t){r===t&&(r=void 0,i.activeStep=0,i.isStep={first:!0,last:!1,loading:!1})})),i}e.$inject=["$rootScope","LxDialogService","Utils"],angular.module("Services").service("StepperDialog",e)}()},function(e,t,n){"use strict";function r(){var e=this;e.getClasses=function(){var t=[];return parseInt(e.step.index,10)===parseInt(e.activeIndex,10)&&t.push("ls-step-nav--is-active"),!0===e.step.isValid?t.push("ls-step-nav--is-valid"):!1===e.step.isValid&&t.push("ls-step-nav--has-error"),e.step.isEditable&&t.push("ls-step-nav--is-editable"),e.step.isOptional&&t.push("ls-step-nav--is-optional"),t},e.init=function(t){e.parent=t}}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].init(r[1])},replace:!0,require:["lsStepNav","^lsStepper"],restrict:"E",scope:{activeIndex:"@lsActiveIndex",step:"=lsStep"},templateUrl:"/client/common/modules/stepper/views/step-nav.html",transclude:!1}}n.r(t),n.d(t,"LsStepNavDirective",(function(){return i})),angular.module("Directives").directive("lsStepNav",i)},function(e,t,n){"use strict";function r(e,t,n,r){function i(){c.parent.updateStep(c.step)}function a(){c.step.index>0&&c.parent.goToStep(c.step.index-1)}function o(){if(!0!==c.step.isValid||c.step.isEditable){var r=c.validate,a=!0;if(angular.isFunction(r)&&(a=r()),!0===a){t.$emit("ls-stepper__step-loading",c.parent.id,c.step.index),c.step.isLoading=!0,i();var o=c.submit;angular.isFunction(o)||(o=function(){return e((function(e){e()}))});var l=o();l.then((function(e){c.step.isValid=!0,i();var n=c.parent.isComplete();n?t.$emit("ls-stepper__completed",c.parent.id):(s=angular.isDefined(e)&&e>c.parent.activeIndex&&(!c.parent.isLinear||c.parent.isLinear&&c.parent.steps[e-1].isOptional)?e:c.step.index+1,c.parent.goToStep(s,!0))})).catch((function(e){n.error(e)})).finally((function(){t.$emit("ls-stepper__step-loaded",c.parent.id,c.step.index),c.step.isLoading=!1,i()}))}else c.step.isValid=!1,c.step.errorMessage=a,i()}else c.parent.goToStep(s,!0)}var s,c=this;c.step={errorMessage:void 0,feedback:void 0,index:void 0,isEditable:!1,isLoading:!1,isOptional:!1,isValid:c.isValid,label:void 0,pristine:!0,uuid:r.generateUUID(),validator:void 0},c.getClasses=function(){var e=[];return c.step.index===c.parent.activeIndex&&e.push("ls-step--is-active"),e},c.init=function(e,t){c.parent=e,c.step.index=t,c.step.validator=c.validate,c.parent.addStep(c.step)},c.previousStep=a,c.setFeedback=function(e){c.step.feedback=e,i()},c.setLabel=function(e){c.step.label=e,i()},c.setIsEditable=function(e){c.step.isEditable=e,i()},c.setIsOptional=function(e){c.step.isOptional=e,i()},c.submitStep=o,t.$on("ls-stepper__submit-step",(function(e,t,n){angular.isDefined(t)&&t!==c.parent.id||n!==c.step.index||o()})),t.$on("ls-stepper__previous-step",(function(e,t,n){angular.isDefined(t)&&t!==c.parent.id||n!==c.step.index||a()}))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r[0].init(r[1],t.index()),n.$observe("lsFeedback",(function(e){r[0].setFeedback(e)})),n.$observe("lsLabel",(function(e){r[0].setLabel(e)})),n.$observe("lsIsEditable",(function(e){r[0].setIsEditable(e)})),n.$observe("lsIsOptional",(function(e){r[0].setIsOptional(e)}))},replace:!0,require:["lsStep","^lsStepper"],restrict:"E",scope:{feedback:"@?lsFeedback",isEditable:"=?lsIsEditable",isOptional:"=?lsIsOptional",isValid:"=?lsIsValid",label:"@lsLabel",submit:"&?lsSubmit",validate:"&?lsValidate"},templateUrl:"/client/common/modules/stepper/views/step.html",transclude:!0}}n.r(t),n.d(t,"LsStepDirective",(function(){return i})),r.$inject=["$q","$scope","LxNotificationService","LxUtilsService"],angular.module("Directives").directive("lsStep",i)},function(e,t,n){"use strict";function r(e){function t(t,r){var i;if(!r&&n.isLinear){for(var a=t-1;a>=0;a--)if(angular.isDefined(n.steps[a])&&!n.steps[a].isOptional){i=n.steps[a];break}if(angular.isDefined(i)){if(!i.pristine&&angular.isFunction(i.validator)&&i.isEditable){var o=i.validator();!0===o?i.isValid=!0:(i.isValid=!1,i.errorMessage=o)}!0===i.isValid&&(r=!0)}}!r&&n.isLinear&&angular.isDefined(n.steps[t-1])&&(angular.isUndefined(n.steps[t-1].isValid)||!1===n.steps[t-1].isValid)||t<n.steps.length&&(n.activeIndex=parseInt(t,10),n.steps[n.activeIndex].pristine=!1,e.$emit("ls-stepper__step",n.id,t,0===t,t===n.steps.length-1))}var n=this,r={back:"Back",cancel:"Cancel",continue:"Continue",optional:"Optional"};n.activeIndex=0,n.steps=[],n.addStep=function(e){n.steps.push(e)},n.getClasses=function(){var e=[];e.push("ls-stepper--layout-".concat(n.layout)),n.isLinear&&e.push("ls-stepper--is-linear");var t=n.steps[n.activeIndex];return angular.isDefined(t)&&(t.feedback&&e.push("ls-stepper--step-has-feedback"),t.isLoading&&e.push("ls-stepper--step-is-loading")),e},n.goToStep=t,n.isComplete=function(){for(var e=0,t=0,r=0,i=n.steps.length;r<i;r++)n.steps[r].isOptional||(e++,!0===n.steps[r].isValid&&t++);return t===e&&(n.complete(),!0)},n.init=function(){n.controls=!angular.isDefined(n.controls)||n.controls,n.isLinear=!angular.isDefined(n.isLinear)||n.isLinear,n.labels=angular.isDefined(n.labels)?n.labels:r,n.layout=angular.isDefined(n.layout)?n.layout:"horizontal"},n.updateStep=function(e){for(var t=0,r=n.steps.length;t<r;t++)if(n.steps[t].uuid===e.uuid)return n.steps[t].index=e.index,void(n.steps[t].label=e.label)},e.$on("ls-stepper__go-to-step",(function(e,r,i,a){angular.isDefined(r)&&r!==n.id||t(i,a)})),e.$on("ls-stepper__cancel",(function(e,t){angular.isDefined(t)&&t!==n.id||!angular.isFunction(n.cancel)||n.cancel()}))}function i(){return{bindToController:!0,controller:r,controllerAs:"vm",link:function(e,t,n,r){r.init()},restrict:"E",scope:{cancel:"&?lsCancel",complete:"&lsComplete",controls:"=?lsShowControls",id:"@?lsId",isLinear:"=?lsIsLinear",labels:"=?lsLabels",layout:"@?lsLayout"},templateUrl:"/client/common/modules/stepper/views/stepper.html",transclude:!0}}n.r(t),n.d(t,"LsStepperDirective",(function(){return i})),r.$inject=["$scope"],angular.module("Directives").directive("lsStepper",i)},function(e,t,n){"use strict";n.r(t),function(e){var t=n(35);!function(){function n(n,r,i){return{link:function(i,a,o){function s(){angular.isUndefined(c)?(p=a.offset(),f=a.outerWidth(),d=a.outerHeight()):p=c.offset(),u.scrollTop()+g>p.top?angular.isUndefined(c)&&(c=a.clone(),c[0].innerHTML="",c.insertBefore(a).css({height:d,visibility:"hidden"}),a.css({left:p.left,position:"fixed",top:0+g,width:f,zIndex:100}).addClass("sticky-element").appendTo("body")):angular.isDefined(c)&&(c.replaceWith(a),a.removeAttr("style"),c=void 0)}var c,l=Object(t.b)(),u=angular.element(r),d=0,p=0,f=0,g=0,m=e.throttle(s,100),v=n.$on("stickyElement",(function(e,t){t.uuid!==l&&(angular.isUndefined(c)||a.css({width:c.outerWidth()}))}));i.$on("$destroy",(function(){angular.isFunction(v)&&v(),u.unbind("scroll",m),angular.isDefined(c)&&(a.remove(),c.remove(),c=void 0),n.$broadcast("stickyElement",{uuid:l})})),g=parseInt(e.get(o,"offset",0),10),u.scrollTop()+g>a.offset().top&&s(),n.$broadcast("stickyElement",{uuid:l}),u.bind("scroll",m)}}}n.$inject=["$rootScope","$window","Utils"],angular.module("Directives").directive("stickyElement",n)}()}.call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/template/:methodKey",{},{delete:{isArray:!1,method:"DELETE",params:{methodKey:"delete"}},deleteMulti:{isArray:!1,method:"DELETE",params:{methodKey:"deleteMulti"}},get:{isArray:!1,method:"GET",params:{methodKey:"get"}},list:{isArray:!1,method:"GET",params:{methodKey:"list"}},save:{isArray:!1,method:"POST",params:{methodKey:"save"}}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("TemplateFactory",e)}()},function(e,t,n){(function(e){!function(){"use strict";function t(t,n,r,i,a,o,s,c){function l(e){return c.initComponents(e),o.formatMetadataForClient(e,!1),e}var u=a.createLumsitesBaseService(s,{autoInit:!1,objectIdentifier:"uid",postGet:function(e){return t.originalContent=angular.fastCopy(e),l(angular.copy(e))},postSave:function(e){return l(angular.copy(e))},preSave:function(e){return angular.isUndefined(e.instance)&&(e.instance=i.getCurrentInstanceId()),e.fixedLayout||(e.fixedWidgets=!1),o.formatMetadataForServer(e),e}});return u.defaultParams={},u.duplicate=function(t,n){if(angular.isUndefinedOrEmpty(t.type))t.properties=t.properties||{},t.properties.duplicatedTemplate={id:t.id};else{var a,o=t.properties||{};angular.isDefinedAndFilled(t.headerDetails)&&(a=t.headerDetails),t=t.template,t.name={},t.properties=o,t.headerDetails=a,u.setCurrent(t)}t.id=void 0,t.uid=void 0,t.contentType=void 0,e.get(r.getDefaultHeader(),"id")===t.header&&(t.header=void 0),angular.isDefined(t.headerDetails)&&(t.headerDetails.id=void 0),angular.isDefinedAndFilled(n.instanceId)?t.instance=n.instanceId:t.instance=i.getCurrentInstanceId(),angular.isDefinedAndFilled(n.customContentType)&&(t.customContentType=n.customContentType),angular.isDefinedAndFilled(n.contentType)&&(t.contentType=n.contentType)},u.isEditable=function(e){return angular.isDefinedAndFilled(e)&&e.instance===i.getCurrentInstanceId()},u.isEditableForContent=function(e,n){return angular.isDefinedAndFilled(e)&&("template"!==e.type||"create"===t.getAction()||"template"===e.type&&(angular.isUndefinedOrEmpty(n)||u.isEditable(n)))},u.init=function(){u.defaultParams={customer:n.getCustomerId(),instance:i.getCurrentInstanceId()}},u}t.$inject=["Content","Customer","Header","Instance","LumsitesBaseService","Metadata","TemplateFactory","Utils"],angular.module("Services").service("Template",t)}()}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e,t){var n=this;n.Utils=t,n.thumbnailHeight=n.thumbnailHeight||40,n.thumbnailWidth=n.thumbnailWidth||40,e.css({height:n.thumbnailHeight+"px",width:n.thumbnailWidth+"px"})}e.$inject=["$element","Utils"],angular.module("Directives").directive("lsThumbnail",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{thumbnailHeight:"@",thumbnailSrc:"@",thumbnailWidth:"@"},templateUrl:"/client/common/modules/thumbnail/views/thumbnail.html"}}))}()},function(e,t){!function(){"use strict";function e(e){var t=this;t.times=[],function(){for(var n=0;n<24;n++){var r=moment().startOf("hour").hours(n);t.times.push(r.format("LT")),t.times.push(r.minutes(30).format("LT"))}t.allowClear=t.allowClear||!1,t.label=angular.isDefinedAndFilled(t.label)?t.label:e.translate("TIME")}()}e.$inject=["Translation"],angular.module("Directives").directive("lsTimePicker",(function(){return{bindToController:!0,controller:e,controllerAs:"vm",replace:!0,restrict:"E",scope:{allowClear:"<?lsAllowClear",label:"@?lsLabel",ngModel:"=",ngDisabled:"="},templateUrl:"/client/common/modules/time-picker/views/time-picker.html"}}))}()},function(e,t){!function(){"use strict";function e(e,t){var n=this;return n.featureName="translation",n.quotaLimitExceeded=!1,n.MAX_CHAR_TO_TRANSLATE=3e3,n.isAvailable=function(){return e.hasFeature(n.featureName)&&!n.quotaLimitExceeded},n.translate=function(e,r,i,a,o,s){a=a||angular.noop,o=o||angular.noop;var c={contentText:e,sourceFormat:s?"html":"text",sourceLang:i,targetLang:r};n.translateQuery=t.googleTranslate(c,(function(e){a(e)}),(function(e){n.quotaLimitExceeded=!0,o(e)}))},n.cancelCurrentQuery=function(){n.translateQuery.$cancelRequest()},n}e.$inject=["Features","TranslateFactory"],angular.module("Services").service("GTranslate",e)}()},function(e,t){!function(){"use strict";function e(e,t){return e(t.APPLICATION_HOST+"/_ah/api/lumsites/v1/translate/:methodKey",{},{googleTranslate:{isArray:!1,method:"POST",params:{methodKey:"get"},cancellable:!0}})}e.$inject=["$resource","Config"],angular.module("Factories").factory("TranslateFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i){function a(e){e=e||"current";var t=p.getLang(e);return angular.isDefined(t)&&angular.isDefinedAndFilled(p.momentLangs[t])?p.momentLangs[t]:O.SUPPORTED_LANGS.indexOf(t)>-1?t:p.momentLangs.en}function o(e,t,n,r,a,s){if(angular.isDefinedAndFilled(n)){var c=e[n];return angular.isDefinedAndFilled(c)?c:s?o(e,t,void 0,r,a,s):""}var l,u=angular.isDefinedAndFilled(n)?n:i.use(),d=i.preferredLanguage(),f=i.fallbackLanguage();if(angular.isDefinedAndFilled(e[u]))return l=e[u],angular.isString(l)&&0===l.indexOf("LUMSITES_TRANSLATE_")?i.instant(l.replace("LUMSITES_TRANSLATE_","").toUpperCase()):l;if((angular.isUndefinedOrEmpty(n)||r)&&angular.isDefinedAndFilled(e[d]))return l=e[d],angular.isString(l)&&0===l.indexOf("LUMSITES_TRANSLATE_")?i.instant(l.replace("LUMSITES_TRANSLATE_","").toUpperCase()):l;if((angular.isUndefinedOrEmpty(n)||r)&&angular.isDefinedAndFilled(e[f]))return l=e[f],angular.isString(l)&&0===l.indexOf("LUMSITES_TRANSLATE_")?i.instant(l.replace("LUMSITES_TRANSLATE_","").toUpperCase()):l;if(!a)for(var g in e)if(angular.isString(g)){var m=e[g];if(angular.isDefinedAndFilled(m))return angular.isString(m)&&0===m.indexOf("LUMSITES_TRANSLATE_")?i.instant(m.replace("LUMSITES_TRANSLATE_","").toUpperCase()):m}return angular.isDefinedAndFilled(t)?p.translate(t,"",n):""}function c(e,t){if(angular.isDefinedAndFilled(t)){if(t=t.toLowerCase(),"drive"===t||"gdrive"===t||"googledrive"===t||"google-drive"===t||"google drive"===t)return function(e){e=e||"current";var t=p.getLang(e);return angular.isDefined(t)&&angular.isDefinedAndFilled(p.driveLangs[t])?p.driveLangs[t]:O.SUPPORTED_LANGS.indexOf(t)>-1?t:p.driveLangs.en}(e);if("froala"===t)return function(e){e=e||"current";var t=p.getLang(e);return angular.isDefined(t)&&angular.isDefinedAndFilled(p.froalaLangs[t])?p.froalaLangs[t]:O.SUPPORTED_LANGS.indexOf(t)>-1?t:p.froalaLangs.en}(e);if("moment"===t||"momentjs"===t||"moment-js"===t||"moment js"===t)return a(e)}switch(e=e||"all",e=e.toLowerCase(),e){case"current":return i.use()||i.fallbackLanguage();case"preferred":case"default":return i.preferredLanguage();case"fallback":return i.fallbackLanguage();default:var n={};return n.current=p.getLang("current"),n.default=p.getLang("preferred"),n.preferred=p.getLang("preferred"),n.fallback=p.getLang("fallback"),n}}function u(e,t,n){return p.translate(e,void 0,t,!1,!1,n)}var p=this;p.CUSTOMER_LANGUAGE_TYPE="inputCustomerLanguage",p.DEFAULT_LANG="en",p.INSTANCE_LANGUAGE_TYPE="inputLanguage",p.allLangs=[],p.checkLanguage=void 0,p.driveLangs={en:"en",pt:"pt-PT",pt_BR:"pt-BR",pt_PT:"pt-PT",pt_br:"pt-BR",pt_pt:"pt-PT","pt-br":"pt-BR","pt-pt":"pt-PT",zh:"zh-CN",zh_CN:"zh-CN",zh_TW:"zh-TW",zh_cn:"zh-CN",zh_tw:"zh-TW","zh-cn":"zh-CN","zh-tw":"zh-TW"},p.froalaLangs={en:"en_us",en_US:"en_us","en-US":"en_us","en-us":"en_us",pt:"pt_pt",pt_BR:"pt_br",pt_PT:"pt_pt","pt-BR":"pt_br","pt-PT":"pt_pt","pt-br":"pt_br","pt-pt":"pt_pt",zh:"zh_cn",zh_CN:"zh_cn",zh_TW:"zh_tw","zh-CN":"zh_cn","zh-TW":"zh_tw","zh-cn":"zh_cn","zh-tw":"zh_tw"},p.inputLanguage=void 0,p.inputCustomerLanguage="en",p.momentLangs={en:"en",pt_BR:"pt-br",pt_PT:"pt",pt_br:"pt-br",pt_pt:"pt","pt-BR":"pt-br","pt-PT":"pt","pt-pt":"pt",zh:"zh-cn",zh_CN:"zh-cn",zh_CT:"zh-tw",zh_TW:"zh-tw",zh_cn:"zh-cn",zh_ct:"zh-tw",zh_tw:"zh-tw","zh-CN":"zh-cn","zh-CT":"zh-tw","zh-TW":"zh-tw","zh-ct":"zh-tw","zh-tw":"zh-tw"},p.syncTranslations=!1,p.translationsTable={};p.reduxReducerName="locale",p.reduxUpdateActionType="locale/update",p.mapStateToRedux=function(){return{current:p.getLang("current"),default:p.getLang("preferred"),fallback:p.getLang("fallback"),inputCustomerLanguage:p.inputCustomerLanguage||p.inputLanguage,inputLanguage:p.inputLanguage,preferred:p.getLang("preferred")}},p.mapReduxToAngular=function(e){var t=e.current,n=e.preferred,r=e.fallback,i=e.inputCustomerLanguage,a=e.inputLanguage;angular.isUndefinedOrEmpty(t)&&angular.isUndefinedOrEmpty(n)&&angular.isUndefinedOrEmpty(r)&&angular.isUndefinedOrEmpty(i)&&angular.isUndefinedOrEmpty(a)||(p.setLang("current",e.current),p.setLang("default",e.preferred),p.setLang("preferred",e.preferred),p.setLang("fallback",e.fallback),p.inputCustomerLanguage=e.inputCustomerLanguage,p.inputLanguage=e.inputLanguage)},p.getFirstLangWithValue=function(e){if(!angular.isUndefinedOrEmpty(e))return angular.isString(e)?p.getLang("current"):l()(e,(function(e,t){return"undefined"!==t&&angular.isDefinedAndFilled(e)}))},p.getLang=c,p.getLangs=function(e){return e=e||[],e=angular.isArray(e)?e:[e],i.getAvailableLanguageKeys().diff(e)},p.getLangIdForContent=function(e){var t=i.use(),n=i.preferredLanguage(),r=i.fallbackLanguage();if(angular.isDefinedAndFilled(e[t]))return t;if(angular.isDefinedAndFilled(e[n]))return n;if(angular.isDefinedAndFilled(e[r]))return r;for(var a in e)if(angular.isString(a)&&angular.isDefinedAndFilled(e[a]))return a},p.getInputLanguage=function(){return p.inputLanguage},p.getRelevantLocale=function(e){var t=c("all");if(angular.isObject(e)){var n=Object.keys(e);for(var r in t)if(t.hasOwnProperty(r)&&h()(n,t[r]))return t[r];return d()(n)}return t.fallback},p.getTranslationsTable=function(){return p.translationsTable},p.hasTranslation=function(e,n){if(angular.isUndefinedOrEmpty(e))return!1;switch(n=angular.isDefinedAndFilled(n)?n.toLowerCase():p.getLang("current"),n){case"current":case"preferred":case"default":case"fallback":n=p.getLang(n);break;case"instance":var r=t.get("Instance");n=r.getCurrentInstanceLangs();break;case"any":n=void 0}n=angular.isDefinedAndFilled(n)&&!angular.isArray(n)?[n]:n;var i=angular.isDefinedAndFilled(n)?n.length:0;if(n=0===i?void 0:n,angular.isString(e)){if(angular.isUndefinedOrEmpty(n))return angular.isDefinedAndFilled(s()(p.getTranslationsTable(),(function(t){return angular.isDefinedAndFilled(t[e])})));for(var a=0;a<i;a++)if(angular.isDefinedAndFilled(f()(p.getTranslationsTable(),"".concat(n[a],".").concat(e))))return!0;return!1}if(angular.isObject(e)){if(angular.isUndefinedOrEmpty(n)){for(var o in e)if(angular.isDefinedAndFilled(e[o]))return!0}else for(var c=0;c<i;c++)if(angular.isDefinedAndFilled(e[n[c]]))return!0;return!1}return!1},p.hasTranslations=function(e,t){return t=Boolean(t),p.hasTranslation(e,t?"instance":"any")},p.initLanguages=function(e){if(!angular.isUndefinedOrEmpty(f()(e,"langs"))){var t,n=p.getLang("current"),r=p.getLang("preferred"),i=p.getLang("fallback");t=h()(e.langs,n)?n:h()(e.langs,r)?r:angular.isDefinedAndFilled(e.defaultLang)&&h()(e.langs,e.defaultLang)?e.defaultLang:h()(e.langs,i)?i:e.langs[0],p.inputLanguage=angular.fastCopy(t),p.inputCustomerLanguage=angular.fastCopy(t),p.setLang("current",p.inputLanguage)}},p.placeholder=function(e,t,n){return p.hasTranslations(e)?p.translate_(e,p.checkLanguage):p.translate_(t,n)},p.replace=function(e,t,n,r,i,a,o,s){var c;if(angular.isUndefinedOrEmpty(e))return c;if(c=p.translate_(e,r,s),angular.isUndefinedOrEmpty(t))return c;if(t=angular.isArray(t)?t:[t],n=n||[],!angular.isArray(n)){var l=n;n=[],angular.forEach(t,(function(e,t){n[t]=l}))}return angular.forEach(t,(function(e,t){e=e.toUpperCase();var l=n[t];angular.isUndefined(l)&&(l=o?p.translate_(e,r,s):""),l=angular.isNumber(l)?String(l):l,c=c.replace("%".concat(e,"%"),p.translate(l,void 0,r,i,a,s))})),c},p.setLang=function(e,t){switch(e=e||"current",e=e.toLowerCase(),e){case"current":i.use(t),"ja"===t&&moment.updateLocale("ja",{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),moment.locale(a("current")),r.$broadcast("translation:setLang",t);break;case"preferred":case"default":i.preferredLanguage(t);break;case"fallback":i.fallbackLanguage(t)}},p.setTranslationsTable=function(e){p.translationsTable=e},p.swap=function(e,t,n){n=n||p.inputLanguage,E()(e,t,angular.fastCopy(f()(e,n))),delete e[n]},p.translate=function(e,t,r,a,s,c){var l="";if(angular.isDefinedAndFilled(e)){if(!angular.isString(e))return angular.isDefinedAndFilled(e.translations)&&(e=e.translations),angular.isDefinedAndFilled(e)?o(e,t,r,a,s,c):"";if(angular.isDefined(n.search().debugLang))return e;var u=i.use(),d=angular.isDefinedAndFilled(r)?r:u;d!==u&&i.use(d),l=i.instant(e),d!==u&&i.use(u)}return l.trim()},p.translate_=u,p.pluralize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.use(),a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=u(e,r,a);if(n.search().debugLang)return o;"string"==typeof o&&(o=JSON.parse(o));var s="string"==typeof t&&m()(C,t.toUpperCase())?t.toUpperCase():b.a[r](Number.parseInt(t,10));return o[s]||o.other},r.$watch((function(){return i.use()}),(function(e){angular.isUndefinedOrEmpty(e)||(p.inputLanguage=e,p.checkLanguage=e,p.syncTranslations=!1)})),p.init=function(){e.subscribe(p,!0)}}function i(e){return function(t,n,r,i){return angular.isDefinedAndFilled(t)?e.translate(t,n,r,!1,!1,i):angular.isString(t)?t:""}}function a(e){return function(t,n,r,i,a){return angular.isDefinedAndFilled(t)?e.replace(t,n,r,i,!1,!1,!1,a):t}}n.r(t),n.d(t,"TransFilter",(function(){return i})),n.d(t,"TransRepFilter",(function(){return a})),n.d(t,"TranslationService",(function(){return r}));var o=n(21),s=n.n(o),c=n(314),l=n.n(c),u=n(51),d=n.n(u),p=n(4),f=n.n(p),g=n(356),m=n.n(g),v=n(17),h=n.n(v),y=n(7),E=n.n(y),b=n(558),O=n(105);a.$inject=["Translation"],i.$inject=["Translation"],r.$inject=["ReduxStore","$injector","$location","$rootScope","$translate"];var C={ZERO:"ZERO",ONE:"ONE",TWO:"TWO",FEW:"FEW",MANY:"MANY",OTHER:"OTHER"};angular.module("Services").service("Translation",r),angular.module("Filters").filter("trans",i),angular.module("Filters").filter("transRep",a)},function(e,t,n){(function(e){function t(t,n){function r(){i.selectableLanguages=e.sortBy(i.selectableLanguages,(function(e){return i.AVAILABLE_LANGUAGES[e]&&i.AVAILABLE_LANGUAGES[e].name||(i.AVAILABLE_LANGUAGES[e]={name:n.translate("LANG_".concat(e.toUpperCase()))}),i.AVAILABLE_LANGUAGES[e].name}))}var i=this;i.AVAILABLE_LANGUAGES={},i.selectableLanguages=[],i.filterLangs=function(t){i.selectableLanguages=angular.fastCopy(i.choices),angular.isDefinedAndFilled(t)&&(t=t.toLowerCase(),i.selectableLanguages=i.selectableLanguages.filter((function(n){return e.includes(n.toLowerCase(),t)||e.includes((i.AVAILABLE_LANGUAGES[n]&&i.AVAILABLE_LANGUAGES[n].name||"").toLowerCase(),t)}))),r()},t.$watch("vm.choices",(function(e,t){e!==t&&i.filterLangs()}),!0),t.$watch("vm.model",(function(e,t){e!==t&&i.ngChange()}),!0),i.selectableLanguages=angular.fastCopy(i.choices),r(),i.ngChange=i.ngChange||angular.noop,angular.isUndefined(i.allowClear)&&(i.allowClear=!0)}t.$inject=["$scope","Translation"],angular.module("Directives").directive("lsUiLanguage",(function(){return{bindToController:!0,controller:t,controllerAs:"vm",restrict:"E",scope:{allowClear:"@?lsAllowClear",choices:"=lsChoices",disabled:"=?ngDisabled",error:"@?lsError",hasError:"=?lsHasError",isValid:"=?lsIsValid",label:"@lsLabel",model:"=ngModel",multiple:"@?lsMultiple",ngChange:"&?"},templateUrl:"/client/common/modules/ui-language/views/ui-language.html"}}))}).call(this,n(38))},function(e,t){!function(){"use strict";function e(e){return e("/upload",{},{get:{isArray:!1,method:"GET"}})}e.$inject=["$resource"],angular.module("Factories").factory("UploadFactory",e)}()},function(e,t,n){"use strict";function r(e,t,n,r,i,o,c,u,p){function m(e,t){n.createUpload(e,(function(e){w.uploadUrl=e.uploadUrl,angular.isDefinedAndFilled(e.httpMethod)&&(w.uploadMethod=e.httpMethod),angular.isDefinedAndFilled(e.formDataField)&&(w.formDataField=e.formDataField),t(e)}))}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a;u.get(e,(function(e){w.uploadUrl=e.uploadUrl,t()}))}function h(e,t,n){e=angular.fastCopy(e)||{},w.uploadUrl="",w.uploadMethod="POST",w.formDataField=void 0,angular.extend(e,{success:"/upload"}),t===A.DOCUMENT_TYPE?m(e,n):v(e)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Promise((function(n){w.uploadUrl="",w.uploadMethod="POST",w.formDataField=void 0,angular.extend(e,{success:"/upload"}),t===A.DOCUMENT_TYPE?m(e,n):v(e,n)}))}function E(e){return!angular.isUndefinedOrEmpty(e)||(r.error(c.translate("NO_FILE")),!1)}function b(e){return!!(angular.isArray(e)&&e.length>50)&&(r.error(c.translate("FILE_UPLOAD_LIMIT_EXCEEDED")),!0)}function O(e){A.files.length=0,angular.forEach(e,(function(e){A.files.push({name:e.name})}))}function C(e,t){D.default=e,angular.isDefinedAndFilled(t)&&(D[t]=e)}function T(t,n,r,i,a,o,s){r=r||angular.noop,i=i||angular.noop,s=!angular.isDefined(s)||s;var c=w,l=c.formDataField,u=angular.isDefinedAndFilled(l)||s?function(e,t,n){return{data:{files:e,model:angular.toJson(n)},headers:{"Content-Type":void 0},method:"POST",transformRequest:function(e){var t=new FormData,n=w.formDataField||"file";return angular.forEach(e.files,(function(e){t.append(n,e)})),t.append("model",e.model),t},url:t}}(o,t,n):function(e,t){return e=e[0],{data:e,headers:{"Content-Range":"bytes 0-".concat(e.size-1,"/").concat(e.size),"Content-Type":void 0},method:w.uploadMethod||"POST",url:t}}(o,t);return e(u).then((function(e){r(e.data),w={}})).catch(i).finally((function(){C(!1,a),s&&h()}))}function S(){return S=s()(a.a.mark((function e(n,r,i,o,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(n)&&!b(n)){e.next=2;break}return e.abrupt("return",t.reject());case 2:if(O(n),C(!0,s),w.uploadUrl){e.next=7;break}return e.next=7,y();case 7:return e.abrupt("return",T(w.uploadUrl,r,i,o,s,n,!0));case 8:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function I(){return I=s()(a.a.mark((function e(t,n,r,i,o){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=i||angular.noop,o=o||angular.noop,e.abrupt("return",Object(g.o)({community:t,file:n,fileName:n.name,lang:r,parentPath:"provider=haussmann_media/resource=".concat(t.id,"/drive=").concat(t.id),shared:!1,success:"/upload"}).then((function(e){i(e.data)})).catch(o));case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}var _,A=this,w={specificUploadUrl:"",uploadUrl:""},D={default:!1};A.DOCUMENT_TYPE="document",A.files=[],A.observerCallbacks=[],A.progress={current:"0"},A.getProgressValue=function(){return A.progress.current},A.getUploadFile=function(){return w.file},A.handlePaste=function(e,t){t=t||angular.noop,angular.isUndefinedOrEmpty(l()(e,"originalEvent.clipboardData.files"))||(A.uploadMultiple(e.originalEvent.clipboardData.files,{},t,(function(){r.error(c.translate("FILE_UPLOAD_ERROR"))})),e.preventDefault())},A.httpRequest=T,A.onFileUploadSuccess=function(e,t,n,r,a,s){var c="",u=[],d=angular.isDefinedAndFilled(n.files)?l()(a,"files.key"):l()(a,"images.key");e=angular.isArray(e)?e:[e],angular.isUndefinedOrEmpty([e,d],"some")||(angular.forEach(e,(function(e){u.push(i.getMediaFromFile(e,t))})),o.saveMulti({items:u},(function(e){angular.isDefinedAndFilled(e.items)&&angular.forEach(e.items,(function(e){c=e.content[0].type,r?i.isImage(c)?n.images.push(e):i.isDocument(c)&&(n.files.push(e),d=a.files.key):0===c.indexOf("image")?(n.images=e,n.files=[]):0===c.indexOf("document")&&(n.files=e,n.images=[],d=a.files.key)})),A.setProgressValue(0),s(d)})))},A.isUploading=function(e){return angular.isDefinedAndFilled(e)?D[e]:D.default},A.loadUploadUrl=h,A.loadUploadUrlPromise=y,A.registerObserverCallback=function(e){angular.isFunction(e)&&A.observerCallbacks.push(e)},A.setProgressValue=function(e){A.progress.current=String(e),angular.forEach(A.observerCallbacks,(function(e){angular.isFunction(e)&&e()}))},A.setUploadFile=function(e){w.file=e},A.upload=function(e,t,n,r){A.uploadMultiple([w.file],e,t,n,r)},A.uploadMultiple=function(e,t,n,r,i){return S.apply(this,arguments)},A.uploadMediaSecured=function(e,t,n,r,i){return I.apply(this,arguments)},A.uploadMultipleEndpoints=function(e,n){if(!E(e)||b(e))return t.reject();var r="".concat(n,"-all");return O(d()(e,"file")),C(!0,n),C(!0,r),t.all(d()(e,(function(e){return T(e.uploadUrl,void 0,void 0,(function(e){return p.displayServerError(e)}),n,[e.file],!1)}))).finally((function(){C(!1,r)}))},window.XMLHttpRequest&&!window.FileAPI&&(window.XMLHttpRequest.prototype.setRequestHeader=(_=window.XMLHttpRequest.prototype.setRequestHeader,function(e,t){if("__setXHR_"===e){var n=t(this);n instanceof Function&&n(this)}else _.apply(this,arguments)}))}n.r(t),n.d(t,"Upload",(function(){return r}));var i=n(6),a=n.n(i),o=n(10),s=n.n(o),c=n(4),l=n.n(c),u=n(28),d=n.n(u),p=n(33),f=n.n(p),g=n(78);r.$inject=["$http","$q","DocumentFactory","LxNotificationService","Media","MediaFactory","Translation","UploadFactory","Utils"],angular.module("Services").service("Upload",r)},function(e,t,n){"use strict";function r(e){var t={openSelection:function(t){angular.isUndefinedOrEmpty(t)||e((function(){var e=angular.element("ls-uploader[ls-uuid='".concat(t,"']"));e.find(".uploader__file-input").bind("click",(function(e){e.stopPropagation()})).click()}))}};return t}n.r(t),n.d(t,"UploaderActionService",(function(){return r})),r.$inject=["$timeout"],angular.module("Services").service("UploaderAction",r)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n,r,i){var a=this;a.progress={current:0,max:100},a.Config=n,a.Upload=r,a.areAllowedFileType=function(e){return angular.equals(a.allowedFileTypes,e)},a.getAcceptedType=function(){return angular.isUndefinedOrEmpty(a.allowedFileTypes)?"":a.areAllowedFileType(n.FILE_TYPES.IMAGE)?"image/*":1===a.allowedFileTypes.length?g()(a.allowedFileTypes):""},a.getIcon=function(){return angular.isUndefinedOrEmpty(a.allowedFileTypes)?"cloud-upload":a.areAllowedFileType(n.FILE_TYPES.IMAGE)||v()(g()(a.allowedFileTypes),g()(n.FILE_TYPES.IMAGE))?"file-image":a.areAllowedFileType(n.FILE_TYPES.DOCUMENT)||a.areAllowedFileType(n.FILE_TYPES.XML)?"file-document-box":""},a.isDocumentType=function(){return a.type===r.DOCUMENT_TYPE},a.openInputFile=function(){a.ngDisabled||e.find(".uploader__file-input").click()},a.multiple=!angular.isUndefined(a.multiple)&&a.multiple,angular.isUndefinedOrEmpty(a.uuid)&&(a.uuid="uploader-".concat(Object(E.b)())),a.isDocumentType()||r.loadUploadUrl()}function o(e,t,n,r,o){return{bindToController:!0,controller:a,controllerAs:"vm",link:function(a,s){function l(){return s.find(".uploader__file-input")}function u(e,t){r.uploadMultiple(e,t,(function(e){a.vm.callback()(e,a.vm.uuid),a.vm.isUploading=!1}),(function(e){a.vm.isUploading=!1;var t=l();angular.element(t).val(void 0),o.displayServerError(e)}),a.vm.uuid,!a.vm.isDocumentType())}function d(e){return r.uploadMultipleEndpoints(e,a.vm.uuid).then((function(e){a.vm.callback()(e,a.vm.uuid),a.vm.isUploading=!1}),(function(e){a.vm.isUploading=!1;var t=l();angular.element(t).val(void 0),o.displayServerError(e)}))}function f(e){return g.apply(this,arguments)}function g(){return g=p()(c.a.mark((function t(o){var s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.defer(),t.t0=i,t.t1={fileName:o.name,lang:a.vm.language?n.getLang(a.vm.language):n.inputLanguage},t.next=5,a.vm.uploadUrlRequestParameters();case 5:return t.t2=t.sent,l=(0,t.t0)(t.t1,t.t2),r.loadUploadUrl(l,r.DOCUMENT_TYPE,(function(e){e.file=o,s.resolve(e)})),t.abrupt("return",s.promise);case 9:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function m(t){return e.all(y()(t,f)).then(d)}t((function(){var e=l();e.bind("change",(function(e){e.target&&e.target.files&&0!==e.target.files.length&&t((function(){var t={},n=a.vm.isDocumentType()?m:u;angular.isDefinedAndFilled(a.vm.size)&&(t.size=a.vm.size),a.vm.isUploading=!0,n(e.target.files,t)}))}))}))},restrict:"E",scope:{allowedFileTypes:"<lsAllowedFileTypes",callback:"&lsCallback",isUploading:"=?lsIsUploading",label:"@lsLabel",language:"@?lsLanguage",multiple:"=?lsMultiple",ngDisabled:"<?",size:"@?lsSize",type:"<?lsType",uploadUrlRequestParameters:"=?lsUploadUrlRequestParameters",uuid:"@lsUuid"},templateUrl:"/client/common/modules/uploader/views/uploader.html"}}n.r(t),n.d(t,"UploaderController",(function(){return a})),n.d(t,"UploaderDirective",(function(){return o}));var s=n(6),c=n.n(s),l=n(3),u=n.n(l),d=n(10),p=n.n(d),f=n(51),g=n.n(f),m=n(17),v=n.n(m),h=n(28),y=n.n(h),E=n(35);o.$inject=["$q","$timeout","Translation","Upload","Utils"],a.$inject=["$element","$scope","Config","Upload","Utils"],angular.module("Directives").directive("lsUploader",o)},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n,i,a,o,c,u,p){function g(){var e=[];angular.forEach(E.filter.accountType,(function(t,n){t&&e.push(n)}));var t=E.listParams,n=void 0===t?{showHidden:!1}:t,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({feeds:E.filter.feedKeys||[],firstName:E.filter.firstName,lastName:E.filter.lastName,primaryEmail:E.filter.email,types:e},n);c.filterize(i)}function v(){E.isOpen=!0,O=!1,C=0,E.ngModel=E.ngModel||[],y=angular.fastCopy(E.ngModel),O=angular.isUndefined(E.pickIds)?!!angular.isDefinedAndFilled(E.ngModel)&&!angular.isObject(E.ngModel[0]):E.pickIds,O&&E.paginateSelection?angular.isNumber(E.paginateSelection)&&(b=E.paginateSelection):b=void 0,g(),E.isOpen=!0,E.tmpUserList=[],angular.isDefinedAndFilled(E.ngModel)&&(E.userIds=O?E.ngModel:m()(E.ngModel,"id"),E.getListNextPage())}function h(){E.filter={accountType:{},email:void 0,feedKeys:[],firstName:void 0,lastName:void 0}}var y,E=this,b=50,O=!1,C=0;E.SELECTION_LIST_KEY="user-picker-selection-",E.VIEW_MODES={library:"library",organize:"organize"},E.filter={},E.isFilterDisplayed=!0,E.isOpen=!1,E.userIds=[],E.viewMode=E.VIEW_MODES.organize,E.Config=n,E.Feed=i,E.Translation=a,E.User=o,E.UserDirectory=c,E.Utils=p;var T=l()(g,500);E.closeFilter=function(){E.isFilterDisplayed=!1},E.closeUserPicker=function(e){angular.isUndefined(e)&&(E.ngModel=y),u.close(E.pickerId,e)},E.getApiProfile=function(e){return angular.isDefined(e.apiProfile)?e.apiProfile:e},E.getListNextPage=function(){o.filterize({ids:E.userIds.slice(C,angular.isNumber(b)?C+b:void 0),maxResults:angular.isNumber(b)?b:E.userIds.length},(function(e){E.tmpUserList=E.tmpUserList.concat(e.items||e)}),void 0,E.SELECTION_LIST_KEY),C+=b},E.isSelected=function(e){return E.userIds.indexOf(e.id)>-1},E.openFilter=function(){E.isFilterDisplayed=!0},E.submitUserList=function(){E.ngModel=O?angular.fastCopy(E.userIds):angular.fastCopy(E.tmpUserList),E.embedded||t((function(){E.closeUserPicker(E.tmpUserList)}))},E.switchViewMode=function(e){angular.isDefinedAndFilled(E.VIEW_MODES[e])&&(E.viewMode=e),E.selectedUser=void 0,E.viewMode===E.VIEW_MODES.organize&&E.embedded&&E.submitUserList()},E.toggleAll=function(){var e=m()(c.getList(),"id"),t=d()(e,E.userIds),n=angular.isUndefinedOrEmpty(t)||E.maxSelect&&E.userIds.length>=E.maxSelect;angular.forEach(c.getList(),(function(e){(n&&E.isSelected(e)||!n&&!E.isSelected(e))&&E.toggleUserSelection(e)}))},E.toggleUserDetails=function(e){e===E.selectedUser?E.selectedUser=void 0:E.selectedUser=e},E.toggleUserSelection=function(e){if(!angular.isUndefinedOrEmpty(e)){var t=f()(E.userIds,e.id);t>-1?(E.userIds.splice(E.userIds.indexOf(e.id),1),E.tmpUserList.splice(t,1),E.viewMode===E.VIEW_MODES.organize&&E.embedded&&E.submitUserList()):(angular.isUndefined(E.maxSelect)||E.userIds.length<E.maxSelect)&&(E.tmpUserList.push(e),E.userIds.push(e.id))}},e.$watch((function(){return E.filter}),(function(e,t){e!==t&&T()}),!0),e.$on("user-picker__close-end",(function(e,t){E.pickerId===t&&(E.isOpen=!1,h(),E.selectedUser=void 0,E.tmpUserList=void 0,E.userIds=[])})),e.$on("user-picker__open-start",(function(e,t){E.pickerId===t&&v()})),E.title=E.title||a.translate("USER_PICKER_HEADER_TITLE"),E.userIds=[],E.SELECTION_LIST_KEY+=E.pickerId,h(),E.embedded&&v()}function a(){return{bindToController:!0,controller:i,controllerAs:"vm",link:function(e,t){e.vm.embedded||t.appendTo("body"),e.$on("$destroy",(function(){e.vm.embedded||t.remove()}))},restrict:"E",scope:{allowToUpdateEmpty:"<?lsAllowToUpdateEmpty",customActions:"<?lsCustomActions",embedded:"<?lsEmbedded",listParams:"<?lsListParams",maxSelect:"<?lsMaxSelect",ngModel:"=",paginateSelection:"<?lsPaginateSelection",pickIds:"<?lsPickIds",pickerId:"@lsPickerId",title:"@lsTitle"},templateUrl:"/client/common/modules/user-picker/views/user-picker.html"}}n.r(t),n.d(t,"UserPickerDirective",(function(){return a})),n.d(t,"UserPickerController",(function(){return i}));var o=n(3),s=n.n(o),c=n(71),l=n.n(c),u=n(279),d=n.n(u),p=n(1145),f=n.n(p),g=n(28),m=n.n(g);i.$inject=["$scope","$timeout","Config","Feed","Translation","User","UserDirectory","UserPicker","Utils"],angular.module("Directives").directive("lsUserPicker",a)},function(e,t){!function(){"use strict";function e(e,t,n){this.close=function(n,r){angular.isUndefinedOrEmpty(n)||(e.$broadcast("user-picker__close-start",n,r),angular.element("body").css({overflow:"visible"}),angular.element("#"+n).removeClass("user-picker--is-shown"),t((function(){e.$broadcast("user-picker__close-end",n,r)}),600))},this.open=function(r){angular.isUndefinedOrEmpty(r)||(n.register(),e.$broadcast("user-picker__open-start",r),angular.element("body").css({overflow:"hidden"}),t((function(){angular.element("#"+r).css("z-index",n.getDepth()).addClass("user-picker--is-shown")})),t((function(){e.$broadcast("user-picker__open-end",r)}),600))}}e.$inject=["$rootScope","$timeout","LxDepthService"],angular.module("Services").service("UserPicker",e)}()},function(e,t,n){"use strict";n.r(t);var r=n(105);n(2485);window.lumappsPerformances=window.lumappsPerformances||{},window.lumappsPerformances.angularBootstraping=Date.now(),angular.bootstrap(document,[r.APPLICATION_NAME]),window.lumappsPerformances.angularBootstraped=Date.now()},function(e,t,n){!function(){"use strict";function e(e){function t(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function n(e){var t=e.type,n=e.tagName;return!("INPUT"!=n||!v[t]||e.readOnly)||"TEXTAREA"==n&&!e.readOnly||!!e.isContentEditable}function r(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function i(e){e.hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added"))}function a(n){n.metaKey||n.altKey||n.ctrlKey||(t(e.activeElement)&&r(e.activeElement),f=!0)}function o(e){f=!1}function s(e){t(e.target)&&(f||n(e.target))&&r(e.target)}function c(e){t(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(g=!0,window.clearTimeout(m),m=window.setTimeout((function(){g=!1,window.clearTimeout(m)}),100),i(e.target))}function l(e){"hidden"==document.visibilityState&&(g&&(f=!0),u())}function u(){document.addEventListener("mousemove",p),document.addEventListener("mousedown",p),document.addEventListener("mouseup",p),document.addEventListener("pointermove",p),document.addEventListener("pointerdown",p),document.addEventListener("pointerup",p),document.addEventListener("touchmove",p),document.addEventListener("touchstart",p),document.addEventListener("touchend",p)}function d(){document.removeEventListener("mousemove",p),document.removeEventListener("mousedown",p),document.removeEventListener("mouseup",p),document.removeEventListener("pointermove",p),document.removeEventListener("pointerdown",p),document.removeEventListener("pointerup",p),document.removeEventListener("touchmove",p),document.removeEventListener("touchstart",p),document.removeEventListener("touchend",p)}function p(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(f=!1,d())}var f=!0,g=!1,m=null,v={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};document.addEventListener("keydown",a,!0),document.addEventListener("mousedown",o,!0),document.addEventListener("pointerdown",o,!0),document.addEventListener("touchstart",o,!0),document.addEventListener("visibilitychange",l,!0),u(),e.addEventListener("focus",s,!0),e.addEventListener("blur",c,!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&document.documentElement.classList.add("js-focus-visible")}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){t=document.createEvent("CustomEvent"),t.initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){function t(){var t=ge.getState(),n=t.lastActionType;n.includes(G.ANGULAR_ACTION_PREFIX)||(r.forEach((function(e){var n=e.mapReduxToAngular,r=e.reduxReducerName;if(n){var i=t[r]||{};n(i)}})),e.$root.$$phase||e.$digest())}var n={},r=[],i={};n.store=ge;var a=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t(),r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"".concat(G.ANGULAR_ACTION_PREFIX,"/").concat(e):return r.newState;default:return n}}};return n.subscribe=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t.mapStateToRedux,s=t.mapReduxToAngular,c=t.reduxReducer,l=t.reduxReducerName,u=t.reduxUpdateActionType;F()(o&&l&&u,"Service: ".concat(name.name," must implement ReduxStoreService interface to register to the redux store")),M()(!s,"".concat(l," does not implement a mapReduxToAngular method. Hence changes from redux will not be sent to Angular services.")),r.push(t),n||(i[l]=c||a(u,o)),e.$watch(o,(function(e,t){ge?ge.dispatch({newState:o(),type:"".concat(G.ANGULAR_ACTION_PREFIX,"/").concat(u)}):setTimeout((function(){ge.dispatch({newState:o(),type:"".concat(G.ANGULAR_ACTION_PREFIX,"/").concat(u)})}),300)}),!0)},n.init=function(){var e="object"===("undefined"==typeof window?"undefined":R()(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}):j.d,r=e(Object(j.a)(W)),a=Object(j.c)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Cr,{},i));ge=Object(j.e)(a,r),ge.subscribe(t),n.store=ge},n.ANGULAR_ACTION_PREFIX=G.ANGULAR_ACTION_PREFIX,n}n.r(t);var L=n(3),P=n.n(L),N=n(258),R=n.n(N),j=n(77),k=n(387),F=n.n(k),U=n(1141),M=n.n(U),x=r();x.withExtraArgument=r;var $,B,W=x,G=n(133),Y=n(445),H=n(348),K=n(610),V=n(611),z=n(673),q=n(298),X=n(819),Q=n(342),Z=n(560),J=n(138),ee=n(837),te=n(122),ne=n(502),re=n(7),ie=n.n(re),ae=n(43),oe=n(297),se=Object(ae.a)({domain:"nanny",initialState:{rules:[],isLoadingRules:!1,formIsLoading:!1,currentRuleId:"",error:"",isCreationModalOpened:!1,isEditionModalOpened:!1,isConfirmDeleteModalOpened:!1,rulesHaveChanged:!0,hasRules:!1,hasReachedMaxRules:!1},reducers:{setIsLoadingRules:function(e,t){ie()(e,"isLoadingRules",t.payload)},setLoadedRules:function(e,t){var n;ie()(e,"isLoadingRules",!1),ie()(e,"rulesHaveChanged",!1),ie()(e,"rules",t.payload),ie()(e,"hasRules",t.payload.length>0),ie()(e,"hasReachedMaxRules",(n=t.payload,n.length>=oe.d))},addRule:function(e){ie()(e,"rulesHaveChanged",!0)},deleteRule:function(e){ie()(e,"rulesHaveChanged",!0)},updateRule:function(e){ie()(e,"rulesHaveChanged",!0)},setFormIsLoading:function(e,t){ie()(e,"formIsLoading",t.payload)},displayModalCreation:function(e,t){ie()(e,"isCreationModalOpened",t.payload)},displayModalEdition:function(e,t){ie()(e,"isEditionModalOpened",t.payload)},setCurrentRuleId:function(e,t){ie()(e,"currentRuleId",t.payload)},setError:function(e,t){ie()(e,"error",t.payload)},displayDeleteConfirmModal:function(e,t){ie()(e,"isConfirmDeleteModalOpened",t.payload)}}}),ce=(se.actions,se.reducer),le=n(27),ue=n.n(le),de=n(17),pe=n.n(de),fe=n(553);!function(e){e.FILE="file",e.REGEXP="regexp"}($||($={})),function(e){e.CSV=".csv"}(B||(B={}));var ge,me={title:function(e){return ue()(e)?"GLOBAL.ERROR_MANDATORY_FIELD":""},content:function(e){return ue()(e)?"GLOBAL.ERROR_MANDATORY_FIELD":""},type:function(e){var t=Object.values($);return pe()(t,e)?"":"GLOBAL.ERROR_MANDATORY_FIELD"}},ve=Object(fe.default)({domain:"nanny",initialValues:{id:"",title:"",explanations:{default:""},content:"",type:"",lang:""},validationSchema:me}),he=(ve.actions,ve.reducer),ye=Object(j.c)({frontOffice:ne.b,backOffice:ce,form:he}),Ee=n(204),be=n(42),Oe=n(838),Ce=n(119),Te=n(285),Se=n(283),Ie=n(637),_e=n(228),Ae=n(343),we=n(719),De=n(720),Le=n(554),Pe=n(210),Ne=n(265),Re=n(601),je=n(821),ke=n(427),Fe=n(557),Ue=n(158),Me=Ue.h,xe=n(461),$e=xe.b,Be=Object(j.c)({communityCreationLauncher:Fe.d,communitySetup:Me,creationWizard:$e}),We=Be,Ge=n(114),Ye=n(248),He=Object(j.c)({identityProvider:Ge.j,serviceProvider:Ye.f}),Ke=He,Ve=Object(j.c)({communities:We,platform:Ke}),ze=Ve,qe=n(526),Xe=Object(j.c)({report:qe.d}),Qe=Xe,Ze=n(721),Je=n(683),et=Je.b,tt=n(37),nt=n(341),rt={page:0,errorCode:void 0,errorMessage:"",items:[],memberIsLoading:!1},it=n(511),at={convIsLoading:!1,cursor:void 0,errorCode:void 0,errorMessage:"",items:[]},ot=n(512),st={errorCode:void 0,followerFeedKey:void 0,isLoading:!1},ct=n(513),lt={errorCode:void 0,errorMessage:"",fileIsLoading:!1,items:[]},ut=n(514),dt={errorCode:void 0,errorMessage:"",group:{},groupIsLoading:!1},pt=n(638),ft={appIsLoading:!1,errorCode:void 0,errorMessage:"",items:[]},gt=Object(j.c)({apps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(e){switch(t.type){case pt.b:e.appIsLoading=!0;break;case pt.c:e.items=t.payload.items||[],e.appIsLoading=!1;break;case pt.a:e.errorCode=t.payload.errorCode,e.errorMessage=t.payload.errorMessage,e.appIsLoading=!1}return e}))},community:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(e){switch(t.type){case ot.MANAGE_FOLLOWING_LOADING:e.isLoading=!0;break;case ot.MANAGE_FOLLOWING_SUCCESS:e.isLoading=!1,e.isFollowing=t.payload.followerFeedKey;break;case ot.MANAGE_FOLLOWING_ERROR:e.errorCode=t.payload.errorCode,e.isLoading=!1,e.errorMessage=t.payload.errorMessage}return e}))},conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(e){switch(t.type){case it.FETCH_CONVERSATIONS_LOADING:e.convIsLoading=!0;break;case it.FETCH_CONVERSATIONS_SUCCESS:e.cursor=t.payload.cursor,e.items=t.payload.items||[],e.convIsLoading=!1;break;case it.FETCH_CONVERSATIONS_ERROR:e.errorCode=t.payload.errorCode,e.errorMessage=t.payload.errorMessage,e.convIsLoading=!1}return e}))},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(e){switch(t.type){case ct.FETCH_FILES_LOADING:e.fileIsLoading=!0;break;case ct.FETCH_FILES_SUCCESS:e.items=t.payload.items||[],e.fileIsLoading=!1;break;case ct.FETCH_FILES_ERROR:e.errorCode=t.payload.errorCode,e.errorMessage=t.payload.errorMessage,e.fileIsLoading=!1}return e}))},group:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(e){switch(t.type){case ut.FETCH_GROUP_LOADING:e.groupIsLoading=!0;break;case ut.FETCH_GROUP_SUCCESS:e.group=t.payload.group||{},e.groupIsLoading=!1;break;case ut.FETCH_GROUP_ERROR:e.errorCode=t.payload.errorCode,e.errorMessage=t.payload.errorMessage,e.groupIsLoading=!1}return e}))},members:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(e){switch(t.type){case nt.FETCH_MEMBERS_LOADING:e.memberIsLoading=!0;break;case nt.FETCH_MEMBERS_SUCCESS:e.page=t.payload.page,e.items=t.payload.items||[],e.memberIsLoading=!1;break;case nt.FETCH_MEMBERS_ERROR:e.errorCode=t.payload.errorCode,e.errorMessage=t.payload.errorMessage,e.memberIsLoading=!1;break;case nt.FETCH_ALLMEMBERS_LOADING:e.memberIsLoading=!0;break;case nt.FETCH_ALLMEMBERS_SUCCESS:e.items=t.payload.items||[],e.memberIsLoading=!1;break;case nt.FETCH_ALLMEMBERS_ERROR:e.errorCode=t.payload.errorCode,e.errorMessage=t.payload.errorMessage,e.memberIsLoading=!1}return e}))}}),mt=gt,vt=n(38),ht=(n(6),n(10),n(64)),yt=(new ht.a({path:"customcontenttype"}),"customContentType/FETCH_CCT_SUCCESS"),Et={entities:{}},bt=Object(tt.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:var n=t.payload.customContentTypes;return Object.assign(e.entities,Object(vt.keyBy)(n,"uid")),e;default:return e}})),Ot=bt,Ct=n(605),Tt=Object(j.c)({providers:Ct.b}),St=Tt,It=n(293),_t="locale",At="__angular__/".concat(_t,"/update"),wt="".concat(_t,"/UPDATE_CURRENT"),Dt="".concat(_t,"/UPDATE_DEFAULT"),Lt="".concat(_t,"/UPDATE_FALLBACK"),Pt="".concat(_t,"/UPDATE_INPUT_CUSTOMER_LANGUAGE"),Nt="".concat(_t,"/UPDATE_INPUT_LANGUAGE"),Rt="".concat(_t,"/UPDATE_PREFERRED"),jt={current:"",default:"",fallback:"",inputCustomerLanguage:"",inputLanguage:"",preferred:""},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(n){var r=t.payload;switch(t.type){case At:var i=t.newState;return a({},n,{},i);case wt:var o=r.lang,s=void 0===o?It.a:o;return ie()(n,"current",s),n;case Dt:var c=r.lang,l=void 0===c?It.a:c;return ie()(n,"default",l),n;case Lt:var u=r.lang,d=void 0===u?It.a:u;return ie()(n,"fallback",d),n;case Pt:var p=r.lang,f=void 0===p?It.a:p;return ie()(n,"inputCustomerLanguage",f),n;case Nt:var g=r.lang,m=void 0===g?It.a:g;return ie()(n,"inputLanguage",m),n;case Rt:var v=r.lang,h=void 0===v?It.a:v;return ie()(n,"preferred",h),n;default:return e}}))},Ft=n(19),Ut=n.n(Ft),Mt=n(51),xt=n.n(Mt),$t=n(144),Bt=n.n($t),Wt=n(640),Gt="__angular__/mainNav/update",Yt={entities:[]},Ht={isLoading:!1},Kt=function(e,t){var n=Ut()(e.entities),r=xt()(Bt()(n,{id:t.id}))||Ht;return s({},e,{entities:[].concat(Ut()(n),[s({},r,{},t)])})},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt.a:case Wt.b:case Gt:return Object(tt.a)(e,(function(e){var n=t.payload||t.newState;return Kt(e,n)}));case Wt.c:return Object(tt.a)(e,(function(e){return Kt(e,{id:t.payload.id,isLoading:t.payload.value})}));default:return e}},zt=n(18),qt=n.n(zt),Xt=n(193),Qt=n.n(Xt),Zt=n(21),Jt=n.n(Zt),en=n(4),tn=n.n(en),nn=n(581),rn=n(61),an=n(159),on={currentDataSourceUid:null,currentError:null,currentFilters:{},currentSearchType:rn.ENGINE_TYPE.CLOUDSEARCH,currentSortOrder:void 0,cursor:null,customFieldsOptions:null,dataSources:[],disableQueryInterpretation:!1,filters:{},hasMore:!1,interpretedQuery:null,isLoading:!1,isLoadingSearchSuggestions:!1,query:void 0,results:{cloudsearch:[],elasticsearch:[]},sortOrders:[],suggestions:[]},sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case an.a:return l({},e,{currentDataSourceUid:t.payload.uid,sortOrders:[]});case an.c:case an.j:case an.i:return l({},e,{},t.payload);case an.b:var n=t.payload.name,r=e.currentFilters,i=void 0===r?{}:r,a=e.filters,o=void 0===a?{}:a,s=t.payload.value,c=void 0===s?{}:s;return ue()(c)?i[n]=void 0:(Qt()(c)&&(c=Jt()(tn()(o,[n,"choices"],[]),{value:c})),i[n]={count:c.count,value:c.value}),l({},e,{currentFilters:i});case an.d:return Object(tt.a)(e,(function(e){e.currentSortOrder=t.payload.currentSortOrder}));case an.e:return l({},e);case an.f:return l({},e,{},t.payload);case an.g:var u=t.payload,d=u.isLoading,p=qt()(u,["isLoading"]);return l({},e,{currentError:p,isLoading:d});case an.h:var f=t.payload,g=f.append,m=f.dataSources,v=f.query,h=qt()(f,["append","dataSources","query"]);if(g){var y=h.currentSearchType,E=e.results[y];h.results[y]=E.concat(h.results[y])}return l({},e,{},h,{currentError:null},m&&{dataSources:e.query===v?Object(nn.w)(m,e.dataSources):m},{query:v});case an.k:return l({},e,{currentFilters:{}});case an.m:return l({},e,{isLoadingSearchSuggestions:!1,suggestions:[]});case an.l:return l({},e,{},t.payload);case an.n:var b=t.payload.isLoading;return Object(tt.a)(e,(function(e){e.currentError=null,e.isLoading=b}));default:return e}},cn=n(150),ln=n(361),un=Object(tt.a)((function(e,t){switch(t.type){case ln.c:t.users.forEach((function(t){var n=tn()(e.entities,t.id,{});e.entities[t.id]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{},t)}));break;case ln.a:t.users.forEach((function(t){e.entities[t.id]=t}));break;case ln.b:t.users.forEach((function(t){e.entities[t.id]=void 0}));break;default:return e}return e}),{current:null,entities:{}}),dn=n(402),pn=n.n(dn),fn=n(368),gn=n(254),mn=Object(tt.a)((function(e,t){switch(t.type){case gn.a:return t.socialNetworks.forEach((function(t){return e.entities[t.socialNetworkId]=t})),e;case gn.e:return e.current=t.current,e.isCustomSettingsOpen=void 0!==t.current,e;case gn.g:return Object.assign(e.entities[t.socialNetwork.socialNetworkId],t.socialNetwork),e.current=void 0,e.isCustomSettingsOpen=!1,e;case gn.b:return e.facebookSDKReady=!0,e;case gn.d:return e.isAdvancedOptionOpen[t.id]=t.isOpen,e;case gn.f:var n=t.payload.form;return pn()(e.form,n,fn.b),e;case gn.c:var r=t.payload,i=r.fieldId,a=r.errorMessage,o=e.form;ie()(o,["fields",i,"errorMessage"],a);var s=Object.values(o.fields).find((function(e){return!ue()(e.errorMessage)}));return ie()(o,["hasError"],Boolean(s)),e;default:return e}}),{current:null,entities:{},facebookSDKReady:!1,form:{},isAdvancedOptionOpen:{},isCustomSettingsOpen:!1}),vn=n(467),hn={form:{fields:{endDate:{hasError:!1,isOpen:!1,monthOffset:0,value:void 0,wasTouched:!1},startDate:{hasError:!1,isOpen:!1,monthOffset:0,value:void 0,wasTouched:!1}},hasError:!1,wasTouched:!1},isExportModalOpen:!1},yn=Object(tt.a)((function(e,t){switch(t.type){case vn.b:return e.isExportModalOpen=t.isOpen,e;case vn.c:var n=t.payload.form;return pn()(e.form,n,fn.b),e;case vn.a:var r=t.payload,i=r.fieldId,a=r.errorMessage,o=e.form;ie()(o,["fields",i,"errorMessage"],a);var s=Object.values(o.fields).find((function(e){return!ue()(e.errorMessage)}));return ie()(o,["hasError"],Boolean(s)),e;default:return e}}),hn),En=n(384),bn={isFetching:!0,list:[]},On=n(116),Cn={currentSAFilters:{ambassadors:[],sharers:[],timeframe:7,topics:[],programId:null},globalActivity:{activeAmbassadors:{fetching:!0,hasError:!1,infoDetails:null,value:null},newSocialPost:{fetching:!0,hasError:!1,infoDetails:null,value:null},totalShares:{fetching:!0,hasError:!1,infoDetails:null,value:null}},interactions:{rate:{fetching:!0,hasError:!1,infoDetails:null,value:null},totalComment:{fetching:!0,hasError:!1,infoDetails:null,value:null},totalLikes:{fetching:!0,hasError:!1,infoDetails:null,value:null}},topAmbassadors:{byComments:{entries:[],fetching:!0,hasError:!1},byInteractions:{entries:[],fetching:!0,hasError:!1},byLikes:{entries:[],fetching:!0,hasError:!1},byShares:{entries:[],fetching:!0,hasError:!1}},topSocialPosts:{byComments:{entries:[],fetching:!0,hasError:!1},byInteractions:{entries:[],fetching:!0,hasError:!1},byLikes:{entries:[],fetching:!0,hasError:!1},byShares:{entries:[],fetching:!0,hasError:!1}},topTopics:{byInteractions:{entries:[],fetching:!0,hasError:!1},byLikes:{entries:[],fetching:!0,hasError:!1},byShareable:{entries:[],fetching:!0,hasError:!1},byShares:{entries:[],fetching:!0,hasError:!1}}},Tn=n(164),Sn=Object(tt.a)((function(e,t){switch(t.type){case Tn.c:var n=t.isNextPage?Ut()(e.contentList):[];t.shareableContents.forEach((function(t){e.entities[t.shareableContent.id]=t,n.includes(t.shareableContent.id)||n.push(t.shareableContent.id)})),e.contentList=n,t.shareableContents.length>0&&(e.cursor=t.cursor),e.hasMore=t.hasMore;break;case Tn.d:e.current=t.shareableContent.id,e.entities[t.shareableContent.id]?e.entities[t.shareableContent.id]={firstSharers:e.entities[t.shareableContent.id].firstSharers,shareableContent:t.shareableContent,sharedByCurrentUser:e.entities[t.shareableContent.id].sharedByCurrentUser,stats:e.entities[t.shareableContent.id].stats}:e.entities[t.shareableContent.id]={shareableContent:t.shareableContent},e.contentList.includes(t.shareableContent.id)||e.contentList.unshift(t.shareableContent.id);break;case Tn.g:e.cursor=null;break;case Tn.e:e.entities[t.shareableContent.shareableContent.id]=t.shareableContent;break;case Tn.a:delete e.entities[t.contentId],e.contentList=e.contentList.filter((function(e){return e!==t.contentId}));break;case Tn.h:e.cursor=null,e.contentList=[],e.shareableContentSortDir=t.requestedSortDir;break;case Tn.f:e.galleryDialog.isOpen=!0,t.images&&(e.galleryDialog.images=t.images,e.galleryDialog.initialIndex=t.initialIndex);break;case Tn.b:e.galleryDialog.isOpen=!1;break;default:return e}return e}),{cursor:null,contentList:[],current:null,entities:{},galleryDialog:{images:[],isOpen:!1},hasMore:!0,shareableContentSortDir:-1}),In=n(607),_n=n(127),An=n(102),wn=n(120),Dn={contentId:null,programId:null,contentPreview:{},currentPreviewTab:0,form:{commonMessage:"",contentId:null,contentTitle:"",contentUrl:"",customizedMessages:{},images:[],sameMessage:!0,shareableOn:{},topics:[],type:An.d.link},incompatibleSocialNetworks:{},socialNetworksStatus:wn.c.initial,socialNetworks:[],isPreviewOpen:!1,isWorkflowOpen:!1,shareableContent:null},Ln=Dn.form,Pn=qt()(Dn,["form"]),Nn=Object(tt.a)((function(e,t){switch(t.type){case _n.k:return e.isWorkflowOpen=t.isWorkflowOpen,e.shareableContent=t.shareableContent,e.contentId=t.contentId,e.programId=t.programId,e;case _n.h:return e.contentPreview=t.payload,e;case _n.a:return e.contentPreview={},e;case _n.f:return t.error?e.mostUsedTopics.hasError=!0:(e.mostUsedTopics.entries=t.entries,e.mostUsedTopics.hasError=!1),e;case _n.l:return e.isPreviewOpen=t.payload,e;case _n.g:return Pn;case _n.j:return e.currentPreviewTab=t.payload,e;case _n.i:return e.incompatibleSocialNetworks=t.payload,e;case _n.c:return e.socialNetworksStatus=wn.c.loading,e;case _n.e:return e.socialNetworksStatus=wn.c.success,e.socialNetworks=t.payload,e;case _n.d:return e.socialNetworksStatus=wn.c.failure,e;default:return e}}),Pn),Rn=Object(In.a)("".concat(_n.b),Ln),jn=Object(j.c)({confirmBox:cn.e,export:yn,socialNetworks:mn,users:un,topics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case En.a:return p({},e,{isFetching:!0});case En.c:return p({},e,{isFetching:!1,list:Ut()(t.topics)});case En.b:return p({},e,{isFetching:!1,list:[]});default:return e}},saAnalytics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case On.w:return Object(tt.a)(e,(function(e){e.currentSAFilters[t.key]=t.value}));case On.v:return Object(tt.a)(e,(function(e){e.currentSAFilters=g({},Cn.currentSAFilters,{},t.values)}));case On.a:return Object(tt.a)(e,(function(e){e.globalActivity.activeAmbassadors.fetching=!0,e.globalActivity.newSocialPost.fetching=!0,e.globalActivity.totalShares.fetching=!0,e.interactions.rate.fetching=!0,e.interactions.totalLikes.fetching=!0,e.interactions.totalComment.fetching=!0}));case On.b:return Object(tt.a)(e,(function(e){e.topTopics.byInteractions.fetching=!0,e.topTopics.byLikes.fetching=!0,e.topTopics.byShares.fetching=!0,e.topSocialPosts.byInteractions.fetching=!0,e.topSocialPosts.byLikes.fetching=!0,e.topSocialPosts.byShares.fetching=!0,e.topSocialPosts.byComments.fetching=!0,e.topAmbassadors.byInteractions.fetching=!0,e.topAmbassadors.byLikes.fetching=!0,e.topAmbassadors.byShares.fetching=!0,e.topAmbassadors.byComments.fetching=!0}));case On.o:return Object(tt.a)(e,(function(e){e.globalActivity.activeAmbassadors.fetching=!1,t.error?e.globalActivity.activeAmbassadors.hasError=!0:(e.globalActivity.activeAmbassadors.value=t.value,e.globalActivity.activeAmbassadors.infoDetails=t.infoDetails,e.globalActivity.activeAmbassadors.hasError=!1)}));case On.p:return Object(tt.a)(e,(function(e){e.globalActivity.newSocialPost.fetching=!1,t.error?e.globalActivity.newSocialPost.hasError=!0:(e.globalActivity.newSocialPost.value=t.value,e.globalActivity.newSocialPost.hasError=!1)}));case On.q:return Object(tt.a)(e,(function(e){e.globalActivity.totalShares.fetching=!1,t.error?e.globalActivity.totalShares.hasError=!0:(e.globalActivity.totalShares.hasError=!1,e.globalActivity.totalShares.value=t.value,e.globalActivity.totalShares.infoDetails=t.infoDetails)}));case On.r:return Object(tt.a)(e,(function(e){e.interactions.rate.fetching=!1,t.error?e.interactions.rate.hasError=!0:(e.interactions.rate.value=t.value,e.interactions.rate.infoDetails=t.infoDetails,e.interactions.rate.hasError=!1)}));case On.t:return Object(tt.a)(e,(function(e){e.interactions.totalLikes.fetching=!1,t.error?e.interactions.totalLikes.hasError=!0:(e.interactions.totalLikes.value=t.value,e.interactions.totalLikes.infoDetails=t.infoDetails,e.interactions.totalLikes.hasError=!1)}));case On.s:return Object(tt.a)(e,(function(e){e.interactions.totalComment.fetching=!1,t.error?e.interactions.totalComment.hasError=!0:(e.interactions.totalComment.value=t.value,e.interactions.totalComment.infoDetails=t.infoDetails,e.interactions.totalComment.hasError=!1)}));case On.k:return Object(tt.a)(e,(function(e){e.topTopics.byInteractions.fetching=!1,t.error?e.topTopics.byInteractions.hasError=!0:(e.topTopics.byInteractions.hasError=!1,e.topTopics.byInteractions.entries=t.entries)}));case On.l:return Object(tt.a)(e,(function(e){e.topTopics.byLikes.fetching=!1,t.error?e.topTopics.byLikes.hasError=!0:(e.topTopics.byLikes.hasError=!1,e.topTopics.byLikes.entries=t.entries)}));case On.n:return Object(tt.a)(e,(function(e){e.topTopics.byShares.fetching=!1,t.error?e.topTopics.byShares.hasError=!0:(e.topTopics.byShares.hasError=!1,e.topTopics.byShares.entries=t.entries)}));case On.m:return Object(tt.a)(e,(function(e){e.topTopics.byShareable.fetching=!1,t.error?e.topTopics.byShareable.hasError=!0:(e.topTopics.byShareable.hasError=!1,e.topTopics.byShareable.entries=t.entries)}));case On.j:return Object(tt.a)(e,(function(e){e.topSocialPosts.byShares.fetching=!1,t.error?e.topSocialPosts.byShares.hasError=!0:(e.topSocialPosts.byShares.hasError=!1,e.topSocialPosts.byShares.entries=t.entries)}));case On.h:return Object(tt.a)(e,(function(e){e.topSocialPosts.byInteractions.fetching=!1,t.error?e.topSocialPosts.byInteractions.hasError=!0:(e.topSocialPosts.byInteractions.hasError=!1,e.topSocialPosts.byInteractions.entries=t.entries)}));case On.i:return Object(tt.a)(e,(function(e){e.topSocialPosts.byLikes.fetching=!1,t.error?e.topSocialPosts.byLikes.hasError=!0:(e.topSocialPosts.byLikes.hasError=!1,e.topSocialPosts.byLikes.entries=t.entries)}));case On.g:return Object(tt.a)(e,(function(e){e.topSocialPosts.byComments.fetching=!1,t.error?e.topSocialPosts.byComments.hasError=!0:(e.topSocialPosts.byComments.hasError=!1,e.topSocialPosts.byComments.entries=t.entries)}));case On.f:return Object(tt.a)(e,(function(e){e.topAmbassadors.byShares.fetching=!1,t.error?e.topAmbassadors.byShares.hasError=!0:(e.topAmbassadors.byShares.hasError=!1,e.topAmbassadors.byShares.entries=t.entries)}));case On.d:return Object(tt.a)(e,(function(e){e.topAmbassadors.byInteractions.fetching=!1,t.error?e.topAmbassadors.byInteractions.hasError=!0:(e.topAmbassadors.byInteractions.hasError=!1,e.topAmbassadors.byInteractions.entries=t.entries)}));case On.e:return Object(tt.a)(e,(function(e){e.topAmbassadors.byLikes.fetching=!1,t.error?e.topAmbassadors.byLikes.hasError=!0:(e.topAmbassadors.byLikes.hasError=!1,e.topAmbassadors.byLikes.entries=t.entries)}));case On.c:return Object(tt.a)(e,(function(e){e.topAmbassadors.byComments.fetching=!1,t.error?e.topAmbassadors.byComments.hasError=!0:(e.topAmbassadors.byComments.hasError=!1,e.topAmbassadors.byComments.entries=t.entries)}));case On.u:return Object(tt.a)(e,(function(e){switch(t.target){case"topic.interactions":e.topTopics.byInteractions.fetching=!0;break;case"topic.likes":e.topTopics.byLikes.fetching=!0;break;case"topic.shareable":e.topTopics.byShareable.fetching=!0;break;case"topic.shares":e.topTopics.byShares.fetching=!0;break;case"post.interactions":e.topSocialPosts.byInteractions.fetching=!0;break;case"post.shares":e.topSocialPosts.byShares.fetching=!0;break;case"post.likes":e.topSocialPosts.byLikes.fetching=!0;break;case"post.comments":e.topSocialPosts.byComments.fetching=!0;break;case"amb.interactions":e.topAmbassadors.byInteractions.fetching=!0;break;case"amb.shares":e.topAmbassadors.byShares.fetching=!0;break;case"amb.likes":e.topAmbassadors.byLikes.fetching=!0;break;case"amb.comments":e.topAmbassadors.byComments.fetching=!0;break;case"totalComments":e.interactions.totalComment.fetching=!0;break;case"totalLikes":e.interactions.totalLikes.fetching=!0;break;case"interactionRate":e.interactions.rate.fetching=!0;break;case"totalShares":e.globalActivity.totalShares.fetching=!0;break;case"newSocialPost":e.globalActivity.newSocialPost.fetching=!0;break;case"activeAmbassadors":e.globalActivity.activeAmbassadors.fetching=!0}}));default:return e}},shareableContents:Sn,shareableWorkflow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn,t=arguments.length>1?arguments[1]:void 0,n=e.form,r=qt()(e,["form"]);return v({},Nn(r,t),{form:Rn(n,t)})}}),kn=jn,Fn=n(222),Un=n(347),Mn=Object(tt.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn.a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Un.c:case Un.d:case Un.e:var n=t.payload.termsAndConditions;return y({},n);case Un.b:default:return y({},e)}})),xn=Mn,$n=n(68),Bn=n(1142),Wn=n(606),Gn={confirmBox:cn.e,customer:Bn.reducer,froala:Wn.b,lastActionType:function(e,t){return t.type},loadingState:$n.f},Yn=n(525),Hn=Yn.b,Kn=n(742),Vn={currentWidget:{}},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;return Object(tt.b)(e,(function(e){switch(t.type){case"__angular__/widget/update":var n=t.newState.currentWidget;return e.currentWidget=n,e;case Kn.a:return t.payload.lang&&(e.currentWidget.properties.content[t.payload.lang]=t.payload.content),e;default:return e}}))},qn=n(413),Xn={isModalOpen:!1,sourceLang:""},Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qn.b:return Object(tt.a)(e,(function(e){return e.isModalOpen=!0,e}));case qn.a:return Object(tt.a)(e,(function(e){return e.isModalOpen=!1,e}));case qn.c:return Object(tt.a)(e,(function(e){return e.sourceLang=t.payload.sourceLang,e}));default:return e}},Zn=n(322),Jn=[],er={hasNextPage:!1,isLoading:!1,nextPageCursor:null,posts:[]},tr=-1,nr=n(123),rr=[],ir={filteredTasks:[],isFilteredByLateTasks:!1,isFilteredByReminderTasks:!1,isFilteredByTodayTasks:!1,isInit:!1,isLoading:!1,isMyTasksCheckedItemsDisplayed:!1,isOrderByDueDateDesc:!0,myTasksNewTodo:{},myTasksTodoItems:[],myTasksUserContentWidget:{},selectedTasks:[],tasks:[]},ar=-1,or=n(277),sr=n(233),cr=[],lr={currentlyOpenedPopover:"",documents:[],isLoading:!1,people:[]},ur=-1,dr=n(306),pr=[],fr={isLoading:!1,chartImageUrl:"",widgetWidth:null},gr=-1,mr=Object(j.c)({delve:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(n){var r=n.findIndex((function(e){return t.payload&&void 0===t.payload.uuid?ur:t.payload?e.uuid===t.payload.uuid:ur}));switch(t.type){case sr.a:r===ur&&n.push(S({uuid:t.payload.uuid},lr));break;case sr.b:var i;if(r!==ur)i=t.payload.close?n[r].currentlyOpenedPopover===t.payload.data?"":n[r].currentlyOpenedPopover:t.payload.data,Object.assign(n[r],{currentlyOpenedPopover:i});break;case sr.d:r!==ur&&Object.assign(n[r],{isLoading:t.payload.data});break;case sr.c:r!==ur&&Object.assign(n[r],{documents:t.payload.data});break;case sr.e:r!==ur&&Object.assign(n[r],{people:t.payload.data});break;default:return e}return n}))},entities:or.h,tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(n){var r=n.findIndex((function(e){return t.payload&&void 0===t.payload.uuid?ar:t.payload?e.uuid===t.payload.uuid:ar}));switch(t.type){case nr.a:r===ar&&(n.push(C({uuid:t.payload.uuid},ir)),Object.assign(n[n.length-1],{isInit:!0}));break;case nr.h:r!==ar&&Object.assign(n[r],{isMyTasksCheckedItemsDisplayed:t.payload.data});break;case nr.b:r!==ar&&Object.assign(n[r],{filteredTasks:t.payload.data});break;case nr.c:r!==ar&&Object.assign(n[r],{isFilteredByLateTasks:t.payload.data});break;case nr.d:r!==ar&&Object.assign(n[r],{isFilteredByReminderTasks:t.payload.data});break;case nr.e:r!==ar&&Object.assign(n[r],{isFilteredByTodayTasks:t.payload.data});break;case nr.f:r!==ar&&Object.assign(n[r],{isLoading:t.payload.data});break;case nr.g:r!==ar&&Object.assign(n[r],{isOrderedByDueDateDesc:t.payload.data});break;case nr.i:r!==ar&&Object.assign(n[r],{myTasksNewTodo:t.payload.data});break;case nr.j:r!==ar&&Object.assign(n[r],{myTasksTodoItems:t.payload.data});break;case nr.k:r!==ar&&Object.assign(n[r],{myTasksUserContentWidget:t.payload.data});break;case nr.l:r!==ar&&Object.assign(n[r],{selectedTasks:t.payload.data});break;case nr.m:r!==ar&&Object.assign(n[r],{tasks:t.payload.data});break;case nr.n:if(r!==ar){var i=n[r].tasks.findIndex((function(e){return e.id===t.payload.data.id}));Object.assign(n[r].tasks[i],t.payload.data)}break;default:return e}return n}))},chart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(n){var r=n.findIndex((function(e){return t.payload&&void 0===t.payload.uuid?gr:t.payload?e.uuid===t.payload.uuid:gr}));switch(t.type){case dr.a:r===gr&&n.push(_({uuid:t.payload.uuid},fr));break;case dr.b:r===gr?n.push(_({uuid:t.payload.uuid},fr)):Object.assign(n[r],{chartImageUrl:t.payload.data});break;case dr.d:r!==gr&&Object.assign(n[r],{isLoading:t.payload.data});break;case dr.c:r!==gr&&Object.assign(n[r],{chartImageUrl:t.payload.data});break;case dr.e:r!==gr&&Object.assign(n[r],{widgetWidth:t.payload.data});break;default:return e}return n}))},wall:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(n){var r=n.findIndex((function(e){return t.payload&&void 0===t.payload.uuid?tr:t.payload?e.uuid===t.payload.uuid:tr}));switch(t.type){case Zn.b:r===tr&&(n.push(b({uuid:t.payload.uuid},er)),Object.assign(n[n.length-1],{isInit:!0}));break;case Zn.c:r!==tr&&Object.assign(n[r],{hasNextPage:t.payload.data.more,nextPageCursor:t.payload.data.cursor||null});break;case Zn.a:if(r!==tr){var i=Object.assign(n[r].posts,{});i.push.apply(i,Ut()(t.payload.data)),Object.assign(n[r],{posts:i})}break;case Zn.d:r!==tr&&Object.assign(n[r],{posts:t.payload.data});break;default:return e}return n}))}}),vr=mr,hr=n(433),yr=hr.c,Er=n(391),br={multiSharePayload:null},Or=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({SAMembers:Te.b,admin:ze,analytics:Qe,bookmarks:V.b,chat:K.b,chats:Ze.a,comment:te.b,customizations:Re.b,communities:Ne.c,communityGlobalSettings:et,contentTemplates:H.b,contentTypes:Y.b,currentCommunity:mt,customContentType:Ot,document:St,feed:z.b,folksonomy:q.b,groups:ke.c,instance:X.a,lastActionType:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;return e.type},locale:kt,mainNav:Vt,marketplace:Q.e,metadata:Z.b,mobile:Object(j.c)({contentStreamAdmin:J.b}),directories:ee.a,nanny:ye,header:je.a,notificationCenter:Ee.b,notifications:be.c,permissions:Oe.a,post:Ce.b,posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=arguments.length>1?arguments[1]:void 0;return Object(tt.a)(e,(function(e){switch(t.type){case Er.a:e.multiSharePayload=null;break;case Er.c:e.multiSharePayload=t.multiSharePayload;break;case Er.b:e.multiSharePayload={error:!0};break;case Er.a:e.multiSharePayload=null;break;case Er.e:e.multiSharePayload=t.multiSharePayload;break;case Er.d:e.multiSharePayload={error:!0}}return e}))},saConnectedUser:_e.c,saPrograms:Ae.d,saShareableContent:De.a,saTopics:we.a,search:sn,newSearch:Pe.b,share:Le.a,socialAdvocacy:kn,termsAndConditions:xn,user:Se.b,users:Hn,userDirectory:Ie.b,widget:zn,widgetTranslation:Qn,widgets:vr,workspaces:yr},Gn),Cr=Or;n.d(t,"ReduxStoreService",(function(){return D})),n.d(t,"store",(function(){return ge})),D.$inject=["$rootScope"],angular.module("Services").service("ReduxStore",D)},function(e,t,n){"use strict";function r(e,t,n,r,i){if(!E()(H,n))return!1;var a=e.getCurrent();return!angular.isUndefinedOrEmpty(a)&&(a.type===r.COMMUNITY&&i?t.hasChanges():e.hasChanges())}function i(e){if(angular.isUndefinedOrEmpty(e))return!1;var t=E()(e.url,"/list"),n=E()(e.url,".html")||E()(e.url,"tutorial/list")||E()(e.url,"notification/list")||E()(e.url,"favorite/list")||E()(e.url,"feed/list")||E()(e.url,"metric"),r=h()(e,"data.callId",h()(e,"params.callId")),i=angular.isUndefinedOrEmpty(r);return!(!I.ENABLE_LIST_XHR_QUEUE||!t||n||i)}function a(e,t){if(!i(e.config))return e;var n=h()(e,"config.data.callId",h()(e,"config.params.callId"));if(angular.isDefinedAndFilled(K[n])){var r;for(delete K[n];angular.isUndefinedOrEmpty(r)&&!angular.isUndefinedOrEmpty(V);)r=V.shift(),angular.isDefined(r.timeout)&&(!1===r.timeout?r=void 0:(t.cancel(r.timeout),delete r.timeout));if(angular.isDefinedAndFilled(r)){var a=h()(r.config,"data.callId",h()(r.config,"params.callId"));K[a]=r.config,r.promise.resolve()}}return e}function o(e,t,n,r,o,s,c,l,u,d,p,f,g,v,y,C){c.value("$translateProvider",f),c.value("$stateProvider",p),o.setKeyPrefix("LumApps-"),d.setKeyPrefix("LumApps-"),u.resourceUrlWhitelist(["self","https://*.cdn.lumapps.com/**"]);var T=window.location.href.split("?")||[window.location.href,""];T=T.length>=2?T[1]:"";var _=I.ENABLE_ANGULAR_DEBUG_INFO||E()(T,"debugInfo")||E()(T,"ngStats")||"undefined"!=typeof IS_TEST_ENV&&IS_TEST_ENV;_&&"undefined"==typeof IS_TEST_ENV&&angular.injector(["ng"]).get("$log").debug("[LumApps - Angular] - Debug info are enabled"),t.debugInfoEnabled(_),t.commentDirectivesEnabled(!1),t.cssClassDirectivesEnabled(!1),t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|slack):/),l.digestTtl(15);var w=p.state;p.state=function(e,t){return t.resolve||(t.resolve={}),w.apply(this,arguments)};var L=angular.module("Controllers");L._controller=L.controller,L.controller=function(e,t){return n.register(e,t),L};var P=angular.module("Directives");P._directive=P.directive,P.directive=function(e,n){return t.directive(e,n),P};var N=angular.module("Widgets");N._directive=N.directive,N.directive=function(e,n){return t.directive(e,n),N};var j=angular.module("Factories");j._factory=j.factory,j.factory=function(e,t){return c.factory(e,t),j};var k=angular.module("CustomServices");k._service=k.service,k.service=function(e,t){return c.service(e,t),k},e.settings.ga.additionalAccountNames=["lumsites"],Object(b.g)(s,g,v),r.interceptors.push(["$injector","$location","$q","$timeout","InitialSettings",function(e,t,n,r,o){var s=-1,c={GOOGLE_CALENDAR_SHARE_ERROR:["community/save"],GOOGLE_DRIVE_SHARE_ERROR:["community/save"],NOT_AUTHORIZED:["customer/save","header/get"]},l={};return{request:function(t){e.get("Utils");if(R()(t.url,"/client/")&&m()(t.url,".html")){var a=e.get("$templateCache");if(!a.get(t.url)){var s="\nYou should not be able to request a template file, it must be provided by $templateCache.\nThe path to your html file (".concat(t.url,") might be wrong.");console.warn(s)}}if(!R()(t.url,o.PUBLIC_PATH_PREFIX)){var c=e.get("User"),l=c.getToken();angular.isDefinedAndFilled(l)&&(t.headers.Authorization="Bearer ".concat(l)),t.headers["Lumapps-Organization-Id"]=window.CUSTOMER_ID}if(!i(t))return t;var u=h()(t,"data.callId",h()(t,"params.callId"));if(angular.isUndefinedOrEmpty(u)&&(u=Object(Y.b)(),E()(["GET","DELETE"],t.method)?D()(t,"data.callId",u):E()(["POST","PUT"],t.method)&&D()(t,"params.callId",u)),Object.size(K)<I.MAX_XHR_QUEUE_SIZE)return K[u]=t,t;var d=n.defer(),p={config:t,promise:d};return p.timeout=r((function(){p.promise.resolve(),p.timeout=!1}),1e3*I.MAX_XHR_QUEUE_DELAY),V.push(p),n((function(e){d.promise.then((function(){e(t)}))}))},response:function(e){return a(e,r)},responseError:function(i){return a(i,r),r((function(){var n=e.get("LxNotificationService"),r=h()(i,"data.error.message"),a=h()(i,"config.data.ignore403",h()(i,"config.params.ignore403"))||E()(h()(i,"config.url",""),"/metric");if(403!==i.status||a){if(400===i.status&&(E()(h()(i,"config.url",""),"/calendar/")||E()(h()(i,"config.url",""),"/drive/")||E()(h()(i,"config.url",""),"/gmail/")||E()(h()(i,"config.url",""),"/lumwork/"))){if(h()(l,"".concat(i.config.url,".").concat(r),!1))return;angular.isUndefined(l[i.config.url])&&(l[i.config.url]={}),l[i.config.url][r]=!0,n.error(r)}}else{var o;if(angular.isDefinedAndFilled(c[r])&&(s=-1,o=A()(c[r],(function(e){return E()(h()(i,"config.url",""),e)})),angular.isDefinedAndFilled(o)))return;var u="";if(R()(t.path(),"/a/")){var d=e.get("Customer");u="/a/".concat(d.getCustomerSlug(!1))}var p=e.get("Instance");u+="/".concat(p.getCurrentInstanceSlug());var f=E()(["CUSTOMER_LICENCE_EXPIRED","PUBLIC_CONTENT_DISABLED","USER_DISABLED"],r),g=E()(h()(i,"config.url",""),"/content/get")||E()(h()(i,"config.url",""),"/community/get"),m=e.get("Translation");if(f||403===s&&g||u===t.path()||"".concat(u,"/")===t.path()){s=-1,n.error(m.translate("ERROR_NOT_AUTHORIZED"));var v=f?r:"NOT_AUTHORIZED_LOGIN";t.search("error",v);var y=e.get("User"),b=h()(y.getConnected(),"email");angular.isDefinedAndFilled(b)&&t.search("email",b),t.path("".concat(u,"/login"))}else n.error(m.translate("ERROR_NOT_AUTHORIZED")),t.path(u);g&&(s=i.status)}}),1),n.reject(i)}}}]),function(e){e.state("gsite",{resolve:{resolveInitialSetting:["$q","Settings",function(e,t){return!!t.is.initialized||e((function(e,n){t.setup("app").then(e).catch(n)}))}]},url:"{customer:customerPath}/{instance:gsite}?user-profile&as&debug&debugInfo&xhrQueue&safe&prod&ngStats"}).state("gsite.login",{resolve:{resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/login",views:{"login@":{controller:"GSiteLoginController",templateUrl:"/client/front-office/specifics/overrides/veolia/modules/gsite/common/views/login.html"}}}).state("gsite.listNews",{resolve:{resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/list-news",views:{"app@":{controller:"GSiteListNewsController",templateUrl:"/client/front-office/specifics/overrides/veolia/modules/gsite/modules/widget/views/widget.html"}}}).state("gsite.newsWeight",{resolve:{resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/news-weight",views:{"app@":{controller:"GSiteNewsWeightController",templateUrl:"/client/front-office/specifics/overrides/veolia/modules/gsite/modules/widget/views/widget.html"}}}).state("gsite.lastNews",{data:{action:"get"},resolve:{resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/last-news",views:{"app@":{controller:"GSiteLastNewsController",templateUrl:"/client/front-office/specifics/overrides/veolia/modules/gsite/modules/widget/views/widget.html"}}}).state("gsite.staticWidget",{resolve:{resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/widget",views:{"app@":{controller:"GSiteStaticWidgetController",templateUrl:"/client/front-office/specifics/overrides/veolia/modules/gsite/modules/widget/views/widget.html"}}}).state("gsite.shortcuts",{data:{action:"get"},resolve:{resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/shortcuts",views:{"app@":{controller:"GSiteShortcutsController",templateUrl:"/client/front-office/specifics/overrides/veolia/modules/gsite/modules/widget/views/widget-shortcut.html"}}}).state("gsite.search",{resolve:{resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/search",views:{"app@":{controller:"GSiteSearchController",controllerAs:"vm",templateUrl:"/client/front-office/specifics/overrides/veolia/modules/gsite/modules/search/views/search.html"}}}).state("gsite.news",{data:{action:"get"},resolve:{resolveContent:["Content","InitialSettings","Instance","Translation","resolveInitialSetting",function(e,t,n,r,i){angular.noop(i);var a=decodeURIComponent(t.URL_PARAMS.parent);if(angular.isUndefinedOrEmpty(a))return!1;a=new URL(a);var o=x()(U()(a.search.replace("?","").split("&"),(function(e){return e.split("=")})));return!angular.isUndefined(o.s)&&e.get({action:"PAGE_READ",instance:n.getCurrentInstanceId(),lang:r.getLang("current"),slug:o.s}).$promise}],resolveCustomContentType:angular.noop,resolveLoading:["Settings","resolveContent",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/news",views:{"app@":{controller:"ContentFrontController",controllerAs:"vm",templateUrl:"/client/front-office/modules/content/common/views/content-front.html"}}})}(p),function(e,t){e.state("adminCustomer",{resolve:{resolveModules:["$injector","$ocLazyLoad","Translation","Utils",function(e,t,n,r){return S(e,t,n,r)}],resolveInitialSetting:["$q","Settings","resolveModules",function(e,t,n){return angular.noop(n),e((function(e,n){t.setup("adminCustomer").then(e).catch(n)}))}],resolveTranslations:["Translation","resolveInitialSetting",function(e,n){return angular.noop(n),e.setTranslationsTable(t.translations()),!0}],resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/admin/customer?token",views:{app:{controller:"CustomerSettingsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/customer/views/customer-settings.html"}}})}(p,f),function(e,t){e.state("login",{resolve:{resolveInitialSetting:["$q","Settings",function(e,t){return e((function(e,n){t.setup("login").then(e).catch(n)}))}],resolveTranslations:["Translation","resolveInitialSetting",function(e,n){return angular.noop(n),e.setTranslationsTable(t.translations()),!0}],resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"{customer:customerPath}{instance:(?:/[^/]+)*}/login?r&forgotten-password",views:{login:{controller:"LoginController",controllerAs:"vm",templateProvider:["$http","$templateCache","ConfigTheme","Instance",function(e,t,n,r){var i=Object(b.d)(r,"login/views/login.html",n.HAS_CUSTOM_LOGIN);return Object(b.e)(e,t,i)}]}}}).state("accountChoice",{resolve:{resolveInitialSetting:["$q","Settings",function(e,t){return e((function(e,n){t.setup("accountChoice").then(e).catch(n)}))}],resolveTranslations:["Translation","resolveInitialSetting",function(e,n){return angular.noop(n),e.setTranslationsTable(t.translations()),!0}],resolveLoading:["Settings","resolveInitialSetting",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/login/account",views:{login:{controller:"LoginChoiceController",controllerAs:"vm",templateProvider:["$http","$templateCache","ConfigTheme","Instance",function(e,t,n,r){var i=Object(b.d)(r,"login/views/login-choice.html",n.HAS_CUSTOM_LOGIN);return Object(b.e)(e,t,i)}]}}})}(p,f),function(e,t){e.state("app",{resolve:{resolveInit:["$stateParams",function(e){try{angular.isDefined(e.ngStats)&&angular.isFunction(window.showAngularStats)&&window.showAngularStats({logDigest:"log"===e.ngStats,logWatches:"log"===e.ngStats,position:"topright"})}catch(e){}return!0}],resolveInitialSetting:["$q","Settings","resolveInit",function(e,t,n){return angular.noop(n),!!t.is.initialized||e((function(e,n){t.setup("app").then(e).catch(n)}))}],resolveTranslations:["Translation","resolveInitialSetting",function(e,n){return angular.noop(n),e.setTranslationsTable(t.translations()),!0}]},url:"{customer:customerPath}/{instance:(?!login|gsite)[^/]+}?user-profile&as&debug&debugInfo&xhrQueue&safe&prod&ngStats",views:{app:{controller:"AppController",controllerAs:"app",templateUrl:"/client/front-office/modules/layout/modules/app/views/app.html"}}})}(p,f),function(e){e.state("app.admin",{resolve:{resolveModules:["$injector","$ocLazyLoad","Translation","Utils",function(e,t,n,r){return S(e,t,n,r)}],resolveLoadingAdmin:["$location","Settings","resolveModules","resolveInitialSetting",function(e,t,n,r){return angular.noop(n,r),(m()(e.path(),"/admin")||m()(e.path(),"/admin/"))&&t.endLoading(),!0}]},url:"/admin",views:{footer:{controller:"FooterController",controllerAs:"vm",templateProvider:["$http","$templateCache","ConfigTheme","Instance",function(e,t,n,r){var i=Object(b.d)(r,"layout/modules/footer/views/footer.html",n.HAS_CUSTOM_FOOTER,"common");return Object(b.e)(e,t,i)}]},header:{controller:"HeaderController",controllerAs:"vm",templateProvider:["$http","$templateCache","ConfigTheme","Instance",function(e,t,n,r){var i;return i=angular.isDefined(n.HAS_CUSTOM_HEADER)&&angular.isDefined(n.HAS_CUSTOM_HEADER_ADMIN)&&n.HAS_CUSTOM_HEADER&&n.HAS_CUSTOM_HEADER_ADMIN?"/client/front-office/specifics/themes/".concat(r.getInstance().theme,"/modules/layout/modules/header/common/views/header.html"):"/client/back-office/modules/layout/modules/header/common/views/header-admin.html",Object(b.e)(e,t,i)}]},main:{controller:"AdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/layout/modules/admin/views/admin.html"}}}).state("app.admin.customContentType",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/custom-content-type",views:{content:{controller:"CustomContentTypeAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/custom-content-type/views/custom-content-type-admin.html"}}}).state("app.admin.content",{resolve:{resolveCustomContentType:["$q","$stateParams","CustomContentType","resolveLoadingAdmin",function(e,t,n,r){return angular.noop(r),e((function(e,r){n.getItem(t.uid,e,r,void 0,!0)}))}],resolveLoading:["Settings","resolveCustomContentType",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/content/:uid?filters",views:{content:{controller:"ContentAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/content/common/views/content-admin.html"}}}).state("app.admin.tag",{resolve:{resolveCustomContentType:["$q","$stateParams","CustomContentType","resolveLoadingAdmin",function(e,t,n,r){return angular.noop(r),e((function(e,r){n.getItem(t.uid,e,r,void 0,!0)}))}],resolveLoading:["Settings","resolveCustomContentType",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/tag/:uid",views:{content:{controller:"CustomContentTypeTagAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/custom-content-type/views/custom-content-type-tag-admin.html"}}}).state("app.admin.content-list",{resolve:{resolveCustomContentType:["$q","$stateParams","CustomContentType","resolveLoadingAdmin",function(e,t,n,r){return angular.noop(r),e((function(e,r){n.getItem(t.customContentType,e,r,void 0,!0)}))}],resolveLoading:["Settings","resolveCustomContentType",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/content-list/:customContentType",views:{content:{controller:"CustomContentTypeListAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/custom-content-type/views/custom-content-type-list-admin.html"}}}).state("app.admin.media",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/media",views:{content:{controller:"MediaAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/media/views/media-admin.html"}}}).state("app.admin.media_tags",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/media-tags",views:{content:{controller:"MediaTagsAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/media/views/media-tags-admin.html"}}}).state("app.admin.media_trash",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/media-trash",views:{content:{controller:"MediaAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/media/views/media-admin.html"}}}).state("app.admin.main-nav",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/main-nav",views:{content:{controller:"MainNavAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/main-nav/views/main-nav-admin.html"}}}).state("app.admin.module",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/module",views:{content:{controller:"ModuleAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/module/common/views/module-admin.html"}}}).state("app.admin.communities",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/communities",views:{content:{controller:"CommunitiesAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/communities/community-admin/views/communities-admin.html"}}}).state("app.admin.community-templates",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/communities/templates",views:{content:{controller:"CommunityTemplatesAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/communities/templates-admin/views/community-templates-admin.html"}}}).state("app.admin.newsletter",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/newsletter",views:{content:{controller:"NewsletterController",controllerAs:"vm",templateUrl:"/client/back-office/modules/newsletter/common/views/newsletter.html"}}}).state("app.admin.newsletter-create",{resolve:{resolveNewsletter:["Customer","Instance","Newsletter","resolveLoadingAdmin",function(e,t,n,r){return angular.noop(r),n.setCurrent({customer:e.getCustomerId(),instance:t.getCurrentInstanceId(),sender:"noreply@lumapps.com"}),!0}],resolveLoading:["Settings","resolveLoadingAdmin","resolveNewsletter",function(e,t,n){return angular.noop(t,n),e.endLoading(),!0}]},url:"/newsletter/create",views:{content:{controller:"NewsletterDetailsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/newsletter/common/views/newsletter-details.html"}}}).state("app.admin.newsletter-edit",{resolve:{resolveNewsletter:["$stateParams","Newsletter","resolveLoadingAdmin",function(e,t,n){return angular.noop(n),Object(b.f)(t.getAsync(e.key))}],resolveLoading:["Settings","resolveNewsletter",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/newsletter/edit/:key",views:{content:{controller:"NewsletterDetailsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/newsletter/common/views/newsletter-details.html"}}}).state("app.admin.directory",{data:{action:"get"},resolve:{resolveDirectory:["$stateParams","Directory","resolveLoadingAdmin",function(e,t,n){return angular.noop(n),Object(b.f)(t.getAsync(e.id))}],resolveLoading:["Settings","resolveDirectory",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/directory/:id",views:{content:{controller:"DirectoryAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/module/modules/directory/views/directory-admin.html"}}}).state("app.admin.directory-tag",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/directory/:id/tag",views:{content:{controller:"DirectoryTagAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/module/modules/directory/views/directory-tag-admin.html"}}}).state("app.admin.social-advocacy",{abstract:!0,resolve:{resolveLoadingSocialAdvocacy:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),!0}]},url:"/social-advocacy"}).state("app.admin.social-advocacy.social-network",{params:{permissions:[b.b.superAdmin,O.b.CAN_MANAGE_SOCIAL_NETWORK_CONFIGURATIONS]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/sa-social-network",views:{"content@app.admin":{templateUrl:"/client/back-office/modules/social-advocacy/views/social-advocacy-social-network.html"}}}).state("app.admin.gamification",{abstract:!0,resolve:{resolveLoadingGamification:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),!0}]},url:"/gamification"}).state("app.admin.gamification.settings",{url:"/settings",views:{"content@app.admin":{controller:"GamificationSettingsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/gamification/settings/views/gamification-settings.html"}}}).state("app.admin.gamification.badges",{resolve:{resolveLoading:["Settings","resolveLoadingGamification",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/rewards/badges",views:{"content@app.admin":{controller:"GamificationBadgesController",controllerAs:"vm",templateUrl:"/client/back-office/modules/gamification/rewards/badges/views/gamification-badges.html"}}}).state("app.admin.gamification.quests",{resolve:{resolveLoading:["Settings","resolveLoadingGamification",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/quests",views:{"content@app.admin":{controller:"GamificationQuestsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/gamification/quests/views/gamification-quests.html"}}}).state("app.admin.gamification.seasons-leaderboards",{abstract:!0,resolve:{resolveLoadingSeasonsLeaderboard:["Settings","resolveLoadingGamification",function(e,t){return angular.noop(t),!0}]},views:{"content@app.admin":{controller:"GamificationSeasonsLeaderboardsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/gamification/leaderboards/views/gamification-seasons-leaderboards.html"}}}).state("app.admin.gamification.seasons-leaderboards.seasons",{resolve:{resolveLoading:["Settings","resolveLoadingSeasonsLeaderboard",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/seasons",views:{"seasons-leaderboards@app.admin.gamification.seasons-leaderboards":{controller:"GamificationSeasonsController",controllerAs:"seasonsVm",templateUrl:"/client/back-office/modules/gamification/leaderboards/views/gamification-seasons.html"}}}).state("app.admin.gamification.seasons-leaderboards.leaderboards",{resolve:{resolveLoading:["Settings","resolveLoadingSeasonsLeaderboard",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/leaderboards",views:{"seasons-leaderboards@app.admin.gamification.seasons-leaderboards":{controller:"GamificationLeaderboardsController",controllerAs:"leaderboardsVm",templateUrl:"/client/back-office/modules/gamification/leaderboards/views/gamification-leaderboards.html"}}}).state("app.admin.gamification.user-rewards",{resolve:{resolveLoading:["Settings","resolveLoadingGamification",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/user-rewards",views:{"content@app.admin":{controller:"GamificationUserRewardsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/gamification/user-rewards/views/gamification-user-rewards.html"}}}).state("app.admin.instance-settings",{params:{permissions:[b.b.instanceAdmin,b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/instance-settings",views:{content:{controller:"InstanceController",controllerAs:"vm",templateUrl:"/client/back-office/modules/instance/views/instance-settings.html"}}}).state("app.admin.advanced-analytics",{abstract:!0,resolve:{resolveLoadingAnalytics:["resolveLoadingAdmin",function(e){return angular.noop(e),!0}]},url:"/advanced-analytics"}).state("app.admin.advanced-analytics.admin",{resolve:{resolveLoading:["Settings","resolveLoadingAnalytics",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/admin",views:{"content@app.admin":{controller:"LumanalyticsAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/lumanalytics/views/lumanalytics-admin.html"}}}).state("app.admin.role",{params:{permissions:[b.b.instanceAdmin,b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/role",views:{content:{controller:"RoleController",controllerAs:"vm",templateUrl:"/client/back-office/modules/role/views/role.html"}}}).state("app.admin.instance-admin",{params:{permissions:[b.b.instanceAdmin,b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/instance-admin",views:{content:{controller:"InstanceAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/instance-admin/views/instance-admin.html"}}}).state("app.admin.instanceFeedTypes",{data:{type:"instance"},params:{permissions:[b.b.instanceAdmin,b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/feed",views:{content:{controller:"FeedTypeController",controllerAs:"vm",templateUrl:"/client/back-office/modules/feed-type/views/feed-type.html"}}}).state("app.admin.metadata",{params:{instanceMandatory:!0},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/metadata",views:{content:{controller:"MetadataController",controllerAs:"vm",templateUrl:"/client/back-office/modules/metadata/views/metadata-admin.html"}}}).state("app.admin.instance-script",{params:{permissions:[b.b.instanceAdmin,b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/instance-script",views:{content:{controller:"InstanceScriptController",controllerAs:"vm",templateUrl:"/client/back-office/modules/instance-script/views/instance-script.html"}}}).state("app.admin.site-analytics",{resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/site-analytics",views:{content:{controller:"AnalyticsReportController",controllerAs:"vm",templateUrl:"/client/back-office/modules/analytics/modules/report/views/analytics-instance-report.html"}}}).state("app.admin.platform-analytics",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/platform-analytics",views:{content:{controller:"AnalyticsReportController",controllerAs:"vm",templateUrl:"/client/back-office/modules/analytics/modules/report/views/analytics-platform-report.html"}}}).state("app.admin.analytics-settings",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/analytics-settings",views:{content:{controller:"AnalyticsSettingsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/analytics/modules/settings/views/analytics-settings.html"}}}).state("app.admin.mobile-general-settings",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/mobile-general-settings",views:{content:{controller:"MobileGeneralSettingsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/mobile/views/mobile-general-settings.html"}}}).state("app.admin.mobile-content-streams",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/mobile-content-streams",views:{content:{controller:"MobileContentStreamsSettingsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/mobile/views/mobile-content-streams-settings.html"}}}).state("app.admin.mobile-customization",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/mobile-customization",views:{content:{controller:"MobileCustomizationSettingsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/mobile/views/mobile-customization-settings.html"}}}).state("app.admin.global-settings",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/global-settings",views:{content:{controller:"GlobalSettingsController",controllerAs:"vm",templateUrl:"/client/back-office/modules/customer/views/global-settings.html"}}}).state("app.admin.super-admin",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/super-admin",views:{content:{controller:"SuperAdminController",controllerAs:"vm",templateUrl:"/client/back-office/modules/super-admin/views/super-admin.html"}}}).state("app.admin.beta-user",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/beta-user",views:{content:{controller:"BetaUserController",controllerAs:"vm",templateUrl:"/client/back-office/modules/beta-user/views/beta-user.html"}}}).state("app.admin.extensions",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/extensions",views:{content:{controller:"GlobalSettingsAdvancedController",controllerAs:"vm",templateUrl:"/client/back-office/modules/customer/views/extensions.html"}}}).state("app.admin.users-management",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/users-management",views:{content:{controller:"UserManagementController",controllerAs:"vm",templateUrl:"/client/back-office/modules/user-management/views/user-management.html"}}}).state("app.admin.platformFeedTypes",{data:{type:"platform"},params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/platform-feed",views:{content:{controller:"FeedTypeController",controllerAs:"vm",templateUrl:"/client/back-office/modules/feed-type/views/feed-type.html"}}}).state("app.admin.platform-metadata",{params:{instanceMandatory:!1,permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/platform-metadata",views:{content:{controller:"MetadataController",controllerAs:"vm",templateUrl:"/client/back-office/modules/metadata/views/metadata-admin.html"}}}).state("app.admin.instance",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/instance",views:{content:{controller:"InstanceController",controllerAs:"vm",templateUrl:"/client/back-office/modules/instance/views/instance.html"}}}).state("app.admin.providers-idp",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/identity-providers",views:{content:{controller:"IdentityProviderDashboardController",controllerAs:"vm",templateUrl:"/client/back-office/modules/provider/views/identity-provider.html"}}}).state("app.admin.providers-service",{params:{permissions:[b.b.superAdmin]},resolve:{resolveLoading:["Settings","resolveLoadingAdmin",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/service-providers",views:{content:{controller:"ServiceProviderDashboardController",controllerAs:"vm",templateUrl:"/client/back-office/modules/provider/views/service-provider.html"}}}).state("app.front.instance-style",{data:{action:"style",designer:!0},params:{permissions:[b.b.instanceAdmin,b.b.superAdmin]},resolve:{resolveModules:["$injector","$ocLazyLoad","Translation","Utils","resolveLoadingFront",function(e,t,n,r,i){return angular.noop(i),S(e,t,n,r)}],resolveContent:["Content","Customer","Instance","resolveModules",function(e,t,n,r){angular.noop(r);var i={action:"PAGE_EDIT"},a=n.getCurrentInstanceId();if(angular.isDefinedAndFilled(a))i.instance=a;else{var o=t.getCustomerSlug(!0),s=o.isDomain?"customerHost":"customerSlug";o=o.slug,i[s]=o,i.instanceSlug=n.getCurrentInstanceSlug()}return e.getAsync(i).$promise}],resolveCustomContentType:angular.noop,resolveLoading:["Settings","resolveContent",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/admin/instance-style",views:{content:{controller:"ContentFrontController",controllerAs:"vm",templateUrl:"/client/front-office/modules/content/common/views/content-front.html"},"sidebar@app":{controller:"InstanceStyleSidebarController",controllerAs:"vm",templateUrl:"/client/back-office/modules/instance-style/views/instance-style-sidebar.html"}}}).state("app.front.search",{resolve:{resolveDataSources:["Instance","Search","resolveLoadingFront",function(e,t,n){return angular.noop(n),t.initTabs({instanceId:e.getCurrentInstanceId()})}],resolveLoading:["Settings","resolveDataSources",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/search/:query/:tab?isQI",views:{content:{controller:"SearchResultsController",controllerAs:"vm",templateUrl:"/client/front-office/modules/search/views/search-results.html"}}}).state("app.front.content-create",{data:{action:"create",designer:!0},params:{template:{squash:!0,value:null}},resolve:{resolveModules:["$injector","$ocLazyLoad","Translation","Utils","resolveLoadingFront",function(e,t,n,r,i){return angular.noop(i),S(e,t,n,r)}],resolveTemplate:["$stateParams","Template","resolveModules",function(e,t,n){return angular.noop(n),!e.template||Object(b.f)(t.getAsync({uid:e.template}))}],resolveCustomContentType:["$q","$stateParams","CustomContentType","resolveModules",function(e,t,n,r){return angular.noop(r),e((function(e,r){n.getItem(t.customContentType,e,r,void 0,!0)}))}],resolveLoading:["Settings","resolveCustomContentType","resolveTemplate",function(e,t,n){return angular.noop(t,n),e.endLoading(),!0}]},url:"/content/create/:type/:customContentType/{template}?parentNavUuid",views:{content:{controller:"ContentFrontController",controllerAs:"vm",templateUrl:"/client/front-office/modules/content/common/views/content-front.html"},"sidebar@app":{controller:"ContentSidebarController",controllerAs:"vm",templateUrl:"/client/back-office/modules/content/common/views/content-sidebar.html"}}}).state("app.front.content-create-without-custom-type",{data:{action:"create",designer:!0},params:{contentType:"content",template:{squash:!0,value:null}},resolve:{resolveModules:["$injector","$ocLazyLoad","Translation","Utils","resolveLoadingFront",function(e,t,n,r,i){return angular.noop(i),S(e,t,n,r)}],resolveTemplate:["$stateParams","Template","resolveModules",function(e,t,n){angular.noop(n);var r=e.contentType||"content";return!!E()(["content","community"],r)&&("content"!==r||(!e.template||Object(b.f)(t.getAsync({uid:e.template}))))}],resolveCustomContentType:angular.noop,resolveLoading:["Settings","resolveTemplate",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/:contentType/create/:type/{template}?fromCommunity",views:{content:{controller:"ContentFrontController",controllerAs:"vm",templateUrl:"/client/front-office/modules/content/common/views/content-front.html"},"sidebar@app":{controller:"ContentSidebarController",controllerAs:"vm",templateUrl:"/client/back-office/modules/content/common/views/content-sidebar.html"}}}).state("app.front.content-edit",{data:{action:"edit",designer:!0},params:{contentType:"content",previousSlug:void 0,subTemplate:{squash:!0,value:null}},resolve:{resolveModules:["$injector","$ocLazyLoad","Translation","Utils","resolveLoadingFront",function(e,t,n,r,i){return angular.noop(i),S(e,t,n,r)}],resolveContent:["$state","$stateParams","Community","CommunityTemplates","Content","Template","resolveModules",function(e,t,n,r,i,a,o){if(angular.noop(o),!E()(["content","community"],t.contentType))return!1;var s,c,l="community"===t.contentType,u="edit"===h()(e.$current,"self.data.action"),d=i,p=a;if(l&&(d=n,p=r),t.key?s=t.key:e.go("app.front.404",{},{inherit:!1}),angular.isDefined(t.isTemplate)&&"true"===t.isTemplate)c=p.getAsync({uid:s});else{if(l&&h()(d.getCurrent(),"uid")===s&&u)return!0;c=d.getAsync({action:"PAGE_EDIT",uid:s}),l&&c.$promise.then((function(e){n.setCurrent(e),i.setCurrent(e)}))}return Object(b.f)(c)}],resolveCustomContentType:["$q","$stateParams","Content","CustomContentType","Template","resolveContent",function(e,t,n,r,i,a){angular.noop(a);var o,s="community"===t.contentType;if(s)return!0;o=angular.isDefined(t.isTemplate)&&"true"===t.isTemplate?i.getCurrent():n.getCurrent();var c=h()(o,"customContentType");return!!angular.isUndefinedOrEmpty(c)||e((function(e,t){r.getItem(c,e,t,void 0,!0)}))}],resolveLoading:["Settings","resolveCustomContentType",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/:contentType/edit/:key/:subTemplate?isTemplate&postId",views:{content:{controller:"ContentFrontController",controllerAs:"vm",templateUrl:"/client/front-office/modules/content/common/views/content-front.html"},"sidebar@app":{controller:"ContentSidebarController",controllerAs:"vm",templateUrl:"/client/back-office/modules/content/common/views/content-sidebar.html"}}}).state("app.front.content-duplicate",{data:{action:"edit",designer:!0},resolve:{resolveModules:["$injector","$ocLazyLoad","Translation","Utils","resolveLoadingFront",function(e,t,n,r,i){return angular.noop(i),S(e,t,n,r)}],resolveDuplicate:["$state","$stateParams","Config","Content","Customer","Header","Instance","Translation","Template","resolveModules",function(e,t,n,r,i,a,o,s,c,l){angular.noop(l),angular.isUndefinedOrEmpty(t.key)&&e.go("app.front.404",{},{inherit:!1});var u,d=i.getCustomer(),p=angular.isDefined(d)&&"veolia"===d.slug;return u=angular.isDefined(t.isTemplate)&&"true"===t.isTemplate?angular.isDefinedAndFilled(t.fromContent)&&"true"===t.fromContent?r.getAsync({action:p?"PAGE_READ":"PAGE_EDIT",uid:t.key},(function(){c.duplicate(r.getCurrent(),t)})):c.getAsync({uid:t.key},(function(e){c.duplicate(e,t)})):r.getAsync({action:p&&t.status!==n.CONTENT_STATUS.DRAFT.value?"PAGE_READ":"PAGE_EDIT",uid:t.key},(function(){Object(b.c)(t,n,r,a,o,s,p)})),Object(b.f)(u)}],resolveCustomContentType:["$q","$stateParams","Content","CustomContentType","Template","resolveDuplicate",function(e,t,n,r,i,a){var o;angular.noop(a),o=angular.isDefined(t.isTemplate)&&"true"===t.isTemplate?i.getCurrent():n.getCurrent();var s=h()(o,"customContentType")||t.customContentType;return!!angular.isUndefinedOrEmpty(s)||e((function(e,t){r.getItem(s,e,t,void 0,!0)}))}],resolveLoading:["Settings","resolveCustomContentType",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/content/duplicate/:key?instanceId&customContentType&contentType&isTemplate&fromContent&status",views:{content:{controller:"ContentFrontController",controllerAs:"vm",templateUrl:"/client/front-office/modules/content/common/views/content-front.html"},"sidebar@app":{controller:"ContentSidebarController",controllerAs:"vm",templateUrl:"/client/back-office/modules/content/common/views/content-sidebar.html"}}})}(p),function(e){e.state("app.front",{abstract:!0,resolve:{resolveLoadingFront:["resolveInitialSetting",function(e){return angular.noop(e),!0}]},views:{footer:{controller:"FooterController",controllerAs:"vm",templateProvider:["$http","$templateCache","ConfigTheme","Instance",function(e,t,n,r){var i=Object(b.d)(r,"layout/modules/footer/views/footer.html",n.HAS_CUSTOM_FOOTER,"common");return Object(W.b)()?null:Object(b.e)(e,t,i)}]},header:{controller:"HeaderController",controllerAs:"vm",templateProvider:["$http","$templateCache","ConfigTheme","Instance",function(e,t,n,r){var i=Object(b.d)(r,"layout/modules/header/common/views/header.html",n.HAS_CUSTOM_HEADER,"common");return Object(W.b)()?null:Object(b.e)(e,t,i)}]},main:{controller:"FrontController",controllerAs:"vm",templateProvider:["$http","$templateCache","Content","ConfigTheme","Instance",function(e,t,n,r,i){var a;return a=Object(W.b)()?Object(b.d)(i,"layout/modules/front/views/front-social-advocacy-public-template.html",r.HAS_CUSTOM_FRONT):Object(b.d)(i,"layout/modules/front/views/front.html",r.HAS_CUSTOM_FRONT),Object(b.e)(e,t,a)}]}}}).state("app.front.profile",{params:{subscriptionType:{squash:!0,value:null},view:{squash:!0,value:null}},reloadOnSearch:!1,resolve:{resolveContent:["$state","$stateParams","$timeout","SocialProfile","User","UserDirectoryFactory","UserDirectory","resolveLoadingFront",function(e,t,n,r,i,a,o,s){if(angular.noop(s),angular.isUndefinedOrEmpty(t.userIdentifier))return n((function(){e.go("app.front.404")})),!1;var c="me"===t.userIdentifier?h()(i.getConnected(),"uid"):t.userIdentifier,l=o.getDefaultUserDirectory(i.getConnected()).id;return Object(b.f)(a.get({contentId:l,uid:c},(function(e){r.setCurrent(e)}),(function(){r.setCurrent(void 0)})))}],resolveLoading:["Settings","resolveContent",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/".concat(B.a,"/profile/:userIdentifier/:view/:subscriptionType?").concat(G.d.join("&")),views:{content:{controller:"SocialProfileController",controllerAs:"vm",templateUrl:"/client/front-office/modules/social/profile/views/social-profile.html"}}}).state("app.front.404",{resolve:{resolveLoading:["Settings","resolveLoadingFront",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/404",views:{content:{templateUrl:"/client/front-office/modules/error-pages/views/404.html"}}}).state("app.front.community",{data:{action:"get",designer:!1},params:{identifier:{squash:!0,value:null},slug:{value:null},view:{squash:!0,value:null}},reloadOnSearch:!1,resolve:{resolveContent:["$q","$stateParams","Analytics","Community","CommunityConstant","Content","Customer","Instance","Settings","Translation","User","resolveLoadingFront",function(e,t,n,r,i,a,o,s,c,l,u,d){var p;angular.noop(d);var f=a.getCurrent();if(c.is.firstContentLoader&&angular.isDefinedAndFilled(f))a.setViewMode("locked"),a.setAction("get"),r.setViewMode("default"),r.setCurrent(f),p=e.resolve(f),c.is.firstContentLoader=!1;else{var g="",m=angular.extend(angular.fastCopy(i.PROJECTION.GET),{comments:!0,likes:!0});if(angular.isDefinedAndFilled(t.slug)){var v=t.slug.split("/");g=v[v.length-1]}var h={action:"PAGE_READ",lang:angular.isDefinedAndFilled(t.hl)?t.hl:l.getLang("current"),slug:g},y=s.getCurrentInstanceId();if(angular.isDefinedAndFilled(y))h.instance=y;else{var E=o.getCustomerSlug(!0),b=E.isDomain?"customerHost":"customerSlug";E=E.slug,h[b]=E,h.instanceSlug=s.getCurrentInstanceSlug()}p=r.getAsync(h,(function(){a.setViewMode("locked"),a.setAction("get"),r.setViewMode("default"),a.setCurrent(r.getCurrent())}),void 0,void 0,m).$promise}return!!p&&(n.handleTaggingMap("read-content",void 0,{content:p,user:u.getConnected()}),p)}],resolveLoading:["Settings","resolveContent",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/".concat(B.a,"/community/:slug/:view/:identifier"),views:{content:{controller:"CommunityController",controllerAs:"vm",templateUrl:"/client/front-office/modules/communities/community/views/community.html"}}}).state("app.front.old-community",{params:{identifier:{squash:!0,value:null},slug:{value:null},type:{value:null},view:{squash:!0,value:null}},redirectTo:"app.front.community",resolve:{resolveLoading:["Settings","resolveLoadingFront",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:"/".concat(B.a,"/{type:group|workspace}/:slug/:view/:identifier")}).state($.c.legacyId,{params:{permissions:[b.b.superAdmin,O.b.CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES],slug:{value:"default"},view:{value:"feed",squash:!0}},resolve:{resolveLoading:["Settings","resolveLoadingFront",function(e,t){return angular.noop(t),e.endLoading(),!0}]},url:$.c.path,views:{content:{controller:"SocialAdvocacyController",controllerAs:"vm",templateUrl:"/client/front-office/modules/social-advocacy/views/social-advocacy-dashboard.html"}}}).state("app.front.content-get",{data:{action:"get",designer:!1},params:{customData:null,slug:{squash:!0,value:null}},resolve:{resolveContent:["$q","$stateParams","Analytics","Content","Customer","Instance","Settings","Translation","User","resolveLoadingFront",function(e,t,n,r,i,a,o,s,c,l){var u;if(angular.noop(l),o.is.firstContentLoader&&angular.isDefinedAndFilled(r.getCurrent()))u=e.resolve(r.getCurrent()),o.is.firstContentLoader=!1;else{var d;if(angular.isDefinedAndFilled(t.slug)){var p=t.slug.split("/");d=p[p.length-1]}else d="";var f={action:"PAGE_READ",lang:angular.isDefinedAndFilled(t.hl)?t.hl:s.getLang("current"),slug:d},g=a.getCurrentInstanceId();if(angular.isDefinedAndFilled(g))f.instance=g;else{var m=i.getCustomerSlug(!0),v=m.isDomain?"customerHost":"customerSlug";m=m.slug,f[v]=m,f.instanceSlug=a.getCurrentInstanceSlug()}u=r.getAsync(f).$promise}return!!angular.isObject(u)&&(n.handleTaggingMap("read-content",void 0,{content:u,user:c.getConnected()}),u)}],resolveDirectory:["Content","Directory","InitialSettings","resolveContent",function(e,t,n,r){if(angular.noop(r),e.getCurrent().type===n.CONTENT_TYPES.DIRECTORY){var i=t.get({uid:e.getCurrent().externalKey},(function(e){t.setCurrent(e)}));return Object(b.f)(i)}return!0}],resolveContentProcessing:["$state","Content","ContentTemplate","InitialSettings","Translation","resolveContent",function(e,t,n,r,i,a){angular.noop(a);var o=t.getCurrent();return o.type===r.CONTENT_TYPES.COMMUNITY?(e.go("app.front.community",{slug:i.translate(o.slug),type:o.type}),!1):(n.applyUserContent(o),!0)}],resolveCustomContentType:angular.noop,resolveLoading:["Settings","resolveDirectory","resolveLoadingFront",function(e,t,n){return angular.noop(t,n),e.endLoading(),!0}]},url:"/{slug:path}?group",views:{content:{controller:"ContentFrontController",controllerAs:"vm",templateUrl:"/client/front-office/modules/content/common/views/content-front.html"}}})}(p);angular.forEach([{alias:"smiley",beginning:":",middle:"-",end:")"},{alias:"smile",beginning:":",middle:"-",end:"D"},{alias:"neutral_face",beginning:":",middle:"-",end:"|"},{alias:"stuck_out_tongue",beginning:":",middle:"-",end:"p"},{alias:"stuck_out_tongue_closed_eyes",beginning:":",middle:"-",end:"P"},{alias:"laughing",beginning:"^",middle:"",end:"^"},{alias:"blush",beginning:":",middle:"-",end:"$"},{alias:"kissing_heart",beginning:":",middle:"-",end:"*"},{alias:"wink",beginning:";",middle:"-",end:")"},{alias:"worried",beginning:":",middle:"-",end:"("},{alias:"open_mouth",beginning:":",middle:"-",end:"o"},{alias:"hushed",beginning:":",middle:"-",end:"O"},{alias:"cry",beginning:":'",middle:"-",end:"("},{alias:"joy",beginning:":'",middle:"-",end:")"},{alias:"astonished",beginning:"O",middle:"_",end:"O"},{alias:"astonished",beginning:"o",middle:"_",end:"O"},{alias:"astonished",beginning:"O",middle:"_",end:"o"},{alias:"astonished",beginning:"o",middle:"_",end:"o"},{alias:"sunglasses",beginning:"8",middle:"-",end:")"},{alias:"innocent",beginning:"O:",middle:"-",end:")"}],(function(e){if(angular.isDefined(e)&&angular.isDefinedAndFilled(e.alias)){var t=e.beginning||":",n=e.end||")",r=angular.isDefined(e.middle)?e.middle:"-";y.addAlias(e.alias,t+r+n)}})),C.templateUrl="/client/front-office/modules/hotkeys/views/hotkeys.html"}function s(e,t,n,i,a,o,s,c,l,u,d,p,f,g,m,v,y,C,T,S,I,_,A,w,D,L,N){function F(e){if(o.loginAttempt>5){if(L.loginCancelled(),i.path().indexOf("login")<0){var t="";if(R()(i.path(),"/a/")&&(t="/a/".concat(m.getCustomerSlug(!1))),t+="/".concat(y.getCurrentInstanceSlug()),t+="/login",A.isConnected()||e){var n=i.url();i.url(i.path()),e?i.search("error","NEED_LOGIN"):S.error(_.translate("ERROR_NOT_AUTHORIZED")),i.search("r",n),i.path(t)}}}else L.loginConfirmed(void 0,(function(e){return angular.isDefined(e)&&angular.isDefined(e.headers)&&angular.isDefinedAndFilled(A.getToken())&&(e.headers.Authorization="Bearer ".concat(A.getToken())),e}))}function U(e,t,n,r,i,a){angular.element(".header-main-nav .main-nav").addClass("main-nav--is-content-loading"),"app.front.content-edit"===t.name?t.resolve.resolveContentPermissions=["Config","Content","LxNotificationService","Template","Translation","UserAccess","resolveContent",function(e,t,a,o,c,l,u){var d;angular.noop(u),d=angular.isDefined(n.isTemplate)&&"true"===n.isTemplate?o.getCurrent():t.getCurrent();var p={checkContent:!0,customContentTypeId:h()(d,"customContentType")};return!!(l.isEditor()||l.isUserAllowed("CUSTOM_CONTENT_EDIT",p)||l.isUserAllowed("CUSTOM_CONTENT_PUBLISH",p)||l.isUserAllowed("CUSTOM_CONTENT_DELETE",p)||l.isUserAllowed("CUSTOM_CONTENT_ARCHIVE",p)||h()(d,"type")!==e.AVAILABLE_CONTENT_TYPES.DIRECTORY||l.isUserAllowed("DIRECTORY_EDIT"))||(""===r.name?(s.go("app.front.404"),a.error(c.translate("ERROR_NOT_AUTHORIZED"))):(s.go(r,i),a.error(c.translate("ERROR_NOT_AUTHORIZED"))),!1)}]:angular.isDefinedAndFilled(t.redirectTo)&&(e.preventDefault(),s.go(t.redirectTo,n)),angular.isDefinedAndFilled(h()(n,"permissions"))&&(t.resolve.resolveConnectedUser=["$q","User","resolveInitialSetting",function(e,t,r){return angular.noop(r),e((function(r,i){e.all([t.connectedUserDeferred.promise,D.connectedUserDeferred.promise]).then((function(){if(!function(e){return P()(e.permissions,(function(e){switch(e){case b.b.instanceAdmin:return A.isInstanceAdmin();case b.b.superAdmin:return A.getConnected().isSuperAdmin;case O.b.CAN_ACCESS_SOCIAL_ADVOCACY_BASIC_FEATURES:return D.canAccessSocialAdvocacyBasicFeatures();case O.b.CAN_MANAGE_SOCIAL_ADVOCACY_PROGRAM_MANAGERS:return D.canManageSocialAdvocacyProgramManagers();case O.b.CAN_MANAGE_SOCIAL_ADVOCACY_AMBASSADORS:return D.canManageSocialAdvocacyAmbassadors();case O.b.CAN_MANAGE_SOCIAL_ADVOCACY_TOPICS:return D.canManageSocialAdvocacyTopics();case O.b.CAN_MANAGE_SOCIAL_NETWORK_CONFIGURATIONS:return D.canManagePlatformSocialNetworks();default:return!1}}))}(n))return i("ERROR_NOT_AUTHORIZED"),u((function(){s.go("app.front.content-get",n)})),void S.error(_.translate("ERROR_NOT_AUTHORIZED"));r(t.getConnected())}))}))}]),o.$broadcast("cancel-header-autoplay"),C.stateChangeStart(e,t,n,r,i,a),u((function(){o.$broadcast("main-nav-front-state-change-start")})),o.$broadcast("lx-dialog__close")}d.lumappsPerformances=d.lumappsPerformances||{};var M=d.lumappsPerformances;M.angularRunning=Date.now();var x=h()(window,"performance.timing.navigationStart",0);if(M.angularRun=M.angularRunning-x,M.angularBootstrap=M.angularBootstraping-x,M.bodyInterpretation=M.bodyInterpreting-x,M.bodyInterpreted=M.bodyEnd-x,angular.isDefined(M.loaderDisplaying)&&(M.firstPaint=M.loaderDisplaying-x),k.FRONT_OFFICE._config=k.FRONT_OFFICE.config,k.FRONT_OFFICE.config=function(){return n.invoke(arguments[0]),k.FRONT_OFFICE},k.FRONT_OFFICE._run=k.FRONT_OFFICE.run,k.FRONT_OFFICE.run=function(){n.invoke(arguments[0])},o.Layout=C,o.BUILD_TIME=BUILD_TIME,o.BUILD_FRONTEND_VERSION=BUILD_FRONTEND_VERSION,o.BUILD_BACKEND_VERSION=BUILD_BACKEND_VERSION,o.BUILD_VERSION_NUMBER=BUILD_VERSION_NUMBER,o.HAUSSMANN_CELL=HAUSSMANN_CELL,o.loginAttempt=0,o.onLoginRequired=o.$on("event:auth-loginRequired",(function(e,t){o.loginAttempt++;var n=E()(h()(t,"config.url",""),"/content/get")||E()(h()(t,"config.url",""),"/community/get");A.refreshToken((function(e){angular.isDefinedAndFilled(e)?o.loginAttempt=0:o.loginAttempt=10,F(n)}),(function(){o.loginAttempt=10,F(n)}))})),o.$on("$locationChangeStart",(function(e){return!R()(i.path(),"/newsletter")||(e.preventDefault(),d.location.href=i.absUrl(),!1)})),o.$on("$stateChangeStart",(function(e,t,n,i,a,c){var l=!1,u=Boolean("template"===a.type||a.isTemplate),d=r(g,f,i.name,v.CONTENT_TYPES,u);return(!d||"app.front.content-create-without-custom-type"===t.name&&"app.front.content-create"===i.name)&&(U(e,t,n,i,a,c),l=!0),!l&&o.documentUnsavedChangesChecked&&(o.documentUnsavedChangesChecked=!1,l=!0),l?(h()(t,"data.designer")||g.setAction("get"),!0):(e.preventDefault(),s.go(i,a),o.unsavedNotificationConfirmShowed||(o.unsavedNotificationConfirmShowed=!0,S.confirm(_.translate("DISCARD_UNSAVED_CHANGES_CONFIRM"),_.translate("DISCARD_UNSAVED_CHANGES_CONFIRM_DESC"),{cancel:_.translate("CANCEL"),ok:_.translate("OK")},(function(r){o.unsavedNotificationConfirmShowed=!1,r&&(o.documentUnsavedChangesChecked=!0,U(e,t,n,i,a,c),s.go(t.name,n))}))),!1)})),o.$on("$stateChangeSuccess",(function(e,t,n,r,i,a){var s="app.front.search"===t.name,c=document.getElementById("custom-css-for-instance");c&&(c.disabled=t.name.includes("app.admin")),s||(T.query=void 0),C.stateChangeSuccess(e,t,n,r,i,a),h()(r,"data.designer",!1)&&_.getLang("current")!==_.inputLanguage&&I.init(),u((function(){o.$broadcast("main-nav-front-state-change-success"),o.$broadcast("is-main-nav-item-active"),C.computeIsScrolling()})),p.sendGTMEvent(t.name),N.store.dispatch(Object(j.a)(t.name))})),o.$on("$stateChangeError",(function(e,t,n,r,i,o){angular.isUndefinedOrEmpty(o)||(angular.isDefined(o)&&404===o.status&&"/service/user/getConnected"!==h()(o,"config.url")&&s.go("app.front.404",n),angular.isObject(o)?(angular.isDefined(o.message)&&a.err(o.message),angular.isDefined(o.stack)&&a.err(o.stack)):a.err(o))})),d.onbeforeunload=function(e){var t=Boolean("template"===c.type||c.isTemplate);if(r(g,s.current.name,v.CONTENT_TYPES,t))return e.preventDefault(),e.returnValue=_.translate("DISCARD_UNSAVED_CHANGES_CONFIRM"),e.returnValue},w.isLocalEnvironment()){angular.forEach([],(function(e){t.get(v.PUBLIC_PATH_PREFIX+e).then((function(t){angular.isDefinedAndFilled(t)&&l.put(e,t.data)}))}))}o.$safeApply=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:angular.noop,t=this.$root.$$phase;"$apply"!==t&&"$digest"!==t?this.$apply(e):e()},angular.element(window).on("hashchange",(function(){angular.element(document).scrollTop(angular.element(document).scrollTop()-e.yOffset)}))}n.r(t);var c=n(6),l=n.n(c),u=n(8),d=n.n(u),p=n(10),f=n.n(p),g=n(521),m=n.n(g),v=n(4),h=n.n(v),y=n(17),E=n.n(y),b=n(89),O=n(96),C=n(425),T=function(e){["Goal","QuestTemplate","Reward","Season","UserGoalResult"].forEach((function(t){return e.get(t).init()}))},S=function(){var e=f()(l.a.mark((function e(t,r,i,a){var o,s,c,u,p,f,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!1,s=Promise.all([n.e("common"),n.e("back-office")]).then(n.bind(null,3341)),c=n.e("back-office_templates").then(n.bind(null,3343)),e.next=5,Promise.all([s,c]);case 5:return u=e.sent,p=d()(u,1),f=p[0],g=angular.module("AppTemplates")._runBlocks,o||(g.forEach((function(e){t.invoke(e)})),o=!0),e.prev=10,e.next=13,Promise.all([r.inject(f.BACK_OFFICE.name),r.inject("Services"),r.inject("Constants"),r.inject("Controllers")]);case 13:return T(t),e.abrupt("return",Object(C.loadFroala)(t,r,i,a));case 17:throw e.prev=17,e.t0=e.catch(10),new Error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),I=n(105),_=n(21),A=n.n(_),w=n(7),D=n.n(w),L=n(217),P=n.n(L),N=n(107),R=n.n(N),j=n(743),k=n(468),F=n(28),U=n.n(F),M=n(259),x=n.n(M),$=n(247),B=n(316),W=n(439),G=n(208),Y=n(35);s.$inject=["$anchorScroll","$http","$injector","$location","$log","$rootScope","$state","$stateParams","$templateCache","$timeout","$window","Analytics","CommunityTemplates","Content","Customer","InitialSettings","Instance","Layout","LegacySearch","LxNotificationService","MainNav","Translation","User","Utils","SocialAdvocacy","authService","ReduxStore"],o.$inject=["$analyticsProvider","$compileProvider","$controllerProvider","$httpProvider","$localStorageProvider","$locationProvider","$provide","$rootScopeProvider","$sceDelegateProvider","$sessionStorageProvider","$stateProvider","$translateProvider","$urlMatcherFactoryProvider","$urlRouterProvider","emojiConfigProvider","hotkeysProvider"];var H=["app.front.content-create","app.front.content-create-without-custom-type","app.front.content-edit","app.front.content-duplicate"],K={},V=[];k.FRONT_OFFICE.config(o).run(s)}]);
//# sourceMappingURL=front-office_app.js.map