(window.webpackJsonp=window.webpackJsonp||[]).push([["widget-post-list-block-post"],{3340:function(e,t,n){var a=n(1181),i=n(1180),o=n(1182);e.exports=function(e){return a(e)||i(e)||o()}},3345:function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t);var g,b,f,O=n(0),h=n.n(O),E=n(75),v=n.n(E),y=n(15),L=n(14),N=n.n(L),T=n(3),k=n.n(T),S=n(8),j=n.n(S),x=n(1),C=n(171),I=n(12),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customTriggerElem,n=e.delay,a=void 0===n?0:n,i=e.onEnterCallback,o=e.onLeaveCallback,r=Object(O.useState)(),c=j()(r,2),l=c[0],s=c[1],u=Object(O.useState)(!1),m=j()(u,2),d=m[0],p=m[1],g=t||l,b=Object(O.useCallback)((function(){setTimeout((function(){p(!0),i&&i()}),a)}),[a,i]),f=Object(O.useCallback)((function(){setTimeout((function(){p(!1),o&&o()}),a)}),[a,o]);return Object(O.useEffect)((function(){(null==g?void 0:g.disabled)&&(f(),g.removeEventListener("mouseenter",b),g.removeEventListener("mouseleave",f))}),[g,f,b]),Object(O.useEffect)((function(){if(g)return g.addEventListener("mouseenter",b),g.addEventListener("mouseleave",f),function(){g.removeEventListener("mouseenter",b),g.removeEventListener("mouseleave",f)}}),[f,b,g]),{isHovered:d,setTriggerElem:s}},w=n(744),A=n(16),_=n.n(A),P=n(18),M=n.n(P),D=n(11),B=n(192),F=n(545),z=n(33),U=n.n(z),G=n(6),H=n.n(G),K=n(10),V=n.n(K),W=n(7),Y=n.n(W),q=n(43),Q=n(45),X=n(58),J=n(100),Z=n(540),$=n(935);!function(e){e.user="user",e.content="content"}(g||(g={})),function(e){e.community="community",e.content="content"}(b||(b={})),function(e){e.initial="initial",e.idle="idle",e.loading="loading",e.changing="changing",e.error="error"}(f||(f={}));var ee,te,ne=new Q.c({path:"social/subscription"}),ae=function(e){var t,n=e.resourceType,a=e.resourceId,i=e.cacheFirst,o=(t={},k()(t,n===g.user?"followingUserKey":"followingContentKey",a),k()(t,"status","LIVE"),t);return i?ne.getCacheFirst("/get",X.a.MEMORY,J.a.HIGH,{params:o}):ne.get("/get",{params:o})},ie=function(e){var t=e.resourceType,n=e.resourceId,a=e.notify,i=void 0!==a&&a;return t===g.user?Object(Z.c)(n,{notify:i}):Object($.a)(n,{notify:i})},oe=function(e){var t=e.resourceType,n=e.resourceId;return t===g.user?Object(Z.f)(n):Object($.d)(n)},re={status:f.initial,isSubscribed:!1},ce=Object(q.a)({domain:"useSubscriptions",initialState:re,reducers:{fetchSubscription:function(e){Y()(e,"status",f.loading)},toggleSubcription:function(e){Y()(e,"status",f.changing)},setSubscriptionStatus:function(e,t){Y()(e,"status",f.idle),Y()(e,"isSubscribed",t.payload)},fetchSubscriptionFailure:function(e){Y()(e,"status",f.error)}}}),le=ce.actions,se=ce.reducer,ue=function(e){var t=e.resourceType,n=void 0===t?g.content:t,i=e.resourceId,o=e.autoFetch,r=e.isSubscribed,c=void 0!==r&&r,l=Object(O.useReducer)(se,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},re,{isSubscribed:c})),s=j()(l,2),u=s[0],m=s[1],d=Object(O.useCallback)(V()(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=11;break}return e.prev=1,m(le.fetchSubscription()),e.next=5,ae({resourceType:n,resourceId:i,cacheFirst:!0});case 5:m(le.setSubscriptionStatus(!0)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),404===(null===e.t0||void 0===e.t0||null===(t=e.t0.response)||void 0===t?void 0:t.status)?m(le.setSubscriptionStatus(!1)):m(le.fetchSubscriptionFailure());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[m,n,i]),p=Object(O.useCallback)(V()(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.status===f.changing){e.next=17;break}if(m(le.toggleSubcription()),e.prev=2,!u.isSubscribed){e.next=9;break}return e.next=6,oe({resourceId:i,resourceType:n});case 6:m(le.setSubscriptionStatus(!1)),e.next=12;break;case 9:return e.next=11,ie({resourceId:i,resourceType:n});case 11:m(le.setSubscriptionStatus(!0));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(le.setSubscriptionStatus(u.isSubscribed));case 17:case"end":return e.stop()}}),e,null,[[2,14]])}))),[i,n,u.isSubscribed,u.status]);return Object(O.useEffect)((function(){u.status===f.initial&&o&&i&&d()}),[u.status,d,o,i]),{status:u.status,isSubscribed:u.isSubscribed,toggleSubscription:p,fetchResourceSubscription:d}},me=n(81),de=n(268),pe=function(e){var t=e.isSelected,n=M()(e,["isSelected"]),a=Object(y.c)(),i=a.translateKey,o=R(),r=o.isHovered,c=o.setTriggerElem,l=i(t?r?"GLOBAL.UNFOLLOW":"GLOBAL.FOLLOWED":"GLOBAL.FOLLOW");return h.a.createElement(x.Tooltip,{label:i(t?"FRONT.UNFOLLOW_HELP_TEXT":"FRONT.FOLLOW_HELP_TEXT")},h.a.createElement(x.Button,_()({"aria-label":i(t?"GLOBAL.UNFOLLOW":"GLOBAL.FOLLOW"),ref:c,emphasis:x.Emphasis.medium,isSelected:t,leftIcon:t&&(r?I.L:I.A)||void 0},n),l))},ge=function(e){return h.a.createElement(me.b,_()({},e,{type:me.a.RECTANGLE,style:{height:"24px",width:"90px",margin:"0",borderRadius:"2px"}}))},be=function(e){var t=e.status,n=e.isSubscribed,a=e.className,i=M()(e,["status","isSubscribed","className"]);switch(t){case f.loading:return h.a.createElement(ge,{className:a});case f.idle:case f.changing:return h.a.createElement(pe,_()({className:a,isSelected:n,disabled:t===f.changing,size:x.Size.s},i));case f.error:case f.initial:default:return null}},fe=n(80),Oe=n(206),he=function(e){return h.a.createElement(me.b,_()({},e,{type:me.a.RECTANGLE,style:{height:"16px",width:"90px",margin:"0",borderRadius:"2px"}}))},Ee=function(e){var t=e.userId,n=Object(y.c)(),a=n.translateKey,i=Object(fe.l)(),o=i.getUrl;return h.a.createElement(x.Button,{href:o(Object(Oe.f)({userId:t})),emphasis:x.Emphasis.low,color:"primary",size:x.Size.s},a("FRONT.USER.PROFILE.MORE_INFO.LINK"))},ve=function(e){var t=e.userLoading,n=e.showFollow,a=e.useSubscriptionStatus,i=e.isSubscribed,o=e.toggleSubscription,r=e.userId;return h.a.createElement(h.a.Fragment,null,h.a.createElement(x.FlexBox,{vAlign:x.Alignment.center,hAlign:x.Alignment.center,orientation:x.Orientation.vertical},r?h.a.createElement(Ee,{userId:r}):t&&h.a.createElement(he,null),n&&h.a.createElement(be,{className:"lumx-spacing-margin-top",status:a,isSubscribed:i,onClick:o})))},ye=n(1120),Le=n(69),Ne=function(e){var t=e.user,n=e.anchorRef,a=e.isDetailsOpen,i=e.profilePicture,o=e.showEmail,r=void 0===o||o,c=e.showFollow,l=void 0!==c&&c,s=e.isLoading,u=void 0!==s&&s,m=e.onMouseEnter,d=e.className,p=void 0===d?"user-card-popover":d,b=e.onClose,E=e.placement,v=ue({resourceType:g.user,resourceId:null==t?void 0:t.id,autoFetch:!1}),y=v.status,L=v.isSubscribed,N=v.toggleSubscription,T=v.fetchResourceSubscription;h.a.useEffect((function(){a&&l&&y===f.initial&&T()}),[l,a,y,T]);var k=Object(O.useMemo)((function(){var e,n,a,i,o,c,l=[];(t.email&&r&&l.push(t.email),null===(e=t.apiProfile)||void 0===e||null===(n=e.organizations)||void 0===n?void 0:n[0].title)&&l.push(null===(o=t.apiProfile)||void 0===o?void 0:o.organizations[0].title);(null===(a=t.apiProfile)||void 0===a||null===(i=a.organizations)||void 0===i?void 0:i[0].department)&&l.push(null===(c=t.apiProfile)||void 0===c?void 0:c.organizations[0].department);return l}),[t,r]),S=i||Object(de.b)(t);return h.a.createElement(x.Popover,{anchorRef:n,isOpen:a,onClose:b,offset:{away:8},placement:E},h.a.createElement("div",{onMouseLeave:function(){b&&b()},onMouseEnter:m},t&&h.a.createElement(x.UserBlock,{name:t.fullName,fields:u?void 0:k,className:p,simpleAction:h.a.createElement(h.a.Fragment,null,u&&h.a.createElement("div",{className:"lumx-spacing-margin-bottom-big"},h.a.createElement(me.b,{type:me.a.RECTANGLE,style:{width:"90px",margin:"-10px auto 4px auto"}}),h.a.createElement(me.b,{type:me.a.RECTANGLE,style:{width:"110px",margin:"0 auto"}})),h.a.createElement(ve,{userLoading:u,showFollow:l,isSubscribed:L,toggleSubscription:N,useSubscriptionStatus:y,userId:t.id})),size:x.Size.l,orientation:x.Orientation.vertical,avatarProps:S?{image:S,alt:t.fullName}:void 0})))},Te=n(208),ke=n(378),Se=n(1011),je=n(32),xe=n(272),Ce=n(34),Ie=Object(Ce.g)(),Re=function(e){var t=e.userId,n=e.fullName,a=e.email,i=e.picture,o=void 0===i?Te.a:i,r=e.isLegacyContext,c=void 0===r?Ie.isLegacyContext:r,l=function(e){var t=e.name,n=e.email,a=e.id,i=e.delay,o=void 0===i?500:i,r=h.a.useState(!1),c=j()(r,2),l=c[0],s=c[1],u=h.a.useState(!1),m=j()(u,2),d=m[0],p=m[1],g=h.a.useState(!1),b=j()(g,2),f=b[0],E=b[1],v=Boolean(n)||Boolean(a),y=h.a.useState({accountType:Le.b.GOOGLE,fullName:t||"",id:a||"",email:n||"",lastName:"",firstName:""}),L=j()(y,2),N=L[0],T=L[1],k=h.a.useCallback((function(){E(!0),Object(ye.b)({email:n,uid:a,cacheFirst:!0}).then((function(e){T(e.data)})).finally((function(){E(!1)}))}),[n,a]),S=function(){s(!0)},x=function(){s(!1)};return Object(O.useEffect)((function(){var e=setTimeout((function(){v&&p(l)}),o);return function(){return clearTimeout(e)}}),[l,v,o]),Object(O.useEffect)((function(){d&&k()}),[k,d]),{onMouseLeave:x,onMouseEnter:S,onUserCardMouseLeave:x,onUserCardMouseEnter:S,isLoadingUser:f,userProfile:N,showUserCard:d}}({id:t,name:n,email:a}),s=l.onMouseEnter,u=l.onMouseLeave,m=l.onUserCardMouseEnter,d=l.onUserCardMouseLeave,p=l.userProfile,g=l.isLoadingUser,b=l.showUserCard,f=Object(fe.l)(),E=f.redirect,v=h.a.useRef(null),y=h.a.useCallback((function(){c?ke.a.redirectToProfile({id:t}):E(Object(Oe.f)({userId:t}))}),[c,E,t]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(Se.a,{ref:v,name:n,size:je.h.m,avatarProps:{image:o,alt:n||""},fields:[a],onMouseEnter:s,onMouseLeave:u,onClick:y}),h.a.createElement(Ne,{showEmail:!0,showFollow:!0,user:p,isDetailsOpen:b,anchorRef:v,profilePicture:o,onClose:d,isLoading:g,onMouseEnter:m,placement:xe.a.BOTTOM_START}))},we=n(154),Ae=function(e){var t=e.isOpen,n=e.isLoading,a=e.users,i=void 0===a?[]:a,o=e.title,r=e.lang,c=e.onClose,l=e.onContentInfiniteScroll,s=Object(O.useRef)(null);return Object(F.a)(s,l||U.a),h.a.createElement(x.Dialog,{size:x.Size.regular,onClose:c,header:h.a.createElement(x.Toolbar,{label:h.a.createElement("span",{className:"lumx-typography-title"},o),after:h.a.createElement(x.IconButton,{emphasis:x.Emphasis.low,icon:I.L,onClick:c,label:""})}),isOpen:t,isLoading:n,contentRef:s},h.a.createElement(x.List,{className:"lumx-spacing-margin-horizontal-huge lumx-spacing-margin-bottom"},i.map((function(e,t){return h.a.createElement(O.Fragment,{key:e.id},0!==t&&h.a.createElement(x.ListDivider,null),h.a.createElement(x.ListItem,{size:x.Size.regular},h.a.createElement(Re,{userId:e.id,fullName:Object(we.a)(e,r),email:e.email,picture:Object(de.b)(e)})))}))))},_e=n(1104),Pe=n(67),Me={fetchUsers:_e.a},De=Object(D.connect)((function(e){var t=Object(Pe.r)(e),n=t.cursor,a=t.isLoading,i=t.hasMore,o=Object(B.a)(e);return{users:Object(Pe.q)(e),cursor:n,isLoading:a,hasMore:i,lang:o}}),Me)((function(e){var t=e.fetchUsers,n=e.isOpen,a=e.requestParams,o=e.cursor,r=e.hasMore,c=M()(e,["fetchUsers","isOpen","requestParams","cursor","hasMore"]);return Object(O.useEffect)((function(){n&&t(a)}),[t,n,a]),h.a.createElement(Ae,_()({isOpen:n,onContentInfiniteScroll:function(){r&&t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{add:!0,cursor:o}))}},c))})),Be=n(1128);!function(e){e.grouped="GROUPED",e.ungrouped="UNGROUPED"}(ee||(ee={})),function(e){e.cover="COVER",e.side="SIDE"}(te||(te={}));var Fe,ze,Ue,Ge,He,Ke;!function(e){e.vertical="VERTICAL",e.horizontal="HORIZONTAL"}(Fe||(Fe={})),function(e){e.under="UNDER",e.inner="INNER"}(ze||(ze={})),function(e){e.regular="REGULAR",e.pictureOnly="PICTURE_ONLY"}(Ue||(Ue={})),function(e){e.post="post"}(Ge||(Ge={})),function(e){e.vertical="VERTICAL",e.horizontal="HORIZONTAL"}(He||(He={})),function(e){e.default="DEFAULT",e.comment="COMMENT"}(Ke||(Ke={}));var Ve="block-reactions",We=function(e){var t,n,a=e.likes,i=void 0===a?0:a,o=e.isLiked,r=e.comments,c=void 0===r?0:r,l=e.onLike,s=e.onComment,u=e.onReply,m=e.commentUrl,d=e.isLikeLoading,p=e.likesList,g=e.onLikeListOpen,b=e.resourceId,f=e.resourceType,E=e.theme,v=void 0===E?x.Theme.light:E,L=e.share,T=e.disabled,S=e.displayOptions,A=void 0===S?{}:S,_=e.canShare,P=Object(y.c)(),M=P.translateKey,D=P.translateAndReplace,B=Object(O.useState)(),F=j()(B,2),z=F[0],U=F[1],G=Object(O.useState)(),H=j()(G,2),K=H[0],V=H[1],W=Object(w.a)(!1),Y=j()(W,4),q=Y[0],Q=Y[2],X=Y[3],J=Object(O.useCallback)((function(){var e;i>0&&(!(null==p?void 0:p.isLoaded)||i!==(null==p||null===(e=p.items)||void 0===e?void 0:e.length))&&g&&g()}),[i,p,g]),Z=R({customTriggerElem:z,delay:200,onEnterCallback:J}),$=Z.isHovered,ee=R({customTriggerElem:K}),te=ee.isHovered,ne=($||te)&&i>0,ae=h.a.useMemo((function(){return{maxResults:10,reactedEntityKey:b,reactedEntityKind:f,status:"ENABLED",fields:"items(firstName,lastName,uid,id),more,callId,cursor",showHidden:!1}}),[b,f]),ie=A.variant,oe=void 0===ie?Ke.default:ie,re=A.buttonSize,ce=A.buttonColor,le=void 0===ce?v===x.Theme.dark?x.ColorPalette.light:x.ColorPalette.dark:ce,se=A.buttonClassName,ue=A.buttonEmphasis,me=void 0===ue?x.Emphasis.low:ue,de=A.showButtonLabels,pe=void 0!==de&&de;return h.a.createElement("div",{className:"".concat(Ve," ").concat(Ve,"--theme-").concat(v)},h.a.createElement(x.Button,{ref:U,className:N()("".concat(Ve,"__like-btn"),(t={},k()(t,"".concat(Ve,"__like-btn--liked"),o),k()(t,"".concat(Ve,"__like-btn--disabled"),d||T),t),se),leftIcon:I.Eb,hasBackground:!1,onClick:l,disabled:d||T,theme:v,"aria-label":D("FRONT.CONTENTS.LIKE_BUTTON.ARIA",{NB:i}),"aria-pressed":o,size:re,color:le,emphasis:me},i.toString()," ",pe&&M(i<=1?"LIKE_BUTTON_LABEL":"LIKE_BUTTON_LABEL_PLURAL")),oe===Ke.default&&h.a.createElement(x.Button,{className:N()("".concat(Ve,"__comment-btn"),se),leftIcon:I.N,hasBackground:!1,onClick:s,href:m,theme:v,"aria-label":D("FRONT.CONTENTS.COMMENT_BUTTON.ARIA",{NB:c||0}),size:re,color:le,emphasis:me,disabled:T},c.toString(),pe&&M(c<=1?"COMMENT_BUTTON_LABEL":"COMMENT_BUTTON_LABEL_PLURAL")),u&&oe===Ke.comment&&h.a.createElement(x.Button,{className:N()("".concat(Ve,"__reply-btn"),se),leftIcon:I.Ac,hasBackground:!1,onClick:u,href:m,theme:v,size:re,color:le,emphasis:me,disabled:T},M("GLOBAL.REPLY")),(null==L?void 0:L.type)===Ge.post&&h.a.createElement(C.a,null,h.a.createElement(Be.a,{canShareToCommunity:_,isExtended:pe,preview:L.preview,color:v===x.Theme.dark?x.ColorPalette.light:x.ColorPalette.dark,disabled:T,size:re})),h.a.createElement(x.Dropdown,{shouldFocusOnOpen:!0,anchorRef:{current:z},isOpen:ne},h.a.createElement("div",{ref:V},h.a.createElement(x.List,{itemPadding:(null==p?void 0:p.isLoaded)?void 0:x.Size.huge},!(null==p?void 0:p.isLoaded)&&h.a.createElement(x.ListItem,null,h.a.createElement(x.Progress,{variant:x.ProgressVariant.circular})),(null==p?void 0:p.isLoaded)&&(null==p||null===(n=p.items)||void 0===n?void 0:n.map((function(e){return h.a.createElement(x.ListItem,{className:"lumx-",size:x.Size.tiny,key:e.fullName},e.fullName)}))),(null==p?void 0:p.isLoaded)&&h.a.createElement(x.ListItem,{className:"".concat(Ve,"__see-all-btn"),size:x.Size.tiny,onItemSelected:X},M("GLOBAL.SEE_ALL"))))),h.a.createElement(C.a,null,h.a.createElement(De,{isOpen:q,title:"".concat(i," ").concat(M("USER_LIST_LIKES")),onClose:Q,requestParams:ae})))};We.displayName="BlockReactions";var Ye=n(1116),qe=n(327),Qe=n(931),Xe=n(791),Je=n(78),Ze="post-image-attachments",$e=function(e){var t,n=e.theme,a=e.images,i=e.onMediaClick,o=e.className;return h.a.createElement("div",{className:N()(o,Ze,k()({},"".concat(Ze,"--single-image"),1===a.length))},1===a.length&&h.a.createElement("div",{className:"".concat(Ze,"__image")},h.a.createElement(x.Thumbnail,{alt:a[0].description||a[0].title||a[0].fileName||"",image:(null===(t=a[0].thumbnail)||void 0===t?void 0:t.url)||a[0].url||"",aspectRatio:x.AspectRatio.original,align:x.Alignment.center,onClick:function(){return i(0)}})),a.length>1&&h.a.createElement(x.Mosaic,{theme:n,thumbnails:a.map((function(e){var t,n,a;return{focusPoint:(null===(t=e.thumbnail)||void 0===t?void 0:t.focalX)&&e.thumbnail.focalY?{x:null===(n=e.thumbnail)||void 0===n?void 0:n.focalX,y:e.thumbnail.focalY}:void 0,image:(null===(a=e.thumbnail)||void 0===a?void 0:a.url)||e.url||"",alt:e.description||e.title||e.fileName||""}})),onImageClick:i}))},et=(n(83),n(42),new Q.c({apiVersion:"v2"}),n(19)),tt=n.n(et),nt=n(126),at=n(28),it=n.n(at),ot=n(87),rt=n.n(ot),ct=n(4),lt=n.n(ct),st=Object(q.a)({domain:"widget",initialState:{entities:{}},reducers:{setWidgets:function(e,t){var n=t.payload;Object.assign(e.entities,rt()(it()(n,(function(e){return r({},e,{state:"loaded"})})),"widgetId"))},setWidget:function(e,t){var n=t.payload;e.entities[n.widgetId]=r({},n,{state:"loaded"})},setWidgetProperties:function(e,t){e.entities[t.payload.widgetId]=Object(nt.a)(e.entities[t.payload.widgetId],t.payload.widgetProperties)},setBlockProperties:function(e,t){var n=lt()(e.entities[t.payload.widgetId],t.payload.path);Object.assign(n,t.payload.properties)},addBlockItems:function(e,t){var n=e.entities[t.payload.widgetId].body,a=n.items,i=[].concat(tt()(a),tt()(t.payload.nextItems));Y()(e.entities[t.payload.widgetId].body,"items",i)}}}),ut=(st.actions,st.reducer,function(){var e=V()(H.a.mark((function e(t,n){var a,i,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.open("","_blank"),e.prev=1,e.next=4,Object(Je.g)({docPath:"provider=haussmann_media/drive=".concat(t,"/resource=").concat(n)});case 4:i=e.sent,o=i.data,a&&o&&o.content&&o.content[0]&&a.open(o.content[0].servingUrl,"_self"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a&&a.close();case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),mt="".concat("","FileAttachmentMultiple"),dt="lumx-file-attachment-multiple",pt={theme:x.Theme.light},gt=function(e){var t=e.community,n=e.files,a=e.className,i=e.theme,o=void 0===i?pt.theme:i,r=M()(e,["community","files","className","theme"]),c=function(e){return function(){t&&e.source===Je.a.HAUSSMANN_MEDIA?ut(t,e.uuid):window.open(e.url,"_blank")}};return h.a.createElement(x.List,_()({className:N()(a,dt,"".concat(dt,"--theme-").concat(o))},r),n.map((function(e,t){var a=e.thumbnail,i=e.icon,r=void 0===i?{icon:I.hb,color:x.ColorPalette.dark}:i,l=e.name,s=e.mimeType,u=s&&!["image/gif","image/svg+xml"].includes(s),m=null==a?void 0:a.image,d=m&&-1!==m.indexOf("https://storage.googleapis.com"),p=d?Object(Je.l)(m,512):Object(Je.m)(m,512),g=u?p:m;return h.a.createElement(O.Fragment,{key:e.uuid},h.a.createElement(x.ListItem,{className:"".concat(dt,"__file"),before:h.a.createElement(x.Thumbnail,_()({alt:l||"",role:"link",variant:x.ThumbnailVariant.rounded,onClick:c(e),tabIndex:0},a,{image:g,size:x.Size.m,aspectRatio:x.AspectRatio.square,fallback:h.a.createElement(x.Icon,_()({icon:""},r,{theme:o,className:N()("".concat(dt,"__file-icon"),r.className),size:x.Size.m}))}))},h.a.createElement(x.Button,{emphasis:x.Emphasis.low,onClick:c(e),className:"".concat(dt,"__link")},l)),t<n.length-1&&h.a.createElement(x.ListDivider,{className:"".concat(dt,"__divider")}))})))};gt.displayName=mt;var bt="block-post-attachments",ft=function(e){var t=e.community,n=e.className,a=e.images,i=e.link,o=e.files,r=e.theme,c=e.isLoading,l=e.onClearAttachments,s=Object(y.c)(),u=s.translateKey,m=a&&a.length||i||o&&o.length,d=h.a.useState(),p=j()(d,2),g=p[0],b=p[1],f=Object(O.useRef)(null),E=i&&i.videoId?i.videoId:Object(Je.i)(null==i?void 0:i.url,Object(Je.j)(null==i?void 0:i.url));return h.a.createElement("div",{className:N()("".concat(bt,"__wrapper"),n)},a&&a.length>0&&h.a.createElement(x.Lightbox,{theme:x.Theme.dark,isOpen:void 0!==g,parentElement:f,onClose:function(){return b(void 0)},closeButtonProps:{label:u("GLOBAL.CLOSE")}},h.a.createElement(x.Slideshow,{theme:x.Theme.dark,activeIndex:g,slideshowControlsProps:{nextButtonProps:{label:u("GLOBAL.NEXT")},previousButtonProps:{label:u("GLOBAL.PREVIOUS")}},fillHeight:!0},a.map((function(e){return e.url&&h.a.createElement(x.SlideshowItem,{key:e.mediaId},h.a.createElement(x.ImageBlock,{image:e.url,align:x.Alignment.center,fillHeight:!0,alt:""}))})))),h.a.createElement(x.FlexBox,{theme:r,className:"".concat(bt,"__types"),orientation:x.Orientation.vertical},Boolean(m)&&!c&&h.a.createElement(h.a.Fragment,null,a&&a.length>0&&h.a.createElement($e,{images:a,onMediaClick:b,theme:r,className:N()("".concat(bt,"__type"),"".concat(bt,"__type--images"))}),o&&o.length>0&&h.a.createElement(x.FlexBox,{theme:r,className:N()("".concat(bt,"__type"),"".concat(bt,"__type--files"))},h.a.createElement(gt,{theme:r,community:null==t?void 0:t.uid,files:o.map((function(e){var t,n=null===(t=e.thumbnail)||void 0===t?void 0:t.url,a=!n;return{mimeType:e.mimeType||"",url:e.url||"",name:e.fileName,thumbnail:a?{}:{image:n},icon:Object(Je.h)({mimeType:e.mimeType}),uuid:e.mediaId,source:e.source}}))})),i&&!E&&h.a.createElement(x.FlexBox,{theme:r,className:N()("".concat(bt,"__type"),"".concat(bt,"__type--link"))},h.a.createElement(x.LinkPreview,{theme:r,title:i.title,description:i.description,link:i.url||"",thumbnailProps:i.image?{image:i.image,alt:i.description}:void 0})),i&&E&&h.a.createElement(x.FlexBox,{theme:r,className:"".concat(bt,"__video-wrapper")},h.a.createElement("iframe",{className:"".concat(bt,"__video-iframe"),title:i.title,src:Object(Je.c)(i.url||""),frameBorder:"0",allowFullScreen:!0})),l&&h.a.createElement(x.FlexBox,{theme:r,orientation:x.Orientation.horizontal},h.a.createElement(x.Button,{className:"lumx-flex-box--margin-auto-left lumx-spacing-margin-vertical-regular",theme:r,size:x.Size.s,emphasis:x.Emphasis.medium,onClick:l,leftIcon:I.L},u("FRONT.ATTACHMENTS.DELETE_ALL")))),c&&h.a.createElement(x.FlexBox,{theme:r,className:"".concat(bt,"__loader-wrapper"),vAlign:x.Alignment.center,hAlign:x.Alignment.center},h.a.createElement(x.Progress,{theme:r}))),h.a.createElement("div",{className:"".concat(bt,"__crawler-loader")}))},Ot=n(555),ht=n(70),Et="comment-body",vt=function(e){var t=e.onTranslate,n=e.goBackToOriginal,a=e.status,i=e.targetLang,o=e.theme,r=Object(y.c)(),c=r.translateKey,l=r.translateAndReplace;return h.a.createElement(h.a.Fragment,null,"ORIGINAL"===a&&h.a.createElement("button",{type:"button",className:N()("".concat(Et,"__translate-btn"),"lumx-link","lumx-link--theme-".concat(o),"lumx-spacing-margin-top-regular","lumx-button","lumx-button--has-left-icon","lumx-typography-caption",{"lumx-link--color-light":o===x.Theme.dark,"lumx-link--color-secondary":o===x.Theme.light}),onClick:t},h.a.createElement(x.Icon,{icon:I.Oc,size:x.Size.xxs,className:"lumx-spacing-margin-right-tiny"}),h.a.createElement("span",null,l("FRONT.AUTO_TRANSLATION.TRANSLATE_ACTION",{lang:c("LANG_".concat(i.toUpperCase()))},i))),"TRANSLATED"===a&&h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center,className:"lumx-spacing-margin-top-regular lumx-typography-caption",wrap:!0},h.a.createElement(x.Icon,{icon:I.Oc,size:x.Size.xxs,color:x.ColorPalette.dark,colorVariant:x.ColorVariant.L2,className:"lumx-spacing-margin-right-tiny"}),h.a.createElement("span",{className:"lumx-color-font-black-L2"},l("FRONT.AUTO_TRANSLATION.TRANSLATION_SUCCESS",{lang:c("LANG_".concat(i.toUpperCase()))},i),","),h.a.createElement("button",{type:"button",className:N()("".concat(Et,"__translate-btn"),"lumx-link","lumx-link--theme-".concat(o),"lumx-button","lumx-spacing-margin-left-tiny",{"lumx-link--color-light":o===x.Theme.dark,"lumx-link--color-secondary":o===x.Theme.light}),onClick:n},h.a.createElement("span",null,c("FRONT.AUTO_TRANSLATION.SEE_ORIGINAL").toLowerCase()))),"LOADING"===a&&h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center,className:"lumx-spacing-margin-top-regular lumx-typography-caption"},h.a.createElement(x.Progress,{className:"lumx-progress--small lumx-spacing-margin-right-tiny"}),h.a.createElement("span",{className:"lumx-color-font-black-L3"},l("FRONT.AUTO_TRANSLATION.TRANSLATION_LOADING",{lang:c("LANG_".concat(i.toUpperCase()))},i))))},yt="comment-body",Lt=function(e){var t,n=e.theme,a=void 0===n?x.Theme.light:n,i=e.mentionsDetails,o=e.content,r=e.parent,c=e.uid,s=e.text,u=e.translatedText,m=e.images,d=void 0===m?[]:m,p=e.files,g=void 0===p?[]:p,b=e.links,f=void 0===b?[]:b,E=e.onTranslate,v=e.locale,L=e.community,T=Object(D.useSelector)(Object(ht.a)("translation")),S=Object(y.c)(),C=S.translateObject,R=S.translateKey,w=h.a.useRef(null),A=h.a.useState(!1),_=j()(A,2),P=_[0],M=_[1],B=P&&void 0===u,F=Object(O.useMemo)((function(){return B?"LOADING":P?"TRANSLATED":"ORIGINAL"}),[B,P]),z=h.a.useMemo((function(){return Object(qe.a)(C(s)||"")}),[s,C]),U=Boolean(d&&d.length),G=Boolean(g&&g.length),H=Boolean(f&&f.length),K=U||G||H,V=function(e){var t=h.a.useState(!0),n=j()(t,2),a=n[0],i=n[1],o=h.a.useState(!0),r=j()(o,2),c=r[0],l=r[1];return h.a.useEffect((function(){e.current&&e.current.clientHeight>100?i(!1):(i(!0),l(!1))}),[e]),{isDetailsOpen:a,hasDetails:c,toggleDetails:function(){i((function(e){return!e}))}}}(w),W=V.hasDetails,Y=V.isDetailsOpen,q=V.toggleDetails;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{ref:w,className:N()("".concat(yt,"__content"),k()({},"".concat(yt,"__content--preview"),!Y)),style:{maxHeight:Y?void 0:100}},"TRANSLATED"!==F&&h.a.createElement(Xe.a,{theme:a,content:z,elements:Ot.a,marks:Ot.b,post:i?{mentionsDetails:i}:{}}),"TRANSLATED"===F&&h.a.createElement("div",{className:N()({"lumx-color-font-white-N":a===x.Theme.dark}),dangerouslySetInnerHTML:{__html:u}})),W&&h.a.createElement("div",{className:N()("".concat(yt,"__see-more-btn-wrapper"),k()({},"".concat(yt,"__see-more-btn-wrapper--preview"),!Y))},h.a.createElement("button",{type:"button",className:N()("lumx-link","lumx-link--theme-".concat(a),"".concat(yt,"__see-more-btn"),{"lumx-link--color-light":a===x.Theme.dark,"lumx-link--color-secondary":a===x.Theme.light}),onClick:function(e){e.stopPropagation(),q()}},h.a.createElement(x.Icon,{size:x.Size.xs,icon:Y?I.G:I.D}),h.a.createElement("span",null," ".concat(R(Y?"GLOBAL.SEE_LESS":"GLOBAL.SEE_MORE"))))),E&&T&&h.a.createElement(vt,{onTranslate:function(){var e;(M(!0),W&&!Y&&q(),void 0===u)&&E({toTranslate:(null===(e=w.current)||void 0===e?void 0:e.innerHTML)||"",contentId:o,parentId:r,uid:c})},goBackToOriginal:function(){M(!1)},status:F,targetLang:v,theme:a}),K&&h.a.createElement(ft,{theme:a,images:d.map((function(e){var t=Object(Je.f)(e,C,v),n=Object(Je.d)(t);return{id:t.fileId,mediaId:t.fileId,url:n||"",thumbnail:(null==e?void 0:e.thumbnail)?{type:"BlockImage",url:C(e.thumbnail)}:void 0}})),files:g.map((function(e){var t=Object(Je.f)(e,C,v),n=Object(Je.d)(t);return{mediaId:e.uid,title:t.name||"",fileName:t.name||"",url:n||"",mimeType:t.mimeType||"",source:e.source,thumbnail:e.thumbnail?{type:"BlockImage",url:C(e.thumbnail)}:void 0}})),link:(null==f?void 0:f[0])?l({},f[0],{image:null===(t=f[0].images)||void 0===t?void 0:t[f[0].thumbnailIndex||0]}):void 0,community:L}))},Nt=n(122),Tt=n(641),kt=n(124),St=n(799),jt="comment-action",xt=Object(D.connect)(null,(function(e,t){return{onMarkAsRelevant:function(){e(Object(Tt.h)(t.comment,t.updateLegacyParentContent))},onEdit:function(){t.onEdit(),e(Nt.a.initEditor(t.comment))},onHide:function(n){e(Object(Tt.f)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.comment,{status:t.status===Qe.a.hide?Qe.a.live:Qe.a.hide}),n))}}}))((function(e){var t=e.comment,n=e.canHide,a=e.canEdit,i=e.canMarkRelevant,o=e.canReport,r=e.status,c=e.markedAsRelevant,l=e.className,s=e.updateLegacyParentContent,u=e.onEdit,m=e.onMarkAsRelevant,d=e.onHide,p=e.onReport,g=Object(y.c)(),b=g.translateKey,f=h.a.useState(!1),E=j()(f,2),v=E[0],L=E[1],T=h.a.useState(!1),S=j()(T,2),C=S[0],R=S[1],w=Object(O.useRef)(null),A=Object(O.useRef)(Object(kt.a)()),_=function(){return L(!v)},P=Object(O.useCallback)((function(){return R(!1)}),[]),M=Object(O.useCallback)((function(){d((function(){s&&s("COMMENT_HIDE"),P()}))}),[P,d,s]),D=r===Qe.a.hide,B=n&&d,F=a&&u,z=o&&p,U=i&&m,G=Object(O.useCallback)((function(){D?d((function(){s&&s("COMMENT_ADD")})):R(!0)}),[D,d,s]);return F||B||U||z?h.a.createElement(h.a.Fragment,null,h.a.createElement(St.a,{isOpen:C,title:b("FRONT.COMMENTS.HIDE.CONFIRM_DIALOG.TITLE"),onCancel:P,onConfirm:M,confirmButtonProps:{disabled:t.isSaveLoading},cancelButtonProps:{disabled:t.isSaveLoading},size:x.Size.tiny},b("FRONT.COMMENTS.HIDE.CONFIRM_DIALOG.DESCRIPTION")),h.a.createElement(x.IconButton,{className:N()(jt,l,k()({},"".concat(jt,"--hovered"),v)),id:"".concat(A.current,"-button"),ref:w,emphasis:x.Emphasis.low,icon:I.U,size:x.Size.s,onClick:_,"aria-haspopup":"true","aria-expanded":v,label:b("FRONT.WIDGET.WIDGET_COMMENTS.MENU.ARIA_LABEL")}),h.a.createElement(x.Dropdown,{className:"".concat(jt,"__menu"),closeOnClick:!0,closeOnClickAway:!0,closeOnEscape:!0,anchorRef:w,isOpen:v,onClose:_,placement:"bottom-end"},h.a.createElement(x.List,{role:"menu","aria-labelledby":"".concat(A.current,"-button")},B&&(!c||c&&D)&&h.a.createElement(x.ListItem,{className:"".concat(jt,"__menuitem ").concat(jt,"__menuitem--hide"),size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:D?I.cb:I.db,size:x.Size.xs}),onItemSelected:G,role:"none",linkProps:{role:"menuitem"}},b(D?"SHOW":"HIDE")),F&&h.a.createElement(x.ListItem,{className:"".concat(jt,"__menuitem ").concat(jt,"__menuitem--edit"),size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:I.nc,size:x.Size.xs}),onItemSelected:u,role:"none",linkProps:{role:"menuitem"}},b("COMMENT_EDIT")),(F||B)&&(z||U)&&!D&&h.a.createElement(x.ListDivider,{role:"separator"}),U&&!D&&h.a.createElement(x.ListItem,{className:"".concat(jt,"__menuitem ").concat(jt,"__menuitem--mark-relevant"),size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:I.B,size:x.Size.xs}),onItemSelected:m,role:"none",linkProps:{role:"menuitem"}},b(c?"FRONT.COMMENTS.UNMARK_RELEVANT":"FRONT.COMMENTS.MARK_RELEVANT")),z&&h.a.createElement(x.ListItem,{size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:I.gc,size:x.Size.xs}),onItemSelected:p,role:"none",linkProps:{role:"menuitem"}},b("FRONT.COMMENTS.REPORT"))))):null})),Ct=n(446),It=n(1121),Rt=n(121),wt=n(39),At=n(85),_t=n.n(At),Pt=n(1118),Mt=n(421),Dt=n(63),Bt=n.n(Dt),Ft=n(97),zt=n(1130),Ut=n(665),Gt=n(284),Ht=n.n(Gt),Kt=n(1126),Vt=n(1092),Wt=n(1093),Yt=n(1095),qt=n(1097),Qt=n(1100),Xt=n(794),Jt=n(242),Zt=n(1127),$t=n(1103),en=n(489),tn=[wt.Body,wt.Headline,wt.Title,wt.Subtitle,wt.Link,wt.Image,wt.UnorderedList,wt.OrderedList,wt.ListItem,wt.Table,wt.TableBody,wt.TableHead,wt.TH,wt.TR,wt.TD,wt.Preformatted,wt.Blockquote,wt.HR,wt.UserMention],nn=[wt.Bold,wt.Italic,wt.Underline,wt.Strikethrough,wt.Code],an=n(1125),on=function(e){var t=e.className,n=e.editableProps,a=e.editor,i=e.mentionsProps;i=void 0===i?{}:i;var o=i.mentionTarget,r=i.mentionTargetRef,c=i.search,l=Object(O.useRef)(null);if(o&&r)try{l.current=Rt.b.toDOMNode(a,a)}catch(e){l.current=void 0}return h.a.createElement(h.a.Fragment,null,h.a.createElement(Rt.a,_()({},n,{className:N()("wrex-editor",t)})),o&&r&&h.a.createElement(an.a,{inputRef:l,query:c,isOpen:!0,anchorRef:r,onUserSelect:function(e){a.insertMention(e,o)}}))};on.displayName="CommentEditor";var rn=n(330),cn=n(1119),ln=function(e){var t,n,a,i=e.comment,o=e.isAttachmentsLoading,r=e.legacyFallbackEditor,c=e.onInsertLink,l=e.onQuickUpload,s=e.onOpenFilePicker;return h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center,wrap:!0},!r.active&&h.a.createElement(h.a.Fragment,null,h.a.createElement(rn.d,{className:"lumx-flex-box lumx-flex-box--orientation-horizontal",iconSize:x.Size.s}),h.a.createElement(x.Divider,{style:{width:1,height:20},className:"lumx-spacing-margin-horizontal-tiny"})),h.a.createElement(rn.b,{multiple:!1,openFilePicker:s,onQuickUpload:l,disabled:(!i.images||0===i.images.length)&&(!i.files||0===i.files.length)&&Boolean(null===(t=i.links)||void 0===t?void 0:t.length),size:x.Size.s}),h.a.createElement(cn.a,{disabled:(!i.links||0===i.links.length)&&Boolean((null===(n=i.images)||void 0===n?void 0:n.length)||(null===(a=i.files)||void 0===a?void 0:a.length))||o,size:x.Size.s,onSubmit:c}),r.active&&h.a.createElement(x.IconButton,{emphasis:x.Emphasis.low,label:"",size:x.Size.s,onClick:r.toggleContentMode,icon:"edit"===r.contentMode?I.cb:I.nc}))},sn=n(352),un=function(e){var t=e.theme,n=e.comment,a=e.value,i=e.onChange,o=e.mode,r=void 0===o?"edit":o,c=e.placeholder,l=Object(O.useState)(2),s=j()(l,2),u=s[0],m=s[1],d=Object(O.useCallback)((function(e){i(e.target.value)}),[i]),p=Object(O.useRef)(null);Object(O.useEffect)((function(){var e=p.current;if(e&&a){e.rows=2;var t=Math.ceil(e.scrollHeight/20)+1;e.rows=t,m(t)}}),[p,a]);var g=Object(O.useMemo)((function(){return"preview"===r&&Object(qe.a)(a.trim(),en.a)}),[r,a]),b=Object(O.useCallback)((function(){p.current&&document.activeElement!==p.current&&p.current.focus()}),[]);return h.a.createElement(x.FlexBox,{orientation:x.Orientation.vertical,fillSpace:!0,onClick:b,className:"lumx-spacing-margin-top"},"edit"===r&&h.a.createElement("textarea",{ref:p,className:"wrex-textarea-editor comment-textarea-editor",rows:u,value:a,onChange:d,placeholder:c}),g&&h.a.createElement(Xe.a,{theme:t,content:g,elements:tn,marks:nn,post:n}))},mn="block-comment-editor",dn=[{type:wt.Body.displayName,children:[{text:""}]}],pn=Object(D.connect)((function(e,t){var n=Object(Ct.e)(e)({content:t.contentId,parent:t.parentId,id:t.commentId}),a=Object(Pe.b)(e),i=Object(Ct.d)(e),o=Object(It.a)(e),r=Object(Ct.f)(e)({content:t.contentId});return{comment:n,currentUser:a,currentEditor:i,currentLanguage:o,isSaving:r}}),(function(e,t){var n=function(t,n){var a=t.every((function(e){var t;return(null===(t=e.content)||void 0===t?void 0:t[0].type)===Je.b.IMAGE&&(e.from===Je.a.LUMDRIVE||e.source===Je.a.LUMDRIVE||e.source===Je.a.HAUSSMANN_MEDIA)}))?Je.b.IMAGE:Je.b.DOCUMENT,i=a===Je.b.DOCUMENT?t:[],o=a===Je.b.IMAGE?t:[];e(Nt.a.setEditedComment({content:n.content,parent:n.parent,id:n.id,files:i,images:o}))};return{onSave:function(n){e(Object(Tt.f)(n,(function(){n.id?t.onEditionSave&&t.onEditionSave():t.updateLegacyParentContent&&t.updateLegacyParentContent("COMMENT_ADD")})))},onContentChange:function(t,n){e(Nt.a.setEditedComment({text:t,content:n.content,id:n.id}))},onAttachmentsChange:n,onClearAttachments:function(t){e(Nt.a.setEditedComment({files:[],images:[],links:[],content:t.content,parent:t.parent,id:t.id,text:t.text}))},onQuickUpload:function(t,a,i){e(Object(Tt.e)(t,a,i,(function(e){return n(e,t)})))},onInsertLink:function(t,n){n.content&&e(Object(Tt.a)(t,n))}}}))((function(e){var t,n=e.className,a=e.theme,i=void 0===a?x.Theme.light:a,o=e.community,r=e.currentUser,c=e.currentLanguage,l=e.currentEditor,s=e.comment,u=e.isSaving,d=e.isReply,p=e.onSave,g=e.onInsertLink,b=e.onQuickUpload,f=e.onAttachmentsChange,E=e.onClearAttachments,v=window.location.hash.includes("comments")&&!(null==s?void 0:s.parent),L=Object(y.c)(),T=L.translateKey,k=L.translateObject,S=h.a.useState((null==s?void 0:s.text)||Bt()(dn)),C=j()(S,2),I=C[0],R=C[1],w=Object(zt.a)((null==s?void 0:s.text)||Bt()(dn)),A=Object(O.useMemo)((function(){return w.active?""===w.content:_t()(I,dn)}),[w.active,w.content,I]),_=T(d?"FRONT.COMMENTS.REPLY.EDITOR.PLACEHOLDER":"FRONT.COMMENTS.COMMENT.EDITOR.PLACEHOLDER"),P=Object(O.useMemo)((function(){var e=function(e,t,n){var a=Object(Vt.a)({plugins:[Rt.g,Kt.a,Wt.withTypography,Yt.withLink,Xt.withImage,Object(qt.withList)(wt.Body.displayName),Object(Qt.withSnippet)({"-":function(e){return e.setListType(wt.UnorderedList.displayName)},"\\*":function(e){return e.setListType(wt.UnorderedList.displayName)},"\\d+\\.":function(e){return e.setListType(wt.OrderedList.displayName)}}),Mt.c,Object(Zt.a)({placeholder:t,defaultContent:n}),Object($t.a)(en.a),Object(Jt.a)((function(e){var t=e.onChange;return{onChange:function(){t()}}}))],extraKeyHandlers:[Object(Ut.a)([{match:Ht()("mod+b"),handler:function(){return a.editor.toggleMark(wt.Bold.displayName)}},{match:Ht()("mod+i"),handler:function(){return a.editor.toggleMark(wt.Italic.displayName)}}],{preventDefault:!0})],elements:tn,marks:nn});return a}(U.a,_,dn);return e.editor&&e.editor.children.length>0&&R(e.editor.children),e}),[]),D=P.editor,B=M()(P,["editor"]),F=null==s?void 0:s.text;h.a.useEffect((function(){F&&!w.active&&(Rt.b.deselect(D),R(F))}),[F,D,w.active]),h.a.useEffect((function(){D&&l&&s&&s.isEditorVisible&&s.text&&s.content===l.contentId&&s.parent===l.parentId&&!w.active&&Object(Ft.b)(D)}),[s,l,D,w.active]);var z=Object(O.useCallback)((function(){Object(sn.a)([].concat(tt()((null==s?void 0:s.files)||[]),tt()((null==s?void 0:s.images)||[])),(function(e){s&&f([e],m({},s,{text:I}))}),{multi:!1,allowedProviders:[Je.a.LUMDRIVE,Je.a.GOOGLE_DRIVE,Je.a.MICROSOFT,Je.a.COMMUNITY],allowedFileTypes:["IMAGE","OTHER","FOLDER"]})}),[s,f,I]),G=h.a.useCallback((function(){if(s){var e=it()(Object(Mt.a)(D,D.children.length),"id");w.active?p(m({},s,{mentions:e,text:w.getSlateContent()})):(Rt.b.deselect(D),p(m({},s,{text:I,mentions:e})))}}),[s,D,w,p,I]),H=Object(Pt.a)((function(e){R(e)}),D),K=H.mentionTarget,V=H.mentionTargetRef,W=H.search,Y=H.handleChange;h.a.useEffect((function(){D&&s&&s.isEditorVisible&&!w.active&&v&&Object(Ft.b)(D)}),[s,D,w.active,v]);var q=Boolean(s&&s.images&&s.images.length),Q=Boolean(s&&s.files&&s.files.length),X=Boolean(s&&s.links&&s.links.length),J=q||Q||X,Z=Boolean(s&&s.isAttachmentsLoading),$=Object(O.useCallback)((function(e){u||A&&!J||Object(Ut.a)([{match:Ht()("mod+Enter"),handler:G}])(e)}),[u,A,J,G]);return s&&s.isEditorVisible?h.a.createElement(x.FlexBox,{className:N()(mn,"".concat(mn,"--theme-").concat(i),n,"lumx-comment-block","lumx-spacing-margin-bottom-big"),orientation:x.Orientation.horizontal},h.a.createElement(Rt.c,{editor:D,value:I,onChange:Y},h.a.createElement(x.FlexBox,{className:N()("".concat(mn,"__user-avatar"),"lumx-spacing-margin-right-big"),orientation:x.Orientation.vertical},h.a.createElement(x.Avatar,{image:Object(de.b)(r)||Te.a,alt:Object(we.a)(r,c)})),h.a.createElement(x.FlexBox,{orientation:x.Orientation.vertical,fillSpace:!0,style:{width:"calc(100% - 52px)"}},h.a.createElement("div",{onKeyDown:$,className:N()("".concat(mn,"__content-wrapper"),"lumx-color-background-dark-L6","lumx-spacing-padding-regular")},!w.active&&h.a.createElement(on,{editableProps:B,editor:D,mentionsProps:{mentionTarget:K,mentionTargetRef:V,search:W}}),w.active&&h.a.createElement(un,{value:w.content,onChange:w.onContentChange,mode:w.contentMode,placeholder:_,theme:i,comment:{}}),(J||Z)&&h.a.createElement(ft,{theme:i,onClearAttachments:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return E(s)})),images:s.images.map((function(e){var t=Object(Je.f)(e,k,c),n=Object(Je.d)(t);return{id:t.fileId,mediaId:t.fileId,url:n||"",thumbnail:(null==e?void 0:e.thumbnail)?{type:"BlockImage",url:k(e.thumbnail)}:void 0}})),files:s.files.map((function(e){var t=Object(Je.f)(e,k,c),n=Object(Je.d)(t);return{mediaId:e.uid,title:t.name||"",fileName:t.name||"",url:n||"",mimeType:t.mimeType||"",source:e.source,thumbnail:(null==e?void 0:e.thumbnail)?{type:"BlockImage",url:k(e.thumbnail)}:void 0}})),link:(null==s||null===(t=s.links)||void 0===t?void 0:t[0])?m({},s.links[0],{image:s.links[0].images[s.links[0].thumbnailIndex||0]}):void 0,community:o,isLoading:Z}),h.a.createElement(x.FlexBox,{hAlign:x.Alignment.center,className:"".concat(mn,"__footer"),orientation:x.Orientation.horizontal,wrap:!0},h.a.createElement(ln,{comment:s,isAttachmentsLoading:Boolean(s.isAttachmentsLoading),onInsertLink:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return g(e,m({},s,{text:I}))})),onOpenFilePicker:(null==o?void 0:o.hasSecureStorage)?void 0:z,onQuickUpload:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return b(m({},s,{text:I}),o,e)})),legacyFallbackEditor:w}),h.a.createElement(x.Button,{emphasis:x.Emphasis.low,size:x.Size.s,onClick:G,disabled:A&&!J||u,className:"lumx-flex-box--margin-auto-left"},T("GLOBAL.PUBLISH"))))))):null})),gn=Object(Ye.a)(),bn="comment",fn=function(e){var t,n=e.theme,a=void 0===n?x.Theme.light:n,i=e.comment,o=e.onReply,r=e.onLike,c=e.onTranslate,l=e.children,s=e.locale,u=e.canReport,m=e.onReport,d=e.onLikeListOpen,g=e.updateLegacyParentContent,b=e.className,f=i.uid,O=i.content,E=i.parent,v=i.authorProperties,L=i.createdAt,T=i.likes,k=i.liked,S=i.isLikeLoading,I=i.text,R=i.translatedText,w=i.mentionsDetails,A=i.markedAsRelevant,_=i.images,P=i.links,M=i.files,D=i.canMarkRelevant,B=i.canEdit,F=i.canHide,z=i.status,U=h.a.useState(!0),G=j()(U,2),H=G[0],K=G[1],V=Object(y.c)(),W=V.translateObject,Y=Boolean(l);return t=gn().diff(gn(L),"days")<2?gn.utc(L).local().fromNow():gn.utc(L).local().format("LL"),H?h.a.createElement(x.CommentBlock,{hasActions:!0,isOpen:Y,isRelevant:Boolean(A),avatarProps:{image:Object(de.b)(v),alt:v.fullName},name:v.fullName,date:t,theme:a,id:"".concat(bn,"--").concat(i.uid),"data-created-at":gn.utc(L).unix(),className:N()(bn,"".concat(bn,"--").concat(i.status.toLowerCase()),b),actions:h.a.createElement(C.a,null,h.a.createElement(We,{disabled:i.status===Qe.a.hide,likes:T,isLikeLoading:S,isLiked:Boolean(k),resourceId:f,resourceType:"comment",displayOptions:{variant:Ke.comment,buttonSize:x.Size.s,buttonColor:x.ColorPalette.dark,buttonClassName:i.status===Qe.a.hide?void 0:"lumx-color-font-dark-L3",showButtonLabels:!0,buttonEmphasis:x.Emphasis.high},onLikeListOpen:d,likesList:i.likesList,theme:a,onLike:r,onReply:o,type:"BlockReactions"})),headerActions:h.a.createElement(xt,{comment:p({},i,{text:Object(qe.a)(W(i.text)||"")}),status:z,canEdit:B,canHide:F,canMarkRelevant:D,markedAsRelevant:A,canReport:u,onEdit:function(){K(!1)},onReport:m,updateLegacyParentContent:g}),text:h.a.createElement(Lt,{uid:f,content:O,parent:E,text:I,translatedText:R,onTranslate:c,files:M,links:P,images:_,mentionsDetails:w,locale:s,theme:a})},l):h.a.createElement(pn,{className:"lumx-spacing-margin-bottom-huge",onEditionSave:function(){K(!0)},contentId:i.content,parentId:i.parent,commentId:i.id})},On=n(3340),hn=n.n(On),En=n(401),vn=n.n(En),yn="comment-skeleton",Ln=function(e){var t=Object.assign({},e),n=t.className;return O.createElement(x.FlexBox,_()({className:N()(yn,n),orientation:x.Orientation.horizontal},t),O.createElement(me.b,{className:"".concat(yn,"__avatar"),type:me.a.CIRCLE}),O.createElement("div",{className:"".concat(yn,"__content")},O.createElement(me.b,{type:me.a.RECTANGLE,style:{height:"60px",width:"100%"}}),O.createElement(me.b,{type:me.a.RECTANGLE,style:{height:"10px",maxWidth:"152px",width:"100%"},className:"lumx-spacing-margin-top-big"})))},Nn=function(e){var t=e.children;return h.a.createElement("h3",{className:N()("comments-section-title","lumx-spacing-margin-vertical-huge lumx-color-font-dark-L2 lumx-typography-overline")},t)},Tn="comments-skeleton",kn=function(e){var t=e.commentNumber,n=void 0===t?3:t,a=e.title,i=e.showLoadMoreButton,o=void 0===i||i,r=e.showTitle,c=void 0===r||r,l=M()(e,["commentNumber","title","showLoadMoreButton","showTitle"]),s=l.className;return O.createElement("div",_()({className:N()(Tn,s)},l),c&&(a?O.createElement(Nn,null,a):O.createElement(me.b,{className:"".concat(Tn,"__title lumx-spacing-margin-vertical-big"),type:me.a.RECTANGLE,style:{height:"10px",maxWidth:"152px",width:"100%"}})),new Array(n).fill(null).map((function(e,t){return O.createElement(Ln,{key:t,className:"lumx-spacing-margin-bottom-big"})})),o&&O.createElement(me.b,{className:"".concat(Tn,"__button lumx-spacing-margin-top-huge"),type:me.a.RECTANGLE,style:{height:"10px",maxWidth:"152px",width:"100%"}}))},Sn=function(e){var t=e.direction,n=e.label,a=e.onClick,i=e.className,o=M()(e,["direction","label","onClick","className"]);return h.a.createElement(x.Link,_()({className:N()(i),style:{display:"inline-block"},onClick:a},o),h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center},h.a.createElement(x.Icon,{icon:"down"===t?I.D:I.G,size:x.Size.xs,className:"lumx-spacing-margin-right-tiny"}),h.a.createElement("span",{className:"lumx-typography-body1"},n)))},jn=function(e){var t=e.replies,n=void 0===t?[]:t,a=e.total,i=void 0===a?n.length:a,o=e.repliesPerPage,r=void 0===o?10:o,c=e.loadingMore,l=e.locale,s=e.onCommentReply,u=e.onCommentLike,m=e.onShowMore,d=e.onShowLess,p=e.onLikeListOpen,g=e.onTranslate,b=Object(y.c)(),f=b.translateKey,O=b.pluralize,E=hn()(n),v=E[0],L=E.slice(1),T=i-n.length,k=n.length<i,S=h.a.useState(!1),x=j()(S,2),C=x[0],I=x[1],R=T<r?T:r,w=C?L.length:R,A=O(f("FRONT.COMMENTS.REPLIES.DISPLAY_MORE"),w).replace("%NB%","".concat(w)),_=f("FRONT.COMMENTS.REPLIES.DISPLAY_LESS"),P=function(e){return function(){return u(e)}},M=function(e){return s?function(){return s(e)}:void 0};return 0===n.length?null:h.a.createElement(h.a.Fragment,null,h.a.createElement(fn,{locale:l,comment:v,onLike:P(v),onReply:M(v),onTranslate:g,onLikeListOpen:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return p(v)}))}),!C&&L.length>0&&L.map((function(e,t){return h.a.createElement(fn,{key:e.uid,className:N()({"comment-block--last":t===i-2}),locale:l,comment:e,onLike:P(e),onLikeListOpen:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return p(e)})),onReply:M(e),onTranslate:g})})),c&&Array(R>0?R:1).fill(h.a.createElement(kn,{key:vn()("comment-skeleton-"),className:"lumx-spacing-margin-top-big",showTitle:!1,commentNumber:c})),!c&&i>1&&h.a.createElement(Sn,{direction:k||C?"down":"up",onClick:k||C?function(){m(k),I(!1)}:function(){d(),I(!0)},label:k||C?A:_,className:"".concat("comment-replies","__").concat(k||C?"toggle-display--more":"toggle-display--less")}))},xn="comments",Cn=function(e){var t=e.title,n=e.comments,a=void 0===n?[]:n,i=e.more,o=e.loadingMore,r=e.community,c=e.locale,l=e.onLike,s=e.onReply,u=e.onTranslate,m=e.onDisplayMoreReplies,d=e.onDisplayLessReplies,p=e.onDisplayMoreComments,g=e.onLikeListOpen,b=e.contentId,f=e.updateLegacyParentContent,O=e.className,E=Object(y.c)(),v=E.translateKey;return h.a.createElement("div",{className:N()(xn,O)},t&&h.a.createElement(Nn,null,t),a.map((function(e){var t=e.comment,n=e.replies,a=e.loadingMore;return h.a.createElement(fn,{key:t.uid,locale:c,comment:t,onLike:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return l(t)})),onLikeListOpen:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return g(t)})),onReply:s?function(){return s(t)}:void 0,onTranslate:u,updateLegacyParentContent:f},n&&n.length>0&&h.a.createElement(jn,{locale:c,replies:n,total:t.answersNumber,onCommentLike:l,onCommentReply:s,onShowMore:function(e){return m(t,e)},onShowLess:function(){return d(t.uid)},onTranslate:u,onLikeListOpen:g,loadingMore:a}),h.a.createElement(pn,{community:r,contentId:b,parentId:t.uid,isReply:!0,className:"lumx-spacing-margin-top-big",updateLegacyParentContent:f}))})),o&&h.a.createElement(kn,{className:"lumx-spacing-margin-top-big",showTitle:!1,commentNumber:o}),!o&&i&&h.a.createElement(Sn,{onClick:p,direction:"down",label:v("FRONT.COMMENTS.DISPLAY_MORE"),className:"".concat(xn,"__toggle-display--more")}))};t.default=function(e){var t,n=e.isLoading,a=e.contentId,i=e.canComment,o=e.comments,r=e.community,c=e.locale,l=e.relevantComment,s=e.shouldDisplayTitle,u=e.onLike,m=e.onReply,d=e.onDisplayMoreReplies,p=e.onDisplayLessReplies,g=e.onDisplayMoreComments,b=e.onLikeListOpen,f=e.onTranslate,O=e.updateLegacyParentContent,E=e.displayNumber,L=e.totalComments,N=void 0===L?0:L,T=e.more,k=Object(y.c)(),S=k.translateKey,j=v()(o,(function(e){var t=e.comment;return!t.markedAsRelevant})),x=i?m:void 0;return E?t=E>N?E:N:N>0&&(t=N),h.a.createElement(h.a.Fragment,null,s&&h.a.createElement("h3",{className:"lumx-typography-subtitle2 lumx-spacing-margin-top-big lumx-spacing-margin-huge"},S("WIDGET_TYPE_COMMENTS")),i&&h.a.createElement(pn,{community:r,className:"lumx-spacing-margin-horizontal-huge lumx-spacing-margin-top-huge",contentId:a,updateLegacyParentContent:O}),n?h.a.createElement("div",{className:"lumx-spacing-margin-huge"},h.a.createElement(kn,{commentNumber:t})):h.a.createElement(h.a.Fragment,null,l&&h.a.createElement(Cn,{title:S("FRONT.WIDGET.WIDGET_COMMENTS.RELEVANT_COMMENT.TITLE"),community:r,locale:c,comments:[l],onLike:u,onReply:x,onTranslate:f,onDisplayMoreComments:g,onDisplayMoreReplies:function(e,t){d(e.uid,t),x&&x(e,!1)},onDisplayLessReplies:function(e){p(e)},onLikeListOpen:b,contentId:a,updateLegacyParentContent:O,className:"lumx-spacing-padding-bottom-none"}),(null==j?void 0:j.length)>0&&h.a.createElement(Cn,{locale:c,title:S("GLOBAL.MOST_RECENT"),comments:j,community:r,more:T,onLike:u,onReply:x,onTranslate:f,onDisplayMoreComments:g,onDisplayMoreReplies:function(e,t){d(e.uid,t),x&&x(e,!1)},onDisplayLessReplies:function(e){p(e)},contentId:a,onLikeListOpen:b,updateLegacyParentContent:O})))}}}]);
//# sourceMappingURL=widget-post-list-block-post.js.map